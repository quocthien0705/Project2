{"version":3,"file":"TableCellSelection.js","sourceRoot":"","sources":["../../../../../packages/roosterjs-editor-plugins/lib/plugins/TableCellSelection/TableCellSelection.ts"],"names":[],"mappings":";;AAAA,iDAAgD;AAChD,sEAAqE;AACrE,oEAAmE;AACnE,gEAA+D;AAC/D,0EAAyE;AACzE,oEAAmE;AAKnE;;GAEG;AACH;IAII;QAHQ,WAAM,GAAmB,IAAI,CAAC;QAIlC,IAAI,CAAC,KAAK,GAAG;YACT,UAAU,EAAE,IAAI;YAChB,UAAU,EAAE,IAAI;YAChB,WAAW,EAAE,IAAI;YACjB,YAAY,EAAE,KAAK;YACnB,gBAAgB,EAAE,KAAK;YACvB,cAAc,EAAE,KAAK;YACrB,WAAW,EAAE,IAAI;YACjB,MAAM,EAAE,IAAI;YACZ,iBAAiB,EAAE,IAAI;SAC1B,CAAC;IACN,CAAC;IAED;;OAEG;IACH,oCAAO,GAAP;QACI,OAAO,oBAAoB,CAAC;IAChC,CAAC;IAED;;;OAGG;IACH,uCAAU,GAAV,UAAW,MAAe;QACtB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,yCAAmB,CAAC,CAAC;IAC3D,CAAC;IAED;;OAEG;IACH,oCAAO,GAAP;QACI,IAAA,uBAAU,EAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACpC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACvB,CAAC;IAED;;;OAGG;IACH,0CAAa,GAAb,UAAc,KAAkB;QAC5B,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,EAAE;YAC3B,QAAQ,KAAK,CAAC,SAAS,EAAE;gBACrB;oBACI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;wBAC9B,IAAA,2CAAoB,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;qBACxD;oBACD,MAAM;gBACV;oBACI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;wBAC9B,IAAA,uCAAkB,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;qBACtD;yBAAM;wBACH,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;qBACnC;oBACD,MAAM;gBACV;oBACI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;wBAC9B,IAAA,mCAAgB,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;qBACpD;yBAAM;wBACH,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;qBACnC;oBACD,MAAM;gBACV;oBACI,IAAI,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;wBAC7B,IAAA,qCAAiB,EAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;qBAC9C;oBACD,MAAM;gBACV;oBACI,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC;oBAC7B,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,KAAK,CAAC;oBAClC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;oBACzB,MAAM;aACb;SACJ;IACL,CAAC;IACL,yBAAC;AAAD,CAAC,AAlFD,IAkFC","sourcesContent":["import { clearState } from './utils/clearState';\nimport { DeleteTableContents } from './features/DeleteTableContents';\nimport { handleKeyDownEvent } from './keyUtils/handleKeyDownEvent';\nimport { handleKeyUpEvent } from './keyUtils/handleKeyUpEvent';\nimport { handleMouseDownEvent } from './mouseUtils/handleMouseDownEvent';\nimport { handleScrollEvent } from './mouseUtils/handleScrollEvent';\nimport { PluginEventType } from 'roosterjs-editor-types';\nimport type { TableCellSelectionState } from './TableCellSelectionState';\nimport type { EditorPlugin, IEditor, PluginEvent } from 'roosterjs-editor-types';\n\n/**\n * TableCellSelectionPlugin help highlight table cells\n */\nexport default class TableCellSelection implements EditorPlugin {\n    private editor: IEditor | null = null;\n    private state: TableCellSelectionState | null;\n\n    constructor() {\n        this.state = {\n            firstTable: null,\n            lastTarget: null,\n            firstTarget: null,\n            preventKeyUp: false,\n            startedSelection: false,\n            tableSelection: false,\n            targetTable: null,\n            vTable: null,\n            mouseMoveDisposer: null,\n        };\n    }\n\n    /**\n     * Get a friendly name of  this plugin\n     */\n    getName() {\n        return 'TableCellSelection';\n    }\n\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    initialize(editor: IEditor) {\n        this.editor = editor;\n        this.editor.addContentEditFeature(DeleteTableContents);\n    }\n\n    /**\n     * Dispose this plugin\n     */\n    dispose() {\n        clearState(this.state, this.editor);\n        this.state = null;\n        this.editor = null;\n    }\n\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    onPluginEvent(event: PluginEvent) {\n        if (this.editor && this.state) {\n            switch (event.eventType) {\n                case PluginEventType.MouseDown:\n                    if (!this.state.startedSelection) {\n                        handleMouseDownEvent(event, this.state, this.editor);\n                    }\n                    break;\n                case PluginEventType.KeyDown:\n                    if (!this.state.startedSelection) {\n                        handleKeyDownEvent(event, this.state, this.editor);\n                    } else {\n                        event.rawEvent.preventDefault();\n                    }\n                    break;\n                case PluginEventType.KeyUp:\n                    if (!this.state.startedSelection) {\n                        handleKeyUpEvent(event, this.state, this.editor);\n                    } else {\n                        event.rawEvent.preventDefault();\n                    }\n                    break;\n                case PluginEventType.Scroll:\n                    if (this.state.startedSelection) {\n                        handleScrollEvent(this.state, this.editor);\n                    }\n                    break;\n                case PluginEventType.BeforeSetContent:\n                    this.state.firstTable = null;\n                    this.state.tableSelection = false;\n                    this.editor.select(null);\n                    break;\n            }\n        }\n    }\n}\n"]}