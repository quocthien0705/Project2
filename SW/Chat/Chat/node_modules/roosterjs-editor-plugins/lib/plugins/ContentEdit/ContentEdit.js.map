{"version":3,"file":"ContentEdit.js","sourceRoot":"","sources":["../../../../../packages/roosterjs-editor-plugins/lib/plugins/ContentEdit/ContentEdit.ts"],"names":[],"mappings":";;AAAA,mDAA8C;AAC9C,6DAAqD;AASrD;;;;;;;;;;;GAWG;AACH;IAGI;;;;OAIG;IACH,qBACY,gBAAsD,EACtD,kBAA6D;QAD7D,qBAAgB,GAAhB,gBAAgB,CAAsC;QACtD,uBAAkB,GAAlB,kBAAkB,CAA2C;QATjE,WAAM,GAAwB,SAAS,CAAC;QACxC,aAAQ,GAA6C,EAAE,CAAC;IAS7D,CAAC;IAEJ;;OAEG;IACH,6BAAO,GAAP;QACI,OAAO,aAAa,CAAC;IACzB,CAAC;IAED;;;OAGG;IACH,gCAAU,GAAV,UAAW,MAAe;QAA1B,iBAiBC;QAhBG,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAM,WAAW,GAAG,IAAA,wBAAc,GAAE,CAAC;QACrC,IAAA,oCAAa,EAAC,WAAW,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG;;YAClC,IAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;YACjC,IAAM,gBAAgB,GAClB,KAAI,CAAC,gBAAgB,IAAI,KAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC;YAEtE,IACI,CAAC,gBAAgB,KAAI,MAAA,KAAI,CAAC,gBAAgB,0CAAG,GAAG,CAAC,CAAA,CAAC;gBAClD,CAAC,CAAC,gBAAgB,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,EACjD;gBACE,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC/B;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,EAAE,CAAC,CAAC;QACpE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO,YAAI,OAAA,MAAA,KAAI,CAAC,MAAM,0CAAE,qBAAqB,CAAC,OAAO,CAAC,CAAA,EAAA,CAAC,CAAC;IAClF,CAAC;IAEO,qCAAe,GAAvB;QAAA,iBAKC;QAJG,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO,IAAI,OAAA,KAAI,CAAC,MAAO,CAAC,wBAAwB,CAAC,OAAO,CAAC,EAA9C,CAA8C,CAAC,CAAC;SACpF;QACD,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACvB,CAAC;IAED;;OAEG;IACH,6BAAO,GAAP;QACI,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;IAC5B,CAAC;IACL,kBAAC;AAAD,CAAC,AAzDD,IAyDC","sourcesContent":["import getAllFeatures from './getAllFeatures';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport type {\n    ContentEditFeatureSettings,\n    EditorPlugin,\n    GenericContentEditFeature,\n    IEditor,\n    PluginEvent,\n} from 'roosterjs-editor-types';\n\n/**\n * An editor plugin to handle content edit event.\n * The following cases are included:\n * 1. Auto increase/decrease indentation on Tab, Shift+tab\n * 2. Enter, Backspace on empty list item\n * 3. Enter, Backspace on empty blockquote line\n * 4. Auto bullet/numbering\n * 5. Auto link\n * 6. Tab in table\n * 7. Up/Down in table\n * 8. Manage list style\n */\nexport default class ContentEdit implements EditorPlugin {\n    private editor: IEditor | undefined = undefined;\n    private features: GenericContentEditFeature<PluginEvent>[] = [];\n    /**\n     * Create instance of ContentEdit plugin\n     * @param settingsOverride An optional feature set to override default feature settings\n     * @param additionalFeatures Optional. More features to add\n     */\n    constructor(\n        private settingsOverride?: Partial<ContentEditFeatureSettings>,\n        private additionalFeatures?: GenericContentEditFeature<PluginEvent>[]\n    ) {}\n\n    /**\n     * Get a friendly name of  this plugin\n     */\n    getName() {\n        return 'ContentEdit';\n    }\n\n    /**\n     * Initialize this plugin\n     * @param editor The editor instance\n     */\n    initialize(editor: IEditor): void {\n        this.editor = editor;\n        const allFeatures = getAllFeatures();\n        getObjectKeys(allFeatures).forEach(key => {\n            const feature = allFeatures[key];\n            const hasSettingForKey =\n                this.settingsOverride && this.settingsOverride[key] !== undefined;\n\n            if (\n                (hasSettingForKey && this.settingsOverride?.[key]) ||\n                (!hasSettingForKey && !feature.defaultDisabled)\n            ) {\n                this.features.push(feature);\n            }\n        });\n        this.features = this.features.concat(this.additionalFeatures || []);\n        this.features.forEach(feature => this.editor?.addContentEditFeature(feature));\n    }\n\n    private disposeFeatures() {\n        if (this.editor) {\n            this.features.forEach(feature => this.editor!.removeContentEditFeature(feature));\n        }\n        this.features = [];\n    }\n\n    /**\n     * Dispose this plugin\n     */\n    dispose(): void {\n        this.disposeFeatures();\n        this.editor = undefined;\n    }\n}\n"]}