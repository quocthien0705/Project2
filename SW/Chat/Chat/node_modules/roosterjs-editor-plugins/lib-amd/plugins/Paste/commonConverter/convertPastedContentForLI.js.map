{"version":3,"file":"convertPastedContentForLI.js","sourceRoot":"","sources":["../../../../../../packages/roosterjs-editor-plugins/lib/plugins/Paste/commonConverter/convertPastedContentForLI.ts"],"names":[],"mappings":";;;IAQA;;;OAGG;IACH,SAAwB,yBAAyB,CAAC,QAA0B;QACxE,oEAAoE;QACpE,iGAAiG;QACjG,gEAAgE;QAChE,IAAI,YAAY,CAAC,QAAQ,CAAC,EAAE;YACxB,IAAA,2BAAI,EAAC,IAAA,8BAAO,EAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,IAAI,CAAC,CAAC;SAC5C;aAAM,IACH,IAAA,qCAAc,EAAC,QAAQ,CAAC,UAAU,EAAE,aAAa,CAAC;YAClD,YAAY,CAAC,QAAQ,CAAC,UAAU,CAAC,EACnC;YACE,IAAA,uCAAgB,EAAC,QAAQ,CAAC,UAAyB,EAAE,IAAI,CAAC,CAAC;SAC9D;IACL,CAAC;IAZD,4CAYC;IAED,SAAS,YAAY,CAAC,IAAuB;QACzC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,IAAA,mCAAY,EAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE;YACnF,IAAI,OAAK,GAAG,KAAK,CAAC;YAClB,IACI,IAAA,8BAAO,EAAC,IAAI,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,UAAA,SAAS;;gBACpC,IAAI,IAAA,qCAAc,EAAC,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,CAAA,MAAA,SAAS,CAAC,SAAS,0CAAE,IAAI,EAAE,CAAA,EAAE;oBACnE,OAAO,IAAI,CAAC;iBACf;qBAAM,IAAI,IAAA,mCAAY,EAAC,SAAS,CAAC,IAAI,IAAI,EAAE;oBACxC,OAAK,GAAG,IAAI,CAAC;oBACb,OAAO,IAAI,CAAC;iBACf;qBAAM;oBACH,OAAO,KAAK,CAAC;iBAChB;YACL,CAAC,CAAC;gBACF,OAAK,EACP;gBACE,OAAO,IAAI,CAAC;aACf;SACJ;QACD,OAAO,KAAK,CAAC;IACjB,CAAC","sourcesContent":["import {\n    changeElementTag,\n    getTagOfNode,\n    toArray,\n    wrap,\n    safeInstanceOf,\n} from 'roosterjs-editor-dom';\n\n/**\n * @internal\n * Convert content copied from Teams to be well-formed\n */\nexport default function convertPastedContentForLI(fragment: DocumentFragment) {\n    // Sometimes it is possible that we get LI nodes directly under DIV.\n    // In that case we need to convert DIV to UL. It is also possible to be OL, but we don't know it.\n    // So always assume it is UL here, and later user can change it.\n    if (isPureLiNode(fragment)) {\n        wrap(toArray(fragment.childNodes), 'UL');\n    } else if (\n        safeInstanceOf(fragment.firstChild, 'HTMLElement') &&\n        isPureLiNode(fragment.firstChild)\n    ) {\n        changeElementTag(fragment.firstChild as HTMLElement, 'UL');\n    }\n}\n\nfunction isPureLiNode(node: ParentNode & Node) {\n    if (node && !node.nextSibling && ['OL', 'UL', 'MENU'].indexOf(getTagOfNode(node)) < 0) {\n        let hasLi = false;\n        if (\n            toArray(node.childNodes).every(childNode => {\n                if (safeInstanceOf(childNode, 'Text') && !childNode.nodeValue?.trim()) {\n                    return true;\n                } else if (getTagOfNode(childNode) == 'LI') {\n                    hasLi = true;\n                    return true;\n                } else {\n                    return false;\n                }\n            }) &&\n            hasLi\n        ) {\n            return true;\n        }\n    }\n    return false;\n}\n"]}