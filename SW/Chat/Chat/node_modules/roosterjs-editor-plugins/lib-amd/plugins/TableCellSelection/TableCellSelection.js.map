{"version":3,"file":"TableCellSelection.js","sourceRoot":"","sources":["../../../../../packages/roosterjs-editor-plugins/lib/plugins/TableCellSelection/TableCellSelection.ts"],"names":[],"mappings":";;;IAUA;;OAEG;IACH;QAII;YAHQ,WAAM,GAAmB,IAAI,CAAC;YAIlC,IAAI,CAAC,KAAK,GAAG;gBACT,UAAU,EAAE,IAAI;gBAChB,UAAU,EAAE,IAAI;gBAChB,WAAW,EAAE,IAAI;gBACjB,YAAY,EAAE,KAAK;gBACnB,gBAAgB,EAAE,KAAK;gBACvB,cAAc,EAAE,KAAK;gBACrB,WAAW,EAAE,IAAI;gBACjB,MAAM,EAAE,IAAI;gBACZ,iBAAiB,EAAE,IAAI;aAC1B,CAAC;QACN,CAAC;QAED;;WAEG;QACH,oCAAO,GAAP;YACI,OAAO,oBAAoB,CAAC;QAChC,CAAC;QAED;;;WAGG;QACH,uCAAU,GAAV,UAAW,MAAe;YACtB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,yCAAmB,CAAC,CAAC;QAC3D,CAAC;QAED;;WAEG;QACH,oCAAO,GAAP;YACI,IAAA,uBAAU,EAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAClB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,CAAC;QAED;;;WAGG;QACH,0CAAa,GAAb,UAAc,KAAkB;YAC5B,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,EAAE;gBAC3B,QAAQ,KAAK,CAAC,SAAS,EAAE;oBACrB;wBACI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;4BAC9B,IAAA,2CAAoB,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;yBACxD;wBACD,MAAM;oBACV;wBACI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;4BAC9B,IAAA,uCAAkB,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;yBACtD;6BAAM;4BACH,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;yBACnC;wBACD,MAAM;oBACV;wBACI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;4BAC9B,IAAA,mCAAgB,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;yBACpD;6BAAM;4BACH,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;yBACnC;wBACD,MAAM;oBACV;wBACI,IAAI,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;4BAC7B,IAAA,qCAAiB,EAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;yBAC9C;wBACD,MAAM;oBACV;wBACI,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC;wBAC7B,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,KAAK,CAAC;wBAClC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;wBACzB,MAAM;iBACb;aACJ;QACL,CAAC;QACL,yBAAC;IAAD,CAAC,AAlFD,IAkFC","sourcesContent":["import { clearState } from './utils/clearState';\nimport { DeleteTableContents } from './features/DeleteTableContents';\nimport { handleKeyDownEvent } from './keyUtils/handleKeyDownEvent';\nimport { handleKeyUpEvent } from './keyUtils/handleKeyUpEvent';\nimport { handleMouseDownEvent } from './mouseUtils/handleMouseDownEvent';\nimport { handleScrollEvent } from './mouseUtils/handleScrollEvent';\nimport { PluginEventType } from 'roosterjs-editor-types';\nimport type { TableCellSelectionState } from './TableCellSelectionState';\nimport type { EditorPlugin, IEditor, PluginEvent } from 'roosterjs-editor-types';\n\n/**\n * TableCellSelectionPlugin help highlight table cells\n */\nexport default class TableCellSelection implements EditorPlugin {\n    private editor: IEditor | null = null;\n    private state: TableCellSelectionState | null;\n\n    constructor() {\n        this.state = {\n            firstTable: null,\n            lastTarget: null,\n            firstTarget: null,\n            preventKeyUp: false,\n            startedSelection: false,\n            tableSelection: false,\n            targetTable: null,\n            vTable: null,\n            mouseMoveDisposer: null,\n        };\n    }\n\n    /**\n     * Get a friendly name of  this plugin\n     */\n    getName() {\n        return 'TableCellSelection';\n    }\n\n    /**\n     * Initialize this plugin. This should only be called from Editor\n     * @param editor Editor instance\n     */\n    initialize(editor: IEditor) {\n        this.editor = editor;\n        this.editor.addContentEditFeature(DeleteTableContents);\n    }\n\n    /**\n     * Dispose this plugin\n     */\n    dispose() {\n        clearState(this.state, this.editor);\n        this.state = null;\n        this.editor = null;\n    }\n\n    /**\n     * Handle events triggered from editor\n     * @param event PluginEvent object\n     */\n    onPluginEvent(event: PluginEvent) {\n        if (this.editor && this.state) {\n            switch (event.eventType) {\n                case PluginEventType.MouseDown:\n                    if (!this.state.startedSelection) {\n                        handleMouseDownEvent(event, this.state, this.editor);\n                    }\n                    break;\n                case PluginEventType.KeyDown:\n                    if (!this.state.startedSelection) {\n                        handleKeyDownEvent(event, this.state, this.editor);\n                    } else {\n                        event.rawEvent.preventDefault();\n                    }\n                    break;\n                case PluginEventType.KeyUp:\n                    if (!this.state.startedSelection) {\n                        handleKeyUpEvent(event, this.state, this.editor);\n                    } else {\n                        event.rawEvent.preventDefault();\n                    }\n                    break;\n                case PluginEventType.Scroll:\n                    if (this.state.startedSelection) {\n                        handleScrollEvent(this.state, this.editor);\n                    }\n                    break;\n                case PluginEventType.BeforeSetContent:\n                    this.state.firstTable = null;\n                    this.state.tableSelection = false;\n                    this.editor.select(null);\n                    break;\n            }\n        }\n    }\n}\n"]}