{"version":3,"file":"DeleteTableContents.js","sourceRoot":"","sources":["../../../../../../packages/roosterjs-editor-plugins/lib/plugins/TableCellSelection/features/DeleteTableContents.ts"],"names":[],"mappings":";;;;IAKA;;;OAGG;IACU,QAAA,mBAAmB,GAA2C;QACvE,IAAI,EAAE,oCAA6B;QACnC,iBAAiB,EAAE,UAAC,CAAC,EAAE,MAAe;YAClC,IAAM,SAAS,GAAG,MAAM,CAAC,mBAAmB,EAAE,CAAC;YAC/C,OAAO,SAAS,CAAC,IAAI,0BAAsC,CAAC;QAChE,CAAC;QACD,WAAW,EAAE,UAAC,CAAC,EAAE,MAAM;YACnB,IAAM,SAAS,GAAG,MAAM,CAAC,mBAAmB,EAAE,CAAC;YAC/C,IAAI,SAAS,CAAC,IAAI,0BAAsC,EAAE;gBACtD,MAAM,CAAC,eAAe,CAAC;oBACnB,IAAI,SAAS,CAAC,oBAAoB,EAAE;wBAChC,SAAS,CAAC,KAAK;6BACV,gBAAgB,CAAC,+BAAmB,CAAC;6BACrC,OAAO,CAAC,UAAA,EAAE,IAAI,OAAA,kBAAkB,CAAC,EAAE,EAAE,MAAM,CAAC,EAA9B,CAA8B,CAAC,CAAC;qBACtD;yBAAM;wBACH,MAAM;6BACD,kBAAkB,EAAE;6BACpB,OAAO,CAAC,UAAA,MAAM,IAAI,OAAA,kBAAkB,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,EAA3C,CAA2C,CAAC,CAAC;qBACvE;gBACL,CAAC,CAAC,CAAC;aACN;QACL,CAAC;KACJ,CAAC;IAEF,SAAS,kBAAkB,CAAC,OAAa,EAAE,MAAe;QACtD,IAAI,IAAA,qCAAc,EAAC,OAAO,EAAE,sBAAsB,CAAC,EAAE;YACjD,IAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;YAC1B,KAAK,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;YAClC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;SACjE;IACL,CAAC","sourcesContent":["import { Keys, SelectionRangeTypes } from 'roosterjs-editor-types';\nimport { safeInstanceOf } from 'roosterjs-editor-dom';\nimport { TABLE_CELL_SELECTOR } from '../constants';\nimport type { GenericContentEditFeature, IEditor, PluginEvent } from 'roosterjs-editor-types';\n\n/**\n * @internal\n * Feature that when Backspace is pressed and there is Table Selection, delete the contents inside of the selection\n */\nexport const DeleteTableContents: GenericContentEditFeature<PluginEvent> = {\n    keys: [Keys.DELETE, Keys.BACKSPACE],\n    shouldHandleEvent: (_, editor: IEditor) => {\n        const selection = editor.getSelectionRangeEx();\n        return selection.type == SelectionRangeTypes.TableSelection;\n    },\n    handleEvent: (_, editor) => {\n        const selection = editor.getSelectionRangeEx();\n        if (selection.type == SelectionRangeTypes.TableSelection) {\n            editor.addUndoSnapshot(() => {\n                if (selection.isWholeTableSelected) {\n                    selection.table\n                        .querySelectorAll(TABLE_CELL_SELECTOR)\n                        .forEach(td => deleteNodeContents(td, editor));\n                } else {\n                    editor\n                        .getSelectedRegions()\n                        .forEach(region => deleteNodeContents(region.rootNode, editor));\n                }\n            });\n        }\n    },\n};\n\nfunction deleteNodeContents(element: Node, editor: IEditor) {\n    if (safeInstanceOf(element, 'HTMLTableCellElement')) {\n        const range = new Range();\n        range.selectNodeContents(element);\n        range.deleteContents();\n        element.appendChild(editor.getDocument().createElement('br'));\n    }\n}\n"]}