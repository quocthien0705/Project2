{"version":3,"file":"ContentEdit.js","sourceRoot":"","sources":["../../../../../packages/roosterjs-editor-plugins/lib/plugins/ContentEdit/ContentEdit.ts"],"names":[],"mappings":";;;IAUA;;;;;;;;;;;OAWG;IACH;QAGI;;;;WAIG;QACH,qBACY,gBAAsD,EACtD,kBAA6D;YAD7D,qBAAgB,GAAhB,gBAAgB,CAAsC;YACtD,uBAAkB,GAAlB,kBAAkB,CAA2C;YATjE,WAAM,GAAwB,SAAS,CAAC;YACxC,aAAQ,GAA6C,EAAE,CAAC;QAS7D,CAAC;QAEJ;;WAEG;QACH,6BAAO,GAAP;YACI,OAAO,aAAa,CAAC;QACzB,CAAC;QAED;;;WAGG;QACH,gCAAU,GAAV,UAAW,MAAe;YAA1B,iBAiBC;YAhBG,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAM,WAAW,GAAG,IAAA,wBAAc,GAAE,CAAC;YACrC,IAAA,oCAAa,EAAC,WAAW,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG;;gBAClC,IAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC;gBACjC,IAAM,gBAAgB,GAClB,KAAI,CAAC,gBAAgB,IAAI,KAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC;gBAEtE,IACI,CAAC,gBAAgB,KAAI,MAAA,KAAI,CAAC,gBAAgB,0CAAG,GAAG,CAAC,CAAA,CAAC;oBAClD,CAAC,CAAC,gBAAgB,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,EACjD;oBACE,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC/B;YACL,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,IAAI,EAAE,CAAC,CAAC;YACpE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO,YAAI,OAAA,MAAA,KAAI,CAAC,MAAM,0CAAE,qBAAqB,CAAC,OAAO,CAAC,CAAA,EAAA,CAAC,CAAC;QAClF,CAAC;QAEO,qCAAe,GAAvB;YAAA,iBAKC;YAJG,IAAI,IAAI,CAAC,MAAM,EAAE;gBACb,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,OAAO,IAAI,OAAA,KAAI,CAAC,MAAO,CAAC,wBAAwB,CAAC,OAAO,CAAC,EAA9C,CAA8C,CAAC,CAAC;aACpF;YACD,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACvB,CAAC;QAED;;WAEG;QACH,6BAAO,GAAP;YACI,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;QAC5B,CAAC;QACL,kBAAC;IAAD,CAAC,AAzDD,IAyDC","sourcesContent":["import getAllFeatures from './getAllFeatures';\nimport { getObjectKeys } from 'roosterjs-editor-dom';\nimport type {\n    ContentEditFeatureSettings,\n    EditorPlugin,\n    GenericContentEditFeature,\n    IEditor,\n    PluginEvent,\n} from 'roosterjs-editor-types';\n\n/**\n * An editor plugin to handle content edit event.\n * The following cases are included:\n * 1. Auto increase/decrease indentation on Tab, Shift+tab\n * 2. Enter, Backspace on empty list item\n * 3. Enter, Backspace on empty blockquote line\n * 4. Auto bullet/numbering\n * 5. Auto link\n * 6. Tab in table\n * 7. Up/Down in table\n * 8. Manage list style\n */\nexport default class ContentEdit implements EditorPlugin {\n    private editor: IEditor | undefined = undefined;\n    private features: GenericContentEditFeature<PluginEvent>[] = [];\n    /**\n     * Create instance of ContentEdit plugin\n     * @param settingsOverride An optional feature set to override default feature settings\n     * @param additionalFeatures Optional. More features to add\n     */\n    constructor(\n        private settingsOverride?: Partial<ContentEditFeatureSettings>,\n        private additionalFeatures?: GenericContentEditFeature<PluginEvent>[]\n    ) {}\n\n    /**\n     * Get a friendly name of  this plugin\n     */\n    getName() {\n        return 'ContentEdit';\n    }\n\n    /**\n     * Initialize this plugin\n     * @param editor The editor instance\n     */\n    initialize(editor: IEditor): void {\n        this.editor = editor;\n        const allFeatures = getAllFeatures();\n        getObjectKeys(allFeatures).forEach(key => {\n            const feature = allFeatures[key];\n            const hasSettingForKey =\n                this.settingsOverride && this.settingsOverride[key] !== undefined;\n\n            if (\n                (hasSettingForKey && this.settingsOverride?.[key]) ||\n                (!hasSettingForKey && !feature.defaultDisabled)\n            ) {\n                this.features.push(feature);\n            }\n        });\n        this.features = this.features.concat(this.additionalFeatures || []);\n        this.features.forEach(feature => this.editor?.addContentEditFeature(feature));\n    }\n\n    private disposeFeatures() {\n        if (this.editor) {\n            this.features.forEach(feature => this.editor!.removeContentEditFeature(feature));\n        }\n        this.features = [];\n    }\n\n    /**\n     * Dispose this plugin\n     */\n    dispose(): void {\n        this.disposeFeatures();\n        this.editor = undefined;\n    }\n}\n"]}