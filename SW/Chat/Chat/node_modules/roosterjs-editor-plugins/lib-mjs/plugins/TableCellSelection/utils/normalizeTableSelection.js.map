{"version":3,"file":"normalizeTableSelection.js","sourceRoot":"","sources":["../../../../../../packages/roosterjs-editor-plugins/lib/plugins/TableCellSelection/utils/normalizeTableSelection.ts"],"names":[],"mappings":"AAGA;;;;;;GAMG;AACH,MAAM,CAAC,OAAO,UAAU,uBAAuB,CAAC,MAAc;IACpD,IAAA,KAA0B,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,SAAS,KAAI,EAAE,EAA/C,SAAS,eAAA,EAAE,QAAQ,cAA4B,CAAC;IACxD,IAAI,CAAC,CAAA,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,KAAK,CAAA,IAAI,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC,SAAS,IAAI,CAAC,QAAQ,EAAE;QAChE,OAAO,IAAI,CAAC;KACf;IAED,IAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;IAE3B,IAAM,QAAQ,GAAG;QACb,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;QACpC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;KACvC,CAAC;IACF,IAAM,OAAO,GAAG;QACZ,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;QACpC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;KACvC,CAAC;IAEF,IAAM,cAAc,GAAG,UAAC,KAAkB;QACtC,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE;YACb,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;SACf;QACD,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE;YACb,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;SACf;QAED,IAAI,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,MAAM,EAAE;YACzB,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;SAC9B;QAED,IAAM,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QACxC,IAAI,KAAK,CAAC,CAAC,IAAI,SAAS,EAAE;YACtB,KAAK,CAAC,CAAC,GAAG,SAAS,GAAG,CAAC,CAAC;SAC3B;IACL,CAAC,CAAC;IAEF,cAAc,CAAC,QAAQ,CAAC,CAAC;IACzB,cAAc,CAAC,OAAO,CAAC,CAAC;IAExB,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC;AACtD,CAAC","sourcesContent":["import type { Coordinates, TableSelection } from 'roosterjs-editor-types';\nimport type { VTable } from 'roosterjs-editor-dom';\n\n/**\n * @internal\n * Make the first Cell of a table selection always be on top of the last cell.\n * @param input Table selection\n * @returns Table Selection where the first cell is always going to be first selected in the table\n * and the last cell always going to be last selected in the table.\n */\nexport default function normalizeTableSelection(vTable: VTable): TableSelection | null {\n    const { firstCell, lastCell } = vTable?.selection || {};\n    if (!vTable?.cells || !vTable.selection || !firstCell || !lastCell) {\n        return null;\n    }\n\n    const cells = vTable.cells;\n\n    const newFirst = {\n        x: Math.min(firstCell.x, lastCell.x),\n        y: Math.min(firstCell.y, lastCell.y),\n    };\n    const newLast = {\n        x: Math.max(firstCell.x, lastCell.x),\n        y: Math.max(firstCell.y, lastCell.y),\n    };\n\n    const fixCoordinates = (coord: Coordinates) => {\n        if (coord.x < 0) {\n            coord.x = 0;\n        }\n        if (coord.y < 0) {\n            coord.y = 0;\n        }\n\n        if (coord.y >= cells.length) {\n            coord.y = cells.length - 1;\n        }\n\n        const rowsCells = cells[coord.y].length;\n        if (coord.x >= rowsCells) {\n            coord.x = rowsCells - 1;\n        }\n    };\n\n    fixCoordinates(newFirst);\n    fixCoordinates(newLast);\n\n    return { firstCell: newFirst, lastCell: newLast };\n}\n"]}