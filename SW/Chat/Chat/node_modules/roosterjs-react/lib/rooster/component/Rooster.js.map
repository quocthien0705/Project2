{"version":3,"file":"Rooster.js","sourceRoot":"","sources":["../../../../../packages/roosterjs-react/lib/rooster/component/Rooster.tsx"],"names":[],"mappings":";;;AAAA,6BAA+B;AAC/B,4CAAuD;AACvD,2DAA8E;AAC9E,+DAA+C;AAC/C,mDAAqD;AAKrD;;;;GAIG;AACH,SAAwB,OAAO,CAAC,KAAmB;IAC/C,IAAM,SAAS,GAAG,KAAK,CAAC,MAAM,CAAiB,IAAI,CAAC,CAAC;IACrD,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAiB,IAAI,CAAC,CAAC;IAClD,IAAM,KAAK,GAAG,IAAA,gBAAQ,GAAE,CAAC;IAEjB,IAAA,WAAW,GAAoD,KAAK,YAAzD,EAAE,aAAa,GAAqC,KAAK,cAA1C,EAAE,SAAS,GAA0B,KAAK,UAA/B,EAAE,UAAU,GAAc,KAAK,WAAnB,EAAE,OAAO,GAAK,KAAK,QAAV,CAAW;IAE7E,KAAK,CAAC,SAAS,CAAC;QACZ,IAAI,OAAO,IAAI,SAAS,CAAC,OAAO,EAAE;YAC9B,IAAM,aAAW,GAAG,IAAA,yBAAiB,EAAC,SAAS,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;YAEhE,OAAO,CAAC,OAAO,CAAC,UAAA,MAAM;gBAClB,IAAI,mBAAmB,CAAC,MAAM,CAAC,EAAE;oBAC7B,MAAM,CAAC,cAAc,CAAC,aAAW,CAAC,CAAC;iBACtC;YACL,CAAC,CAAC,CAAC;SACN;IACL,CAAC,EAAE,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,CAAC;IAE3B,KAAK,CAAC,SAAS,CAAC;;QACZ,IAAI,SAAS,CAAC,OAAO,EAAE;YACnB,MAAM,CAAC,OAAO,GAAG,CAAC,aAAa,IAAI,oBAAoB,CAAC,CAAC,SAAS,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;SACtF;QAED,IAAI,WAAW,EAAE;YACb,MAAA,MAAM,CAAC,OAAO,0CAAE,KAAK,EAAE,CAAC;SAC3B;QAED,OAAO;YACH,IAAI,MAAM,CAAC,OAAO,EAAE;gBAChB,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;gBACzB,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;aACzB;QACL,CAAC,CAAC;IACN,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;IAEpB,KAAK,CAAC,SAAS,CAAC;;QACZ,MAAA,MAAM,CAAC,OAAO,0CAAE,gBAAgB,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;IACnD,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;IAEjB,KAAK,CAAC,SAAS,CAAC;;QACZ,IAAI,SAAS,EAAE;YACX,MAAA,MAAM,CAAC,OAAO,0CAAE,YAAY,CAAC,SAAS,CAAC,CAAC;SAC3C;IACL,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,IAAM,QAAQ,GAAG,IAAA,0BAAc,EAAuC,KAAK,EAAE,yBAAa,CAAC,CAAC;IAC5F,OAAO,mDAAK,GAAG,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC,IAAM,CAAC,QAAQ,IAAI,EAAE,CAAC,EAAQ,CAAC;AAC1E,CAAC;AAhDD,0BAgDC;AAED,SAAS,oBAAoB,CAAC,GAAmB,EAAE,OAAsB;IACrE,OAAO,IAAI,8BAAM,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;AACpC,CAAC;AAED,SAAS,mBAAmB,CAAC,MAAoB;;IAC7C,OAAO,CAAC,CAAC,CAAA,MAAC,MAA4B,0CAAE,cAAc,CAAA,CAAC;AAC3D,CAAC","sourcesContent":["import * as React from 'react';\nimport { createUIUtilities } from '../../common/index';\nimport { divProperties, getNativeProps } from '@fluentui/react/lib/Utilities';\nimport { Editor } from 'roosterjs-editor-core';\nimport { useTheme } from '@fluentui/react/lib/Theme';\nimport type RoosterProps from '../type/RoosterProps';\nimport type { ReactEditorPlugin } from '../../common/index';\nimport type { EditorOptions, EditorPlugin, IEditor } from 'roosterjs-editor-types';\n\n/**\n * Main component of react wrapper for roosterjs\n * @param props Properties of this component\n * @returns The react component\n */\nexport default function Rooster(props: RoosterProps) {\n    const editorDiv = React.useRef<HTMLDivElement>(null);\n    const editor = React.useRef<IEditor | null>(null);\n    const theme = useTheme();\n\n    const { focusOnInit, editorCreator, zoomScale, inDarkMode, plugins } = props;\n\n    React.useEffect(() => {\n        if (plugins && editorDiv.current) {\n            const uiUtilities = createUIUtilities(editorDiv.current, theme);\n\n            plugins.forEach(plugin => {\n                if (isReactEditorPlugin(plugin)) {\n                    plugin.setUIUtilities(uiUtilities);\n                }\n            });\n        }\n    }, [theme, editorCreator]);\n\n    React.useEffect(() => {\n        if (editorDiv.current) {\n            editor.current = (editorCreator || defaultEditorCreator)(editorDiv.current, props);\n        }\n\n        if (focusOnInit) {\n            editor.current?.focus();\n        }\n\n        return () => {\n            if (editor.current) {\n                editor.current.dispose();\n                editor.current = null;\n            }\n        };\n    }, [editorCreator]);\n\n    React.useEffect(() => {\n        editor.current?.setDarkModeState(!!inDarkMode);\n    }, [inDarkMode]);\n\n    React.useEffect(() => {\n        if (zoomScale) {\n            editor.current?.setZoomScale(zoomScale);\n        }\n    }, [zoomScale]);\n\n    const divProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(props, divProperties);\n    return <div ref={editorDiv} tabIndex={0} {...(divProps || {})}></div>;\n}\n\nfunction defaultEditorCreator(div: HTMLDivElement, options: EditorOptions) {\n    return new Editor(div, options);\n}\n\nfunction isReactEditorPlugin(plugin: EditorPlugin): plugin is ReactEditorPlugin {\n    return !!(plugin as ReactEditorPlugin)?.setUIUtilities;\n}\n"]}