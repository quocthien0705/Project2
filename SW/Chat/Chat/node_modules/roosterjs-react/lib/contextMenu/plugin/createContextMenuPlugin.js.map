{"version":3,"file":"createContextMenuPlugin.js","sourceRoot":"","sources":["../../../../../packages/roosterjs-react/lib/contextMenu/plugin/createContextMenuPlugin.tsx"],"names":[],"mappings":";;;AAAA,6BAA+B;AAC/B,qEAAuD;AACvD,qEAAoE;AACpE,gFAA+E;AAI/E,SAAS,cAAc,CAAC,KAAqC;IACzD,IAAI,UAAU,GAAG,CAAC,CAAC;IACnB,OAAO,KAAK,CAAC,GAAG,CACZ,UAAA,IAAI;QACA,OAAA,IAAI,IAAI;YACJ,IAAI,EAAE,GAAG;YACT,GAAG,EAAE,UAAU,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC,QAAQ,EAAE;SAC9C;IAHD,CAGC,CACR,CAAC;AACN,CAAC;AAED;IAAgC,kDAAgC;IAI5D;QAAA,YACI,kBAAM;YACF,MAAM,EAAE,UAAC,SAAS,EAAE,KAAK,EAAE,SAAS;gBAChC,IAAM,eAAe,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;gBAE9C,IAAI,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE;oBAC5B,KAAI,CAAC,QAAQ,GAAG,IAAA,2CAAoB,EAChC,KAAI,CAAC,WAAW,EAChB,oBAAC,+BAAc,IACX,MAAM,EAAE,SAAS,EACjB,SAAS,EAAE,SAAS,EACpB,KAAK,EAAE,eAAe,GACxB,CACL,CAAC;iBACL;YACL,CAAC;YACD,OAAO,EAAE,UAAA,CAAC;;gBACN,MAAA,KAAI,CAAC,QAAQ,+CAAb,KAAI,CAAa,CAAC;gBAClB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACzB,CAAC;SACJ,CAAC,SACL;QAxBO,iBAAW,GAAuB,IAAI,CAAC;QACvC,cAAQ,GAAwB,IAAI,CAAC;;IAuB7C,CAAC;IAED,0CAAc,GAAd,UAAe,WAAwB;QACnC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACnC,CAAC;IACL,wBAAC;AAAD,CAAC,AA9BD,CAAgC,sCAAW,GA8B1C;AAED;;GAEG;AACH,SAAwB,uBAAuB;IAC3C,OAAO,IAAI,iBAAiB,EAAE,CAAC;AACnC,CAAC;AAFD,0CAEC","sourcesContent":["import * as React from 'react';\nimport { ContextMenu } from 'roosterjs-editor-plugins';\nimport { ContextualMenu } from '@fluentui/react/lib/ContextualMenu';\nimport { renderReactComponent } from '../../common/utils/renderReactComponent';\nimport type { IContextualMenuItem } from '@fluentui/react/lib/ContextualMenu';\nimport type { ReactEditorPlugin, UIUtilities } from '../../common/index';\n\nfunction normalizeItems(items: (IContextualMenuItem | null)[]) {\n    let dividerKey = 0;\n    return items.map(\n        item =>\n            item || {\n                name: '-',\n                key: 'divider_' + (dividerKey++).toString(),\n            }\n    );\n}\n\nclass ContextMenuPlugin extends ContextMenu<IContextualMenuItem> implements ReactEditorPlugin {\n    private uiUtilities: UIUtilities | null = null;\n    private disposer: (() => void) | null = null;\n\n    constructor() {\n        super({\n            render: (container, items, onDismiss) => {\n                const normalizedITems = normalizeItems(items);\n\n                if (normalizedITems.length > 0) {\n                    this.disposer = renderReactComponent(\n                        this.uiUtilities,\n                        <ContextualMenu\n                            target={container}\n                            onDismiss={onDismiss}\n                            items={normalizedITems}\n                        />\n                    );\n                }\n            },\n            dismiss: _ => {\n                this.disposer?.();\n                this.disposer = null;\n            },\n        });\n    }\n\n    setUIUtilities(uiUtilities: UIUtilities) {\n        this.uiUtilities = uiUtilities;\n    }\n}\n\n/**\n * Create a new instance of ContextMenu plugin with context menu implementation based on FluentUI.\n */\nexport default function createContextMenuPlugin(): ContextMenu<IContextualMenuItem> {\n    return new ContextMenuPlugin();\n}\n"]}