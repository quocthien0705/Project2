{"version":3,"file":"insertImage.js","sourceRoot":"","sources":["../../../../../../packages/roosterjs-react/lib/ribbon/component/buttons/insertImage.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,sBAAsB,CAAC;AACrD,OAAO,EAAE,WAAW,IAAI,cAAc,EAAE,MAAM,sBAAsB,CAAC;AAKrE,IAAM,SAAS,GAAsB;IACjC,GAAG,EAAE,OAAO;IACZ,UAAU,EAAE;QACR,IAAI,EAAE,MAAM;QACZ,MAAM,EAAE,SAAS;QACjB,OAAO,EAAE,MAAM;KAClB;CACJ,CAAC;AAEF;;;GAGG;AACH,MAAM,CAAC,IAAM,WAAW,GAA6C;IACjE,GAAG,EAAE,uBAAuB;IAC5B,eAAe,EAAE,cAAc;IAC/B,QAAQ,EAAE,QAAQ;IAClB,OAAO,EAAE,UAAA,MAAM;QACX,IAAM,QAAQ,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;QACtC,IAAM,SAAS,GAAG,aAAa,CAAC,SAAS,EAAE,QAAQ,CAAqB,CAAC;QACzE,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAErC,SAAS,CAAC,gBAAgB,CAAC,QAAQ,EAAE;YACjC,IAAI,SAAS,CAAC,KAAK,EAAE;gBACjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC7C,cAAc,CAAC,MAAM,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC9C;aACJ;QACL,CAAC,CAAC,CAAC;QAEH,IAAI;YACA,SAAS,CAAC,KAAK,EAAE,CAAC;SACrB;gBAAS;YACN,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;SACxC;IACL,CAAC;CACJ,CAAC","sourcesContent":["import { createElement } from 'roosterjs-editor-dom';\nimport { insertImage as insertImageApi } from 'roosterjs-editor-api';\nimport type RibbonButton from '../../type/RibbonButton';\nimport type { CreateElementData } from 'roosterjs-editor-types';\nimport type { InsertImageButtonStringKey } from '../../type/RibbonButtonStringKeys';\n\nconst FileInput: CreateElementData = {\n    tag: 'input',\n    attributes: {\n        type: 'file',\n        accept: 'image/*',\n        display: 'none',\n    },\n};\n\n/**\n * @internal\n * \"Insert image\" button on the format ribbon\n */\nexport const insertImage: RibbonButton<InsertImageButtonStringKey> = {\n    key: 'buttonNameInsertImage',\n    unlocalizedText: 'Insert image',\n    iconName: 'Photo2',\n    onClick: editor => {\n        const document = editor.getDocument();\n        const fileInput = createElement(FileInput, document) as HTMLInputElement;\n        document.body.appendChild(fileInput);\n\n        fileInput.addEventListener('change', () => {\n            if (fileInput.files) {\n                for (let i = 0; i < fileInput.files.length; i++) {\n                    insertImageApi(editor, fileInput.files[i]);\n                }\n            }\n        });\n\n        try {\n            fileInput.click();\n        } finally {\n            document.body.removeChild(fileInput);\n        }\n    },\n};\n"]}