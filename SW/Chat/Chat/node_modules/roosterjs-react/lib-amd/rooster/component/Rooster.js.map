{"version":3,"file":"Rooster.js","sourceRoot":"","sources":["../../../../../packages/roosterjs-react/lib/rooster/component/Rooster.tsx"],"names":[],"mappings":";;;IASA;;;;OAIG;IACH,SAAwB,OAAO,CAAC,KAAmB;QAC/C,IAAM,SAAS,GAAG,KAAK,CAAC,MAAM,CAAiB,IAAI,CAAC,CAAC;QACrD,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAiB,IAAI,CAAC,CAAC;QAClD,IAAM,KAAK,GAAG,IAAA,gBAAQ,GAAE,CAAC;QAEjB,IAAA,WAAW,GAAoD,KAAK,YAAzD,EAAE,aAAa,GAAqC,KAAK,cAA1C,EAAE,SAAS,GAA0B,KAAK,UAA/B,EAAE,UAAU,GAAc,KAAK,WAAnB,EAAE,OAAO,GAAK,KAAK,QAAV,CAAW;QAE7E,KAAK,CAAC,SAAS,CAAC;YACZ,IAAI,OAAO,IAAI,SAAS,CAAC,OAAO,EAAE;gBAC9B,IAAM,aAAW,GAAG,IAAA,yBAAiB,EAAC,SAAS,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;gBAEhE,OAAO,CAAC,OAAO,CAAC,UAAA,MAAM;oBAClB,IAAI,mBAAmB,CAAC,MAAM,CAAC,EAAE;wBAC7B,MAAM,CAAC,cAAc,CAAC,aAAW,CAAC,CAAC;qBACtC;gBACL,CAAC,CAAC,CAAC;aACN;QACL,CAAC,EAAE,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,CAAC;QAE3B,KAAK,CAAC,SAAS,CAAC;;YACZ,IAAI,SAAS,CAAC,OAAO,EAAE;gBACnB,MAAM,CAAC,OAAO,GAAG,CAAC,aAAa,IAAI,oBAAoB,CAAC,CAAC,SAAS,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;aACtF;YAED,IAAI,WAAW,EAAE;gBACb,MAAA,MAAM,CAAC,OAAO,0CAAE,KAAK,EAAE,CAAC;aAC3B;YAED,OAAO;gBACH,IAAI,MAAM,CAAC,OAAO,EAAE;oBAChB,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;oBACzB,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;iBACzB;YACL,CAAC,CAAC;QACN,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;QAEpB,KAAK,CAAC,SAAS,CAAC;;YACZ,MAAA,MAAM,CAAC,OAAO,0CAAE,gBAAgB,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;QAEjB,KAAK,CAAC,SAAS,CAAC;;YACZ,IAAI,SAAS,EAAE;gBACX,MAAA,MAAM,CAAC,OAAO,0CAAE,YAAY,CAAC,SAAS,CAAC,CAAC;aAC3C;QACL,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;QAEhB,IAAM,QAAQ,GAAG,IAAA,0BAAc,EAAuC,KAAK,EAAE,yBAAa,CAAC,CAAC;QAC5F,OAAO,mDAAK,GAAG,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC,IAAM,CAAC,QAAQ,IAAI,EAAE,CAAC,EAAQ,CAAC;IAC1E,CAAC;IAhDD,0BAgDC;IAED,SAAS,oBAAoB,CAAC,GAAmB,EAAE,OAAsB;QACrE,OAAO,IAAI,8BAAM,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;IACpC,CAAC;IAED,SAAS,mBAAmB,CAAC,MAAoB;;QAC7C,OAAO,CAAC,CAAC,CAAA,MAAC,MAA4B,0CAAE,cAAc,CAAA,CAAC;IAC3D,CAAC","sourcesContent":["import * as React from 'react';\nimport { createUIUtilities } from '../../common/index';\nimport { divProperties, getNativeProps } from '@fluentui/react/lib/Utilities';\nimport { Editor } from 'roosterjs-editor-core';\nimport { useTheme } from '@fluentui/react/lib/Theme';\nimport type RoosterProps from '../type/RoosterProps';\nimport type { ReactEditorPlugin } from '../../common/index';\nimport type { EditorOptions, EditorPlugin, IEditor } from 'roosterjs-editor-types';\n\n/**\n * Main component of react wrapper for roosterjs\n * @param props Properties of this component\n * @returns The react component\n */\nexport default function Rooster(props: RoosterProps) {\n    const editorDiv = React.useRef<HTMLDivElement>(null);\n    const editor = React.useRef<IEditor | null>(null);\n    const theme = useTheme();\n\n    const { focusOnInit, editorCreator, zoomScale, inDarkMode, plugins } = props;\n\n    React.useEffect(() => {\n        if (plugins && editorDiv.current) {\n            const uiUtilities = createUIUtilities(editorDiv.current, theme);\n\n            plugins.forEach(plugin => {\n                if (isReactEditorPlugin(plugin)) {\n                    plugin.setUIUtilities(uiUtilities);\n                }\n            });\n        }\n    }, [theme, editorCreator]);\n\n    React.useEffect(() => {\n        if (editorDiv.current) {\n            editor.current = (editorCreator || defaultEditorCreator)(editorDiv.current, props);\n        }\n\n        if (focusOnInit) {\n            editor.current?.focus();\n        }\n\n        return () => {\n            if (editor.current) {\n                editor.current.dispose();\n                editor.current = null;\n            }\n        };\n    }, [editorCreator]);\n\n    React.useEffect(() => {\n        editor.current?.setDarkModeState(!!inDarkMode);\n    }, [inDarkMode]);\n\n    React.useEffect(() => {\n        if (zoomScale) {\n            editor.current?.setZoomScale(zoomScale);\n        }\n    }, [zoomScale]);\n\n    const divProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(props, divProperties);\n    return <div ref={editorDiv} tabIndex={0} {...(divProps || {})}></div>;\n}\n\nfunction defaultEditorCreator(div: HTMLDivElement, options: EditorOptions) {\n    return new Editor(div, options);\n}\n\nfunction isReactEditorPlugin(plugin: EditorPlugin): plugin is ReactEditorPlugin {\n    return !!(plugin as ReactEditorPlugin)?.setUIUtilities;\n}\n"]}