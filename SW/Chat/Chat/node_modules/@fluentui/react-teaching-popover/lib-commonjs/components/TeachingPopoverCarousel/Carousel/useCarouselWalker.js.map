{"version":3,"sources":["useCarouselWalker.js"],"sourcesContent":["import * as React from 'react';\nimport { isHTMLElement } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport { CAROUSEL_ACTIVE_ITEM, CAROUSEL_ITEM } from './constants';\nexport const useCarouselWalker_unstable = ()=>{\n    const { targetDocument } = useFluent();\n    const treeWalkerRef = React.useRef(targetDocument === null || targetDocument === void 0 ? void 0 : targetDocument.createTreeWalker(targetDocument.body));\n    const htmlRef = React.useRef(null);\n    const ref = React.useCallback((el)=>{\n        if (!targetDocument) {\n            return;\n        }\n        if (!el) {\n            return;\n        }\n        htmlRef.current = el;\n        treeWalkerRef.current = targetDocument.createTreeWalker(el, NodeFilter.SHOW_ELEMENT, {\n            acceptNode (node) {\n                if (!isHTMLElement(node)) {\n                    return NodeFilter.FILTER_SKIP;\n                }\n                return node.hasAttribute(CAROUSEL_ITEM) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n            }\n        });\n    }, [\n        targetDocument\n    ]);\n    return {\n        ref,\n        walker: React.useMemo(()=>({\n                active () {\n                    if (!htmlRef.current) {\n                        return null;\n                    }\n                    const activeEl = htmlRef.current.querySelector(`[${CAROUSEL_ACTIVE_ITEM}=\"true\"]`);\n                    if (isHTMLElement(activeEl)) {\n                        return {\n                            el: activeEl,\n                            value: activeEl.getAttribute(CAROUSEL_ITEM)\n                        };\n                    }\n                    return null;\n                },\n                find (value) {\n                    var _treeWalkerRef_current;\n                    if (!((_treeWalkerRef_current = treeWalkerRef.current) === null || _treeWalkerRef_current === void 0 ? void 0 : _treeWalkerRef_current.currentNode) || !htmlRef.current) {\n                        return null;\n                    }\n                    treeWalkerRef.current.currentNode = htmlRef.current;\n                    let nextNode = null;\n                    while(nextNode = treeWalkerRef.current.nextNode()){\n                        if (!isHTMLElement(nextNode)) {\n                            continue;\n                        }\n                        if (nextNode.getAttribute(CAROUSEL_ITEM) === value) {\n                            return {\n                                el: nextNode,\n                                value: nextNode.getAttribute(CAROUSEL_ITEM)\n                            };\n                        }\n                    }\n                    return null;\n                },\n                nextPage (value) {\n                    var _treeWalkerRef_current;\n                    const res = this.find(value);\n                    if (!res || !((_treeWalkerRef_current = treeWalkerRef.current) === null || _treeWalkerRef_current === void 0 ? void 0 : _treeWalkerRef_current.currentNode)) {\n                        return null;\n                    }\n                    treeWalkerRef.current.currentNode = res.el;\n                    const next = treeWalkerRef.current.nextNode();\n                    if (isHTMLElement(next)) {\n                        return {\n                            el: next,\n                            value: next.getAttribute(CAROUSEL_ITEM)\n                        };\n                    }\n                    return null;\n                },\n                prevPage (value) {\n                    var _treeWalkerRef_current;\n                    const res = this.find(value);\n                    if (!res || !((_treeWalkerRef_current = treeWalkerRef.current) === null || _treeWalkerRef_current === void 0 ? void 0 : _treeWalkerRef_current.currentNode)) {\n                        return null;\n                    }\n                    treeWalkerRef.current.currentNode = res.el;\n                    const next = treeWalkerRef.current.previousNode();\n                    if (isHTMLElement(next)) {\n                        return {\n                            el: next,\n                            value: next.getAttribute(CAROUSEL_ITEM)\n                        };\n                    }\n                    return null;\n                }\n            }), [])\n    };\n};\n"],"names":["useCarouselWalker_unstable","targetDocument","useFluent","treeWalkerRef","React","useRef","createTreeWalker","body","htmlRef","ref","useCallback","el","current","NodeFilter","SHOW_ELEMENT","acceptNode","node","isHTMLElement","FILTER_SKIP","hasAttribute","CAROUSEL_ITEM","FILTER_ACCEPT","walker","useMemo","active","activeEl","querySelector","CAROUSEL_ACTIVE_ITEM","value","getAttribute","find","_treeWalkerRef_current","currentNode","nextNode","nextPage","res","next","prevPage","previousNode"],"mappings":"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"}