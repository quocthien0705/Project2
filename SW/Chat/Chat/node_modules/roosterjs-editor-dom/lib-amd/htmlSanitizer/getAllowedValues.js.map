{"version":3,"file":"getAllowedValues.js","sourceRoot":"","sources":["../../../../packages/roosterjs-editor-dom/lib/htmlSanitizer/getAllowedValues.ts"],"names":[],"mappings":"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","sourcesContent":["import getObjectKeys from '../jsUtils/getObjectKeys';\nimport { cloneObject } from './cloneObject';\nimport type { CssStyleCallbackMap, StringMap } from 'roosterjs-editor-types';\n\nconst HTML_TAG_REPLACEMENT: Record<string, string | null> = {\n    // Allowed tags\n    a: '*',\n    abbr: '*',\n    address: '*',\n    area: '*',\n    article: '*',\n    aside: '*',\n    b: '*',\n    bdi: '*',\n    bdo: '*',\n    blockquote: '*',\n    body: '*',\n    br: '*',\n    button: '*',\n    canvas: '*',\n    caption: '*',\n    center: '*',\n    cite: '*',\n    code: '*',\n    col: '*',\n    colgroup: '*',\n    data: '*',\n    datalist: '*',\n    dd: '*',\n    del: '*',\n    details: '*',\n    dfn: '*',\n    dialog: '*',\n    dir: '*',\n    div: '*',\n    dl: '*',\n    dt: '*',\n    em: '*',\n    fieldset: '*',\n    figcaption: '*',\n    figure: '*',\n    font: '*',\n    footer: '*',\n    h1: '*',\n    h2: '*',\n    h3: '*',\n    h4: '*',\n    h5: '*',\n    h6: '*',\n    head: '*',\n    header: '*',\n    hgroup: '*',\n    hr: '*',\n    html: '*',\n    i: '*',\n    img: '*',\n    input: '*',\n    ins: '*',\n    kbd: '*',\n    label: '*',\n    legend: '*',\n    li: '*',\n    main: '*',\n    map: '*',\n    mark: '*',\n    menu: '*',\n    menuitem: '*',\n    meter: '*',\n    nav: '*',\n    ol: '*',\n    optgroup: '*',\n    option: '*',\n    output: '*',\n    p: '*',\n    picture: '*',\n    pre: '*',\n    progress: '*',\n    q: '*',\n    rp: '*',\n    rt: '*',\n    ruby: '*',\n    s: '*',\n    samp: '*',\n    section: '*',\n    select: '*',\n    small: '*',\n    span: '*',\n    strike: '*',\n    strong: '*',\n    sub: '*',\n    summary: '*',\n    sup: '*',\n    table: '*',\n    tbody: '*',\n    td: '*',\n    textarea: '*',\n    tfoot: '*',\n    th: '*',\n    thead: '*',\n    time: '*',\n    tr: '*',\n    tt: '*',\n    u: '*',\n    ul: '*',\n    var: '*',\n    wbr: '*',\n    xmp: '*',\n\n    // Replaced tags:\n    form: 'SPAN',\n\n    // Disallowed tags\n    applet: null,\n    audio: null,\n    base: null,\n    basefont: null,\n    embed: null,\n    frame: null,\n    frameset: null,\n    iframe: null,\n    link: null,\n    meta: null,\n    noscript: null,\n    object: null,\n    param: null,\n    script: null,\n    slot: null,\n    source: null,\n    style: null,\n    template: null,\n    title: null,\n    track: null,\n    video: null,\n};\n\nconst ALLOWED_HTML_ATTRIBUTES = (\n    'accept,align,alt,checked,cite,color,cols,colspan,contextmenu,' +\n    'coords,datetime,default,dir,dirname,disabled,download,face,headers,height,hidden,high,href,' +\n    'hreflang,ismap,kind,label,lang,list,low,max,maxlength,media,min,multiple,open,optimum,pattern,' +\n    'placeholder,readonly,rel,required,reversed,rows,rowspan,scope,selected,shape,size,sizes,span,' +\n    'spellcheck,src,srclang,srcset,start,step,style,tabindex,target,title,translate,type,usemap,valign,value,' +\n    'width,wrap,bgColor'\n).split(',');\n\nconst DEFAULT_STYLE_VALUES: { [name: string]: string } = {\n    'background-color': 'transparent',\n    'border-bottom-color': 'rgb(0, 0, 0)',\n    'border-bottom-style': 'none',\n    'border-bottom-width': '0px',\n    'border-image-outset': '0',\n    'border-image-repeat': 'stretch',\n    'border-image-slice': '100%',\n    'border-image-source': 'none',\n    'border-image-width': '1',\n    'border-left-color': 'rgb(0, 0, 0)',\n    'border-left-style': 'none',\n    'border-left-width': '0px',\n    'border-right-color': 'rgb(0, 0, 0)',\n    'border-right-style': 'none',\n    'border-right-width': '0px',\n    'border-top-color': 'rgb(0, 0, 0)',\n    'border-top-style': 'none',\n    'border-top-width': '0px',\n    'outline-color': 'transparent',\n    'outline-style': 'none',\n    'outline-width': '0px',\n    overflow: 'visible',\n    '-webkit-text-stroke-width': '0px',\n    'word-wrap': 'break-word',\n    'margin-left': '0px',\n    'margin-right': '0px',\n    padding: '0px',\n    'padding-top': '0px',\n    'padding-left': '0px',\n    'padding-right': '0px',\n    'padding-bottom': '0px',\n    border: '0px',\n    'border-top': '0px',\n    'border-left': '0px',\n    'border-right': '0px',\n    'border-bottom': '0px',\n    'vertical-align': 'baseline',\n    float: 'none',\n};\n\n// This is to preserve entity related CSS classes when paste.\nconst ALLOWED_CSS_CLASSES: string[] = [];\n\n/**\n * @internal\n */\nexport function getTagReplacement(\n    additionalReplacements: Record<string, string | null> | undefined\n): Record<string, string | null> {\n    const result = { ...HTML_TAG_REPLACEMENT };\n    const replacements = additionalReplacements || {};\n    getObjectKeys(replacements).forEach(key => {\n        if (key) {\n            result[key.toLowerCase()] = replacements[key];\n        }\n    });\n\n    return result;\n}\n\n/**\n * @internal\n */\nexport function getAllowedAttributes(additionalAttributes: string[] | undefined): string[] {\n    return unique(ALLOWED_HTML_ATTRIBUTES.concat(additionalAttributes || [])).map(attr =>\n        attr.toLocaleLowerCase()\n    );\n}\n\n/**\n * @internal\n */\nexport function getAllowedCssClassesRegex(\n    additionalCssClasses: string[] | undefined\n): RegExp | null {\n    const patterns = ALLOWED_CSS_CLASSES.concat(additionalCssClasses || []);\n    return patterns.length > 0 ? new RegExp(patterns.join('|')) : null;\n}\n\n/**\n * @internal\n */\nexport function getDefaultStyleValues(additionalDefaultStyles: StringMap | undefined): StringMap {\n    const result = cloneObject(DEFAULT_STYLE_VALUES);\n    if (additionalDefaultStyles) {\n        Object.keys(additionalDefaultStyles).forEach(name => {\n            const value = additionalDefaultStyles[name];\n            if (value !== null && value !== undefined) {\n                result[name] = value;\n            } else {\n                delete result[name];\n            }\n        });\n    }\n\n    return result;\n}\n\n/**\n * @internal\n */\nexport function getStyleCallbacks(\n    callbacks: CssStyleCallbackMap | null | undefined\n): CssStyleCallbackMap {\n    const result = cloneObject(callbacks);\n    result.position = result.position || removeValue;\n    result.width = result.width || removeWidthForLiAndDiv;\n    return result;\n}\n\nfunction removeValue(): null {\n    return null;\n}\n\nfunction removeWidthForLiAndDiv(value: string, element: HTMLElement) {\n    const tag = element.tagName;\n    return !(tag == 'LI' || tag == 'DIV');\n}\n\nfunction unique<T>(array: T[]): T[] {\n    return array.filter((value, index, self) => self.indexOf(value) == index);\n}\n"]}