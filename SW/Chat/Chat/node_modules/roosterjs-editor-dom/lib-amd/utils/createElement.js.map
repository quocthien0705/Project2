{"version":3,"file":"createElement.js","sourceRoot":"","sources":["../../../../packages/roosterjs-editor-dom/lib/utils/createElement.ts"],"names":[],"mappings":"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","sourcesContent":["import getObjectKeys from '../jsUtils/getObjectKeys';\nimport safeInstanceOf from './safeInstanceOf';\nimport { Browser } from './Browser';\nimport { KnownCreateElementDataIndex } from 'roosterjs-editor-types';\nimport type { CreateElementData } from 'roosterjs-editor-types';\nimport type { CompatibleKnownCreateElementDataIndex } from 'roosterjs-editor-types/lib/compatibleTypes';\n\n/**\n * All known CreateElementData used by roosterjs to create elements\n */\nexport const KnownCreateElementData: Record<KnownCreateElementDataIndex, CreateElementData> = {\n    [KnownCreateElementDataIndex.None]: { tag: '' },\n\n    // Edge can sometimes lose current format when Enter to new line.\n    // So here we add an extra SPAN for Edge to workaround this bug\n    [KnownCreateElementDataIndex.EmptyLine]: Browser.isEdge\n        ? { tag: 'div', children: [{ tag: 'span', children: [{ tag: 'br' }] }] }\n        : { tag: 'div', children: [{ tag: 'br' }] },\n    [KnownCreateElementDataIndex.BlockquoteWrapper]: {\n        tag: 'blockquote',\n        style: 'margin-top:0;margin-bottom:0',\n    },\n    [KnownCreateElementDataIndex.CopyPasteTempDiv]: {\n        tag: 'div',\n        style:\n            'width: 600px; height: 1px; overflow: hidden; position: fixed; top: 0; left; 0; -webkit-user-select: text',\n        attributes: {\n            contenteditable: 'true',\n        },\n    },\n    [KnownCreateElementDataIndex.BlockListItem]: { tag: 'li', style: 'display:block' },\n    [KnownCreateElementDataIndex.ContextMenuWrapper]: {\n        tag: 'div',\n        style: 'position: fixed; width: 0; height: 0',\n    },\n    [KnownCreateElementDataIndex.ImageEditWrapper]: {\n        tag: 'span',\n        style: 'max-width:100%;position:relative',\n        children: [\n            {\n                tag: 'div',\n                style: 'width:100%;height:100%;position:relative;overflow:hidden',\n            },\n        ],\n    },\n    [KnownCreateElementDataIndex.TableHorizontalResizer]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: row-resize; user-select: none',\n    },\n    [KnownCreateElementDataIndex.TableVerticalResizer]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: col-resize; user-select: none',\n    },\n    [KnownCreateElementDataIndex.TableResizerLTR]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: nw-resize; user-select: none; border: 1px solid #808080',\n    },\n    [KnownCreateElementDataIndex.TableResizerRTL]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: ne-resize; user-select: none; border: 1px solid #808080',\n    },\n    [KnownCreateElementDataIndex.TableSelector]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: all-scroll; user-select: none; border: 1px solid #808080',\n    },\n    [KnownCreateElementDataIndex.EmptyLineFormatInSpan]: {\n        tag: 'div',\n        children: [{ tag: 'span', children: [{ tag: 'br' }] }],\n    },\n};\n\n/**\n * Create DOM element from the given CreateElementData\n * @param elementData The CreateElementData or an index of a known CreateElementData used for creating this element\n * @param document The document to create the element from\n * @returns The root DOM element just created\n */\nexport default function createElement(\n    elementData:\n        | CreateElementData\n        | KnownCreateElementDataIndex\n        | CompatibleKnownCreateElementDataIndex,\n    document: Document\n): Element | null {\n    if (typeof elementData == 'number') {\n        elementData = KnownCreateElementData[elementData];\n    }\n\n    if (!elementData || !elementData.tag) {\n        return null;\n    }\n\n    const { tag, namespace, className, style, dataset, attributes, children } = elementData;\n    const result = namespace\n        ? document.createElementNS(namespace, tag)\n        : document.createElement(tag);\n\n    if (style) {\n        result.setAttribute('style', style);\n    }\n\n    if (className) {\n        result.className = className;\n    }\n\n    if (dataset && safeInstanceOf(result, 'HTMLElement')) {\n        getObjectKeys(dataset).forEach(datasetName => {\n            result.dataset[datasetName] = dataset[datasetName];\n        });\n    }\n\n    if (attributes) {\n        getObjectKeys(attributes).forEach(attrName => {\n            result.setAttribute(attrName, attributes[attrName]);\n        });\n    }\n\n    if (children) {\n        children.forEach(child => {\n            if (typeof child === 'string') {\n                result.appendChild(document.createTextNode(child));\n            } else if (child) {\n                const childElement = createElement(child, document);\n                if (childElement) {\n                    result.appendChild(childElement);\n                }\n            }\n        });\n    }\n\n    return result;\n}\n"]}