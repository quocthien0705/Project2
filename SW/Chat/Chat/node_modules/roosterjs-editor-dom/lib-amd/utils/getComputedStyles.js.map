{"version":3,"file":"getComputedStyles.js","sourceRoot":"","sources":["../../../../packages/roosterjs-editor-dom/lib/utils/getComputedStyles.ts"],"names":[],"mappings":";;;;IAEA;;;;;;OAMG;IACH,SAAwB,iBAAiB,CACrC,IAAU,EACV,UAAyF;;QAAzF,2BAAA,EAAA,cAAiC,aAAa,EAAE,WAAW,EAAE,OAAO,EAAE,kBAAkB,CAAC;QAEzF,IAAM,OAAO,GAAG,IAAA,oCAA0B,EAAC,IAAI,CAAC,CAAC;QACjD,IAAM,MAAM,GAAa,EAAE,CAAC;QAC5B,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;QACnE,IAAI,OAAO,EAAE;YACT,IAAM,GAAG,GAAG,OAAO,CAAC,aAAa,CAAC,WAAW,IAAI,MAAM,CAAC;YACxD,IAAM,MAAM,GAAG,GAAG,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;YAE7C,IAAI,MAAM,EAAE;;oBACR,KAAoB,IAAA,eAAA,sBAAA,UAAU,CAAA,sCAAA,8DAAE;wBAA3B,IAAM,KAAK,uBAAA;wBACZ,IAAI,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;wBACjD,KAAK,GAAG,KAAK,IAAI,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;wBAC7D,KAAK,GAAG,KAAK,IAAI,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;wBACpD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;qBACtB;;;;;;;;;aACJ;SACJ;QAED,OAAO,MAAM,CAAC;IAClB,CAAC;IAtBD,oCAsBC;IAED;;;;;OAKG;IACH,SAAgB,gBAAgB,CAAC,IAAU,EAAE,SAAiB;QAC1D,OAAO,iBAAiB,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;IACvD,CAAC;IAFD,4CAEC;IAED,SAAS,KAAK,CAAC,EAAU;QACrB,IAAI,EAAE,IAAI,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE;YACzC,uHAAuH;YACvH,wBAAwB;YACxB,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC;SAC9D;QACD,OAAO,EAAE,CAAC;IACd,CAAC","sourcesContent":["import findClosestElementAncestor from './findClosestElementAncestor';\r\n\r\n/**\r\n * Get computed styles of a node\r\n * @param node The node to get computed styles from\r\n * @param styleNames Names of style to get, can be a single name or an array.\r\n * Default value is font-family, font-size, color, background-color\r\n * @returns An array of the computed styles\r\n */\r\nexport default function getComputedStyles(\r\n    node: Node,\r\n    styleNames: string | string[] = ['font-family', 'font-size', 'color', 'background-color']\r\n): string[] {\r\n    const element = findClosestElementAncestor(node);\r\n    const result: string[] = [];\r\n    styleNames = Array.isArray(styleNames) ? styleNames : [styleNames];\r\n    if (element) {\r\n        const win = element.ownerDocument.defaultView || window;\r\n        const styles = win.getComputedStyle(element);\r\n\r\n        if (styles) {\r\n            for (const style of styleNames) {\r\n                let value = styles.getPropertyValue(style) || '';\r\n                value = style != 'font-family' ? value.toLowerCase() : value;\r\n                value = style == 'font-size' ? px2Pt(value) : value;\r\n                result.push(value);\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * A shortcut for getComputedStyles() when only one style is to be retrieved\r\n * @param node The node to get style from\r\n * @param styleName The style name\r\n * @returns The style value\r\n */\r\nexport function getComputedStyle(node: Node, styleName: string): string {\r\n    return getComputedStyles(node, styleName)[0] || '';\r\n}\r\n\r\nfunction px2Pt(px: string) {\r\n    if (px && px.indexOf('px') == px.length - 2) {\r\n        // Edge may not handle the floating computing well which causes the calculated value is a little less than actual value\r\n        // So add 0.05 to fix it\r\n        return Math.round(parseFloat(px) * 75 + 0.05) / 100 + 'pt';\r\n    }\r\n    return px;\r\n}\r\n"]}