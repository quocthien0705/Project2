{"version":3,"file":"extractClipboardEvent.js","sourceRoot":"","sources":["../../../../packages/roosterjs-editor-dom/lib/clipboard/extractClipboardEvent.ts"],"names":[],"mappings":"AAAA,OAAO,qBAAqB,MAAM,yBAAyB,CAAC;AAC5D,OAAO,0BAA0B,MAAM,8BAA8B,CAAC;AACtE,OAAO,OAAO,MAAM,oBAAoB,CAAC;AACzC,OAAO,EAAE,OAAO,EAAE,MAAM,kBAAkB,CAAC;AAO3C;;;;;;;;;;;;;;GAcG;AACH,MAAM,CAAC,OAAO,UAAU,qBAAqB,CACzC,KAAqB,EACrB,QAAgD,EAChD,OAAqC,EACrC,gBAAwB;;IAExB,IAAM,YAAY,GACd,KAAK,CAAC,aAAa;QACnB,CAAwB,MAAO,KAAK,CAAC,MAAO,CAAC,aAAa,0CAAE,WAAa,CAAA,CAAC,aAAa,CAAC;IAE5F,IAAI,YAAY,CAAC,KAAK,EAAE;QACpB,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,qBAAqB,CACjB,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,EAC3B,OAAO,EACP,IAAI,CAAC,uBAAuB,CAC/B,CAAC,IAAI,CAAC,UAAC,aAA4B;YAChC,cAAc,CAAC,gBAAgB,CAAC,CAAC;YACjC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;KACN;SAAM;QACH,0BAA0B,CAAC,YAAY,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;KAC/D;AACL,CAAC;AAED,SAAS,cAAc,CAAC,KAAa;IACjC,IAAI,OAAO,CAAC,SAAS,IAAI,KAAK,EAAE;QAC5B,KAAK,CAAC,cAAc,EAAE,CAAC;KAC1B;AACL,CAAC","sourcesContent":["import extractClipboardItems from './extractClipboardItems';\nimport extractClipboardItemsForIE from './extractClipboardItemsForIE';\nimport toArray from '../jsUtils/toArray';\nimport { Browser } from '../utils/Browser';\nimport type { ClipboardData, ExtractClipboardEventOption } from 'roosterjs-editor-types';\n\ninterface WindowForIE extends Window {\n    clipboardData: DataTransfer;\n}\n\n/**\n * @deprecated Use extractClipboardItems and extractClipboardItemsForIE instead\n * Extract a Clipboard event\n * @param event The paste event\n * @param callback Callback function when data is ready\n * @param options Options to retrieve more items from the event, including HTML string and other customized items\n * @param rangeBeforePaste Optional range to be removed when pasting in Android\n * @returns An object with the following properties:\n *  types: Available types from the clipboard event\n *  text: Plain text from the clipboard event\n *  image: Image file from the clipboard event\n *  html: Html string from the clipboard event. When set to null, it means there's no HTML found from the event.\n *   When set to undefined, it means can't retrieve HTML string, there may be HTML string but direct retrieving is\n *   not supported by browser.\n */\nexport default function extractClipboardEvent(\n    event: ClipboardEvent,\n    callback: (clipboardData: ClipboardData) => void,\n    options?: ExtractClipboardEventOption,\n    rangeBeforePaste?: Range\n) {\n    const dataTransfer =\n        event.clipboardData ||\n        (<WindowForIE>(<unknown>(<Node>event.target).ownerDocument?.defaultView)).clipboardData;\n\n    if (dataTransfer.items) {\n        event.preventDefault();\n        extractClipboardItems(\n            toArray(dataTransfer.items),\n            options,\n            true /** pasteNativeEvent */\n        ).then((clipboardData: ClipboardData) => {\n            removeContents(rangeBeforePaste);\n            callback(clipboardData);\n        });\n    } else {\n        extractClipboardItemsForIE(dataTransfer, callback, options);\n    }\n}\n\nfunction removeContents(range?: Range) {\n    if (Browser.isAndroid && range) {\n        range.deleteContents();\n    }\n}\n"]}