"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var extractClipboardItems_1 = require("./extractClipboardItems");
var extractClipboardItemsForIE_1 = require("./extractClipboardItemsForIE");
var toArray_1 = require("../jsUtils/toArray");
var Browser_1 = require("../utils/Browser");
/**
 * @deprecated Use extractClipboardItems and extractClipboardItemsForIE instead
 * Extract a Clipboard event
 * @param event The paste event
 * @param callback Callback function when data is ready
 * @param options Options to retrieve more items from the event, including HTML string and other customized items
 * @param rangeBeforePaste Optional range to be removed when pasting in Android
 * @returns An object with the following properties:
 *  types: Available types from the clipboard event
 *  text: Plain text from the clipboard event
 *  image: Image file from the clipboard event
 *  html: Html string from the clipboard event. When set to null, it means there's no HTML found from the event.
 *   When set to undefined, it means can't retrieve HTML string, there may be HTML string but direct retrieving is
 *   not supported by browser.
 */
function extractClipboardEvent(event, callback, options, rangeBeforePaste) {
    var _a;
    var dataTransfer = event.clipboardData ||
        ((_a = event.target.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView).clipboardData;
    if (dataTransfer.items) {
        event.preventDefault();
        (0, extractClipboardItems_1.default)((0, toArray_1.default)(dataTransfer.items), options, true /** pasteNativeEvent */).then(function (clipboardData) {
            removeContents(rangeBeforePaste);
            callback(clipboardData);
        });
    }
    else {
        (0, extractClipboardItemsForIE_1.default)(dataTransfer, callback, options);
    }
}
exports.default = extractClipboardEvent;
function removeContents(range) {
    if (Browser_1.Browser.isAndroid && range) {
        range.deleteContents();
    }
}
//# sourceMappingURL=extractClipboardEvent.js.map