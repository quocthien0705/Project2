{"version":3,"file":"createElement.js","sourceRoot":"","sources":["../../../../packages/roosterjs-editor-dom/lib/utils/createElement.ts"],"names":[],"mappings":"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","sourcesContent":["import getObjectKeys from '../jsUtils/getObjectKeys';\nimport safeInstanceOf from './safeInstanceOf';\nimport { Browser } from './Browser';\nimport { KnownCreateElementDataIndex } from 'roosterjs-editor-types';\nimport type { CreateElementData } from 'roosterjs-editor-types';\nimport type { CompatibleKnownCreateElementDataIndex } from 'roosterjs-editor-types/lib/compatibleTypes';\n\n/**\n * All known CreateElementData used by roosterjs to create elements\n */\nexport const KnownCreateElementData: Record<KnownCreateElementDataIndex, CreateElementData> = {\n    [KnownCreateElementDataIndex.None]: { tag: '' },\n\n    // Edge can sometimes lose current format when Enter to new line.\n    // So here we add an extra SPAN for Edge to workaround this bug\n    [KnownCreateElementDataIndex.EmptyLine]: Browser.isEdge\n        ? { tag: 'div', children: [{ tag: 'span', children: [{ tag: 'br' }] }] }\n        : { tag: 'div', children: [{ tag: 'br' }] },\n    [KnownCreateElementDataIndex.BlockquoteWrapper]: {\n        tag: 'blockquote',\n        style: 'margin-top:0;margin-bottom:0',\n    },\n    [KnownCreateElementDataIndex.CopyPasteTempDiv]: {\n        tag: 'div',\n        style:\n            'width: 600px; height: 1px; overflow: hidden; position: fixed; top: 0; left; 0; -webkit-user-select: text',\n        attributes: {\n            contenteditable: 'true',\n        },\n    },\n    [KnownCreateElementDataIndex.BlockListItem]: { tag: 'li', style: 'display:block' },\n    [KnownCreateElementDataIndex.ContextMenuWrapper]: {\n        tag: 'div',\n        style: 'position: fixed; width: 0; height: 0',\n    },\n    [KnownCreateElementDataIndex.ImageEditWrapper]: {\n        tag: 'span',\n        style: 'max-width:100%;position:relative',\n        children: [\n            {\n                tag: 'div',\n                style: 'width:100%;height:100%;position:relative;overflow:hidden',\n            },\n        ],\n    },\n    [KnownCreateElementDataIndex.TableHorizontalResizer]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: row-resize; user-select: none',\n    },\n    [KnownCreateElementDataIndex.TableVerticalResizer]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: col-resize; user-select: none',\n    },\n    [KnownCreateElementDataIndex.TableResizerLTR]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: nw-resize; user-select: none; border: 1px solid #808080',\n    },\n    [KnownCreateElementDataIndex.TableResizerRTL]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: ne-resize; user-select: none; border: 1px solid #808080',\n    },\n    [KnownCreateElementDataIndex.TableSelector]: {\n        tag: 'div',\n        style: 'position: fixed; cursor: all-scroll; user-select: none; border: 1px solid #808080',\n    },\n    [KnownCreateElementDataIndex.EmptyLineFormatInSpan]: {\n        tag: 'div',\n        children: [{ tag: 'span', children: [{ tag: 'br' }] }],\n    },\n};\n\n/**\n * Create DOM element from the given CreateElementData\n * @param elementData The CreateElementData or an index of a known CreateElementData used for creating this element\n * @param document The document to create the element from\n * @returns The root DOM element just created\n */\nexport default function createElement(\n    elementData:\n        | CreateElementData\n        | KnownCreateElementDataIndex\n        | CompatibleKnownCreateElementDataIndex,\n    document: Document\n): Element | null {\n    if (typeof elementData == 'number') {\n        elementData = KnownCreateElementData[elementData];\n    }\n\n    if (!elementData || !elementData.tag) {\n        return null;\n    }\n\n    const { tag, namespace, className, style, dataset, attributes, children } = elementData;\n    const result = namespace\n        ? document.createElementNS(namespace, tag)\n        : document.createElement(tag);\n\n    if (style) {\n        result.setAttribute('style', style);\n    }\n\n    if (className) {\n        result.className = className;\n    }\n\n    if (dataset && safeInstanceOf(result, 'HTMLElement')) {\n        getObjectKeys(dataset).forEach(datasetName => {\n            result.dataset[datasetName] = dataset[datasetName];\n        });\n    }\n\n    if (attributes) {\n        getObjectKeys(attributes).forEach(attrName => {\n            result.setAttribute(attrName, attributes[attrName]);\n        });\n    }\n\n    if (children) {\n        children.forEach(child => {\n            if (typeof child === 'string') {\n                result.appendChild(document.createTextNode(child));\n            } else if (child) {\n                const childElement = createElement(child, document);\n                if (childElement) {\n                    result.appendChild(childElement);\n                }\n            }\n        });\n    }\n\n    return result;\n}\n"]}