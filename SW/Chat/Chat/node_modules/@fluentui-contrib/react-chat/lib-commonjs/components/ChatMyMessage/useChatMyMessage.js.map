{"version":3,"sources":["../../../../../../packages/react-chat/src/components/ChatMyMessage/useChatMyMessage.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport type {\n  ChatMyMessageProps,\n  ChatMyMessageState,\n} from './ChatMyMessage.types';\n\nimport {\n  getPartitionedNativeProps,\n  resolveShorthand,\n} from '@fluentui/react-components';\nimport {\n  CheckmarkCircle16Regular,\n  Circle16Regular,\n  Clock16Regular,\n  Eye16Filled,\n  Flag16Filled,\n  Warning16Filled,\n} from '@fluentui/react-icons';\n\nimport { getDecorationIcon } from '../utils/getDecorationIcon';\nimport { useChatMessageFocusableGroup } from '../utils/useChatMessageFocusableGroup';\nimport { useChatMessagePopoverTrigger } from '../utils/useChatMessagePopoverTrigger';\n\nexport const useChatMyMessage_unstable = (\n  props: ChatMyMessageProps,\n  ref: React.Ref<HTMLDivElement>\n): ChatMyMessageState => {\n  const {\n    actions,\n    attached,\n    author,\n    body,\n    decoration,\n    decorationIcon,\n    decorationLabel,\n    details,\n    reactions,\n    root,\n    showAnimation,\n    status,\n    statusIcon,\n    statusMessage,\n    timestamp,\n  } = props;\n\n  /**\n   * Splits the native props into ones that go to the `root` slot, and ones that go to the primary slot.\n   * The primary slot is the `body` slot in this case.\n   */\n  const nativeProps = getPartitionedNativeProps<\n    ChatMyMessageProps &\n      Pick<\n        React.HTMLAttributes<HTMLElement>,\n        'style' | 'className' | 'tabIndex'\n      >,\n    'tabIndex'\n  >({\n    primarySlotTagName: 'div',\n    props,\n    excludedPropNames: ['tabIndex'], // tabIndex from props will not be applied to the primary slot, as it should always be 0 for tabster navigation\n  });\n\n  const state: ChatMyMessageState = {\n    attached,\n    decoration,\n    showAnimation,\n    status,\n\n    body: resolveShorthand(body, {\n      required: true,\n      defaultProps: {\n        ref,\n        ...nativeProps.primary,\n        tabIndex: 0,\n      },\n    }),\n    root: resolveShorthand(root, {\n      required: true,\n      defaultProps: nativeProps.root,\n    }),\n\n    actions: resolveShorthand(actions),\n    author: resolveShorthand(author),\n    decorationIcon: resolveShorthand(decorationIcon, {\n      required: !!decoration,\n    }),\n    decorationLabel: resolveShorthand(decorationLabel),\n    details: resolveShorthand(details),\n    reactions: resolveShorthand(reactions),\n    statusIcon: resolveShorthand(statusIcon, { required: !!status }),\n    statusMessage: resolveShorthand(statusMessage),\n    timestamp: resolveShorthand(timestamp),\n\n    components: {\n      actions: 'div',\n      author: 'div',\n      body: 'div',\n      decorationIcon: 'div',\n      decorationLabel: 'div',\n      details: 'div',\n      reactions: 'div',\n      root: 'div',\n      statusIcon: 'div',\n      statusMessage: 'div',\n      timestamp: 'span',\n    },\n  };\n\n  updateStatusWithIcon(state);\n\n  if (state.decorationIcon && !state.decorationIcon.children) {\n    state.decorationIcon.children = getDecorationIcon(decoration);\n  }\n\n  useChatMessagePopoverTrigger(state);\n  useChatMessageFocusableGroup(state);\n\n  return state;\n};\n\nconst updateStatusWithIcon = (state: ChatMyMessageState) => {\n  if (state.statusIcon && !state.statusIcon.children) {\n    switch (state.status) {\n      case 'sending':\n        state.statusIcon.children = <Circle16Regular />;\n        break;\n      case 'received':\n        state.statusIcon.children = <CheckmarkCircle16Regular />;\n        break;\n      case 'read':\n        state.statusIcon.children = <Eye16Filled />;\n        break;\n      case 'failed':\n        state.statusIcon.children = <Warning16Filled />;\n        break;\n      case 'blocked':\n        state.statusIcon.children = <Flag16Filled />;\n        break;\n      case 'scheduled':\n        state.statusIcon.children = <Clock16Regular />;\n        break;\n    }\n  }\n};\n"],"names":["useChatMyMessage_unstable","props","ref","actions","attached","author","body","decoration","decorationIcon","decorationLabel","details","reactions","root","showAnimation","status","statusIcon","statusMessage","timestamp","nativeProps","getPartitionedNativeProps","primarySlotTagName","excludedPropNames","state","resolveShorthand","required","defaultProps","primary","tabIndex","components","updateStatusWithIcon","children","getDecorationIcon","useChatMessagePopoverTrigger","useChatMessageFocusableGroup","Circle16Regular","CheckmarkCircle16Regular","Eye16Filled","Warning16Filled","Flag16Filled","Clock16Regular"],"mappings":";;;;+BAwBaA;;;eAAAA;;;;iEAxBU;iCAUhB;4BAQA;mCAE2B;8CACW;8CACA;AAEtC,MAAMA,4BAA4B,CACvCC,OACAC,MACuB;IACvB,MAAM,EACJC,QAAO,EACPC,SAAQ,EACRC,OAAM,EACNC,KAAI,EACJC,WAAU,EACVC,eAAc,EACdC,gBAAe,EACfC,QAAO,EACPC,UAAS,EACTC,KAAI,EACJC,cAAa,EACbC,OAAM,EACNC,WAAU,EACVC,cAAa,EACbC,UAAS,EACV,GAAGhB;IAEJ;;;GAGC,GACD,MAAMiB,cAAcC,IAAAA,0CAAyB,EAO3C;QACAC,oBAAoB;QACpBnB;QACAoB,mBAAmB;YAAC;SAAW;IACjC;IAEA,MAAMC,QAA4B;QAChClB;QACAG;QACAM;QACAC;QAEAR,MAAMiB,IAAAA,iCAAgB,EAACjB,MAAM;YAC3BkB,UAAU,IAAI;YACdC,cAAc;gBACZvB;gBACA,GAAGgB,YAAYQ,OAAO;gBACtBC,UAAU;YACZ;QACF;QACAf,MAAMW,IAAAA,iCAAgB,EAACX,MAAM;YAC3BY,UAAU,IAAI;YACdC,cAAcP,YAAYN,IAAI;QAChC;QAEAT,SAASoB,IAAAA,iCAAgB,EAACpB;QAC1BE,QAAQkB,IAAAA,iCAAgB,EAAClB;QACzBG,gBAAgBe,IAAAA,iCAAgB,EAACf,gBAAgB;YAC/CgB,UAAU,CAAC,CAACjB;QACd;QACAE,iBAAiBc,IAAAA,iCAAgB,EAACd;QAClCC,SAASa,IAAAA,iCAAgB,EAACb;QAC1BC,WAAWY,IAAAA,iCAAgB,EAACZ;QAC5BI,YAAYQ,IAAAA,iCAAgB,EAACR,YAAY;YAAES,UAAU,CAAC,CAACV;QAAO;QAC9DE,eAAeO,IAAAA,iCAAgB,EAACP;QAChCC,WAAWM,IAAAA,iCAAgB,EAACN;QAE5BW,YAAY;YACVzB,SAAS;YACTE,QAAQ;YACRC,MAAM;YACNE,gBAAgB;YAChBC,iBAAiB;YACjBC,SAAS;YACTC,WAAW;YACXC,MAAM;YACNG,YAAY;YACZC,eAAe;YACfC,WAAW;QACb;IACF;IAEAY,qBAAqBP;IAErB,IAAIA,MAAMd,cAAc,IAAI,CAACc,MAAMd,cAAc,CAACsB,QAAQ,EAAE;QAC1DR,MAAMd,cAAc,CAACsB,QAAQ,GAAGC,IAAAA,oCAAiB,EAACxB;IACpD,CAAC;IAEDyB,IAAAA,0DAA4B,EAACV;IAC7BW,IAAAA,0DAA4B,EAACX;IAE7B,OAAOA;AACT;AAEA,MAAMO,uBAAuB,CAACP,QAA8B;IAC1D,IAAIA,MAAMP,UAAU,IAAI,CAACO,MAAMP,UAAU,CAACe,QAAQ,EAAE;QAClD,OAAQR,MAAMR,MAAM;YAClB,KAAK;gBACHQ,MAAMP,UAAU,CAACe,QAAQ,iBAAG,qBAACI,2BAAe;gBAC5C,KAAM;YACR,KAAK;gBACHZ,MAAMP,UAAU,CAACe,QAAQ,iBAAG,qBAACK,oCAAwB;gBACrD,KAAM;YACR,KAAK;gBACHb,MAAMP,UAAU,CAACe,QAAQ,iBAAG,qBAACM,uBAAW;gBACxC,KAAM;YACR,KAAK;gBACHd,MAAMP,UAAU,CAACe,QAAQ,iBAAG,qBAACO,2BAAe;gBAC5C,KAAM;YACR,KAAK;gBACHf,MAAMP,UAAU,CAACe,QAAQ,iBAAG,qBAACQ,wBAAY;gBACzC,KAAM;YACR,KAAK;gBACHhB,MAAMP,UAAU,CAACe,QAAQ,iBAAG,qBAACS,0BAAc;gBAC3C,KAAM;QACV;IACF,CAAC;AACH"}