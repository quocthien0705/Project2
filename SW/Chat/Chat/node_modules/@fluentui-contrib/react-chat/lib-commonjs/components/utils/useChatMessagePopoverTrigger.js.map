{"version":3,"sources":["../../../../../../packages/react-chat/src/components/utils/useChatMessagePopoverTrigger.ts"],"sourcesContent":["import * as React from 'react';\nimport {\n  usePopoverContext_unstable,\n  useMergedRefs,\n} from '@fluentui/react-components';\nimport { useEventCallback } from './useEventCallback';\nimport { mergeCallbacks } from './mergeCallbacks';\nimport { ChatMessageState } from '../ChatMessage/ChatMessage.types';\nimport { ChatMyMessageState } from '../ChatMyMessage/ChatMyMessage.types';\n\nexport const useChatMessagePopoverTrigger = (\n  state: Pick<ChatMessageState | ChatMyMessageState, 'body'>\n) => {\n  // V9 PopoverTrigger uses useARIAButtonProps and triggers click event on space key.\n  // We don't want this behavior because it means we can't type with space key in the `input` within chat message.\n  // If we don't do custom trigger, we'd have to stop keydown/keyup propagation for space key within chat message children.\n  // Also v9 PopoverTrigger toggles popover on click, but we want to disable this behavior. Therefore customize trigger is a good option.\n  const setOpen = usePopoverContext_unstable((context) => context.setOpen);\n  const triggerRef = usePopoverContext_unstable(\n    (context) => context.triggerRef\n  );\n\n  const onMouseEnter = (e: React.MouseEvent<HTMLElement>) => {\n    setOpen(e, true);\n  };\n  const onMouseLeave = (e: React.MouseEvent<HTMLElement>) => {\n    setOpen(e, false);\n  };\n\n  state.body.onMouseEnter = useEventCallback(\n    mergeCallbacks(state.body.onMouseEnter, onMouseEnter)\n  );\n\n  state.body.onMouseLeave = useEventCallback(\n    mergeCallbacks(state.body.onMouseLeave, onMouseLeave)\n  );\n\n  state.body.ref = useMergedRefs(\n    state.body.ref,\n    triggerRef as React.MutableRefObject<HTMLDivElement | null>\n  );\n};\n"],"names":["useChatMessagePopoverTrigger","state","setOpen","usePopoverContext_unstable","context","triggerRef","onMouseEnter","e","onMouseLeave","body","useEventCallback","mergeCallbacks","ref","useMergedRefs"],"mappings":";;;;+BAUaA;;;eAAAA;;;;iEAVU;iCAIhB;kCAC0B;gCACF;AAIxB,MAAMA,+BAA+B,CAC1CC,QACG;IACH,mFAAmF;IACnF,gHAAgH;IAChH,yHAAyH;IACzH,uIAAuI;IACvI,MAAMC,UAAUC,IAAAA,2CAA0B,EAAC,CAACC,UAAYA,QAAQF,OAAO;IACvE,MAAMG,aAAaF,IAAAA,2CAA0B,EAC3C,CAACC,UAAYA,QAAQC,UAAU;IAGjC,MAAMC,eAAe,CAACC,IAAqC;QACzDL,QAAQK,GAAG,IAAI;IACjB;IACA,MAAMC,eAAe,CAACD,IAAqC;QACzDL,QAAQK,GAAG,KAAK;IAClB;IAEAN,MAAMQ,IAAI,CAACH,YAAY,GAAGI,IAAAA,kCAAgB,EACxCC,IAAAA,8BAAc,EAACV,MAAMQ,IAAI,CAACH,YAAY,EAAEA;IAG1CL,MAAMQ,IAAI,CAACD,YAAY,GAAGE,IAAAA,kCAAgB,EACxCC,IAAAA,8BAAc,EAACV,MAAMQ,IAAI,CAACD,YAAY,EAAEA;IAG1CP,MAAMQ,IAAI,CAACG,GAAG,GAAGC,IAAAA,8BAAa,EAC5BZ,MAAMQ,IAAI,CAACG,GAAG,EACdP;AAEJ"}