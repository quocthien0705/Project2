{"version":3,"sources":["../../../../../../packages/react-chat/src/components/ChatMyMessage/useChatMyMessage.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport type {\n  ChatMyMessageProps,\n  ChatMyMessageState,\n} from './ChatMyMessage.types';\n\nimport {\n  getPartitionedNativeProps,\n  resolveShorthand,\n} from '@fluentui/react-components';\nimport {\n  CheckmarkCircle16Regular,\n  Circle16Regular,\n  Clock16Regular,\n  Eye16Filled,\n  Flag16Filled,\n  Warning16Filled,\n} from '@fluentui/react-icons';\n\nimport { getDecorationIcon } from '../utils/getDecorationIcon';\nimport { useChatMessageFocusableGroup } from '../utils/useChatMessageFocusableGroup';\nimport { useChatMessagePopoverTrigger } from '../utils/useChatMessagePopoverTrigger';\n\nexport const useChatMyMessage_unstable = (\n  props: ChatMyMessageProps,\n  ref: React.Ref<HTMLDivElement>\n): ChatMyMessageState => {\n  const {\n    actions,\n    attached,\n    author,\n    body,\n    decoration,\n    decorationIcon,\n    decorationLabel,\n    details,\n    reactions,\n    root,\n    showAnimation,\n    status,\n    statusIcon,\n    statusMessage,\n    timestamp,\n  } = props;\n\n  /**\n   * Splits the native props into ones that go to the `root` slot, and ones that go to the primary slot.\n   * The primary slot is the `body` slot in this case.\n   */\n  const nativeProps = getPartitionedNativeProps<\n    ChatMyMessageProps &\n      Pick<\n        React.HTMLAttributes<HTMLElement>,\n        'style' | 'className' | 'tabIndex'\n      >,\n    'tabIndex'\n  >({\n    primarySlotTagName: 'div',\n    props,\n    excludedPropNames: ['tabIndex'], // tabIndex from props will not be applied to the primary slot, as it should always be 0 for tabster navigation\n  });\n\n  const state: ChatMyMessageState = {\n    attached,\n    decoration,\n    showAnimation,\n    status,\n\n    body: resolveShorthand(body, {\n      required: true,\n      defaultProps: {\n        ref,\n        ...nativeProps.primary,\n        tabIndex: 0,\n      },\n    }),\n    root: resolveShorthand(root, {\n      required: true,\n      defaultProps: nativeProps.root,\n    }),\n\n    actions: resolveShorthand(actions),\n    author: resolveShorthand(author),\n    decorationIcon: resolveShorthand(decorationIcon, {\n      required: !!decoration,\n    }),\n    decorationLabel: resolveShorthand(decorationLabel),\n    details: resolveShorthand(details),\n    reactions: resolveShorthand(reactions),\n    statusIcon: resolveShorthand(statusIcon, { required: !!status }),\n    statusMessage: resolveShorthand(statusMessage),\n    timestamp: resolveShorthand(timestamp),\n\n    components: {\n      actions: 'div',\n      author: 'div',\n      body: 'div',\n      decorationIcon: 'div',\n      decorationLabel: 'div',\n      details: 'div',\n      reactions: 'div',\n      root: 'div',\n      statusIcon: 'div',\n      statusMessage: 'div',\n      timestamp: 'span',\n    },\n  };\n\n  updateStatusWithIcon(state);\n\n  if (state.decorationIcon && !state.decorationIcon.children) {\n    state.decorationIcon.children = getDecorationIcon(decoration);\n  }\n\n  useChatMessagePopoverTrigger(state);\n  useChatMessageFocusableGroup(state);\n\n  return state;\n};\n\nconst updateStatusWithIcon = (state: ChatMyMessageState) => {\n  if (state.statusIcon && !state.statusIcon.children) {\n    switch (state.status) {\n      case 'sending':\n        state.statusIcon.children = <Circle16Regular />;\n        break;\n      case 'received':\n        state.statusIcon.children = <CheckmarkCircle16Regular />;\n        break;\n      case 'read':\n        state.statusIcon.children = <Eye16Filled />;\n        break;\n      case 'failed':\n        state.statusIcon.children = <Warning16Filled />;\n        break;\n      case 'blocked':\n        state.statusIcon.children = <Flag16Filled />;\n        break;\n      case 'scheduled':\n        state.statusIcon.children = <Clock16Regular />;\n        break;\n    }\n  }\n};\n"],"names":["React","getPartitionedNativeProps","resolveShorthand","CheckmarkCircle16Regular","Circle16Regular","Clock16Regular","Eye16Filled","Flag16Filled","Warning16Filled","getDecorationIcon","useChatMessageFocusableGroup","useChatMessagePopoverTrigger","useChatMyMessage_unstable","props","ref","actions","attached","author","body","decoration","decorationIcon","decorationLabel","details","reactions","root","showAnimation","status","statusIcon","statusMessage","timestamp","nativeProps","primarySlotTagName","excludedPropNames","state","required","defaultProps","primary","tabIndex","components","updateStatusWithIcon","children"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAO/B,SACEC,yBAAyB,EACzBC,gBAAgB,QACX,6BAA6B;AACpC,SACEC,wBAAwB,EACxBC,eAAe,EACfC,cAAc,EACdC,WAAW,EACXC,YAAY,EACZC,eAAe,QACV,wBAAwB;AAE/B,SAASC,iBAAiB,QAAQ,6BAA6B;AAC/D,SAASC,4BAA4B,QAAQ,wCAAwC;AACrF,SAASC,4BAA4B,QAAQ,wCAAwC;AAErF,OAAO,MAAMC,4BAA4B,CACvCC,OACAC,MACuB;IACvB,MAAM,EACJC,QAAO,EACPC,SAAQ,EACRC,OAAM,EACNC,KAAI,EACJC,WAAU,EACVC,eAAc,EACdC,gBAAe,EACfC,QAAO,EACPC,UAAS,EACTC,KAAI,EACJC,cAAa,EACbC,OAAM,EACNC,WAAU,EACVC,cAAa,EACbC,UAAS,EACV,GAAGhB;IAEJ;;;GAGC,GACD,MAAMiB,cAAc7B,0BAOlB;QACA8B,oBAAoB;QACpBlB;QACAmB,mBAAmB;YAAC;SAAW;IACjC;IAEA,MAAMC,QAA4B;QAChCjB;QACAG;QACAM;QACAC;QAEAR,MAAMhB,iBAAiBgB,MAAM;YAC3BgB,UAAU,IAAI;YACdC,cAAc;gBACZrB;gBACA,GAAGgB,YAAYM,OAAO;gBACtBC,UAAU;YACZ;QACF;QACAb,MAAMtB,iBAAiBsB,MAAM;YAC3BU,UAAU,IAAI;YACdC,cAAcL,YAAYN,IAAI;QAChC;QAEAT,SAASb,iBAAiBa;QAC1BE,QAAQf,iBAAiBe;QACzBG,gBAAgBlB,iBAAiBkB,gBAAgB;YAC/Cc,UAAU,CAAC,CAACf;QACd;QACAE,iBAAiBnB,iBAAiBmB;QAClCC,SAASpB,iBAAiBoB;QAC1BC,WAAWrB,iBAAiBqB;QAC5BI,YAAYzB,iBAAiByB,YAAY;YAAEO,UAAU,CAAC,CAACR;QAAO;QAC9DE,eAAe1B,iBAAiB0B;QAChCC,WAAW3B,iBAAiB2B;QAE5BS,YAAY;YACVvB,SAAS;YACTE,QAAQ;YACRC,MAAM;YACNE,gBAAgB;YAChBC,iBAAiB;YACjBC,SAAS;YACTC,WAAW;YACXC,MAAM;YACNG,YAAY;YACZC,eAAe;YACfC,WAAW;QACb;IACF;IAEAU,qBAAqBN;IAErB,IAAIA,MAAMb,cAAc,IAAI,CAACa,MAAMb,cAAc,CAACoB,QAAQ,EAAE;QAC1DP,MAAMb,cAAc,CAACoB,QAAQ,GAAG/B,kBAAkBU;IACpD,CAAC;IAEDR,6BAA6BsB;IAC7BvB,6BAA6BuB;IAE7B,OAAOA;AACT,EAAE;AAEF,MAAMM,uBAAuB,CAACN,QAA8B;IAC1D,IAAIA,MAAMN,UAAU,IAAI,CAACM,MAAMN,UAAU,CAACa,QAAQ,EAAE;QAClD,OAAQP,MAAMP,MAAM;YAClB,KAAK;gBACHO,MAAMN,UAAU,CAACa,QAAQ,iBAAG,oBAACpC;gBAC7B,KAAM;YACR,KAAK;gBACH6B,MAAMN,UAAU,CAACa,QAAQ,iBAAG,oBAACrC;gBAC7B,KAAM;YACR,KAAK;gBACH8B,MAAMN,UAAU,CAACa,QAAQ,iBAAG,oBAAClC;gBAC7B,KAAM;YACR,KAAK;gBACH2B,MAAMN,UAAU,CAACa,QAAQ,iBAAG,oBAAChC;gBAC7B,KAAM;YACR,KAAK;gBACHyB,MAAMN,UAAU,CAACa,QAAQ,iBAAG,oBAACjC;gBAC7B,KAAM;YACR,KAAK;gBACH0B,MAAMN,UAAU,CAACa,QAAQ,iBAAG,oBAACnC;gBAC7B,KAAM;QACV;IACF,CAAC;AACH"}