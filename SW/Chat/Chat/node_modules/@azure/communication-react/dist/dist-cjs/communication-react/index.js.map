{"version":3,"file":"index.js","sources":["../../../preprocess-dist/acs-ui-common/src/memoizeFnAll.ts","../../../preprocess-dist/acs-ui-common/src/identifier.ts","../../../preprocess-dist/acs-ui-common/src/telemetryVersion.js","../../../preprocess-dist/acs-ui-common/src/telemetry.ts","../../../preprocess-dist/acs-ui-common/src/localizationUtils.ts","../../../preprocess-dist/acs-ui-common/src/safeStringify.ts","../../../preprocess-dist/acs-ui-common/src/common.ts","../../../preprocess-dist/acs-ui-common/src/cssUtils.ts","../../../preprocess-dist/acs-ui-common/src/logEvent.ts","../../../preprocess-dist/calling-component-bindings/src/baseSelectors.ts","../../../preprocess-dist/calling-component-bindings/src/utils/callUtils.ts","../../../preprocess-dist/calling-component-bindings/src/callControlSelectors.ts","../../../preprocess-dist/calling-component-bindings/src/handlers/createCommonHandlers.ts","../../../preprocess-dist/calling-component-bindings/src/handlers/createHandlers.ts","../../../preprocess-dist/calling-component-bindings/src/captionsSelector.ts","../../../preprocess-dist/calling-stateful-client/src/DeviceManagerDeclarative.ts","../../../preprocess-dist/calling-stateful-client/src/CallClientState.ts","../../../preprocess-dist/calling-stateful-client/src/Logger.ts","../../../preprocess-dist/calling-stateful-client/src/CallIdHistory.ts","../../../preprocess-dist/calling-stateful-client/src/Converter.ts","../../../preprocess-dist/calling-stateful-client/src/CallContext.ts","../../../preprocess-dist/calling-stateful-client/src/CaptionsSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/LocalVideoStreamVideoEffectsSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/RemoteVideoStreamSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/StreamUtilsLogging.ts","../../../preprocess-dist/calling-stateful-client/src/StreamUtils.ts","../../../preprocess-dist/calling-stateful-client/src/ParticipantSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/RecordingSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/TranscriptionSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/UserFacingDiagnosticsSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/RaiseHandSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/OptimalVideoCountSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/CapabilitiesSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/CallSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/IncomingCallDeclarative.ts","../../../preprocess-dist/calling-stateful-client/src/IncomingCallSubscriber.ts","../../../preprocess-dist/calling-stateful-client/src/CallAgentDeclarativeCommon.ts","../../../preprocess-dist/calling-stateful-client/src/CallDeclarativeCommon.ts","../../../preprocess-dist/calling-stateful-client/src/CallDeclarative.ts","../../../preprocess-dist/calling-stateful-client/src/TypeGuards.ts","../../../preprocess-dist/calling-stateful-client/src/CallAgentDeclarative.ts","../../../preprocess-dist/calling-stateful-client/src/InternalCallContext.ts","../../../preprocess-dist/calling-stateful-client/src/VideoStreamRendererViewDeclarative.ts","../../../preprocess-dist/calling-stateful-client/src/StatefulCallClient.ts","../../../preprocess-dist/calling-component-bindings/src/providers/CallAgentProvider.tsx","../../../preprocess-dist/calling-component-bindings/src/providers/CallClientProvider.tsx","../../../preprocess-dist/calling-component-bindings/src/providers/CallProvider.tsx","../../../preprocess-dist/react-components/src/components/styles/TypingIndicator.styles.ts","../../../preprocess-dist/react-components/src/localization/locales/index.ts","../../../preprocess-dist/react-components/src/localization/LocalizationProvider.tsx","../../../preprocess-dist/react-components/src/identifiers/IdentifierProvider.tsx","../../../preprocess-dist/react-components/src/components/TypingIndicator.tsx","../../../preprocess-dist/react-components/src/components/utils.ts","../../../preprocess-dist/react-components/src/components/ErrorBar.tsx","../../../preprocess-dist/react-components/src/components/styles/GridLayout.styles.ts","../../../preprocess-dist/react-components/src/components/GridLayout.tsx","../../../preprocess-dist/react-components/src/components/styles/SendBox.styles.ts","../../../preprocess-dist/react-components/src/theming/themes.ts","../../../preprocess-dist/react-components/src/theming/FluentThemeProvider.tsx","../../../preprocess-dist/react-components/src/theming/icons.tsx","../../../preprocess-dist/react-components/src/components/styles/InputBoxComponent.style.ts","../../../preprocess-dist/react-components/src/components/InputBoxComponent.tsx","../../../preprocess-dist/react-components/src/theming/themeUtils.ts","../../../preprocess-dist/react-components/src/components/styles/InputBoxButton.style.ts","../../../preprocess-dist/react-components/src/components/InputBoxButton.tsx","../../../preprocess-dist/react-components/src/components/utils/SendBoxUtils.ts","../../../preprocess-dist/react-components/src/components/SendBox.tsx","../../../preprocess-dist/react-components/src/components/styles/ImageOverlay.style.ts","../../../preprocess-dist/react-components/src/components/ImageOverlay.tsx","../../../preprocess-dist/react-components/src/components/styles/MessageStatusIndicator.styles.ts","../../../preprocess-dist/react-components/src/components/Announcer/AnnouncerContext.ts","../../../preprocess-dist/react-components/src/components/Announcer/AnnouncerMessage.tsx","../../../preprocess-dist/react-components/src/components/Announcer/LiveMessage.tsx","../../../preprocess-dist/react-components/src/components/MessageStatusIcon.tsx","../../../preprocess-dist/react-components/src/components/MessageStatusIndicatorInternal.tsx","../../../preprocess-dist/react-components/src/components/MessageStatusIndicator.tsx","../../../preprocess-dist/react-components/src/components/styles/MessageThread.styles.ts","../../../preprocess-dist/react-components/src/components/utils/delay.ts","../../../preprocess-dist/react-components/src/components/utils/responsive.ts","../../../preprocess-dist/react-components/src/components/utils/getParticipantsWhoHaveReadMessage.ts","../../../preprocess-dist/react-components/src/theming/themeDuplicates.ts","../../../preprocess-dist/react-components/src/theming/v9ThemeShim.ts","../../../preprocess-dist/react-components/src/theming/FluentV9ThemeProvider.tsx","../../../preprocess-dist/react-components/src/components/Announcer/MessageBlock.tsx","../../../preprocess-dist/react-components/src/components/Announcer/Announcer.tsx","../../../preprocess-dist/react-components/src/components/Announcer/LiveAnnouncer.tsx","../../../preprocess-dist/react-components/src/components/styles/v8StyleShim.ts","../../../preprocess-dist/react-components/src/components/styles/EditBox.styles.ts","../../../preprocess-dist/react-components/src/components/styles/ChatMessageComponent.styles.ts","../../../preprocess-dist/react-components/src/components/utils/ChatMessageComponentAsEditBoxUtils.tsx","../../../preprocess-dist/react-components/src/components/ChatMessage/ChatMessageComponentAsEditBox.tsx","../../../preprocess-dist/react-components/src/components/utils/Datetime.ts","../../../preprocess-dist/react-components/src/components/ChatMessage/ChatMessageActionsFlyout.tsx","../../../preprocess-dist/react-components/src/components/ChatMessage/ChatMessageContent.tsx","../../../preprocess-dist/react-components/src/components/ChatMessage/ChatMessageActionMenu.tsx","../../../preprocess-dist/react-components/src/components/ChatMessage/ChatMessageComponentAsMessageBubble.tsx","../../../preprocess-dist/react-components/src/components/ChatMessage/ChatMessageComponent.tsx","../../../preprocess-dist/react-components/src/components/ChatMessage/FluentChatMessageComponentWrapper.tsx","../../../preprocess-dist/react-components/src/components/styles/SystemMessage.styles.ts","../../../preprocess-dist/react-components/src/components/SystemMessage.tsx","../../../preprocess-dist/react-components/src/components/ChatMessage/DefaultSystemMessage.tsx","../../../preprocess-dist/react-components/src/components/ChatMessage/ChatMessageComponentWrapper.tsx","../../../preprocess-dist/react-components/src/components/Announcer.tsx","../../../preprocess-dist/react-components/src/components/MessageThread.tsx","../../../preprocess-dist/react-components/src/components/styles/StreamMedia.styles.ts","../../../preprocess-dist/react-components/src/components/StreamMedia.tsx","../../../preprocess-dist/react-components/src/components/styles/ParticipantItem.styles.ts","../../../preprocess-dist/react-components/src/components/ParticipantItem.tsx","../../../preprocess-dist/react-components/src/components/assets/RaisedHandIcon.tsx","../../../preprocess-dist/react-components/src/components/styles/ParticipantList.styles.ts","../../../preprocess-dist/react-components/src/components/ParticipantList.tsx","../../../preprocess-dist/react-components/src/components/utils/keyboardNavigation.ts","../../../preprocess-dist/react-components/src/components/Drawer/DrawerMenuItem.tsx","../../../preprocess-dist/react-components/src/components/Drawer/DrawerContentContainer.tsx","../../../preprocess-dist/react-components/src/components/Drawer/DrawerLightDismiss.tsx","../../../preprocess-dist/react-components/src/components/Drawer/DrawerSurface.tsx","../../../preprocess-dist/react-components/src/components/Drawer/DrawerMenu.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/RemoteVideoTile.styles.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/useVideoStreamLifecycleMaintainer.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/useVideoTileContextualMenuProps.ts","../../../preprocess-dist/react-components/src/components/styles/VideoTile.styles.ts","../../../preprocess-dist/react-components/src/components/utils/videoTileStylesUtils.tsx","../../../preprocess-dist/react-components/src/components/utils/useLongPress.ts","../../../preprocess-dist/react-components/src/components/VideoTile.tsx","../../../preprocess-dist/react-components/src/components/RemoteVideoTile.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/LocalScreenShare.styles.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/LocalScreenShare.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/RemoteScreenShare.styles.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/RemoteScreenShare.tsx","../../../preprocess-dist/react-components/src/components/styles/VideoGallery.styles.ts","../../../preprocess-dist/react-components/src/components/LocalVideoCameraButton.tsx","../../../preprocess-dist/react-components/src/components/LocalVideoTile.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/DefaultLayout.styles.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/Layout.styles.ts","../../../preprocess-dist/react-components/src/gallery/dominantSpeaker.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/utils/videoGalleryLayoutUtils.ts","../../../preprocess-dist/react-components/src/components/styles/HorizontalGallery.styles.ts","../../../preprocess-dist/react-components/src/components/utils/overFlowGalleriesUtils.ts","../../../preprocess-dist/react-components/src/components/HorizontalGallery.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/FloatingLocalVideo.styles.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/VideoGalleryResponsiveHorizontalGallery.styles.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/VideoGalleryResponsiveVerticalGallery.styles.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/utils/OverflowGalleryUtils.ts","../../../preprocess-dist/react-components/src/components/ResponsiveHorizontalGallery.tsx","../../../preprocess-dist/react-components/src/components/styles/VerticalGallery.styles.ts","../../../preprocess-dist/react-components/src/components/VerticalGallery.tsx","../../../preprocess-dist/react-components/src/components/ResponsiveVerticalGallery.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/ScrollableHorizontalGallery.style.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/ScrollableHorizontalGallery.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/OverflowGallery.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/DefaultLayout.tsx","../../../preprocess-dist/react-components/src/components/ModalClone/ModalClone.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/FloatingLocalVideo.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/styles/FloatingLocalVideoLayout.styles.ts","../../../preprocess-dist/react-components/src/components/VideoGallery/FloatingLocalVideoLayout.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/SpeakerVideoLayout.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery/FocusContentLayout.tsx","../../../preprocess-dist/react-components/src/components/VideoGallery.tsx","../../../preprocess-dist/react-components/src/components/styles/ControlBar.styles.ts","../../../preprocess-dist/react-components/src/components/ControlButtonTooltip.tsx","../../../preprocess-dist/react-components/src/components/ControlBarButton.tsx","../../../preprocess-dist/react-components/src/components/HighContrastAwareIcon.tsx","../../../preprocess-dist/react-components/src/components/DevicesButton.tsx","../../../preprocess-dist/react-components/src/components/CameraButton.tsx","../../../preprocess-dist/react-components/src/components/ControlBar.tsx","../../../preprocess-dist/react-components/src/components/EndCallButton.tsx","../../../preprocess-dist/react-components/src/components/MicrophoneButton.tsx","../../../preprocess-dist/react-components/src/components/ParticipantsButton.tsx","../../../preprocess-dist/react-components/src/components/ScreenShareButton.tsx","../../../preprocess-dist/react-components/src/components/RaiseHandButton.tsx","../../../preprocess-dist/react-components/src/components/PictureInPictureInPicture/PictureInPictureInPictureTile.tsx","../../../preprocess-dist/react-components/src/components/PictureInPictureInPicture/PictureInPictureInPicture.tsx","../../../preprocess-dist/react-components/src/components/FileCardGroup.tsx","../../../preprocess-dist/react-components/src/components/styles/IconButton.styles.ts","../../../preprocess-dist/react-components/src/components/FileDownloadCards.tsx","../../../preprocess-dist/react-components/src/components/ComplianceBanner/Utils.tsx","../../../preprocess-dist/react-components/src/components/ComplianceBanner/BannerMessage.tsx","../../../preprocess-dist/react-components/src/components/ComplianceBanner/DelayedUpdateBanner.tsx","../../../preprocess-dist/react-components/src/components/ComplianceBanner/ComplianceBanner.tsx","../../../preprocess-dist/react-components/src/components/styles/Dialpad.styles.ts","../../../preprocess-dist/react-components/src/components/utils/formatPhoneNumber.ts","../../../preprocess-dist/react-components/src/components/Dialpad/DTMFToneGenerator.tsx","../../../preprocess-dist/react-components/src/components/Dialpad/Dialpad.tsx","../../../preprocess-dist/react-components/src/components/VideoEffects/VideoEffectsItem.styles.tsx","../../../preprocess-dist/react-components/src/components/VideoEffects/VideoEffectsItem.tsx","../../../preprocess-dist/react-components/src/components/VideoEffects/VideoBackgroundEffectsPicker.tsx","../../../preprocess-dist/react-components/src/components/styles/Common.style.ts","../../../preprocess-dist/react-components/src/components/styles/Captions.style.ts","../../../preprocess-dist/react-components/src/components/Caption.tsx","../../../preprocess-dist/react-components/src/components/CaptionsBanner.tsx","../../../preprocess-dist/react-components/src/components/StartCaptionsButton.tsx","../../../preprocess-dist/react-components/src/components/styles/CaptionsSettingsModal.styles.ts","../../../preprocess-dist/react-components/src/types/CaptionsAvailableLanguageStrings.ts","../../../preprocess-dist/react-components/src/components/CaptionsSettingsModal.tsx","../../../preprocess-dist/react-components/src/localization/locales/utils.ts","../../../preprocess-dist/react-components/src/localization/locales/en-GB/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/ar-SA/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/cs-CZ/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/de-DE/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/es-ES/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/fi-FI/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/fr-FR/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/he-IL/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/it-IT/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/ja-JP/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/ko-KR/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/nb-NO/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/nl-NL/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/pl-PL/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/pt-BR/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/ru-RU/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/sv-SE/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/tr-TR/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/zh-CN/ComponentLocale.tsx","../../../preprocess-dist/react-components/src/localization/locales/zh-TW/ComponentLocale.tsx","../../../preprocess-dist/calling-component-bindings/src/utils/SelectorUtils.ts","../../../preprocess-dist/calling-component-bindings/src/utils/videoGalleryUtils.ts","../../../preprocess-dist/calling-component-bindings/src/getRemoteParticipantsExcludingConsumers.ts","../../../preprocess-dist/calling-component-bindings/src/videoGallerySelector.ts","../../../preprocess-dist/calling-component-bindings/src/utils/participantListSelectorUtils.ts","../../../preprocess-dist/calling-component-bindings/src/participantListSelector.ts","../../../preprocess-dist/calling-component-bindings/src/participantsButtonSelector.ts","../../../preprocess-dist/calling-component-bindings/src/handlers/createDefaultCallingHandlersForComponent.ts","../../../preprocess-dist/calling-component-bindings/src/hooks/useHandlers.ts","../../../preprocess-dist/calling-component-bindings/src/hooks/useSelector.ts","../../../preprocess-dist/calling-component-bindings/src/errorBarSelector.ts","../../../preprocess-dist/calling-component-bindings/src/hooks/usePropsFor.ts","../../../preprocess-dist/chat-component-bindings/src/handlers/createHandlers.ts","../../../preprocess-dist/chat-component-bindings/src/providers/ChatClientProvider.tsx","../../../preprocess-dist/chat-component-bindings/src/providers/ChatThreadClientProvider.tsx","../../../preprocess-dist/chat-component-bindings/src/hooks/useHandlers.ts","../../../preprocess-dist/chat-component-bindings/src/hooks/useSelector.ts","../../../preprocess-dist/chat-component-bindings/src/baseSelectors.ts","../../../preprocess-dist/chat-component-bindings/src/sendBoxSelector.ts","../../../preprocess-dist/chat-component-bindings/src/utils/constants.ts","../../../preprocess-dist/chat-component-bindings/src/utils/compareMessages.ts","../../../preprocess-dist/chat-component-bindings/src/utils/updateMessagesWithAttached.ts","../../../preprocess-dist/chat-component-bindings/src/messageThreadSelector.ts","../../../preprocess-dist/chat-component-bindings/src/typingIndicatorSelector.ts","../../../preprocess-dist/chat-component-bindings/src/chatParticipantListSelector.ts","../../../preprocess-dist/chat-component-bindings/src/errorBarSelector.ts","../../../preprocess-dist/chat-component-bindings/src/hooks/usePropsFor.ts","../../../preprocess-dist/chat-stateful-client/src/ChatClientState.ts","../../../preprocess-dist/chat-stateful-client/src/Constants.ts","../../../preprocess-dist/chat-stateful-client/src/Logger.ts","../../../preprocess-dist/chat-stateful-client/src/ResourceDownloadQueue.ts","../../../preprocess-dist/chat-stateful-client/src/ChatContext.ts","../../../preprocess-dist/chat-stateful-client/src/convertChatMessage.ts","../../../preprocess-dist/chat-stateful-client/src/EventSubscriber.ts","../../../preprocess-dist/chat-stateful-client/src/iterators/createDecoratedIterator.ts","../../../preprocess-dist/chat-stateful-client/src/iterators/createDecoratedListMessages.ts","../../../preprocess-dist/chat-stateful-client/src/iterators/createDecoratedListReadReceipts.ts","../../../preprocess-dist/chat-stateful-client/src/iterators/createDecoratedListParticipants.ts","../../../preprocess-dist/chat-stateful-client/src/StatefulChatThreadClient.ts","../../../preprocess-dist/chat-stateful-client/src/iterators/createDecoratedListThreads.ts","../../../preprocess-dist/chat-stateful-client/src/StatefulChatClient.ts","../../../preprocess-dist/react-composites/src/composites/ChatComposite/adapter/AzureCommunicationChatAdapter.ts","../../../preprocess-dist/react-composites/src/composites/localization/locales/index.ts","../../../preprocess-dist/react-composites/src/composites/localization/LocalizationProvider.tsx","../../../preprocess-dist/react-composites/src/composites/common/icons.tsx","../../../preprocess-dist/react-composites/src/composites/common/styles/GlobalHostLayer.styles.ts","../../../preprocess-dist/react-composites/src/composites/common/BaseComposite.tsx","../../../preprocess-dist/react-composites/src/composites/ChatComposite/adapter/ChatAdapterProvider.tsx","../../../preprocess-dist/react-composites/src/composites/common/constants.ts","../../../preprocess-dist/react-composites/src/composites/ChatComposite/styles/Chat.styles.ts","../../../preprocess-dist/react-composites/src/composites/common/AvatarPersona.tsx","../../../preprocess-dist/react-composites/src/composites/ChatComposite/ChatHeader.tsx","../../../preprocess-dist/react-composites/src/composites/ChatComposite/file-sharing/FileUploadButton.tsx","../../../preprocess-dist/react-composites/src/composites/ChatComposite/hooks/useAdaptedSelector.ts","../../../preprocess-dist/react-composites/src/composites/ChatComposite/hooks/useHandlers.ts","../../../preprocess-dist/react-composites/src/composites/ChatComposite/hooks/usePropsFor.ts","../../../preprocess-dist/react-composites/src/composites/common/styles/ParticipantContainer.styles.ts","../../../preprocess-dist/react-composites/src/composites/common/SendBox.tsx","../../../preprocess-dist/react-composites/src/composites/ChatComposite/ChatScreen.tsx","../../../preprocess-dist/react-composites/src/composites/ChatComposite/ChatComposite.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/adapter/CallAdapterProvider.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/hooks/useAdaptedSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/utils/TrackErrors.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/adapter/CallAdapter.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/utils/Utils.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/hooks/useHandlers.ts","../../../preprocess-dist/react-composites/src/composites/common/CaptionsSettingsModal.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/Buttons.styles.ts","../../../preprocess-dist/react-composites/src/composites/common/MoreButton.tsx","../../../preprocess-dist/react-composites/src/composites/common/CaptionsBannerMoreButton.tsx","../../../preprocess-dist/react-composites/src/composites/common/CaptionsBanner.tsx","../../../preprocess-dist/react-composites/src/composites/common/ContainerRectProps.tsx","../../../preprocess-dist/react-composites/src/composites/common/styles/Composite.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/hooks/usePropsFor.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/buttons/Camera.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/buttons/Devices.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/buttons/EndCall.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/hooks/useSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/baseSelectors.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/buttons/Microphone.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/buttons/Participants.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/buttons/ScreenShare.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/CallControls.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/CallPage.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/buttons/RaiseHand.tsx","../../../preprocess-dist/react-composites/src/composites/common/ControlBar/CustomButton.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/CallControls.tsx","../../../preprocess-dist/react-composites/src/composites/common/ControlBar/PeopleButton.tsx","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/hooks/useCallWithChatCompositeStrings.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/mediaGallerySelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/utils/MediaGalleryUtils.ts","../../../preprocess-dist/react-composites/src/composites/common/ControlBar/DesktopMoreButton.tsx","../../../preprocess-dist/react-composites/src/composites/common/HiddenFocusStartPoint.tsx","../../../preprocess-dist/react-composites/src/composites/common/ControlBar/DtmfDialerButton.tsx","../../../preprocess-dist/react-composites/src/composites/common/ControlBar/CommonCallControlBar.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/MutedNotification.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/callStatusSelector.ts","../../../preprocess-dist/react-composites/src/composites/common/Drawer/captionSettingsDrawer.styles.ts","../../../preprocess-dist/react-composites/src/composites/common/Drawer/CaptionLanguageSettingsDrawer.tsx","../../../preprocess-dist/react-composites/src/composites/common/Drawer/MoreDrawer.styles.ts","../../../preprocess-dist/react-composites/src/composites/common/Drawer/SpokenLanguageSettingsDrawer.tsx","../../../preprocess-dist/react-composites/src/composites/common/Drawer/MoreDrawer.tsx","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/selectors/moreDrawerSelector.ts","../../../preprocess-dist/react-composites/src/composites/common/Drawer/PreparedMoreDrawer.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/CallComposite.styles.ts","../../../preprocess-dist/react-composites/src/composites/common/styles/Pane.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/SidePane/SidePaneProvider.tsx","../../../preprocess-dist/react-composites/src/composites/common/TabHeader.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/SidePane/SidePane.tsx","../../../preprocess-dist/react-composites/src/composites/common/SidePaneHeader.tsx","../../../preprocess-dist/react-composites/src/composites/common/ParticipantContainer.tsx","../../../preprocess-dist/react-composites/src/composites/common/styles/PeoplePaneContent.styles.ts","../../../preprocess-dist/react-composites/src/composites/common/ConvertContextualMenuItemToDrawerMenuItem.tsx","../../../preprocess-dist/react-composites/src/composites/common/AddPeopleButton.tsx","../../../preprocess-dist/react-composites/src/composites/common/PeoplePaneContent.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/SidePane/usePeoplePane.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/activeVideoBackgroundEffectSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/localVideoStreamSelector.ts","../../../preprocess-dist/react-composites/src/composites/common/VideoEffectsPane.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/SidePane/useVideoEffectsPane.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/LocalAndRemotePIP.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/dominantRemoteParticipantSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/localAndRemotePIPSelector.ts","../../../preprocess-dist/react-composites/src/composites/common/styles/ModalLocalAndRemotePIP.styles.ts","../../../preprocess-dist/react-composites/src/composites/common/ModalLocalAndRemotePIP.tsx","../../../preprocess-dist/react-composites/src/composites/common/utils.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/CapabilitiesChangedNotificationBar.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/CallArrangement.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/LocalVideoTileSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/MediaGallery.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/ExpandedLocalVideoTile.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/ExpandedLocalVideoTile.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/NetworkReconnectTile.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/NetworkReconnectTile.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/complianceBannerSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/mutedNotificationSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/lobbySelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/networkReconnectTileSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/utils/timerUtils.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/DtmfDialpadPage.styles.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/pages/DtmfDialpadPage.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/pages/CallPage.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/LocalDeviceSettings.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/ConfigurationPageCameraDropdown.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/ConfigurationPageMicDropdown.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/CallConfiguration.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/LocalDeviceSettings.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/StartCallButton.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/StartCallButton.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/devicePermissionSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/localPreviewSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/LocalPreview.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/LocalPreview.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/ConfigurationPageErrorBar.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/SvgWithWordWrapping.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/pages/ConfigurationPage.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/NoticePage.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/pages/NoticePage.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/LobbyTile.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/components/LobbyTile.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/pages/LobbyPage.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/styles/TransferPage.styles.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/pages/TransferPage.tsx","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/deviceCountSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/selectors/capabilitiesChangedInfoAndRoleSelector.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/utils/TrackCapabilityChangedNotifications.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/utils/useConsoleErrors.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/CallComposite.tsx","../../../preprocess-dist/react-composites/src/Logger.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/adapter/ParticipantSubcriber.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/adapter/DiagnosticsForwarder.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/adapter/createHandlers.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/adapter/OnFetchProfileCallback.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/adapter/CallingSoundSubscriber.ts","../../../preprocess-dist/react-composites/src/composites/CallComposite/adapter/AzureCommunicationCallAdapter.ts","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/styles/CallWithChatCompositeStyles.ts","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/adapter/CallWithChatBackedCallAdapter.ts","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/adapter/CallWithChatBackedChatAdapter.ts","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/ChatButton/ChatButton.tsx","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/ChatButton/NotificationIcon.tsx","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/ChatButton/ChatButtonWithUnreadMessagesBadge.tsx","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/ChatButton/useUnreadMessagesTracker.ts","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/CallWithChatComposite.tsx","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/state/CallWithChatAdapterState.ts","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/adapter/parseTeamsUrl.ts","../../../preprocess-dist/react-composites/src/composites/CallWithChatComposite/adapter/AzureCommunicationCallWithChatAdapter.ts","../../../preprocess-dist/react-composites/src/composites/localization/locales/utils.ts","../../../preprocess-dist/react-composites/src/composites/localization/locales/en-GB/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/ar-SA/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/cs-CZ/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/de-DE/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/es-ES/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/fi-FI/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/fr-FR/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/he-IL/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/it-IT/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/ja-JP/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/ko-KR/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/nb-NO/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/nl-NL/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/pl-PL/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/pt-BR/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/ru-RU/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/sv-SE/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/tr-TR/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/zh-CN/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/localization/locales/zh-TW/CompositeLocale.tsx","../../../preprocess-dist/react-composites/src/composites/common/resolveVideoEffectDependencyLazy.ts","../../../preprocess-dist/react-composites/src/composites/common/resolveVideoEffectDependency.ts","../../../preprocess-dist/communication-react/src/mergedHooks.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * A function type where the first argument is a key used to memoize results.\n *\n * @public\n */\nexport type FunctionWithKey<KeyT, ArgsT extends unknown[], RetT> = (key: KeyT, ...args: ArgsT) => RetT;\n\n/**\n * A function type that is called with the result of a memoized functions return value.\n *\n * @public\n */\nexport type CallbackType<KeyT, ArgsT extends unknown[], FnRetT> = (memoizedFn: FunctionWithKey<KeyT, ArgsT, FnRetT>) => FnRetT[];\nconst argsCmp = (args1: unknown[], args2: unknown[], objCmp: (obj1: unknown, obj2: unknown) => boolean): boolean => {\n  return args1.length === args2.length && args1.every((arg1, index) => objCmp(args2[index], arg1));\n};\n\n/**\n * The function memoize a series of function calls in a single pass,\n * it memoizes all the args and return in a single run of the callback function, and read it in the next round of execution\n * note: this is a memory opimized function which will only memoize one round of bulk calls\n * @param  fnToMemoize - the function needs to be bulk memorized and a key key paramter needs to be provided as cache id\n * @param  shouldCacheUpdate - the validate function for comparing 2 argument, return true when 2 args are equal\n * @returns callback function includes a series calls of memoizedFn, and each call will get cache result if args are the same(according to shouldCacheUpdate fn)\n * @example\n * ```ts\n * const items = [{id:1, value:3}];\n * const heavyFn = (_key, value) => { // key is not used in the function, but it is a cache id\n *   // assume this is a heavy caculation\n *   return value+1;\n * }\n *\n * const memoizeHeavyFnAll = memoizeFnAll(heavyFn);\n * const generateValueArray = (memoizedHeavyFn) => (\n *   items.map(item => {\n *     memoizedHeavyFn(item.id, item.value);\n *   })\n * );\n *\n * const result = memoizeHeavyFnAll(generateValueArray); // Cache: {}, nextCache: {1: 4 *new}, heavyFn call times: 1\n *\n * // Argument changed\n * items[0].value = 2\n * const result0 = memoizeHeavyFnAll(generateValueArray); // Cache: {1: 4}, nextCache: {1: 3 *new}, heavyFn call times: 1\n *\n * // Cache added\n * items.push({id:3, value:4});\n * const result1 = memoizeHeavyFnAll(generateValueArray); // Cache: {1: 3 *hit}, nextCache: {1: 3, 3: 5 *new}, heavyFn call times: 1\n *\n * // Cache removed\n * delete items[0];\n * const result2 = memoizeHeavyFnAll(generateValueArray); // Cache: {1: 3, 3: 5 *hit}, nextCache: {3: 5}, heavyFn call times: 0\n * ```\n *\n * @public\n */\nexport const memoizeFnAll = <KeyT, ArgsT extends unknown[], FnRetT, CallBackT extends CallbackType<KeyT, ArgsT, FnRetT>>(fnToMemoize: FunctionWithKey<KeyT, ArgsT, FnRetT>, shouldCacheUpdate: (args1: unknown, args2: unknown) => boolean = Object.is): ((callback: CallBackT) => FnRetT[]) => {\n  let cache = new Map<KeyT, [ArgsT, FnRetT]>();\n  let nextCache = new Map<KeyT, [ArgsT, FnRetT]>();\n  return (callback: CallbackType<KeyT, ArgsT, FnRetT>): FnRetT[] => {\n    const memoizedFn: FunctionWithKey<KeyT, ArgsT, FnRetT> = (key: KeyT, ...args: ArgsT): FnRetT => {\n      const value = cache.get(key);\n      if (value) {\n        const [preArgs, ret] = value;\n        if (argsCmp(preArgs, args, shouldCacheUpdate)) {\n          nextCache.set(key, [args, ret]);\n          return ret;\n        }\n      }\n      const ret = fnToMemoize(key, ...args);\n      nextCache.set(key, [args, ret]);\n      return ret;\n    };\n    const retValue = callback(memoizedFn);\n    cache = nextCache;\n    nextCache = new Map<KeyT, [ArgsT, FnRetT]>();\n    return retValue;\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CommunicationIdentifier, createIdentifierFromRawId, getIdentifierRawId, isCommunicationUserIdentifier, isMicrosoftTeamsUserIdentifier, isPhoneNumberIdentifier, isUnknownIdentifier } from '@azure/communication-common';\n\n/**\n * A string representation of a {@link @azure/communication-common#CommunicationIdentifier}.\n *\n * This string representation of CommunicationIdentifier is guaranteed to be stable for\n * a unique Communication user. Thus,\n * - it can be used to persist a user's identity in external databases.\n * - it can be used as keys into a Map to store data for the user.\n *\n * @public\n */\nexport const toFlatCommunicationIdentifier = (identifier: CommunicationIdentifier): string => {\n  return getIdentifierRawId(identifier);\n};\n\n/**\n * Reverse operation of {@link toFlatCommunicationIdentifier}.\n *\n * @public\n */\nexport const fromFlatCommunicationIdentifier = (id: string): CommunicationIdentifier => {\n  // if the id passed is a phone number we need to build the rawId to pass in\n  const rawId = id.indexOf('+') === 0 ? '4:' + id : id;\n  return createIdentifierFromRawId(rawId);\n};\n\n/**\n * Returns a CommunicationIdentifier.\n * @internal\n */\nexport const _toCommunicationIdentifier = (id: string | CommunicationIdentifier): CommunicationIdentifier => {\n  if (typeof id === 'string') {\n    return fromFlatCommunicationIdentifier(id);\n  }\n  return id;\n};\n\n/**\n * Check if an object is identifier.\n *\n * @internal\n */\nexport const _isValidIdentifier = (identifier: CommunicationIdentifier): boolean => {\n  return isCommunicationUserIdentifier(identifier) || isPhoneNumberIdentifier(identifier) || isMicrosoftTeamsUserIdentifier(identifier) || isUnknownIdentifier(identifier);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n// GENERATED FILE. DO NOT EDIT MANUALLY.\n\nmodule.exports = '1.14.0';\n","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport telemetryVersion from './telemetryVersion';\n\n/**\n * @private\n */\n// Removes long suffixes that don't fit the constraints for telemetry application ID.\n// e.g., the build suffix is dropped for alpha package versions.\nexport const sanitize = (version: string): string => {\n  const alphaIndex = version.search(/alpha/);\n  if (alphaIndex >= 0) {\n    return version.substring(0, alphaIndex + 5);\n  }\n  return version;\n};\n\n/**\n * Indicates the type of implementation for the UILibrary.\n *\n * @internal\n */\nexport type _TelemetryImplementationHint = 'Call' | 'Chat' | 'CallWithChat' | 'StatefulComponents';\n\n/**\n * Takes a telemetry implementation hint and returns the numerical value.\n *\n * @private\n */\nconst getTelemetryImplementationHint = (telemetryImplementationHint: _TelemetryImplementationHint): number => {\n  switch (telemetryImplementationHint) {\n    case 'Call':\n      return 1;\n    case 'Chat':\n      return 2;\n    case 'CallWithChat':\n      return 3;\n    case 'StatefulComponents':\n      return 4;\n    default:\n      return 0;\n  }\n};\n\n/**\n * Application ID to be included in telemetry data from the UI library.\n * Template: acXYYY/<version>\n * Where:\n * - X describes a platform, [r: web, i: iOS, a: Android]\n * - YYY describes what's running on this platform (optional, currently unused by this library):\n *    Y[0] is high-level artifact,\n *      [0: undefined, 1: AzureCommunicationLibrary, 2: ACS SampleApp]\n *    Y[1] is specific implementation,\n *      [0: undefined, 1: Call Composite, 2: Chat Composite, 3: CallWithChatComposite, 4: UI Components]\n *    Y[2] is reserved for implementation details,\n *      [0: undefined]\n *\n * @internal\n */\nexport const _getApplicationId = (telemetryImplementationHint: _TelemetryImplementationHint): string => {\n  // We assume AzureCommunicationLibrary, as we don't currently have any public API to inject otherwise.\n  // This is consistent with the native iOS and Android implementations of telemetry.\n  const highLevelArtifact = 1;\n  const specificImplementation = getTelemetryImplementationHint(telemetryImplementationHint);\n  const implementationDetails = 0;\n  const version = telemetryVersion;\n  return sanitize(`acr${highLevelArtifact}${specificImplementation}${implementationDetails}/${version}`);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @internal\n */\nexport interface _IObjectMap<T> {\n  [key: string]: T;\n}\n\n/**\n * @internal\n *\n * Replace the pattern \"\\{\\}\" in str with the values passed in as vars\n *\n * @example\n * ```ts\n *   _formatString(\"hello {name}. '{name}' is a rare name.\", {name: \"Foo\"});\n *   // returns \"hello Foo. 'Foo' is a rare name.\"\n * ```\n * @param str - The string to be formatted\n * @param variables - Variables to use to format the string\n * @returns a formatted string\n */\nexport const _formatString = (str: string, vars: _IObjectMap<string>): string => {\n  if (!str) {\n    return '';\n  }\n  if (!vars) {\n    return str;\n  }\n\n  // regex to search for the pattern \"\\{\\}\"\n  const placeholdersRegex = /{(\\w+)}/g;\n  return str.replace(placeholdersRegex, (_: string, k: string) => vars[k] || `{${k}}`);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * Wrap JSON.stringify in a try-catch as JSON.stringify throws an exception if it fails.\n *\n * Use this only in areas where the JSON.stringify is non-critical and OK for the JSON.stringify to fail, such as logging.\n *\n * @internal\n */\nexport const _safeJSONStringify = (value: unknown, replacer: ((this: unknown, key: string, value: unknown) => unknown) | undefined = createSafeReplacer(), space?: string | number | undefined): string | undefined => {\n  try {\n    return JSON.stringify(value, replacer, space);\n  } catch (e) {\n    console.error(e);\n    return undefined;\n  }\n};\n\n// Log all visited refs to avoid circular ref\nconst createSafeReplacer = (): (<T>(key: string, value: T) => T | string) => {\n  const visited = new Set();\n  return function replacer<T>(key: string, value: T): T | string {\n    if (typeof value !== 'object') {\n      return value;\n    }\n    if (visited.has(value)) {\n      return 'Visited-Ref';\n    } else {\n      visited.add(value);\n      return value;\n    }\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @internal\n * Converts units of rem to units of pixels\n * @param rem - units of rem\n * @returns units of pixels\n */\nexport const _convertRemToPx = (rem: number): number => {\n  return rem * parseFloat(getComputedStyle(document.documentElement).fontSize);\n};\n\n/**\n * @internal\n * Converts units of pixels to units of rem\n * @param px - units of px\n * @returns units of rem\n */\nexport const _convertPxToRem = (px: number): number => {\n  return px / parseFloat(getComputedStyle(document.documentElement).fontSize);\n};\n\n/**\n * @internal\n * Disable dismiss on resize to work around a couple Fluent UI bugs\n * - The Callout is dismissed whenever *any child of window (inclusive)* is resized. In practice, this\n * happens when we change the VideoGallery layout, or even when the video stream element is internally resized\n * by the headless SDK.\n * - We also want to prevent dismiss when chat pane is scrolling especially a new message is added.\n * A side effect of this workaround is that the context menu stays open when window is resized, and may\n * get detached from original target visually. That bug is preferable to the bug when this value is not set -\n * The Callout (frequently) gets dismissed automatically.\n */\nexport const _preventDismissOnEvent = (ev: Event | React.FocusEvent | React.KeyboardEvent | React.MouseEvent): boolean => {\n  return ev.type === 'resize' || ev.type === 'scroll';\n};\n\n/**\n * @internal\n * Helper function to get the keys of an object\n */\nexport function _getKeys<T extends object>(obj: T): (keyof T)[] {\n  return (Object.keys(obj) as Array<keyof T>);\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @internal\n * Converts px value to rem value.\n * For example, an input of `16` will return `1rem`.\n */\nexport const _pxToRem = (px: number): string => `${px / 16}rem`;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { AzureLogger, AzureLogLevel } from '@azure/logger';\nimport { _safeJSONStringify } from './safeStringify';\n\n/**\n * @internal\n */\nexport type TelemetryEvent = {\n  name: string;\n  message: string;\n  level: AzureLogLevel;\n  data?: Record<string, unknown>;\n};\n\n/**\n * @internal\n * This is a log function to log structural data for easier parse in telemetry\n */\nexport const _logEvent = (logger: AzureLogger, event: TelemetryEvent): void => {\n  logger[event.level](_safeJSONStringify(event));\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { DominantSpeakersInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport { ParticipantCapabilities } from '@azure/communication-calling';\nimport { ParticipantRole } from '@azure/communication-calling';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { CallClientState, DeviceManagerState, RemoteParticipantState, LocalVideoStreamState, CallErrors, DiagnosticsCallFeatureState } from '@internal/calling-stateful-client';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsInfo } from '@internal/calling-stateful-client';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHandState } from '@internal/calling-stateful-client';\nimport { _SupportedCaptionLanguage, _SupportedSpokenLanguage } from '@internal/react-components';\n\n/**\n * Common props used to reference calling declarative client state.\n *\n * @public\n */\nexport type CallingBaseSelectorProps = {\n  callId: string;\n};\n\n/**\n * @private\n */\nexport const getDeviceManager = (state: CallClientState): DeviceManagerState => state.deviceManager;\n\n/**\n * @private\n */\nexport const getRole = (state: CallClientState, props: CallingBaseSelectorProps): ParticipantRole | undefined => {\n  /* @conditional-compile-remove(rooms) */\n  return state.calls[props.callId]?.role;\n  return 'Unknown';\n};\n\n/**\n * @private\n */\nexport const isHideAttendeeNamesEnabled = (state: CallClientState, props: CallingBaseSelectorProps): boolean => {\n  return false;\n};\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * @private\n */\nexport const getCapabilities = (state: CallClientState, props: CallingBaseSelectorProps): ParticipantCapabilities | undefined => state.calls[props.callId]?.capabilitiesFeature?.capabilities;\n\n/**\n * @private\n */\nexport const getCallExists = (state: CallClientState, props: CallingBaseSelectorProps): boolean => !!state.calls[props.callId];\n\n/**\n * @private\n */\nexport const getDominantSpeakers = (state: CallClientState, props: CallingBaseSelectorProps): undefined | DominantSpeakersInfo => state.calls[props.callId]?.dominantSpeakers;\n\n/**\n * @private\n */\nexport const getRemoteParticipants = (state: CallClientState, props: CallingBaseSelectorProps): {\n  [keys: string]: RemoteParticipantState;\n} | undefined => {\n  return state.calls[props.callId]?.remoteParticipants;\n};\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * @private\n */\nexport const getLocalParticipantRaisedHand = (state: CallClientState, props: CallingBaseSelectorProps): RaisedHandState | undefined => {\n  return state.calls[props.callId]?.raiseHand?.localParticipantRaisedHand;\n};\n/**\n * @private\n */\nexport const getIsScreenSharingOn = (state: CallClientState, props: CallingBaseSelectorProps): boolean | undefined => state.calls[props.callId]?.isScreenSharingOn;\n\n/**\n * @private\n */\nexport const getIsMuted = (state: CallClientState, props: CallingBaseSelectorProps): boolean | undefined => state.calls[props.callId]?.isMuted;\n\n/* @conditional-compile-remove(optimal-video-count) */\n/**\n * @private\n */\nexport const getOptimalVideoCount = (state: CallClientState, props: CallingBaseSelectorProps): number | undefined => state.calls[props.callId]?.optimalVideoCount.maxRemoteVideoStreams;\n\n/**\n * @private\n */\nexport const getLocalVideoStreams = (state: CallClientState, props: CallingBaseSelectorProps): LocalVideoStreamState[] | undefined => state.calls[props.callId]?.localVideoStreams;\n\n/**\n * @private\n */\nexport const getScreenShareRemoteParticipant = (state: CallClientState, props: CallingBaseSelectorProps): string | undefined => state.calls[props.callId]?.screenShareRemoteParticipant;\n\n/**\n * @private\n */\nexport const getDisplayName = (state: CallClientState): string | undefined => state.callAgent?.displayName;\n\n/**\n * @private\n */\nexport const getIdentifier = (state: CallClientState): string => toFlatCommunicationIdentifier(state.userId);\n\n/**\n * @private\n */\nexport const getLatestErrors = (state: CallClientState): CallErrors => state.latestErrors;\n\n/**\n * @private\n */\nexport const getDiagnostics = (state: CallClientState, props: CallingBaseSelectorProps): DiagnosticsCallFeatureState | undefined => state.calls[props.callId]?.diagnostics;\n\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(raise-hand) */\n/**\n * @private\n */\nexport const getCallState = (state: CallClientState, props: CallingBaseSelectorProps): string => state.calls[props.callId]?.state;\n\n/**\n * @private\n */\nexport const getEnvironmentInfo = (state: CallClientState): undefined => {\n  return undefined;\n};\n\n/** @private */\nexport const getParticipantCount = (state: CallClientState, props: CallingBaseSelectorProps): number | undefined => {\n  return undefined;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getCaptions = (state: CallClientState, props: CallingBaseSelectorProps): CaptionsInfo[] | undefined => {\n  return state.calls[props.callId]?.captionsFeature.captions;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getCaptionsStatus = (state: CallClientState, props: CallingBaseSelectorProps): boolean | undefined => {\n  return state.calls[props.callId]?.captionsFeature.isCaptionsFeatureActive;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getStartCaptionsInProgress = (state: CallClientState, props: CallingBaseSelectorProps): boolean | undefined => {\n  return state.calls[props.callId]?.captionsFeature.startCaptionsInProgress;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getCurrentCaptionLanguage = (state: CallClientState, props: CallingBaseSelectorProps): _SupportedCaptionLanguage | undefined => {\n  return (state.calls[props.callId]?.captionsFeature.currentCaptionLanguage as _SupportedCaptionLanguage);\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getCurrentSpokenLanguage = (state: CallClientState, props: CallingBaseSelectorProps): _SupportedSpokenLanguage | undefined => {\n  return (state.calls[props.callId]?.captionsFeature.currentSpokenLanguage as _SupportedSpokenLanguage);\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getSupportedCaptionLanguages = (state: CallClientState, props: CallingBaseSelectorProps): _SupportedCaptionLanguage[] | undefined => {\n  return (state.calls[props.callId]?.captionsFeature.supportedCaptionLanguages as _SupportedCaptionLanguage[]);\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getSupportedSpokenLanguages = (state: CallClientState, props: CallingBaseSelectorProps): _SupportedSpokenLanguage[] | undefined => {\n  return (state.calls[props.callId]?.captionsFeature.supportedSpokenLanguages as _SupportedSpokenLanguage[]);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { DeviceManagerState, RemoteParticipantState, StatefulCallClient } from '@internal/calling-stateful-client';\nimport { CallState as CallStatus, ParticipantRole } from '@azure/communication-calling';\nimport { CommunicationIdentifier, CommunicationUserIdentifier, isCommunicationUserIdentifier, isMicrosoftTeamsUserIdentifier, isPhoneNumberIdentifier, MicrosoftTeamsUserIdentifier, PhoneNumberIdentifier, UnknownIdentifier } from '@azure/communication-common';\nimport { memoizeFnAll, toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\ntype ParticipantConnectionState = 'Idle' | 'Connecting' | 'Ringing' | 'Connected' | 'Hold' | 'InLobby' | 'EarlyMedia' | 'Disconnected';\n\n/**\n * Check if the call state represents being in the call\n *\n * @internal\n */\nexport const _isInCall = (callStatus?: CallStatus): boolean => !!callStatus && !['None', 'Disconnected', 'Connecting', 'Ringing', 'EarlyMedia', 'Disconnecting'].includes(callStatus);\n\n/**\n * Check if the call state represents being in the lobby or waiting to be admitted.\n *\n * @internal\n */\nexport const _isInLobbyOrConnecting = (callStatus: CallStatus | undefined): boolean => !!callStatus && ['Connecting', 'Ringing', 'InLobby', 'EarlyMedia'].includes(callStatus);\n\n/**\n * Check if the device manager local video is on when not part of a call\n * i.e. do unparented views exist.\n *\n * @internal\n */\nexport const _isPreviewOn = (deviceManager: DeviceManagerState): boolean => {\n  // TODO: we should take in a LocalVideoStream that developer wants to use as their 'Preview' view. We should also\n  // handle cases where 'Preview' view is in progress and not necessary completed.\n  return deviceManager.unparentedViews.length > 0 && deviceManager.unparentedViews[0].view !== undefined;\n};\n\n/**\n * Dispose of all preview views\n * We assume all unparented views are local preview views.\n *\n * @private\n */\nexport const disposeAllLocalPreviewViews = async (callClient: StatefulCallClient): Promise<void> => {\n  const unparentedViews = callClient.getState().deviceManager.unparentedViews;\n  for (const view of unparentedViews) {\n    await callClient.disposeView(undefined, undefined, view);\n  }\n};\n\n/**\n * Update the users displayNames based on the type of user they are\n *\n * @internal\n */\nexport const _updateUserDisplayNames = (participants: RemoteParticipantState[]): RemoteParticipantState[] => {\n  if (participants) {\n    return memoizedUpdateDisplayName(memoizedFn => {\n      return Object.values(participants).map(p => {\n        const pid = toFlatCommunicationIdentifier(p.identifier);\n        return memoizedFn(pid, p);\n      });\n    });\n  } else {\n    return [];\n  }\n};\nconst memoizedUpdateDisplayName = memoizeFnAll((participantId: string, participant: RemoteParticipantState) => {\n  if (isPhoneNumberIdentifier(participant.identifier)) {\n    return {\n      ...participant,\n      displayName: participant.identifier.phoneNumber\n    };\n  } else {\n    return participant;\n  }\n});\n/**\n * @private\n * A type guard to ensure all participants are acceptable type for Teams call\n */\nexport const isTeamsCallParticipants = (participants: CommunicationIdentifier[]): participants is (PhoneNumberIdentifier | MicrosoftTeamsUserIdentifier | UnknownIdentifier)[] => {\n  return participants.every(p => !isCommunicationUserIdentifier(p));\n};\n\n/**\n * @private\n * A type guard to ensure all participants are acceptable type for ACS call\n */\nexport const isACSCallParticipants = (participants: CommunicationIdentifier[]): participants is (PhoneNumberIdentifier | CommunicationUserIdentifier | UnknownIdentifier)[] => {\n  return participants.every(p => !isMicrosoftTeamsUserIdentifier(p));\n};\n\n/**\n * @private\n * Checks whether the user is a 'Ringing' PSTN user.\n */\nexport const _isRingingPSTNParticipant = (participant: RemoteParticipantState): ParticipantConnectionState => {\n  return isPhoneNumberIdentifier(participant.identifier) && participant.state === 'Connecting' ? 'Ringing' : participant.state;\n};\n\n/**\n * @private\n * Changes the display name of the participant based on the local and remote user's role.\n */\nexport const maskDisplayNameWithRole = (displayName: string | undefined, localUserRole?: ParticipantRole, participantRole?: ParticipantRole, isHideAttendeeNamesEnabled?: boolean): string | undefined => {\n  let maskedDisplayName = displayName;\n  if (isHideAttendeeNamesEnabled && participantRole && participantRole === 'Attendee') {\n    if (localUserRole && localUserRole === 'Attendee') {\n      maskedDisplayName = '{AttendeeRole}';\n    }\n    if (localUserRole && (localUserRole === 'Presenter' || localUserRole === 'Co-organizer' || localUserRole === 'Organizer')) {\n      maskedDisplayName = `{AttendeeRole}(${displayName})`;\n    }\n  }\n  return maskedDisplayName;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { AudioDeviceInfo, VideoDeviceInfo } from '@azure/communication-calling';\nimport { CallClientState } from '@internal/calling-stateful-client';\nimport * as reselect from 'reselect';\nimport { CallingBaseSelectorProps, getCallExists, getDeviceManager, getIsMuted, getIsScreenSharingOn, getLocalVideoStreams } from './baseSelectors';\n/* @conditional-compile-remove(capabilities) */\nimport { getCapabilities, getRole } from './baseSelectors';\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(raise-hand) */\nimport { getCallState } from './baseSelectors';\nimport { _isPreviewOn } from './utils/callUtils';\n/* @conditional-compile-remove(raise-hand) */\nimport { getLocalParticipantRaisedHand } from './baseSelectors';\n/**\n * Selector type for {@link MicrophoneButton} component.\n *\n * @public\n */\nexport type MicrophoneButtonSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  disabled: boolean;\n  checked: boolean;\n  microphones: AudioDeviceInfo[];\n  speakers: AudioDeviceInfo[];\n  selectedMicrophone?: AudioDeviceInfo;\n  selectedSpeaker?: AudioDeviceInfo;\n};\n\n/**\n * Selector for {@link MicrophoneButton} component.\n *\n * @public\n */\nexport const microphoneButtonSelector: MicrophoneButtonSelector = reselect.createSelector([getCallExists, getIsMuted, getDeviceManager, /* @conditional-compile-remove(capabilities) */getCapabilities, /* @conditional-compile-remove(capabilities) */getRole], (callExists, isMuted, deviceManager, /* @conditional-compile-remove(capabilities) */capabilities, /* @conditional-compile-remove(capabilities) */role) => {\n  const permission = deviceManager.deviceAccess ? deviceManager.deviceAccess.audio : true;\n  /* @conditional-compile-remove(capabilities) */\n  const incapable = capabilities?.unmuteMic.isPresent === false && capabilities?.unmuteMic.reason !== 'NotInitialized' || role === 'Consumer';\n  return {\n    disabled: !callExists || !permission || /* @conditional-compile-remove(capabilities) */incapable,\n    checked: callExists ? !isMuted : false,\n    microphones: deviceManager.microphones,\n    speakers: deviceManager.speakers,\n    selectedMicrophone: deviceManager.selectedMicrophone,\n    selectedSpeaker: deviceManager.selectedSpeaker\n  };\n});\n\n/**\n * Selector type for {@link CameraButton} component.\n *\n * @public\n */\nexport type CameraButtonSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  disabled: boolean;\n  checked: boolean;\n  cameras: VideoDeviceInfo[];\n  selectedCamera?: VideoDeviceInfo;\n};\n\n/**\n * Selector for {@link CameraButton} component.\n *\n * @public\n */\nexport const cameraButtonSelector: CameraButtonSelector = reselect.createSelector([getLocalVideoStreams, getDeviceManager, /* @conditional-compile-remove(capabilities) */getCapabilities, /* @conditional-compile-remove(capabilities) */getRole], (localVideoStreams, deviceManager, /* @conditional-compile-remove(capabilities) */capabilities, /* @conditional-compile-remove(capabilities) */role) => {\n  const previewOn = _isPreviewOn(deviceManager);\n  const localVideoFromCall = localVideoStreams?.find(stream => stream.mediaStreamType === 'Video');\n  const permission = deviceManager.deviceAccess ? deviceManager.deviceAccess.video : true;\n  /* @conditional-compile-remove(capabilities) */\n  const incapable = capabilities?.turnVideoOn.isPresent === false && capabilities?.turnVideoOn.reason !== 'NotInitialized' || role === 'Consumer';\n  return {\n    disabled: !deviceManager.selectedCamera || !permission || !deviceManager.cameras.length || /* @conditional-compile-remove(capabilities) */incapable,\n    checked: localVideoStreams !== undefined && localVideoStreams.length > 0 ? !!localVideoFromCall : previewOn,\n    cameras: deviceManager.cameras,\n    selectedCamera: deviceManager.selectedCamera\n  };\n});\n\n/**\n * Selector type for {@link ScreenShareButton} component.\n *\n * @public\n */\nexport type ScreenShareButtonSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  checked?: boolean;\n  /* @conditional-compile-remove(capabilities) */ /* @conditional-compile-remove(PSTN-calls) */\n  disabled?: boolean;\n};\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * Selector type for {@link RaiseHandButton} component.\n *\n * @public\n */\nexport type RaiseHandButtonSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  checked?: boolean;\n  disabled?: boolean;\n};\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * Selector for {@link RaiseHandButton} component.\n *\n * @public\n */\nexport const raiseHandButtonSelector: RaiseHandButtonSelector = reselect.createSelector([getLocalParticipantRaisedHand, getCallState], (raisedHand, callState) => {\n  return {\n    checked: raisedHand ? true : false,\n    disabled: callState === 'InLobby' ? true : callState === 'Connecting' ?? false\n  };\n});\n/**\n * Selector for {@link ScreenShareButton} component.\n *\n * @public\n */\nexport const screenShareButtonSelector: ScreenShareButtonSelector = reselect.createSelector([getIsScreenSharingOn, /* @conditional-compile-remove(capabilities) */getCapabilities, /* @conditional-compile-remove(capabilities) */getRole], (isScreenSharingOn, /* @conditional-compile-remove(capabilities) */capabilities, /* @conditional-compile-remove(capabilities) */role) => {\n  let disabled: boolean | undefined = undefined;\n  /* @conditional-compile-remove(capabilities) */\n  disabled = disabled || capabilities?.shareScreen.isPresent === false && capabilities?.shareScreen.reason !== 'NotInitialized' || role === 'Consumer' || role === 'Attendee';\n  return {\n    checked: isScreenSharingOn,\n    disabled\n  };\n});\n\n/**\n * Selector type for {@link DevicesButton} component.\n *\n * @public\n */\nexport type DevicesButtonSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  microphones: AudioDeviceInfo[];\n  speakers: AudioDeviceInfo[];\n  cameras: VideoDeviceInfo[];\n  selectedMicrophone?: AudioDeviceInfo;\n  selectedSpeaker?: AudioDeviceInfo;\n  selectedCamera?: VideoDeviceInfo;\n};\n\n/**\n * Selector for {@link DevicesButton} component.\n *\n * @public\n */\nexport const devicesButtonSelector: DevicesButtonSelector = reselect.createSelector([getDeviceManager], deviceManager => {\n  return {\n    microphones: removeBlankNameDevices(deviceManager.microphones),\n    speakers: removeBlankNameDevices(deviceManager.speakers),\n    cameras: removeBlankNameDevices(deviceManager.cameras),\n    selectedMicrophone: deviceManager.selectedMicrophone,\n    selectedSpeaker: deviceManager.selectedSpeaker,\n    selectedCamera: deviceManager.selectedCamera\n  };\n});\nfunction removeBlankNameDevices<T extends {\n  name: string;\n}>(devices: T[]): T[] {\n  return devices.filter(device => device.name !== '');\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { AudioDeviceInfo, Call, LocalVideoStream, StartCallOptions, VideoDeviceInfo, BackgroundBlurEffect, BackgroundReplacementEffect, BackgroundBlurConfig, BackgroundReplacementConfig } from '@azure/communication-calling';\n/* @conditional-compile-remove(dialpad) */\nimport { DtmfTone } from '@azure/communication-calling';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { CreateViewResult, StatefulCallClient, StatefulDeviceManager } from '@internal/calling-stateful-client';\nimport memoizeOne from 'memoize-one';\nimport { CreateVideoStreamViewResult, VideoStreamOptions } from '@internal/react-components';\nimport { disposeAllLocalPreviewViews, _isInCall, _isInLobbyOrConnecting, _isPreviewOn } from '../utils/callUtils';\nimport { CommunicationIdentifier } from '@azure/communication-common';\n/* @conditional-compile-remove(video-background-effects) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */ /* @conditional-compile-remove(end-of-call-survey) */\nimport { Features } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { TeamsCaptions } from '@azure/communication-calling';\n/**\n * Object containing all the handlers required for calling components.\n *\n * Calling related components from this package are able to pick out relevant handlers from this object.\n * See {@link useHandlers} and {@link usePropsFor}.\n *\n * @public\n */\nexport interface CommonCallingHandlers {\n  onStartLocalVideo: () => Promise<void>;\n  onToggleCamera: (options?: VideoStreamOptions) => Promise<void>;\n  onSelectMicrophone: (device: AudioDeviceInfo) => Promise<void>;\n  onSelectSpeaker: (device: AudioDeviceInfo) => Promise<void>;\n  onSelectCamera: (device: VideoDeviceInfo, options?: VideoStreamOptions) => Promise<void>;\n  onToggleMicrophone: () => Promise<void>;\n  onStartScreenShare: () => Promise<void>;\n  onStopScreenShare: () => Promise<void>;\n  onToggleScreenShare: () => Promise<void>;\n  onHangUp: (forEveryone?: boolean) => Promise<void>;\n  /* @conditional-compile-remove(raise-hand) */\n  onRaiseHand: () => Promise<void>;\n  /* @conditional-compile-remove(raise-hand) */\n  onLowerHand: () => Promise<void>;\n  /* @conditional-compile-remove(raise-hand) */\n  onToggleRaiseHand: () => Promise<void>;\n  onCreateLocalStreamView: (options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  onCreateRemoteStreamView: (userId: string, options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  /**\n   * @deprecated use {@link onDisposeRemoteVideoStreamView} and {@link onDisposeRemoteScreenShareStreamView} instead.\n   */\n  onDisposeRemoteStreamView: (userId: string) => Promise<void>;\n  onDisposeLocalStreamView: () => Promise<void>;\n  onDisposeRemoteVideoStreamView: (userId: string) => Promise<void>;\n  onDisposeRemoteScreenShareStreamView: (userId: string) => Promise<void>;\n  /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\n  onSendDtmfTone: (dtmfTone: DtmfTone) => Promise<void>;\n  onRemoveParticipant(userId: string): Promise<void>;\n  onStartCall: (participants: CommunicationIdentifier[], options?: StartCallOptions) => void;\n  /* @conditional-compile-remove(video-background-effects) */\n  onRemoveVideoBackgroundEffects: () => Promise<void>;\n  /* @conditional-compile-remove(video-background-effects) */\n  onBlurVideoBackground: (backgroundBlurConfig?: BackgroundBlurConfig) => Promise<void>;\n  /* @conditional-compile-remove(video-background-effects) */\n  onReplaceVideoBackground: (backgroundReplacementConfig: BackgroundReplacementConfig) => Promise<void>;\n  /* @conditional-compile-remove(close-captions) */\n  onStartCaptions: (options?: CaptionsOptions) => Promise<void>;\n  /* @conditional-compile-remove(close-captions) */\n  onStopCaptions: () => Promise<void>;\n  /* @conditional-compile-remove(close-captions) */\n  onSetSpokenLanguage: (language: string) => Promise<void>;\n  /* @conditional-compile-remove(close-captions) */\n  onSetCaptionLanguage: (language: string) => Promise<void>;\n}\n\n/**\n * options bag to start captions\n *\n * @public\n */\nexport type CaptionsOptions = {\n  spokenLanguage: string;\n};\n\n/**\n * @private\n */\nexport const areStreamsEqual = (prevStream: LocalVideoStream, newStream: LocalVideoStream): boolean => {\n  return !!prevStream && !!newStream && prevStream.source.id === newStream.source.id;\n};\n\n/**\n * Dependency type to be injected for video background effects\n *\n * @public\n */\nexport type VideoBackgroundEffectsDependency = {\n  createBackgroundBlurEffect: (config?: BackgroundBlurConfig) => BackgroundBlurEffect;\n  createBackgroundReplacementEffect: (config: BackgroundReplacementConfig) => BackgroundReplacementEffect;\n};\n\n/**\n * Create the common implementation of {@link CallingHandlers} for all types of Call\n *\n * @private\n */\nexport const createDefaultCommonCallingHandlers = memoizeOne((callClient: StatefulCallClient, deviceManager: StatefulDeviceManager | undefined, call: Call | undefined, options?: {\n  onResolveVideoBackgroundEffectsDependency?: () => Promise<VideoBackgroundEffectsDependency>;\n}): CommonCallingHandlers => {\n  const onStartLocalVideo = async (): Promise<void> => {\n    // Before the call object creates a stream, dispose of any local preview streams.\n    // @TODO: is there any way to parent the unparented view to the call object instead\n    // of disposing and creating a new stream?\n    await disposeAllLocalPreviewViews(callClient);\n    const callId = call?.id;\n    let videoDeviceInfo = callClient.getState().deviceManager.selectedCamera;\n    if (!videoDeviceInfo) {\n      const cameras = await deviceManager?.getCameras();\n      videoDeviceInfo = cameras && cameras.length > 0 ? cameras[0] : undefined;\n      videoDeviceInfo && deviceManager?.selectCamera(videoDeviceInfo);\n    }\n    if (!callId || !videoDeviceInfo) {\n      return;\n    }\n    const stream = new LocalVideoStream(videoDeviceInfo);\n    if (call && !call.localVideoStreams.find(s => areStreamsEqual(s, stream))) {\n      await call.startVideo(stream);\n    }\n  };\n  const onStopLocalVideo = async (stream: LocalVideoStream): Promise<void> => {\n    const callId = call?.id;\n    if (!callId) {\n      return;\n    }\n    if (call && call.localVideoStreams.find(s => areStreamsEqual(s, stream))) {\n      await call.stopVideo(stream);\n    }\n  };\n  const onToggleCamera = async (options?: VideoStreamOptions): Promise<void> => {\n    const previewOn = _isPreviewOn(callClient.getState().deviceManager);\n\n    // the disposal of the unparented views is to workaround: https://skype.visualstudio.com/SPOOL/_workitems/edit/3030558.\n    // The root cause of the issue is caused by never transitioning the unparented view to the\n    // call object when going from configuration page (disconnected call state) to connecting.\n    //\n    // Currently the only time the local video stream is moved from unparented view to the call\n    // object is when we transition from connecting -> call state. If the camera was on,\n    // inside the MediaGallery we trigger toggleCamera. This triggers onStartLocalVideo which\n    // destroys the unparentedView and creates a new stream in the call - so all looks well.\n    //\n    // However, if someone turns off their camera during the lobbyOrConnecting screen, the\n    // call.localVideoStreams will be empty (as the stream is currently stored in the unparented\n    // views and was never transitioned to the call object) and thus we incorrectly try to create\n    // a new video stream for the call object, instead of only stopping the unparented view.\n    //\n    // The correct fix for this is to ensure that callAgent.onStartCall is called with the\n    // localvideostream as a videoOption. That will mean call.onLocalVideoStreamsUpdated will\n    // be triggered when the call is in connecting state, which we can then transition the\n    // local video stream to the stateful call client and get into a clean state.\n\n    if (call && (_isInCall(call.state) || _isInLobbyOrConnecting(call.state))) {\n      const stream = call.localVideoStreams.find(stream => stream.mediaStreamType === 'Video');\n      const unparentedViews = callClient.getState().deviceManager.unparentedViews;\n      if (stream || unparentedViews.length > 0) {\n        unparentedViews && (await unparentedViews.forEach(view => view.mediaStreamType === 'Video' && callClient.disposeView(undefined, undefined, view)));\n        stream && (await onStopLocalVideo(stream));\n      } else {\n        await onStartLocalVideo();\n      }\n    } else {\n      /**\n       * This will create a unparented view to be used on the configuration page and the connecting screen\n       *\n       * If the device that the stream will come from is not on from permissions checks, then it will take time\n       * to create the stream since device is off. If we are turn the camera on immedietly on the configuration page we see it is\n       * fast but that is because the device is already primed to return a stream.\n       *\n       * On the connecting page the device has already turned off and the connecting window is so small we do not see the resulting\n       * unparented view from the code below.\n       */\n      const selectedCamera = callClient.getState().deviceManager.selectedCamera;\n      if (selectedCamera) {\n        if (previewOn) {\n          await onDisposeLocalStreamView();\n        } else {\n          await callClient.createView(undefined, undefined, {\n            source: selectedCamera,\n            mediaStreamType: 'Video'\n          }, options);\n        }\n      }\n    }\n  };\n  const onSelectMicrophone = async (device: AudioDeviceInfo): Promise<void> => {\n    if (!deviceManager) {\n      return;\n    }\n    return deviceManager.selectMicrophone(device);\n  };\n  const onSelectSpeaker = async (device: AudioDeviceInfo): Promise<void> => {\n    if (!deviceManager) {\n      return;\n    }\n    return deviceManager.selectSpeaker(device);\n  };\n  const onSelectCamera = async (device: VideoDeviceInfo, options?: VideoStreamOptions): Promise<void> => {\n    if (!deviceManager) {\n      return;\n    }\n    if (call && _isInCall(call.state)) {\n      deviceManager.selectCamera(device);\n      const stream = call.localVideoStreams.find(stream => stream.mediaStreamType === 'Video');\n      await stream?.switchSource(device);\n\n      /// TODO: TEMPORARY SOLUTION\n      /// The Calling SDK needs to wait until the stream is ready before resolving the switchSource promise.\n      /// This is a temporary solution to wait for the stream to be ready before resolving the promise.\n      /// This allows the onSelectCamera to be throttled to prevent the streams from getting in to a frozen state\n      /// if the user switches cameras too rapidly.\n      /// This is to be removed once the Calling SDK has issued a fix.\n      await stream?.getMediaStream();\n    } else {\n      const previewOn = _isPreviewOn(callClient.getState().deviceManager);\n      if (!previewOn) {\n        deviceManager.selectCamera(device);\n        return;\n      }\n      await onDisposeLocalStreamView();\n      deviceManager.selectCamera(device);\n      await callClient.createView(undefined, undefined, {\n        source: device,\n        mediaStreamType: 'Video'\n      }, options);\n    }\n  };\n\n  /* @conditional-compile-remove(raise-hand) */\n  const onRaiseHand = async (): Promise<void> => await call?.feature(Features.RaiseHand)?.raiseHand();\n\n  /* @conditional-compile-remove(raise-hand) */\n  const onLowerHand = async (): Promise<void> => await call?.feature(Features.RaiseHand)?.lowerHand();\n\n  /* @conditional-compile-remove(raise-hand) */\n  const onToggleRaiseHand = async (): Promise<void> => {\n    const raiseHandFeature = call?.feature(Features.RaiseHand);\n    const localUserId = callClient.getState().userId;\n    const isLocalRaisedHand = raiseHandFeature?.getRaisedHands().find(publishedState => toFlatCommunicationIdentifier(publishedState.identifier) === toFlatCommunicationIdentifier(localUserId));\n    if (isLocalRaisedHand) {\n      await raiseHandFeature?.lowerHand();\n    } else {\n      await raiseHandFeature?.raiseHand();\n    }\n  };\n  const onToggleMicrophone = async (): Promise<void> => {\n    if (!call || !(_isInCall(call.state) || _isInLobbyOrConnecting(call.state))) {\n      throw new Error(`Please invoke onToggleMicrophone after call is started`);\n    }\n    return call.isMuted ? await call.unmute() : await call.mute();\n  };\n  const onStartScreenShare = async (): Promise<void> => await call?.startScreenSharing();\n  const onStopScreenShare = async (): Promise<void> => await call?.stopScreenSharing();\n  const onToggleScreenShare = async (): Promise<void> => call?.isScreenSharingOn ? await onStopScreenShare() : await onStartScreenShare();\n  const onHangUp = async (forEveryone?: boolean): Promise<void> => await call?.hangUp({\n    forEveryone: forEveryone === true ? true : false\n  });\n  const onCreateLocalStreamView = async (options = ({\n    scalingMode: 'Crop',\n    isMirrored: true\n  } as VideoStreamOptions)): Promise<void | CreateVideoStreamViewResult> => {\n    if (!call || call.localVideoStreams.length === 0) {\n      return;\n    }\n    const callState = callClient.getState().calls[call.id];\n    if (!callState) {\n      return;\n    }\n    const localStream = callState.localVideoStreams.find(item => item.mediaStreamType === 'Video');\n    if (!localStream) {\n      return;\n    }\n    const {\n      view\n    } = (await callClient.createView(call.id, undefined, localStream, options)) ?? {};\n    return view ? {\n      view\n    } : undefined;\n  };\n  const onCreateRemoteStreamView = async (userId: string, options = ({\n    scalingMode: 'Crop'\n  } as VideoStreamOptions)): Promise<void | CreateVideoStreamViewResult> => {\n    if (!call) {\n      return;\n    }\n    const callState = callClient.getState().calls[call.id];\n    if (!callState) {\n      throw new Error(`Call Not Found: ${call.id}`);\n    }\n    const participant = Object.values(callState.remoteParticipants).find(participant => toFlatCommunicationIdentifier(participant.identifier) === userId);\n    if (!participant || !participant.videoStreams) {\n      return;\n    }\n\n    // Find the first available stream, if there is none, then get the first stream\n    const remoteVideoStream = Object.values(participant.videoStreams).find(i => i.mediaStreamType === 'Video' && i.isAvailable) || Object.values(participant.videoStreams).find(i => i.mediaStreamType === 'Video');\n    const screenShareStream = Object.values(participant.videoStreams).find(i => i.mediaStreamType === 'ScreenSharing' && i.isAvailable) || Object.values(participant.videoStreams).find(i => i.mediaStreamType === 'ScreenSharing');\n    let createViewResult: CreateViewResult | undefined = undefined;\n    if (remoteVideoStream && remoteVideoStream.isAvailable && !remoteVideoStream.view) {\n      createViewResult = await callClient.createView(call.id, participant.identifier, remoteVideoStream, options);\n    }\n    if (screenShareStream && screenShareStream.isAvailable && !screenShareStream.view) {\n      // Hardcoded `scalingMode` since it is highly unlikely that CONTOSO would ever want to use a different scaling mode for screenshare.\n      // Using `Crop` would crop the contents of screenshare and `Stretch` would warp it.\n      // `Fit` is the only mode that maintains the integrity of the screen being shared.\n      createViewResult = await callClient.createView(call.id, participant.identifier, screenShareStream, {\n        scalingMode: 'Fit'\n      });\n    }\n    return createViewResult?.view ? {\n      view: createViewResult?.view\n    } : undefined;\n  };\n  const onDisposeRemoteStreamView = async (userId: string): Promise<void> => {\n    if (!call) {\n      return;\n    }\n    const callState = callClient.getState().calls[call.id];\n    if (!callState) {\n      throw new Error(`Call Not Found: ${call.id}`);\n    }\n    const participant = Object.values(callState.remoteParticipants).find(participant => toFlatCommunicationIdentifier(participant.identifier) === userId);\n    if (!participant || !participant.videoStreams) {\n      return;\n    }\n    const remoteVideoStream = Object.values(participant.videoStreams).find(i => i.mediaStreamType === 'Video');\n    const screenShareStream = Object.values(participant.videoStreams).find(i => i.mediaStreamType === 'ScreenSharing');\n    if (remoteVideoStream && remoteVideoStream.view) {\n      callClient.disposeView(call.id, participant.identifier, remoteVideoStream);\n    }\n    if (screenShareStream && screenShareStream.view) {\n      callClient.disposeView(call.id, participant.identifier, screenShareStream);\n    }\n  };\n  const onDisposeRemoteVideoStreamView = async (userId: string): Promise<void> => {\n    if (!call) {\n      return;\n    }\n    const callState = callClient.getState().calls[call.id];\n    if (!callState) {\n      throw new Error(`Call Not Found: ${call.id}`);\n    }\n    const participant = Object.values(callState.remoteParticipants).find(participant => toFlatCommunicationIdentifier(participant.identifier) === userId);\n    if (!participant || !participant.videoStreams) {\n      return;\n    }\n    const remoteVideoStream = Object.values(participant.videoStreams).find(i => i.mediaStreamType === 'Video');\n    if (remoteVideoStream && remoteVideoStream.view) {\n      callClient.disposeView(call.id, participant.identifier, remoteVideoStream);\n    }\n  };\n  const onDisposeRemoteScreenShareStreamView = async (userId: string): Promise<void> => {\n    if (!call) {\n      return;\n    }\n    const callState = callClient.getState().calls[call.id];\n    if (!callState) {\n      throw new Error(`Call Not Found: ${call.id}`);\n    }\n    const participant = Object.values(callState.remoteParticipants).find(participant => toFlatCommunicationIdentifier(participant.identifier) === userId);\n    if (!participant || !participant.videoStreams) {\n      return;\n    }\n    const screenShareStream = Object.values(participant.videoStreams).find(i => i.mediaStreamType === 'ScreenSharing');\n    if (screenShareStream && screenShareStream.view) {\n      callClient.disposeView(call.id, participant.identifier, screenShareStream);\n    }\n  };\n  const onDisposeLocalStreamView = async (): Promise<void> => {\n    // If the user is currently in a call, dispose of the local stream view attached to that call.\n    const callState = call && callClient.getState().calls[call.id];\n    const localStream = callState?.localVideoStreams.find(item => item.mediaStreamType === 'Video');\n    if (call && callState && localStream) {\n      callClient.disposeView(call.id, undefined, localStream);\n    }\n\n    // If the user is not in a call we currently assume any unparented view is a LocalPreview and stop all\n    // since those are only used for LocalPreview currently.\n    // TODO: we need to remember which LocalVideoStream was used for LocalPreview and dispose that one.\n    await disposeAllLocalPreviewViews(callClient);\n  };\n\n  /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\n  const onSendDtmfTone = async (dtmfTone: DtmfTone): Promise<void> => await call?.sendDtmf(dtmfTone);\n  const notImplemented = (): any => {\n    throw new Error('Not implemented, cannot call a method from an abstract object');\n  };\n  /* @conditional-compile-remove(video-background-effects) */\n  const onRemoveVideoBackgroundEffects = async (): Promise<void> => {\n    const stream = call?.localVideoStreams.find(stream => stream.mediaStreamType === 'Video') || deviceManager?.getUnparentedVideoStreams().find(stream => stream.mediaStreamType === 'Video');\n    if (stream) {\n      if (!options?.onResolveVideoBackgroundEffectsDependency) {\n        throw new Error(`Video background effects dependency not resolved`);\n      } else {\n        return stream.feature(Features.VideoEffects).stopEffects();\n      }\n    }\n  };\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const onBlurVideoBackground = async (backgroundBlurConfig?: BackgroundBlurConfig): Promise<void> => {\n    const stream = call?.localVideoStreams.find(stream => stream.mediaStreamType === 'Video') || deviceManager?.getUnparentedVideoStreams().find(stream => stream.mediaStreamType === 'Video');\n    if (stream) {\n      if (!options?.onResolveVideoBackgroundEffectsDependency) {\n        throw new Error(`Video background effects dependency not resolved`);\n      }\n      const createEffect = options?.onResolveVideoBackgroundEffectsDependency && (await options.onResolveVideoBackgroundEffectsDependency())?.createBackgroundBlurEffect;\n      return createEffect && stream.feature(Features.VideoEffects).startEffects(createEffect(backgroundBlurConfig));\n    }\n  };\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const onReplaceVideoBackground = async (backgroundReplacementConfig: BackgroundReplacementConfig): Promise<void> => {\n    const stream = call?.localVideoStreams.find(stream => stream.mediaStreamType === 'Video') || deviceManager?.getUnparentedVideoStreams().find(stream => stream.mediaStreamType === 'Video');\n    if (stream) {\n      if (!options?.onResolveVideoBackgroundEffectsDependency) {\n        throw new Error(`Video background effects dependency not resolved`);\n      }\n      const createEffect = options?.onResolveVideoBackgroundEffectsDependency && (await options.onResolveVideoBackgroundEffectsDependency())?.createBackgroundReplacementEffect;\n      return createEffect && stream.feature(Features.VideoEffects).startEffects(createEffect(backgroundReplacementConfig));\n    }\n  };\n\n  /* @conditional-compile-remove(close-captions) */\n  const onStartCaptions = async (options?: CaptionsOptions): Promise<void> => {\n    const captionsFeature = call?.feature(Features.Captions).captions;\n    await captionsFeature?.startCaptions(options);\n  };\n  /* @conditional-compile-remove(close-captions) */\n  const onStopCaptions = async (): Promise<void> => {\n    const captionsFeature = call?.feature(Features.Captions).captions;\n    await captionsFeature?.stopCaptions();\n  };\n  /* @conditional-compile-remove(close-captions) */\n  const onSetSpokenLanguage = async (language: string): Promise<void> => {\n    const captionsFeature = call?.feature(Features.Captions).captions;\n    await captionsFeature?.setSpokenLanguage(language);\n  };\n  /* @conditional-compile-remove(close-captions) */\n  const onSetCaptionLanguage = async (language: string): Promise<void> => {\n    const captionsFeature = (call?.feature(Features.Captions).captions as TeamsCaptions);\n    await captionsFeature.setCaptionLanguage(language);\n  };\n  return {\n    onHangUp,\n    onSelectCamera,\n    onSelectMicrophone,\n    onSelectSpeaker,\n    onStartScreenShare,\n    onStopScreenShare,\n    onToggleCamera,\n    onToggleMicrophone,\n    onToggleScreenShare,\n    onCreateLocalStreamView,\n    onCreateRemoteStreamView,\n    onStartLocalVideo,\n    onDisposeRemoteStreamView,\n    onDisposeLocalStreamView,\n    onDisposeRemoteScreenShareStreamView,\n    onDisposeRemoteVideoStreamView,\n    /* @conditional-compile-remove(raise-hand) */\n    onRaiseHand,\n    /* @conditional-compile-remove(raise-hand) */\n    onLowerHand,\n    /* @conditional-compile-remove(raise-hand) */\n    onToggleRaiseHand,\n    onRemoveParticipant: notImplemented,\n    onStartCall: notImplemented,\n    /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */onSendDtmfTone,\n    /* @conditional-compile-remove(video-background-effects) */\n    onRemoveVideoBackgroundEffects,\n    /* @conditional-compile-remove(video-background-effects) */\n    onBlurVideoBackground,\n    /* @conditional-compile-remove(video-background-effects) */\n    onReplaceVideoBackground,\n    /* @conditional-compile-remove(close-captions) */\n    onStartCaptions,\n    /* @conditional-compile-remove(close-captions) */\n    onStopCaptions,\n    /* @conditional-compile-remove(close-captions) */\n    onSetCaptionLanguage,\n    /* @conditional-compile-remove(close-captions) */\n    onSetSpokenLanguage\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Call, CallAgent, StartCallOptions } from '@azure/communication-calling';\nimport { CommunicationIdentifier } from '@azure/communication-common';\nimport { _toCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { StatefulCallClient, StatefulDeviceManager } from '@internal/calling-stateful-client';\nimport memoizeOne from 'memoize-one';\nimport { isACSCallParticipants } from '../utils/callUtils';\nimport { createDefaultCommonCallingHandlers, CommonCallingHandlers } from './createCommonHandlers';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffectsDependency } from './createCommonHandlers';\n\n/**\n * Object containing all the handlers required for calling components.\n *\n * Calling related components from this package are able to pick out relevant handlers from this object.\n * See {@link useHandlers} and {@link usePropsFor}.\n *\n * @public\n */\nexport interface CallingHandlers extends CommonCallingHandlers {\n  onStartCall: (participants: CommunicationIdentifier[], options?: StartCallOptions) => Call | undefined;\n}\n\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * Configuration options to include video effect background dependency.\n * @public\n */\nexport type CallingHandlersOptions = {\n  onResolveVideoBackgroundEffectsDependency?: () => Promise<VideoBackgroundEffectsDependency>;\n};\n\n/**\n * Type of {@link createDefaultCallingHandlers}.\n *\n * @public\n */\nexport type CreateDefaultCallingHandlers = (callClient: StatefulCallClient, callAgent: CallAgent | undefined, deviceManager: StatefulDeviceManager | undefined, call: Call | undefined, /* @conditional-compile-remove(video-background-effects) */\noptions?: CallingHandlersOptions) => CallingHandlers;\n\n/**\n * Create the default implementation of {@link CallingHandlers} for teams call.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const createDefaultCallingHandlers: CreateDefaultCallingHandlers = memoizeOne((...args) => {\n  const [callClient, callAgent, deviceManager, call, /* @conditional-compile-remove(video-background-effects) */options] = args;\n  return {\n    ...createDefaultCommonCallingHandlers(callClient, deviceManager, call, /* @conditional-compile-remove(video-background-effects) */options),\n    // FIXME: onStartCall API should use string, not the underlying SDK types.\n    onStartCall: (participants: CommunicationIdentifier[], options?: StartCallOptions): Call | undefined => {\n      if (!isACSCallParticipants(participants)) {\n        throw new Error('TeamsUserIdentifier in Teams call is not supported!');\n      }\n      return callAgent?.startCall(participants, options);\n    },\n    onRemoveParticipant: async (userId: string): Promise<void> => {\n      const participant = _toCommunicationIdentifier(userId);\n      await call?.removeParticipant(participant);\n    }\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(close-captions) */\nimport { CallClientState, CaptionsInfo } from '@internal/calling-stateful-client';\n/* @conditional-compile-remove(close-captions) */\nimport { CallingBaseSelectorProps, getStartCaptionsInProgress, getSupportedCaptionLanguages } from './baseSelectors';\n/* @conditional-compile-remove(close-captions) */\nimport { getCaptions, getCaptionsStatus, getCurrentCaptionLanguage, getCurrentSpokenLanguage, getSupportedSpokenLanguages } from './baseSelectors';\n/* @conditional-compile-remove(close-captions) */\nimport * as reselect from 'reselect';\n/* @conditional-compile-remove(close-captions) */\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\n/* @conditional-compile-remove(close-captions) */\nimport { _CaptionsInfo, _SupportedCaptionLanguage, _SupportedSpokenLanguage } from '@internal/react-components';\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * Selector type for the {@link StartCaptionsButton} component.\n * @internal\n */\nexport type _StartCaptionsButtonSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  checked: boolean;\n  currentCaptionLanguage: string;\n  currentSpokenLanguage: string;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * Selector for {@link StartCaptionsButton} component.\n *\n * @internal\n */\nexport const _startCaptionsButtonSelector: _StartCaptionsButtonSelector = reselect.createSelector([getCaptionsStatus, getCurrentCaptionLanguage, getCurrentSpokenLanguage], (isCaptionsFeatureActive, currentCaptionLanguage, currentSpokenLanguage) => {\n  return {\n    checked: isCaptionsFeatureActive ?? false,\n    currentCaptionLanguage: currentCaptionLanguage ?? '',\n    currentSpokenLanguage: currentSpokenLanguage ?? 'en-us'\n  };\n});\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * Selector type for components for Changing caption language and spoken language\n * @internal\n */\nexport type _CaptionSettingsSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  supportedCaptionLanguages: _SupportedCaptionLanguage[];\n  currentCaptionLanguage: _SupportedCaptionLanguage;\n  supportedSpokenLanguages: _SupportedSpokenLanguage[];\n  currentSpokenLanguage: _SupportedSpokenLanguage;\n  isCaptionsFeatureActive: boolean;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * Selector for Changing caption language and spoken language\n *\n * @internal\n */\nexport const _captionSettingsSelector: _CaptionSettingsSelector = reselect.createSelector([getSupportedCaptionLanguages, getCurrentCaptionLanguage, getSupportedSpokenLanguages, getCurrentSpokenLanguage, getCaptionsStatus], (supportedCaptionLanguages, currentCaptionLanguage, supportedSpokenLanguages, currentSpokenLanguage, isCaptionsFeatureActive) => {\n  return {\n    supportedCaptionLanguages: supportedCaptionLanguages ?? [],\n    currentCaptionLanguage: currentCaptionLanguage ?? 'en',\n    supportedSpokenLanguages: supportedSpokenLanguages ?? ['en-us'],\n    currentSpokenLanguage: currentSpokenLanguage ?? 'en-us',\n    isCaptionsFeatureActive: isCaptionsFeatureActive ?? false\n  };\n});\n/* @conditional-compile-remove(close-captions) */\n/**\n * Selector type for the {@link CaptionsBanner} component.\n * @internal\n */\nexport type _CaptionsBannerSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  captions: _CaptionsInfo[];\n  isCaptionsOn: boolean;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * Selector for {@link CaptionsBanner} component.\n *\n * @internal\n */\nexport const _captionsBannerSelector: _CaptionsBannerSelector = reselect.createSelector([getCaptions, getCaptionsStatus, getStartCaptionsInProgress], (captions, isCaptionsFeatureActive, startCaptionsInProgress) => {\n  // Following Teams app logic, no matter how many 'Partial' captions come,\n  // we only pick first one according to start time, and all the other partial captions will be filtered out\n  // This will give customers a stable captions experience when others talking over the dominant speaker\n  const captionsToRender = captions?.filter(captions => captions.resultType === 'Final');\n  const firstPartialCaptions = captions?.filter(captions => captions.resultType === 'Partial').sort(captionsComparator)[0];\n  firstPartialCaptions && captionsToRender?.push(firstPartialCaptions);\n  const captionsInfo = captionsToRender?.map(c => {\n    const userId = getCaptionsSpeakerIdentifier(c);\n    return {\n      id: c.timestamp.getTime() + userId + c.speaker.displayName,\n      displayName: c.speaker.displayName ?? 'Unnamed Participant',\n      captionText: c.captionText ?? '',\n      userId\n    };\n  });\n  return {\n    captions: captionsInfo ?? [],\n    isCaptionsOn: isCaptionsFeatureActive ?? false,\n    startCaptionsInProgress: startCaptionsInProgress ?? false\n  };\n});\n\n/* @conditional-compile-remove(close-captions) */\nconst captionsComparator = (captionsA: CaptionsInfo, captionsB: CaptionsInfo): number => {\n  return captionsA.timestamp.getTime() - captionsB.timestamp.getTime() || getCaptionsSpeakerIdentifier(captionsA).localeCompare(getCaptionsSpeakerIdentifier(captionsB));\n};\n\n/* @conditional-compile-remove(close-captions) */\nconst getCaptionsSpeakerIdentifier = (captions: CaptionsInfo): string => {\n  return captions.speaker.identifier ? toFlatCommunicationIdentifier(captions.speaker.identifier) : '';\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { AudioDeviceInfo, DeviceAccess, DeviceManager, VideoDeviceInfo } from '@azure/communication-calling';\nimport { CallContext } from './CallContext';\nimport { InternalCallContext } from './InternalCallContext';\n/* @conditional-compile-remove(video-background-effects) */\nimport { LocalVideoStream } from '@azure/communication-calling';\n\n/**\n * Defines the additional methods added by the stateful on top of {@link @azure/communication-calling#DeviceManager}.\n *\n * @public\n */\nexport interface StatefulDeviceManager extends DeviceManager {\n  /**\n   * Sets the selectedCamera in the {@link DeviceManagerState}. This is completely developer driven and is not tied in\n   * any way to {@link @azure/communication-calling#DeviceManager}. It is entirely contained in\n   * {@link StatefulDeviceManager}. See also {@link DeviceManagerState.selectedCamera}.\n   */\n  selectCamera: (device: VideoDeviceInfo) => void;\n\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Gets the list of unparented video streams. This is a list of video streams that have not been added to a\n   * {@link @azure/communication-calling#Call}. This is useful for developers who want to interact with rendered\n   * video streams before they have started a call. See also {@link @azure/communication-react#CallClient.createView}.\n   *\n   * @public\n   */\n  getUnparentedVideoStreams: () => LocalVideoStream[];\n}\n\n/**\n * ProxyDeviceManager proxies DeviceManager and subscribes to all events that affect device manager state. State updates\n * are set on the provided context. Also any queries for state are proxied and stored in state as well. Only one device\n * manager should exist for a given CallClient so if CallClient.getDeviceManager is called multiple times, either a\n * cached ProxyDeviceManager should be returned or the existing ProxyDeviceManager should be destructed via destructor()\n * and a new ProxyDeviceManager created.\n */\nclass ProxyDeviceManager implements ProxyHandler<DeviceManager> {\n  private _deviceManager: DeviceManager;\n  private _context: CallContext;\n  constructor(deviceManager: DeviceManager, context: CallContext) {\n    this._deviceManager = deviceManager;\n    this._context = context;\n    this.setDeviceManager();\n    this.subscribe();\n  }\n  private setDeviceManager = (): void => {\n    // isSpeakerSelectionAvailable, selectedMicrophone, and selectedSpeaker are properties on DeviceManager. Since they\n    // are not functions we can't proxy them so we'll update whenever we think they may need updating such as at\n    // construction time or when certain events happen.\n    this._context.setDeviceManagerIsSpeakerSelectionAvailable(this._deviceManager.isSpeakerSelectionAvailable);\n    this._context.setDeviceManagerSelectedMicrophone(this._deviceManager.selectedMicrophone);\n    this._context.setDeviceManagerSelectedSpeaker(this._deviceManager.selectedSpeaker);\n  };\n  private subscribe = (): void => {\n    this._deviceManager.on('videoDevicesUpdated', this.videoDevicesUpdated);\n    this._deviceManager.on('audioDevicesUpdated', this.audioDevicesUpdated);\n    this._deviceManager.on('selectedMicrophoneChanged', this.selectedMicrophoneChanged);\n    this._deviceManager.on('selectedSpeakerChanged', this.selectedSpeakerChanged);\n  };\n\n  /**\n   * This is used to unsubscribe DeclarativeDeviceManager from the DeviceManager events.\n   */\n  public unsubscribe = (): void => {\n    this._deviceManager.off('videoDevicesUpdated', this.videoDevicesUpdated);\n    this._deviceManager.off('audioDevicesUpdated', this.audioDevicesUpdated);\n    this._deviceManager.off('selectedMicrophoneChanged', this.selectedMicrophoneChanged);\n    this._deviceManager.off('selectedSpeakerChanged', this.selectedSpeakerChanged);\n  };\n\n  /**\n   * Used to set a camera inside the proxy device manager.\n   *\n   * @param videoDeviceInfo VideoDeviceInfo\n   */\n  public selectCamera = (videoDeviceInfo: VideoDeviceInfo): void => {\n    this._context.setDeviceManagerSelectedCamera(videoDeviceInfo);\n  };\n  private videoDevicesUpdated = async (): Promise<void> => {\n    // Device Manager always has a camera with '' name if there are no real camera devices available.\n    // We don't want to show that in the UI.\n    const realCameras = (await this._deviceManager.getCameras()).filter(c => !!c.name);\n    this._context.setDeviceManagerCameras(dedupeById(realCameras));\n  };\n  private audioDevicesUpdated = async (): Promise<void> => {\n    this._context.setDeviceManagerMicrophones(dedupeById(await this._deviceManager.getMicrophones()));\n    this._context.setDeviceManagerSpeakers(dedupeById(await this._deviceManager.getSpeakers()));\n  };\n  private selectedMicrophoneChanged = (): void => {\n    this._context.setDeviceManagerSelectedMicrophone(this._deviceManager.selectedMicrophone);\n  };\n  private selectedSpeakerChanged = (): void => {\n    this._context.setDeviceManagerSelectedSpeaker(this._deviceManager.selectedSpeaker);\n  };\n  public get<P extends keyof DeviceManager>(target: DeviceManager, prop: P): any {\n    switch (prop) {\n      case 'getCameras':\n        {\n          return this._context.withAsyncErrorTeedToState((): Promise<VideoDeviceInfo[]> => {\n            return target.getCameras().then((cameras: VideoDeviceInfo[]) => {\n              // Device Manager always has a camera with '' name if there are no real camera devices available.\n              // We don't want to show that in the UI.\n              const realCameras = cameras.filter(c => !!c.name);\n              this._context.setDeviceManagerCameras(dedupeById(realCameras));\n              return realCameras;\n            });\n          }, 'DeviceManager.getCameras');\n        }\n      case 'getMicrophones':\n        {\n          return this._context.withAsyncErrorTeedToState((): Promise<AudioDeviceInfo[]> => {\n            return target.getMicrophones().then((microphones: AudioDeviceInfo[]) => {\n              this._context.setDeviceManagerMicrophones(dedupeById(microphones));\n              return microphones;\n            });\n          }, 'DeviceManager.getMicrophones');\n        }\n      case 'getSpeakers':\n        {\n          return this._context.withAsyncErrorTeedToState((): Promise<AudioDeviceInfo[]> => {\n            return target.getSpeakers().then((speakers: AudioDeviceInfo[]) => {\n              this._context.setDeviceManagerSpeakers(dedupeById(speakers));\n              return speakers;\n            });\n          }, 'DeviceManager.getSpeakers');\n        }\n      case 'selectMicrophone':\n        {\n          return this._context.withAsyncErrorTeedToState((...args: Parameters<DeviceManager['selectMicrophone']>): Promise<void> => {\n            return target.selectMicrophone(...args).then(() => {\n              this._context.setDeviceManagerSelectedMicrophone(target.selectedMicrophone);\n            });\n          }, 'DeviceManager.selectMicrophone');\n        }\n      case 'selectSpeaker':\n        {\n          return this._context.withAsyncErrorTeedToState((...args: Parameters<DeviceManager['selectSpeaker']>): Promise<void> => {\n            return target.selectSpeaker(...args).then(() => {\n              this._context.setDeviceManagerSelectedSpeaker(target.selectedSpeaker);\n            });\n          }, 'DeviceManager.selectSpeaker');\n        }\n      case 'askDevicePermission':\n        {\n          return this._context.withAsyncErrorTeedToState((...args: Parameters<DeviceManager['askDevicePermission']>): Promise<DeviceAccess> => {\n            return target.askDevicePermission(...args).then((deviceAccess: DeviceAccess) => {\n              this._context.setDeviceManagerDeviceAccess(deviceAccess);\n              this.setDeviceManager();\n              return deviceAccess;\n            });\n          }, 'DeviceManager.askDevicePermission');\n        }\n      default:\n        return Reflect.get(target, prop);\n    }\n  }\n}\n\n// TODO: Remove this when SDK no longer returns duplicate audio and video devices\n/** Helper function to dedupe duplicate audio and video devices obtained from SDK */\nconst dedupeById = <T extends {\n  id: string;\n},>(devices: T[]): T[] => {\n  const ids = new Set();\n  const uniqueDevices: T[] = [];\n  devices.forEach((device: T) => {\n    if (!ids.has(device.id)) {\n      uniqueDevices.push(device);\n      ids.add(device.id);\n    }\n  });\n  return uniqueDevices;\n};\n\n/**\n * Creates a declarative DeviceManager by proxying DeviceManager with ProxyDeviceManager. The declarative DeviceManager\n * will put state updates in the given context.\n *\n * @param deviceManager - DeviceManager from SDK\n * @param context - CallContext from StatefulCallClient\n *\n * @private\n */\nexport const deviceManagerDeclaratify = (deviceManager: DeviceManager, context: CallContext, internalContext: InternalCallContext): DeviceManager => {\n  const proxyDeviceManager = new ProxyDeviceManager(deviceManager, context);\n  Object.defineProperty(deviceManager, 'unsubscribe', {\n    configurable: false,\n    value: () => proxyDeviceManager.unsubscribe()\n  });\n  Object.defineProperty(deviceManager, 'selectCamera', {\n    configurable: false,\n    value: (videoDeviceInfo: VideoDeviceInfo) => proxyDeviceManager.selectCamera(videoDeviceInfo)\n  });\n  /* @conditional-compile-remove(video-background-effects) */\n  Object.defineProperty(deviceManager, 'getUnparentedVideoStreams', {\n    configurable: false,\n    value: (): LocalVideoStream[] => internalContext.getUnparentedRenderInfos()\n  });\n  return (new Proxy(deviceManager, proxyDeviceManager) as StatefulDeviceManager);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { AudioDeviceInfo, CallDirection, CallEndReason, CallerInfo, CallState as CallStatus, DeviceAccess, DominantSpeakersInfo, LatestMediaDiagnostics, LatestNetworkDiagnostics, MediaStreamType, RemoteParticipantState as RemoteParticipantStatus, ScalingMode, VideoDeviceInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangeInfo, ParticipantCapabilities } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsResultType } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoEffectName } from '@azure/communication-calling';\n/* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\nimport { ParticipantRole } from '@azure/communication-calling';\nimport { CommunicationIdentifierKind } from '@azure/communication-common';\n/**\n * State only version of {@link @azure/communication-calling#CallAgent} except calls is moved to be a child directly of\n * {@link CallClientState} and not included here. The reason to have CallAgent's state proxied is to provide access to\n * displayName. We don't flatten CallAgent.displayName and put it in CallClientState because it would be ambiguious that\n * displayName is actually reliant on the creation/existence of CallAgent to be available.\n *\n * @public\n */\nexport interface CallAgentState {\n  /**\n   * Proxy of {@link @azure/communication-calling#CallAgent.displayName}.\n   */\n  displayName?: string;\n}\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * @public\n */\nexport interface CaptionsInfo {\n  /**\n   * The state in which this caption data can be classified.\n   */\n  resultType: CaptionsResultType;\n  /**\n   * The information of the call participant who spoke the captioned text.\n   */\n  speaker: CallerInfo;\n  /**\n   * The language that the spoken words were interpretted as. Corresponds to the language specified in startCaptions / setSpokenLanguage.\n   */\n  spokenLanguage: string;\n  /**\n   * The caption text.\n   */\n  captionText: string;\n  /**\n   * Timestamp of when the captioned words were initially spoken.\n   */\n  timestamp: Date;\n  /**\n   * The language that the captions are presented in. Corresponds to the captionLanguage specified in startCaptions / setCaptionLanguage.\n   */\n  captionLanguage?: string;\n  /**\n   * The original spoken caption text prior to translating to subtitle language\n   */\n  spokenText?: string;\n}\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * @public\n */\nexport interface CaptionsCallFeatureState {\n  /**\n   * supported spoken languages\n   */\n  supportedSpokenLanguages: string[];\n  /**\n   * array of received captions\n   */\n  captions: CaptionsInfo[];\n  /**\n   * whether captions is on/off\n   */\n  isCaptionsFeatureActive: boolean;\n  /**\n   * whether start captions button is clicked or now\n   */\n  startCaptionsInProgress: boolean;\n  /**\n   * supported caption languages\n   */\n  supportedCaptionLanguages: string[];\n  /**\n   * current spoken language\n   */\n  currentSpokenLanguage: string;\n  /**\n   * current caption language\n   */\n  currentCaptionLanguage: string;\n}\n\n/**\n * State only version of {@link @azure/communication-calling#TranscriptionCallFeature}. {@link StatefulCallClient} will\n * automatically listen for transcription state of the call and update the state exposed by {@link StatefulCallClient}\n * accordingly.\n *\n * @public\n */\nexport interface TranscriptionCallFeatureState {\n  /**\n   * Proxy of {@link @azure/communication-calling#TranscriptionCallFeature.isTranscriptionActive}.\n   */\n  isTranscriptionActive: boolean;\n}\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * State only version of {@link @azure/communication-calling#CapabilitiesFeature}\n *\n * @public\n */\nexport interface CapabilitiesFeatureState {\n  /**\n   * Proxy of {@link @azure/communication-calling#CapabilitiesFeature.capabilities}.\n   */\n  capabilities: ParticipantCapabilities;\n  /**\n   * Proxy of the latest {@link @azure/communication-calling#CapabilitiesChangeInfo}\n   */\n  latestCapabilitiesChangeInfo: CapabilitiesChangeInfo;\n}\n/**\n * State only version of {@link @azure/communication-calling#RecordingCallFeature}. {@link StatefulCallClient} will\n * automatically listen for recording state of the call and update the state exposed by {@link StatefulCallClient} accordingly.\n *\n * @public\n */\nexport interface RecordingCallFeatureState {\n  /**\n   * Proxy of {@link @azure/communication-calling#RecordingCallFeature.isRecordingActive}.\n   */\n  isRecordingActive: boolean;\n}\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * State only version of {@link @azure/communication-calling#RaiseHandCallFeature}. {@link StatefulCallClient} will\n * automatically listen for raised hands on the call and update the state exposed by {@link StatefulCallClient} accordingly.\n *\n * @public\n */\nexport interface RaiseHandCallFeatureState {\n  /**\n   * Proxy of {@link @azure/communication-calling#RaiseHandCallFeature.raisedHands}.\n   */\n  raisedHands: RaisedHandState[];\n  /**\n   * Contains information for local participant from list {@link @azure/communication-calling#RaiseHandCallFeature.raisedHands}.\n   */\n  localParticipantRaisedHand?: RaisedHandState;\n}\n/* @conditional-compile-remove(raise-hand) */\n/**\n * Raised hand state with order\n *\n * @public\n */\nexport type RaisedHandState = {\n  raisedHandOrderPosition: number;\n};\n/**\n * State only version of {@link @azure/communication-calling#LocalVideoStream}.\n *\n * @public\n */\nexport interface LocalVideoStreamState {\n  /**\n   * Proxy of {@link @azure/communication-calling#LocalVideoStream.source}.\n   */\n  source: VideoDeviceInfo;\n  /**\n   * Proxy of {@link @azure/communication-calling#LocalVideoStream.mediaStreamType}.\n   */\n  mediaStreamType: MediaStreamType;\n  /**\n   * {@link VideoStreamRendererView} that is managed by createView/disposeView in {@link StatefulCallClient}\n   * API. This can be undefined if the stream has not yet been rendered and defined after createView creates the view.\n   */\n  view?: VideoStreamRendererViewState;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Stores the state of the video effects.\n   * @public\n   */\n  videoEffects?: LocalVideoStreamVideoEffectsState;\n}\n\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * State only version of a LocalVideoStream's {@link @azure/communication-calling#VideoEffectsFeature}.\n *\n * @public\n */\nexport interface LocalVideoStreamVideoEffectsState {\n  /**\n   * List of effects if any are active.\n   */\n  activeEffects?: VideoEffectName[];\n}\n\n/* @conditional-compile-remove(optimal-video-count) */\n/**\n * State only version of Optimal Video Count Feature {@link @azure/communication-calling#OptimalVideoCountCallFeature}.\n *\n * @public\n */\nexport interface OptimalVideoCountFeatureState {\n  /**\n   * State of the current optimal video count.\n   */\n  maxRemoteVideoStreams: number;\n}\n\n/**\n * State only version of {@link @azure/communication-calling#RemoteVideoStream}.\n *\n * @public\n */\nexport interface RemoteVideoStreamState {\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteVideoStream.id}.\n   */\n  id: number;\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteVideoStream.mediaStreamType}.\n   */\n  mediaStreamType: MediaStreamType;\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteVideoStream.isAvailable}.\n   */\n  isAvailable: boolean;\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteVideoStream.isReceiving}.\n   * @beta\n   */\n  /**\n   * {@link VideoStreamRendererView} that is managed by createView/disposeView in {@link StatefulCallClient}\n   * API. This can be undefined if the stream has not yet been rendered and defined after createView creates the view.\n   */\n  view?: VideoStreamRendererViewState;\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteVideoStream.size}.\n   */\n  streamSize?: {\n    width: number;\n    height: number;\n  };\n}\n\n/**\n * State only version of {@link @azure/communication-calling#VideoStreamRendererView}. This property is added to the state exposed\n * by {@link StatefulCallClient} by {@link StatefulCallClient.createView} and removed by {@link StatefulCallClient.disposeView}.\n *\n * @public\n */\nexport interface VideoStreamRendererViewState {\n  /**\n   * Proxy of {@link @azure/communication-calling#VideoStreamRendererView.scalingMode}.\n   */\n  scalingMode: ScalingMode;\n  /**\n   * Proxy of {@link @azure/communication-calling#VideoStreamRendererView.isMirrored}.\n   */\n  isMirrored: boolean;\n  /**\n   * Proxy of {@link @azure/communication-calling#VideoStreamRendererView.target}.\n   */\n  target: HTMLElement;\n}\n\n/**\n * State only version of {@link @azure/communication-calling#RemoteParticipant}. {@link StatefulCallClient} will\n * automatically retrieve RemoteParticipants and add their state to the state exposed by {@link StatefulCallClient}.\n *\n * @public\n */\nexport interface RemoteParticipantState {\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteParticipant.identifier}.\n   */\n  identifier: CommunicationIdentifierKind;\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteParticipant.displayName}.\n   */\n  displayName?: string;\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteParticipant.state}.\n   */\n  state: RemoteParticipantStatus;\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteParticipant.callEndReason}.\n   */\n  callEndReason?: CallEndReason;\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteParticipant.videoStreams} as an object with\n   * {@link RemoteVideoStream} fields keyed by {@link @azure/communication-calling#RemoteVideoStream.id}.\n   */\n  videoStreams: {\n    [key: number]: RemoteVideoStreamState;\n  };\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteParticipant.isMuted}.\n   */\n  isMuted: boolean;\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteParticipant.isSpeaking}.\n   */\n  isSpeaking: boolean;\n  /* @conditional-compile-remove(rooms) */\n  /**\n   * Proxy of {@link @azure/communication-calling#RemoteParticipant.role}.\n   */\n  role?: ParticipantRole;\n  /* @conditional-compile-remove(raise-hand) */\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.RaisedHand.raisedHands}.\n   */\n  raisedHand?: RaisedHandState;\n}\n\n/**\n * State only version of {@link @azure/communication-calling#Call}. {@link StatefulCallClient} will automatically\n * retrieve Call's state and add it to the state exposed by {@link StatefulCallClient}.\n *\n * @public\n */\nexport interface CallState {\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.id}.\n   */\n  id: string;\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.callerInfo}.\n   */\n  callerInfo: CallerInfo;\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.state}.\n   */\n  state: CallStatus;\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.callEndReason}.\n   */\n  callEndReason?: CallEndReason;\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.direction}.\n   */\n  direction: CallDirection;\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.isMuted}.\n   */\n  isMuted: boolean;\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.isScreenSharingOn}.\n   */\n  isScreenSharingOn: boolean;\n  /**\n   * Proxy of {@link @azure/communication-calling#DominantSpeakersInfo }.\n   */\n  dominantSpeakers?: DominantSpeakersInfo;\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.localVideoStreams}.\n   */\n  localVideoStreams: LocalVideoStreamState[];\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.remoteParticipants}.\n   * Object with {@link RemoteParticipant} fields keyed by flattened {@link RemoteParticipantState.identifier}.\n   * To obtain a flattened {@link RemoteParticipantState.identifier}, use\n   * {@link @azure/communication-react#toFlatCommunicationIdentifier}.\n   */\n  remoteParticipants: {\n    [keys: string]: RemoteParticipantState;\n  };\n  /**\n   * Stores remote participants that have left the call so that the callEndReason could be retrieved.\n   * Object with {@link RemoteParticipant} fields keyed by flattened {@link RemoteParticipantState.identifier}.\n   * To obtain a flattened {@link RemoteParticipantState.identifier}, use\n   * {@link @azure/communication-react#toFlatCommunicationIdentifier}.\n   */\n  remoteParticipantsEnded: {\n    [keys: string]: RemoteParticipantState;\n  };\n  /**\n   * Proxy of {@link @azure/communication-calling#TranscriptionCallFeature}.\n   */\n  transcription: TranscriptionCallFeatureState;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Proxy of {@link @azure/communication-calling#TranscriptionCallFeature}.\n   */\n  captionsFeature: CaptionsCallFeatureState;\n  /* @conditional-compile-remove(optimal-video-count) */\n  /**\n   * Proxy of {@link @azure/communication-calling#OptimalVideoCountCallFeature}.\n   */\n  optimalVideoCount: OptimalVideoCountFeatureState;\n  /**\n   * Proxy of {@link @azure/communication-calling#RecordingCallFeature}.\n   */\n  recording: RecordingCallFeatureState;\n  /* @conditional-compile-remove(raise-hand) */\n  /**\n   * Proxy of {@link @azure/communication-calling#RaiseHandCallFeature}.\n   */\n  raiseHand: RaiseHandCallFeatureState;\n  /**\n   * Stores the currently active screenshare participant's key. If there is no screenshare active, then this will be\n   * undefined. You can use this key to access the remoteParticipant data in {@link CallState.remoteParticipants} object.\n   *\n   * Note this only applies to ScreenShare in RemoteParticipant. A local ScreenShare being active will not affect this\n   * property.\n   *\n   * This property is added by the stateful layer and is not a proxy of SDK state\n   */\n  screenShareRemoteParticipant?: string;\n  /**\n   * Stores the local date when the call started on the client. This property is added by the stateful layer and is not\n   * a proxy of SDK state.\n   */\n  startTime: Date;\n  /**\n   * Stores the local date when the call ended on the client. This property is added by the stateful layer and is not\n   * a proxy of SDK state.\n   */\n  endTime: Date | undefined;\n\n  /**\n   * Stores the latest call diagnostics.\n   */\n  diagnostics: DiagnosticsCallFeatureState;\n  /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\n  /**\n   * Proxy of {@link @azure/communication-calling#Call.role}.\n   */\n  role?: ParticipantRole;\n  /* @conditional-compile-remove(call-transfer) */\n  /**\n   * Transfer state of call\n   */\n  transfer: TransferFeatureState;\n  /* @conditional-compile-remove(capabilities) */\n  /**\n   * Proxy of {@link @azure/communication-calling#CapabilitiesFeature}.\n   */\n  capabilitiesFeature?: CapabilitiesFeatureState;\n}\n\n/* @conditional-compile-remove(call-transfer) */\n/**\n * Transfer feature state\n *\n * @public\n */\nexport interface TransferFeatureState {\n  /**\n   * Accepted transfer requests\n   */\n  acceptedTransfers: {\n    [key: string]: AcceptedTransfer;\n  };\n}\n\n/* @conditional-compile-remove(call-transfer) */\n/**\n * Transfer feature state\n *\n * @public\n */\nexport interface AcceptedTransfer {\n  /**\n   * Stores call id of accepted transfer\n   */\n  callId: string;\n  /**\n   * Stores timestamp when transfer was accepted\n   */\n  timestamp: Date;\n}\n\n/**\n * State only version of {@link @azure/communication-calling#IncomingCall}. {@link StatefulCallClient} will\n * automatically detect incoming calls and add their state to the state exposed by {@link StatefulCallClient}.\n *\n * @public\n */\nexport interface IncomingCallState {\n  /**\n   * Proxy of {@link @azure/communication-calling#IncomingCall.id}.\n   */\n  id: string;\n  /**\n   * Proxy of {@link @azure/communication-calling#IncomingCall.callerInfo}.\n   */\n  callerInfo: CallerInfo;\n  /**\n   * Set to the state returned by 'callEnded' event on {@link @azure/communication-calling#IncomingCall} when received.\n   * This property is added by the stateful layer and is not a proxy of SDK state.\n   */\n  callEndReason?: CallEndReason;\n  /**\n   * Stores the local date when the call started on the client. This property is added by the stateful layer and is not\n   * a proxy of SDK state.\n   */\n  startTime: Date;\n  /**\n   * Stores the local date when the call ended on the client. This property is added by the stateful layer and is not a\n   * proxy of SDK state. It is undefined if the call is not ended yet.\n   */\n  endTime?: Date;\n}\n\n/**\n * This type is meant to encapsulate all the state inside {@link @azure/communication-calling#DeviceManager}. For\n * optional parameters they may not be available until permission is granted by the user. The cameras, microphones,\n * speakers, and deviceAccess states will be empty until the corresponding\n * {@link @azure/communication-calling#DeviceManager}'s getCameras, getMicrophones, getSpeakers, and askDevicePermission\n * APIs are called and completed.\n *\n * @public\n */\nexport type DeviceManagerState = {\n  /**\n   * Proxy of {@link @azure/communication-calling#DeviceManager.isSpeakerSelectionAvailable}.\n   */\n  isSpeakerSelectionAvailable: boolean;\n  /**\n   * Proxy of {@link @azure/communication-calling#DeviceManager.selectedMicrophone}.\n   */\n  selectedMicrophone?: AudioDeviceInfo;\n  /**\n   * Proxy of {@link @azure/communication-calling#DeviceManager.selectedSpeaker}.\n   */\n  selectedSpeaker?: AudioDeviceInfo;\n  /**\n   * Stores the selected camera device info. This is added by the stateful layer and does not exist in the Calling SDK.\n   * It is meant as a convenience to the developer. It must be explicitly set before it has any value and does not\n   * persist across instances of the {@link StatefulCallClient}. The developer controls entirely what this value holds\n   * at any time.\n   */\n  selectedCamera?: VideoDeviceInfo;\n  /**\n   * Stores any cameras data returned from {@link @azure/communication-calling#DeviceManager.getCameras}.\n   */\n  cameras: VideoDeviceInfo[];\n  /**\n   * Stores any microphones data returned from {@link @azure/communication-calling#DeviceManager.getMicrophones}.\n   */\n  microphones: AudioDeviceInfo[];\n  /**\n   * Stores any speakers data returned from {@link @azure/communication-calling#DeviceManager.getSpeakers}.\n   */\n  speakers: AudioDeviceInfo[];\n  /**\n   * Stores deviceAccess data returned from {@link @azure/communication-calling#DeviceManager.askDevicePermission}.\n   */\n  deviceAccess?: DeviceAccess;\n  /**\n   * Stores created views that are not associated with any CallState (when {@link StatefulCallClient.createView} is\n   * called with undefined callId, undefined participantId, and defined LocalVideoStream).\n   *\n   * The values in this array are generated internally when {@link StatefulCallClient.createView} is called and are\n   * considered immutable.\n   */\n  unparentedViews: LocalVideoStreamState[];\n};\n\n/**\n * Container for all of the state data proxied by {@link StatefulCallClient}. The calls, callsEnded, incomingCalls, and\n * incomingCallsEnded states will be automatically provided if a callAgent has been created. The deviceManager will be\n * empty initially until populated see {@link DeviceManagerState}. The userId state is provided as a convenience for the\n * developer and is completely controled and set by the developer.\n *\n * @public\n */\nexport interface CallClientState {\n  /**\n   * Proxy of {@link @azure/communication-calling#CallAgent.calls} as an object with CallState {@link CallState} fields.\n   * It is keyed by {@link @azure/communication-calling#Call.id}. Please note that\n   * {@link @azure/communication-calling#Call.id} could change. You should not cache the id itself but the entire\n   * {@link @azure/communication-calling#Call} and then use the id contained to look up data in this map.\n   */\n  calls: {\n    [key: string]: CallState;\n  };\n  /**\n   * Calls that have ended are stored here so the callEndReason could be checked.\n   * It is an object with {@link @azure/communication-calling#Call.id} keys and {@link CallState} values.\n   *\n   * Only {@link MAX_CALL_HISTORY_LENGTH} Calls are kept in the history. Oldest calls are evicted if required.\n   */\n  callsEnded: {\n    [key: string]: CallState;\n  };\n  /**\n   * Proxy of {@link @azure/communication-calling#IncomingCall} as an object with {@link IncomingCall} fields.\n   * It is keyed by {@link @azure/communication-calling#IncomingCall.id}.\n   */\n  incomingCalls: {\n    [key: string]: IncomingCallState;\n  };\n  /**\n   * Incoming Calls that have ended are stored here so the callEndReason could be checked.\n   * It is an as an object with {@link @azure/communication-calling#Call.id} keys and {@link IncomingCall} values.\n   *\n   * Only {@link MAX_CALL_HISTORY_LENGTH} Calls are kept in the history. Oldest calls are evicted if required.\n   */\n  incomingCallsEnded: {\n    [key: string]: IncomingCallState;\n  };\n  /**\n   * Proxy of {@link @azure/communication-calling#DeviceManager}. Please review {@link DeviceManagerState}.\n   */\n  deviceManager: DeviceManagerState;\n  /**\n   * Proxy of {@link @azure/communication-calling#CallAgent}. Please review {@link CallAgentState}.\n   */\n  callAgent?: CallAgentState;\n  /**\n   * Stores a userId. This is not used by the {@link StatefulCallClient} and is provided here as a convenience for the\n   * developer for easier access to userId. Must be passed in at initialization of the {@link StatefulCallClient}.\n   * Completely controlled by the developer.\n   */\n  userId: CommunicationIdentifierKind;\n  /**\n   * Stores the latest error for each API method.\n   *\n   * See documentation of {@Link CallErrors} for details.\n   */\n  latestErrors: CallErrors;\n}\n\n/**\n * Errors teed from API calls to the Calling SDK.\n *\n * Each property in the object stores the latest error for a particular SDK API method.\n *\n * Errors from this object can be cleared using the {@link newClearCallErrorsModifier}.\n * Additionally, errors are automatically cleared when:\n * - The state is cleared.\n * - Subsequent calls to related API methods succeed.\n * See documentation of individual stateful client methods for details on when errors may be automatically cleared.\n *\n * @public\n */\nexport type CallErrors = { [target in CallErrorTarget]: CallError };\n\n/**\n * Error thrown from failed stateful API methods.\n *\n * @public\n */\nexport class CallError extends Error {\n  /**\n   * The API method target that failed.\n   */\n  public target: CallErrorTarget;\n  /**\n   * Error thrown by the failed SDK method.\n   */\n  public innerError: Error;\n  /**\n   * Timestamp added to the error by the stateful layer.\n   */\n  public timestamp: Date;\n  constructor(target: CallErrorTarget, innerError: Error, timestamp?: Date) {\n    super();\n    this.target = target;\n    this.innerError = innerError;\n    // Testing note: It is easier to mock Date::now() than the Date() constructor.\n    this.timestamp = timestamp ?? new Date(Date.now());\n    this.name = 'CallError';\n    this.message = `${this.target}: ${this.innerError.message}`;\n  }\n}\n\n/**\n * String literal type for all permissible keys in {@Link CallErrors}.\n *\n * @public\n */\nexport type CallErrorTarget = 'Call.addParticipant' | 'Call.dispose' | 'Call.feature' | 'Call.hangUp' | 'Call.hold' | 'Call.mute' | 'Call.muteIncomingAudio' | 'Call.off' | 'Call.on' | 'Call.removeParticipant' | 'Call.resume' | 'Call.sendDtmf' | 'Call.startAudio' | 'Call.startScreenSharing' | 'Call.startVideo' | 'Call.stopScreenSharing' | 'Call.stopAudio' | 'Call.stopVideo' | 'Call.unmute' | 'Call.unmuteIncomingAudio' | 'CallAgent.dispose' | 'CallAgent.feature' | 'CallAgent.join' | 'CallAgent.off' | 'CallAgent.on' | 'CallAgent.startCall' | 'CallClient.createCallAgent' | 'CallClient.createTeamsCallAgent' | 'CallClient.feature' | 'CallClient.getDeviceManager' | 'DeviceManager.askDevicePermission' | 'DeviceManager.getCameras' | 'DeviceManager.getMicrophones' | 'DeviceManager.getSpeakers' | 'DeviceManager.off' | 'DeviceManager.on' | 'DeviceManager.selectMicrophone' | 'DeviceManager.selectSpeaker' | 'IncomingCall.accept' | 'IncomingCall.reject' | 'VideoEffectsFeature.startEffects' | 'Call.setConstraints';\n\n/**\n * State only proxy for {@link @azure/communication-calling#DiagnosticsCallFeature}.\n *\n * @public\n */\nexport interface DiagnosticsCallFeatureState {\n  /**\n   * Stores diagnostics related to network conditions.\n   */\n  network: NetworkDiagnosticsState;\n\n  /**\n   * Stores diagnostics related to media quality.\n   */\n  media: MediaDiagnosticsState;\n}\n\n/**\n * State only proxy for {@link @azure/communication-calling#NetworkDiagnostics}.\n *\n * @public\n */\nexport interface NetworkDiagnosticsState {\n  latest: LatestNetworkDiagnostics;\n}\n\n/**\n * State only proxy for {@link @azure/communication-calling#MediaDiagnostics}.\n *\n * @public\n */\nexport interface MediaDiagnosticsState {\n  latest: LatestMediaDiagnostics;\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createClientLogger } from '@azure/logger';\n\n/**\n * @private\n */\nexport const callingStatefulLogger = createClientLogger('communication-react:calling-stateful');\n\n/**\n * @private\n */\nexport enum EventNames {\n  // Info\n  VIEW_RENDER_SUCCEED = 'VIEW_RENDER_SUCCEED',\n  START_DISPOSE_STREAM = 'START_DISPOSE_STREAM',\n  START_STREAM_RENDERING = 'START_STREAM_RENDERING',\n  DISPOSING_RENDERER = 'DISPOSING_RENDERER',\n  CREATING_VIEW = 'CREATING_VIEW',\n  // Warning\n  CREATE_STREAM_INVALID_PARAMS = 'CREATE_STREAM_INVALID_PARAMS',\n  DISPOSE_STREAM_INVALID_PARAMS = 'DISPOSE_STREAM_INVALID_PARAMS',\n  STREAM_ALREADY_RENDERED = 'STREAM_ALREADY_RENDERED',\n  STREAM_ALREADY_DISPOSED = 'STREAM_ALREADY_DISPOSED',\n  STREAM_STOPPING = 'STREAM_STOPPING',\n  CREATED_STREAM_STOPPING = 'CREATED_STREAM_STOPPING',\n  STREAM_RENDERING = 'STREAM_RENDERING',\n  // Error\n  STREAM_NOT_FOUND = 'STREAM_NOT_FOUND',\n  RENDER_INFO_NOT_FOUND = 'RENDER_INFO_NOT_FOUND',\n  DISPOSE_INFO_NOT_FOUND = 'DISPOSE_INFO_NOT_FOUND',\n  RENDERER_NOT_FOUND = 'RENDERER_NOT_FOUND',\n  CREATE_STREAM_FAIL = 'CREATE_STREAM_FAIL',\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @private\n * Call Id will change during the call for at least 1 time\n * This is to avoid async bug that call id has been changed during an async-await function\n * but the function still uses stale call id to access state\n */\nexport class CallIdHistory {\n  private _callIdHistory = new Map<string, string>();\n  public updateCallIdHistory(newCallId: string, oldCallId: string): void {\n    // callId for a call can fluctuate between some set of values.\n    // But if a newCallId already exists, and maps to different call, we're in trouble.\n    // This can only happen if a callId is reused across two distinct calls.\n    const existing = this._callIdHistory.get(newCallId);\n    if (existing !== undefined && this.latestCallId(newCallId) !== oldCallId) {\n      console.trace(`${newCallId} alredy exists and maps to ${existing}, which is not the same as ${oldCallId}`);\n    }\n\n    // The latest callId never maps to another callId.\n    this._callIdHistory.delete(newCallId);\n    this._callIdHistory.set(oldCallId, newCallId);\n  }\n  public latestCallId(callId: string): string {\n    let latest = callId;\n    /* eslint no-constant-condition: [\"error\", { \"checkLoops\": false }] */\n    while (true) {\n      const newer = this._callIdHistory.get(latest);\n      if (newer === undefined) {\n        break;\n      }\n      latest = newer;\n    }\n    return latest;\n  }\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { RemoteParticipant as SdkRemoteParticipant, RemoteVideoStream as SdkRemoteVideoStream, LocalVideoStream as SdkLocalVideoStream, VideoStreamRendererView } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { TeamsCaptionsInfo } from '@azure/communication-calling';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { CallState, RemoteParticipantState as DeclarativeRemoteParticipant, RemoteVideoStreamState as DeclarativeRemoteVideoStream, LocalVideoStreamState as DeclarativeLocalVideoStream, IncomingCallState as DeclarativeIncomingCall, VideoStreamRendererViewState as DeclarativeVideoStreamRendererView } from './CallClientState';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsInfo } from './CallClientState';\nimport { CallCommon, IncomingCallCommon } from './BetaToStableTypes';\n\n/* @conditional-compile-remove(video-background-effects) */ /* @conditional-compile-remove(optimal-video-count) */\nimport { Features } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoEffectName } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport { LocalVideoStreamVideoEffectsState } from './CallClientState';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHand } from '@azure/communication-calling';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHandState } from './CallClientState';\n\n/**\n * @private\n */\nexport function convertSdkLocalStreamToDeclarativeLocalStream(stream: SdkLocalVideoStream): DeclarativeLocalVideoStream {\n  /* @conditional-compile-remove(video-background-effects) */\n  const localVideoStreamEffectsAPI = stream.feature(Features.VideoEffects);\n  return {\n    source: stream.source,\n    mediaStreamType: stream.mediaStreamType,\n    view: undefined,\n    /* @conditional-compile-remove(video-background-effects) */\n    videoEffects: convertFromSDKToDeclarativeVideoStreamVideoEffects(localVideoStreamEffectsAPI.activeEffects)\n  };\n}\n\n/**\n * @private\n */\nexport function convertSdkRemoteStreamToDeclarativeRemoteStream(stream: SdkRemoteVideoStream): DeclarativeRemoteVideoStream {\n  return {\n    id: stream.id,\n    mediaStreamType: stream.mediaStreamType,\n    isAvailable: stream.isAvailable,\n    view: undefined,\n    streamSize: stream.size\n  };\n}\n\n/**\n * @private\n */\nexport function convertSdkParticipantToDeclarativeParticipant(participant: SdkRemoteParticipant): DeclarativeRemoteParticipant {\n  const declarativeVideoStreams: {\n    [key: number]: DeclarativeRemoteVideoStream;\n  } = {};\n  for (const videoStream of participant.videoStreams) {\n    declarativeVideoStreams[videoStream.id] = convertSdkRemoteStreamToDeclarativeRemoteStream(videoStream);\n  }\n  return {\n    identifier: participant.identifier,\n    displayName: participant.displayName,\n    state: participant.state,\n    callEndReason: participant.callEndReason,\n    videoStreams: declarativeVideoStreams,\n    isMuted: participant.isMuted,\n    isSpeaking: participant.isSpeaking,\n    /* @conditional-compile-remove(raise-hand) */\n    raisedHand: undefined\n  };\n}\n\n/**\n * @private\n *\n * Note at the time of writing only one LocalVideoStream is supported by the SDK.\n */\nexport function convertSdkCallToDeclarativeCall(call: CallCommon): CallState {\n  const declarativeRemoteParticipants: {\n    [key: string]: DeclarativeRemoteParticipant;\n  } = {};\n  call.remoteParticipants.forEach((participant: SdkRemoteParticipant) => {\n    declarativeRemoteParticipants[toFlatCommunicationIdentifier(participant.identifier)] = convertSdkParticipantToDeclarativeParticipant(participant);\n  });\n  return {\n    id: call.id,\n    callerInfo: call.callerInfo,\n    state: call.state,\n    callEndReason: call.callEndReason,\n    diagnostics: {\n      network: {\n        latest: {}\n      },\n      media: {\n        latest: {}\n      }\n    },\n    direction: call.direction,\n    isMuted: call.isMuted,\n    isScreenSharingOn: call.isScreenSharingOn,\n    localVideoStreams: call.localVideoStreams.map(convertSdkLocalStreamToDeclarativeLocalStream),\n    remoteParticipants: declarativeRemoteParticipants,\n    remoteParticipantsEnded: {},\n    recording: {\n      isRecordingActive: false\n    },\n    /* @conditional-compile-remove(raise-hand) */\n    raiseHand: {\n      raisedHands: []\n    },\n    transcription: {\n      isTranscriptionActive: false\n    },\n    screenShareRemoteParticipant: undefined,\n    startTime: new Date(),\n    endTime: undefined,\n    /* @conditional-compile-remove(rooms) */\n    role: call.role,\n    /* @conditional-compile-remove(close-captions) */\n    captionsFeature: {\n      captions: [],\n      supportedSpokenLanguages: [],\n      supportedCaptionLanguages: [],\n      currentCaptionLanguage: '',\n      currentSpokenLanguage: '',\n      isCaptionsFeatureActive: false,\n      startCaptionsInProgress: false\n    },\n    /* @conditional-compile-remove(call-transfer) */\n    transfer: {\n      acceptedTransfers: {}\n    },\n    /* @conditional-compile-remove(optimal-video-count) */\n    optimalVideoCount: {\n      maxRemoteVideoStreams: call.feature(Features.OptimalVideoCount).optimalVideoCount\n    }\n  };\n}\n\n/**\n * @private\n */\nexport function convertSdkIncomingCallToDeclarativeIncomingCall(call: IncomingCallCommon): DeclarativeIncomingCall {\n  return {\n    id: call.id,\n    callerInfo: call.callerInfo,\n    startTime: new Date(),\n    endTime: undefined\n  };\n}\n\n/**\n * @private\n */\nexport function convertFromSDKToDeclarativeVideoStreamRendererView(view: VideoStreamRendererView): DeclarativeVideoStreamRendererView {\n  return {\n    scalingMode: view.scalingMode,\n    isMirrored: view.isMirrored,\n    target: view.target\n  };\n}\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * @private\n */\nexport function convertFromSDKToCaptionInfoState(caption: TeamsCaptionsInfo): CaptionsInfo {\n  return {\n    ...caption\n  };\n}\n\n/* @conditional-compile-remove(video-background-effects) */\n/** @private */\nexport function convertFromSDKToDeclarativeVideoStreamVideoEffects(videoEffects: VideoEffectName[]): LocalVideoStreamVideoEffectsState {\n  return {\n    activeEffects: videoEffects\n  };\n}\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * @private\n */\nexport function convertFromSDKToRaisedHandState(raisedHand: RaisedHand): RaisedHandState {\n  return {\n    raisedHandOrderPosition: raisedHand.order\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CommunicationIdentifierKind } from '@azure/communication-common';\nimport { AudioDeviceInfo, DeviceAccess, DominantSpeakersInfo, ScalingMode, VideoDeviceInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHand } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangeInfo, ParticipantCapabilities } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { TeamsCaptionsInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\nimport { ParticipantRole } from '@azure/communication-calling';\nimport { AzureLogger, createClientLogger, getLogLevel } from '@azure/logger';\nimport EventEmitter from 'events';\nimport { enableMapSet, enablePatches, Patch, produce } from 'immer';\nimport { CallEndReason, CallState as CallStatus, RemoteParticipantState as RemoteParticipantStatus } from '@azure/communication-calling';\nimport { _safeJSONStringify, toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { CallState, CallClientState, LocalVideoStreamState, RemoteParticipantState, RemoteVideoStreamState, IncomingCallState, VideoStreamRendererViewState, CallAgentState, CallErrors, CallErrorTarget, CallError } from './CallClientState';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsInfo } from './CallClientState';\n/* @conditional-compile-remove(call-transfer) */\nimport { AcceptedTransfer } from './CallClientState';\nimport { callingStatefulLogger } from './Logger';\nimport { CallIdHistory } from './CallIdHistory';\n/* @conditional-compile-remove(video-background-effects) */\nimport { LocalVideoStreamVideoEffectsState } from './CallClientState';\n/* @conditional-compile-remove(close-captions) */\nimport { convertFromSDKToCaptionInfoState } from './Converter';\n/* @conditional-compile-remove(raise-hand) */\nimport { convertFromSDKToRaisedHandState } from './Converter';\nenableMapSet();\n// Needed to generate state diff for verbose logging.\nenablePatches();\n\n// TODO: How can we make this configurable?\n/**\n * @private\n */\nexport const MAX_CALL_HISTORY_LENGTH = 10;\n\n/**\n * @private\n */\nexport class CallContext {\n  private _logger: AzureLogger;\n  private _state: CallClientState;\n  private _emitter: EventEmitter;\n  private _atomicId: number;\n  private _callIdHistory: CallIdHistory = new CallIdHistory();\n  constructor(userId: CommunicationIdentifierKind, maxListeners = 50) {\n    this._logger = createClientLogger('communication-react:calling-context');\n    this._state = {\n      calls: {},\n      callsEnded: {},\n      incomingCalls: {},\n      incomingCallsEnded: {},\n      deviceManager: {\n        isSpeakerSelectionAvailable: false,\n        cameras: [],\n        microphones: [],\n        speakers: [],\n        unparentedViews: []\n      },\n      callAgent: undefined,\n      userId: userId,\n      latestErrors: ({} as CallErrors)\n    };\n    this._emitter = new EventEmitter();\n    this._emitter.setMaxListeners(maxListeners);\n    this._atomicId = 0;\n  }\n  public getState(): CallClientState {\n    return this._state;\n  }\n  public modifyState(modifier: (draft: CallClientState) => void): void {\n    const priorState = this._state;\n    this._state = produce(this._state, modifier, (patches: Patch[]) => {\n      if (getLogLevel() === 'verbose') {\n        // Log to `info` because AzureLogger.verbose() doesn't show up in console.\n        this._logger.info(`State change: ${_safeJSONStringify(patches)}`);\n      }\n    });\n    if (this._state !== priorState) {\n      this._emitter.emit('stateChanged', this._state);\n    }\n  }\n  public onStateChange(handler: (state: CallClientState) => void): void {\n    this._emitter.on('stateChanged', handler);\n  }\n  public offStateChange(handler: (state: CallClientState) => void): void {\n    this._emitter.off('stateChanged', handler);\n  }\n\n  // Disposing of the CallAgentDeclarative will not clear the state. If we create a new CallAgentDeclarative, we should\n  // make sure the state is clean because any left over state (if previous CallAgentDeclarative was disposed) may be\n  // invalid.\n  public clearCallRelatedState(): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.calls = {};\n      draft.incomingCalls = {};\n      draft.callsEnded = {};\n      draft.incomingCallsEnded = {};\n    });\n  }\n  public setCallAgent(callAgent: CallAgentState): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.callAgent = callAgent;\n    });\n  }\n  public setCall(call: CallState): void {\n    this.modifyState((draft: CallClientState) => {\n      const latestCallId = this._callIdHistory.latestCallId(call.id);\n      const existingCall = draft.calls[latestCallId];\n      if (existingCall) {\n        existingCall.callerInfo = call.callerInfo;\n        existingCall.state = call.state;\n        existingCall.callEndReason = call.callEndReason;\n        existingCall.direction = call.direction;\n        existingCall.isMuted = call.isMuted;\n        existingCall.isScreenSharingOn = call.isScreenSharingOn;\n        existingCall.localVideoStreams = call.localVideoStreams;\n        existingCall.remoteParticipants = call.remoteParticipants;\n        existingCall.transcription.isTranscriptionActive = call.transcription.isTranscriptionActive;\n        /* @conditional-compile-remove(optimal-video-count) */\n        existingCall.optimalVideoCount.maxRemoteVideoStreams = call.optimalVideoCount.maxRemoteVideoStreams;\n        existingCall.recording.isRecordingActive = call.recording.isRecordingActive;\n        /* @conditional-compile-remove(raise-hand) */\n        existingCall.raiseHand.raisedHands = call.raiseHand.raisedHands;\n        /* @conditional-compile-remove(raise-hand) */\n        existingCall.raiseHand.localParticipantRaisedHand = call.raiseHand.localParticipantRaisedHand;\n        /* @conditional-compile-remove(rooms) */\n        existingCall.role = call.role;\n        // We don't update the startTime and endTime if we are updating an existing active call\n        /* @conditional-compile-remove(close-captions) */\n        existingCall.captionsFeature.currentSpokenLanguage = call.captionsFeature.currentSpokenLanguage;\n        /* @conditional-compile-remove(close-captions) */\n        existingCall.captionsFeature.currentCaptionLanguage = call.captionsFeature.currentCaptionLanguage;\n      } else {\n        draft.calls[latestCallId] = call;\n      }\n    });\n  }\n  public removeCall(callId: string): void {\n    this.modifyState((draft: CallClientState) => {\n      delete draft.calls[this._callIdHistory.latestCallId(callId)];\n    });\n  }\n  public setCallEnded(callId: string, callEndReason: CallEndReason | undefined): void {\n    const latestCallId = this._callIdHistory.latestCallId(callId);\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[latestCallId];\n      if (call) {\n        call.endTime = new Date();\n        call.callEndReason = callEndReason;\n        delete draft.calls[latestCallId];\n        // Performance note: This loop should run only once because the number of entries\n        // is never allowed to exceed MAX_CALL_HISTORY_LENGTH. A loop is used for correctness.\n        while (Object.keys(draft.callsEnded).length >= MAX_CALL_HISTORY_LENGTH) {\n          delete draft.callsEnded[findOldestCallEnded(draft.callsEnded)];\n        }\n        draft.callsEnded[latestCallId] = call;\n      }\n    });\n  }\n  public setCallState(callId: string, state: CallStatus): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.state = state;\n      }\n    });\n  }\n  public setCallId(newCallId: string, oldCallId: string): void {\n    this._callIdHistory.updateCallIdHistory(newCallId, oldCallId);\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[oldCallId];\n      if (call) {\n        call.id = newCallId;\n        delete draft.calls[oldCallId];\n        draft.calls[newCallId] = call;\n      }\n    });\n  }\n  public setCallIsScreenSharingOn(callId: string, isScreenSharingOn: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.isScreenSharingOn = isScreenSharingOn;\n      }\n    });\n  }\n  public setCallRemoteParticipants(callId: string, addRemoteParticipant: RemoteParticipantState[], removeRemoteParticipant: string[]): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        removeRemoteParticipant.forEach((id: string) => {\n          delete call.remoteParticipants[id];\n        });\n        addRemoteParticipant.forEach((participant: RemoteParticipantState) => {\n          call.remoteParticipants[toFlatCommunicationIdentifier(participant.identifier)] = participant;\n        });\n        // TODO: need to remove after contentSharingRole avaible in WebCalling SDK.\n      }\n    });\n  }\n  public setCallRemoteParticipantsEnded(callId: string, addRemoteParticipant: RemoteParticipantState[], removeRemoteParticipant: string[]): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        removeRemoteParticipant.forEach((id: string) => {\n          delete call.remoteParticipantsEnded[id];\n        });\n        addRemoteParticipant.forEach((participant: RemoteParticipantState) => {\n          call.remoteParticipantsEnded[toFlatCommunicationIdentifier(participant.identifier)] = participant;\n        });\n      }\n    });\n  }\n  public setCallLocalVideoStream(callId: string, streamsAdded: LocalVideoStreamState[], streamsRemoved: LocalVideoStreamState[]): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        for (const removedStream of streamsRemoved) {\n          const index = call.localVideoStreams.findIndex(i => i.mediaStreamType === removedStream.mediaStreamType);\n          if (index > -1) {\n            call.localVideoStreams.splice(index, 1);\n          }\n        }\n        for (const addedStream of streamsAdded) {\n          const index = call.localVideoStreams.findIndex(i => i.mediaStreamType === addedStream.mediaStreamType);\n          if (index > -1) {\n            call.localVideoStreams[index] = addedStream;\n          } else {\n            call.localVideoStreams.push(addedStream);\n          }\n        }\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  public setCallLocalVideoStreamVideoEffects(callId: string, videoEffects: LocalVideoStreamVideoEffectsState): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const stream = call.localVideoStreams?.find(i => i.mediaStreamType === 'Video');\n        if (stream) {\n          stream.videoEffects = videoEffects;\n        }\n      }\n    });\n  }\n  public setCallIsMicrophoneMuted(callId: string, isMicrophoneMuted: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.isMuted = isMicrophoneMuted;\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\n  public setRole(callId: string, role: ParticipantRole): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.role = role;\n      }\n    });\n  }\n  public setCallDominantSpeakers(callId: string, dominantSpeakers: DominantSpeakersInfo): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.dominantSpeakers = dominantSpeakers;\n      }\n    });\n  }\n  public setCallRecordingActive(callId: string, isRecordingActive: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.recording.isRecordingActive = isRecordingActive;\n      }\n    });\n  }\n  /* @conditional-compile-remove(raise-hand) */\n  public setCallRaisedHands(callId: string, raisedHands: RaisedHand[]): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.raiseHand.raisedHands = raisedHands.map(raisedHand => {\n          return convertFromSDKToRaisedHandState(raisedHand);\n        });\n        const raisedHand = raisedHands.find(raisedHand => toFlatCommunicationIdentifier(raisedHand.identifier) === toFlatCommunicationIdentifier(this._state.userId));\n        if (raisedHand) {\n          call.raiseHand.localParticipantRaisedHand = convertFromSDKToRaisedHandState(raisedHand);\n        } else {\n          call.raiseHand.localParticipantRaisedHand = undefined;\n        }\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(raise-hand) */\n  public setParticipantIsRaisedHand(callId: string, participantKey: string, raisedHand: RaisedHand | undefined): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          participant.raisedHand = raisedHand ? convertFromSDKToRaisedHandState(raisedHand) : raisedHand;\n        }\n      }\n    });\n  }\n  public setCallTranscriptionActive(callId: string, isTranscriptionActive: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.transcription.isTranscriptionActive = isTranscriptionActive;\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(capabilities) */\n  public setCapabilities(callId: string, capabilities: ParticipantCapabilities, capabilitiesChangeInfo: CapabilitiesChangeInfo): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.capabilitiesFeature = {\n          capabilities,\n          latestCapabilitiesChangeInfo: capabilitiesChangeInfo\n        };\n      }\n    });\n  }\n  public setCallScreenShareParticipant(callId: string, participantKey: string | undefined): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.screenShareRemoteParticipant = participantKey;\n      }\n    });\n  }\n  public setLocalVideoStreamRendererView(callId: string, localVideoMediaStreamType: string, view: VideoStreamRendererViewState | undefined): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const localVideoStream = call.localVideoStreams.find(localVideoStream => localVideoStream.mediaStreamType === localVideoMediaStreamType);\n        if (localVideoStream) {\n          localVideoStream.view = view;\n        }\n      }\n    });\n  }\n  public setParticipantState(callId: string, participantKey: string, state: RemoteParticipantStatus): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          participant.state = state;\n        }\n      }\n    });\n  }\n  public setParticipantIsMuted(callId: string, participantKey: string, muted: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          participant.isMuted = muted;\n        }\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(optimal-video-count) */\n  public setOptimalVideoCount(callId: string, optimalVideoCount: number): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.optimalVideoCount.maxRemoteVideoStreams = optimalVideoCount;\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(rooms) */\n  public setParticipantRole(callId: string, participantKey: string, role: ParticipantRole): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          participant.role = role;\n        }\n      }\n    });\n  }\n  public setParticipantDisplayName(callId: string, participantKey: string, displayName: string): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          participant.displayName = displayName;\n        }\n      }\n    });\n  }\n  public setParticipantIsSpeaking(callId: string, participantKey: string, isSpeaking: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          participant.isSpeaking = isSpeaking;\n        }\n      }\n    });\n  }\n  public setParticipantVideoStream(callId: string, participantKey: string, stream: RemoteVideoStreamState): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          // Set is called by subscriber will not modify any rendered stream so if there is existing stream only\n          // modify the values that subscriber has access to.\n          const existingStream = participant.videoStreams[stream.id];\n          if (existingStream) {\n            existingStream.isAvailable = stream.isAvailable;\n            existingStream.mediaStreamType = stream.mediaStreamType;\n          } else {\n            participant.videoStreams[stream.id] = stream;\n          }\n        }\n      }\n    });\n  }\n  public setRemoteVideoStreamIsAvailable(callId: string, participantKey: string, streamId: number, isAvailable: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          const stream = participant.videoStreams[streamId];\n          if (stream) {\n            stream.isAvailable = isAvailable;\n          }\n        }\n      }\n    });\n  }\n  public setRemoteVideoStreamSize(callId: string, participantKey: string, streamId: number, size: {\n    width: number;\n    height: number;\n  }): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          const stream = participant.videoStreams[streamId];\n          if (stream) {\n            stream.streamSize = size;\n          }\n        }\n      }\n    });\n  }\n  public setRemoteVideoStreams(callId: string, participantKey: string, addRemoteVideoStream: RemoteVideoStreamState[], removeRemoteVideoStream: number[]): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          for (const id of removeRemoteVideoStream) {\n            delete participant.videoStreams[id];\n          }\n          for (const newStream of addRemoteVideoStream) {\n            // This should only be called by the subscriber and some properties are add by other components so if the\n            // stream already exists, only update the values that subscriber knows about.\n            const stream = participant.videoStreams[newStream.id];\n            if (stream) {\n              stream.mediaStreamType = newStream.mediaStreamType;\n              stream.isAvailable = newStream.isAvailable;\n            } else {\n              participant.videoStreams[newStream.id] = newStream;\n            }\n          }\n        }\n      }\n    });\n  }\n  public setRemoteVideoStreamRendererView(callId: string, participantKey: string, streamId: number, view: VideoStreamRendererViewState | undefined): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          const stream = participant.videoStreams[streamId];\n          if (stream) {\n            stream.view = view;\n          }\n        }\n      }\n    });\n  }\n  public setRemoteVideoStreamViewScalingMode(callId: string, participantKey: string, streamId: number, scalingMode: ScalingMode): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const participant = call.remoteParticipants[participantKey];\n        if (participant) {\n          const stream = participant.videoStreams[streamId];\n          if (stream && stream.view) {\n            stream.view.scalingMode = scalingMode;\n          }\n        }\n      }\n    });\n  }\n  public setIncomingCall(call: IncomingCallState): void {\n    this.modifyState((draft: CallClientState) => {\n      const existingCall = draft.incomingCalls[call.id];\n      if (existingCall) {\n        existingCall.callerInfo = call.callerInfo;\n      } else {\n        draft.incomingCalls[call.id] = call;\n      }\n    });\n  }\n  public removeIncomingCall(callId: string): void {\n    this.modifyState((draft: CallClientState) => {\n      delete draft.incomingCalls[callId];\n    });\n  }\n  public setIncomingCallEnded(callId: string, callEndReason: CallEndReason | undefined): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.incomingCalls[callId];\n      if (call) {\n        call.endTime = new Date();\n        call.callEndReason = callEndReason;\n        delete draft.incomingCalls[callId];\n        // Performance note: This loop should run only once because the number of entries\n        // is never allowed to exceed MAX_CALL_HISTORY_LENGTH. A loop is used for correctness.\n        while (Object.keys(draft.incomingCallsEnded).length >= MAX_CALL_HISTORY_LENGTH) {\n          delete draft.incomingCallsEnded[findOldestCallEnded(draft.incomingCallsEnded)];\n        }\n        draft.incomingCallsEnded[callId] = call;\n      }\n    });\n  }\n  public setDeviceManagerIsSpeakerSelectionAvailable(isSpeakerSelectionAvailable: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.deviceManager.isSpeakerSelectionAvailable = isSpeakerSelectionAvailable;\n    });\n  }\n  public setDeviceManagerSelectedMicrophone(selectedMicrophone?: AudioDeviceInfo): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.deviceManager.selectedMicrophone = selectedMicrophone;\n    });\n  }\n  public setDeviceManagerSelectedSpeaker(selectedSpeaker?: AudioDeviceInfo): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.deviceManager.selectedSpeaker = selectedSpeaker;\n    });\n  }\n  public setDeviceManagerSelectedCamera(selectedCamera?: VideoDeviceInfo): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.deviceManager.selectedCamera = selectedCamera;\n    });\n  }\n  public setDeviceManagerCameras(cameras: VideoDeviceInfo[]): void {\n    this.modifyState((draft: CallClientState) => {\n      /**\n       * SDK initializes cameras with one dummy camera with value { id: 'camera:id', name: '', deviceType: 'USBCamera' } immediately after\n       * camera permissions are granted. So selectedCamera will have this value before the actual cameras are obtained. Therefore we should reset\n       * selectedCamera to the first camera when there are cameras AND when current selectedCamera does not exist in the new array of cameras *\n       */\n      if (cameras.length > 0 && !cameras.some(camera => camera.id === draft.deviceManager.selectedCamera?.id)) {\n        draft.deviceManager.selectedCamera = cameras[0];\n      }\n      draft.deviceManager.cameras = cameras;\n    });\n  }\n  public setDeviceManagerMicrophones(microphones: AudioDeviceInfo[]): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.deviceManager.microphones = microphones;\n    });\n  }\n  public setDeviceManagerSpeakers(speakers: AudioDeviceInfo[]): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.deviceManager.speakers = speakers;\n    });\n  }\n  public setDeviceManagerDeviceAccess(deviceAccess: DeviceAccess): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.deviceManager.deviceAccess = deviceAccess;\n    });\n  }\n  public setDeviceManagerUnparentedView(localVideoStream: LocalVideoStreamState, view: VideoStreamRendererViewState | undefined): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.deviceManager.unparentedViews.push({\n        source: localVideoStream.source,\n        mediaStreamType: localVideoStream.mediaStreamType,\n        view: view\n      });\n    });\n  }\n  public deleteDeviceManagerUnparentedView(localVideoStream: LocalVideoStreamState): void {\n    this.modifyState((draft: CallClientState) => {\n      const foundIndex = draft.deviceManager.unparentedViews.findIndex(stream => stream.mediaStreamType === localVideoStream.mediaStreamType);\n      if (foundIndex !== -1) {\n        draft.deviceManager.unparentedViews.splice(foundIndex, 1);\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  public setDeviceManagerUnparentedViewVideoEffects(localVideoStream: LocalVideoStreamState, videoEffects: LocalVideoStreamVideoEffectsState): void {\n    this.modifyState((draft: CallClientState) => {\n      const foundIndex = draft.deviceManager.unparentedViews.findIndex(stream => stream.mediaStreamType === localVideoStream.mediaStreamType);\n      if (foundIndex !== -1) {\n        draft.deviceManager.unparentedViews[foundIndex].videoEffects = videoEffects;\n      }\n    });\n  }\n  public getAndIncrementAtomicId(): number {\n    const id = this._atomicId;\n    this._atomicId++;\n    return id;\n  }\n  /* @conditional-compile-remove(close-captions) */\n  private processNewCaption(captions: CaptionsInfo[], newCaption: CaptionsInfo): void {\n    // going through current captions to find the last caption said by the same speaker, remove that caption if it's partial and replace with the new caption\n    for (let index = captions.length - 1; index >= 0; index--) {\n      const currentCaption = captions[index];\n      if (currentCaption && currentCaption.resultType !== 'Final' && currentCaption.speaker.identifier && newCaption.speaker.identifier && toFlatCommunicationIdentifier(currentCaption.speaker.identifier) === toFlatCommunicationIdentifier(newCaption.speaker.identifier)) {\n        captions.splice(index, 1);\n        break;\n      }\n    }\n    captions.push(newCaption);\n\n    // If the array length exceeds 50, remove the oldest caption\n    if (captions.length > 50) {\n      captions.shift();\n    }\n  }\n  /* @conditional-compile-remove(close-captions) */\n  public addCaption(callId: string, caption: TeamsCaptionsInfo): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        const currentCaptionLanguage = call.captionsFeature.currentCaptionLanguage;\n        if (caption.captionLanguage.toUpperCase() === currentCaptionLanguage.toUpperCase() || currentCaptionLanguage === '' || currentCaptionLanguage === undefined) {\n          this.processNewCaption(call.captionsFeature.captions, convertFromSDKToCaptionInfoState(caption));\n        }\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public clearCaptions(callId: string): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.captionsFeature.captions = [];\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  setIsCaptionActive(callId: string, isCaptionsActive: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.captionsFeature.isCaptionsFeatureActive = isCaptionsActive;\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  setStartCaptionsInProgress(callId: string, startCaptionsInProgress: boolean): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.captionsFeature.startCaptionsInProgress = startCaptionsInProgress;\n      }\n    });\n  }\n  /* @conditional-compile-remove(close-captions) */\n  setSelectedSpokenLanguage(callId: string, spokenLanguage: string): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.captionsFeature.currentSpokenLanguage = spokenLanguage;\n      }\n    });\n  }\n  /* @conditional-compile-remove(close-captions) */\n  setSelectedCaptionLanguage(callId: string, captionLanguage: string): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.captionsFeature.currentCaptionLanguage = captionLanguage;\n      }\n    });\n  }\n  /* @conditional-compile-remove(close-captions) */\n  setAvailableCaptionLanguages(callId: string, captionLanguages: string[]): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.captionsFeature.supportedCaptionLanguages = captionLanguages;\n      }\n    });\n  }\n  /* @conditional-compile-remove(close-captions) */\n  setAvailableSpokenLanguages(callId: string, spokenLanguages: string[]): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.captionsFeature.supportedSpokenLanguages = spokenLanguages;\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(call-transfer) */\n  setAcceptedTransfer(callId: string, acceptedTransfer: AcceptedTransfer): void {\n    this.modifyState((draft: CallClientState) => {\n      const call = draft.calls[this._callIdHistory.latestCallId(callId)];\n      if (call) {\n        call.transfer.acceptedTransfers[acceptedTransfer.callId] = acceptedTransfer;\n      }\n    });\n  }\n\n  /**\n   * Tees any errors encountered in an async function to the state.\n   *\n   * @param action Async function to execute.\n   * @param target The error target to tee error to.\n   * @returns Result of calling `f`. Also re-raises any exceptions thrown from `f`.\n   * @throws CallError. Exceptions thrown from `f` are tagged with the failed `target.\n   */\n  public withAsyncErrorTeedToState<Args extends unknown[], R>(action: (...args: Args) => Promise<R>, target: CallErrorTarget): (...args: Args) => Promise<R> {\n    return async (...args: Args): Promise<R> => {\n      try {\n        return await action(...args);\n      } catch (error) {\n        const callError = toCallError(target, error);\n        this.setLatestError(target, callError);\n        throw callError;\n      }\n    };\n  }\n\n  /**\n   * Tees any errors encountered in an function to the state.\n   *\n   * @param action Function to execute.\n   * @param target The error target to tee error to.\n   * @returns Result of calling `f`. Also re-raises any exceptions thrown from `f`.\n   * @throws CallError. Exceptions thrown from `f` are tagged with the failed `target.\n   */\n  public withErrorTeedToState<Args extends unknown[], R>(action: (...args: Args) => R, target: CallErrorTarget): (...args: Args) => R {\n    return (...args: Args): R => {\n      try {\n        callingStatefulLogger.info(`Calling stateful client target function called: ${target}`);\n        return action(...args);\n      } catch (error) {\n        const callError = toCallError(target, error);\n        this.setLatestError(target, callError);\n        throw callError;\n      }\n    };\n  }\n\n  /**\n   * Tees direct errors to state.\n   * @remarks\n   * This is typically used for errors that are caught and intended to be shown to the user.\n   *\n   * @param error The raw error to report.\n   * @param target The error target to tee error to.\n   *\n   * @private\n   */\n  public teeErrorToState = (error: Error, target: CallErrorTarget): void => {\n    const callError = toCallError(target, error);\n    this.setLatestError(target, callError);\n  };\n  private setLatestError(target: CallErrorTarget, error: CallError): void {\n    this.modifyState((draft: CallClientState) => {\n      draft.latestErrors[target] = error;\n    });\n  }\n}\nconst toCallError = (target: CallErrorTarget, error: unknown): CallError => {\n  if (error instanceof Error) {\n    return new CallError(target, error);\n  }\n  return new CallError(target, new Error((error as string)));\n};\nconst findOldestCallEnded = (calls: {\n  [key: string]: {\n    endTime?: Date;\n  };\n}): string => {\n  const callEntries = Object.entries(calls);\n  let [oldestCallId, oldestCall] = callEntries[0];\n  if (oldestCall.endTime === undefined) {\n    return oldestCallId;\n  }\n  for (const [callId, call] of callEntries.slice(1)) {\n    if (call.endTime === undefined) {\n      return callId;\n    }\n    if ((call.endTime?.getTime() ?? 0) < (oldestCall.endTime?.getTime() ?? 0)) {\n      [oldestCallId, oldestCall] = [callId, call];\n    }\n  }\n  return oldestCallId;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(close-captions) */\nimport { PropertyChangedEvent, TeamsCaptions, TeamsCaptionsHandler, TeamsCaptionsInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { CallContext } from './CallContext';\n/* @conditional-compile-remove(close-captions) */\nimport { CallIdRef } from './CallIdRef';\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * @private\n */\nexport class CaptionsSubscriber {\n  private _callIdRef: CallIdRef;\n  private _context: CallContext;\n  private _captions: TeamsCaptions;\n  constructor(callIdRef: CallIdRef, context: CallContext, captions: TeamsCaptions) {\n    this._callIdRef = callIdRef;\n    this._context = context;\n    this._captions = captions;\n    if (this._captions.isCaptionsFeatureActive) {\n      this._context.setIsCaptionActive(this._callIdRef.callId, this._captions.isCaptionsFeatureActive);\n    }\n    this._context.setAvailableSpokenLanguages(this._callIdRef.callId, this._captions.supportedSpokenLanguages);\n    if ('supportedCaptionLanguages' in this._captions) {\n      this._context.setAvailableCaptionLanguages(this._callIdRef.callId, this._captions.supportedCaptionLanguages);\n    }\n    this._context.setSelectedSpokenLanguage(this._callIdRef.callId, this._captions.activeSpokenLanguage);\n    this._context.setSelectedCaptionLanguage(this._callIdRef.callId, this._captions.activeCaptionLanguage);\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._captions.on('CaptionsActiveChanged', this.isCaptionsActiveChanged);\n    this._captions.on('CaptionsReceived', this.onCaptionsReceived);\n    this._captions.on('CaptionLanguageChanged', this.isCaptionLanguageChanged);\n    this._captions.on('SpokenLanguageChanged', this.isSpokenLanguageChanged);\n  };\n  public unsubscribe = (): void => {\n    this._captions.off('CaptionsActiveChanged', this.isCaptionsActiveChanged);\n    this._captions.off('CaptionsReceived', this.onCaptionsReceived);\n    this._captions.off('CaptionLanguageChanged', this.isCaptionLanguageChanged);\n    this._captions.off('SpokenLanguageChanged', this.isSpokenLanguageChanged);\n  };\n  private onCaptionsReceived: TeamsCaptionsHandler = (caption: TeamsCaptionsInfo): void => {\n    this._context.addCaption(this._callIdRef.callId, caption);\n  };\n  private isCaptionsActiveChanged: PropertyChangedEvent = (): void => {\n    this._context.setIsCaptionActive(this._callIdRef.callId, this._captions.isCaptionsFeatureActive);\n  };\n  private isCaptionLanguageChanged: PropertyChangedEvent = (): void => {\n    this._context.setSelectedCaptionLanguage(this._callIdRef.callId, this._captions.activeCaptionLanguage);\n  };\n  private isSpokenLanguageChanged: PropertyChangedEvent = (): void => {\n    this._context.setSelectedSpokenLanguage(this._callIdRef.callId, this._captions.activeSpokenLanguage);\n  };\n}\n\n// This is a placeholder to bypass CC of \"close-captions\", remove when move the feature to stable\nexport {};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoEffectErrorPayload, VideoEffectsFeature } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport { LocalVideoStreamState } from './CallClientState';\n/* @conditional-compile-remove(video-background-effects) */\nimport { CallContext } from './CallContext';\n/* @conditional-compile-remove(video-background-effects) */\nimport { CallIdRef } from './CallIdRef';\n/* @conditional-compile-remove(video-background-effects) */\nimport { convertFromSDKToDeclarativeVideoStreamVideoEffects } from './Converter';\n\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * Subscribes to a LocalVideoStream's video effects events and updates the call context appropriately.\n * @private\n */\nexport class LocalVideoStreamVideoEffectsSubscriber {\n  private _parent: CallIdRef | 'unparented';\n  private _context: CallContext;\n  private _localVideoStream: LocalVideoStreamState;\n  private _localVideoStreamEffectsAPI: VideoEffectsFeature;\n  constructor(args: {\n    /** Owner of the local video stream. This is either the Call (referenced by CallIdRef) or is the device manager's unparented view (referenced by 'unparented') */\n    parent: CallIdRef | 'unparented';\n    context: CallContext;\n    localVideoStream: LocalVideoStreamState;\n    localVideoStreamEffectsAPI: VideoEffectsFeature;\n  }) {\n    this._parent = args.parent;\n    this._context = args.context;\n    this._localVideoStream = args.localVideoStream;\n    this._localVideoStreamEffectsAPI = args.localVideoStreamEffectsAPI;\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._localVideoStreamEffectsAPI.on('effectsStarted', this.effectsStarted);\n    this._localVideoStreamEffectsAPI.on('effectsStopped', this.effectsStopped);\n    this._localVideoStreamEffectsAPI.on('effectsError', this.effectsError);\n  };\n  public unsubscribe = (): void => {\n    this._localVideoStreamEffectsAPI.off('effectsStarted', this.effectsStarted);\n    this._localVideoStreamEffectsAPI.off('effectsStopped', this.effectsStopped);\n    this._localVideoStreamEffectsAPI.off('effectsError', this.effectsError);\n  };\n  private effectsStarted = (): void => {\n    this.updateStatefulVideoEffects();\n  };\n  private effectsStopped = (): void => {\n    this.updateStatefulVideoEffects();\n  };\n  private effectsError = (error: VideoEffectErrorPayload): void => {\n    // When there is an error the effects have stopped. Ensure state is updated to reflect if effects are active or not.\n    this.updateStatefulVideoEffects();\n    this._context.teeErrorToState(new Error(error.message), 'VideoEffectsFeature.startEffects');\n  };\n  private updateStatefulVideoEffects = (): void => {\n    const statefulVideoEffects = convertFromSDKToDeclarativeVideoStreamVideoEffects(this._localVideoStreamEffectsAPI.activeEffects);\n    if (this._parent === 'unparented') {\n      this._context.setDeviceManagerUnparentedViewVideoEffects(this._localVideoStream, statefulVideoEffects);\n    } else {\n      this._context.setCallLocalVideoStreamVideoEffects(this._parent.callId, statefulVideoEffects);\n    }\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { RemoteVideoStream } from '@azure/communication-calling';\nimport { RemoteVideoStreamState } from './CallClientState';\nimport { CallContext } from './CallContext';\nimport { CallIdRef } from './CallIdRef';\n\n/**\n * @private\n */\nexport class RemoteVideoStreamSubscriber {\n  private _callIdRef: CallIdRef;\n  private _participantKey: string;\n  private _remoteVideoStream: RemoteVideoStream;\n  private _context: CallContext;\n  constructor(callIdRef: CallIdRef, participantKey: string, remoteVideoStream: RemoteVideoStream, context: CallContext) {\n    this._callIdRef = callIdRef;\n    this._participantKey = participantKey;\n    this._remoteVideoStream = remoteVideoStream;\n    this._context = context;\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._remoteVideoStream.on('isAvailableChanged', this.isAvailableChanged);\n    this._remoteVideoStream.on('sizeChanged', this.isSizeChanged);\n    this.checkAndUpdateScreenShareState();\n  };\n  public unsubscribe = (): void => {\n    this._remoteVideoStream.off('isAvailableChanged', this.isAvailableChanged);\n    this._remoteVideoStream.off('sizeChanged', this.isSizeChanged);\n  };\n  private includesActiveScreenShareStream = (streams: {\n    [key: number]: RemoteVideoStreamState;\n  }): boolean => {\n    for (const stream of Object.values(streams)) {\n      if (stream.mediaStreamType === 'ScreenSharing' && stream.isAvailable) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * Update the state with the active screen share stream. If there is an existing stream will overwrite it if this one\n   * is active (newer stream takes priority). If there is an existing stream and this one is set to unavailable, and the\n   * existing stream is different participant, then don't set the active screen share stream to undefined, else set it\n   * to undefined.\n   */\n  private checkAndUpdateScreenShareState = (): void => {\n    if (this._remoteVideoStream.mediaStreamType !== 'ScreenSharing') {\n      return;\n    }\n    if (this._remoteVideoStream.isAvailable) {\n      this._context.setCallScreenShareParticipant(this._callIdRef.callId, this._participantKey);\n      return;\n    }\n    const existingScreenShare = this._context.getState().calls[this._callIdRef.callId]?.screenShareRemoteParticipant;\n\n    // If somehow we end up with an event where a RemoteParticipant's ScreenShare stream is set to\n    // unavailable but there exists already another different participant actively sharing, and they are still\n    // sharing then this event shouldn't set the screenShareRemoteParticipant to undefined.\n    if (!existingScreenShare || existingScreenShare === this._participantKey) {\n      this._context.setCallScreenShareParticipant(this._callIdRef.callId, undefined);\n      return;\n    }\n    const streams = this._context.getState().calls[this._callIdRef.callId]?.remoteParticipants[existingScreenShare]?.videoStreams;\n    if (!streams) {\n      this._context.setCallScreenShareParticipant(this._callIdRef.callId, undefined);\n      return;\n    }\n\n    // If the existing ScreenShare that is not owned by the current RemoteParticipant is still active, don't\n    // overwrite it with undefined. So only overwrite if it is not active.\n    if (!this.includesActiveScreenShareStream(streams)) {\n      this._context.setCallScreenShareParticipant(this._callIdRef.callId, undefined);\n      return;\n    }\n  };\n  private isAvailableChanged = (): void => {\n    this._context.setRemoteVideoStreamIsAvailable(this._callIdRef.callId, this._participantKey, this._remoteVideoStream.id, this._remoteVideoStream.isAvailable);\n    this.checkAndUpdateScreenShareState();\n  };\n  private isSizeChanged = (): void => {\n    if (this._remoteVideoStream?.size.width === 0 && this._remoteVideoStream?.size.height === 0) {\n      return;\n    }\n    const streamSize = this._context.getState().calls[this._callIdRef.callId]?.remoteParticipants[this._participantKey]?.videoStreams[this._remoteVideoStream.id]?.streamSize;\n    const existingAspectRatio = streamSize ? streamSize.width / streamSize.height : undefined;\n    const newAspectRatio = this._remoteVideoStream?.size.width / this._remoteVideoStream?.size.height;\n    if (!streamSize || existingAspectRatio !== newAspectRatio) {\n      this._context.setRemoteVideoStreamSize(this._callIdRef.callId, this._participantKey, this._remoteVideoStream.id, this._remoteVideoStream.size);\n    }\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { MediaStreamType } from '@azure/communication-calling';\nimport { _logEvent } from '@internal/acs-ui-common';\nimport { callingStatefulLogger, EventNames } from './Logger';\n\n/**\n * helper function to manage logging for stream disposals\n *\n * @param eventName Name of event that occured when managing streams\n * @param streamLogInfo Data about the stream in the event\n * @returns\n */\nfunction _logDisposeStreamEvent(eventName: EventNames, streamLogInfo: {\n  callId?: string;\n  participantKey?: any;\n  streamId?: number | string;\n  streamType?: MediaStreamType;\n  streamEventType?: string;\n}): void {\n  switch (eventName) {\n    case EventNames.DISPOSE_STREAM_INVALID_PARAMS:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.DISPOSE_STREAM_INVALID_PARAMS,\n        level: 'warning',\n        message: 'Dispose View invalid combination of parameters.',\n        data: {\n          streamType: streamLogInfo.streamType\n        }\n      });\n      return;\n    case EventNames.START_DISPOSE_STREAM:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.START_DISPOSE_STREAM,\n        level: 'info',\n        message: 'Start disposing stream.',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.DISPOSE_INFO_NOT_FOUND:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.DISPOSE_INFO_NOT_FOUND,\n        level: 'error',\n        message: 'Cannot find render info when disposing stream.',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.STREAM_STOPPING:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.STREAM_STOPPING,\n        level: 'info',\n        message: 'Stream is currently marked as stopping, will continue if is local preview',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.DISPOSING_RENDERER:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.DISPOSING_RENDERER,\n        level: 'info',\n        message: 'Disposing view renderer.',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.RENDERER_NOT_FOUND:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.RENDERER_NOT_FOUND,\n        level: 'error',\n        message: 'Cannot find renderer when disposing stream.',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.STREAM_ALREADY_DISPOSED:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.STREAM_ALREADY_DISPOSED,\n        level: 'info',\n        message: 'Stream is already disposed.',\n        data: streamLogInfo\n      });\n      return;\n    default:\n      return;\n  }\n}\n\n/**\n * helper function to manage logging for local stream creations\n *\n * @param eventName Name of the event to occured when creating a local stream\n * @param streamLogInfo Data about the stream in the event\n * @param error that is thrown by caller\n * @returns\n */\nfunction _logCreateStreamEvent(eventName: string, streamLogInfo: {\n  callId?: string;\n  participantKey?: any;\n  streamId?: number | string;\n  streamType?: MediaStreamType;\n  streamEventType?: string;\n}, error?: unknown): void {\n  switch (eventName) {\n    case EventNames.CREATE_STREAM_INVALID_PARAMS:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.CREATE_STREAM_INVALID_PARAMS,\n        level: 'warning',\n        message: 'Create View invalid combination of parameters.',\n        data: {\n          streamType: streamLogInfo.streamType\n        }\n      });\n      return;\n    case EventNames.START_STREAM_RENDERING:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.START_STREAM_RENDERING,\n        level: 'info',\n        message: 'Start creating view for local video.',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.STREAM_NOT_FOUND:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.STREAM_NOT_FOUND,\n        level: 'error',\n        message: 'Stream not found in state.',\n        data: {\n          callId: streamLogInfo.callId\n        }\n      });\n      return;\n    case EventNames.STREAM_ALREADY_RENDERED:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.STREAM_ALREADY_RENDERED,\n        level: 'warning',\n        message: 'Stream is already rendered.',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.STREAM_RENDERING:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.STREAM_RENDERING,\n        level: 'warning',\n        message: 'Stream is rendering.',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.STREAM_STOPPING:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.STREAM_STOPPING,\n        level: 'warning',\n        message: 'Stream was marked as stopping by dispose view. Resetting state to \"Rendering\".',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.CREATE_STREAM_FAIL:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.CREATE_STREAM_FAIL,\n        level: 'error',\n        message: 'Failed to create view.',\n        data: {\n          error: error,\n          streamType: streamLogInfo.streamType,\n          callId: streamLogInfo.callId\n        }\n      });\n      return;\n    case EventNames.RENDER_INFO_NOT_FOUND:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.RENDER_INFO_NOT_FOUND,\n        level: 'error',\n        message: 'Cannot find render info after create the view. ',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.CREATED_STREAM_STOPPING:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.CREATED_STREAM_STOPPING,\n        level: 'warning',\n        message: 'Render info status is stopping, dispose renderer.',\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.VIEW_RENDER_SUCCEED:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.VIEW_RENDER_SUCCEED,\n        level: 'info',\n        message: `Successfully render the view.`,\n        data: streamLogInfo\n      });\n      return;\n    case EventNames.CREATING_VIEW:\n      _logEvent(callingStatefulLogger, {\n        name: EventNames.CREATING_VIEW,\n        level: 'info',\n        message: 'Start creating view for remote video.',\n        data: streamLogInfo\n      });\n      return;\n    default:\n      return;\n  }\n}\n\n/**\n * helper function to fire streamUtils logging events\n *\n * @param eventName Name of event from streamUtils\n * @param streamLogInfo informaiton about the event and who called it\n * @param error if any errors present will be added to message in logging\n */\nexport function _logStreamEvent(eventName: EventNames, streamLogInfo: {\n  callId?: string;\n  participantKey?: any;\n  streamId?: number | string;\n  streamType?: MediaStreamType;\n  streamEventType?: string;\n}, error?: unknown): void {\n  if (streamLogInfo.streamEventType === 'disposeViewLocal' || streamLogInfo.streamEventType === 'disposeViewRemote' || streamLogInfo.streamEventType === 'disposeViewUnparented') {\n    _logDisposeStreamEvent(eventName, streamLogInfo);\n  } else if (streamLogInfo.streamEventType === 'createViewLocal' || streamLogInfo.streamEventType === 'createViewRemote') {\n    _logCreateStreamEvent(eventName, streamLogInfo, error);\n  }\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CreateViewOptions, LocalVideoStream, RemoteVideoStream, VideoStreamRenderer, VideoStreamRendererView } from '@azure/communication-calling';\nimport { CommunicationIdentifierKind } from '@azure/communication-common';\nimport { LocalVideoStreamState, RemoteVideoStreamState } from './CallClientState';\nimport { CallContext } from './CallContext';\nimport { convertSdkLocalStreamToDeclarativeLocalStream, convertSdkRemoteStreamToDeclarativeRemoteStream, convertFromSDKToDeclarativeVideoStreamRendererView } from './Converter';\nimport { InternalCallContext } from './InternalCallContext';\nimport { toFlatCommunicationIdentifier, _logEvent } from '@internal/acs-ui-common';\nimport { EventNames } from './Logger';\nimport { _logStreamEvent } from './StreamUtilsLogging';\n\n/**\n * Return result from {@link StatefulCallClient.createView}.\n *\n * @public\n */\nexport type CreateViewResult = {\n  renderer: VideoStreamRenderer;\n  view: VideoStreamRendererView;\n};\nasync function createViewVideo(context: CallContext, internalContext: InternalCallContext, callId: string, stream?: RemoteVideoStreamState | LocalVideoStreamState, participantId?: CommunicationIdentifierKind | string, options?: CreateViewOptions): Promise<CreateViewResult | undefined> {\n  // we can only have 3 types of createView\n  let streamEventType: 'createViewLocal' | 'createViewRemote' | 'createViewUnparented';\n\n  // we will reuse these for local as well but we need to make sure the remote stream is passed in like before.\n\n  if (participantId) {\n    streamEventType = 'createViewRemote';\n  } else if (callId) {\n    streamEventType = 'createViewLocal';\n  } else {\n    // TODO update for when unparented view.\n    throw new Error('unparented createView not implemented yet here');\n    streamEventType = 'createViewUnparented';\n  }\n  const streamType = stream?.mediaStreamType;\n  const localStreamKey = (stream as LocalVideoStream).mediaStreamType;\n  const remoteStreamId = (stream as RemoteVideoStream).id;\n\n  // we want to check to see if there is a participantId this will tell us whether its a local stream or a remote one.\n  const participantKey = streamEventType === 'createViewRemote' && participantId ? typeof participantId === 'string' ? participantId : toFlatCommunicationIdentifier(participantId) : undefined;\n  const streamLogInfo = {\n    callId,\n    participantKey,\n    streamId: remoteStreamId ?? localStreamKey,\n    streamType,\n    streamEventType\n  };\n\n  // make different logging announcement based on whether or not we are starting a local or remote\n  _logStreamEvent(EventNames.CREATING_VIEW, streamLogInfo);\n\n  // if we have a participant Id and a stream get the remote info, else get the local render info from state.\n  const renderInfo = streamEventType === 'createViewRemote' && participantKey ? internalContext.getRemoteRenderInfoForParticipant(callId, participantKey, remoteStreamId) : internalContext.getLocalRenderInfo(callId, localStreamKey);\n  if (!renderInfo) {\n    _logStreamEvent(EventNames.STREAM_NOT_FOUND, streamLogInfo);\n    return;\n  }\n  if (renderInfo.status === 'Rendered') {\n    _logStreamEvent(EventNames.STREAM_ALREADY_RENDERED, streamLogInfo);\n    return;\n  }\n  if (renderInfo.status === 'Rendering') {\n    // Do not log to console here as this is a very common situation due to UI rerenders while\n    // the video rendering is in progress.\n    _logStreamEvent(EventNames.STREAM_RENDERING, streamLogInfo);\n    return;\n  }\n\n  // \"Stopping\" only happens if the stream was in \"rendering\" but `disposeView` was called.\n  // Now that `createView` has been re-called, we can flip the state back to \"rendering\".\n  if (renderInfo.status === 'Stopping') {\n    if (streamEventType === 'createViewRemote' && participantKey) {\n      _logStreamEvent(EventNames.STREAM_STOPPING, streamLogInfo);\n      internalContext.setRemoteRenderInfo(callId, participantKey, remoteStreamId, (renderInfo.stream as RemoteVideoStream), 'Rendering', renderInfo.renderer);\n    } else if (streamEventType === 'createViewLocal') {\n      _logStreamEvent(EventNames.STREAM_STOPPING, streamLogInfo);\n      internalContext.setLocalRenderInfo(callId, localStreamKey, (renderInfo.stream as LocalVideoStream), 'Rendering', renderInfo.renderer);\n    }\n    return;\n  }\n  const renderer = new VideoStreamRenderer(renderInfo.stream);\n  streamEventType === 'createViewRemote' && participantKey ? internalContext.setRemoteRenderInfo(callId, participantKey, remoteStreamId, (renderInfo.stream as RemoteVideoStream), 'Rendering', undefined) : internalContext.setLocalRenderInfo(callId, localStreamKey, (renderInfo.stream as LocalVideoStream), 'Rendering', renderer);\n  let view;\n  try {\n    view = await renderer.createView(options);\n  } catch (e) {\n    if (streamEventType === 'createViewRemote' && participantKey) {\n      _logStreamEvent(EventNames.CREATE_STREAM_FAIL, streamLogInfo);\n      internalContext.setRemoteRenderInfo(callId, participantKey, remoteStreamId, (renderInfo.stream as RemoteVideoStream), 'NotRendered', undefined);\n    } else if (streamEventType === 'createViewLocal') {\n      _logStreamEvent(EventNames.CREATE_STREAM_FAIL, streamLogInfo, e);\n      internalContext.setLocalRenderInfo(callId, localStreamKey, (renderInfo.stream as LocalVideoStream), 'NotRendered', undefined);\n    }\n    throw e;\n  }\n\n  // Since render could take some time, we need to check if the stream is still valid and if we received a signal to\n  // stop rendering.\n  const refreshedRenderInfo = streamEventType === 'createViewRemote' && participantKey ? internalContext.getRemoteRenderInfoForParticipant(callId, participantKey, remoteStreamId) : internalContext.getLocalRenderInfo(callId, localStreamKey);\n  if (!refreshedRenderInfo) {\n    // RenderInfo was removed. This should not happen unless stream was removed from the call so dispose the renderer\n    // and clean up the state.\n    _logStreamEvent(EventNames.RENDER_INFO_NOT_FOUND, streamLogInfo);\n    renderer.dispose();\n    streamEventType === 'createViewRemote' && participantKey ? context.setRemoteVideoStreamRendererView(callId, participantKey, remoteStreamId, undefined) : context.setLocalVideoStreamRendererView(callId, localStreamKey, undefined);\n    return;\n  }\n  if (refreshedRenderInfo.status === 'Stopping') {\n    // Stop render was called on this stream after we had started rendering. We will dispose this view and do not\n    // put the view into the state.\n    streamEventType === 'createViewRemote';\n    _logStreamEvent(EventNames.CREATED_STREAM_STOPPING, streamLogInfo);\n    renderer.dispose();\n    if (streamEventType === 'createViewRemote' && participantKey) {\n      internalContext.setRemoteRenderInfo(callId, participantKey, remoteStreamId, (refreshedRenderInfo.stream as RemoteVideoStream), 'NotRendered', undefined);\n      context.setRemoteVideoStreamRendererView(callId, participantKey, remoteStreamId, undefined);\n    } else if (streamEventType === 'createViewLocal') {\n      internalContext.setLocalRenderInfo(callId, localStreamKey, (refreshedRenderInfo.stream as LocalVideoStream), 'NotRendered', undefined);\n      context.setLocalVideoStreamRendererView(callId, localStreamKey, undefined);\n    }\n    return;\n  }\n\n  // Else the stream still exists and status is not telling us to stop rendering. Complete the render process by\n  // updating the state.\n  if (streamEventType === 'createViewRemote' && participantKey) {\n    internalContext.setRemoteRenderInfo(callId, participantKey, remoteStreamId, (refreshedRenderInfo.stream as RemoteVideoStream), 'Rendered', renderer);\n    context.setRemoteVideoStreamRendererView(callId, participantKey, remoteStreamId, convertFromSDKToDeclarativeVideoStreamRendererView(view));\n    _logStreamEvent(EventNames.VIEW_RENDER_SUCCEED, streamLogInfo);\n  } else if (streamEventType === 'createViewLocal') {\n    internalContext.setLocalRenderInfo(callId, localStreamKey, (refreshedRenderInfo.stream as LocalVideoStream), 'Rendered', renderer);\n    context.setLocalVideoStreamRendererView(callId, localStreamKey, convertFromSDKToDeclarativeVideoStreamRendererView(view));\n    _logStreamEvent(EventNames.VIEW_RENDER_SUCCEED, streamLogInfo);\n  }\n  return {\n    renderer,\n    view\n  };\n}\nasync function createViewUnparentedVideo(context: CallContext, internalContext: InternalCallContext, stream: LocalVideoStreamState, options?: CreateViewOptions): Promise<CreateViewResult | undefined> {\n  const renderInfo = internalContext.getUnparentedRenderInfo(stream);\n  if (renderInfo && renderInfo.status === 'Rendered') {\n    console.warn('Unparented LocalVideoStream is already rendered');\n    return;\n  }\n  if (renderInfo && renderInfo.status === 'Rendering') {\n    // Do not log to console here as this is a very common situation due to UI rerenders while\n    // the video rendering is in progress.\n    return;\n  }\n  if (renderInfo && renderInfo.status === 'Stopping') {\n    console.warn('Unparented LocalVideoStream is in the middle of stopping');\n    return;\n  }\n  const localVideoStream = new LocalVideoStream(stream.source);\n  const renderer = new VideoStreamRenderer(localVideoStream);\n  internalContext.setUnparentedRenderInfo(stream, localVideoStream, 'Rendering', undefined);\n  let view: VideoStreamRendererView;\n  try {\n    view = await renderer.createView(options);\n  } catch (e) {\n    // Special case for unparented views. Since they are not tied to anything and created by us based on the calls to\n    // this function we'll delete it to clean up the data since keeping it around doesn't help us and if developer wants\n    // to create a new view they can check that the view is not rendered and call this function again.\n    internalContext.deleteUnparentedRenderInfo(stream);\n    throw e;\n  }\n\n  // Since render could take some time, we need to check if the stream is still valid and if we received a signal to\n  // stop rendering.\n  const refreshedRenderInfo = internalContext.getUnparentedRenderInfo(stream);\n  if (!refreshedRenderInfo) {\n    // Unparented stream's RenderInfo was deleted. Currently this shouldn't happen but if it does we'll just dispose the\n    // renderer and clean up state. If developer wanted the stream they could call this function again and that should\n    // generate new working state via this function.\n    renderer.dispose();\n    context.deleteDeviceManagerUnparentedView(stream);\n    return;\n  }\n  if (refreshedRenderInfo.status === 'Stopping') {\n    // Stop render was called on this stream after we had started rendering. We will dispose this view and do not\n    // put the view into the state. Special case for unparented views, delete them from state when stopped to free up\n    // the memory since we were the ones generating this and not tied to any Call state.\n    internalContext.deleteUnparentedRenderInfo(stream);\n    context.deleteDeviceManagerUnparentedView(stream);\n    return;\n  }\n  // Else the stream still exists and status is not telling us to stop rendering. Complete the render process by\n  // updating the state.\n  internalContext.setUnparentedRenderInfo(stream, localVideoStream, 'Rendered', renderer);\n  internalContext.subscribeToUnparentedViewVideoEffects(localVideoStream, context);\n  context.setDeviceManagerUnparentedView(stream, convertFromSDKToDeclarativeVideoStreamRendererView(view));\n  return {\n    renderer,\n    view\n  };\n}\nfunction disposeViewVideo(context: CallContext, internalContext: InternalCallContext, callId: string, stream: RemoteVideoStreamState | LocalVideoStreamState, participantId?: CommunicationIdentifierKind | string): void {\n  // we can only have 3 types of createView\n  let streamEventType: 'disposeViewLocal' | 'disposeViewRemote' | 'disposeViewUnparented';\n\n  // we will reuse these for local as well but we need to make sure the remote stream is passed in like before.\n\n  if (participantId) {\n    streamEventType = 'disposeViewRemote';\n  } else if (callId) {\n    streamEventType = 'disposeViewLocal';\n  } else {\n    // TODO update for when unparented view.\n    streamEventType = 'disposeViewUnparented';\n  }\n  const streamType = stream.mediaStreamType;\n  const localStreamKey = (stream as LocalVideoStream).mediaStreamType;\n  const remoteStreamId = (stream as RemoteVideoStream).id;\n\n  // we want to check to see if there is a participantId this will tell us whether its a local stream or a remote one.\n  const participantKey = streamEventType === 'disposeViewRemote' && participantId ? typeof participantId === 'string' ? participantId : toFlatCommunicationIdentifier(participantId) : undefined;\n  const streamLogInfo = {\n    callId,\n    participantKey,\n    streamId: remoteStreamId ?? localStreamKey,\n    streamType\n  };\n  _logStreamEvent(EventNames.START_DISPOSE_STREAM, streamLogInfo);\n  if (streamEventType === 'disposeViewRemote' && participantKey) {\n    context.setRemoteVideoStreamRendererView(callId, participantKey, remoteStreamId, undefined);\n  }\n  const renderInfo = streamEventType === 'disposeViewRemote' && participantKey ? internalContext.getRemoteRenderInfoForParticipant(callId, participantKey, remoteStreamId) : internalContext.getLocalRenderInfo(callId, localStreamKey);\n  if (!renderInfo) {\n    _logStreamEvent(EventNames.DISPOSE_INFO_NOT_FOUND, streamLogInfo);\n    return;\n  }\n\n  // Nothing to dispose of or clean up -- we can safely exit early here.\n  if (renderInfo.status === 'NotRendered') {\n    _logStreamEvent(EventNames.STREAM_ALREADY_DISPOSED, streamLogInfo);\n    return;\n  }\n\n  // Status is already marked as \"stopping\" so we can exit early here. This is because stopping only occurs\n  // when the stream is being created in createView but hasn't been completed being created yet. The createView\n  // method will see the \"stopping\" status and perform the cleanup\n  if (renderInfo.status === 'Stopping') {\n    _logStreamEvent(EventNames.STREAM_STOPPING, streamLogInfo);\n    return;\n  }\n\n  // If the stream is in the middle of being rendered (i.e. has state \"Rendering\"), we need the status as\n  // \"stopping\" without performing any cleanup. This will tell the `createView` method that it should stop\n  // rendering and clean up the state once the view has finished being created.\n  if (renderInfo.status === 'Rendering') {\n    _logStreamEvent(EventNames.STREAM_STOPPING, streamLogInfo);\n    streamEventType === 'disposeViewRemote' && participantKey ? internalContext.setRemoteRenderInfo(callId, participantKey, remoteStreamId, (renderInfo.stream as RemoteVideoStream), 'Stopping', undefined) : internalContext.setLocalRenderInfo(callId, localStreamKey, (renderInfo.stream as LocalVideoStream), 'Stopping', renderInfo.renderer);\n    return;\n  }\n  if (renderInfo.renderer) {\n    _logStreamEvent(EventNames.DISPOSING_RENDERER, streamLogInfo);\n    renderInfo.renderer.dispose();\n    // Else the state must be in the \"Rendered\" state, so we can dispose the renderer and clean up the state.\n    if (streamEventType === 'disposeViewRemote' && participantKey) {\n      internalContext.setRemoteRenderInfo(callId, participantKey, remoteStreamId, (renderInfo.stream as RemoteVideoStream), 'NotRendered', undefined);\n    } else if (streamEventType === 'disposeViewLocal') {\n      internalContext.setLocalRenderInfo(callId, localStreamKey, (renderInfo.stream as LocalVideoStream), 'NotRendered', undefined);\n      context.setLocalVideoStreamRendererView(callId, localStreamKey, undefined);\n    }\n  } else {\n    _logStreamEvent(EventNames.RENDERER_NOT_FOUND, streamLogInfo);\n  }\n}\nfunction disposeViewUnparentedVideo(context: CallContext, internalContext: InternalCallContext, stream: LocalVideoStreamState): void {\n  const streamType = stream.mediaStreamType;\n  const streamLogInfo = {\n    streamType,\n    streamEventType: 'disposeViewUnparented'\n  };\n  _logStreamEvent(EventNames.START_DISPOSE_STREAM, streamLogInfo);\n  context.deleteDeviceManagerUnparentedView(stream);\n  const renderInfo = internalContext.getUnparentedRenderInfo(stream);\n  if (!renderInfo) {\n    _logStreamEvent(EventNames.DISPOSE_INFO_NOT_FOUND, streamLogInfo);\n    return;\n  }\n  if (renderInfo.status === 'Rendering') {\n    _logStreamEvent(EventNames.STREAM_STOPPING, streamLogInfo);\n    internalContext.setUnparentedRenderInfo(stream, renderInfo.stream, 'Stopping', undefined);\n  } else {\n    internalContext.deleteUnparentedRenderInfo(stream);\n  }\n  if (renderInfo.renderer) {\n    _logStreamEvent(EventNames.DISPOSING_RENDERER, streamLogInfo);\n    renderInfo.renderer.dispose();\n  } else {\n    _logStreamEvent(EventNames.RENDERER_NOT_FOUND, streamLogInfo);\n  }\n}\n\n/**\n * @private\n */\nexport function createView(context: CallContext, internalContext: InternalCallContext, callId: string | undefined, participantId: CommunicationIdentifierKind | string | undefined, stream: LocalVideoStreamState | RemoteVideoStreamState, options?: CreateViewOptions): Promise<CreateViewResult | undefined> {\n  const streamType = stream.mediaStreamType;\n  if (callId) {\n    return createViewVideo(context, internalContext, callId, stream, participantId, options);\n  } else if (!('id' in stream) && !callId) {\n    // Render LocalVideoStream that is not part of a Call\n    // Because it is not part of the call we don't tee errors to state naturally (e.g. via a Call Client function such as startVideo).\n    // We do not have a startLocalPreviewVideo function, so as a workaround we ensure any errors are propagated here.\n    return context.withAsyncErrorTeedToState(async () => await createViewUnparentedVideo(context, internalContext, stream, options), 'Call.startVideo')();\n  } else {\n    _logStreamEvent(EventNames.CREATE_STREAM_INVALID_PARAMS, {\n      streamType\n    });\n    return Promise.resolve(undefined);\n  }\n}\n\n/**\n * @private\n */\nexport function disposeView(context: CallContext, internalContext: InternalCallContext, callId: string | undefined, participantId: CommunicationIdentifierKind | string | undefined, stream: LocalVideoStreamState | RemoteVideoStreamState): void {\n  const streamType = stream.mediaStreamType;\n  if (callId) {\n    disposeViewVideo(context, internalContext, callId, stream, participantId);\n  } else if (!('id' in stream) && !callId) {\n    // Stop rendering LocalVideoStream that is not part of a Call\n    // Because it is not part of the call we don't tee errors to state naturally (e.g. via a Call Client function such as startVideo).\n    // We do not have a stopLocalPreviewVideo function, so as a workaround we ensure any errors are propagated here.\n    context.withErrorTeedToState(() => disposeViewUnparentedVideo(context, internalContext, stream), 'Call.stopVideo')();\n  } else {\n    _logStreamEvent(EventNames.DISPOSE_STREAM_INVALID_PARAMS, {\n      streamType\n    });\n    return;\n  }\n}\n\n/**\n * @private\n * Only stops videos that are tied to a Call.\n */\nexport function disposeAllViewsFromCall(context: CallContext, internalContext: InternalCallContext, callId: string): void {\n  const remoteStreams = internalContext.getRemoteRenderInfoForCall(callId);\n  if (remoteStreams) {\n    for (const [participantKey, participantStreams] of remoteStreams.entries()) {\n      for (const [_, remoteStreamAndRenderer] of participantStreams.entries()) {\n        // We don't want to accept SDK stream as parameter but we also don't cache the declarative stream so we have to\n        // convert the SDK stream to declarative stream which is not pretty so this could use some further refactoring.\n        disposeView(context, internalContext, callId, participantKey, convertSdkRemoteStreamToDeclarativeRemoteStream(remoteStreamAndRenderer.stream));\n      }\n    }\n  }\n  const localStreams = internalContext.getLocalRenderInfosForCall(callId);\n  if (localStreams) {\n    for (const localStreamAndRenderer of localStreams.values()) {\n      if (localStreamAndRenderer && localStreamAndRenderer.renderer) {\n        // We don't want to accept SDK stream as parameter but we also don't cache the declarative stream so we have to\n        // convert the SDK stream to declarative stream which is not pretty so this could use some further refactoring.\n        disposeView(context, internalContext, callId, undefined, convertSdkLocalStreamToDeclarativeLocalStream(localStreamAndRenderer.stream));\n      }\n    }\n  }\n}\n\n/**\n * @private\n */\nexport function disposeAllViews(context: CallContext, internalContext: InternalCallContext): void {\n  const callIds = internalContext.getCallIds();\n  for (const callId of callIds) {\n    disposeAllViewsFromCall(context, internalContext, callId);\n  }\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { RemoteParticipant, RemoteVideoStream } from '@azure/communication-calling';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { CallContext } from './CallContext';\nimport { CallIdRef } from './CallIdRef';\nimport { convertSdkRemoteStreamToDeclarativeRemoteStream } from './Converter';\nimport { InternalCallContext } from './InternalCallContext';\nimport { RemoteVideoStreamSubscriber } from './RemoteVideoStreamSubscriber';\nimport { disposeView } from './StreamUtils';\n\n/**\n * Keeps track of the listeners assigned to a particular participant because when we get an event from SDK, it doesn't\n * tell us which participant it is for. If we keep track of this then we know which participant in the state that needs\n * an update and also which property of that participant. Also we can use this when unregistering to a participant.\n */\nexport class ParticipantSubscriber {\n  private _callIdRef: CallIdRef;\n  private _participant: RemoteParticipant;\n  private _context: CallContext;\n  private _internalContext: InternalCallContext;\n  private _participantKey: string;\n  private _remoteVideoStreamSubscribers: Map<number, RemoteVideoStreamSubscriber>;\n  constructor(callIdRef: CallIdRef, participant: RemoteParticipant, context: CallContext, internalContext: InternalCallContext) {\n    this._callIdRef = callIdRef;\n    this._participant = participant;\n    this._context = context;\n    this._internalContext = internalContext;\n    this._participantKey = toFlatCommunicationIdentifier(this._participant.identifier);\n    this._remoteVideoStreamSubscribers = new Map<number, RemoteVideoStreamSubscriber>();\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._participant.on('stateChanged', this.stateChanged);\n    this._participant.on('isMutedChanged', this.isMutedChanged);\n    this._participant.on('displayNameChanged', this.displayNameChanged);\n    this._participant.on('isSpeakingChanged', this.isSpeakingChanged);\n    this._participant.on('videoStreamsUpdated', this.videoStreamsUpdated);\n    /* @conditional-compile-remove(rooms) */\n    this._participant.on('roleChanged', this.roleChanged);\n    if (this._participant.videoStreams.length > 0) {\n      for (const stream of this._participant.videoStreams) {\n        this._internalContext.setRemoteRenderInfo(this._callIdRef.callId, this._participantKey, stream.id, stream, 'NotRendered', undefined);\n        this.addRemoteVideoStreamSubscriber(stream);\n      }\n      this._context.setRemoteVideoStreams(this._callIdRef.callId, this._participantKey, this._participant.videoStreams.map(convertSdkRemoteStreamToDeclarativeRemoteStream), []);\n    }\n  };\n  public unsubscribe = (): void => {\n    this._participant.off('stateChanged', this.stateChanged);\n    this._participant.off('isMutedChanged', this.isMutedChanged);\n    this._participant.off('displayNameChanged', this.displayNameChanged);\n    this._participant.off('isSpeakingChanged', this.isSpeakingChanged);\n    this._participant.off('videoStreamsUpdated', this.videoStreamsUpdated);\n    /* @conditional-compile-remove(rooms) */\n    this._participant.off('roleChanged', this.roleChanged);\n\n    // If unsubscribing it means the participant left the call. If they have any rendering streams we should stop them\n    // as it doesn't make sense to render for an ended participant.\n    if (this._participant.videoStreams.length > 0) {\n      for (const stream of this._participant.videoStreams) {\n        disposeView(this._context, this._internalContext, this._callIdRef.callId, this._participantKey, convertSdkRemoteStreamToDeclarativeRemoteStream(stream));\n        this._internalContext.deleteRemoteRenderInfo(this._callIdRef.callId, this._participantKey, stream.id);\n      }\n    }\n  };\n  private addRemoteVideoStreamSubscriber = (remoteVideoStream: RemoteVideoStream): void => {\n    this._remoteVideoStreamSubscribers.get(remoteVideoStream.id)?.unsubscribe();\n    this._remoteVideoStreamSubscribers.set(remoteVideoStream.id, new RemoteVideoStreamSubscriber(this._callIdRef, this._participantKey, remoteVideoStream, this._context));\n  };\n  private stateChanged = (): void => {\n    this._context.setParticipantState(this._callIdRef.callId, this._participantKey, this._participant.state);\n  };\n  private isMutedChanged = (): void => {\n    this._context.setParticipantIsMuted(this._callIdRef.callId, this._participantKey, this._participant.isMuted);\n  };\n\n  /* @conditional-compile-remove(rooms) */\n  private roleChanged = (): void => {\n    this._context.setParticipantRole(this._callIdRef.callId, this._participantKey, this._participant.role);\n  };\n  private displayNameChanged = (): void => {\n    this._context.setParticipantDisplayName(this._callIdRef.callId, this._participantKey, this._participant.displayName || '');\n  };\n  private isSpeakingChanged = (): void => {\n    this._context.setParticipantIsSpeaking(this._callIdRef.callId, this._participantKey, this._participant.isSpeaking);\n  };\n  private videoStreamsUpdated = (event: {\n    added: RemoteVideoStream[];\n    removed: RemoteVideoStream[];\n  }): void => {\n    for (const stream of event.removed) {\n      this._remoteVideoStreamSubscribers.get(stream.id)?.unsubscribe();\n      disposeView(this._context, this._internalContext, this._callIdRef.callId, this._participantKey, convertSdkRemoteStreamToDeclarativeRemoteStream(stream));\n      this._internalContext.deleteRemoteRenderInfo(this._callIdRef.callId, this._participantKey, stream.id);\n    }\n    for (const stream of event.added) {\n      this._internalContext.setRemoteRenderInfo(this._callIdRef.callId, this._participantKey, stream.id, stream, 'NotRendered', undefined);\n      this.addRemoteVideoStreamSubscriber(stream);\n    }\n    this._context.setRemoteVideoStreams(this._callIdRef.callId, this._participantKey, event.added.map(convertSdkRemoteStreamToDeclarativeRemoteStream), event.removed.map((stream: RemoteVideoStream) => stream.id));\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { RecordingCallFeature } from '@azure/communication-calling';\nimport { CallContext } from './CallContext';\nimport { CallIdRef } from './CallIdRef';\n\n/**\n * @private\n */\nexport class RecordingSubscriber {\n  private _callIdRef: CallIdRef;\n  private _context: CallContext;\n  private _recording: RecordingCallFeature;\n  constructor(callIdRef: CallIdRef, context: CallContext, recording: RecordingCallFeature) {\n    this._callIdRef = callIdRef;\n    this._context = context;\n    this._recording = recording;\n\n    // If recording as already started when we joined the call, make sure it is reflected in state as there may not\n    // be an event for it.\n    if (this._recording.isRecordingActive) {\n      this._context.setCallRecordingActive(this._callIdRef.callId, this._recording.isRecordingActive);\n    }\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._recording.on('isRecordingActiveChanged', this.isAvailableChanged);\n  };\n  public unsubscribe = (): void => {\n    this._recording.off('isRecordingActiveChanged', this.isAvailableChanged);\n  };\n  private isAvailableChanged = (): void => {\n    this._context.setCallRecordingActive(this._callIdRef.callId, this._recording.isRecordingActive);\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { TranscriptionCallFeature } from '@azure/communication-calling';\nimport { CallContext } from './CallContext';\nimport { CallIdRef } from './CallIdRef';\n\n/**\n * @private\n */\nexport class TranscriptionSubscriber {\n  private _callIdRef: CallIdRef;\n  private _context: CallContext;\n  private _transcription: TranscriptionCallFeature;\n  constructor(callIdRef: CallIdRef, context: CallContext, transcription: TranscriptionCallFeature) {\n    this._callIdRef = callIdRef;\n    this._context = context;\n    this._transcription = transcription;\n\n    // If transcription as already started when we joined the call, make sure it is reflected in state as there may not\n    // be an event for it.\n    if (this._transcription.isTranscriptionActive) {\n      this._context.setCallTranscriptionActive(this._callIdRef.callId, this._transcription.isTranscriptionActive);\n    }\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._transcription.on('isTranscriptionActiveChanged', this.isTranscriptionActiveChanged);\n  };\n  public unsubscribe = (): void => {\n    this._transcription.off('isTranscriptionActiveChanged', this.isTranscriptionActiveChanged);\n  };\n  private isTranscriptionActiveChanged = (): void => {\n    this._context.setCallTranscriptionActive(this._callIdRef.callId, this._transcription.isTranscriptionActive);\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { UserFacingDiagnosticsFeature, DiagnosticChangedEventArgs, LatestDiagnosticValue, MediaDiagnosticChangedEventArgs, NetworkDiagnosticChangedEventArgs } from '@azure/communication-calling';\nimport { CallContext } from './CallContext';\nimport { CallIdRef } from './CallIdRef';\n\n/**\n * @private\n */\nexport class UserFacingDiagnosticsSubscriber {\n  private _callIdRef: CallIdRef;\n  private _context: CallContext;\n  private _diagnostics: UserFacingDiagnosticsFeature;\n  constructor(callIdRef: CallIdRef, context: CallContext, diagnostics: UserFacingDiagnosticsFeature) {\n    this._callIdRef = callIdRef;\n    this._context = context;\n    this._diagnostics = diagnostics;\n    this.setInitialDiagnostics();\n    this.subscribe();\n  }\n  public unsubscribe = (): void => {\n    this._diagnostics.network.off('diagnosticChanged', this.networkDiagnosticsChanged.bind(this));\n    this._diagnostics.media.off('diagnosticChanged', this.mediaDiagnosticsChanged.bind(this));\n  };\n  private setInitialDiagnostics(): void {\n    const network = this._diagnostics.network.getLatest();\n    const media = this._diagnostics.media.getLatest();\n    if (Object.entries(network).length === 0 && Object.entries(media).length === 0) {\n      return;\n    }\n    this._context.modifyState(state => {\n      const call = state.calls[this._callIdRef.callId];\n      if (call === undefined) {\n        return;\n      }\n      call.diagnostics = {\n        network: {\n          latest: network\n        },\n        media: {\n          latest: media\n        }\n      };\n    });\n  }\n  private subscribe(): void {\n    this._diagnostics.network.on('diagnosticChanged', this.networkDiagnosticsChanged.bind(this));\n    this._diagnostics.media.on('diagnosticChanged', this.mediaDiagnosticsChanged.bind(this));\n  }\n  private networkDiagnosticsChanged(args: NetworkDiagnosticChangedEventArgs): void {\n    this._context.modifyState(state => {\n      const call = state.calls[this._callIdRef.callId];\n      if (call === undefined) {\n        return;\n      }\n      const network = call.diagnostics?.network.latest;\n      if (network) {\n        network[args.diagnostic] = latestFromEvent(args);\n      }\n    });\n  }\n  private mediaDiagnosticsChanged(args: MediaDiagnosticChangedEventArgs): void {\n    this._context.modifyState(state => {\n      const call = state.calls[this._callIdRef.callId];\n      if (call === undefined) {\n        return;\n      }\n      const media = call.diagnostics?.media.latest;\n      if (media) {\n        media[args.diagnostic] = latestFromEvent(args);\n      }\n    });\n  }\n}\nconst latestFromEvent = (args: DiagnosticChangedEventArgs): LatestDiagnosticValue => ({\n  value: args.value,\n  valueType: args.valueType\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(raise-hand) */\nimport { RaiseHandCallFeature, RaisedHandChangedEvent } from '@azure/communication-calling';\n/* @conditional-compile-remove(raise-hand) */\nimport { CallContext } from './CallContext';\n/* @conditional-compile-remove(raise-hand) */\nimport { CallIdRef } from './CallIdRef';\n/* @conditional-compile-remove(raise-hand) */\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\n/* @conditional-compile-remove(raise-hand) */\n/**\n * @private\n */\nexport class RaiseHandSubscriber {\n  private _callIdRef: CallIdRef;\n  private _context: CallContext;\n  private _raiseHand: RaiseHandCallFeature;\n  constructor(callIdRef: CallIdRef, context: CallContext, raiseHand: RaiseHandCallFeature) {\n    this._callIdRef = callIdRef;\n    this._context = context;\n    this._raiseHand = raiseHand;\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._raiseHand.on('raisedHandEvent', this.raisedHand);\n    this._raiseHand.on('loweredHandEvent', this.loweredHand);\n  };\n  public unsubscribe = (): void => {\n    this._raiseHand.off('raisedHandEvent', this.raisedHand);\n    this._raiseHand.off('loweredHandEvent', this.loweredHand);\n  };\n  private raisedHand = (): void => {\n    this._context.setCallRaisedHands(this._callIdRef.callId, this._raiseHand.getRaisedHands());\n    for (const raisedHand of this._raiseHand.getRaisedHands()) {\n      this._context.setParticipantIsRaisedHand(this._callIdRef.callId, toFlatCommunicationIdentifier(raisedHand.identifier), raisedHand);\n    }\n  };\n  private loweredHand = (event: RaisedHandChangedEvent): void => {\n    this.raisedHand();\n    this._context.setParticipantIsRaisedHand(this._callIdRef.callId, toFlatCommunicationIdentifier(event.identifier), undefined);\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(optimal-video-count) */\nimport { OptimalVideoCountCallFeature } from '@azure/communication-calling';\n/* @conditional-compile-remove(optimal-video-count) */\nimport { OptimalVideoCountFeatureState } from './CallClientState';\n/* @conditional-compile-remove(optimal-video-count) */\nimport { CallContext } from './CallContext';\n/* @conditional-compile-remove(optimal-video-count) */\nimport { CallIdRef } from './CallIdRef';\n\n/* @conditional-compile-remove(optimal-video-count) */\n/**\n * Subscribes to a Optimal Video Count Feature events and updates the call context appropriately.\n * @private\n */\nexport class OptimalVideoCountSubscriber {\n  private _callIdRef: CallIdRef;\n  private _context: CallContext;\n  private _localOptimalVideoCountFeature: OptimalVideoCountCallFeature;\n  constructor(args: {\n    callIdRef: CallIdRef;\n    context: CallContext;\n    localOptimalVideoCountFeature: OptimalVideoCountCallFeature;\n  }) {\n    this._callIdRef = args.callIdRef;\n    this._context = args.context;\n    this._localOptimalVideoCountFeature = args.localOptimalVideoCountFeature;\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._localOptimalVideoCountFeature.on('optimalVideoCountChanged', this.optimalVideoCountChanged);\n  };\n  public unsubscribe = (): void => {\n    this._localOptimalVideoCountFeature.off('optimalVideoCountChanged', this.optimalVideoCountChanged);\n  };\n  private optimalVideoCountChanged = (): void => {\n    this.updateOptimalVideoCountState({\n      maxRemoteVideoStreams: this._localOptimalVideoCountFeature.optimalVideoCount\n    });\n  };\n  private updateOptimalVideoCountState = (newOptimalVideoCountState: OptimalVideoCountFeatureState): void => {\n    this._context.setOptimalVideoCount(this._callIdRef.callId, newOptimalVideoCountState.maxRemoteVideoStreams);\n  };\n}\n\n// Exporting empty object for stable\nexport default {};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangeInfo, CapabilitiesFeature } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport { CallContext } from './CallContext';\n/* @conditional-compile-remove(capabilities) */\nimport { CallIdRef } from './CallIdRef';\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * @private\n */\nexport class CapabilitiesSubscriber {\n  private _callIdRef: CallIdRef;\n  private _context: CallContext;\n  private _capabilitiesFeature: CapabilitiesFeature;\n  constructor(callIdRef: CallIdRef, context: CallContext, capabilities: CapabilitiesFeature) {\n    this._callIdRef = callIdRef;\n    this._context = context;\n    this._capabilitiesFeature = capabilities;\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._capabilitiesFeature.on('capabilitiesChanged', this.capabilitiesChanged);\n  };\n  public unsubscribe = (): void => {\n    this._capabilitiesFeature.off('capabilitiesChanged', this.capabilitiesChanged);\n  };\n  private capabilitiesChanged = (data: CapabilitiesChangeInfo): void => {\n    this._context.setCapabilities(this._callIdRef.callId, this._capabilitiesFeature.capabilities, data);\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Features, LocalVideoStream, RemoteParticipant } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { TeamsCaptions } from '@azure/communication-calling';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { CallCommon } from './BetaToStableTypes';\nimport { CallContext } from './CallContext';\nimport { CallIdRef } from './CallIdRef';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsSubscriber } from './CaptionsSubscriber';\nimport { convertSdkLocalStreamToDeclarativeLocalStream, convertSdkParticipantToDeclarativeParticipant } from './Converter';\nimport { InternalCallContext } from './InternalCallContext';\n/* @conditional-compile-remove(video-background-effects) */\nimport { LocalVideoStreamVideoEffectsSubscriber } from './LocalVideoStreamVideoEffectsSubscriber';\nimport { ParticipantSubscriber } from './ParticipantSubscriber';\nimport { RecordingSubscriber } from './RecordingSubscriber';\nimport { disposeView } from './StreamUtils';\nimport { TranscriptionSubscriber } from './TranscriptionSubscriber';\nimport { UserFacingDiagnosticsSubscriber } from './UserFacingDiagnosticsSubscriber';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaiseHandSubscriber } from './RaiseHandSubscriber';\n/* @conditional-compile-remove(optimal-video-count) */\nimport { OptimalVideoCountSubscriber } from './OptimalVideoCountSubscriber';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesSubscriber } from './CapabilitiesSubscriber';\n/**\n * Keeps track of the listeners assigned to a particular call because when we get an event from SDK, it doesn't tell us\n * which call it is for. If we keep track of this then we know which call in the state that needs an update and also\n * which property of that call. Also we can use this when unregistering to a call.\n */\nexport class CallSubscriber {\n  private _call: CallCommon;\n  private _callIdRef: CallIdRef;\n  private _context: CallContext;\n  private _internalContext: InternalCallContext;\n  private _diagnosticsSubscriber: UserFacingDiagnosticsSubscriber;\n  private _participantSubscribers: Map<string, ParticipantSubscriber>;\n  private _recordingSubscriber: RecordingSubscriber;\n  private _transcriptionSubscriber: TranscriptionSubscriber;\n  /* @conditional-compile-remove(optimal-video-count) */\n  private _optimalVideoCountSubscriber: OptimalVideoCountSubscriber;\n  /* @conditional-compile-remove(close-captions) */\n  private _captionsSubscriber?: CaptionsSubscriber;\n  /* @conditional-compile-remove(raise-hand) */\n  private _raiseHandSubscriber?: RaiseHandSubscriber;\n  /* @conditional-compile-remove(video-background-effects) */\n  private _localVideoStreamVideoEffectsSubscribers: Map<string, LocalVideoStreamVideoEffectsSubscriber>;\n  /* @conditional-compile-remove(capabilities) */\n  private _capabilitiesSubscriber: CapabilitiesSubscriber;\n  constructor(call: CallCommon, context: CallContext, internalContext: InternalCallContext) {\n    this._call = call;\n    this._callIdRef = {\n      callId: call.id\n    };\n    this._context = context;\n    this._internalContext = internalContext;\n    this._diagnosticsSubscriber = new UserFacingDiagnosticsSubscriber(this._callIdRef, this._context, this._call.feature(Features.UserFacingDiagnostics));\n    this._participantSubscribers = new Map<string, ParticipantSubscriber>();\n    this._recordingSubscriber = new RecordingSubscriber(this._callIdRef, this._context, this._call.feature(Features.Recording));\n    this._transcriptionSubscriber = new TranscriptionSubscriber(this._callIdRef, this._context, this._call.feature(Features.Transcription));\n    /* @conditional-compile-remove(raise-hand) */\n    this._raiseHandSubscriber = new RaiseHandSubscriber(this._callIdRef, this._context, this._call.feature(Features.RaiseHand));\n    /* @conditional-compile-remove(optimal-video-count) */\n    this._optimalVideoCountSubscriber = new OptimalVideoCountSubscriber({\n      callIdRef: this._callIdRef,\n      context: this._context,\n      localOptimalVideoCountFeature: this._call.feature(Features.OptimalVideoCount)\n    });\n    /* @conditional-compile-remove(video-background-effects) */\n    this._localVideoStreamVideoEffectsSubscribers = new Map();\n\n    /* @conditional-compile-remove(capabilities) */\n    this._capabilitiesSubscriber = new CapabilitiesSubscriber(this._callIdRef, this._context, this._call.feature(Features.Capabilities));\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._call.on('stateChanged', this.stateChanged);\n    /* @conditional-compile-remove(close-captions) */\n    this._call.on('stateChanged', this.initCaptionSubscriber);\n    this._call.on('idChanged', this.idChanged);\n    this._call.on('isScreenSharingOnChanged', this.isScreenSharingOnChanged);\n    this._call.on('remoteParticipantsUpdated', this.remoteParticipantsUpdated);\n    this._call.on('localVideoStreamsUpdated', this.localVideoStreamsUpdated);\n    this._call.on('isMutedChanged', this.isMuteChanged);\n    /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\n    this._call.on('roleChanged', this.callRoleChangedHandler);\n    this._call.feature(Features.DominantSpeakers).on('dominantSpeakersChanged', this.dominantSpeakersChanged);\n    for (const localVideoStream of this._call.localVideoStreams) {\n      this._internalContext.setLocalRenderInfo(this._callIdRef.callId, localVideoStream.mediaStreamType, localVideoStream, 'NotRendered', undefined);\n    }\n    if (this._call.remoteParticipants.length > 0) {\n      this._call.remoteParticipants.forEach((participant: RemoteParticipant) => {\n        this.addParticipantListener(participant);\n      });\n      this._context.setCallRemoteParticipants(this._callIdRef.callId, this._call.remoteParticipants.map(convertSdkParticipantToDeclarativeParticipant), []);\n    }\n  };\n  public unsubscribe = (): void => {\n    this._call.off('stateChanged', this.stateChanged);\n    /* @conditional-compile-remove(close-captions) */\n    this._call.off('stateChanged', this.initCaptionSubscriber);\n    this._call.off('idChanged', this.idChanged);\n    this._call.off('isScreenSharingOnChanged', this.isScreenSharingOnChanged);\n    this._call.off('remoteParticipantsUpdated', this.remoteParticipantsUpdated);\n    this._call.off('localVideoStreamsUpdated', this.localVideoStreamsUpdated);\n    this._call.off('isMutedChanged', this.isMuteChanged);\n    /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\n    this._call.off('roleChanged', this.callRoleChangedHandler);\n    this._participantSubscribers.forEach((participantSubscriber: ParticipantSubscriber) => {\n      participantSubscriber.unsubscribe();\n    });\n    this._participantSubscribers.clear();\n\n    // If we are unsubscribing that means we no longer want to display any video for this call (callEnded or callAgent\n    // disposed) and we should not be updating it any more. So if video is rendering we stop rendering.\n    for (const localVideoStream of this._call.localVideoStreams) {\n      const mediaStreamType = localVideoStream.mediaStreamType;\n      disposeView(this._context, this._internalContext, this._callIdRef.callId, undefined, convertSdkLocalStreamToDeclarativeLocalStream(localVideoStream));\n      this._internalContext.deleteLocalRenderInfo(this._callIdRef.callId, mediaStreamType);\n    }\n    this._diagnosticsSubscriber.unsubscribe();\n    this._recordingSubscriber.unsubscribe();\n    this._transcriptionSubscriber.unsubscribe();\n    /* @conditional-compile-remove(optimal-video-count) */\n    this._optimalVideoCountSubscriber.unsubscribe();\n    /* @conditional-compile-remove(close-captions) */\n    this._captionsSubscriber?.unsubscribe();\n    /* @conditional-compile-remove(raise-hand) */\n    this._raiseHandSubscriber?.unsubscribe();\n    /* @conditional-compile-remove(capabilities) */\n    this._capabilitiesSubscriber.unsubscribe();\n  };\n  private addParticipantListener(participant: RemoteParticipant): void {\n    const participantKey = toFlatCommunicationIdentifier(participant.identifier);\n    this._participantSubscribers.get(participantKey)?.unsubscribe();\n    this._participantSubscribers.set(participantKey, new ParticipantSubscriber(this._callIdRef, participant, this._context, this._internalContext));\n  }\n  private removeParticipantListener(participant: RemoteParticipant): void {\n    const participantKey = toFlatCommunicationIdentifier(participant.identifier);\n    const participantSubscriber = this._participantSubscribers.get(participantKey);\n    if (participantSubscriber) {\n      participantSubscriber.unsubscribe();\n      this._participantSubscribers.delete(participantKey);\n    }\n  }\n  private stateChanged = (): void => {\n    this._context.setCallState(this._callIdRef.callId, this._call.state);\n  };\n\n  /* @conditional-compile-remove(close-captions) */\n  private initCaptionSubscriber = (): void => {\n    // subscribe to captions here so that we don't call captions when call is not initialized\n    if (this._call.state === 'Connected' && !this._captionsSubscriber) {\n      if (this._call.feature(Features.Captions).captions.kind === 'TeamsCaptions') {\n        this._captionsSubscriber = new CaptionsSubscriber(this._callIdRef, this._context, (this._call.feature(Features.Captions).captions as TeamsCaptions));\n        this._call.off('stateChanged', this.initCaptionSubscriber);\n      }\n    }\n  };\n  private idChanged = (): void => {\n    this._internalContext.setCallId(this._call.id, this._callIdRef.callId);\n    this._context.setCallId(this._call.id, this._callIdRef.callId);\n    this._callIdRef.callId = this._call.id;\n  };\n  private isScreenSharingOnChanged = (): void => {\n    this._context.setCallIsScreenSharingOn(this._callIdRef.callId, this._call.isScreenSharingOn);\n  };\n  private isMuteChanged = (): void => {\n    this._context.setCallIsMicrophoneMuted(this._callIdRef.callId, this._call.isMuted);\n  };\n\n  /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\n  private callRoleChangedHandler = (): void => {\n    this._context.setRole(this._callIdRef.callId, this._call.role);\n  };\n  private remoteParticipantsUpdated = (event: {\n    added: RemoteParticipant[];\n    removed: RemoteParticipant[];\n  }): void => {\n    event.added.forEach((participant: RemoteParticipant) => {\n      this.addParticipantListener(participant);\n    });\n    event.removed.forEach((participant: RemoteParticipant) => {\n      this.removeParticipantListener(participant);\n    });\n\n    // Remove any added participants from remoteParticipantsEnded if they are there and add any removed participants to\n    // remoteParticipantsEnded.\n    this._context.setCallRemoteParticipantsEnded(this._callIdRef.callId, event.removed.map(convertSdkParticipantToDeclarativeParticipant), event.added.map((participant: RemoteParticipant) => {\n      return toFlatCommunicationIdentifier(participant.identifier);\n    }));\n\n    // Add added participants to remoteParticipants and remove removed participants from remoteParticipants.\n    this._context.setCallRemoteParticipants(this._callIdRef.callId, event.added.map(convertSdkParticipantToDeclarativeParticipant), event.removed.map((participant: RemoteParticipant) => {\n      return toFlatCommunicationIdentifier(participant.identifier);\n    }));\n  };\n  private localVideoStreamsUpdated = (event: {\n    added: LocalVideoStream[];\n    removed: LocalVideoStream[];\n  }): void => {\n    for (const localVideoStream of event.added) {\n      const mediaStreamType = localVideoStream.mediaStreamType;\n      // IMPORTANT: The internalContext should be set before context. This is done to ensure that the internal context\n      // has the required data when component re-renders due to external state changes.\n      this._internalContext.setLocalRenderInfo(this._callIdRef.callId, mediaStreamType, localVideoStream, 'NotRendered', undefined);\n\n      // Subscribe to video effect changes\n      this._localVideoStreamVideoEffectsSubscribers.get(mediaStreamType)?.unsubscribe();\n      this._localVideoStreamVideoEffectsSubscribers.set(mediaStreamType, new LocalVideoStreamVideoEffectsSubscriber({\n        parent: this._callIdRef,\n        context: this._context,\n        localVideoStream: localVideoStream,\n        localVideoStreamEffectsAPI: localVideoStream.feature(Features.VideoEffects)\n      }));\n    }\n    for (const localVideoStream of event.removed) {\n      const mediaStreamType = localVideoStream.mediaStreamType;\n      this._localVideoStreamVideoEffectsSubscribers.get(mediaStreamType)?.unsubscribe();\n      disposeView(this._context, this._internalContext, this._callIdRef.callId, undefined, convertSdkLocalStreamToDeclarativeLocalStream(localVideoStream));\n      this._internalContext.deleteLocalRenderInfo(this._callIdRef.callId, mediaStreamType);\n    }\n    this._context.setCallLocalVideoStream(this._callIdRef.callId, event.added.map(convertSdkLocalStreamToDeclarativeLocalStream), event.removed.map(convertSdkLocalStreamToDeclarativeLocalStream));\n  };\n  private dominantSpeakersChanged = (): void => {\n    const dominantSpeakers = this._call.feature(Features.DominantSpeakers).dominantSpeakers;\n    this._context.setCallDominantSpeakers(this._callIdRef.callId, dominantSpeakers);\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IncomingCall } from '@azure/communication-calling';\nimport { IncomingCallCommon } from './BetaToStableTypes';\nimport { CallContext } from './CallContext';\n\n/**\n * @beta\n * Proxies the {@link @azure/communication-calling#IncomingCall} interface.\n */\nexport type DeclarativeIncomingCall = IncomingCall;\n\n/**\n * @private\n */\nexport class ProxyIncomingCall implements ProxyHandler<DeclarativeIncomingCall> {\n  private _context: CallContext;\n  constructor(context: CallContext) {\n    this._context = context;\n  }\n  public get<P extends keyof IncomingCall>(target: IncomingCall, prop: P): any {\n    switch (prop) {\n      case 'accept':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<IncomingCall['accept']>) {\n            return await target.accept(...args);\n          }, 'IncomingCall.accept');\n        }\n      case 'reject':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<IncomingCall['reject']>) {\n            return await target.reject(...args);\n          }, 'IncomingCall.reject');\n        }\n      default:\n        return Reflect.get(target, prop);\n    }\n  }\n}\n\n/**\n * Creates a declarative Incoming Call by proxying IncomingCall using ProxyIncomingCall.\n * @param incomingCall - IncomingCall from SDK\n * @returns proxied IncomingCall\n */\nexport const incomingCallDeclaratify = (incomingCall: IncomingCallCommon, context: CallContext): DeclarativeIncomingCall => {\n  const proxyIncomingCall = new ProxyIncomingCall(context);\n  return (new Proxy(incomingCall, proxyIncomingCall) as DeclarativeIncomingCall);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallEndReason } from '@azure/communication-calling';\nimport { IncomingCallCommon } from './BetaToStableTypes';\n\n/**\n * Keeps track of the listeners assigned to a particular incoming call because when we get an event from SDK, it doesn't\n * tell us which incoming call it is for. If we keep track of this then we know which incoming call in the state that\n * needs an update and also which property of that incoming call. Also we can use this when unregistering to a incoming\n * call.\n */\nexport class IncomingCallSubscriber {\n  private _incomingCall: IncomingCallCommon;\n  private _setIncomingCallEnded: (incomingCallId: string, callEndReason: CallEndReason) => void;\n  constructor(incomingCall: IncomingCallCommon,\n  // setIncomingCallEnded callback is used so parent can clean up IncomingCallSubscriber.\n  setIncomingCallEnded: (incomingCallId: string, callEndReason: CallEndReason) => void) {\n    this._incomingCall = incomingCall;\n    this._setIncomingCallEnded = setIncomingCallEnded;\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._incomingCall.on('callEnded', this.callEnded);\n  };\n  public unsubscribe = (): void => {\n    this._incomingCall.off('callEnded', this.callEnded);\n  };\n  private callEnded = (event: {\n    callEndReason: CallEndReason;\n  }): void => {\n    this._setIncomingCallEnded(this._incomingCall.id, event.callEndReason);\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Call, CallAgent, CallEndReason, CollectionUpdatedEvent } from '@azure/communication-calling';\nimport { IncomingCallCommon, CallAgentCommon, CallCommon } from './BetaToStableTypes';\nimport { CallContext } from './CallContext';\nimport { DeclarativeCall } from './CallDeclarative';\nimport { CallSubscriber } from './CallSubscriber';\nimport { convertSdkCallToDeclarativeCall, convertSdkIncomingCallToDeclarativeIncomingCall } from './Converter';\nimport { DeclarativeIncomingCall, incomingCallDeclaratify } from './IncomingCallDeclarative';\nimport { IncomingCallSubscriber } from './IncomingCallSubscriber';\nimport { InternalCallContext } from './InternalCallContext';\nimport { disposeAllViews, disposeAllViewsFromCall } from './StreamUtils';\n\n/**\n *\n * @private\n */\nexport type DeclarativeCallCommon = CallCommon & {\n  /**\n   * Stop any declarative specific subscriptions and remove declarative subscribers.\n   */\n  unsubscribe(): void;\n};\n\n/**\n * ProxyCallAgent proxies CallAgent and saves any returned state in the given context. It will subscribe to all state\n * updates in the CallAgent and in the contained Calls and RemoteParticipants. When dispose is called it will\n * unsubscribe from all state updates.\n */\nexport abstract class ProxyCallAgentCommon {\n  private _context: CallContext;\n  private _internalContext: InternalCallContext;\n  private _callSubscribers: Map<CallCommon, CallSubscriber>;\n  private _incomingCallSubscribers: Map<string, IncomingCallSubscriber>;\n  private _declarativeIncomingCalls: Map<string, DeclarativeIncomingCall>;\n  private _declarativeCalls: Map<CallCommon, DeclarativeCallCommon>;\n  private _externalCallsUpdatedListeners: Set<CollectionUpdatedEvent<CallCommon>>;\n  constructor(context: CallContext, internalContext: InternalCallContext) {\n    this._context = context;\n    this._internalContext = internalContext;\n    this._callSubscribers = new Map<Call, CallSubscriber>();\n    this._incomingCallSubscribers = new Map<string, IncomingCallSubscriber>();\n    this._declarativeIncomingCalls = new Map<string, DeclarativeIncomingCall>();\n    this._declarativeCalls = new Map<Call, DeclarativeCall>();\n    this._externalCallsUpdatedListeners = new Set<CollectionUpdatedEvent<CallCommon>>();\n  }\n\n  // Unsubscribe is called when CallAgent is disposed. This should mean no more updating of existing call but we don't\n  // remove any existing state.\n  protected unregisterSubscriber = (): void => {\n    for (const [_, callSubscriber] of this._callSubscribers.entries()) {\n      callSubscriber.unsubscribe();\n    }\n    this._callSubscribers.clear();\n    for (const [_, incomingCallSubscriber] of this._incomingCallSubscribers.entries()) {\n      incomingCallSubscriber.unsubscribe();\n    }\n    this._incomingCallSubscribers.clear();\n    this._declarativeIncomingCalls.clear();\n    for (const [_, declarativeCall] of this._declarativeCalls.entries()) {\n      declarativeCall.unsubscribe();\n    }\n    this._declarativeCalls.clear();\n  };\n  protected abstract unsubscribe(): void;\n  protected abstract callDeclaratify(call: CallCommon, context: CallContext): DeclarativeCallCommon;\n  protected callsUpdated = (event: {\n    added: CallCommon[];\n    removed: CallCommon[];\n  }): void => {\n    const addedStatefulCall: DeclarativeCallCommon[] = [];\n    for (const call of event.added) {\n      const statefulCall = this.addCall(call);\n      addedStatefulCall.push(statefulCall);\n    }\n    const removedStatefulCall: DeclarativeCallCommon[] = [];\n    for (const call of event.removed) {\n      disposeAllViewsFromCall(this._context, this._internalContext, call.id);\n      const callSubscriber = this._callSubscribers.get(call);\n      if (callSubscriber) {\n        callSubscriber.unsubscribe();\n        this._callSubscribers.delete(call);\n      }\n      this._context.setCallEnded(call.id, call.callEndReason);\n      const declarativeCall = this._declarativeCalls.get(call);\n      if (declarativeCall) {\n        declarativeCall.unsubscribe();\n        removedStatefulCall.push(declarativeCall);\n        this._declarativeCalls.delete(call);\n      } else {\n        removedStatefulCall.push(this.callDeclaratify(call, this._context));\n      }\n    }\n    for (const externalCallsUpdatedListener of this._externalCallsUpdatedListeners) {\n      externalCallsUpdatedListener({\n        added: addedStatefulCall,\n        removed: removedStatefulCall\n      });\n    }\n  };\n  private setIncomingCallEnded = (incomingCallId: string, callEndReason: CallEndReason): void => {\n    const incomingCallSubscriber = this._incomingCallSubscribers.get(incomingCallId);\n    if (incomingCallSubscriber) {\n      incomingCallSubscriber.unsubscribe();\n      this._incomingCallSubscribers.delete(incomingCallId);\n    }\n    this._declarativeIncomingCalls.delete(incomingCallId);\n    this._context.setIncomingCallEnded(incomingCallId, callEndReason);\n  };\n  protected incomingCall = ({\n    incomingCall\n  }: {\n    incomingCall: IncomingCallCommon;\n  }): void => {\n    // Make sure to not subscribe to the incoming call if we are already subscribed to it.\n    if (!this._incomingCallSubscribers.has(incomingCall.id)) {\n      this._incomingCallSubscribers.set(incomingCall.id, new IncomingCallSubscriber(incomingCall, this.setIncomingCallEnded));\n    }\n    this._declarativeIncomingCalls.set(incomingCall.id, incomingCallDeclaratify(incomingCall, this._context));\n    this._context.setIncomingCall(convertSdkIncomingCallToDeclarativeIncomingCall(incomingCall));\n  };\n  protected addCall = (call: CallCommon): DeclarativeCallCommon => {\n    this._callSubscribers.get(call)?.unsubscribe();\n\n    // For API extentions we need to have the call in the state when we are subscribing as we may want to update the\n    // state during the subscription process in the subscriber so we add the call to state before subscribing.\n    this._context.setCall(convertSdkCallToDeclarativeCall(call));\n    this._callSubscribers.set(call, new CallSubscriber(call, this._context, this._internalContext));\n    return this.getOrCreateDeclarativeCall(call);\n  };\n  private getOrCreateDeclarativeCall = (call: CallCommon): DeclarativeCallCommon => {\n    const declarativeCall = this._declarativeCalls.get(call);\n    if (declarativeCall) {\n      return declarativeCall;\n    }\n    const newDeclarativeCall = this.callDeclaratify(call, this._context);\n    this._declarativeCalls.set(call, newDeclarativeCall);\n    return newDeclarativeCall;\n  };\n\n  // args could be either from teamsCall or Call, set it as unknown and cast it in child class later\n  protected abstract startCall(agent: CallAgentCommon, args: unknown[]): CallCommon;\n  protected abstract joinCall(agent: CallAgentCommon, args: unknown[]): CallCommon;\n  protected abstract agentSubscribe(agent: CallAgentCommon, args: unknown[]): void;\n  protected abstract agentUnsubscribe(agent: CallAgentCommon, args: unknown[]): void;\n\n  // We can't directly override get function because it is proxied,\n  // Add a getCommon function and call it in child class\n  protected getCommon<AgentType extends CallAgent, P extends keyof CallAgent>(target: AgentType, prop: P | 'incomingCalls'): any {\n    switch (prop) {\n      case 'startCall':\n        {\n          return this._context.withErrorTeedToState((...args: Parameters<AgentType['startCall']>): CallCommon => {\n            const call = this.startCall(target, args);\n            this.addCall(call);\n            return this.getOrCreateDeclarativeCall(call);\n          }, 'CallAgent.startCall');\n        }\n      case 'join':\n        {\n          return this._context.withErrorTeedToState((...args: Parameters<AgentType['join']>): CallCommon => {\n            const call = this.joinCall(target, args);\n            this.addCall(call);\n            return this.getOrCreateDeclarativeCall(call);\n          }, 'CallAgent.join');\n        }\n      case 'calls':\n        {\n          return Array.from(this._declarativeCalls.values());\n        }\n      case 'on':\n        {\n          return (...args: Parameters<AgentType['on']>): void => {\n            // typescript is not smart enough to handle multiple overloads and pull the correct type here so force casting args\n            const event = (args[0] as 'incomingCall' | 'callsUpdated' | 'connectionStateChanged');\n            const isCallsUpdated = event === 'callsUpdated';\n            if (isCallsUpdated) {\n              const listener = ((args[1] as unknown) as CollectionUpdatedEvent<CallCommon>);\n              this._externalCallsUpdatedListeners.add(listener);\n            } else {\n              this.agentSubscribe(target, args);\n            }\n          };\n        }\n      case 'off':\n        {\n          return (...args: Parameters<AgentType['off']>): void => {\n            // typescript is not smart enough to handle multiple overloads and pull the correct type here so force casting args\n            const event = (args[0] as 'incomingCall' | 'callsUpdated' | 'connectionStateChanged');\n            const isCallsUpdated = event === 'callsUpdated';\n            if (isCallsUpdated) {\n              const listener = ((args[1] as unknown) as CollectionUpdatedEvent<CallCommon>);\n              this._externalCallsUpdatedListeners.delete(listener);\n            } else {\n              this.agentUnsubscribe(target, args);\n            }\n          };\n        }\n      case 'dispose':\n        {\n          // Wrapping CallAgent.dispose in a callback type (): Promise<void> to accomodate the change of CallAgent.dispose\n          // in calling beta version 1.8.0-beta.1 from callback type (): Promise<void> to (): void\n          const callAgentDisposeAsyncCallbackWrapper = async (): Promise<void> => {\n            await target.dispose();\n            return Promise.resolve();\n          };\n          return (): Promise<void> => {\n            return callAgentDisposeAsyncCallbackWrapper().then(() => {\n              this.unsubscribe();\n            });\n          };\n        }\n      /**\n       * This attribute is a special case and doesn't exist on the CallAgent interface.\n       * We need this to be able to return a declarative incoming call object using the call agent.\n       * In a standard headless SDK usage, the right way to get an incoming call is to use the `incomingCall` event.\n       * However, using the declarative layer, the ideal usage would be to:\n       * 1. subscribe to the `onStateChange` event\n       * 2. Get the incoming call from the new state and it's ID\n       * 3. Use `callAgent.incomingCalls` and filter an incoming call ID to get a declarative incoming call object\n       */\n      case 'incomingCalls':\n        {\n          return Array.from(this._declarativeIncomingCalls.values());\n        }\n      default:\n        return Reflect.get(target, prop);\n    }\n  }\n}\n\n/**\n * @private\n */\nexport const clearCallRelatedState = (context: CallContext, internalContext: InternalCallContext): void => {\n  // Make sure there are no existing call data if creating a new CallAgentDeclarative (if creating a new\n  // CallAgentDeclarative after disposing of the hold one will mean context have old call state). TODO: should we stop\n  // rendering when the previous callAgent is disposed?\n  disposeAllViews(context, internalContext);\n  context.clearCallRelatedState();\n  internalContext.clearCallRelatedState();\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallContext } from './CallContext';\nimport { CallCommon } from './BetaToStableTypes';\n/* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(call-transfer) */\nimport { Features } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { TeamsCaptions } from '@azure/communication-calling';\n/* @conditional-compile-remove(call-transfer) */\nimport { TransferCallFeature, TransferAcceptedEvent, TransferEventArgs } from '@azure/communication-calling';\n/**\n * @private\n */\nexport abstract class ProxyCallCommon implements ProxyHandler<CallCommon> {\n  private _context: CallContext;\n  constructor(context: CallContext) {\n    this._context = context;\n  }\n  public unsubscribe(): void {\n    /** No subscriptions yet. But there will be one for transfer feature soon. */\n  }\n  protected getContext(): CallContext {\n    return this._context;\n  }\n  public get<P extends keyof CallCommon>(target: CallCommon, prop: P): any {\n    switch (prop) {\n      case 'mute':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['mute']>) {\n            return await target.mute(...args);\n          }, 'Call.mute');\n        }\n      case 'unmute':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['unmute']>) {\n            return await target.unmute(...args);\n          }, 'Call.unmute');\n        }\n      case 'startVideo':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['startVideo']>) {\n            return await target.startVideo(...args);\n          }, 'Call.startVideo');\n        }\n      case 'stopVideo':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['stopVideo']>) {\n            return await target.stopVideo(...args);\n          }, 'Call.stopVideo');\n        }\n      case 'startScreenSharing':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['startScreenSharing']>) {\n            return await target.startScreenSharing(...args);\n          }, 'Call.startScreenSharing');\n        }\n      case 'stopScreenSharing':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['stopScreenSharing']>) {\n            return await target.stopScreenSharing(...args);\n          }, 'Call.stopScreenSharing');\n        }\n      case 'hold':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['hold']>) {\n            return await target.hold(...args);\n          }, 'Call.hold');\n        }\n      case 'resume':\n        {\n          return this._context.withAsyncErrorTeedToState(async function (...args: Parameters<CallCommon['resume']>) {\n            return await target.resume(...args);\n          }, 'Call.resume');\n        }\n      case 'feature':\n        {\n          // these are mini version of Proxy object - if it grows too big, a real Proxy object should be used.\n          return this._context.withErrorTeedToState((...args: Parameters<CallCommon['feature']>) => {\n            /* @conditional-compile-remove(close-captions) */\n            if (args[0] === Features.Captions) {\n              const captionsFeature = target.feature(Features.Captions).captions;\n              const proxyFeature = new ProxyTeamsCaptions(this._context, target);\n              return {\n                captions: new Proxy(captionsFeature, proxyFeature)\n              };\n            }\n            /* @conditional-compile-remove(call-transfer) */\n            if (args[0] === Features.Transfer) {\n              const transferFeature = target.feature(Features.Transfer);\n              const proxyFeature = new ProxyTransferCallFeature(this._context, target);\n              return new Proxy(transferFeature, proxyFeature);\n            }\n            return target.feature(...args);\n          }, 'Call.feature');\n        }\n      default:\n        return Reflect.get(target, prop);\n    }\n  }\n}\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * @private\n */\nclass ProxyTeamsCaptions implements ProxyHandler<TeamsCaptions> {\n  private _context: CallContext;\n  private _call: CallCommon;\n  constructor(context: CallContext, call: CallCommon) {\n    this._context = context;\n    this._call = call;\n  }\n  public get<P extends keyof TeamsCaptions>(target: TeamsCaptions, prop: P): any {\n    switch (prop) {\n      case 'startCaptions':\n        return this._context.withAsyncErrorTeedToState(async (...args: Parameters<TeamsCaptions['startCaptions']>) => {\n          this._context.setStartCaptionsInProgress(this._call.id, true);\n          const ret = await target.startCaptions(...args);\n          this._context.setSelectedSpokenLanguage(this._call.id, args[0]?.spokenLanguage ?? 'en-us');\n          return ret;\n        }, 'Call.feature');\n        break;\n      case 'stopCaptions':\n        return this._context.withAsyncErrorTeedToState(async (...args: Parameters<TeamsCaptions['stopCaptions']>) => {\n          const ret = await target.stopCaptions(...args);\n          this._context.setIsCaptionActive(this._call.id, false);\n          this._context.setStartCaptionsInProgress(this._call.id, false);\n          this._context.clearCaptions(this._call.id);\n          return ret;\n        }, 'Call.feature');\n      case 'setSpokenLanguage':\n        return this._context.withAsyncErrorTeedToState(async (...args: Parameters<TeamsCaptions['setSpokenLanguage']>) => {\n          const ret = await target.setSpokenLanguage(...args);\n          this._context.setSelectedSpokenLanguage(this._call.id, args[0]);\n          return ret;\n        }, 'Call.feature');\n      case 'setCaptionLanguage':\n        return this._context.withAsyncErrorTeedToState(async (...args: Parameters<TeamsCaptions['setCaptionLanguage']>) => {\n          const ret = await target.setCaptionLanguage(...args);\n          this._context.setSelectedCaptionLanguage(this._call.id, args[0]);\n          return ret;\n        }, 'Call.feature');\n      default:\n        return Reflect.get(target, prop);\n    }\n  }\n}\n/* @conditional-compile-remove(call-transfer) */\n/**\n * @private\n */\nclass ProxyTransferCallFeature implements ProxyHandler<TransferCallFeature> {\n  private _context: CallContext;\n  private _call: CallCommon;\n  constructor(context: CallContext, call: CallCommon) {\n    this._context = context;\n    this._call = call;\n  }\n  public get<P extends keyof TransferCallFeature>(target: TransferCallFeature, prop: P): any {\n    switch (prop) {\n      case 'on':\n        return (...args: Parameters<TransferCallFeature['on']>): void => {\n          const isTransferAccepted = args[0] === 'transferAccepted';\n          if (isTransferAccepted) {\n            const listener = (args[1] as TransferAcceptedEvent);\n            const newListener = (args: TransferEventArgs): void => {\n              this._context.setAcceptedTransfer(this._call.id, {\n                callId: args.targetCall.id,\n                timestamp: new Date()\n              });\n              listener(args);\n            };\n            return target.on('transferAccepted', newListener);\n          }\n        };\n      default:\n        return Reflect.get(target, prop);\n    }\n  }\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Call } from '@azure/communication-calling';\nimport { ProxyCallCommon } from './CallDeclarativeCommon';\nimport { CallContext } from './CallContext';\n\n/**\n * TODO: This should likely be exported?\n *\n * @private\n */\nexport interface DeclarativeCall extends Call {\n  /**\n   * Stop any declarative specific subscriptions and remove declarative subscribers.\n   */\n  unsubscribe(): void;\n}\nclass ProxyCall extends ProxyCallCommon implements ProxyHandler<Call> {\n  public get<P extends keyof Call>(target: Call, prop: P): any {\n    switch (prop) {\n      case 'addParticipant':\n        {\n          return this.getContext().withAsyncErrorTeedToState(async function (...args: Parameters<Call['addParticipant']>) {\n            return await target.addParticipant(...args);\n          }, 'Call.addParticipant');\n        }\n      default:\n        return super.get(target, (prop as any));\n    }\n  }\n}\n\n/**\n * Creates a declarative Call by proxying Call with ProxyCall.\n * This should only be used with CallAgentDeclarative as CallAgentDeclarative will add that\n * call to the context properly (need to have the Call in context to update it - CallAgentDeclarative will add Call to\n * context)\n *\n * @param call - Call from SDK\n * @param context - CallContext from StatefulCallClient\n */\nexport const callDeclaratify = (call: Call, context: CallContext): DeclarativeCall => {\n  const proxyCall = new ProxyCall(context);\n  Object.defineProperty(call, 'unsubscribe', {\n    configurable: false,\n    value: () => proxyCall.unsubscribe()\n  });\n  return (new Proxy(call, proxyCall) as DeclarativeCall);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Call, CallAgent } from '@azure/communication-calling';\nimport { CallAgentCommon, CallCommon, TeamsCall, TeamsCallAgent } from './BetaToStableTypes';\n\n/**\n * @internal\n */\nexport const _isACSCall = (call: CallCommon): call is Call => {\n  return true;\n};\n\n/**\n * @internal\n */\nexport const _isACSCallAgent = (callAgent: CallAgentCommon): callAgent is CallAgent => {\n  return true;\n};\n\n/**\n * @internal\n */\nexport const _isTeamsCall = (call: CallCommon): call is TeamsCall => {\n  return false;\n};\n\n/**\n * @internal\n */\nexport const _isTeamsCallAgent = (callAgent: CallAgentCommon): callAgent is TeamsCallAgent => {\n  return false;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallAgent } from '@azure/communication-calling';\nimport { clearCallRelatedState, DeclarativeCallCommon, ProxyCallAgentCommon } from './CallAgentDeclarativeCommon';\nimport { CallContext } from './CallContext';\nimport { callDeclaratify } from './CallDeclarative';\nimport { InternalCallContext } from './InternalCallContext';\nimport { _isACSCall, _isACSCallAgent } from './TypeGuards';\nimport { CallAgentCommon, CallCommon } from './BetaToStableTypes';\n/**\n * @beta\n * `DeclarativeCallAgent` extends and proxies the {@link @azure/communication-calling#CallAgent}\n */\nexport type DeclarativeCallAgent = CallAgent;\n\n/**\n * ProxyCallAgent proxies CallAgent and saves any returned state in the given context. It will subscribe to all state\n * updates in the CallAgent and in the contained Calls and RemoteParticipants. When dispose is called it will\n * unsubscribe from all state updates.\n */\nclass ProxyCallAgent extends ProxyCallAgentCommon implements ProxyHandler<DeclarativeCallAgent> {\n  private _callAgent: CallAgent;\n  constructor(callAgent: CallAgent, context: CallContext, internalContext: InternalCallContext) {\n    super(context, internalContext);\n    this._callAgent = callAgent;\n    this.subscribe();\n  }\n  private subscribe = (): void => {\n    this._callAgent.on('callsUpdated', this.callsUpdated);\n    this._callAgent.on('incomingCall', this.incomingCall);\n\n    // There could be scenario that when ProxyCallAgent is created that the given CallAgent already has Calls. In this\n    // case we need to make sure to subscribe to those already existing Calls.\n    for (const call of this._callAgent.calls) {\n      this.addCall(call);\n    }\n  };\n  protected unsubscribe = (): void => {\n    this._callAgent.off('callsUpdated', this.callsUpdated);\n    this._callAgent.off('incomingCall', this.incomingCall);\n    this.unregisterSubscriber();\n  };\n  protected callDeclaratify(call: CallCommon, context: CallContext): DeclarativeCallCommon {\n    if (_isACSCall(call)) {\n      return callDeclaratify(call, context);\n    }\n    throw new Error('Not reachable code, DeclarativeCallAgent.callDeclaratify must be called with an ACS call.');\n  }\n  protected startCall(agent: CallAgentCommon, args: Parameters<CallAgent['startCall']>): CallCommon {\n    if (_isACSCallAgent(agent)) {\n      return agent.startCall(...args);\n    }\n    throw Error('Unreachable code, DeclarativeCallAgent.startCall must be called with an ACS callAgent.');\n  }\n  protected joinCall(agent: CallAgentCommon, args: Parameters<CallAgent['join']>): CallCommon {\n    if (_isACSCallAgent(agent)) {\n      return agent.join(...args);\n    }\n    throw Error('Unreachable code, DeclarativeCallAgent.joinCall must be called with an ACS callAgent.');\n  }\n  protected agentSubscribe(agent: CallAgentCommon, args: Parameters<CallAgent['on']>): void {\n    if (_isACSCallAgent(agent)) {\n      return agent.on(...args);\n    }\n    throw Error('Unreachable code, DeclarativeCallAgent.agentSubscribe must be called with an ACS callAgent.');\n  }\n  protected agentUnsubscribe(agent: CallAgentCommon, args: Parameters<CallAgent['off']>): void {\n    if (_isACSCallAgent(agent)) {\n      return agent.off(...args);\n    }\n    throw Error('Unreachable code, DeclarativeCallAgent.agentUnsubscribe must be called with an ACS callAgent.');\n  }\n  public get<P extends keyof CallAgent>(target: CallAgent, prop: P): any {\n    return super.getCommon(target, prop);\n  }\n}\n\n/**\n * Creates a declarative CallAgent by proxying CallAgent with ProxyCallAgent which will track state updates by updating\n * the given context.\n *\n * @param callAgent - CallAgent from SDK\n * @param context - CallContext from StatefulCallClient\n * @param internalContext- InternalCallContext from StatefulCallClient\n */\nexport const callAgentDeclaratify = (callAgent: CallAgent, context: CallContext, internalContext: InternalCallContext): DeclarativeCallAgent => {\n  clearCallRelatedState(context, internalContext);\n  return (new Proxy(callAgent, new ProxyCallAgent(callAgent, context, internalContext)) as DeclarativeCallAgent);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { LocalVideoStream, MediaStreamType, RemoteVideoStream, VideoStreamRenderer } from '@azure/communication-calling';\nimport { LocalVideoStreamState } from './CallClientState';\nimport type { CallContext } from './CallContext';\nimport { CallIdHistory } from './CallIdHistory';\n\n/* @conditional-compile-remove(video-background-effects) */\nimport { LocalVideoStreamVideoEffectsSubscriber } from './LocalVideoStreamVideoEffectsSubscriber';\n/* @conditional-compile-remove(video-background-effects) */\nimport { Features } from '@azure/communication-calling';\n\n/**\n * Internally tracked render status. Stores the status of a video render of a stream as rendering could take a long\n * time.\n *\n * 'NotRendered' - the stream has not yet been rendered\n * 'Rendering' - the stream is currently rendering\n * 'Rendered' - the stream has been rendered\n * 'Stopping' - the stream is currently rendering but has been signaled to stop\n */\nexport type RenderStatus = 'NotRendered' | 'Rendering' | 'Rendered' | 'Stopping';\n\n/**\n * Internal container to hold common state needed to keep track of renders.\n */\nexport interface RenderInfo<T> {\n  status: RenderStatus;\n  renderer: VideoStreamRenderer | undefined;\n  stream: T;\n}\n\n/**\n * Internally used to keep track of the status, renderer, and awaiting promise, associated with a LocalVideoStream.\n */\nexport type LocalRenderInfo = RenderInfo<LocalVideoStream>;\n\n/**\n * Internally used to keep track of the status, renderer, and awaiting promise, associated with a RemoteVideoStream.\n */\nexport type RemoteRenderInfo = RenderInfo<RemoteVideoStream>;\n\n/**\n * Contains internal data used between different Declarative components to share data.\n */\nexport class InternalCallContext {\n  // <CallId, <ParticipantKey, <StreamId, RemoteRenderInfo>>\n  private _remoteRenderInfos = new Map<string, Map<string, Map<number, RemoteRenderInfo>>>();\n\n  // <CallId, <MediaStreamType, LocalRenderInfo>>.\n  private _localRenderInfos = new Map<string, Map<MediaStreamType, LocalRenderInfo>>();\n\n  // Used for keeping track of rendered LocalVideoStreams that are not part of a Call.\n  private _unparentedRenderInfos = new Map<MediaStreamType, LocalRenderInfo>();\n  private _callIdHistory = new CallIdHistory();\n\n  // Used for keeping track of video effects subscribers that are not part of a Call.\n  // The key is the stream ID. We assume each stream ID\n  /* @conditional-compile-remove(video-background-effects) */\n  private _unparentedViewVideoEffectsSubscriber = new Map<string, LocalVideoStreamVideoEffectsSubscriber | undefined>();\n  public setCallId(newCallId: string, oldCallId: string): void {\n    this._callIdHistory.updateCallIdHistory(newCallId, oldCallId);\n    const remoteRenderInfos = this._remoteRenderInfos.get(oldCallId);\n    if (remoteRenderInfos) {\n      this._remoteRenderInfos.delete(oldCallId);\n      this._remoteRenderInfos.set(newCallId, remoteRenderInfos);\n    }\n    const localRenderInfos = this._localRenderInfos.get(oldCallId);\n    if (localRenderInfos) {\n      this._localRenderInfos.delete(oldCallId);\n      this._localRenderInfos.set(newCallId, localRenderInfos);\n    }\n  }\n  public getCallIds(): IterableIterator<string> {\n    return this._remoteRenderInfos.keys();\n  }\n  public getRemoteRenderInfoForCall(callId: string): Map<string, Map<number, RemoteRenderInfo>> | undefined {\n    return this._remoteRenderInfos.get(this._callIdHistory.latestCallId(callId));\n  }\n  public getRemoteRenderInfoForParticipant(callId: string, participantKey: string, streamId: number): RemoteRenderInfo | undefined {\n    const callRenderInfos = this._remoteRenderInfos.get(this._callIdHistory.latestCallId(callId));\n    if (!callRenderInfos) {\n      return undefined;\n    }\n    const participantRenderInfos = callRenderInfos.get(participantKey);\n    if (!participantRenderInfos) {\n      return undefined;\n    }\n    return participantRenderInfos.get(streamId);\n  }\n  public setRemoteRenderInfo(callId: string, participantKey: string, streamId: number, stream: RemoteVideoStream, status: RenderStatus, renderer: VideoStreamRenderer | undefined): void {\n    let callRenderInfos = this._remoteRenderInfos.get(this._callIdHistory.latestCallId(callId));\n    if (!callRenderInfos) {\n      callRenderInfos = new Map<string, Map<number, RemoteRenderInfo>>();\n      this._remoteRenderInfos.set(this._callIdHistory.latestCallId(callId), callRenderInfos);\n    }\n    let participantRenderInfos = callRenderInfos.get(participantKey);\n    if (!participantRenderInfos) {\n      participantRenderInfos = new Map<number, RemoteRenderInfo>();\n      callRenderInfos.set(participantKey, participantRenderInfos);\n    }\n    participantRenderInfos.set(streamId, {\n      stream,\n      status,\n      renderer\n    });\n  }\n  public deleteRemoteRenderInfo(callId: string, participantKey: string, streamId: number): void {\n    const callRenderInfos = this._remoteRenderInfos.get(this._callIdHistory.latestCallId(callId));\n    if (!callRenderInfos) {\n      return;\n    }\n    const participantRenderInfos = callRenderInfos.get(participantKey);\n    if (!participantRenderInfos) {\n      return;\n    }\n    participantRenderInfos.delete(streamId);\n  }\n  public setLocalRenderInfo(callId: string, streamKey: MediaStreamType, stream: LocalVideoStream, status: RenderStatus, renderer: VideoStreamRenderer | undefined): void {\n    let localRenderInfosForCall = this._localRenderInfos.get(this._callIdHistory.latestCallId(callId));\n    if (!localRenderInfosForCall) {\n      localRenderInfosForCall = new Map<MediaStreamType, LocalRenderInfo>();\n      this._localRenderInfos.set(this._callIdHistory.latestCallId(callId), localRenderInfosForCall);\n    }\n    localRenderInfosForCall.set(streamKey, {\n      stream,\n      status,\n      renderer\n    });\n  }\n  public getLocalRenderInfosForCall(callId: string): Map<MediaStreamType, LocalRenderInfo> | undefined {\n    return this._localRenderInfos.get(this._callIdHistory.latestCallId(callId));\n  }\n  public getLocalRenderInfo(callId: string, streamKey: MediaStreamType): LocalRenderInfo | undefined {\n    const localRenderInfosForCall = this._localRenderInfos.get(this._callIdHistory.latestCallId(callId));\n    if (!localRenderInfosForCall) {\n      return undefined;\n    }\n    return localRenderInfosForCall.get(streamKey);\n  }\n  public deleteLocalRenderInfo(callId: string, streamKey: MediaStreamType): void {\n    const localRenderInfoForCall = this._localRenderInfos.get(this._callIdHistory.latestCallId(callId));\n    if (!localRenderInfoForCall) {\n      return;\n    }\n    localRenderInfoForCall.delete(streamKey);\n  }\n  public getUnparentedRenderInfo(localVideoStream: LocalVideoStreamState): LocalRenderInfo | undefined {\n    return this._unparentedRenderInfos.get(localVideoStream.mediaStreamType);\n  }\n  public getUnparentedRenderInfos(): LocalVideoStream[] {\n    return [...this._unparentedRenderInfos].map(([, renderInfo]) => renderInfo.stream);\n  }\n  public setUnparentedRenderInfo(statefulStream: LocalVideoStreamState, stream: LocalVideoStream, status: RenderStatus, renderer: VideoStreamRenderer | undefined): void {\n    this._unparentedRenderInfos.set(statefulStream.mediaStreamType, {\n      stream,\n      status,\n      renderer\n    });\n  }\n  public deleteUnparentedRenderInfo(localVideoStream: LocalVideoStreamState): void {\n    /* @conditional-compile-remove(video-background-effects) */\n    this._unparentedViewVideoEffectsSubscriber.get(localVideoStream.mediaStreamType)?.unsubscribe();\n    this._unparentedRenderInfos.delete(localVideoStream.mediaStreamType);\n  }\n  public subscribeToUnparentedViewVideoEffects(localVideoStream: LocalVideoStream, callContext: CallContext): void {\n    /* @conditional-compile-remove(video-background-effects) */\n    {\n      // Ensure we aren't setting multiple subscriptions\n      this._unparentedViewVideoEffectsSubscriber.get(localVideoStream.mediaStreamType)?.unsubscribe();\n      this._unparentedViewVideoEffectsSubscriber.set(localVideoStream.mediaStreamType, new LocalVideoStreamVideoEffectsSubscriber({\n        parent: 'unparented',\n        context: callContext,\n        localVideoStream: localVideoStream,\n        localVideoStreamEffectsAPI: localVideoStream.feature(Features.VideoEffects)\n      }));\n    }\n  }\n\n  // UnparentedRenderInfos are not cleared as they are not part of the Call state.\n  public clearCallRelatedState(): void {\n    this._remoteRenderInfos.clear();\n    this._localRenderInfos.clear();\n  }\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { VideoStreamRendererView } from '@azure/communication-calling';\nimport { CallContext } from './CallContext';\n\n/**\n * @private\n */\nexport class ProxyVideoStreamRendererView implements ProxyHandler<VideoStreamRendererView> {\n  private _context: CallContext;\n  private _callId: string;\n  private _participantId: string;\n  private _streamId: number;\n  constructor(context: CallContext, callId: string, participantId: string, _streamId: number) {\n    this._context = context;\n    this._callId = callId;\n    this._participantId = participantId;\n    this._streamId = _streamId;\n  }\n  public get<P extends keyof VideoStreamRendererView>(target: VideoStreamRendererView, prop: P): any {\n    switch (prop) {\n      case 'updateScalingMode':\n        {\n          return async (...args: Parameters<VideoStreamRendererView['updateScalingMode']>) => {\n            await target.updateScalingMode(...args);\n            this._context.setRemoteVideoStreamViewScalingMode(this._callId, this._participantId, this._streamId, args[0]);\n          };\n        }\n      default:\n        return Reflect.get(target, prop);\n    }\n  }\n}\n\n/**\n * Creates a declarative VideoStreamRendererView that is backed by a VideoStreamRendererView from the SDK.\n * Calling methods on this declarative object triggers state updates in the stateful client.\n */\nexport const videoStreamRendererViewDeclaratify = (view: VideoStreamRendererView, context: CallContext, callId: string, participantId: string, streamId: number): VideoStreamRendererView => {\n  const proxyVideoStreamRendererView = new ProxyVideoStreamRendererView(context, callId, participantId, streamId);\n  return (new Proxy(view, proxyVideoStreamRendererView) as VideoStreamRendererView);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { deviceManagerDeclaratify } from './DeviceManagerDeclarative';\nimport { CallClient, CallClientOptions, CreateViewOptions, DeviceManager } from '@azure/communication-calling';\nimport { CallClientState, LocalVideoStreamState, RemoteVideoStreamState } from './CallClientState';\nimport { CallContext } from './CallContext';\nimport { callAgentDeclaratify, DeclarativeCallAgent } from './CallAgentDeclarative';\nimport { InternalCallContext } from './InternalCallContext';\nimport { createView, disposeView, CreateViewResult } from './StreamUtils';\nimport { CommunicationIdentifier, CommunicationUserIdentifier, getIdentifierKind } from '@azure/communication-common';\nimport { toFlatCommunicationIdentifier, _getApplicationId, _TelemetryImplementationHint } from '@internal/acs-ui-common';\nimport { callingStatefulLogger } from './Logger';\nimport { videoStreamRendererViewDeclaratify } from './VideoStreamRendererViewDeclarative';\n\n/**\n * Defines the methods that allow CallClient {@link @azure/communication-calling#CallClient} to be used statefully.\n * The interface provides access to proxied state and also allows registering a handler for state change events. For\n * state definition see {@link CallClientState}.\n *\n * State change events are driven by:\n * - Returned data from {@link @azure/communication-calling#DeviceManager} APIs.\n * - Returned data from {@link @azure/communication-calling#CallAgent} APIs.\n * - Listeners automatically attached to various azure communication-calling objects:\n *   - CallAgent 'incomingCall'\n *   - CallAgent 'callsUpdated'\n *   - DeviceManager 'videoDevicesUpdated'\n *   - DeviceManager 'audioDevicesUpdated\n *   - DeviceManager 'selectedMicrophoneChanged'\n *   - DeviceManager 'selectedSpeakerChanged'\n *   - Call 'stateChanged'\n *   - Call 'idChanged'\n *   - Call 'isMutedChanged'\n *   - Call 'isScreenSharingOnChanged'\n *   - Call 'remoteParticipantsUpdated'\n *   - Call 'localVideoStreamsUpdated'\n *   - IncomingCall 'callEnded'\n *   - RemoteParticipant 'stateChanged'\n *   - RemoteParticipant 'isMutedChanged'\n *   - RemoteParticipant 'displayNameChanged'\n *   - RemoteParticipant 'isSpeakingChanged'\n *   - RemoteParticipant 'videoStreamsUpdated'\n *   - RemoteVideoStream 'isAvailableChanged'\n *   - TranscriptionCallFeature 'isTranscriptionActiveChanged'\n *   - RecordingCallFeature 'isRecordingActiveChanged'\n *   - RaiseHandCallFeature 'raisedHandEvent'\n *   - RaiseHandCallFeature 'loweredHandEvent'\n *   - PPTLiveCallFeature 'isAciveChanged'\n *   - ReactionCallFeature 'reaction'\n *\n * @public\n */\nexport interface StatefulCallClient extends CallClient {\n  /**\n   * Holds all the state that we could proxy from CallClient {@link @azure/communication-calling#CallClient} as\n   * CallClientState {@link CallClientState}.\n   */\n  getState(): CallClientState;\n  /**\n   * Allows a handler to be registered for 'stateChanged' events.\n   *\n   * @param handler - Callback to receive the state.\n   */\n  onStateChange(handler: (state: CallClientState) => void): void;\n  /**\n   * Allows unregistering for 'stateChanged' events.\n   *\n   * @param handler - Original callback to be unsubscribed.\n   */\n  offStateChange(handler: (state: CallClientState) => void): void;\n  /**\n   * Renders a {@link RemoteVideoStreamState} or {@link LocalVideoStreamState} and stores the resulting\n   * {@link VideoStreamRendererViewState} under the relevant {@link RemoteVideoStreamState} or\n   * {@link LocalVideoStreamState} or as unparented view in the state. Under the hood calls\n   * {@link @azure/communication-calling#VideoStreamRenderer.createView}.\n   *\n   * Scenario 1: Render RemoteVideoStreamState\n   * - CallId is required, participantId is required, and stream of type RemoteVideoStreamState is required\n   * - Resulting {@link VideoStreamRendererViewState} is stored in the given callId and participantId in\n   * {@link CallClientState}\n   *\n   * Scenario 2: Render LocalVideoStreamState for a call\n   * - CallId is required, participantId must be undefined, and stream of type LocalVideoStreamState is required.\n   * - The {@link @azure/communication-calling#Call.localVideoStreams} must already be started using\n   *   {@link @azure/communication-calling#Call.startVideo}.\n   * - Resulting {@link VideoStreamRendererViewState} is stored in the given callId {@link CallState.localVideoStreams}\n   *   in {@link CallClientState}.\n   *\n   * - Scenario 2: Render LocalVideoStreamState not part of a call (example rendering camera for local preview)\n   * - CallId must be undefined, participantId must be undefined, and stream of type LocalVideoStreamState is required.\n   * - Resulting {@link VideoStreamRendererViewState} is stored in under the given LocalVideoStreamState in\n   *   {@link CallClientState.deviceManager.unparentedViews}\n   *\n   * @param callId - CallId for the given stream. Can be undefined if the stream is not part of any call.\n   * @param participantId - {@link RemoteParticipant.identifier} associated with the given RemoteVideoStreamState. Could\n   *   be undefined if rendering LocalVideoStreamState.\n   * @param stream - The LocalVideoStreamState or RemoteVideoStreamState to start rendering.\n   * @param options - Options that are passed to the {@link @azure/communication-calling#VideoStreamRenderer}.\n   */\n  createView(callId: string | undefined, participantId: CommunicationIdentifier | undefined, stream: LocalVideoStreamState | RemoteVideoStreamState, options?: CreateViewOptions): Promise<CreateViewResult | undefined>;\n  /**\n   * Stops rendering a {@link RemoteVideoStreamState} or {@link LocalVideoStreamState} and removes the\n   * {@link VideoStreamRendererView} from the relevant {@link RemoteVideoStreamState} in {@link CallClientState} or\n   * {@link LocalVideoStream} in {@link CallClientState} or appropriate\n   * {@link CallClientState.deviceManager.unparentedViews} Under the hood calls\n   * {@link @azure/communication-calling#VideoStreamRenderer.dispose}.\n   *\n   * Its important to disposeView to clean up resources properly.\n   *\n   * Scenario 1: Dispose RemoteVideoStreamState\n   * - CallId is required, participantId is required, and stream of type RemoteVideoStreamState is required\n   *\n   * Scenario 2: Dispose LocalVideoStreamState for a call\n   * - CallId is required, participantId must be undefined, and stream of type LocalVideoStreamState is required.\n   *\n   * - Scenario 2: Dispose LocalVideoStreamState not part of a call\n   * - CallId must be undefined, participantId must be undefined, and stream of type LocalVideoStreamState is required.\n   * - LocalVideoStreamState must be the original one passed to createView.\n   *\n   * @param callId - CallId for the given stream. Can be undefined if the stream is not part of any call.\n   * @param participantId - {@link RemoteParticipant.identifier} associated with the given RemoteVideoStreamState. Could\n   *   be undefined if disposing LocalVideoStreamState.\n   * @param stream - The LocalVideoStreamState or RemoteVideoStreamState to dispose.\n   */\n  disposeView(callId: string | undefined, participantId: CommunicationIdentifier | undefined, stream: LocalVideoStreamState | RemoteVideoStreamState): void;\n}\n\n/**\n * A function to modify the state of the StatefulCallClient.\n *\n * Provided as a callback to the {@link StatefulCallClient.modifyState} method.\n *\n * The function must modify the provided state in place as much as possible.\n * Making large modifications can lead to bad performance by causing spurious rerendering of the UI.\n *\n * Consider using commonly used modifier functions exported from this package.\n */\nexport type CallStateModifier = (state: CallClientState) => void;\n\n/**\n * ProxyCallClient proxies CallClient {@link @azure/communication-calling#CallClient} and subscribes to all events that\n * affect state. ProxyCallClient keeps its own copy of the call state and when state is updated, ProxyCallClient emits\n * the event 'stateChanged'.\n */\nclass ProxyCallClient implements ProxyHandler<CallClient> {\n  private _context: CallContext;\n  private _internalContext: InternalCallContext;\n  private _callAgent: DeclarativeCallAgent | undefined;\n  private _deviceManager: DeviceManager | undefined;\n  private _sdkDeviceManager: DeviceManager | undefined;\n  constructor(context: CallContext, internalContext: InternalCallContext) {\n    this._context = context;\n    this._internalContext = internalContext;\n  }\n  public get<P extends keyof CallClient>(target: CallClient, prop: P): any {\n    switch (prop) {\n      case 'createCallAgent':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<CallClient['createCallAgent']>): Promise<DeclarativeCallAgent> => {\n            // createCallAgent will throw an exception if the previous callAgent was not disposed. If the previous\n            // callAgent was disposed then it would have unsubscribed to events so we can just create a new declarative\n            // callAgent if the createCallAgent succeeds.\n            const callAgent = await target.createCallAgent(...args);\n            this._callAgent = callAgentDeclaratify(callAgent, this._context, this._internalContext);\n            this._context.setCallAgent({\n              displayName: this._callAgent.displayName\n            });\n            return this._callAgent;\n          }, 'CallClient.createCallAgent');\n        }\n      case 'createTeamsCallAgent':\n        {\n          return Reflect.get(target, prop);\n        }\n      case 'getDeviceManager':\n        {\n          return this._context.withAsyncErrorTeedToState(async () => {\n            // As of writing, the SDK always returns the same instance of DeviceManager so we keep a reference of\n            // DeviceManager and if it does not change we return the cached DeclarativeDeviceManager. If it does not we'll\n            // throw an error that indicate we need to fix this issue as our implementation has diverged from the SDK.\n            const deviceManager = await target.getDeviceManager();\n            if (this._sdkDeviceManager) {\n              if (this._sdkDeviceManager === deviceManager) {\n                return this._deviceManager;\n              } else {\n                throw new Error('Multiple DeviceManager not supported. This means a incompatible version of communication-calling is ' + 'used OR calling declarative was not properly updated to communication-calling version.');\n              }\n            } else {\n              this._sdkDeviceManager = deviceManager;\n            }\n            this._deviceManager = deviceManagerDeclaratify(deviceManager, this._context, this._internalContext);\n            return this._deviceManager;\n          }, 'CallClient.getDeviceManager');\n        }\n      case 'feature':\n        {}\n      default:\n        return Reflect.get(target, prop);\n    }\n  }\n}\n\n/**\n * Arguments to construct the StatefulCallClient.\n *\n * @public\n */\nexport type StatefulCallClientArgs = {\n  /**\n   * UserId from SDK. This is provided for developer convenience to easily access the userId from the\n   * state. It is not used by StatefulCallClient.\n   */\n  userId: CommunicationUserIdentifier;\n};\n\n/**\n * Options to construct the StatefulCallClient with.\n *\n * @public\n */\nexport type StatefulCallClientOptions = {\n  /**\n   * Options to construct the {@link @axure/communication-calling#CallClient} with.\n   */\n  callClientOptions: CallClientOptions;\n  /**\n   * Sets the max listeners limit of the 'stateChange' event. Defaults to the node.js EventEmitter.defaultMaxListeners\n   * if not specified.\n   */\n  maxStateChangeListeners?: number;\n};\n\n/**\n * Creates a StatefulCallClient {@link StatefulCallClient} by proxying CallClient\n * {@link @azure/communication-calling#CallClient} with ProxyCallClient {@link ProxyCallClient} which then allows access\n * to state in a declarative way.\n *\n * It is important to use the {@link @azure/communication-calling#DeviceManager} and\n * {@link @azure/communication-calling#CallAgent} and {@link @azure/communication-calling#Call} (and etc.) that are\n * obtained from the StatefulCallClient in order for their state changes to be proxied properly.\n *\n * @param args - {@link StatefulCallClientArgs}\n * @param options - {@link StatefulCallClientOptions}\n *\n * @public\n */\nexport const createStatefulCallClient = (args: StatefulCallClientArgs, options?: StatefulCallClientOptions): StatefulCallClient => {\n  return _createStatefulCallClientInner(args, options);\n};\n\n/**\n * This inner function is used to allow injection of TelemetryImplementationHint without changing the public API.\n *\n * @internal\n */\nexport const _createStatefulCallClientInner = (args: StatefulCallClientArgs, options?: StatefulCallClientOptions, telemetryImplementationHint: _TelemetryImplementationHint = 'StatefulComponents'): StatefulCallClient => {\n  callingStatefulLogger.info(`Creating calling stateful client using library version: ${_getApplicationId(telemetryImplementationHint)}`);\n  return createStatefulCallClientWithDeps(new CallClient(withTelemetryTag(telemetryImplementationHint, options?.callClientOptions)), new CallContext(getIdentifierKind(args.userId), options?.maxStateChangeListeners), new InternalCallContext());\n};\n\n/**\n * Package-internal version of createStatefulCallClient that allows dependency injection.\n *\n * This function should not be exported from the package.\n */\nexport const createStatefulCallClientWithDeps = (callClient: CallClient, context: CallContext, internalContext: InternalCallContext): StatefulCallClient => {\n  Object.defineProperty(callClient, 'getState', {\n    configurable: false,\n    value: () => context.getState()\n  });\n  Object.defineProperty(callClient, 'onStateChange', {\n    configurable: false,\n    value: (handler: (state: CallClientState) => void) => context.onStateChange(handler)\n  });\n  Object.defineProperty(callClient, 'offStateChange', {\n    configurable: false,\n    value: (handler: (state: CallClientState) => void) => context.offStateChange(handler)\n  });\n  Object.defineProperty(callClient, 'createView', {\n    configurable: false,\n    value: async (callId: string | undefined, participantId: CommunicationIdentifier | undefined, stream: LocalVideoStreamState | RemoteVideoStreamState, options?: CreateViewOptions): Promise<CreateViewResult | undefined> => {\n      const participantIdKind = participantId ? getIdentifierKind(participantId) : undefined;\n      const result = await createView(context, internalContext, callId, participantIdKind, stream, options);\n      // We only need to declaratify the VideoStreamRendererView object for remote participants. Because the updateScalingMode only needs to be called on remote participant stream views.\n      if ('id' in stream && callId && participantId && result) {\n        const participantKey = toFlatCommunicationIdentifier(participantId);\n        result.view = videoStreamRendererViewDeclaratify(result.view, context, callId, participantKey, stream.id);\n      }\n      return result;\n    }\n  });\n  Object.defineProperty(callClient, 'disposeView', {\n    configurable: false,\n    value: (callId: string | undefined, participantId: CommunicationIdentifier | undefined, stream: LocalVideoStreamState | RemoteVideoStreamState): void => {\n      const participantIdKind = participantId ? getIdentifierKind(participantId) : undefined;\n      disposeView(context, internalContext, callId, participantIdKind, stream);\n    }\n  });\n  return (new Proxy(callClient, new ProxyCallClient(context, internalContext)) as StatefulCallClient);\n};\nconst withTelemetryTag = (telemetryImplementationHint: _TelemetryImplementationHint, options?: CallClientOptions): CallClientOptions => {\n  const tags = options?.diagnostics?.tags ?? [];\n  tags.push(_getApplicationId(telemetryImplementationHint));\n  return {\n    ...options,\n    diagnostics: {\n      ...options?.diagnostics,\n      tags\n    }\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallAgent } from '@azure/communication-calling';\nimport { _isACSCallAgent } from '@internal/calling-stateful-client';\nimport React, { createContext, useContext } from 'react';\n\n/**\n * @private\n */\nexport type CallAgentContextType = {\n  callAgent: CallAgent | undefined;\n};\n\n/**\n * @private\n */\nexport const CallAgentContext = createContext<CallAgentContextType | undefined>(undefined);\n\n/**\n * Arguments to initialize a {@link CallAgentProvider}.\n *\n * @public\n */\nexport interface CallAgentProviderProps {\n  children: React.ReactNode;\n  callAgent?: CallAgent;\n}\nconst CallAgentProviderBase = (props: CallAgentProviderProps): JSX.Element => {\n  const {\n    callAgent\n  } = props;\n  const initialState: CallAgentContextType = {\n    callAgent\n  };\n  return <CallAgentContext.Provider value={initialState}>{props.children}</CallAgentContext.Provider>;\n};\n\n/**\n * A {@link React.Context} that stores a {@link @azure/communication-calling#CallAgent}.\n *\n * Calling components from this package must be wrapped with a {@link CallAgentProvider}.\n *\n * @public\n */\nexport const CallAgentProvider = (props: CallAgentProviderProps): JSX.Element => <CallAgentProviderBase {...props} />;\n\n/**\n * Hook to obtain {@link @azure/communication-calling#CallAgent} from the provider.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const useCallAgent = (): CallAgent | undefined => {\n  const callAgent = useContext(CallAgentContext)?.callAgent;\n  if (callAgent && !_isACSCallAgent(callAgent)) {\n    throw new Error('TeamsCallAgent object was provided, try useTeamsCall() instead');\n  }\n  return callAgent;\n};\n\n/**\n * Hook to obtain {@link @azure/communication-calling#TeamsCallAgent} from the provider.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @beta\n */\nexport const useTeamsCallAgent = (): undefined => {\n  const callAgent = useContext(CallAgentContext)?.callAgent;\n  if (callAgent && _isACSCallAgent(callAgent)) {\n    throw new Error('Regular CallAgent object was provided, try useCall() instead');\n  }\n  return callAgent;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { StatefulCallClient, StatefulDeviceManager } from '@internal/calling-stateful-client';\nimport React, { createContext, useContext, useEffect, useState } from 'react';\n\n/**\n * @private\n */\nexport type CallClientContextType = {\n  callClient: StatefulCallClient;\n  deviceManager: StatefulDeviceManager | undefined;\n};\n\n/**\n * @private\n */\nexport const CallClientContext = createContext<CallClientContextType | undefined>(undefined);\n\n/**\n * Arguments to initialize a {@link CallClientProvider}.\n *\n * @public\n */\nexport interface CallClientProviderProps {\n  children: React.ReactNode;\n  callClient: StatefulCallClient;\n}\n\n/**\n * @private\n */\nconst CallClientProviderBase = (props: CallClientProviderProps): JSX.Element => {\n  const {\n    callClient\n  } = props;\n  const [deviceManager, setDeviceManager] = useState<StatefulDeviceManager | undefined>(undefined);\n\n  /**\n   * Initialize the DeviceManager inside CallClientState\n   */\n  useEffect(() => {\n    callClient.getDeviceManager().then(manager => {\n      manager.getCameras();\n      manager.getMicrophones();\n      manager.getSpeakers();\n      setDeviceManager((manager as StatefulDeviceManager));\n    }).catch(error => {\n      throw new Error(error);\n    });\n  }, [callClient]);\n  const initialState: CallClientContextType = {\n    callClient,\n    deviceManager\n  };\n  return <CallClientContext.Provider value={initialState}>{props.children}</CallClientContext.Provider>;\n};\n\n/**\n * A {@link React.Context} that stores a {@link StatefulCallClient}.\n *\n * Calling components from this package must be wrapped with a {@link CallClientProvider}.\n *\n * @public\n */\nexport const CallClientProvider = (props: CallClientProviderProps): JSX.Element => <CallClientProviderBase {...props} />;\n\n/**\n * Hook to obtain {@link StatefulCallClient} from the provider.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const useCallClient = (): StatefulCallClient => {\n  const context = useContext(CallClientContext);\n  if (context === undefined) {\n    throw new Error('CallClient Context is undefined');\n  }\n  return context.callClient;\n};\n\n/**\n * Hook to obtain {@link StatefulDeviceManager} from the provider.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const useDeviceManager = (): StatefulDeviceManager | undefined => {\n  return useContext(CallClientContext)?.deviceManager;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useContext, createContext } from 'react';\nimport { Call } from '@azure/communication-calling';\nimport { _isACSCall, _isTeamsCall } from '@internal/calling-stateful-client';\n\n/**\n * @private\n */\nexport type CallContextType = {\n  call: Call | undefined;\n};\n\n/**\n * Arguments to initialize a {@link CallProvider}.\n *\n * @public\n */\nexport interface CallProviderProps {\n  children: React.ReactNode;\n  call?: Call;\n}\n\n/**\n * @private\n */\nexport const CallContext = createContext<CallContextType | undefined>(undefined);\n\n/**\n * @private\n */\nconst CallProviderBase = (props: CallProviderProps): JSX.Element => {\n  const {\n    children,\n    call\n  } = props;\n  const initialState: CallContextType = {\n    call\n  };\n  return <CallContext.Provider value={initialState}>{children}</CallContext.Provider>;\n};\n\n/**\n * A {@link React.Context} that stores a {@link @azure/communication-calling#Call}.\n *\n * Calling components from this package must be wrapped with a {@link CallProvider}.\n *\n * @public\n */\nexport const CallProvider = (props: CallProviderProps): JSX.Element => <CallProviderBase {...props} />;\n\n/**\n * Hook to obtain {@link @azure/communication-calling#Call} from the provider.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * you must have previously used the CallProvider with a Call object to use this hook\n *\n * @public\n */\nexport const useCall = (): Call | undefined => {\n  const call = useContext(CallContext)?.call;\n  if (call && !_isACSCall(call)) {\n    throw new Error('Incorrect call type: Must provide a Regular Call object.');\n  }\n  return call;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const typingIndicatorContainerStyle = mergeStyles({\n  minHeight: '2.125rem',\n  // flexFlow set to column-reverse to align the text to the bottom of the container\n  flexFlow: 'column-reverse'\n});\n\n/**\n * @private\n */\nexport const typingIndicatorStringStyle = mergeStyles({\n  fontWeight: 400,\n  width: '100%',\n  alignSelf: 'center',\n  wordBreak: 'break-word'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ComponentLocale } from '..';\nimport en_US from './en-US/strings.json';\n\n/**\r\n * Locale for English (US).\r\n *\r\n * @public\r\n */\nexport const COMPONENT_LOCALE_EN_US: ComponentLocale = {\n  strings: en_US\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { createContext, useContext } from 'react';\nimport { CameraButtonStrings, EndCallButtonStrings, ErrorBarStrings, MessageStatusIndicatorStrings, MessageThreadStrings, MicrophoneButtonStrings, DevicesButtonStrings, ParticipantsButtonStrings, ParticipantItemStrings, ScreenShareButtonStrings, SendBoxStrings, TypingIndicatorStrings, VideoGalleryStrings } from '../components';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaiseHandButtonStrings } from '../components';\n/* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\nimport { DialpadStrings } from '../components';\nimport { COMPONENT_LOCALE_EN_US } from './locales';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { VerticalGalleryStrings } from '../components/VerticalGallery';\n/* @conditional-compile-remove(image-overlay) */\nimport { ImageOverlayStrings } from '../components/ImageOverlay';\n/**\n * Locale information for all components exported from this library.\n *\n * @public\n */\nexport interface ComponentLocale {\n  /** Strings for components */\n  strings: ComponentStrings;\n}\n\n/**\n * Strings used by all components exported from this library.\n *\n * @public\n */\nexport interface ComponentStrings {\n  /** Strings for MessageThread */\n  messageThread: MessageThreadStrings;\n  /** Strings for ParticipantItem */\n  participantItem: ParticipantItemStrings;\n  /** Strings for CameraButton */\n  cameraButton: CameraButtonStrings;\n  /** Strings for MicrophoneButton */\n  microphoneButton: MicrophoneButtonStrings;\n  /** Strings for EndCallButton */\n  endCallButton: EndCallButtonStrings;\n  /** Strings for DevicesButton */\n  devicesButton: DevicesButtonStrings;\n  /** Strings for ParticipantsButton */\n  participantsButton: ParticipantsButtonStrings;\n  /** Strings for ScreenShareButton */\n  screenShareButton: ScreenShareButtonStrings;\n  /* @conditional-compile-remove(raise-hand) */\n  /** Strings for RaiseHandButton */\n  raiseHandButton: RaiseHandButtonStrings;\n  /** Strings for TypingIndicator */\n  typingIndicator: TypingIndicatorStrings;\n  /** Strings for SendBox */\n  sendBox: SendBoxStrings;\n  /* @conditional-compile-remove(image-overlay) */\n  /** Strings for ImageOverlay */\n  imageOverlay: ImageOverlayStrings;\n  /** Strings for MessageStatusIndicator */\n  messageStatusIndicator: MessageStatusIndicatorStrings;\n  /** Strings for ErroBar */\n  errorBar: ErrorBarStrings;\n  /** Strings for VideoGallery */\n  videoGallery: VideoGalleryStrings;\n  /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\n  /** Strings for Dialpad */\n  dialpad: DialpadStrings;\n  /* @conditional-compile-remove(vertical-gallery) */\n  /**\n   * Strings for the VerticalGallery.\n   */\n  verticalGallery: VerticalGalleryStrings;\n  /* @conditional-compile-remove(hide-attendee-name) */\n}\n\n/**\n * Context for providing localized strings to components exported from this library.\n *\n * @public\n */\nexport const LocaleContext = createContext<ComponentLocale>(COMPONENT_LOCALE_EN_US);\n\n/**\n * Props for {@link LocalizationProvider}.\n *\n * @public\n */\nexport type LocalizationProviderProps = {\n  /** Locale context to provide components */\n  locale: ComponentLocale;\n  /** Children to provide locale context. */\n  children: React.ReactNode;\n};\n\n/**\n * Provider to provide localized strings for this library's react components.\n *\n * @remarks Components will be provided localized strings in English (US) by default if this\n * provider is not used.\n *\n * @public\n */\nexport const LocalizationProvider = (props: LocalizationProviderProps): JSX.Element => {\n  const {\n    locale,\n    children\n  } = props;\n  return <LocaleContext.Provider value={locale}>{children}</LocaleContext.Provider>;\n};\n\n/** React hook to access locale */\nexport const useLocale = (): ComponentLocale => useContext(LocaleContext);","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { createContext, useContext } from 'react';\n\n/**\n * Identifiers that can be used to target specific components in a composite.\n *\n * @experimental\n *\n * These identifiers are assigned as `data-ui-id` HTML attribute of the root element of the targeted component.\n *\n * This API is intended for end to end test automation. As such, they are not covered by the API\n * guarantee of the public API. This will remain perenially experimental and compatibility breaking changes\n * may be made at any point.\n *\n * @internal\n */\nexport interface _Identifiers {\n  /** `data-ui-id` value for `SendBox` Component */\n  sendboxTextField: string;\n  /** `data-ui-id` value for `ParticipantButton` Component's People menu item */\n  participantButtonPeopleMenuItem: string;\n  /** `data-ui-id` value for `ParticipantItem` Component's Menu button */\n  participantItemMenuButton: string;\n  /** `data-ui-id` value for `ParticipantList` Component */\n  participantList: string;\n  /** `data-ui-id` value for `ParticipantList` Component's People Button */\n  participantListPeopleButton: string;\n  /** `data-ui-id` value for `ParticipantList` Component's Remove Participant Button */\n  participantListRemoveParticipantButton: string;\n  /** `data-ui-id` value for `MessageThread` components message content */\n  messageContent: string;\n  /** `data-ui-id` value for `MessageThread` components message timestamp */\n  messageTimestamp: string;\n  /** `data-ui-id` value for `TypingIndicator` Component */\n  typingIndicator: string;\n  /** `data-ui-id` value for `VideoGallery` Component */\n  videoGallery: string;\n  /** `data-ui-id` value for `VideoTile` Component */\n  videoTile: string;\n  /** `data-ui-id` value for overflow gallery component's left navigation button */\n  overflowGalleryLeftNavButton: string;\n  /** `data-ui-id` value for overflow gallery component's right navigation button */\n  overflowGalleryRightNavButton: string;\n  /** `data-ui-id` value for the video tiles in the horizontal gallery */\n  horizontalGalleryVideoTile: string;\n  /* @conditional-compile-remove(vertical-gallery) */\n  /** `data-ui-id` value for `VerticalGallery` Component's children video tiles */\n  verticalGalleryVideoTile: string;\n  /* @conditional-compile-remove(vertical-gallery) */\n  /** `data-ui-id` value for `VerticalGallery` Component's page counter */\n  verticalGalleryPageCounter: string;\n}\nconst defaultIdentifiers: _Identifiers = {\n  sendboxTextField: 'sendbox-textfield',\n  participantButtonPeopleMenuItem: 'participant-button-people-menu-item',\n  participantItemMenuButton: 'participant-item-menu-button',\n  participantList: 'participant-list',\n  participantListPeopleButton: 'participant-list-people-button',\n  participantListRemoveParticipantButton: 'participant-list-remove-participant-button',\n  messageContent: 'message-content',\n  messageTimestamp: 'message-timestamp',\n  typingIndicator: 'typing-indicator',\n  videoGallery: 'video-gallery',\n  videoTile: 'video-tile',\n  overflowGalleryLeftNavButton: 'overflow-gallery-left-nav-button',\n  overflowGalleryRightNavButton: 'overflow-gallery-right-nav-button',\n  /* @conditional-compile-remove(vertical-gallery) */\n  verticalGalleryVideoTile: 'vertical-gallery-video-tile',\n  horizontalGalleryVideoTile: 'horizontal-gallery-video-tile',\n  /* @conditional-compile-remove(vertical-gallery) */\n  verticalGalleryPageCounter: 'vertical-gallery-page-counter'\n};\n\n/**\n * @private\n */\nexport const IdentifierContext = createContext<_Identifiers>(defaultIdentifiers);\n\n/**\n * Arguments to Context Provider for {@link _Identifiers}.\n *\n * @experimental\n *\n * See documentation for {@link _Identifiers}.\n *\n * @internal\n */\nexport interface _IdentifierProviderProps {\n  identifiers?: _Identifiers;\n  children: React.ReactNode;\n}\n\n/**\n * React Context provider for {@link _Identifiers}.\n *\n * @experimental\n *\n * See documentation for {@link _Identifiers}.\n *\n * @internal\n */\nexport const _IdentifierProvider = (props: _IdentifierProviderProps): JSX.Element => {\n  const {\n    identifiers,\n    children\n  } = props;\n  return <IdentifierContext.Provider value={identifiers ?? defaultIdentifiers}>{children}</IdentifierContext.Provider>;\n};\n\n/**\n * @private\n */\nexport const useIdentifiers = (): _Identifiers => useContext(IdentifierContext);","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { typingIndicatorContainerStyle, typingIndicatorStringStyle } from './styles/TypingIndicator.styles';\nimport React from 'react';\nimport { BaseCustomStyles, CommunicationParticipant } from '../types';\nimport { IStyle, mergeStyles, Stack, Text } from '@fluentui/react';\nimport { useLocale } from '../localization/LocalizationProvider';\nimport { useIdentifiers } from '../identifiers';\nimport { _IObjectMap } from '@internal/acs-ui-common';\n\n/**\n * Fluent styles for {@link TypingIndicator}.\n *\n * @public\n */\nexport interface TypingIndicatorStylesProps extends BaseCustomStyles {\n  /** Styles for each typing user's displayName. */\n  typingUserDisplayName?: IStyle;\n  /** Styles for the typing string. */\n  typingString?: IStyle;\n}\n\n/**\n * Strings of {@link TypingIndicator} that can be overridden.\n *\n * @public\n */\nexport interface TypingIndicatorStrings {\n  /**\n   * String template to use when one user is typing. Placeholders: [user].\n   * @example\n   * ```\n   * <TypingIndicator\n   *  strings={{ multipleUsersAbbreviateOne: '{users} is typing...' }}\n   *  typingUsers={[{ userId: 'user1', displayName: 'Claire' }]}\n   * />\n   * ```\n   * would be 'Claire is typing...'\n   **/\n  singleUser: string;\n  /**\n   * String template to use when multiple users are typing. Placeholders: [users].\n   * @example\n   * ```\n   * <TypingIndicator\n   *  strings={{ multipleUsers: '{users} are typing...' }}\n   *  typingUsers={[\n   *    { userId: 'user1', displayName: 'Claire' },\n   *    { userId: 'user2', displayName: 'Christopher' }\n   *  ]}\n   * />\n   * ```\n   * would be 'Claire, Chris are typing...'\n   **/\n  multipleUsers: string;\n  /**\n   * String template to use when multiple users are typing with one other user abbreviated. Placeholders: [users].\n   * @example\n   * ```typescript\n   * <TypingIndicator\n   * strings={{ multipleUsersAbbreviateOne: '{users} and 1 other are typing...' }}\n   * typingUsers={[\n   * { userId: 'user1', displayName: 'Claire Romanov' },\n   * { userId: 'user2', displayName: 'Christopher Rutherford' }\n   * ]}\n   * />\n   * ```\n   * would be 'Claire Romanov and 1 other are typing...'\n   **/\n  multipleUsersAbbreviateOne: string;\n  /**\n   * String template to use when multiple users are typing with one other user abbreviated. Placeholders: [users, numOthers].\n   * @example\n   * ```\n   * <TypingIndicator\n   *  strings={{ multipleUsersAbbreviateMany: '{users} and {numOthers} others are typing...' }}\n   *  typingUsers={[\n   *    { userId: 'user1', displayName: 'Claire Romanov' },\n   *    { userId: 'user2', displayName: 'Christopher Rutherford' },\n   *    { userId: 'user3', displayName: 'Jill Vernblom' }\n   *  ]}\n   * />\n   * ```\n   * would be 'Claire Romanov and 2 others are typing...'\n   **/\n  multipleUsersAbbreviateMany: string;\n  /**\n   * String to use as delimiter to separate multiple users.\n   * @example\n   * ```\n   * <TypingIndicator\n   *  strings={{ delimiter: ' + ' }}\n   *  typingUsers={[\n   *    { userId: 'user1', displayName: 'Claire' },\n   *    { userId: 'user2', displayName: 'Chris' },\n   *    { userId: 'user3', displayName: 'Jill' }\n   *  ]}\n   * />\n   * ```\n   * would be 'Claire + Chris + Jill are typing...'\n   **/\n  delimiter: string;\n}\n\n/**\n * Props for {@link TypingIndicator}.\n *\n * @public\n */\nexport interface TypingIndicatorProps {\n  /** List of the typing users. */\n  typingUsers: CommunicationParticipant[];\n  /** Callback to render typing users */\n  onRenderUser?: (users: CommunicationParticipant) => JSX.Element;\n  /**\n   * Allows users to pass in an object contains custom CSS styles.\n   * @Example\n   * ```\n   * <TypingIndicator styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: TypingIndicatorStylesProps;\n\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<TypingIndicatorStrings>;\n}\nconst MAXIMUM_LENGTH_OF_TYPING_USERS = 35;\n\n/**\n * Helper function to create element wrapping all typing users\n * @param typingUsers typing users\n * @param delimiter string to separate typing users\n * @param onRenderUser optional callback to render each typing user\n * @param userDisplayNameStyles optional additional IStyle to apply to each element containing users name\n * @returns element wrapping all typing users\n */\nconst getUsersElement = (typingUsers: CommunicationParticipant[], delimiter: string, onRenderUser?: (users: CommunicationParticipant) => JSX.Element, userDisplayNameStyles?: IStyle): JSX.Element => {\n  const userElements: JSX.Element[] = [];\n  typingUsers.forEach((user, index) => {\n    let truncatedDisplayName = user.displayName;\n    if (truncatedDisplayName && truncatedDisplayName.length > 50) {\n      truncatedDisplayName = truncatedDisplayName.substring(0, 50) + '...';\n    }\n    userElements.push(onRenderUser ? onRenderUser(user) : <Text className={mergeStyles(userDisplayNameStyles)} key={`user-${index}`}>\n          {truncatedDisplayName}\n        </Text>);\n    userElements.push(<Text key={`comma-${index}`}>{`${delimiter}`}</Text>);\n  });\n  // pop last comma\n  userElements.pop();\n  return <>{userElements}</>;\n};\n\n/**\n * Helper function to get a string of all typing users\n * @param typingUsers typing users\n * @param delimiter string to separate typing users\n * @returns string of all typing users\n */\nconst getNamesString = (typingUsers: CommunicationParticipant[], delimiter: string): string => {\n  const userNames: string[] = [];\n  typingUsers.forEach(user => {\n    if (user.displayName) {\n      userNames.push(user.displayName);\n    }\n  });\n  return userNames.join(delimiter);\n};\n\n/**\n * Helper function to create span elements making up the typing indicator string\n * @param strings TypingIndicatorStrings containing strings to create span elements\n * @param usersElement JSX.Element containing all typing users\n * @param numTypingUsers number of total typing users\n * @param numUserNotMentioned number of typing users abbreviated\n * @returns array of span elements making up the typing indicator string\n */\nconst getSpanElements = (strings: TypingIndicatorStrings, usersElement: JSX.Element, numTypingUsers: number, numTypingUsersAbbreviated: number): JSX.Element[] => {\n  let variables: Record<string, JSX.Element> = {};\n  let typingString = '';\n  if (numTypingUsers === 1) {\n    typingString = strings.singleUser;\n    variables = {\n      user: usersElement\n    };\n  } else if (numTypingUsers > 1 && numTypingUsersAbbreviated === 0) {\n    typingString = strings.multipleUsers;\n    variables = {\n      users: usersElement\n    };\n  } else if (numTypingUsers > 1 && numTypingUsersAbbreviated === 1) {\n    typingString = strings.multipleUsersAbbreviateOne;\n    variables = {\n      users: usersElement\n    };\n  } else if (numTypingUsers > 1 && numTypingUsersAbbreviated > 1) {\n    typingString = strings.multipleUsersAbbreviateMany;\n    variables = {\n      users: usersElement,\n      numOthers: <>{numTypingUsersAbbreviated}</>\n    };\n  }\n  return formatInlineElements(typingString, variables);\n};\n\n/**\n * Helper function to get the string making up the typing indicator string\n * @param strings TypingIndicatorStrings containing strings to create span elements\n * @param namesString string of all typing users\n * @param numTypingUsers number of total typing users\n * @param numUserNotMentioned number of typing users abbreviated\n * @returns typing indicator string\n */\nconst getIndicatorString = (strings: TypingIndicatorStrings, namesString: string, numTypingUsers: number, numTypingUsersAbbreviated: number): string | undefined => {\n  if (numTypingUsers === 1) {\n    return strings.singleUser.replace('{user}', namesString);\n  }\n  if (numTypingUsers > 1 && numTypingUsersAbbreviated === 0) {\n    return strings.multipleUsers.replace('{users}', namesString);\n  }\n  if (numTypingUsers > 1 && numTypingUsersAbbreviated === 1) {\n    return strings.multipleUsersAbbreviateOne.replace('{users}', namesString);\n  }\n  if (numTypingUsers > 1 && numTypingUsersAbbreviated > 1) {\n    return strings.multipleUsersAbbreviateMany.replace('{users}', namesString).replace('{numOthers}', `${numTypingUsersAbbreviated}`);\n  }\n  return undefined;\n};\nconst IndicatorComponent = (typingUsers: CommunicationParticipant[], strings: TypingIndicatorStrings, onRenderUser?: (users: CommunicationParticipant) => JSX.Element, styles?: TypingIndicatorStylesProps): JSX.Element => {\n  const typingUsersMentioned: CommunicationParticipant[] = [];\n  let totalCharacterCount = 0;\n  const ids = useIdentifiers();\n  for (const typingUser of typingUsers) {\n    if (!typingUser.displayName) {\n      continue;\n    }\n    let additionalCharCount = typingUser.displayName.length;\n    // The typing users will be separated by the delimiter. We account for that additional length when we generate the final string.\n    if (typingUsersMentioned.length > 0) {\n      additionalCharCount += strings.delimiter.length;\n    }\n    if (totalCharacterCount + additionalCharCount <= MAXIMUM_LENGTH_OF_TYPING_USERS || typingUsersMentioned.length === 0) {\n      typingUsersMentioned.push(typingUser);\n      totalCharacterCount += additionalCharCount;\n    } else {\n      break;\n    }\n  }\n  const usersElement: JSX.Element = getUsersElement(typingUsersMentioned, strings.delimiter, onRenderUser, styles?.typingUserDisplayName);\n  const numUserNotMentioned = typingUsers.length - typingUsersMentioned.length;\n  const spanElements: JSX.Element[] = getSpanElements(strings, usersElement, typingUsers.length, numUserNotMentioned);\n  const labelString = getIndicatorString(strings, getNamesString(typingUsersMentioned, strings.delimiter), typingUsers.length, numUserNotMentioned);\n  return <div data-ui-id={ids.typingIndicator} className={mergeStyles(typingIndicatorStringStyle, styles?.typingString)} key=\"typingStringKey\" role=\"status\" aria-label={labelString}>\n      {spanElements}\n    </div>;\n};\n\n/**\n * Component to notify local user when one or more participants in the chat thread are typing.\n *\n * @public\n */\nexport const TypingIndicator = (props: TypingIndicatorProps): JSX.Element => {\n  const {\n    typingUsers,\n    onRenderUser,\n    styles\n  } = props;\n  const {\n    strings\n  } = useLocale();\n  const typingUsersToRender = typingUsers.filter(typingUser => typingUser.displayName !== undefined);\n  const indicatorComponent = IndicatorComponent(typingUsersToRender, {\n    ...strings.typingIndicator,\n    ...props.strings\n  }, onRenderUser, styles);\n  return <Stack className={mergeStyles(typingIndicatorContainerStyle, styles?.root)}>{indicatorComponent}</Stack>;\n};\n\n/**\n * Create an array of span elements by replacing the pattern \"\\{\\}\" in str with the elements\n * passed in as vars and creating inline elements from the rest\n *\n * @param str - The string to be formatted\n * @param vars - Variables to use to format the string\n * @returns formatted JSX elements\n */\nconst formatInlineElements = (str: string, vars: _IObjectMap<JSX.Element>): JSX.Element[] => {\n  if (!str) {\n    return [];\n  }\n  if (!vars) {\n    return [];\n  }\n  const elements: JSX.Element[] = [];\n\n  // regex to search for the pattern \"{}\"\n  const placeholdersRegex = /{(\\w+)}/g;\n  const regex = RegExp(placeholdersRegex);\n  let array: RegExpExecArray | null = regex.exec(str);\n  let prev = 0;\n  while (array !== null) {\n    if (prev !== array.index) {\n      elements.push(<Text key={elements.length}>{str.substring(prev, array.index)}</Text>);\n    }\n    elements.push(<Text key={elements.length}>{vars[array[0].substring(1, array[0].length - 1)]}</Text>);\n    prev = regex.lastIndex;\n    array = regex.exec(str);\n  }\n  elements.push(<Text key={elements.length}>{str.substring(prev)}</Text>);\n  return elements;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IIconProps, MessageBarType } from '@fluentui/react';\nimport { ActiveErrorMessage, ErrorType } from './ErrorBar';\nimport { _SupportedSpokenLanguage } from '../types';\n\n/**\n * @private\n *\n * @param fileName\n * @param length\n * @returns string\n */\nexport const truncatedFileName = (fileName: string, length: number): string => {\n  return fileName.substring(0, length).trimEnd() + (fileName.length > length ? '... ' : '');\n};\n\n/**\n * @private\n *\n * @param fileName\n * @returns string\n */\nexport const extension = (fileName: string): string => fileName.split('.').pop() || '';\n\n/**\n * @private\n */\nexport interface DismissedError {\n  type: ErrorType;\n  dismissedAt: Date;\n  activeSince?: Date;\n}\n\n/**\n * @private\n * @param dismissedErrors\n * @param toDismiss\n * @returns DismissedError[]\n * Always returns a new Array so that the state variable is updated, trigerring a render.\n */\nexport const dismissError = (dismissedErrors: DismissedError[], toDismiss: ActiveErrorMessage): DismissedError[] => {\n  const now = new Date(Date.now());\n  for (const error of dismissedErrors) {\n    if (error.type === toDismiss.type) {\n      // Bump the timestamp for latest dismissal of this error to now.\n      error.dismissedAt = now;\n      error.activeSince = toDismiss.timestamp;\n      return Array.from(dismissedErrors);\n    }\n  }\n  const toDismissTimestamp = toDismiss.timestamp ?? now;\n\n  // Record that this error was dismissed for the first time right now.\n  return [...dismissedErrors, {\n    type: toDismiss.type,\n    // the error time could be sometimes later than the button click time, which cause the dismiss not working\n    // so we set the dismiss time to the later one\n    dismissedAt: now > toDismissTimestamp ? now : toDismissTimestamp,\n    activeSince: toDismiss.timestamp\n  }];\n};\n\n/**\n * @private\n * @param activeErrorMessages\n * @param dismissedErrors\n * @returns DismissedError[]\n *  Returns a new Array if and only if contents change, to avoid re-rendering when nothing was dropped.\n */\nexport const dropDismissalsForInactiveErrors = (activeErrorMessages: ActiveErrorMessage[], dismissedErrors: DismissedError[]): DismissedError[] => {\n  const active = new Map();\n  for (const message of activeErrorMessages) {\n    active.set(message.type, message);\n  }\n\n  // For an error such that:\n  // * It was previously active, and dismissed.\n  // * It did not have a timestamp associated with it.\n  // * It is no longer active.\n  //\n  // We remove it from dismissals. When it becomes active again next time, it will be shown again on the UI.\n  const shouldDeleteDismissal = (dismissed: DismissedError): boolean => dismissed.activeSince === undefined && active.get(dismissed.type) === undefined;\n  if (dismissedErrors.some(dismissed => shouldDeleteDismissal(dismissed))) {\n    return dismissedErrors.filter(dismissed => !shouldDeleteDismissal(dismissed));\n  }\n  return dismissedErrors;\n};\n\n/**\n * @private\n * @param activeErrorMessages\n * @param dismissedErrors\n * @returns ActiveErrorMessage[]\n */\nexport const errorsToShow = (activeErrorMessages: ActiveErrorMessage[], dismissedErrors: DismissedError[], mountTimestamp?: Date): ActiveErrorMessage[] => {\n  const dismissed: Map<ErrorType, DismissedError> = new Map();\n  for (const error of dismissedErrors) {\n    dismissed.set(error.type, error);\n  }\n  return activeErrorMessages.filter(error => {\n    if (mountTimestamp && error.timestamp && mountTimestamp > error.timestamp) {\n      // Error has a timestamp and it is older than when the component was mounted.\n      return false;\n    }\n    const dismissal = dismissed.get(error.type);\n    if (!dismissal) {\n      // This error was never dismissed.\n      return true;\n    }\n    if (!error.timestamp) {\n      // No timestamp associated with the error. In this case, the existence of a dismissal is enough to suppress the error.\n      return false;\n    }\n    // Error has an associated timestamp, so compare with last dismissal.\n    return error.timestamp > dismissal.dismissedAt;\n  });\n};\n\n/**\n * @private\n * @param errorType\n * @returns MessageBarType\n */\nexport const messageBarType = (errorType: ErrorType): MessageBarType => {\n  switch (errorType) {\n    case 'callNetworkQualityLow':\n    case 'callNoSpeakerFound':\n    case 'callNoMicrophoneFound':\n    case 'callMicrophoneAccessDenied':\n    case 'callMicrophoneAccessDeniedSafari':\n    case 'callMicrophoneMutedBySystem':\n    case 'callMicrophoneUnmutedBySystem':\n    case 'callMacOsMicrophoneAccessDenied':\n    case 'callLocalVideoFreeze':\n    case 'callCameraAccessDenied':\n    case 'callCameraAccessDeniedSafari':\n    case 'callCameraAlreadyInUse':\n    case 'callVideoStoppedBySystem':\n    case 'callVideoRecoveredBySystem':\n    case 'callMacOsCameraAccessDenied':\n    case 'callMacOsScreenShareAccessDenied':\n    case 'startScreenShareGeneric':\n    case 'cameraFrozenForRemoteParticipants':\n      return MessageBarType.warning;\n    default:\n      return MessageBarType.error;\n  }\n};\n\n/**\n * @private\n * @param errorType\n * @returns IIconProps | undefined\n */\nexport const messageBarIconProps = (errorType: ErrorType): IIconProps | undefined => {\n  const iconName = customIconName[errorType];\n  return iconName ? {\n    iconName\n  } : undefined;\n};\n\n/**\n * @private\n */\nexport const customIconName: Partial<{ [key in ErrorType]: string }> = {\n  callNetworkQualityLow: 'ErrorBarCallNetworkQualityLow',\n  callNoSpeakerFound: 'ErrorBarCallNoSpeakerFound',\n  callNoMicrophoneFound: 'ErrorBarCallNoMicrophoneFound',\n  callMicrophoneAccessDenied: 'ErrorBarCallMicrophoneAccessDenied',\n  callMicrophoneAccessDeniedSafari: 'ErrorBarCallMicrophoneAccessDenied',\n  callMicrophoneMutedBySystem: 'ErrorBarCallMicrophoneMutedBySystem',\n  callMicrophoneUnmutedBySystem: 'ErrorBarCallMicrophoneUnmutedBySystem',\n  callMacOsMicrophoneAccessDenied: 'ErrorBarCallMacOsMicrophoneAccessDenied',\n  callLocalVideoFreeze: 'ErrorBarCallLocalVideoFreeze',\n  callCameraAccessDenied: 'ErrorBarCallCameraAccessDenied',\n  callCameraAccessDeniedSafari: 'ErrorBarCallCameraAccessDenied',\n  callCameraAlreadyInUse: 'ErrorBarCallCameraAlreadyInUse',\n  callVideoStoppedBySystem: 'ErrorBarCallVideoStoppedBySystem',\n  callVideoRecoveredBySystem: 'ErrorBarCallVideoRecoveredBySystem',\n  callMacOsCameraAccessDenied: 'ErrorBarCallMacOsCameraAccessDenied'\n};\n\n/**\n * @private\n */\nexport const isValidString = (string: string | undefined): string is string => {\n  return !!string && string.length > 0;\n};\n\n/**\n * Chunk an array into rows of a given size.\n * @private\n */\nexport function chunk<T>(options: T[], itemsPerRow: number): T[][] {\n  const rows: T[][] = [];\n  let currentRow: T[] = [];\n  for (const option of options) {\n    currentRow.push(option);\n    if (currentRow.length === itemsPerRow) {\n      rows.push(currentRow);\n      currentRow = [];\n    }\n  }\n  if (currentRow.length > 0) {\n    rows.push(currentRow);\n  }\n  return rows;\n}\n\n/**\n * @private\n */\nexport const defaultSpokenLanguage: _SupportedSpokenLanguage = 'en-us';\n\n/**\n * @private\n */\nconst SAFARI_COMPOSITION_KEYCODE = 229;\n/**\n * Determine if the press of the enter key is from a composition session or not (Safari only)\n *\n * @private\n */\nexport const isEnterKeyEventFromCompositionSession = (e: React.KeyboardEvent<HTMLElement>): boolean =>\n// Uses KeyCode 229 and which code 229 to determine if the press of the enter key is from a composition session or not (Safari only)\ne.nativeEvent.isComposing || e.nativeEvent.keyCode === SAFARI_COMPOSITION_KEYCODE || e.nativeEvent.which === SAFARI_COMPOSITION_KEYCODE;\n\n/**\n * @private\n */\nexport const nullToUndefined = <T,>(value: T | null): T | undefined => value === null ? undefined : value;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { IMessageBarProps, MessageBar, Stack } from '@fluentui/react';\nimport { useLocale } from '../localization';\nimport { DismissedError, dismissError, dropDismissalsForInactiveErrors, errorsToShow, messageBarIconProps, messageBarType } from './utils';\n\n/**\n * Props for {@link ErrorBar}.\n *\n * In addition to the following, {@link ErrorBar} forwards all\n * {@link @fluentui/react#IMessageBarProps} to the underlying {@link @fluentui/react#MessageBar}.\n *\n * @public\n */\nexport interface ErrorBarProps extends IMessageBarProps {\n  /**\n   * Strings shown on the UI on errors.\n   */\n  strings?: ErrorBarStrings;\n\n  /**\n   * Currently active errors.\n   */\n  activeErrorMessages: ActiveErrorMessage[];\n\n  /**\n   * If set, errors with {@link ActiveErrorMessage.timestamp} older than the time this component is mounted\n   * are not shown.\n   *\n   * This is useful when using the {@link ErrorBar} with a stateful client that handles more than one call\n   * or chat thread. Set this prop to ignore errors from previous call or chat.\n   *\n   * @defaultValue false\n   */\n  ignorePremountErrors?: boolean;\n\n  /**\n   * Callback called when the dismiss button is triggered.\n   * Use this to control errors shown when they dismissed by the user.\n   */\n  onDismissError?: (dismissedError: ActiveErrorMessage) => void;\n}\n\n/**\n * All strings that may be shown on the UI in the {@link ErrorBar}.\n *\n * @public\n */\nexport interface ErrorBarStrings {\n  /**\n   * Unable to reach Chat service.\n   *\n   * This can mean:\n   *   - Incorrect Azure Communication Services endpoint was provided.\n   *   - User's network connection is down.\n   */\n  unableToReachChatService: string;\n\n  /**\n   * User does not have access to the Chat service.\n   * This usually means that either the Azure Communication Services endpiont or the token provided are incorrect.\n   */\n  accessDenied: string;\n\n  /**\n   * User is no longer on the thread.\n   *\n   * See also: {@link ErrorBarStrings.sendMessageNotInChatThread} for a more specific error.\n   */\n  userNotInChatThread: string;\n\n  /**\n   * Sending message failed because user is no longer on the thread.\n   */\n  sendMessageNotInChatThread: string;\n\n  /**\n   * A generic message when sending message fails.\n   * Prefer more specific error strings when possible.\n   */\n  sendMessageGeneric: string;\n\n  /**\n   * A generic message when starting video fails.\n   */\n  startVideoGeneric: string;\n\n  /**\n   * A generic message when starting video fails.\n   */\n  stopVideoGeneric: string;\n\n  /**\n   * A generic message when muting microphone fails.\n   */\n  muteGeneric: string;\n\n  /**\n   * A generic message when unmuting microphone fails.\n   */\n  unmuteGeneric: string;\n\n  /**\n   * A generic message when starting screenshare fails.\n   */\n  startScreenShareGeneric: string;\n\n  /**\n   * A generic message when stopping screenshare fails.\n   */\n  stopScreenShareGeneric: string;\n\n  /**\n   * Message shown when poor network quality is detected during a call.\n   */\n  callNetworkQualityLow: string;\n\n  /**\n   * Message shown on failure to detect audio output devices.\n   */\n  callNoSpeakerFound: string;\n\n  /**\n   * Message shown on failure to detect audio input devices.\n   */\n  callNoMicrophoneFound: string;\n\n  /**\n   * Message shown when microphone can be enumerated but access is blocked by the system.\n   */\n  callMicrophoneAccessDenied: string;\n\n  /**\n   * Message shown when microphone can be enumerated but access is blocked by the system, for safari browsers\n   */\n  callMicrophoneAccessDeniedSafari: string;\n\n  /**\n   * Message shown when microphone is muted by the system (not by local or remote participants)\n   */\n  callMicrophoneMutedBySystem: string;\n\n  /**\n   * Message shown when microphone is unmuted by the system (not by local or remote participants).\n   * This typically occurs if the system recovers from an unexpected mute.\n   */\n  callMicrophoneUnmutedBySystem: string;\n\n  /**\n   * Mac OS specific message shown when microphone can be enumerated but access is\n   * blocked by the system.\n   */\n  callMacOsMicrophoneAccessDenied: string;\n\n  /**\n   * Message shown when poor network causes local video stream to be frozen.\n   */\n  callLocalVideoFreeze: string;\n\n  /**\n   * Message shown when camera can be enumerated but access is blocked by the system.\n   */\n  callCameraAccessDenied: string;\n\n  /**\n   * Message shown when camera can be enumerated but access is blocked by the system, for safari browsers\n   */\n  callCameraAccessDeniedSafari: string;\n\n  /**\n   * Message shown when local video fails to start because camera is already in use by\n   * another applciation.\n   */\n  callCameraAlreadyInUse: string;\n\n  /**\n   * Message shown when local video is stopped by the system (not by local or remote participants)\n   */\n  callVideoStoppedBySystem: string;\n\n  /**\n   * Message shown when local video was recovered by the system (not by the local participant)\n   */\n  callVideoRecoveredBySystem: string;\n\n  /**\n   * Mac OS specific message shown when system denies access to camera.\n   */\n  callMacOsCameraAccessDenied: string;\n\n  /**\n   * Mac OS specific message shown when system denies sharing local screen on a call.\n   */\n  callMacOsScreenShareAccessDenied: string;\n  /**\n   * Dimiss errorbar button aria label read by screen reader accessibility tools\n   */\n  dismissButtonAriaLabel?: string;\n\n  /**\n   * An error message when joining a call fails.\n   */\n  failedToJoinCallGeneric?: string;\n\n  /**\n   * An error message when joining a call fails specifically due to an invalid meeting link.\n   */\n  failedToJoinCallInvalidMeetingLink?: string;\n  /**\n   * Error bar string letting you know remote participants see a frozen stream for you.\n   */\n  cameraFrozenForRemoteParticipants?: string;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Unable to start effect\n   */\n  unableToStartVideoEffect?: string;\n}\n\n/**\n * All errors that can be shown in the {@link ErrorBar}.\n *\n * @public\n */\nexport type ErrorType = keyof ErrorBarStrings;\n\n/**\n * Active error messages to be shown via {@link ErrorBar}.\n *\n * @public\n */\nexport interface ActiveErrorMessage {\n  /**\n   * Type of error that is active.\n   */\n  type: ErrorType;\n  /**\n   * The latest timestamp when this error was observed.\n   *\n   * When available, this is used to track errors that have already been seen and dismissed\n   * by the user.\n   */\n  timestamp?: Date;\n}\n\n/**\n * A component to show error messages on the UI.\n * All strings that can be shown are accepted as the {@link ErrorBarProps.strings} so that they can be localized.\n * Active errors are selected by {@link ErrorBarProps.activeErrorMessages}.\n *\n * This component internally tracks dismissed by the user.\n *   * Errors that have an associated timestamp: The error is shown on the UI again if it occurs after being dismissed.\n *   * Errors that do not have a timestamp: The error is dismissed until it disappears from the props.\n *         If the error recurs, it is shown in the UI.\n *\n * Uses {@link @fluentui/react#MessageBar} UI element.\n *\n * @public\n */\nexport const ErrorBar = (props: ErrorBarProps): JSX.Element => {\n  const localeStrings = useLocale().strings.errorBar;\n  const strings = props.strings ?? localeStrings;\n  const trackDismissedErrorsInternally = !props.onDismissError;\n\n  // Timestamp for when this comopnent is first mounted.\n  // Never updated through the lifecycle of this component.\n  const mountTimestamp = useRef(new Date(Date.now()));\n  const [dismissedErrors, setDismissedErrors] = useState<DismissedError[]>([]);\n\n  // dropDismissalsForInactiveErrors only returns a new object if `dismissedErrors` actually changes.\n  // Without this behaviour, this `useEffect` block would cause a render loop.\n  useEffect(() => {\n    trackDismissedErrorsInternally && setDismissedErrors(dropDismissalsForInactiveErrors(props.activeErrorMessages, dismissedErrors));\n  }, [props.activeErrorMessages, dismissedErrors, trackDismissedErrorsInternally]);\n  const toShow = errorsToShow(props.activeErrorMessages, dismissedErrors, props.ignorePremountErrors ? mountTimestamp.current : undefined);\n  return <Stack data-ui-id=\"error-bar-stack\">\n      {toShow.map(error => <MessageBar {...props} styles={{\n      innerText: {\n        alignSelf: 'center'\n      },\n      icon: {\n        height: 0\n      },\n      content: {\n        lineHeight: 'inherit'\n      },\n      dismissal: {\n        height: 0,\n        paddingTop: '0.8rem'\n      }\n    }} key={error.type} messageBarType={messageBarType(error.type)} messageBarIconProps={messageBarIconProps(error.type)} onDismiss={() => trackDismissedErrorsInternally ? setDismissedErrors(dismissError(dismissedErrors, error)) : props.onDismissError?.(error)} dismissButtonAriaLabel={strings.dismissButtonAriaLabel} dismissIconProps={{\n      iconName: 'ErrorBarClear'\n    }}>\n          {strings[error.type]}\n        </MessageBar>)}\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const gridLayoutStyle = mergeStyles({\n  width: '100%',\n  height: '100%',\n  display: 'grid',\n  gridGap: '0.5rem'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, mergeStyles } from '@fluentui/react';\nimport React, { useRef, useEffect, useState, useMemo } from 'react';\nimport { BaseCustomStyles } from '../types';\nimport { gridLayoutStyle } from './styles/GridLayout.styles';\n\n/**\n * Props for {@link GridLayout}.\n *\n * @public\n */\nexport interface GridLayoutProps {\n  children: React.ReactNode;\n  /**\n   * Allows users to pass in an object contains custom CSS styles.\n   * @Example\n   * ```\n   * <GridLayout styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: BaseCustomStyles;\n}\n\n/**\n * {@link GridLayout} Component Styles.\n * @public\n */\nexport interface GridLayoutStyles extends BaseCustomStyles {\n  /** Styles for each child of {@link GridLayout} */\n  children?: IStyle;\n}\n\n/**\n * A component to lay out audio / video participants tiles in a call.\n *\n * @public\n */\nexport const GridLayout = (props: GridLayoutProps): JSX.Element => {\n  const {\n    children,\n    styles\n  } = props;\n  const numberOfChildren = React.Children.count(children);\n  const [currentWidth, setCurrentWidth] = useState(0);\n  const [currentHeight, setCurrentHeight] = useState(0);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const observer = useRef(new ResizeObserver((entries): void => {\n    const {\n      width,\n      height\n    } = entries[0].contentRect;\n    setCurrentWidth(width);\n    setCurrentHeight(height);\n  }));\n  useEffect(() => {\n    if (containerRef.current) {\n      observer.current.observe(containerRef.current);\n    }\n    const currentObserver = observer.current;\n    return () => currentObserver.disconnect();\n  }, [observer, containerRef]);\n  const gridProps = useMemo(() => {\n    return calculateGridProps(numberOfChildren, currentWidth, currentHeight);\n  }, [numberOfChildren, currentWidth, currentHeight]);\n  const cssGridStyles = useMemo(() => createGridStyles(numberOfChildren, gridProps), [numberOfChildren, gridProps]);\n  return <div ref={containerRef} className={mergeStyles(gridLayoutStyle, cssGridStyles, styles?.root)} data-ui-id=\"grid-layout\">\n      {children}\n    </div>;\n};\n\n/**\n * The cell aspect ratio we aim for in a grid\n */\nconst TARGET_CELL_ASPECT_RATIO = 16 / 9;\n/**\n * The minimum cell aspect ratio we allow\n */\nconst MINIMUM_CELL_ASPECT_RATIO_ALLOWED = 8 / 9;\nconst isCloserThan = (a: number, b: number, target: number): boolean => {\n  return Math.abs(target - a) < Math.abs(target - b);\n};\n\n/**\n * Properties to describe a grid. The number of rows, number of columns and whether it fills horizontally or vertically.\n *\n * @Example\n * ```\n *  ______________________\n * |_______|_______|______|\n * |___________|__________| This grid has 2 rows, 3 columns and fills horizontally.\n *  ______________\n * |    |    |    |\n * |____|____|    |\n * |    |    |    |\n * |____|____|____| This grid has 2 rows, 3 columns and fills vertically.\n *  _______________\n * |       |       |\n * |_______|_______|\n * |       |       | If all cells are equal, we default the fill direction as horizontal.\n * |_______|_______| This grid has 2 rows, 2 columns and fills horizontally.\n * ```\n */\ntype GridProps = {\n  fillDirection: FillDirection;\n  rows: number;\n  columns: number;\n};\ntype FillDirection = 'horizontal' | 'vertical';\n\n/**\n * Get the best GridProps to place a number of items in a grid as evenly as possible given the width and height of the grid\n * @param numberOfItems - number of items to place in grid\n * @param width - width of grid\n * @param height - height of grid\n * @returns GridProps\n */\nexport const calculateGridProps = (numberOfItems: number, width: number, height: number): GridProps => {\n  if (numberOfItems <= 0) {\n    return {\n      fillDirection: 'horizontal',\n      rows: 0,\n      columns: 0\n    };\n  }\n  // If width or height are 0 then we return rows and column evenly\n  if (width <= 0 || height <= 0) {\n    return {\n      fillDirection: 'horizontal',\n      rows: Math.ceil(Math.sqrt(numberOfItems)),\n      columns: Math.ceil(Math.sqrt(numberOfItems))\n    };\n  }\n  const aspectRatio = width / height;\n  // Approximate how many rows to divide the grid to achieve cells close to the TARGET_CELL_ASPECT_RATIO\n  let rows = Math.floor(Math.sqrt(TARGET_CELL_ASPECT_RATIO / aspectRatio * numberOfItems)) || 1;\n  // Make sure rows do not exceed numberOfItems\n  rows = Math.min(rows, numberOfItems);\n  // Given the rows, get the minimum columns needed to create enough cells for the number of items\n  let columns = Math.ceil(numberOfItems / rows);\n\n  // Default fill direction to horizontal\n  let fillDirection: 'horizontal' | 'vertical' = 'horizontal';\n  while (rows < numberOfItems) {\n    // If cell aspect ratio is less than MINIMUM_CELL_ASPECT_RATIO_ALLOWED then try more rows\n    if (rows / columns * aspectRatio < MINIMUM_CELL_ASPECT_RATIO_ALLOWED) {\n      rows += 1;\n      columns = Math.ceil(numberOfItems / rows);\n      continue;\n    }\n    if (numberOfItems < rows * columns) {\n      // We need to check that stretching columns vertically will result in only one less cell in stretched columns.\n      // Likewise, we need to check that stretching rows horizonally will result in only one less cell in stretched rows.\n      // e.g. For 4 rows, 2 columns, but only 6 items, we cannot stretch vertically because that would result in a\n      // column of 2 cells which is less by more than 1 compared to the unstretched column.\n      //  _________\n      // |____|    |\n      // |____|____|\n      // |____|    |\n      // |____|____|\n\n      const canStretchVertically = numberOfItems >= rows + (columns - 1) * (rows - 1);\n      const canStretchHorizontally = numberOfItems >= columns + (rows - 1) * (columns - 1);\n      if (!canStretchVertically && !canStretchHorizontally) {\n        rows += 1;\n        columns = Math.ceil(numberOfItems / rows);\n        continue;\n      } else if (!canStretchVertically) {\n        break;\n      } else if (!canStretchHorizontally) {\n        fillDirection = 'vertical';\n        break;\n      }\n\n      // We need to figure out whether the big cells should stretch horizontally or vertically\n      // to fill in the empty spaces\n      // e.g. For 2 rows, 3 columns, but only 5 items, we need to choose whether to stretch cells\n      //       horizontally            or           vertically\n      //  ______________________               _______________________\n      // |       |       |      |             |       |       |       |\n      // |_______|_______|______|             |_______|_______|       |\n      // |           |          |             |       |       |       |\n      // |___________|__________|             |_______|_______|_______|\n\n      // Calculate the aspect ratio of big cells stretched horizontally\n      const horizontallyStretchedCellRatio = rows / (columns - 1) * aspectRatio;\n      // Calculate the aspect ratio of big cells stretched vertically\n      const verticallyStretchedCellRatio = (rows - 1) / columns * aspectRatio;\n      // We know the horizontally stretched cells aspect ratio is higher than MINIMUM_CELL_ASPECT_RATIO_ALLOWED. If vertically stretched cells\n      // is also higher than the MINIMUM_CELL_ASPECT_RATIO_ALLOWED, then choose which aspect ratio is better.\n      if (verticallyStretchedCellRatio >= MINIMUM_CELL_ASPECT_RATIO_ALLOWED) {\n        // If vertically stetched cell has an aspect ratio closer to TARGET_CELL_ASPECT_RATIO then change the fill direction to vertical\n        if (isCloserThan(verticallyStretchedCellRatio, horizontallyStretchedCellRatio, TARGET_CELL_ASPECT_RATIO)) {\n          fillDirection = 'vertical';\n        }\n      }\n    }\n    break;\n  }\n  return {\n    fillDirection,\n    rows,\n    columns\n  };\n};\n\n/**\n * Creates a styles classname with CSS Grid related styles given GridProps and the number of items to distribute as evenly as possible.\n * @param numberOfItems - number of items to place in grid\n * @param gridProps - GridProps that define the number of rows, number of columns, and the fill direction\n * @returns - classname\n */\nexport const createGridStyles = (numberOfItems: number, gridProps: GridProps): string => {\n  const isHorizontal = gridProps.fillDirection === 'horizontal';\n  // Blocks are either rows or columns depending on whether we fill horizontally or vertically. Each block may differ in the number of cells.\n  const blocks = isHorizontal ? gridProps.rows : gridProps.columns;\n  const smallCellsPerBlock = Math.ceil(numberOfItems / blocks);\n  const bigCellsPerBlock = Math.floor(numberOfItems / blocks);\n  const numBigCells = (gridProps.rows * gridProps.columns - numberOfItems) * bigCellsPerBlock;\n  // Get grid units\n  // e.g. If some blocks have 2 big cells while others have 3 small cells, we need to work with 6 units per block\n  const units = smallCellsPerBlock * bigCellsPerBlock;\n  const gridStyles = isHorizontal ? {\n    gridTemplateColumns: `repeat(${units}, minmax(0, 1fr))`,\n    gridTemplateRows: `repeat(${blocks}, minmax(0, 1fr))`,\n    gridAutoFlow: 'row'\n  } : {\n    gridTemplateColumns: `repeat(${blocks}, minmax(0, 1fr))`,\n    gridTemplateRows: `repeat(${units}, minmax(0, 1fr))`,\n    gridAutoFlow: 'column'\n  };\n  const smallCellStyle = isHorizontal ? {\n    '> *': {\n      gridColumn: `auto / span ${units / smallCellsPerBlock}`\n    }\n  } : {\n    '> *': {\n      gridRow: `auto / span ${units / smallCellsPerBlock}`\n    }\n  };\n\n  // If there are big cells, we are choosing to place the latest children into the big cells.\n  // That is why we use the '> *:nth-last-child(-n + ${numBigCells})' CSS selector below\n  const bigCellStyle = numBigCells ? {\n    [`> *:nth-last-child(-n + ${numBigCells})`]: isHorizontal ? {\n      gridColumn: `auto / span ${units / bigCellsPerBlock}`\n    } : {\n      gridRow: `auto / span ${units / bigCellsPerBlock}`\n    }\n  } : {};\n  return mergeStyles(gridStyles, smallCellStyle, bigCellStyle);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, mergeStyles, Theme } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const suppressIconStyle = {\n  iconContainer: {\n    minHeight: '0',\n    minWidth: '0',\n    height: '0',\n    width: '0',\n    margin: '0'\n  },\n  icon: {\n    display: 'none'\n  }\n};\n\n/**\n * @private\n */\nexport const sendBoxWrapperStyles = mergeStyles({\n  margin: '0.25rem',\n  overflow: 'hidden',\n  /**\n   * margin-top set for all the child components of sendbox except first\n   */\n  ':not(:first-child)': {\n    marginTop: '0.25rem'\n  }\n});\n\n/**\n * @private\n */\nexport const sendButtonStyle = mergeStyles({\n  height: '2.25rem',\n  width: '2.25rem'\n});\n\n/**\n * @private\n */\nexport const sendIconStyle = (props: {\n  theme: Theme;\n  hasText: boolean;\n  disabled?: boolean;\n  hasErrorMessage: boolean;\n  customSendIconStyle?: IStyle;\n  defaultTextColor?: string;\n}): string => {\n  const {\n    theme,\n    hasText,\n    disabled = false,\n    hasErrorMessage,\n    customSendIconStyle,\n    defaultTextColor = theme.palette.neutralTertiary\n  } = props;\n  const hasNoContent = !hasText;\n  return mergeStyles(editorTextBoxButtonStyle, {\n    color: disabled || hasErrorMessage || hasNoContent ? defaultTextColor : theme.palette.themePrimary\n  }, customSendIconStyle);\n};\n\n/**\n * @private\n */\nexport const editorTextBoxButtonStyle: IStyle = {\n  width: '1.25rem',\n  height: '1.25rem',\n  margin: 'auto'\n};\n\n/**\n * @private\n */\nexport const fileUploadCardsStyles = mergeStyles({\n  margin: '0 0.25rem 0.25rem 0.25rem',\n  maxHeight: '12.5rem',\n  overflow: 'auto'\n});\n\n/**\n * @private\n */\nexport const fileCardBoxStyle = mergeStyles({\n  width: '100%',\n  padding: '0.50rem'\n});\n\n/**\n * @private\n */\nexport const defaultSendBoxInactiveBorderThicknessREM = 0.0625;\n/**\n * @private\n */\nexport const defaultSendBoxActiveBorderThicknessREM = 0.125;\n\n/**\n * @private\n */\nexport const borderAndBoxShadowStyle = (props: {\n  theme: Theme;\n  hasErrorMessage: boolean;\n  disabled: boolean;\n}): string => {\n  return mergeStyles(borderEditBoxStyle({\n    ...props,\n    defaultBorderColor: props.theme.palette.neutralSecondary\n  }));\n};\n\n/**\n * @private\n */\nexport const borderEditBoxStyle = (props: {\n  theme: Theme;\n  defaultBorderColor?: string;\n  hasErrorMessage: boolean;\n  disabled: boolean;\n}): IStyle => {\n  const {\n    theme,\n    hasErrorMessage,\n    disabled,\n    defaultBorderColor\n  } = props;\n  const borderColor = hasErrorMessage ? theme.semanticColors.errorText : defaultBorderColor;\n  const borderColorActive = hasErrorMessage ? theme.semanticColors.errorText : theme.palette.themePrimary;\n  const borderThickness = disabled ? 0 : defaultSendBoxInactiveBorderThicknessREM;\n  const borderActiveThickness = disabled ? 0 : defaultSendBoxActiveBorderThicknessREM;\n  return {\n    borderRadius: theme.effects.roundedCorner4,\n    border: `${borderThickness}rem solid ${borderColor}`,\n    // The border thickness of the sendbox wrapper changes on hover, to prevent the border thickness change causing the\n    // input box to shift we apply a margin to compensate. This margin is then removed on hover when the border is thicker.\n    margin: `${defaultSendBoxActiveBorderThicknessREM - borderThickness}rem`,\n    ':hover, :active, :focus, :focus-within': {\n      border: `${borderActiveThickness}rem solid ${borderColorActive}`,\n      margin: `${defaultSendBoxActiveBorderThicknessREM - borderActiveThickness}rem`\n    }\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { PartialTheme } from '@fluentui/react';\n\n/**\n * Custom Fluent theme palette used by calling related components in this library.\n *\n * @public\n */\nexport interface CallingTheme {\n  callingPalette: {\n    callRed: string;\n    callRedDark: string;\n    callRedDarker: string;\n    iconWhite: string;\n    /* @conditional-compile-remove(raise-hand) */\n    raiseHandGold: string;\n  };\n}\n\n/**\n * Preset light theme for components exported from this library.\n *\n * @public\n */\nexport const lightTheme: PartialTheme & CallingTheme = {\n  palette: {\n    themePrimary: '#0078d4',\n    themeLighterAlt: '#eff6fc',\n    themeLighter: '#deecf9',\n    themeLight: '#c7e0f4',\n    themeTertiary: '#71afe5',\n    themeSecondary: '#2b88d8',\n    themeDarkAlt: '#106ebe',\n    themeDark: '#59b0f7',\n    themeDarker: '#004578',\n    neutralLighterAlt: '#faf9f8',\n    neutralLighter: '#f3f2f1',\n    neutralLight: '#edebe9',\n    neutralQuaternaryAlt: '#e1dfdd',\n    neutralQuaternary: '#d0d0d0',\n    neutralTertiaryAlt: '#c8c6c4',\n    neutralTertiary: '#a19f9d',\n    neutralSecondary: '#605e5c',\n    neutralPrimaryAlt: '#3b3a39',\n    neutralPrimary: '#323130',\n    neutralDark: '#201f1e',\n    black: '#000000',\n    white: '#ffffff',\n    whiteTranslucent40: 'rgba(255, 255, 255, 0.4)'\n  },\n  callingPalette: {\n    callRed: '#a42e43',\n    callRedDark: '#8b2c3d',\n    callRedDarker: '#772a38',\n    iconWhite: '#ffffff',\n    /* @conditional-compile-remove(raise-hand) */\n    raiseHandGold: '#eaa300'\n  },\n  semanticColors: {\n    errorText: '#a80000'\n  }\n};\n\n/**\n * Preset dark theme for components exported from this library.\n *\n * @public\n */\nexport const darkTheme: PartialTheme & CallingTheme = {\n  palette: {\n    themePrimary: '#2899f5',\n    themeLighterAlt: '#02060a',\n    themeLighter: '#061827',\n    themeLight: '#0c2e49',\n    themeTertiary: '#185b93',\n    themeSecondary: '#2286d7',\n    themeDarkAlt: '#3ca2f6',\n    themeDark: '#59b0f7',\n    themeDarker: '#84c5f9',\n    neutralLighterAlt: '#302e2d',\n    neutralLighter: '#383735',\n    neutralLight: '#464443',\n    neutralQuaternaryAlt: '#4e4d4b',\n    neutralQuaternary: '#4d4b49',\n    neutralTertiaryAlt: '#72706e',\n    neutralTertiary: '#c8c8c8',\n    neutralSecondary: '#d0d0d0',\n    neutralPrimaryAlt: '#dadada',\n    neutralPrimary: '#ffffff',\n    neutralDark: '#f4f4f4',\n    black: '#f8f8f8',\n    white: '#252423',\n    whiteTranslucent40: 'rgba(0, 0, 0, 0.4)'\n  },\n  callingPalette: {\n    callRed: '#c4314b',\n    callRedDark: '#a42e43',\n    callRedDarker: '#8b2c3d',\n    iconWhite: '#ffffff',\n    /* @conditional-compile-remove(raise-hand) */\n    raiseHandGold: '#eaa300'\n  },\n  semanticColors: {\n    errorText: '#f1707b'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { createContext, useContext } from 'react';\nimport { ThemeProvider, PartialTheme, Theme, getTheme, mergeThemes, mergeStyles } from '@fluentui/react';\nimport { lightTheme } from './themes';\n\n/**\n * Props for {@link FluentThemeProvider}.\n *\n * @public\n */\nexport interface FluentThemeProviderProps {\n  /** Children to be themed. */\n  children: React.ReactNode;\n  /** Theme for components. Defaults to a light theme if not provided. */\n  fluentTheme?: PartialTheme | Theme;\n  /**\n   * Whether components are displayed right-to-left\n   * @defaultValue `false`\n   */\n  rtl?: boolean;\n  /* @conditional-compile-remove(image-overlay) */\n  /** Optional style to change the root style of the ThemeProvider */\n  rootStyle?: React.CSSProperties | undefined;\n}\nconst wrapper = mergeStyles({\n  height: '100%',\n  width: '100%',\n  overflow: 'auto',\n  // Add NorthStar styling used previously in the library\n  '*': {\n    boxSizing: 'border-box'\n  },\n  '*:before': {\n    boxSizing: 'border-box'\n  },\n  '*:after': {\n    boxSizing: 'border-box'\n  },\n  /* Adding priority for HTML `hidden` attribute to be applied correctly */\n  '[hidden]': {\n    display: 'none!important'\n  }\n});\nconst defaultTheme: Theme = {\n  ...mergeThemes(getTheme(), lightTheme)\n};\n\n/** Theme context for library's react components */\nconst ThemeContext = createContext<Theme>(defaultTheme);\n\n/**\n * Provider to apply a Fluent theme across this library's react components.\n *\n * @remarks Components in this library are composed primarily from [Fluent UI](https://developer.microsoft.com/fluentui#/controls/web),\n * controls, mixing v8 and v9 controls.\n * This provider handles applying any theme provided to the underlying Fluent UI controls. *\n * @public\n */\nexport const FluentThemeProvider = (props: FluentThemeProviderProps): JSX.Element => {\n  const {\n    fluentTheme,\n    rtl,\n    children,\n    /* @conditional-compile-remove(image-overlay) */rootStyle\n  } = props;\n  let fluentV8Theme: Theme = mergeThemes(defaultTheme, fluentTheme);\n  fluentV8Theme = mergeThemes(fluentV8Theme, {\n    rtl\n  });\n  return <ThemeContext.Provider value={fluentV8Theme}>\n      <ThemeProvider theme={fluentV8Theme} className={wrapper}\n    /* @conditional-compile-remove(image-overlay) */ style={rootStyle}>\n        {children}\n      </ThemeProvider>\n    </ThemeContext.Provider>;\n};\n\n/**\n * React hook to access theme\n *\n * @public\n */\nexport const useTheme = (): Theme => useContext(ThemeContext);","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles } from '@fluentui/react';\nimport { ArrowClockwise16Regular, CallEnd20Filled, Checkmark20Regular, CheckmarkCircle16Regular, Circle16Regular, Delete20Regular, Dismiss20Regular, Dismiss16Regular, Edit20Regular, ErrorCircle16Regular, Eye16Regular, MicOff16Filled, MicOff16Regular, MicOff20Filled, Mic16Filled, Mic20Filled, Mic20Regular, MoreHorizontal20Filled, MoreHorizontal20Regular, People20Filled, Settings20Filled, Send20Filled, Send20Regular, ShareScreenStart20Filled, ShareScreenStop20Filled, Speaker220Regular, Video16Filled, Video20Filled, Video20Regular, VideoOff20Filled, ChevronLeft20Regular, ChevronRight20Regular, WifiWarning20Filled, SpeakerMute16Filled, MicProhibited16Filled, VideoProhibited16Filled, Pin16Filled, Pin16Regular, PinOff16Regular, ScaleFit20Regular, ScaleFill20Regular } from '@fluentui/react-icons';\n/* @conditional-compile-remove(raise-hand) */\nimport { HandRight20Filled, HandRightOff20Filled, HandRight20Regular, HandRightOff20Regular } from '@fluentui/react-icons';\n/* @conditional-compile-remove(close-captions) */\nimport { ClosedCaption20Regular, ClosedCaptionOff20Regular, Settings20Regular, PersonVoice20Regular, Translate20Regular } from '@fluentui/react-icons';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffect20Filled, VideoBackgroundEffect20Regular } from '@fluentui/react-icons';\n\n/* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\nimport { Backspace20Regular } from '@fluentui/react-icons';\n/* @conditional-compile-remove(dialpad) */\nimport { People20Regular } from '@fluentui/react-icons';\nimport { _pxToRem } from '@internal/acs-ui-common';\nimport React from 'react';\nimport { useTheme } from './FluentThemeProvider';\n/**\n * Icons used by the React components exported from this library.\n *\n * @remark See {@link CompositeIcons} for icons used by composites only.\n *\n * @public\n */\nexport type ComponentIcons = Record<keyof typeof DEFAULT_COMPONENT_ICONS, JSX.Element>;\nconst WifiWarning16Filled = (): JSX.Element =>\n// All ErrorBar icons are 16px x 16px (when 1rem = 16 px).\n// There is no 16px version of this icon in the fluent icon package, so scale the larger\n// one down to required size.\n<div className={mergeStyles({\n  transform: 'scale(0.8)'\n})}>\n    <WifiWarning20Filled />\n  </div>;\nconst MoreHorizontal18Regular = (): JSX.Element =>\n// MoreHorizontal icons are 16px x 16px or 20px x 20px so scaling to get desired size\n<div className={mergeStyles({\n  transform: 'scale(0.9)'\n})}>\n    <MoreHorizontal20Regular />\n  </div>;\nconst GalleryLeftButton = (): JSX.Element => {\n  const rtl = useTheme().rtl;\n  return rtl ? <ChevronRight20Regular /> : <ChevronLeft20Regular />;\n};\nconst GalleryRightButton = (): JSX.Element => {\n  const rtl = useTheme().rtl;\n  return rtl ? <ChevronLeft20Regular /> : <ChevronRight20Regular />;\n};\nconst ControlButtonRaiseHandIcon = (): JSX.Element => {\n  return <HandRight20Filled />;\n};\nconst ControlButtonLowerHandIcon = (): JSX.Element => {\n  return <HandRightOff20Filled />;\n};\n\n/**\n * The default set of icons that are available to use in the UI components.\n *\n * @remark Icons used only in the composites are available in {@link DEFAULT_COMPOSITE_ICONS}.\n *\n * @public\n */\nexport const DEFAULT_COMPONENT_ICONS = {\n  ChatMessageOptions: <MoreHorizontal18Regular />,\n  ControlButtonCameraOff: <VideoOff20Filled />,\n  ControlButtonCameraOn: <Video20Filled />,\n  ControlButtonEndCall: <CallEnd20Filled />,\n  ControlButtonMicOff: <MicOff20Filled />,\n  ControlButtonMicOn: <Mic20Filled />,\n  ControlButtonOptions: <Settings20Filled />,\n  ControlButtonParticipants: <People20Filled />,\n  /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\n  ControlButtonParticipantsContextualMenuItem: <People20Regular />,\n  ControlButtonScreenShareStart: <ShareScreenStart20Filled />,\n  ControlButtonScreenShareStop: <ShareScreenStop20Filled />,\n  /* @conditional-compile-remove(raise-hand) */\n  ControlButtonRaiseHand: <ControlButtonRaiseHandIcon />,\n  /* @conditional-compile-remove(raise-hand) */\n  ControlButtonLowerHand: <ControlButtonLowerHandIcon />,\n  /* @conditional-compile-remove(raise-hand) */\n  RaiseHandContextualMenuItem: <HandRight20Regular />,\n  /* @conditional-compile-remove(raise-hand) */\n  LowerHandContextualMenuItem: <HandRightOff20Regular />,\n  EditBoxCancel: <Dismiss20Regular />,\n  EditBoxSubmit: <Checkmark20Regular />,\n  ErrorBarCallCameraAccessDenied: <VideoProhibited16Filled />,\n  ErrorBarCallCameraAlreadyInUse: <VideoProhibited16Filled />,\n  ErrorBarCallLocalVideoFreeze: <WifiWarning16Filled />,\n  ErrorBarCallMacOsCameraAccessDenied: <VideoProhibited16Filled />,\n  ErrorBarCallMacOsMicrophoneAccessDenied: <MicProhibited16Filled />,\n  ErrorBarCallMicrophoneAccessDenied: <MicProhibited16Filled />,\n  ErrorBarCallMicrophoneMutedBySystem: <MicOff16Filled />,\n  ErrorBarCallMicrophoneUnmutedBySystem: <Mic16Filled />,\n  ErrorBarCallNetworkQualityLow: <WifiWarning16Filled />,\n  ErrorBarCallNoMicrophoneFound: <MicProhibited16Filled />,\n  ErrorBarCallNoSpeakerFound: <SpeakerMute16Filled />,\n  ErrorBarClear: <Dismiss16Regular />,\n  ErrorBarCallVideoRecoveredBySystem: <Video16Filled />,\n  ErrorBarCallVideoStoppedBySystem: <VideoProhibited16Filled />,\n  HorizontalGalleryLeftButton: <GalleryLeftButton />,\n  HorizontalGalleryRightButton: <GalleryRightButton />,\n  MessageDelivered: <CheckmarkCircle16Regular />,\n  MessageEdit: <Edit20Regular />,\n  MessageFailed: <ErrorCircle16Regular />,\n  MessageRemove: <Delete20Regular />,\n  MessageResend: <ArrowClockwise16Regular />,\n  MessageSeen: <Eye16Regular />,\n  MessageSending: <Circle16Regular />,\n  OptionsCamera: <Video20Regular />,\n  OptionsMic: <Mic20Regular />,\n  OptionsSpeaker: <Speaker220Regular />,\n  ParticipantItemMicOff: <MicOff16Regular />,\n  ParticipantItemOptions: <></>,\n  ParticipantItemOptionsHovered: <MoreHorizontal20Filled />,\n  ParticipantItemScreenShareStart: <ShareScreenStart20Filled />,\n  SendBoxSend: <Send20Regular />,\n  SendBoxSendHovered: <Send20Filled />,\n  VideoTileMicOff: <MicOff16Filled />,\n  /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\n  DialpadBackspace: <Backspace20Regular />,\n  VideoTilePinned: <Pin16Filled />,\n  VideoTileMoreOptions: <MoreHorizontal20Filled />,\n  VideoTileScaleFit: <ScaleFit20Regular />,\n  VideoTileScaleFill: <ScaleFill20Regular />,\n  PinParticipant: <Pin16Regular />,\n  UnpinParticipant: <PinOff16Regular />,\n  SplitButtonPrimaryActionCameraOn: <Video20Filled />,\n  SplitButtonPrimaryActionCameraOff: <VideoOff20Filled />,\n  SplitButtonPrimaryActionMicUnmuted: <Mic20Filled />,\n  SplitButtonPrimaryActionMicMuted: <MicOff20Filled />,\n  /* @conditional-compile-remove(vertical-gallery) */\n  VerticalGalleryLeftButton: <GalleryLeftButton />,\n  /* @conditional-compile-remove(vertical-gallery) */\n  VerticalGalleryRightButton: <GalleryRightButton />,\n  /* @conditional-compile-remove(video-background-effects) */\n  ControlButtonVideoEffectsOption: <VideoBackgroundEffect20Regular />,\n  /* @conditional-compile-remove(video-background-effects) */\n  ConfigurationScreenVideoEffectsButton: <VideoBackgroundEffect20Filled />,\n  /* @conditional-compile-remove(close-captions) */\n  CaptionsIcon: <ClosedCaption20Regular />,\n  /* @conditional-compile-remove(close-captions) */\n  CaptionsOffIcon: <ClosedCaptionOff20Regular />,\n  /* @conditional-compile-remove(close-captions) */\n  CaptionsSettingsIcon: <Settings20Regular />,\n  /* @conditional-compile-remove(close-captions) */\n  ChangeSpokenLanguageIcon: <PersonVoice20Regular />,\n  /* @conditional-compile-remove(close-captions) */\n  ChangeCaptionLanguageIcon: <Translate20Regular />,\n  ContextMenuCameraIcon: <Video20Regular />,\n  ContextMenuMicIcon: <Mic20Regular />,\n  ContextMenuSpeakerIcon: <Speaker220Regular />\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles, IStyle, FontWeights } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const inputBoxWrapperStyle = mergeStyles({\n  padding: '0'\n});\n\n/**\n * @private\n */\nexport const inputBoxStyle = mergeStyles({\n  overflow: 'auto',\n  minHeight: '2.25rem',\n  // prevents the input text box from being sized to 0px when the CallWithChatComposite chat pane is closed.\n  maxHeight: '8.25rem',\n  outline: 'red 5px',\n  fontWeight: FontWeights.regular,\n  fontSize: '0.875rem',\n  width: '100%',\n  height: '2.25rem',\n  lineHeight: '1.5rem',\n  '::-webkit-input-placeholder': {\n    fontSize: '0.875rem'\n  },\n  '::-moz-placeholder': {\n    fontSize: '0.875rem'\n  },\n  ':-moz-placeholder': {\n    fontSize: '0.875rem'\n  }\n});\n\n/**\n * @private\n */\nexport const inputBoxNewLineSpaceAffordance: IStyle = {\n  marginBottom: '2rem'\n};\n\n/**\n *\n * @private\n */\nexport const textContainerStyle: IStyle = {\n  alignSelf: 'center',\n  position: 'relative',\n  width: '100%'\n};\n\n/**\n * @private\n */\nexport const textFieldStyle: IStyle = {\n  root: {\n    width: '100%',\n    minHeight: '0',\n    fontSize: '8.25rem'\n  },\n  wrapper: {},\n  fieldGroup: {\n    outline: 'none',\n    border: 'none',\n    height: 'auto',\n    minHeight: '0',\n    /**\n     * Removing fieldGroup border to make sure no border is rendered around the text area in sendbox.\n     */\n    ':after': {\n      border: 'none'\n    }\n  },\n  field: {\n    borderRadius: '0.25rem'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { ReactNode, FormEvent, useCallback } from 'react';\nimport { Stack, TextField, mergeStyles, IStyle, ITextField, concatStyleSets, ITextFieldProps } from '@fluentui/react';\nimport { BaseCustomStyles } from '../types';\nimport { isEnterKeyEventFromCompositionSession } from './utils';\nimport { inputBoxStyle, inputBoxWrapperStyle, textFieldStyle, textContainerStyle } from './styles/InputBoxComponent.style';\n/**\n * @private\n */\nexport interface InputBoxStylesProps extends BaseCustomStyles {\n  /** Styles for the text field. */\n  textField?: IStyle;\n\n  /** Styles for the system message; These styles will be ignored when a custom system message component is provided. */\n  systemMessage?: IStyle;\n\n  /** Styles for customizing the container of the text field */\n  textFieldContainer?: IStyle;\n}\ntype InputBoxComponentProps = {\n  children?: ReactNode;\n  'data-ui-id'?: string;\n  id?: string;\n  textValue: string; // This could be plain text or HTML.\n  onChange: (event?: FormEvent<HTMLInputElement | HTMLTextAreaElement>, newValue?: string) => void;\n  textFieldRef?: React.RefObject<ITextField>;\n  inputClassName?: string;\n  placeholderText?: string;\n  supportNewline?: boolean;\n  maxLength: number;\n  onKeyDown?: (ev: React.KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onEnterKeyDown?: () => void;\n  errorMessage?: string | React.ReactElement;\n  disabled?: boolean;\n  styles?: InputBoxStylesProps;\n  autoFocus?: 'sendBoxTextField';\n};\n\n/**\n * @private\n */\nexport const InputBoxComponent = (props: InputBoxComponentProps): JSX.Element => {\n  const {\n    styles,\n    id,\n    'data-ui-id': dataUiId,\n    textValue,\n    onChange,\n    textFieldRef,\n    placeholderText,\n    onKeyDown,\n    onEnterKeyDown,\n    supportNewline,\n    inputClassName,\n    errorMessage,\n    disabled,\n    children\n  } = props;\n  const mergedRootStyle = mergeStyles(inputBoxWrapperStyle, styles?.root);\n  const mergedInputFieldStyle = mergeStyles(inputBoxStyle, inputClassName);\n  const mergedTextContainerStyle = mergeStyles(textContainerStyle, styles?.textFieldContainer);\n  const mergedTextFieldStyle = concatStyleSets(textFieldStyle, {\n    fieldGroup: styles?.textField,\n    errorMessage: styles?.systemMessage,\n    suffix: {\n      backgroundColor: 'transparent',\n      padding: '0 0'\n    }\n  });\n  const onTextFieldKeyDown = useCallback((ev: React.KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    if (isEnterKeyEventFromCompositionSession(ev)) {\n      return;\n    }\n    if (ev.key === 'Enter' && (ev.shiftKey === false || !supportNewline)) {\n      ev.preventDefault();\n      onEnterKeyDown && onEnterKeyDown();\n    }\n    onKeyDown && onKeyDown(ev);\n  }, [onEnterKeyDown, onKeyDown, supportNewline]);\n  const onRenderChildren = (): JSX.Element => {\n    return <>{children}</>;\n  };\n  const renderTextField = (): JSX.Element => {\n    const textFieldProps: ITextFieldProps = {\n      autoFocus: props.autoFocus === 'sendBoxTextField',\n      multiline: true,\n      autoAdjustHeight: true,\n      multiple: false,\n      resizable: false,\n      componentRef: textFieldRef,\n      id,\n      inputClassName: mergedInputFieldStyle,\n      placeholder: placeholderText,\n      autoComplete: 'off',\n      styles: mergedTextFieldStyle,\n      disabled,\n      errorMessage,\n      onRenderSuffix: props.children ? onRenderChildren : undefined\n    };\n    return <div style={textFieldProps.errorMessage ? {\n      padding: '0 0 5px 5px'\n    } : undefined}>\n        <TextField {...textFieldProps} data-ui-id={dataUiId} value={textValue} onChange={onChange} onKeyDown={onTextFieldKeyDown} onFocus={e => {\n        // Fix for setting the cursor to the correct position when multiline is true\n        // This approach should be reviewed during migration to FluentUI v9\n        e.currentTarget.value = '';\n        e.currentTarget.value = textValue;\n      }} />\n      </div>;\n  };\n  return <Stack className={mergedRootStyle}>\n      <div className={mergedTextContainerStyle}>{renderTextField()}</div>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Theme } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const isDarkThemed = (theme: Theme): boolean => {\n  const themeBlackBrightness = getPerceptualBrightnessOfHexColor(theme.palette.black);\n  const themeWhiteBrightness = getPerceptualBrightnessOfHexColor(theme.palette.white);\n  if (Number.isNaN(themeBlackBrightness) || Number.isNaN(themeWhiteBrightness)) {\n    return false;\n  }\n  return themeBlackBrightness > themeWhiteBrightness;\n};\nconst getPerceptualBrightnessOfHexColor = (hexColor: string): number => {\n  // return NaN if hexColor is not a hex code\n  if (!/^#[0-9A-Fa-f]{6}$/i.test(hexColor)) {\n    return NaN;\n  }\n  const r = parseInt(hexColor.substring(1, 3), 16);\n  const g = parseInt(hexColor.substring(3, 5), 16);\n  const b = parseInt(hexColor.substring(5, 7), 16);\n\n  // arithmetic mean  of the red, green, and blue color coordinates. Source: https://en.wikipedia.org/wiki/Brightness\n  return (r + g + b) / 3;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const inputBoxButtonStyle = mergeStyles({\n  color: 'grey',\n  margin: 'auto',\n  width: '1.0625rem',\n  height: '1.0625rem',\n  backgroundColor: 'transparent',\n  '&:hover': {\n    backgroundColor: 'transparent'\n  }\n});\n\n/**\n * @private\n */\nexport const inputBoxButtonTooltipStyle = mergeStyles({\n  // The toolTip host container show be a flex box, so that alignItems: 'center' works for inside buttons\n  display: 'flex'\n});\n\n/**\n * @private\n */\nexport const iconWrapperStyle = mergeStyles({\n  pointerEvents: 'none'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ICalloutContentStyles, IconButton, Stack, TooltipHost, mergeStyles, useTheme } from '@fluentui/react';\nimport { useState } from 'react';\nimport { isDarkThemed } from '../theming/themeUtils';\nimport React from 'react';\nimport { iconWrapperStyle, inputBoxButtonStyle, inputBoxButtonTooltipStyle } from './styles/InputBoxButton.style';\n\n/**\n * Props for displaying a send button besides the text input area.\n *\n * @private\n */\nexport type InputBoxButtonProps = {\n  onRenderIcon: (isHover: boolean) => JSX.Element;\n  onClick: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  className?: string;\n  id?: string;\n  ariaLabel?: string;\n  tooltipContent?: string;\n  'data-testId'?: string;\n};\n\n/**\n * @private\n */\nexport const InputBoxButton = (props: InputBoxButtonProps): JSX.Element => {\n  const {\n    onRenderIcon,\n    onClick,\n    ariaLabel,\n    className,\n    id,\n    tooltipContent,\n    'data-testId': dataTestId\n  } = props;\n  const [isHover, setIsHover] = useState(false);\n  const mergedButtonStyle = mergeStyles(inputBoxButtonStyle, className);\n  const theme = useTheme();\n  const calloutStyle: Partial<ICalloutContentStyles> = {\n    root: {\n      padding: 0\n    },\n    calloutMain: {\n      padding: '0.5rem'\n    }\n  };\n\n  // Place callout with no gap between it and the button.\n  const calloutProps = {\n    gapSpace: 0,\n    styles: calloutStyle,\n    backgroundColor: isDarkThemed(theme) ? theme.palette.neutralLighter : ''\n  };\n  return <TooltipHost hostClassName={inputBoxButtonTooltipStyle} content={tooltipContent} calloutProps={{\n    ...calloutProps\n  }}>\n      <IconButton className={mergedButtonStyle} ariaLabel={ariaLabel} onClick={onClick} id={id} onMouseEnter={() => {\n      setIsHover(true);\n    }} onMouseLeave={() => {\n      setIsHover(false);\n    }}\n    // VoiceOver fix: Avoid icon from stealing focus when IconButton is double-tapped to send message by wrapping with Stack with pointerEvents style to none\n    onRenderIcon={() => <Stack className={iconWrapperStyle}>{onRenderIcon(isHover)}</Stack>} data-testid={dataTestId} />\n    </TooltipHost>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n/**\n * @private\n */\nexport const MAXIMUM_LENGTH_OF_MESSAGE = 8000;\nconst EMPTY_MESSAGE_REGEX = /^\\s*$/;\n/**\n * @private\n */\nexport const isMessageTooLong = (valueLength: number): boolean => {\n  return valueLength > MAXIMUM_LENGTH_OF_MESSAGE;\n};\n\n/**\n * @private\n */\nexport const sanitizeText = (message: string): string => {\n  if (EMPTY_MESSAGE_REGEX.test(message)) {\n    return '';\n  } else {\n    return message;\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useState, useMemo, useCallback } from 'react';\nimport { IStyle, ITextField, mergeStyles, concatStyleSets, Icon, Stack } from '@fluentui/react';\nimport { sendButtonStyle, sendIconStyle, sendBoxWrapperStyles, borderAndBoxShadowStyle } from './styles/SendBox.styles';\nimport { BaseCustomStyles } from '../types';\nimport { useTheme } from '../theming';\nimport { useLocale } from '../localization';\nimport { useIdentifiers } from '../identifiers';\nimport { InputBoxComponent } from './InputBoxComponent';\nimport { InputBoxButton } from './InputBoxButton';\nimport { MAXIMUM_LENGTH_OF_MESSAGE, isMessageTooLong, sanitizeText } from './utils/SendBoxUtils';\n/**\n * Fluent styles for {@link Sendbox}.\n *\n * @public\n */\nexport interface SendBoxStylesProps extends BaseCustomStyles {\n  /** Styles for the text field. */\n  textField?: IStyle;\n  /** styles for the text field container */\n  textFieldContainer?: IStyle;\n  /** Styles for the container of the send message icon. */\n  sendMessageIconContainer?: IStyle;\n  /** Styles for the send message icon; These styles will be ignored when a custom send message icon is provided. */\n  sendMessageIcon?: IStyle;\n  /** Styles for the system message; These styles will be ignored when a custom system message component is provided. */\n  systemMessage?: IStyle;\n}\n\n/**\n * Strings of {@link SendBox} that can be overridden.\n *\n * @public\n */\nexport interface SendBoxStrings {\n  /**\n   * Placeholder text in SendBox when there is no user input\n   */\n  placeholderText: string;\n  /**\n   * The warning message when send box text length is more than max limit\n   */\n  textTooLong: string;\n  /**\n   * Aria label for send message button\n   */\n  sendButtonAriaLabel: string;\n}\n\n/**\n * Props for {@link SendBox}.\n *\n * @public\n */\nexport interface SendBoxProps {\n  /**\n   * Optional boolean to disable text box\n   * @defaultValue false\n   */\n  disabled?: boolean;\n  /**\n   * Optional text for system message below text box\n   */\n  systemMessage?: string;\n  /**\n   * Optional override behavior on send button click\n   */\n  onSendMessage?: (content: string) => Promise<void>;\n  /**\n   * Optional callback called when user is typing\n   */\n  onTyping?: () => Promise<void>;\n  /**\n   * Optional callback to render system message below the SendBox.\n   * @defaultValue MessageBar\n   */\n  onRenderSystemMessage?: (systemMessage: string | undefined) => React.ReactElement;\n  /**\n   * Optional boolean to support new line in SendBox.\n   * @defaultValue false\n   */\n  supportNewline?: boolean;\n  /**\n   * Optional callback to render send button icon to the right of the SendBox.\n   * @defaultValue SendBoxSendHovered icon when mouse over icon and SendBoxSend icon otherwise\n   */\n  onRenderIcon?: (isHover: boolean) => JSX.Element;\n  /**\n   * Allows users to pass in an object contains custom CSS styles.\n   * @Example\n   * ```\n   * <SendBox styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: SendBoxStylesProps;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<SendBoxStrings>;\n  /**\n   * enumerable to determine if the input box has focus on render or not.\n   * When undefined nothing has focus on render\n   */\n  autoFocus?: 'sendBoxTextField';\n}\n\n/**\n * Component for typing and sending messages.\n *\n * Supports sending typing notification when user starts entering text.\n * Supports an optional message below the text input field.\n *\n * @public\n */\nexport const SendBox = (props: SendBoxProps): JSX.Element => {\n  const {\n    disabled,\n    systemMessage,\n    supportNewline,\n    onSendMessage,\n    onTyping,\n    onRenderIcon,\n    onRenderSystemMessage,\n    styles,\n    autoFocus\n  } = props;\n  const theme = useTheme();\n  const localeStrings = useLocale().strings.sendBox;\n  const strings = {\n    ...localeStrings,\n    ...props.strings\n  };\n  const ids = useIdentifiers();\n  const [textValue, setTextValue] = useState('');\n  const [textValueOverflow, setTextValueOverflow] = useState(false);\n  const sendTextFieldRef = React.useRef<ITextField>(null);\n  const sendMessageOnClick = (): void => {\n    // don't send a message when disabled\n    if (disabled || textValueOverflow) {\n      return;\n    }\n\n    // Don't send message until all files have been uploaded successfully\n    const message = textValue;\n    // we don't want to send empty messages including spaces, newlines, tabs\n    // Message can be empty if there is a valid file upload\n    if (sanitizeText(message).length > 0) {\n      onSendMessage && onSendMessage(message);\n      setTextValue('');\n    }\n    sendTextFieldRef.current?.focus();\n  };\n  const setText = (newValue?: string | undefined): void => {\n    if (newValue === undefined) {\n      return;\n    }\n    setTextValueOverflow(isMessageTooLong(newValue.length));\n    setTextValue(newValue);\n  };\n  const textTooLongMessage = textValueOverflow ? strings.textTooLong : undefined;\n  const errorMessage = systemMessage ?? textTooLongMessage;\n  const mergedSendButtonStyle = useMemo(() => mergeStyles(sendButtonStyle, styles?.sendMessageIconContainer), [styles?.sendMessageIconContainer]);\n  const mergedStyles = useMemo(() => concatStyleSets(styles), [styles]);\n  const mergedSendIconStyle = useMemo(() => sendIconStyle({\n    theme,\n    hasText: !!textValue,\n    hasErrorMessage: !!errorMessage,\n    customSendIconStyle: styles?.sendMessageIcon\n  }), [theme, textValue, errorMessage, styles?.sendMessageIcon]);\n  const onRenderSendIcon = useCallback((isHover: boolean) => onRenderIcon ? onRenderIcon(isHover) : <Icon iconName={isHover && textValue ? 'SendBoxSendHovered' : 'SendBoxSend'} className={mergedSendIconStyle} />, [mergedSendIconStyle, onRenderIcon, textValue]);\n\n  // Ensure that errors are cleared when there are no files in sendBox\n  return <Stack className={mergeStyles(sendBoxWrapperStyles, {\n    overflow: 'visible'\n  } // This is needed for the mention popup to be visible\n  )}>\n      {}\n      <Stack className={borderAndBoxShadowStyle({\n      theme,\n      hasErrorMessage: !!errorMessage,\n      disabled: !!disabled\n    })}>\n        <InputBoxComponent autoFocus={autoFocus} data-ui-id={ids.sendboxTextField} disabled={disabled} errorMessage={onRenderSystemMessage ? onRenderSystemMessage(errorMessage) : errorMessage} textFieldRef={sendTextFieldRef} id=\"sendbox\" placeholderText={strings.placeholderText} textValue={textValue} onChange={(_, newValue) => setText(newValue)} onKeyDown={ev => {\n        const keyWasSendingMessage = ev.key === 'Enter' && (ev.shiftKey === false || !supportNewline);\n        if (!keyWasSendingMessage) {\n          onTyping?.();\n        }\n      }} onEnterKeyDown={() => {\n        sendMessageOnClick();\n      }} styles={mergedStyles} supportNewline={supportNewline} maxLength={MAXIMUM_LENGTH_OF_MESSAGE}>\n          <InputBoxButton onRenderIcon={onRenderSendIcon} onClick={e => {\n          if (!textValueOverflow) {\n            sendMessageOnClick();\n          }\n          e.stopPropagation();\n        }} id={'sendIconWrapper'} className={mergedSendButtonStyle} ariaLabel={localeStrings.sendButtonAriaLabel} tooltipContent={localeStrings.sendButtonAriaLabel} />\n        </InputBoxComponent>\n        {}\n      </Stack>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IIconProps, IStyle, PartialTheme } from '@fluentui/react';\n/* @conditional-compile-remove(image-overlay) */\nimport { IOverlayStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const cancelIcon: IIconProps = {\n  iconName: 'Cancel'\n};\n\n/**\n * @private\n */\nexport const downloadIcon: IIconProps = {\n  iconName: 'Download'\n};\n\n/* @conditional-compile-remove(image-overlay) */\n/**\n * @private\n */\nexport const overlayStyles = (theme: PartialTheme): IOverlayStyles => {\n  return {\n    root: {\n      background: theme.semanticColors?.bodyBackground\n    }\n  };\n};\n\n/**\n * @private\n */\nexport const focusTrapZoneStyle: IStyle = {\n  boxShadow: 'none',\n  background: 'transparent',\n  display: 'flex',\n  width: '100%',\n  height: '100%',\n  maxWidth: '100%',\n  maxHeight: '100%'\n};\n\n/**\n * @private\n */\nexport const scrollableContentStyle: IStyle = {\n  overflowY: 'hidden',\n  display: 'flex',\n  maxWidth: '100%',\n  maxHeight: '100%',\n  flexDirection: 'column',\n  flexWrap: 'nowrap'\n};\n\n/**\n * @private\n */\nexport const themeProviderRootStyle: React.CSSProperties = {\n  background: 'transparent',\n  display: 'flex',\n  flexDirection: 'column'\n};\n\n/**\n * @private\n */\nexport const headerStyle: IStyle = {\n  fontSize: 'inherit',\n  margin: '0',\n  width: '100%',\n  height: '3.5rem',\n  flexDirection: 'row',\n  justifyContent: 'space-between',\n  padding: '0.25rem 0.75rem'\n};\n\n/**\n * @private\n */\nexport const titleBarContainerStyle: IStyle = {\n  flexDirection: 'row',\n  justifyContent: 'start',\n  flexWrap: 'wrap',\n  alignContent: 'center',\n  alignItems: 'center'\n};\n\n/**\n * @private\n */\nexport const titleStyle = (theme: PartialTheme): IStyle => {\n  return {\n    paddingLeft: '0.5rem',\n    color: theme.palette?.black,\n    fontFamily: 'inherit',\n    fontSize: '0.875rem',\n    fontStyle: 'normal',\n    fontWeight: '600',\n    lineHeight: '1.25rem'\n  };\n};\n\n/**\n * @private\n */\nexport const controlBarContainerStyle: IStyle = {\n  flexDirection: 'row',\n  justifyContent: 'start',\n  flexWrap: 'wrap',\n  alignContent: 'center',\n  alignItems: 'center'\n};\n\n/**\n * @private\n */\nexport const downloadIconStyle: IStyle = {\n  marginRight: '0.5em',\n  fontSize: '0.875rem' // 14px\n};\n\n/**\n * @private\n */\nexport const bodyContainer: IStyle = {\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden',\n  padding: '1rem 2rem 3rem 2rem',\n  '@media (max-width: 25rem) or (max-height: 25rem)': {\n    padding: '0rem 1rem 2rem 1rem'\n  }\n};\n\n/**\n * @private\n */\nexport const normalImageStyle: IStyle = {\n  objectFit: 'contain',\n  maxHeight: '100%',\n  maxWidth: '100%'\n};\n\n/**\n * @private\n */\nexport const brokenImageStyle = (theme: PartialTheme): IStyle => {\n  return {\n    color: theme.palette?.black\n  };\n};\n\n/**\n * @private\n */\nexport const closeButtonStyles = (theme: PartialTheme): IStyle => {\n  return {\n    color: theme.palette?.black,\n    ':hover': {\n      color: theme.palette?.black\n    },\n    ':active': {\n      color: theme.palette?.black\n    }\n  };\n};\n\n/**\n * @private\n */\nexport const downloadButtonStyle: IStyle = {\n  margin: '0 0.5rem',\n  height: '32px',\n  borderWidth: '1px',\n  fontSize: '0.875rem',\n  // 14px\n  fontWeight: 600,\n  padding: '0.38rem 0.75rem',\n  borderRadius: '4px',\n  whiteSpace: 'nowrap',\n  '@media (max-width: 25rem)': {\n    display: 'none'\n  }\n};\n\n/**\n * @private\n */\nexport const smallDownloadButtonContainerStyle = (theme: PartialTheme): IStyle => {\n  return {\n    marginRight: '0.5rem',\n    whiteSpace: 'nowrap',\n    color: theme.palette?.black,\n    ':hover': {\n      color: theme.palette?.black\n    },\n    ':active': {\n      color: theme.palette?.black\n    },\n    '@media (min-width: 25rem)': {\n      display: 'none'\n    }\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(image-overlay) */\nimport { DefaultButton, Icon, IconButton, Modal, PartialTheme, Stack, mergeStyles } from '@fluentui/react';\n/* @conditional-compile-remove(image-overlay) */\nimport React, { useMemo, useState } from 'react';\n/* @conditional-compile-remove(image-overlay) */\nimport { bodyContainer, brokenImageStyle, cancelIcon, closeButtonStyles, controlBarContainerStyle, downloadButtonStyle, downloadIcon, downloadIconStyle, focusTrapZoneStyle, headerStyle, normalImageStyle, overlayStyles, scrollableContentStyle, smallDownloadButtonContainerStyle, themeProviderRootStyle, titleBarContainerStyle, titleStyle } from './styles/ImageOverlay.style';\n/* @conditional-compile-remove(image-overlay) */\nimport { FluentThemeProvider } from '../theming/FluentThemeProvider';\n/* @conditional-compile-remove(image-overlay) */\nimport { useLocale } from '../localization';\n/* @conditional-compile-remove(image-overlay) */\nimport { darkTheme } from '../theming';\n\n/* @conditional-compile-remove(image-overlay) */\n/**\n * Props for {@link ImageOverlay}.\n *\n * @public\n */\nexport interface ImageOverlayProps {\n  /**\n   * Boolean that controls whether the modal is displayed.\n   */\n  isOpen: boolean;\n  /**\n   * Image source used to display the image in a large scale.\n   */\n  imageSrc: string;\n  /**\n   * Optional string used as a alt text for the image. @default 'image'\n   */\n  altText?: string;\n  /**\n   * Optional string used as the title of the image and displayed on the top left corner of the ImageOverlay.\n   */\n  title?: string;\n  /**\n   * Optional JSX element used as a title icon and displayed to the left of the title element.\n   */\n  titleIcon?: JSX.Element;\n  /**\n   * Callback to invoke when the ImageOverlay modal is dismissed\n   */\n  onDismiss: () => void;\n  /**\n   * Optional callback called when the download button is clicked. If not provided, the download button will not be rendered.\n   */\n  onDownloadButtonClicked?: (imageSrc: string) => void;\n}\n/* @conditional-compile-remove(image-overlay) */\n/**\n * Strings of {@link ImageOverlay} that can be overridden.\n *\n * @public\n */\nexport interface ImageOverlayStrings {\n  /**\n   * Download button label for ImageOverlay\n   */\n  downloadButtonLabel: string;\n  /**\n   * Dismiss button aria label for ImageOverlay\n   */\n  dismissButtonAriaLabel: string;\n}\n/* @conditional-compile-remove(image-overlay) */\n/**\n * Component to render a fullscreen modal for a selected image.\n *\n * @public\n */\nexport const ImageOverlay = (props: ImageOverlayProps): JSX.Element => {\n  const {\n    isOpen,\n    imageSrc,\n    title,\n    titleIcon,\n    altText,\n    onDownloadButtonClicked,\n    onDismiss\n  } = props;\n\n  /* @conditional-compile-remove(image-overlay) */\n  const localeStrings = useLocale().strings.imageOverlay;\n  const [isImageLoaded, setIsImageLoaded] = useState<boolean>(true);\n\n  /* @conditional-compile-remove(image-overlay) */\n  const overlayTheme = useMemo((): PartialTheme => {\n    return {\n      ...darkTheme,\n      semanticColors: {\n        ...darkTheme.semanticColors,\n        bodyBackground: 'rgba(0, 0, 0, 0.85)'\n      }\n    };\n  }, []);\n  const imageStyle = isImageLoaded ? normalImageStyle : brokenImageStyle(overlayTheme);\n  const renderHeaderBar = (): JSX.Element => {\n    return <Stack className={mergeStyles(headerStyle)}>\n        <Stack className={mergeStyles(titleBarContainerStyle)}>\n          {titleIcon}\n          <Stack.Item className={mergeStyles(titleStyle(overlayTheme))} aria-label={title || 'Image'}>\n            {title}\n          </Stack.Item>\n        </Stack>\n        <Stack className={mergeStyles(controlBarContainerStyle)}>\n          {onDownloadButtonClicked && <DefaultButton className={mergeStyles(downloadButtonStyle)}\n        /* @conditional-compile-remove(image-overlay) */ text={localeStrings.downloadButtonLabel} onClick={() => onDownloadButtonClicked && onDownloadButtonClicked(imageSrc)} onRenderIcon={() => <Icon iconName={downloadIcon.iconName} className={mergeStyles(downloadIconStyle)} />} aria-live={'polite'}\n        /* @conditional-compile-remove(image-overlay) */ aria-label={localeStrings.downloadButtonLabel} disabled={imageSrc === ''} />}\n          {onDownloadButtonClicked && <IconButton iconProps={downloadIcon} className={mergeStyles(smallDownloadButtonContainerStyle(overlayTheme))} onClick={() => onDownloadButtonClicked && onDownloadButtonClicked(imageSrc)}\n        /* @conditional-compile-remove(image-overlay) */ aria-label={localeStrings.downloadButtonLabel} aria-live={'polite'} disabled={imageSrc === ''} />}\n          <IconButton iconProps={cancelIcon} className={mergeStyles(closeButtonStyles(overlayTheme))} onClick={onDismiss}\n        /* @conditional-compile-remove(image-overlay) */ ariaLabel={localeStrings.dismissButtonAriaLabel} aria-live={'polite'} />\n        </Stack>\n      </Stack>;\n  };\n  const renderBodyWithLightDismiss = (): JSX.Element => {\n    return <Stack className={mergeStyles(bodyContainer)} onClick={() => props.onDismiss()}>\n        {imageSrc && <img src={imageSrc} className={mergeStyles(imageStyle)} alt={altText || 'image'} aria-label={'image-overlay-main-image'} aria-live={'polite'} onError={() => {\n        setIsImageLoaded(false);\n      }} onClick={event => event.stopPropagation()} onDoubleClick={event => {\n        event.persist();\n      }} />}\n      </Stack>;\n  };\n  return <Modal titleAriaId={title} isOpen={isOpen} onDismiss={onDismiss} overlay={{\n    styles: {\n      ...overlayStyles(overlayTheme)\n    }\n  }} styles={{\n    main: focusTrapZoneStyle,\n    scrollableContent: scrollableContentStyle\n  }} isDarkOverlay={true}>\n      <FluentThemeProvider fluentTheme={overlayTheme} rootStyle={themeProviderRootStyle}>\n        {renderHeaderBar()}\n        {renderBodyWithLightDismiss()}\n      </FluentThemeProvider>\n    </Modal>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles } from '@fluentui/react';\n\n/** @private */\nexport const MESSAGE_STATUS_INDICATOR_SIZE_REM = 1;\n\n/**\n * ErrorIcon seems designed slightly smaller than other icons we try to match the size and then fix positioning here.\n *\n * @private\n */\nexport const MessageStatusIndicatorErrorIconStyle = mergeStyles({\n  marginRight: '-0.06rem',\n  fontSize: '1.06rem'\n});\n\n/**\n * @private\n */\nexport const MessageStatusIndicatorIconStyle = mergeStyles({\n  fontSize: `${MESSAGE_STATUS_INDICATOR_SIZE_REM}rem`,\n  width: `${MESSAGE_STATUS_INDICATOR_SIZE_REM}rem`,\n  height: `${MESSAGE_STATUS_INDICATOR_SIZE_REM}rem`\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/// Adapted from: https://github.com/AlmeroSteyn/react-aria-live/blob/master/src/modules/AnnouncerContext.js\n\nimport React from 'react';\n\n/** @private */\nexport type AnnouncerContextType = {\n  announceAssertive: (message: string, id: string) => void;\n  announcePolite: (message: string, id: string) => void;\n};\n\n/** @private */\nconst AnnouncerContext = React.createContext<AnnouncerContextType>({\n  announceAssertive: logContextWarning,\n  announcePolite: logContextWarning\n});\nfunction logContextWarning(): void {\n  console.warn('Announcement failed, LiveAnnouncer context is missing');\n}\nexport default AnnouncerContext;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/// Adapted from: https://github.com/AlmeroSteyn/react-aria-live/blob/master/src/modules/AnnouncerMessage.js\n\nimport { useCallback, useEffect } from 'react';\nimport { v1 as createGUID } from 'uuid';\n\n/** @private */\nconst AnnouncerMessage = (props: {\n  message: string;\n  ariaLive: string;\n  clearOnUnmount?: boolean;\n  announceAssertive: (message: string, id: string) => void;\n  announcePolite: (message: string, id: string) => void;\n}): null => {\n  const {\n    message,\n    ariaLive,\n    clearOnUnmount,\n    announceAssertive,\n    announcePolite\n  } = props;\n  const announce = useCallback(() => {\n    if (ariaLive === 'assertive') {\n      announceAssertive(message || '', createGUID());\n    }\n    if (ariaLive === 'polite') {\n      announcePolite(message || '', createGUID());\n    }\n  }, [announceAssertive, announcePolite, ariaLive, message]);\n  useEffect(() => {\n    announce();\n    return () => {\n      if (clearOnUnmount) {\n        announceAssertive('', createGUID());\n        announcePolite('', createGUID());\n      }\n    };\n  }, [message, clearOnUnmount, announce, announceAssertive, announcePolite]);\n  return null;\n};\nexport default AnnouncerMessage;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/// Adapted from: https://github.com/AlmeroSteyn/react-aria-live/blob/master/src/modules/LiveMessage.js\n\nimport React from 'react';\nimport AnnouncerContext from './AnnouncerContext';\nimport AnnouncerMessage from './AnnouncerMessage';\n\n/** @private */\nconst LiveMessage = (props: {\n  message: string;\n  ariaLive: string;\n  clearOnUnmount?: boolean;\n}): JSX.Element => <AnnouncerContext.Consumer>\n    {contextProps => <AnnouncerMessage {...contextProps} {...props} />}\n  </AnnouncerContext.Consumer>;\nexport default LiveMessage;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Icon } from '@fluentui/react';\nimport React from 'react';\nimport LiveMessage from './Announcer/LiveMessage';\n\n/**\n * Props for {@link MessageStatusIndicatorInternal}.\n *\n * @internal\n */\nexport interface MessageStatusIconProps {\n  shouldAnnounce: boolean;\n  iconName: string;\n  iconClassName: string;\n  ariaLabel?: string;\n}\n\n/**\n * Component to display message status icon\n *\n * @internal\n */\nexport const MessageStatusIcon = (props: MessageStatusIconProps): JSX.Element => {\n  const {\n    shouldAnnounce,\n    iconName,\n    iconClassName,\n    ariaLabel\n  } = props;\n  return <>\n      {/* live message is used here so that aria labels are announced on mobile */}\n      {ariaLabel && <LiveMessage message={ariaLabel} ariaLive=\"polite\" />}\n      <div\n    // make icon accessible\n    tabIndex={0}>\n        <Icon role={'status'}\n      // Role `status` is one of the live region roles and is used to notify screen readers of changes to the status of the message\n      // it has aria-live prop set to `polite` by default.\n      // By setting it to `off` value, we disable live updates when they aren't needed\n      // and keep it available in the accessibility tree\n      aria-live={shouldAnnounce ? 'polite' : 'off'} data-ui-id={'chat-composite-message-status-icon'} aria-label={ariaLabel} iconName={iconName} className={iconClassName} />\n      </div>\n    </>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ICalloutContentStyles, ITooltipHostStyles, mergeStyles, TooltipHost } from '@fluentui/react';\nimport { MessageStatus, _formatString } from '@internal/acs-ui-common';\nimport React, { useState } from 'react';\nimport { useLocale } from '../localization';\nimport { useTheme } from '../theming';\nimport { isDarkThemed } from '../theming/themeUtils';\nimport { BaseCustomStyles } from '../types';\nimport { MessageStatusIndicatorErrorIconStyle, MessageStatusIndicatorIconStyle } from './styles/MessageStatusIndicator.styles';\nimport { MessageStatusIndicatorStrings } from './MessageStatusIndicator';\nimport { MessageStatusIcon, MessageStatusIconProps } from './MessageStatusIcon';\n\n/**\n * Props for {@link MessageStatusIndicatorInternal}.\n *\n * @internal\n */\nexport interface MessageStatusIndicatorInternalProps {\n  /** Message status that determines the icon to display. */\n  status?: MessageStatus;\n  readCount?: number;\n  onToggleToolTip?: (isToggled: boolean) => void;\n  /** number of participants not including myself */\n  remoteParticipantsCount?: number;\n  /**\n   * Allows users to pass an object containing custom CSS styles.\n   * @Example\n   * ```\n   * <MessageStatus styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: BaseCustomStyles;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: MessageStatusIndicatorStrings;\n  /**\n   * Optional call back to provide LiveMessage component for accessibility\n   */\n  shouldAnnounce: boolean;\n}\n\n/**\n * Component to display the status of a sent message.\n *\n * Adds an icon and tooltip corresponding to the message status.\n *\n * @internal\n */\nexport const MessageStatusIndicatorInternal = (props: MessageStatusIndicatorInternalProps): JSX.Element => {\n  const {\n    status,\n    styles,\n    remoteParticipantsCount,\n    onToggleToolTip,\n    readCount,\n    shouldAnnounce\n  } = props;\n  const localeStrings = useLocale().strings.messageStatusIndicator;\n  const [isTooltipToggled, setIsTooltipToggled] = useState<boolean>(false);\n  const strings = {\n    ...localeStrings,\n    ...props.strings\n  };\n  const theme = useTheme();\n  const calloutStyle: Partial<ICalloutContentStyles> = {\n    root: {\n      padding: 0\n    },\n    calloutMain: {\n      padding: '0.5rem'\n    }\n  };\n\n  // Place callout with no gap between it and the button.\n  const calloutProps = {\n    gapSpace: 0,\n    styles: calloutStyle,\n    backgroundColor: isDarkThemed(theme) ? theme.palette.neutralLighter : ''\n  };\n  switch (status) {\n    case 'failed':\n      return <TooltipHost content={strings.failedToSendTooltipText} data-ui-id=\"chat-composite-message-tooltip\" calloutProps={{\n        ...calloutProps\n      }} styles={hostStyles}>\n          <MemoMessageStatusIcon shouldAnnounce={shouldAnnounce} iconName=\"MessageFailed\" iconClassName={mergeStyles(MessageStatusIndicatorErrorIconStyle, {\n          color: theme.palette.redDark\n        }, styles?.root)} ariaLabel={strings.failedToSendAriaLabel} />\n        </TooltipHost>;\n    case 'sending':\n      return <TooltipHost content={strings.sendingTooltipText} data-ui-id=\"chat-composite-message-tooltip\" calloutProps={{\n        ...calloutProps\n      }} styles={hostStyles}>\n          <MemoMessageStatusIcon shouldAnnounce={shouldAnnounce} iconName=\"MessageSending\" iconClassName={mergeStyles(MessageStatusIndicatorIconStyle, {\n          color: theme.palette.themePrimary\n        }, styles?.root)} ariaLabel={strings.sendingAriaLabel} />\n        </TooltipHost>;\n    case 'seen':\n      return <TooltipHost calloutProps={{\n        ...calloutProps\n      }} data-ui-id=\"chat-composite-message-tooltip\" styles={hostStyles} content={\n      // when it's just 1 to 1 texting, we don't need to know who has read the message, just show message as 'seen'\n      // when readCount is 0, we have a bug, show 'seen' to cover up as a fall back\n      // when participant count is 0, we have a bug, show 'seen' to cover up as a fall back\n      readCount === 0 || remoteParticipantsCount && remoteParticipantsCount <= 1 || !readCount || !remoteParticipantsCount || strings.readByTooltipText === undefined ? strings.seenTooltipText : _formatString(strings.readByTooltipText, {\n        messageThreadReadCount: `${readCount}`,\n        remoteParticipantsCount: `${remoteParticipantsCount}`\n      })} onTooltipToggle={() => {\n        if (onToggleToolTip) {\n          onToggleToolTip(!isTooltipToggled);\n          setIsTooltipToggled(!isTooltipToggled);\n        }\n      }}>\n          <MemoMessageStatusIcon shouldAnnounce={shouldAnnounce} iconName=\"MessageSeen\" iconClassName={mergeStyles({\n          color: theme.palette.themePrimary\n        }, styles?.root)} ariaLabel={strings.seenAriaLabel} />\n        </TooltipHost>;\n    case 'delivered':\n      return <TooltipHost calloutProps={{\n        ...calloutProps\n      }} content={strings.deliveredTooltipText} data-ui-id=\"chat-composite-message-tooltip\" styles={hostStyles}>\n          <MemoMessageStatusIcon shouldAnnounce={shouldAnnounce} iconName=\"MessageDelivered\" iconClassName={mergeStyles(MessageStatusIndicatorIconStyle, {\n          color: theme.palette.themePrimary\n        }, styles?.root)} ariaLabel={strings.deliveredAriaLabel} />\n        </TooltipHost>;\n    default:\n      return <></>;\n  }\n};\n\n// The TooltipHost root uses display: inline by default.\n// To prevent sizing issues or tooltip positioning issues, we override to inline-block.\n// For more details see \"Icon Button with Tooltip\" on https://developer.microsoft.com/en-us/fluentui#/controls/web/button\nconst hostStyles: Partial<ITooltipHostStyles> = {\n  root: {\n    display: 'inline-block'\n  }\n};\nconst MemoMessageStatusIcon = React.memo((obj: MessageStatusIconProps): JSX.Element => {\n  return <MessageStatusIcon {...obj} />;\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { MessageStatus, _formatString } from '@internal/acs-ui-common';\nimport React from 'react';\nimport { BaseCustomStyles } from '../types';\nimport { MessageStatusIndicatorInternal, MessageStatusIndicatorInternalProps } from './MessageStatusIndicatorInternal';\n\n/**\n * Strings of {@link MessageStatusIndicator} that can be overridden.\n *\n * @public\n */\nexport interface MessageStatusIndicatorStrings {\n  /** Aria label to notify user when their message has been delivered. */\n  deliveredAriaLabel?: string;\n  /** Text to display in the delivered message icon tooltip. */\n  deliveredTooltipText: string;\n  /** Aria label to notify user when their message has been seen by others. */\n  seenAriaLabel?: string;\n  /** Text to display in the seen message icon tooltip if read number/ participant number is 1 */\n  seenTooltipText: string;\n  /** Text to display in the seen message icon tooltip if read number logic is working correctly (more than 1 read number and more than 1 particiants)*/\n  readByTooltipText?: string;\n  /** Aria label to notify user when their message is being sent. */\n  sendingAriaLabel?: string;\n  /** Text to display in the sending message icon tooltip. */\n  sendingTooltipText: string;\n  /** Aria label to notify user when their message has failed to be sent. */\n  failedToSendAriaLabel?: string;\n  /** Text to display in the failed message icon tooltip. */\n  failedToSendTooltipText: string;\n}\n\n/**\n * Props for {@link MessageStatusIndicator}.\n *\n * @public\n */\nexport interface MessageStatusIndicatorProps {\n  /** Message status that determines the icon to display. */\n  status?: MessageStatus;\n  readCount?: number;\n  onToggleToolTip?: (isToggled: boolean) => void;\n  /** number of participants not including myself */\n  remoteParticipantsCount?: number;\n  /**\n   * Allows users to pass an object containing custom CSS styles.\n   * @Example\n   * ```\n   * <MessageStatus styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: BaseCustomStyles;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: MessageStatusIndicatorStrings;\n}\n\n/**\n * Component to display the status of a sent message.\n *\n * Adds an icon and tooltip corresponding to the message status.\n *\n * @public\n */\nexport const MessageStatusIndicator = (props: MessageStatusIndicatorProps): JSX.Element => {\n  const internalProps: MessageStatusIndicatorInternalProps = {\n    ...props,\n    shouldAnnounce: true\n  };\n  return <MessageStatusIndicatorInternal {...internalProps}></MessageStatusIndicatorInternal>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IButtonStyles, mergeStyles } from '@fluentui/react';\nimport { makeStyles, shorthands, tokens } from '@fluentui/react-components';\nimport { CSSProperties } from 'react';\nimport { MESSAGE_STATUS_INDICATOR_SIZE_REM } from './MessageStatusIndicator.styles';\nimport { ComponentSlotStyle } from '../../types';\n\n// Minimum chat bubble width. This matches the minimum chat bubble width from FluentUI\n// that can contain a message and a timestamp.\nconst CHAT_MESSAGE_CONTAINER_MIN_WIDTH_REM = 6.25;\n\n// Chat messages should span just short of the width of the container.\n// When calculating the width of a message we also must take into account\n// the width of the avatar/gutter and the gap between the message and avatar/gutter.\nconst AVATAR_WIDTH_REM = 2;\nconst AVATAR_MARGIN_LEFT = 2.5;\nconst AVATAR_MESSAGE_GAP_REM = 0.125;\nconst MESSAGE_AMOUNT_OUT_FROM_EDGE_REM = 2;\n\n// Avatars should display on top of chat messages when the chat thread is narrow\nconst MESSAGE_AVATAR_OVERLAP_REM = 0.925;\nconst CHAT_MESSAGE_ZINDEX = 1;\nconst AVATAR_ZINDEX = 2;\n// new message button should be on top of chat message\nconst NEW_MESSAGE_BUTTON_ZINDEX = 2;\n\n/**\n * @private\n */\nexport const messageThreadContainerStyle = mergeStyles({\n  height: '100%',\n  width: '100%',\n  maxHeight: '100%',\n  overflow: 'auto',\n  position: 'relative',\n  alignSelf: 'center'\n});\n\n/**\n * @private\n */\nexport const messageThreadWrapperContainerStyle = mergeStyles({\n  height: '100%',\n  width: '100%',\n  position: 'relative'\n});\n\n/**\n * @private\n */\nexport const noMessageStatusStyle = mergeStyles({\n  // This should match the size of the message status indicator icon to ensure\n  // multiple messages sent by the user are aligned correctly.\n  width: `${MESSAGE_STATUS_INDICATOR_SIZE_REM}rem`\n});\n\n/**\n * @private\n */\nexport const useChatStyles = makeStyles({\n  root: {\n    paddingTop: '0.8rem',\n    paddingBottom: '0.5rem',\n    paddingRight: '0.6rem',\n    paddingLeft: '0.6rem',\n    ...shorthands.border('none'),\n    ...shorthands.overflow('auto'),\n    // `height: 100%` ensures that the Chat component covers 100% of it's parents height\n    // to prevent intermittent scrollbars when GIFs are present in the chat.\n    height: '100%',\n    '& a:link': {\n      color: tokens.colorBrandForegroundLink\n    },\n    '& a:visited': {\n      color: tokens.colorBrandForegroundLinkHover\n    },\n    '& a:hover': {\n      color: tokens.colorBrandForegroundLinkHover\n    }\n  }\n});\n\n/**\n * @private\n */\nexport const useChatMessageRenderStyles = makeStyles({\n  rootCommon: {\n    '&:focus-visible': {\n      ...shorthands.outline('0')\n    }\n  },\n  rootMessage: {\n    ...shorthands.padding('0'),\n    ...shorthands.margin('0'),\n    maxWidth: '100%',\n    minWidth: `${CHAT_MESSAGE_CONTAINER_MIN_WIDTH_REM}rem`\n  },\n  rootMyMessage: {\n    gridTemplateColumns: 'auto fit-content(0)',\n    gridTemplateAreas: `\n        \"body status\"\n      `,\n    columnGap: '0',\n    gridGap: '0',\n    ...shorthands.padding('0'),\n    marginTop: '0',\n    marginRight: '0',\n    marginBottom: '0',\n    marginLeft: '50px',\n    width: `calc(100% - 50px)`\n  },\n  bodyCommon: {\n    ...shorthands.padding('0'),\n    marginRight: '0',\n    marginBottom: '0',\n    backgroundColor: 'transparent',\n    maxWidth: '100%',\n    minWidth: `${CHAT_MESSAGE_CONTAINER_MIN_WIDTH_REM}rem`\n  },\n  bodyMyMessage: {\n    width: '100%',\n    marginTop: '0'\n  },\n  bodyWithoutAvatar: {\n    marginLeft: `${AVATAR_MARGIN_LEFT}rem`,\n    marginTop: '0'\n  },\n  bodyWithAvatar: {\n    marginLeft: `0`,\n    marginTop: '0.75rem'\n  },\n  avatarNoOverlap: {\n    width: `calc(100% - ${AVATAR_WIDTH_REM + MESSAGE_AMOUNT_OUT_FROM_EDGE_REM + AVATAR_MESSAGE_GAP_REM}rem)`\n  },\n  avatarOverlap: {\n    width: `calc(100% - ${AVATAR_WIDTH_REM + MESSAGE_AMOUNT_OUT_FROM_EDGE_REM - MESSAGE_AVATAR_OVERLAP_REM}rem)`\n  }\n});\n\n/**\n * @private\n */\nexport const useChatMyMessageStyles = makeStyles({\n  root: {\n    gridTemplateColumns: 'auto auto',\n    gridTemplateAreas: `\n        \". actions\"\n        \"body body\"\n      `,\n    gridGap: '0',\n    columnGap: '0',\n    paddingTop: '0',\n    marginLeft: '0',\n    '&:focus-visible': {\n      ...shorthands.outline('0')\n    }\n  },\n  body: {\n    paddingBottom: '10px',\n    marginTop: '1rem',\n    maxWidth: '100%',\n    minWidth: `${CHAT_MESSAGE_CONTAINER_MIN_WIDTH_REM}rem`,\n    marginLeft: '0rem',\n    // This makes message bubble show border in high contrast mode making each message distinguishable\n    ...shorthands.border('1px', 'solid', 'transparent'),\n    '&:hover ~ .fui-ChatMyMessage__actions': {\n      visibility: 'visible'\n    },\n    '&:focus ~ .fui-ChatMyMessage__actions': {\n      visibility: 'visible'\n    },\n    '& msft-mention': {\n      color: tokens.colorStatusWarningBackground3,\n      fontWeight: 600\n    }\n  },\n  bodyAttached: {\n    marginTop: '0.125rem'\n  },\n  menu: {\n    boxShadow: tokens.shadow4,\n    backgroundColor: tokens.colorNeutralBackground1,\n    marginRight: '1px',\n    position: 'absolute',\n    top: '-2px',\n    right: '0',\n    ...shorthands.borderRadius(tokens.borderRadiusMedium),\n    zIndex: 1,\n    lineHeight: tokens.lineHeightBase100,\n    visibility: 'hidden',\n    '&:hover, &:focus': {\n      cursor: 'pointer',\n      visibility: 'visible'\n    }\n  },\n  menuAttached: {\n    top: '-18px'\n  },\n  menuHidden: {\n    visibility: 'hidden'\n  },\n  menuVisible: {\n    visibility: 'visible'\n  }\n});\n\n/**\n * @private\n */\nexport const newMessageButtonContainerStyle = mergeStyles({\n  position: 'absolute',\n  zIndex: NEW_MESSAGE_BUTTON_ZINDEX,\n  bottom: 0,\n  right: '1.5rem'\n});\n\n/**\n * @private\n */\nexport const chatMessageDateStyle: CSSProperties = {\n  fontWeight: 600\n};\n\n/**\n * @private\n */\nexport const useChatMessageStyles = makeStyles({\n  root: {\n    paddingTop: '0',\n    '&:focus-visible': {\n      ...shorthands.outline('0')\n    }\n  },\n  body: {\n    maxWidth: '100%',\n    minWidth: `${CHAT_MESSAGE_CONTAINER_MIN_WIDTH_REM}rem`,\n    marginRight: '0rem',\n    paddingBottom: '10px',\n    zIndex: CHAT_MESSAGE_ZINDEX,\n    // This makes message bubble show border in high contrast mode making each message distinguishable\n    ...shorthands.border('1px', 'solid', 'transparent'),\n    '& > div:first-of-type': {\n      flexWrap: 'wrap'\n    },\n    '& msft-mention': {\n      color: tokens.colorStatusWarningBackground3,\n      fontWeight: tokens.fontWeightSemibold\n    },\n    '& img': {\n      maxWidth: '100% !important',\n      // Add !important to make sure it won't be overridden by style defined in element\n      height: 'auto !important'\n    },\n    '& video': {\n      maxWidth: '100% !important',\n      // Add !important to make sure it won't be overridden by style defined in element\n      height: 'auto !important'\n    },\n    '& p': {\n      // Deal with awkward padding seen in messages from Teams.\n      // For more info see https://github.com/Azure/communication-ui-library/pull/1507\n      ...shorthands.marginBlock('0.125rem')\n    },\n    '& blockquote': {\n      backgroundColor: tokens.colorBrandBackgroundInverted,\n      clear: 'left',\n      minHeight: '2.25rem',\n      width: 'fit-content',\n      marginTop: '7px',\n      marginRight: '0px',\n      marginLeft: '0px',\n      marginBottom: '7px',\n      paddingTop: '7px',\n      paddingRight: '15px',\n      paddingLeft: '15px',\n      paddingBottom: '7px',\n      ...shorthands.border('solid'),\n      ...shorthands.borderRadius('4px'),\n      ...shorthands.borderWidth('1px'),\n      ...shorthands.borderColor(tokens.colorNeutralStroke1Selected),\n      borderLeftWidth: '4px'\n    },\n    '& table': {\n      backgroundColor: tokens.colorBrandBackgroundInverted,\n      ...shorthands.borderColor(tokens.colorNeutralStroke1Selected),\n      borderCollapse: 'collapse',\n      tableLayout: 'auto',\n      width: '100%',\n      '& tr': {\n        ...shorthands.border('1px', 'solid', `${tokens.colorNeutralStroke1Selected}`),\n        '& td': {\n          ...shorthands.border('1px', 'solid', `${tokens.colorNeutralStroke1Selected}`),\n          wordBreak: 'normal',\n          paddingTop: '0px',\n          paddingRight: '5px'\n        }\n      }\n    }\n  },\n  bodyWithPlaceholderImage: {\n    '& img[src=\"\"]': {\n      display: 'block',\n      position: 'relative',\n      marginBottom: '5px'\n    },\n    '& img[src=\"\"]:after': {\n      backgroundColor: tokens.colorNeutralBackground1Selected,\n      content: `url(\"data:image/gif;base64,R0lGODlhAQABAAAAACw=\")`,\n      backgroundSize: 'center',\n      position: 'absolute',\n      width: '100%',\n      height: '100%',\n      top: '0',\n      left: '0',\n      display: 'block'\n    }\n  },\n  bodyWithoutAvatar: {\n    marginTop: '0.125rem'\n  },\n  bodyWithAvatar: {\n    marginTop: `0.375rem`\n  },\n  avatarNoOverlap: {\n    marginLeft: `${-AVATAR_MARGIN_LEFT + AVATAR_MESSAGE_GAP_REM}rem`\n  },\n  avatarOverlap: {\n    marginLeft: `${-AVATAR_MARGIN_LEFT - MESSAGE_AVATAR_OVERLAP_REM}rem`\n  }\n});\n\n/**\n * @private\n */\nexport const useChatMessageCommonStyles = makeStyles({\n  failed: {\n    //TODO: can we reuse a theme color here?\n    backgroundColor: 'rgba(168, 0, 0, 0.2)'\n  },\n  blocked: {\n    maxWidth: '100%',\n    minWidth: `${CHAT_MESSAGE_CONTAINER_MIN_WIDTH_REM}rem`,\n    marginRight: '0rem',\n    color: tokens.colorNeutralForeground2,\n    // This makes message bubble show border in high contrast mode making each message distinguishable\n    ...shorthands.border('1px', 'solid', 'transparent'),\n    '& i': {\n      paddingTop: '0.25rem'\n    },\n    '& p': {\n      // Deal with awkward padding seen in messages from Teams.\n      // For more info see https://github.com/Azure/communication-ui-library/pull/1507\n      ...shorthands.marginBlock('0.125rem'),\n      paddingRight: '0.75rem',\n      fontStyle: 'italic'\n    },\n    '& a': {\n      ...shorthands.marginBlock('0.125rem'),\n      fontStyle: 'normal',\n      color: tokens.colorBrandForegroundLink,\n      ...shorthands.textDecoration('none')\n    }\n  }\n});\n\n/**\n * @private\n */\nexport const gutterWithAvatar: ComponentSlotStyle = {\n  paddingTop: '1.65rem',\n  width: `${AVATAR_WIDTH_REM}rem`,\n  position: 'relative',\n  float: 'left',\n  display: 'block',\n  visibility: 'visible',\n  zIndex: AVATAR_ZINDEX\n};\n\n/**\n * @private\n */\nexport const gutterWithHiddenAvatar: ComponentSlotStyle = {\n  ...gutterWithAvatar,\n  visibility: 'hidden',\n  // we use this hidden avatar just as a width placeholder\n  // the placeholder is needed for responsive bubble width\n  height: 0\n};\n\n/**\n * @private\n */\nexport const newMessageButtonStyle = mergeStyles({\n  float: 'right',\n  width: 'fit-content'\n});\n\n/**\n * @private\n */\nexport const buttonWithIconStyles: IButtonStyles = {\n  textContainer: {\n    display: 'contents'\n  }\n};\n\n/**\n * @private\n */\nexport const loadPreviousMessageButtonStyle = mergeStyles({\n  border: 'none',\n  minHeight: '1.5rem',\n  '&:hover': {\n    background: 'none'\n  },\n  '&:active': {\n    background: 'none'\n  }\n});\n\n/**\n * @private\n */\nexport const DownIconStyle = mergeStyles({\n  marginRight: '0.5em'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @private\n */\nexport const delay = (delay: number): Promise<void> => {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, delay);\n  });\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { RefObject, useEffect, useState, useRef } from 'react';\nimport { _convertRemToPx as convertRemToPx } from '@internal/acs-ui-common';\n\n/**\n * A utility hook for providing the width of a parent element.\n * Returns updated width if parent/window resizes.\n * @param containerRef - Ref of a parent element whose width will be returned.\n * @internal\n */\nexport const _useContainerWidth = (containerRef: RefObject<HTMLElement>): number | undefined => {\n  const [width, setWidth] = useState<number | undefined>(undefined);\n  const observer = useRef(new ResizeObserver(entries => {\n    const {\n      width\n    } = entries[0].contentRect;\n    setWidth(width);\n  }));\n  useEffect(() => {\n    if (containerRef.current) {\n      observer.current.observe(containerRef.current);\n    }\n    const currentObserver = observer.current;\n    return () => {\n      currentObserver.disconnect();\n    };\n  }, [containerRef, observer]);\n  return width;\n};\n\n/**\n * A utility hook for providing the height of a parent element.\n * Returns updated height if parent/window resizes.\n * @param containerRef - Ref of a parent element whose height will be returned.\n * @internal\n */\nexport const _useContainerHeight = (containerRef: RefObject<HTMLElement>): number | undefined => {\n  const [height, setHeight] = useState<number | undefined>(undefined);\n  const observer = useRef(new ResizeObserver(entries => {\n    const {\n      height\n    } = entries[0].contentRect;\n    setHeight(height);\n  }));\n  useEffect(() => {\n    if (containerRef.current) {\n      observer.current.observe(containerRef.current);\n    }\n    const currentObserver = observer.current;\n    return () => {\n      currentObserver.disconnect();\n    };\n  }, [containerRef, observer]);\n  return height;\n};\nconst NARROW_WIDTH_REM = 30;\nconst SHORT_HEIGHT_REM = 23.75;\n\n/**\n * Utility function to determine if container width is narrow\n * @param containerWidthRem  container width in rem\n * @returns boolean\n */\nexport const isNarrowWidth = (containerWidthRem: number): boolean => containerWidthRem <= convertRemToPx(NARROW_WIDTH_REM);\n\n/**\n * Utility function to determine if container width is short\n * @param containerWidthRem  container height in rem\n * @returns boolean\n */\nexport const isShortHeight = (containerHeightRem: number): boolean => containerHeightRem <= convertRemToPx(SHORT_HEIGHT_REM);","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatMessage, ReadReceiptsBySenderId } from '../..';\n/**\n * @private\n *logic: Looking at message A, how do we know it's read number?\n * Assumption: if user read the latest message, user has read all messages before that\n * ReadReceipt behaviour: read receipt is only sent to the last message\n *\n * If participant read a message that is sent later than message A, then the participant has read message A\n * How do we check if the message is sent later than message A?\n * We compare if the messageID of the last read message is larger than or equal to the message A's id\n * Because messageID is the creation timestamp of each message\n * Timestamps are in epoch time so lecixographical ordering is the same as time ordering.\n *\n * if MessageId of B is larger than message Id of A, then B is created after A\n * if the last read message is created after the message A is sent, then user should have read message A as well */\nexport default ((message: ChatMessage, readReceiptsBySenderId: ReadReceiptsBySenderId): {\n  id: string;\n  displayName: string;\n}[] => {\n  return Object.entries(readReceiptsBySenderId)\n  // Filter to only read receipts that match the message OR the participant has read a different message after this message has been created\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  .filter(([_, readReceipt]) => readReceipt.lastReadMessage >= message.messageId)\n  // make sure the person is not removed from chat\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  .filter(([_, readReceipt]) => readReceipt.displayName && readReceipt.displayName !== '')\n  // Map properties to useful array\n  .map(([id, readReceipt]) => ({\n    id,\n    displayName: readReceipt.displayName\n  }));\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n// These color records are required for createV9Theme\n// For more info, check https://react.fluentui.dev/iframe.html?viewMode=docs&id=concepts-migration-from-v8-components-theme-migration--page#compatible-themes\n\n/**\n * @private\n */\nexport const grey: Record<Greys, string> = {\n  '0': '#000000',\n  '2': '#050505',\n  '4': '#0a0a0a',\n  '6': '#0f0f0f',\n  '8': '#141414',\n  '10': '#1a1a1a',\n  '12': '#1f1f1f',\n  '14': '#242424',\n  '16': '#292929',\n  '18': '#2e2e2e',\n  '20': '#333333',\n  '22': '#383838',\n  '24': '#3d3d3d',\n  '26': '#424242',\n  '28': '#474747',\n  '30': '#4d4d4d',\n  '32': '#525252',\n  '34': '#575757',\n  '36': '#5c5c5c',\n  '38': '#616161',\n  '40': '#666666',\n  '42': '#6b6b6b',\n  '44': '#707070',\n  '46': '#757575',\n  '48': '#7a7a7a',\n  '50': '#808080',\n  '52': '#858585',\n  '54': '#8a8a8a',\n  '56': '#8f8f8f',\n  '58': '#949494',\n  '60': '#999999',\n  '62': '#9e9e9e',\n  '64': '#a3a3a3',\n  '66': '#a8a8a8',\n  '68': '#adadad',\n  '70': '#b3b3b3',\n  '72': '#b8b8b8',\n  '74': '#bdbdbd',\n  '76': '#c2c2c2',\n  '78': '#c7c7c7',\n  '80': '#cccccc',\n  '82': '#d1d1d1',\n  '84': '#d6d6d6',\n  '86': '#dbdbdb',\n  '88': '#e0e0e0',\n  '90': '#e6e6e6',\n  '92': '#ebebeb',\n  '94': '#f0f0f0',\n  '96': '#f5f5f5',\n  '98': '#fafafa',\n  '100': '#ffffff'\n};\n\n/**\n * @private\n */\nexport const whiteAlpha: Record<AlphaColors, string> = {\n  '5': 'rgba(255, 255, 255, 0.05)',\n  '10': 'rgba(255, 255, 255, 0.1)',\n  '20': 'rgba(255, 255, 255, 0.2)',\n  '30': 'rgba(255, 255, 255, 0.3)',\n  '40': 'rgba(255, 255, 255, 0.4)',\n  '50': 'rgba(255, 255, 255, 0.5)',\n  '60': 'rgba(255, 255, 255, 0.6)',\n  '70': 'rgba(255, 255, 255, 0.7)',\n  '80': 'rgba(255, 255, 255, 0.8)',\n  '90': 'rgba(255, 255, 255, 0.9)'\n};\n\n/**\n * @private\n */\nexport const blackAlpha: Record<AlphaColors, string> = {\n  '5': 'rgba(0, 0, 0, 0.05)',\n  '10': 'rgba(0, 0, 0, 0.1)',\n  '20': 'rgba(0, 0, 0, 0.2)',\n  '30': 'rgba(0, 0, 0, 0.3)',\n  '40': 'rgba(0, 0, 0, 0.4)',\n  '50': 'rgba(0, 0, 0, 0.5)',\n  '60': 'rgba(0, 0, 0, 0.6)',\n  '70': 'rgba(0, 0, 0, 0.7)',\n  '80': 'rgba(0, 0, 0, 0.8)',\n  '90': 'rgba(0, 0, 0, 0.9)'\n};\n\n/**\n * @private\n */\nexport const grey10Alpha: Record<AlphaColors, string> = {\n  '5': 'rgba(26, 26, 26, 0.05)',\n  '10': 'rgba(26, 26, 26, 0.1)',\n  '20': 'rgba(26, 26, 26, 0.2)',\n  '30': 'rgba(26, 26, 26, 0.3)',\n  '40': 'rgba(26, 26, 26, 0.4)',\n  '50': 'rgba(26, 26, 26, 0.5)',\n  '60': 'rgba(26, 26, 26, 0.6)',\n  '70': 'rgba(26, 26, 26, 0.7)',\n  '80': 'rgba(26, 26, 26, 0.8)',\n  '90': 'rgba(26, 26, 26, 0.9)'\n};\n\n/**\n * @private\n */\nexport const grey12Alpha: Record<AlphaColors, string> = {\n  '5': 'rgba(31, 31, 31, 0.05)',\n  '10': 'rgba(31, 31, 31, 0.1)',\n  '20': 'rgba(31, 31, 31, 0.2)',\n  '30': 'rgba(31, 31, 31, 0.3)',\n  '40': 'rgba(31, 31, 31, 0.4)',\n  '50': 'rgba(31, 31, 31, 0.5)',\n  '60': 'rgba(31, 31, 31, 0.6)',\n  '70': 'rgba(31, 31, 31, 0.7)',\n  '80': 'rgba(31, 31, 31, 0.8)',\n  '90': 'rgba(31, 31, 31, 0.9)'\n};\n\n/**\n * @private\n */\nexport type Greys = 0 | 2 | 4 | 6 | 8 | 10 | 12 | 14 | 16 | 18 | 20 | 22 | 24 | 26 | 28 | 30 | 32 | 34 | 36 | 38 | 40 | 42 | 44 | 46 | 48 | 50 | 52 | 54 | 56 | 58 | 60 | 62 | 64 | 66 | 68 | 70 | 72 | 74 | 76 | 78 | 80 | 82 | 84 | 86 | 88 | 90 | 92 | 94 | 96 | 98 | 100;\n\n/**\n * @private\n */\nexport type AlphaColors = 5 | 10 | 20 | 30 | 40 | 50 | 60 | 70 | 80 | 90;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IEffects, IPalette, Theme as ThemeV8 } from '@fluentui/react';\nimport { BorderRadiusTokens, ColorTokens, ShadowTokens, Theme as ThemeV9, webLightTheme } from '@fluentui/react-components';\nimport { blackAlpha, whiteAlpha, grey, grey10Alpha, grey12Alpha } from './themeDuplicates';\n\n// These mappings are required for createV9Theme\n// For more info, check https://react.fluentui.dev/iframe.html?viewMode=docs&id=concepts-migration-from-v8-components-theme-migration--page#compatible-themes\n\n/**\n * Creates v9 color tokens from a v8 palette.\n */\nconst mapAliasColors = (palette: IPalette, inverted: boolean): ColorTokens => {\n  return {\n    colorNeutralForeground1: palette.neutralPrimary,\n    colorNeutralForeground1Hover: palette.neutralPrimary,\n    colorNeutralForeground1Pressed: palette.neutralPrimary,\n    colorNeutralForeground1Selected: palette.neutralPrimary,\n    colorNeutralForeground2: palette.neutralSecondary,\n    colorNeutralForeground2Hover: palette.neutralPrimary,\n    colorNeutralForeground2Pressed: palette.neutralPrimary,\n    colorNeutralForeground2Selected: palette.neutralPrimary,\n    colorNeutralForeground2BrandHover: palette.themePrimary,\n    colorNeutralForeground2BrandPressed: palette.themeDarkAlt,\n    colorNeutralForeground2BrandSelected: palette.themePrimary,\n    colorNeutralForeground3: palette.neutralTertiary,\n    colorNeutralForeground3Hover: palette.neutralSecondary,\n    colorNeutralForeground3Pressed: palette.neutralSecondary,\n    colorNeutralForeground3Selected: palette.neutralSecondary,\n    colorNeutralForeground3BrandHover: palette.themePrimary,\n    colorNeutralForeground3BrandPressed: palette.themeDarkAlt,\n    colorNeutralForeground3BrandSelected: palette.themePrimary,\n    colorNeutralForeground4: palette.neutralQuaternary,\n    colorNeutralForegroundDisabled: palette.neutralTertiaryAlt,\n    colorNeutralForegroundInvertedDisabled: whiteAlpha[40],\n    colorBrandForegroundLink: palette.themeDarkAlt,\n    colorBrandForegroundLinkHover: palette.themeDark,\n    colorBrandForegroundLinkPressed: palette.themeDarker,\n    colorBrandForegroundLinkSelected: palette.themeDarkAlt,\n    colorNeutralForeground2Link: palette.neutralSecondary,\n    colorNeutralForeground2LinkHover: palette.neutralPrimary,\n    colorNeutralForeground2LinkPressed: palette.neutralPrimary,\n    colorNeutralForeground2LinkSelected: palette.neutralPrimary,\n    colorCompoundBrandForeground1: palette.themePrimary,\n    colorCompoundBrandForeground1Hover: palette.themeDarkAlt,\n    colorCompoundBrandForeground1Pressed: palette.themeDark,\n    colorBrandForeground1: palette.themePrimary,\n    colorBrandForeground2: palette.themeDarkAlt,\n    colorBrandForeground2Hover: palette.themeDarkAlt,\n    colorBrandForeground2Pressed: palette.themeDarkAlt,\n    colorNeutralForeground1Static: palette.neutralPrimary,\n    colorNeutralForegroundInverted: palette.white,\n    colorNeutralForegroundInvertedHover: palette.white,\n    colorNeutralForegroundInvertedPressed: palette.white,\n    colorNeutralForegroundInvertedSelected: palette.white,\n    colorNeutralForegroundOnBrand: palette.white,\n    colorNeutralForegroundStaticInverted: palette.white,\n    colorNeutralForegroundInvertedLink: palette.white,\n    colorNeutralForegroundInvertedLinkHover: palette.white,\n    colorNeutralForegroundInvertedLinkPressed: palette.white,\n    colorNeutralForegroundInvertedLinkSelected: palette.white,\n    colorNeutralForegroundInverted2: palette.white,\n    colorBrandForegroundInverted: palette.themeSecondary,\n    colorBrandForegroundInvertedHover: palette.themeTertiary,\n    colorBrandForegroundInvertedPressed: palette.themeSecondary,\n    colorBrandForegroundOnLight: palette.themePrimary,\n    colorBrandForegroundOnLightHover: palette.themeDarkAlt,\n    colorBrandForegroundOnLightPressed: palette.themeDark,\n    colorBrandForegroundOnLightSelected: palette.themeDark,\n    colorNeutralBackground1: palette.white,\n    colorNeutralBackground1Hover: palette.neutralLighter,\n    colorNeutralBackground1Pressed: palette.neutralQuaternaryAlt,\n    colorNeutralBackground1Selected: palette.neutralLight,\n    colorNeutralBackground2: palette.neutralLighterAlt,\n    colorNeutralBackground2Hover: palette.neutralLighter,\n    colorNeutralBackground2Pressed: palette.neutralQuaternaryAlt,\n    colorNeutralBackground2Selected: palette.neutralLight,\n    colorNeutralBackground3: palette.neutralLighter,\n    colorNeutralBackground3Hover: palette.neutralLight,\n    colorNeutralBackground3Pressed: palette.neutralQuaternary,\n    colorNeutralBackground3Selected: palette.neutralQuaternaryAlt,\n    colorNeutralBackground4: palette.neutralLighter,\n    colorNeutralBackground4Hover: palette.neutralLighterAlt,\n    colorNeutralBackground4Pressed: palette.neutralLighter,\n    colorNeutralBackground4Selected: palette.white,\n    colorNeutralBackground5: palette.neutralLight,\n    colorNeutralBackground5Hover: palette.neutralLighter,\n    colorNeutralBackground5Pressed: palette.neutralLighter,\n    colorNeutralBackground5Selected: palette.neutralLighterAlt,\n    colorNeutralBackground6: palette.neutralLight,\n    colorNeutralBackgroundStatic: grey[20],\n    colorNeutralBackgroundInverted: palette.neutralSecondary,\n    colorNeutralBackgroundAlpha: inverted ? grey10Alpha[50] : whiteAlpha[50],\n    colorNeutralBackgroundAlpha2: inverted ? grey12Alpha[70] : whiteAlpha[80],\n    colorSubtleBackground: 'transparent',\n    colorSubtleBackgroundHover: palette.neutralLighter,\n    colorSubtleBackgroundPressed: palette.neutralQuaternaryAlt,\n    colorSubtleBackgroundSelected: palette.neutralLight,\n    colorSubtleBackgroundLightAlphaHover: inverted ? whiteAlpha[10] : whiteAlpha[80],\n    colorSubtleBackgroundLightAlphaPressed: inverted ? whiteAlpha[5] : whiteAlpha[50],\n    colorSubtleBackgroundLightAlphaSelected: 'transparent',\n    colorSubtleBackgroundInverted: 'transparent',\n    colorSubtleBackgroundInvertedHover: blackAlpha[10],\n    colorSubtleBackgroundInvertedPressed: blackAlpha[30],\n    colorSubtleBackgroundInvertedSelected: blackAlpha[20],\n    colorTransparentBackground: 'transparent',\n    colorTransparentBackgroundHover: 'transparent',\n    colorTransparentBackgroundPressed: 'transparent',\n    colorTransparentBackgroundSelected: 'transparent',\n    colorNeutralBackgroundDisabled: palette.neutralLighter,\n    colorNeutralBackgroundInvertedDisabled: whiteAlpha[10],\n    colorNeutralStencil1: palette.neutralLight,\n    colorNeutralStencil2: palette.neutralLighterAlt,\n    colorNeutralStencil1Alpha: inverted ? whiteAlpha[10] : blackAlpha[10],\n    colorNeutralStencil2Alpha: inverted ? whiteAlpha[5] : blackAlpha[5],\n    colorBackgroundOverlay: blackAlpha[40],\n    colorScrollbarOverlay: blackAlpha[50],\n    colorBrandBackground: palette.themePrimary,\n    colorBrandBackgroundHover: palette.themeDarkAlt,\n    colorBrandBackgroundPressed: palette.themeDarker,\n    colorBrandBackgroundSelected: palette.themeDark,\n    colorCompoundBrandBackground: palette.themePrimary,\n    colorCompoundBrandBackgroundHover: palette.themeDarkAlt,\n    colorCompoundBrandBackgroundPressed: palette.themeDark,\n    colorBrandBackgroundStatic: palette.themePrimary,\n    colorBrandBackground2: palette.themeLighterAlt,\n    colorBrandBackground2Hover: palette.themeLighterAlt,\n    colorBrandBackground2Pressed: palette.themeLighterAlt,\n    colorBrandBackground3Static: palette.themeDark,\n    colorBrandBackground4Static: palette.themeDarker,\n    colorBrandBackgroundInverted: palette.white,\n    colorBrandBackgroundInvertedHover: palette.themeLighterAlt,\n    colorBrandBackgroundInvertedPressed: palette.themeLight,\n    colorBrandBackgroundInvertedSelected: palette.themeLighter,\n    colorNeutralCardBackground: inverted ? grey[20] : grey[98],\n    colorNeutralCardBackgroundHover: inverted ? grey[24] : palette.white,\n    colorNeutralCardBackgroundPressed: inverted ? grey[18] : grey[96],\n    colorNeutralCardBackgroundSelected: inverted ? grey[22] : grey[92],\n    colorNeutralCardBackgroundDisabled: inverted ? grey[8] : grey[94],\n    colorNeutralStrokeAccessible: palette.neutralSecondary,\n    colorNeutralStrokeAccessibleHover: palette.neutralSecondary,\n    colorNeutralStrokeAccessiblePressed: palette.neutralSecondary,\n    colorNeutralStrokeAccessibleSelected: palette.themePrimary,\n    colorNeutralStroke1: palette.neutralQuaternary,\n    colorNeutralStroke1Hover: palette.neutralTertiaryAlt,\n    colorNeutralStroke1Pressed: palette.neutralTertiaryAlt,\n    colorNeutralStroke1Selected: palette.neutralTertiaryAlt,\n    colorNeutralStroke2: palette.neutralQuaternaryAlt,\n    colorNeutralStroke3: palette.neutralLighter,\n    colorNeutralStrokeSubtle: palette.neutralQuaternaryAlt,\n    colorNeutralStrokeOnBrand: palette.white,\n    colorNeutralStrokeOnBrand2: palette.white,\n    colorNeutralStrokeOnBrand2Hover: palette.white,\n    colorNeutralStrokeOnBrand2Pressed: palette.white,\n    colorNeutralStrokeOnBrand2Selected: palette.white,\n    colorBrandStroke1: palette.themePrimary,\n    colorBrandStroke2: palette.themeLight,\n    colorBrandStroke2Hover: palette.themeLight,\n    colorBrandStroke2Pressed: palette.themeLight,\n    colorBrandStroke2Contrast: palette.themeLight,\n    colorCompoundBrandStroke: palette.themePrimary,\n    colorCompoundBrandStrokeHover: palette.themeDarkAlt,\n    colorCompoundBrandStrokePressed: palette.themeDark,\n    colorNeutralStrokeDisabled: palette.neutralQuaternaryAlt,\n    colorNeutralStrokeInvertedDisabled: whiteAlpha[40],\n    colorTransparentStroke: 'transparent',\n    colorTransparentStrokeInteractive: 'transparent',\n    colorTransparentStrokeDisabled: 'transparent',\n    colorNeutralStrokeAlpha: inverted ? whiteAlpha[10] : blackAlpha[5],\n    colorNeutralStrokeAlpha2: whiteAlpha[20],\n    colorStrokeFocus1: palette.white,\n    colorStrokeFocus2: palette.black,\n    colorNeutralShadowAmbient: 'rgba(0,0,0,0.12)',\n    colorNeutralShadowKey: 'rgba(0,0,0,0.14)',\n    colorNeutralShadowAmbientLighter: 'rgba(0,0,0,0.06)',\n    colorNeutralShadowKeyLighter: 'rgba(0,0,0,0.07)',\n    colorNeutralShadowAmbientDarker: 'rgba(0,0,0,0.20)',\n    colorNeutralShadowKeyDarker: 'rgba(0,0,0,0.24)',\n    colorBrandShadowAmbient: 'rgba(0,0,0,0.30)',\n    colorBrandShadowKey: 'rgba(0,0,0,0.25)'\n  };\n};\n\n/**\n * Creates v9 shadow tokens from v8 effects.\n */\nconst mapShadowTokens = (effects: IEffects): Partial<ShadowTokens> => {\n  return {\n    shadow4: effects.elevation4,\n    shadow8: effects.elevation8,\n    shadow16: effects.elevation16,\n    shadow64: effects.elevation64\n  };\n};\n\n/**\n * Creates v9 border radius tokens from v8 effects\n */\nconst mapBorderRadiusTokens = (effects: IEffects): Partial<BorderRadiusTokens> => {\n  return {\n    borderRadiusSmall: effects.roundedCorner2,\n    borderRadiusMedium: effects.roundedCorner4,\n    borderRadiusLarge: effects.roundedCorner6\n  };\n};\n\n/**\n * Creates a v9 theme from a v8 theme and base v9 theme.\n * FluentUI webLightTheme is used in case if no baseThemeV9 is provided.\n *\n * @private\n */\nexport const createV9Theme = (themeV8: ThemeV8, baseThemeV9?: ThemeV9): ThemeV9 & {\n  errorText: string;\n} => {\n  const baseTheme = baseThemeV9 ?? webLightTheme;\n  return {\n    ...baseTheme,\n    ...mapAliasColors(themeV8.palette, themeV8.isInverted),\n    ...mapShadowTokens(themeV8.effects),\n    ...mapBorderRadiusTokens(themeV8.effects),\n    colorBrandBackground2: themeV8.palette.themeLight,\n    // updated from palette.themeLighterAlt\n    colorBrandBackground2Hover: themeV8.palette.themeLight,\n    // updated from palette.themeLighterAlt\n    colorBrandBackground2Pressed: themeV8.palette.themeLight,\n    // updated from palette.themeLighterAlt\n    colorStatusWarningBackground3: '#D83B01',\n    errorText: themeV8.semanticColors.errorText,\n    colorNeutralStroke1Selected: themeV8.palette.neutralQuaternary,\n    colorNeutralForeground2: themeV8.palette.neutralSecondary,\n    colorBrandForegroundLink: themeV8.palette.themePrimary,\n    colorBrandForegroundLinkHover: themeV8.palette.themeDarker,\n    colorNeutralBackground1Selected: themeV8.palette.neutralQuaternaryAlt,\n    // Fix for an issue with black borders for iOS that are added with 'after' selector\n    colorStrokeFocus2: 'transparent'\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { makeStyles, shorthands, FluentProvider, FluentProviderProps } from '@fluentui/react-components';\nimport { Theme as ThemeV8 } from '@fluentui/react';\nimport { createV9Theme } from './v9ThemeShim';\nimport { TextDirectionProvider } from '@griffel/react';\n\n/**\n * Props for {@link FluentThemeProvider}.\n *\n * @private\n */\nexport interface FluentV9ThemeProviderProps {\n  /** Children to be themed. */\n  children: React.ReactNode;\n  /** FluentUI v8 theme to be mapped to FluentUI v9 theme */\n  v8Theme: ThemeV8;\n}\n\n/**\n * @private\n */\nexport const useFluentV9Wrapper = makeStyles({\n  body: {\n    height: '100%',\n    ...shorthands.margin(0),\n    ...shorthands.overflow('hidden'),\n    ...shorthands.padding(0),\n    width: '100%'\n  }\n});\n\n/**\n * @private\n */\nexport const FluentV9ThemeProvider = (props: FluentV9ThemeProviderProps): JSX.Element => {\n  const {\n    v8Theme,\n    children\n  } = props;\n  const v9Theme = createV9Theme(v8Theme);\n  const dir = v8Theme.rtl ? 'rtl' : 'ltr';\n  return (\n    // TextDirectionProvider is needed to fix issue with direction value update in FluentProvider\n    <TextDirectionProvider dir={dir}>\n      {/* Wrapper is required to call \"useClasses\" hook with proper context values */}\n      <FluentProviderWithStylesOverrides theme={v9Theme} dir={dir}>\n        {children}\n      </FluentProviderWithStylesOverrides>\n    </TextDirectionProvider>\n  );\n};\nconst FluentProviderWithStylesOverrides: React.FC<FluentProviderProps> = props => {\n  const classes = useFluentV9Wrapper();\n  return <FluentProvider {...props} className={classes.body} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/// Adapted from: https://github.com/AlmeroSteyn/react-aria-live/blob/master/src/modules/MessageBlock.js\n\nimport React from 'react';\nconst offScreenStyle: React.CSSProperties = {\n  border: 0,\n  clip: 'rect(0 0 0 0)',\n  height: '1px',\n  margin: '-1px',\n  overflow: 'hidden',\n  whiteSpace: 'nowrap',\n  padding: 0,\n  width: '1px',\n  position: 'absolute'\n};\n\n/** @private */\nconst MessageBlock = (props: {\n  message: string;\n  ariaLive: 'assertive' | 'polite' | 'off' | undefined;\n}): JSX.Element => <div style={offScreenStyle} role=\"log\" aria-live={props.ariaLive}>\n    {props.message ? props.message : ''}\n  </div>;\nexport default MessageBlock;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/// Adapted from: https://github.com/AlmeroSteyn/react-aria-live/blob/master/src/modules/Announcer.js\n\nimport React, { useEffect } from 'react';\nimport MessageBlock from './MessageBlock';\n\n/** @private */\nexport type AnnouncerMessageBag = {\n  message: string;\n  id: string;\n};\n\n/** @private */\nexport type AnnouncerProps = {\n  polite?: AnnouncerMessageBag;\n  assertive?: AnnouncerMessageBag;\n};\n\n/** @private */\nexport const EMPTY_MESSAGE = {\n  message: '',\n  id: ''\n};\n\n/** @private */\nconst Announcer = (props: AnnouncerProps): JSX.Element => {\n  const newAssertive = props.assertive ?? EMPTY_MESSAGE;\n  const oldAssertive = React.useRef<AnnouncerMessageBag>(EMPTY_MESSAGE);\n  const [activeAssertive1, setActiveAssertive1] = React.useState<AnnouncerMessageBag>(EMPTY_MESSAGE);\n  const [activeAssertive2, setActiveAssertive2] = React.useState<AnnouncerMessageBag>(EMPTY_MESSAGE);\n  const alternateAssertive = React.useRef(false);\n  useEffect(() => {\n    if (oldAssertive.current.message !== newAssertive?.message || oldAssertive.current.id !== newAssertive?.id) {\n      setActiveAssertive1(alternateAssertive.current ? EMPTY_MESSAGE : newAssertive);\n      setActiveAssertive2(alternateAssertive.current ? newAssertive : EMPTY_MESSAGE);\n      oldAssertive.current = newAssertive;\n      alternateAssertive.current = !alternateAssertive.current;\n    }\n  }, [newAssertive]);\n  const newPolite = props.polite ?? EMPTY_MESSAGE;\n  const oldPolite = React.useRef<AnnouncerMessageBag>(EMPTY_MESSAGE);\n  const [activePolite1, setActivePolite1] = React.useState<AnnouncerMessageBag>(EMPTY_MESSAGE);\n  const [activePolite2, setActivePolite2] = React.useState<AnnouncerMessageBag>(EMPTY_MESSAGE);\n  const alternatePolite = React.useRef(false);\n  useEffect(() => {\n    if (oldPolite.current.message !== newPolite?.message || oldPolite.current.id !== newPolite?.id) {\n      setActivePolite1(alternatePolite.current ? EMPTY_MESSAGE : newPolite);\n      setActivePolite2(alternatePolite.current ? newPolite : EMPTY_MESSAGE);\n      oldPolite.current = newPolite;\n      alternatePolite.current = !alternatePolite.current;\n    }\n  }, [newPolite]);\n  return <div>\n      <MessageBlock ariaLive=\"assertive\" message={activeAssertive1.message} />\n      <MessageBlock ariaLive=\"assertive\" message={activeAssertive2.message} />\n      <MessageBlock ariaLive=\"polite\" message={activePolite1.message} />\n      <MessageBlock ariaLive=\"polite\" message={activePolite2.message} />\n    </div>;\n};\nexport default Announcer;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/// Adapted from: https://github.com/AlmeroSteyn/react-aria-live/blob/master/src/modules/LiveAnnouncer.js\n\nimport React, { useCallback, useMemo } from 'react';\nimport Announcer, { AnnouncerMessageBag, EMPTY_MESSAGE } from './Announcer';\nimport AnnouncerContext from './AnnouncerContext';\n\n/** @private */\nconst LiveAnnouncer = (props: {\n  children: React.ReactChild;\n}): JSX.Element => {\n  const [politeMessage, setPoliteMessage] = React.useState<AnnouncerMessageBag>(EMPTY_MESSAGE);\n  const [assertiveMessage, setAssertiveMessage] = React.useState<AnnouncerMessageBag>(EMPTY_MESSAGE);\n  const announcePolite = useCallback((message: string, id: string) => {\n    setPoliteMessage({\n      message,\n      id\n    });\n  }, []);\n  const announceAssertive = useCallback((message: string, id: string) => {\n    setAssertiveMessage({\n      message,\n      id\n    });\n  }, []);\n  const updateFunctions = useMemo(() => ({\n    announcePolite,\n    announceAssertive\n  }), [announceAssertive, announcePolite]);\n  return <AnnouncerContext.Provider value={updateFunctions}>\n      {props.children}\n      <Announcer assertive={assertiveMessage} polite={politeMessage} />\n    </AnnouncerContext.Provider>;\n};\nexport default LiveAnnouncer;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IRawStyle } from '@fluentui/react';\nimport { ComponentSlotStyle } from '../../types';\n\n/**\n * Function to create a React.CSSProperties object from a v8 style object.\n * This function is still not ideal\n * as v8Style can use pseudo-class selectors that style objects can't process correctly.\n *\n * @private\n */\nexport function createStyleFromV8Style(v8Style: IRawStyle | ComponentSlotStyle | undefined): React.CSSProperties | undefined {\n  const result: {\n    [key: string]: React.CSSProperties | undefined;\n  } = {};\n  if (v8Style === undefined || v8Style === null || typeof v8Style === 'boolean' || typeof v8Style === 'string') {\n    return undefined;\n  } else if (typeof v8Style === 'object') {\n    // v8Style is a style object\n    for (const record in v8Style) {\n      if (typeof v8Style[record] === 'string') {\n        // v8Style[record] is just a simple style\n        const msSuffix = 'MS';\n        if (record.startsWith(msSuffix)) {\n          // React.CSSProperties uses camelCase for MS properties but v8Style uses PascalCase\n          const newRecord = record.substring(0, msSuffix.length).toLowerCase + record.substring(msSuffix.length);\n          result[newRecord] = v8Style[record];\n        } else {\n          result[record] = v8Style[record];\n        }\n      } else {\n        result[record] = createStyleFromV8Style(v8Style[record]);\n      }\n    }\n  }\n  return result;\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, mergeStyles } from '@fluentui/react';\nimport { editorTextBoxButtonStyle } from './SendBox.styles';\n\n/**\n * @private\n */\nexport const editBoxStyle = mergeStyles({\n  marginTop: '0.0875rem',\n  marginBottom: '0.0875rem'\n});\n\n/**\n * @private\n */\nexport const editingButtonStyle = mergeStyles({\n  margin: '0',\n  width: '2.125rem',\n  height: '2.125rem',\n  padding: '0.375rem 0 0 0'\n});\n\n/**\n * @private\n */\nexport const inputBoxIcon = mergeStyles({\n  margin: 'auto',\n  '&:hover svg': {\n    stroke: 'currentColor'\n  }\n});\n/**\n * @private\n */\nexport const richTextEditBoxActionButtonIcon = mergeStyles(editorTextBoxButtonStyle, {\n  '&:hover svg': {\n    stroke: 'currentColor'\n  }\n});\n\n/**\n * @private\n */\nexport const editBoxWidthStyles: IStyle = {\n  minWidth: '6.25rem',\n  maxWidth: '100%'\n};\n\n/**\n * @private\n */\nexport const editBoxStyleSet = {\n  root: editBoxWidthStyles\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles, IStyle, FontWeights, Theme, IContextualMenuItemStyles, ITheme, IIconStyles } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\nimport { makeStyles, shorthands, tokens } from '@fluentui/react-components';\nimport { defaultSendBoxInactiveBorderThicknessREM, defaultSendBoxActiveBorderThicknessREM } from '../styles/SendBox.styles';\nconst MINIMUM_TOUCH_TARGET_HEIGHT_REM = 3;\nconst errorTextColor = 'var(--errorText)';\n\n/**\n * @private\n */\nexport const chatActionsCSS: IStyle = {\n  'ul&': {\n    right: '0',\n    left: 'auto',\n    top: '-1.2rem',\n    bottom: 'auto',\n    position: 'absolute'\n  },\n  '& a': {\n    margin: '0',\n    padding: '0',\n    border: '0'\n  }\n};\n\n/**\n * @private\n */\nexport const iconWrapperStyle = (theme: ITheme, isSubMenuOpen: boolean): IIconStyles => ({\n  root: {\n    margin: _pxToRem(3),\n    // Show hover styles when the Edit/Delete menu is showing as this action button is still considered 'active'\n    color: isSubMenuOpen ? theme.palette.black : theme.palette.neutralPrimary,\n    strokeWidth: isSubMenuOpen ? _pxToRem(0.5) : _pxToRem(0),\n    stroke: theme.palette.black,\n    ':hover, :focus': {\n      color: theme.palette.black,\n      strokeWidth: _pxToRem(0.5)\n    }\n  }\n});\n\n/**\n * @private\n */\nexport const chatMessageDateStyle = mergeStyles({\n  color: tokens.colorNeutralForeground2,\n  fontWeight: FontWeights.regular,\n  fontSize: '0.75rem'\n});\n\n/**\n * @private\n */\nexport const chatMessageAuthorStyle = mergeStyles({\n  fontWeight: FontWeights.semibold,\n  fontSize: '0.75rem'\n});\n\n/**\n * @private\n */\nexport const chatMessageEditedTagStyle = (theme: Theme): string => mergeStyles({\n  fontWeight: FontWeights.semibold,\n  color: theme.palette.neutralSecondary\n});\n\n/**\n * @private\n */\nexport const chatMessageFailedTagStyle = (theme: Theme): string => mergeStyles({\n  fontWeight: FontWeights.regular,\n  color: theme.semanticColors.errorText,\n  fontSize: theme.fonts.smallPlus.fontSize,\n  lineHeight: '1rem'\n});\n\n/**\n * @private\n */\nexport const editChatMessageFailedTagStyle = mergeStyles({\n  marginBottom: '0.5rem'\n});\n\n/**\n * @private\n */\nexport const chatMessageFailedTagStackItemStyle = mergeStyles({\n  alignSelf: 'end'\n});\n\n/**\n * @private\n */\nexport const editChatMessageButtonsStackStyle = mergeStyles({\n  padding: '0 0.5rem',\n  marginTop: '-0.25rem'\n});\n\n/**\n * @private\n */\nexport const chatMessageMenuStyle = mergeStyles({\n  minWidth: '8.5rem',\n  height: 'max-content',\n  cursor: 'pointer',\n  overflow: 'hidden'\n});\n\n/**\n * @private\n */\nexport const useChatMessageEditContainerStyles = makeStyles({\n  body: {\n    ...shorthands.padding(0),\n    backgroundColor: 'transparent',\n    boxSizing: 'border-box',\n    ...shorthands.border(`${defaultSendBoxInactiveBorderThicknessREM}rem`, 'solid'),\n    ...shorthands.borderRadius(tokens.borderRadiusMedium),\n    // The border thickness changes on hover, to prevent the border thickness change causing the\n    // input box to shift we apply a margin to compensate. This margin is then removed on hover when the border is thicker.\n    ...shorthands.margin('21px', '1px', '1px', '1px'),\n    // Width should be updated on hover to include the border width change\n    width: `calc(100% - ${defaultSendBoxActiveBorderThicknessREM}rem)`,\n    '&:hover, &:active, &:focus, &:focus-within': {\n      ...shorthands.borderWidth(`${defaultSendBoxActiveBorderThicknessREM}rem`),\n      ...shorthands.margin('20px', 0, 0, 0),\n      width: '100%'\n    }\n  },\n  bodyAttached: {\n    marginBottom: '1px',\n    marginTop: '3px',\n    // Width should be updated on hover to include the border width change\n    width: `calc(100% - ${defaultSendBoxActiveBorderThicknessREM}rem)`,\n    '&:hover, &:active, &:focus, &:focus-within': {\n      marginTop: '2px',\n      marginBottom: 0\n    }\n  },\n  bodyError: {\n    ...shorthands.borderColor(errorTextColor)\n  },\n  bodyDefault: {\n    ...shorthands.borderColor(tokens.colorNeutralStrokeAccessible),\n    '&:hover, &:active, &:focus, &:focus-within': {\n      ...shorthands.borderColor(tokens.colorCompoundBrandStroke)\n    }\n  }\n});\n\n/**\n * @private\n */\nexport const useChatMessageRichTextEditContainerStyles = makeStyles({\n  body: {\n    ...shorthands.padding(0),\n    backgroundColor: 'transparent',\n    ...shorthands.margin('1.25rem', 0, 0, 0),\n    width: '100%'\n  },\n  bodyAttached: {\n    marginTop: '0.125rem',\n    marginBottom: 0\n  }\n});\n\n/**\n * Styles that can be applied to ensure flyout items have the minimum touch target size.\n *\n * @private\n */\nexport const menuItemIncreasedSizeStyles: IContextualMenuItemStyles = {\n  root: {\n    height: `${MINIMUM_TOUCH_TARGET_HEIGHT_REM}rem`,\n    lineHeight: `${MINIMUM_TOUCH_TARGET_HEIGHT_REM}rem`,\n    maxHeight: 'unset'\n  },\n  linkContent: {\n    height: `${MINIMUM_TOUCH_TARGET_HEIGHT_REM}rem`,\n    lineHeight: `${MINIMUM_TOUCH_TARGET_HEIGHT_REM}rem`,\n    maxHeight: 'unset'\n  },\n  icon: {\n    maxHeight: 'unset'\n  }\n};\n\n/**\n * @private\n */\nexport const menuIconStyleSet = {\n  root: {\n    height: 'calc(100% - 8px)',\n    // Adjust for the pixel margin Fluent applies\n    width: '1.25rem'\n  }\n};\n\n/**\n * @private\n */\nexport const menuSubIconStyleSet = {\n  root: {\n    height: 'unset',\n    lineHeight: '100%',\n    width: '1.25rem'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { Icon } from '@fluentui/react';\nimport { isMessageTooLong } from './SendBoxUtils';\n/**\n * @private\n */\nexport const onRenderCancelIcon = (className: string): JSX.Element => {\n  return <Icon iconName={'EditBoxCancel'} className={className} />;\n};\n\n/**\n * @private\n */\nexport const onRenderSubmitIcon = (className: string): JSX.Element => {\n  return <Icon iconName={'EditBoxSubmit'} className={className} />;\n};\ntype MessageState = 'OK' | 'too short' | 'too long';\nfunction isMessageEmpty(messageText: string): boolean {\n  return messageText.trim().length === 0;\n}\n\n/**\n * @private\n */\nexport function getMessageState(messageText: string): MessageState {\n  return isMessageEmpty(messageText) ? 'too short' : isMessageTooLong(messageText.length) ? 'too long' : 'OK';\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, ITextField, mergeStyles, Stack } from '@fluentui/react';\nimport { ChatMyMessage } from '@fluentui-contrib/react-chat';\nimport { mergeClasses } from '@fluentui/react-components';\nimport { _formatString } from '@internal/acs-ui-common';\nimport { useTheme } from '../../theming/FluentThemeProvider';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { editBoxStyle, editingButtonStyle, editBoxStyleSet, inputBoxIcon } from '../styles/EditBox.styles';\nimport { InputBoxComponent } from '../InputBoxComponent';\nimport { InputBoxButton } from '../InputBoxButton';\nimport { MessageThreadStrings } from '../MessageThread';\nimport { useChatMyMessageStyles } from '../styles/MessageThread.styles';\nimport { ChatMessage } from '../../types';\nimport { _FileUploadCards } from '../FileUploadCards';\nimport { chatMessageFailedTagStyle, editChatMessageFailedTagStyle, chatMessageFailedTagStackItemStyle, editChatMessageButtonsStackStyle, useChatMessageEditContainerStyles } from '../styles/ChatMessageComponent.styles';\nimport { MAXIMUM_LENGTH_OF_MESSAGE } from '../utils/SendBoxUtils';\nimport { getMessageState, onRenderCancelIcon, onRenderSubmitIcon } from '../utils/ChatMessageComponentAsEditBoxUtils';\n/** @private */\nexport type ChatMessageComponentAsEditBoxProps = {\n  onCancel?: (messageId: string) => void;\n  onSubmit: (text: string, metadata?: Record<string, string>, options?: {}) => void;\n  message: ChatMessage;\n  strings: MessageThreadStrings;\n};\n\n/**\n * @private\n */\nexport const ChatMessageComponentAsEditBox = (props: ChatMessageComponentAsEditBoxProps): JSX.Element => {\n  const {\n    onCancel,\n    onSubmit,\n    strings,\n    message\n  } = props;\n  const [textValue, setTextValue] = useState<string>(message.content || '');\n  const editTextFieldRef = React.useRef<ITextField>(null);\n  const theme = useTheme();\n  const messageState = getMessageState(textValue);\n  const submitEnabled = messageState === 'OK';\n  const editContainerStyles = useChatMessageEditContainerStyles();\n  const chatMyMessageStyles = useChatMyMessageStyles();\n  useEffect(() => {\n    editTextFieldRef.current?.focus();\n  }, []);\n  const setText = (event?: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, newValue?: string): void => {\n    setTextValue(newValue ?? '');\n  };\n  const textTooLongMessage = messageState === 'too long' ? _formatString(strings.editBoxTextLimit, {\n    limitNumber: `${MAXIMUM_LENGTH_OF_MESSAGE}`\n  }) : undefined;\n  const iconClassName = useCallback((isHover: boolean) => {\n    const color = isHover ? theme.palette.accent : theme.palette.neutralSecondary;\n    return mergeStyles(inputBoxIcon, {\n      color\n    });\n  }, [theme.palette.accent, theme.palette.neutralSecondary]);\n  const onRenderThemedCancelIcon = useCallback((isHover: boolean) => {\n    return onRenderCancelIcon(iconClassName(isHover));\n  }, [iconClassName]);\n  const onRenderThemedSubmitIcon = useCallback((isHover: boolean) => {\n    return onRenderSubmitIcon(iconClassName(isHover));\n  }, [iconClassName]);\n  const editBoxStyles = useMemo(() => {\n    return concatStyleSets(editBoxStyleSet, {\n      textField: {\n        borderColor: theme.palette.themePrimary\n      }\n    });\n  }, [theme.palette.themePrimary]);\n  const getContent = (): JSX.Element => {\n    return <>\n        <InputBoxComponent data-ui-id=\"edit-box\" textFieldRef={editTextFieldRef} inputClassName={editBoxStyle} placeholderText={strings.editBoxPlaceholderText} textValue={textValue} onChange={setText} onKeyDown={ev => {\n        if (ev.key === 'ArrowUp' || ev.key === 'ArrowDown') {\n          ev.stopPropagation();\n        }\n      }} onEnterKeyDown={() => {\n        submitEnabled && onSubmit(textValue, message.metadata);\n      }} supportNewline={false} maxLength={MAXIMUM_LENGTH_OF_MESSAGE} errorMessage={textTooLongMessage} styles={editBoxStyles}></InputBoxComponent>\n        <Stack horizontal horizontalAlign=\"end\" className={editChatMessageButtonsStackStyle} tokens={{\n        childrenGap: '0.25rem'\n      }}>\n          {message.failureReason && <Stack.Item grow align=\"stretch\" className={chatMessageFailedTagStackItemStyle}>\n              <div className={mergeStyles(chatMessageFailedTagStyle(theme), editChatMessageFailedTagStyle)}>\n                {message.failureReason}\n              </div>\n            </Stack.Item>}\n          <Stack.Item align=\"end\">\n            <InputBoxButton className={editingButtonStyle} ariaLabel={strings.editBoxCancelButton} tooltipContent={strings.editBoxCancelButton} onRenderIcon={onRenderThemedCancelIcon} onClick={() => {\n            onCancel && onCancel(message.messageId);\n          }} id={'dismissIconWrapper'} />\n          </Stack.Item>\n          <Stack.Item align=\"end\">\n            <InputBoxButton className={editingButtonStyle} ariaLabel={strings.editBoxSubmitButton} tooltipContent={strings.editBoxSubmitButton} onRenderIcon={onRenderThemedSubmitIcon} onClick={e => {\n            submitEnabled && onSubmit(textValue, message.metadata);\n            e.stopPropagation();\n          }} id={'submitIconWrapper'} />\n          </Stack.Item>\n        </Stack>\n        {}\n      </>;\n  };\n  const attached = message.attached === true ? 'center' : message.attached === 'bottom' ? 'bottom' : 'top';\n  return <ChatMyMessage attached={attached} root={{\n    className: chatMyMessageStyles.root\n  }} body={{\n    className: mergeClasses(editContainerStyles.body, message.failureReason !== undefined ? editContainerStyles.bodyError : editContainerStyles.bodyDefault, attached !== 'top' ? editContainerStyles.bodyAttached : undefined)\n  }}>\n      {getContent()}\n    </ChatMyMessage>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { MessageThreadStrings } from '../MessageThread';\n\n/**\n * @private\n */\nexport const formatTimeForChatMessage = (messageDate: Date): string => {\n  return messageDate.toLocaleTimeString([], {\n    hour: 'numeric',\n    minute: '2-digit'\n  });\n};\n\n/**\n * @private\n */\nexport const formatDateForChatMessage = (messageDate: Date): string => {\n  return messageDate.toLocaleDateString();\n};\n\n/**\n * Given a message date object in ISO8601 and a current date object, generates a user friendly timestamp text\n * using the system locale.\n * <time in locale format>.\n * Yesterday <time in locale format>.\n * <dateStrings day of week> <time in locale format>.\n * <date in locale format> <time in locale format>.\n *\n * If message is after yesterday, then only show the time.\n * If message is before yesterday and after day before yesterday, then show 'Yesterday' plus the time.\n * If message is before day before yesterday and within the current week, then show 'Monday/Tuesday/etc' plus the time.\n *   - We consider start of the week as Sunday. If current day is Sunday, then any time before that is in previous week.\n * If message is in previous or older weeks, then show date string plus the time.\n *\n * @param messageDate - date of message\n * @param currentDate - date used as offset to create the user friendly timestamp (e.g. to create 'Yesterday' instead of an absolute date)\n *\n * @private\n */\nexport const formatTimestampForChatMessage = (messageDate: Date, todayDate: Date, dateStrings: MessageThreadStrings): string => {\n  // If message was in the same day timestamp string is just the time like '1:30 p.m.'.\n  const startOfDay = new Date(todayDate.getFullYear(), todayDate.getMonth(), todayDate.getDate());\n  if (messageDate > startOfDay) {\n    return formatTimeForChatMessage(messageDate);\n  }\n\n  // If message was yesterday then timestamp string is like this 'Yesterday 1:30 p.m.'.\n  const yesterdayDate = new Date(todayDate.getFullYear(), todayDate.getMonth(), todayDate.getDate() - 1);\n  if (messageDate > yesterdayDate) {\n    return dateStrings.yesterday + ' ' + formatTimeForChatMessage(messageDate);\n  }\n\n  // If message was before Sunday and today is Sunday (start of week) then timestamp string is like\n  // '2021-01-10 1:30 p.m.'.\n  const weekDay = todayDate.getDay();\n  if (weekDay === 0) {\n    return formatDateForChatMessage(messageDate) + ' ' + formatTimeForChatMessage(messageDate);\n  }\n\n  // If message was before first day of the week then timestamp string is like Monday 1:30 p.m.\n  const firstDayOfTheWeekDate = new Date(todayDate.getFullYear(), todayDate.getMonth(), todayDate.getDate() - weekDay);\n  if (messageDate > firstDayOfTheWeekDate) {\n    return dayToDayName(messageDate.getDay(), dateStrings) + ' ' + formatTimeForChatMessage(messageDate);\n  }\n\n  // If message date is in previous or older weeks then timestamp string is like 2021-01-10 1:30 p.m.\n  return formatDateForChatMessage(messageDate) + ' ' + formatTimeForChatMessage(messageDate);\n};\nconst dayToDayName = (day: number, dateStrings: MessageThreadStrings): string => {\n  switch (day) {\n    case 0:\n      return dateStrings.sunday;\n    case 1:\n      return dateStrings.monday;\n    case 2:\n      return dateStrings.tuesday;\n    case 3:\n      return dateStrings.wednesday;\n    case 4:\n      return dateStrings.thursday;\n    case 5:\n      return dateStrings.friday;\n    case 6:\n      return dateStrings.saturday;\n    default:\n      throw new Error(`Invalid day [${day}] passed`);\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, ContextualMenu, DirectionalHint, IContextualMenuItem, IPersona, Persona, PersonaSize, Target, useTheme } from '@fluentui/react';\nimport { _pxToRem, _formatString } from '@internal/acs-ui-common';\nimport React, { useMemo } from 'react';\nimport { OnRenderAvatarCallback } from '../../types';\nimport { MessageThreadStrings } from '../MessageThread';\nimport { chatMessageMenuStyle, menuIconStyleSet, menuItemIncreasedSizeStyles, menuSubIconStyleSet } from '../styles/ChatMessageComponent.styles';\n\n/** @private */\nexport interface ChatMessageActionFlyoutProps {\n  target?: Target;\n  hidden: boolean;\n  strings: MessageThreadStrings;\n  onEditClick?: () => void;\n  onRemoveClick?: () => void;\n  onResendClick?: () => void;\n  onDismiss: () => void;\n  messageReadBy?: {\n    id: string;\n    displayName: string;\n  }[];\n  remoteParticipantsCount?: number;\n  messageStatus?: string;\n  /**\n   * Whether the status indicator for each message is displayed or not.\n   */\n  showMessageStatus?: boolean;\n  /**\n   * Increase the height of the flyout items.\n   * Recommended when interacting with the chat message using touch.\n   */\n  increaseFlyoutItemSize: boolean;\n  /**\n   * Optional callback to override render of the avatar.\n   *\n   * @param userId - user Id\n   */\n  onRenderAvatar?: OnRenderAvatarCallback;\n}\n\n/**\n * Chat message actions flyout that contains actions such as Edit Message, or Remove Message.\n *\n * @private\n */\nexport const ChatMessageActionFlyout = (props: ChatMessageActionFlyoutProps): JSX.Element => {\n  const theme = useTheme();\n  const messageReadByCount = props.messageReadBy?.length;\n  const sortedMessageReadyByList = [...(props.messageReadBy ?? [])].sort((a, b) => a.displayName.localeCompare(b.displayName));\n  const messageReadByList: IContextualMenuItem[] | undefined = sortedMessageReadyByList?.map(person => {\n    const personaOptions: IPersona = {\n      hidePersonaDetails: true,\n      size: PersonaSize.size24,\n      text: person.displayName,\n      showOverflowTooltip: false,\n      styles: {\n        root: {\n          margin: '0.25rem'\n        }\n      }\n    };\n    const {\n      onRenderAvatar\n    } = props;\n    return {\n      'data-ui-id': 'chat-composite-message-contextual-menu-read-name-list-item',\n      key: person.displayName,\n      text: person.displayName,\n      itemProps: {\n        styles: props.increaseFlyoutItemSize ? menuItemIncreasedSizeStyles : undefined\n      },\n      onRenderIcon: () => onRenderAvatar ? onRenderAvatar(person.id ?? '', personaOptions) : <Persona {...personaOptions} />,\n      iconProps: {\n        styles: menuIconStyleSet\n      }\n    };\n  });\n  const menuItems = useMemo((): IContextualMenuItem[] => {\n    const items: IContextualMenuItem[] = [{\n      key: 'Edit',\n      'data-ui-id': 'chat-composite-message-contextual-menu-edit-action',\n      text: props.strings.editMessage,\n      itemProps: {\n        styles: props.increaseFlyoutItemSize ? menuItemIncreasedSizeStyles : undefined\n      },\n      iconProps: {\n        iconName: 'MessageEdit',\n        styles: menuIconStyleSet\n      },\n      onClick: props.onEditClick\n    }, {\n      key: 'Remove',\n      text: props.strings.removeMessage,\n      itemProps: {\n        styles: props.increaseFlyoutItemSize ? menuItemIncreasedSizeStyles : undefined\n      },\n      iconProps: {\n        iconName: 'MessageRemove',\n        styles: menuIconStyleSet\n      },\n      onClick: props.onRemoveClick\n    }];\n    // only show read by x of x if more than 3 participants in total including myself\n    // TODO: change strings.messageReadCount to be required if we can fallback to our own en-us strings for anything that Contoso doesn't provide\n    if (props.remoteParticipantsCount && messageReadByCount !== undefined && props.remoteParticipantsCount >= 2 && props.showMessageStatus && props.strings.messageReadCount && props.messageStatus !== 'failed') {\n      items.push({\n        key: 'Read Count',\n        'data-ui-id': 'chat-composite-message-contextual-menu-read-info',\n        text: _formatString(props.strings.messageReadCount, {\n          messageReadByCount: `${messageReadByCount}`,\n          remoteParticipantsCount: `${props.remoteParticipantsCount}`\n        }),\n        itemProps: {\n          styles: concatStyleSets({\n            linkContent: {\n              color: messageReadByCount > 0 ? theme.palette.neutralPrimary : theme.palette.neutralTertiary\n            },\n            root: {\n              borderTop: `1px solid ${theme.palette.neutralLighter}`\n            }\n          }, props.increaseFlyoutItemSize ? menuItemIncreasedSizeStyles : undefined)\n        },\n        calloutProps: preventUnwantedDismissProps,\n        subMenuProps: {\n          items: messageReadByList ?? [],\n          calloutProps: preventUnwantedDismissProps,\n          styles: concatStyleSets({\n            root: {\n              maxWidth: _pxToRem(320),\n              span: {\n                overflow: 'hidden',\n                textOverflow: 'ellipsis'\n              }\n            }\n          })\n        },\n        iconProps: {\n          iconName: 'MessageSeen',\n          styles: {\n            root: {\n              color: messageReadByCount > 0 ? theme.palette.themeDarkAlt : theme.palette.neutralTertiary\n            }\n          }\n        },\n        submenuIconProps: {\n          iconName: 'HorizontalGalleryRightButton',\n          styles: menuSubIconStyleSet\n        },\n        disabled: messageReadByCount <= 0\n      });\n    } else if (props.messageStatus === 'failed' && props.strings.resendMessage) {\n      items.push({\n        key: 'Resend',\n        text: props.strings.resendMessage,\n        itemProps: {\n          styles: concatStyleSets({\n            linkContent: {\n              color: theme.palette.neutralPrimary\n            },\n            root: {\n              borderTop: `1px solid ${theme.palette.neutralLighter}`\n            }\n          }, props.increaseFlyoutItemSize ? menuItemIncreasedSizeStyles : undefined)\n        },\n        calloutProps: preventUnwantedDismissProps,\n        iconProps: {\n          iconName: 'MessageResend',\n          styles: {\n            root: {\n              color: theme.palette.themeDarkAlt\n            }\n          }\n        },\n        onClick: props.onResendClick\n      });\n    }\n    return items;\n  }, [props.strings.editMessage, props.strings.removeMessage, props.strings.messageReadCount, props.strings.resendMessage, props.messageStatus, props.increaseFlyoutItemSize, props.onEditClick, props.onRemoveClick, props.onResendClick, props.remoteParticipantsCount, props.showMessageStatus, messageReadByCount, theme.palette.neutralPrimary, theme.palette.neutralTertiary, theme.palette.neutralLighter, theme.palette.themeDarkAlt, messageReadByList]);\n\n  // gap space uses pixels\n  return <ContextualMenu alignTargetEdge={true} gapSpace={2 /*px*/} isBeakVisible={false} items={menuItems} hidden={props.hidden} target={props.target} onDismiss={props.onDismiss} directionalHint={DirectionalHint.topRightEdge} className={chatMessageMenuStyle} calloutProps={calloutMenuProps} />;\n};\n\n/**\n * Similar to {@link preventDismissOnEvent}, but not prevent dismissing from scrolling, since it is causing bugs in chat thread.\n */\nconst preventUnwantedDismissProps = {\n  preventDismissOnEvent: (ev: Event | React.FocusEvent | React.KeyboardEvent | React.MouseEvent): boolean => {\n    return ev.type === 'resize';\n  }\n};\nconst calloutMenuProps = {\n  ...preventUnwantedDismissProps,\n  styles: {\n    root: {\n      marginRight: '3px'\n    }\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { _formatString } from '@internal/acs-ui-common';\nimport parse, { HTMLReactParserOptions, Element as DOMElement } from 'html-react-parser';\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nimport { attributesToProps } from 'html-react-parser';\nimport Linkify from 'react-linkify';\nimport { ChatMessage } from '../../types/ChatMessage';\nimport { Link } from '@fluentui/react';\nimport { MessageThreadStrings } from '../MessageThread';\nimport LiveMessage from '../Announcer/LiveMessage';\nimport DOMPurify from 'dompurify';\ntype ChatMessageContentProps = {\n  message: ChatMessage;\n  strings: MessageThreadStrings;\n  /* @conditional-compile-remove(image-overlay) */\n  inlineImageOptions?: InlineImageOptions;\n};\ntype MessageContentWithLiveAriaProps = {\n  message: ChatMessage;\n  liveMessage: string;\n  ariaLabel?: string;\n  content: JSX.Element;\n};\n\n/* @conditional-compile-remove(image-overlay) */\n/**\n * InlineImage's state, as reflected in the UI.\n *\n * @public\n */\nexport interface InlineImage {\n  /** ID of the message that the inline image is belonged to */\n  messageId: string;\n  /** Attributes of the inline image */\n  imageAttributes: React.ImgHTMLAttributes<HTMLImageElement>;\n}\n\n/* @conditional-compile-remove(image-overlay) */\n/**\n * Options to display inline image in the inline image scenario.\n *\n * @public\n */\nexport interface InlineImageOptions {\n  /**\n   * Optional callback to render an inline image of in a message.\n   */\n  onRenderInlineImage?: (inlineImage: InlineImage, defaultOnRender: (inlineImage: InlineImage) => JSX.Element) => JSX.Element;\n}\n\n/** @private */\nexport const ChatMessageContent = (props: ChatMessageContentProps): JSX.Element => {\n  switch (props.message.contentType) {\n    case 'text':\n      return MessageContentAsText(props);\n    case 'html':\n      return MessageContentAsRichTextHTML(props);\n    case 'richtext/html':\n      return MessageContentAsRichTextHTML(props);\n    default:\n      console.warn('unknown message content type');\n      return <></>;\n  }\n};\nconst MessageContentWithLiveAria = (props: MessageContentWithLiveAriaProps): JSX.Element => {\n  return <div data-ui-status={props.message.status} role=\"text\" aria-label={props.ariaLabel}>\n      <LiveMessage message={props.liveMessage} ariaLive=\"polite\" />\n      {props.content}\n    </div>;\n};\nconst MessageContentAsRichTextHTML = (props: ChatMessageContentProps): JSX.Element => {\n  return <MessageContentWithLiveAria message={props.message} liveMessage={generateLiveMessage(props)} ariaLabel={messageContentAriaText(props)} content={processHtmlToReact(props)} />;\n};\nconst MessageContentAsText = (props: ChatMessageContentProps): JSX.Element => {\n  return <MessageContentWithLiveAria message={props.message} liveMessage={generateLiveMessage(props)} ariaLabel={messageContentAriaText(props)} content={<Linkify componentDecorator={(decoratedHref: string, decoratedText: string, key: number) => {\n    return <Link target=\"_blank\" href={decoratedHref} key={key}>\n                {decoratedText}\n              </Link>;\n  }}>\n          {props.message.content}\n        </Linkify>} />;\n};\nconst extractContentForAllyMessage = (props: ChatMessageContentProps): string => {\n  if (props.message.content) {\n    // Replace all <img> tags with 'image' for aria.\n    const parsedContent = DOMPurify.sanitize(props.message.content, {\n      ALLOWED_TAGS: ['img'],\n      RETURN_DOM_FRAGMENT: true\n    });\n    parsedContent.childNodes.forEach(child => {\n      if (child.nodeName.toLowerCase() !== 'img') {\n        return;\n      }\n      const imageTextNode = document.createElement('div');\n      imageTextNode.innerHTML = 'image ';\n      parsedContent.replaceChild(imageTextNode, child);\n    });\n\n    // Strip all html tags from the content for aria.\n    const message = DOMPurify.sanitize(parsedContent, {\n      ALLOWED_TAGS: []\n    });\n    return message;\n  }\n  return '';\n};\nconst generateLiveMessage = (props: ChatMessageContentProps): string => {\n  const liveAuthor = _formatString(props.strings.liveAuthorIntro, {\n    author: `${props.message.senderDisplayName}`\n  });\n  return `${props.message.editedOn ? props.strings.editedTag : ''} ${props.message.mine ? '' : liveAuthor} ${extractContentForAllyMessage(props)} `;\n};\nconst messageContentAriaText = (props: ChatMessageContentProps): string | undefined => {\n  const message = extractContentForAllyMessage(props);\n  return props.message.mine ? _formatString(props.strings.messageContentMineAriaText, {\n    message: message\n  }) : _formatString(props.strings.messageContentAriaText, {\n    author: `${props.message.senderDisplayName}`,\n    message: message\n  });\n};\n\n/* @conditional-compile-remove(image-overlay) */\nconst defaultOnRenderInlineImage = (inlineImage: InlineImage): JSX.Element => {\n  return <img key={inlineImage.imageAttributes.id} tabIndex={0} data-ui-id={inlineImage.imageAttributes.id} {...inlineImage.imageAttributes} />;\n};\nconst processHtmlToReact = (props: ChatMessageContentProps): JSX.Element => {\n  const options: HTMLReactParserOptions = {\n    transform(reactNode, domNode) {\n      if (domNode instanceof DOMElement && domNode.attribs) {\n        // Transform custom rendering of mentions\n        // Transform inline images\n        /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n        if (domNode.name && domNode.name === 'img' && domNode.attribs && domNode.attribs.id) {\n          domNode.attribs['aria-label'] = domNode.attribs.name;\n          const imgProps = attributesToProps(domNode.attribs);\n          /* @conditional-compile-remove(image-overlay) */\n          const inlineImageProps: InlineImage = {\n            messageId: props.message.messageId,\n            imageAttributes: imgProps\n          };\n\n          /* @conditional-compile-remove(image-overlay) */\n          return props.inlineImageOptions?.onRenderInlineImage ? props.inlineImageOptions.onRenderInlineImage(inlineImageProps, defaultOnRenderInlineImage) : defaultOnRenderInlineImage(inlineImageProps);\n          return <img key={(imgProps.id as string)} {...imgProps} />;\n        }\n      }\n      // Pass through the original node\n      return ((reactNode as unknown) as JSX.Element);\n    }\n  };\n  return <>{parse(props.message.content ?? '', options)}</>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Icon, Theme } from '@fluentui/react';\nimport { MenuProps } from '@fluentui/react-components';\nimport React from 'react';\nimport { iconWrapperStyle } from '../styles/ChatMessageComponent.styles';\n\n/** @private */\nexport type ChatMessageActionMenuProps = MenuProps & {\n  showActionMenu?: boolean | undefined;\n};\n\n/**\n * Props for the Chat.Message action menu.\n * This is the 3 dots that appear when hovering over one of your own chat messages.\n *\n * @private\n */\nexport const chatMessageActionMenuProps = (menuProps: {\n  /** String for aria label that is read by Screen readers */\n  ariaLabel?: string;\n  /** Whether the action menu button is enabled, if not this will always return undefined */\n  enabled: boolean;\n  /** Whether the menu is shown */\n  menuExpanded: boolean;\n  menuButtonRef: React.MutableRefObject<HTMLDivElement | null>;\n  onActionButtonClick: () => void;\n  theme: Theme;\n}): ChatMessageActionMenuProps | undefined => {\n  const {\n    ariaLabel,\n    enabled,\n    theme,\n    menuExpanded\n  } = menuProps;\n  // Show the action button while the flyout is open (otherwise this will dismiss when the pointer is hovered over the flyout)\n  const showActionMenu = enabled || menuExpanded;\n  const actionMenuProps: ChatMessageActionMenuProps = {\n    children: <div tabIndex={showActionMenu ? 0 : undefined} //make div focusable, as Icon below is migrated to v9, this can be deleted\n    key=\"menuButton\" data-ui-id=\"chat-composite-message-action-icon\" ref={menuProps.menuButtonRef} onClick={showActionMenu ? () => menuProps.onActionButtonClick() : undefined} style={{\n      margin: showActionMenu ? '1px' : 0,\n      minHeight: showActionMenu ? undefined : '30px'\n    }} role=\"button\" aria-label={showActionMenu ? ariaLabel : undefined} aria-haspopup={showActionMenu}\n    // set expanded to true, only when the action menu is open\n    aria-expanded={menuExpanded} onKeyDown={e => {\n      // simulate <button> tag behavior\n      if (showActionMenu && (e.key === 'Enter' || e.key === ' ')) {\n        menuProps.onActionButtonClick();\n      }\n    }}>\n        {showActionMenu ? <Icon iconName=\"ChatMessageOptions\" aria-label={ariaLabel} styles={iconWrapperStyle(theme, menuExpanded)} /> : undefined}\n      </div>\n  };\n  return actionMenuProps;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Text, mergeStyles, IStyle } from '@fluentui/react';\nimport { ChatMessage as FluentChatMessage, ChatMyMessage } from '@fluentui-contrib/react-chat';\nimport { _formatString } from '@internal/acs-ui-common';\nimport React, { useCallback, useRef, useState } from 'react';\nimport { chatMessageEditedTagStyle, chatMessageDateStyle, chatMessageFailedTagStyle, chatMessageAuthorStyle } from '../styles/ChatMessageComponent.styles';\nimport { formatTimeForChatMessage, formatTimestampForChatMessage } from '../utils/Datetime';\nimport { useIdentifiers } from '../../identifiers/IdentifierProvider';\nimport { useTheme } from '../../theming';\nimport { ChatMessageActionFlyout } from './ChatMessageActionsFlyout';\nimport { ChatMessageContent } from './ChatMessageContent';\n/* @conditional-compile-remove(image-overlay) */\nimport { InlineImageOptions } from './ChatMessageContent';\nimport { ChatMessage } from '../../types/ChatMessage';\nimport { MessageThreadStrings } from '../MessageThread';\nimport { chatMessageActionMenuProps } from './ChatMessageActionMenu';\nimport { ComponentSlotStyle, OnRenderAvatarCallback } from '../../types';\nimport { _FileDownloadCards } from '../FileDownloadCards';\nimport { ComponentLocale, useLocale } from '../../localization';\nimport { createStyleFromV8Style } from '../styles/v8StyleShim';\nimport { MessageStatus } from '@internal/acs-ui-common';\nimport { mergeClasses } from '@fluentui/react-components';\nimport { useChatMessageStyles, useChatMyMessageStyles, useChatMessageCommonStyles } from '../styles/MessageThread.styles';\ntype ChatMessageComponentAsMessageBubbleProps = {\n  message: ChatMessage;\n  messageContainerStyle?: ComponentSlotStyle;\n  /** Styles for message status indicator container. */\n  messageStatusContainer?: (mine: boolean) => IStyle;\n  showDate?: boolean;\n  disableEditing?: boolean;\n  onEditClick: () => void;\n  onRemoveClick?: () => void;\n  onResendClick?: () => void;\n  strings: MessageThreadStrings;\n  userId: string;\n  messageStatus?: string;\n  /**\n   * Whether the status indicator for each message is displayed or not.\n   */\n  showMessageStatus?: boolean;\n  messageStatusRenderer?: (status: MessageStatus) => JSX.Element | null;\n  /**\n   * Whether to overlap avatar and message when the view is width constrained.\n   */\n  shouldOverlapAvatarAndMessage: boolean;\n  remoteParticipantsCount?: number;\n  onActionButtonClick: (message: ChatMessage, setMessageReadBy: (readBy: {\n    id: string;\n    displayName: string;\n  }[]) => void) => void;\n  /**\n   * Optional callback to override render of the avatar.\n   *\n   * @param userId - user Id\n   */\n  onRenderAvatar?: OnRenderAvatarCallback;\n\n  /**\n   * Optional function to provide customized date format.\n   * @beta\n   */\n  onDisplayDateTimeString?: (messageDate: Date) => string;\n  /* @conditional-compile-remove(image-overlay) */\n  /**\n   * Optional callback called when an inline image is clicked.\n   * @beta\n   */\n  inlineImageOptions?: InlineImageOptions;\n};\nconst generateDefaultTimestamp = (createdOn: Date, showDate: boolean | undefined, strings: MessageThreadStrings): string => {\n  const formattedTimestamp = showDate ? formatTimestampForChatMessage(createdOn, new Date(), strings) : formatTimeForChatMessage(createdOn);\n  return formattedTimestamp;\n};\n\n// onDisplayDateTimeString from props overwrite onDisplayDateTimeString from locale\nconst generateCustomizedTimestamp = (props: ChatMessageComponentAsMessageBubbleProps, createdOn: Date, locale: ComponentLocale): string => {\n  return '';\n};\n/** @private */\nconst MessageBubble = (props: ChatMessageComponentAsMessageBubbleProps): JSX.Element => {\n  const ids = useIdentifiers();\n  const theme = useTheme();\n  const locale = useLocale();\n  const {\n    userId,\n    message,\n    onRemoveClick,\n    onResendClick,\n    disableEditing,\n    showDate,\n    messageContainerStyle,\n    strings,\n    onEditClick,\n    remoteParticipantsCount = 0,\n    onRenderAvatar,\n    showMessageStatus,\n    messageStatus,\n    /* @conditional-compile-remove(image-overlay) */\n    inlineImageOptions,\n    shouldOverlapAvatarAndMessage\n  } = props;\n  const defaultTimeStamp = message.createdOn ? generateDefaultTimestamp(message.createdOn, showDate, strings) : undefined;\n  const customTimestamp = message.createdOn ? generateCustomizedTimestamp(props, message.createdOn, locale) : '';\n  const formattedTimestamp = customTimestamp || defaultTimeStamp;\n\n  // Track if the action menu was opened by touch - if so we increase the touch targets for the items\n  const [wasInteractionByTouch, setWasInteractionByTouch] = useState(false);\n  // `focused` state is used for show/hide actionMenu\n  const [focused, setFocused] = React.useState<boolean>(false);\n\n  // The chat message action flyout should target the Chat.Message action menu if clicked,\n  // or target the chat message if opened via touch press.\n  // Undefined indicates the flyout menu should not be being shown.\n  const messageRef = useRef<HTMLDivElement | null>(null);\n  const messageActionButtonRef = useRef<HTMLDivElement | null>(null);\n  const [chatMessageActionFlyoutTarget, setChatMessageActionFlyoutTarget] = useState<React.MutableRefObject<HTMLElement | null> | undefined>(undefined);\n  const chatActionsEnabled = !disableEditing && message.status !== 'sending' && !!message.mine;\n  const [messageReadBy, setMessageReadBy] = useState<{\n    id: string;\n    displayName: string;\n  }[]>([]);\n  const actionMenuProps = chatMessageActionMenuProps({\n    ariaLabel: strings.actionMenuMoreOptions ?? '',\n    enabled: chatActionsEnabled,\n    menuButtonRef: messageActionButtonRef,\n    menuExpanded: chatMessageActionFlyoutTarget === messageActionButtonRef,\n    onActionButtonClick: () => {\n      if (message.messageType === 'chat') {\n        props.onActionButtonClick(message, setMessageReadBy);\n        setChatMessageActionFlyoutTarget(messageActionButtonRef);\n      }\n    },\n    theme\n  });\n  const onActionFlyoutDismiss = useCallback((): void => {\n    // When the flyout dismiss is called, since we control if the action flyout is visible\n    // or not we need to set the target to undefined here to actually hide the action flyout\n    setChatMessageActionFlyoutTarget(undefined);\n  }, [setChatMessageActionFlyoutTarget]);\n  const defaultOnRenderFileDownloads = useCallback(() => {}, [userId, message]);\n  const editedOn = 'editedOn' in message ? message.editedOn : undefined;\n  const getMessageDetails = useCallback(() => {\n    if (messageStatus === 'failed') {\n      return <div className={chatMessageFailedTagStyle(theme)}>{strings.failToSendTag}</div>;\n    } else if (message.messageType === 'chat' && editedOn) {\n      return <div className={chatMessageEditedTagStyle(theme)}>{strings.editedTag}</div>;\n    }\n    return undefined;\n  }, [editedOn, message.messageType, messageStatus, strings.editedTag, strings.failToSendTag, theme]);\n  const getContent = useCallback(() => {\n    return <div tabIndex={0} className=\"ui-chat__message__content\">\n        <ChatMessageContent message={message} strings={strings} /* @conditional-compile-remove(image-overlay) */\n      inlineImageOptions={inlineImageOptions} />\n        {}\n      </div>;\n  }, [defaultOnRenderFileDownloads, /* @conditional-compile-remove(image-overlay) */inlineImageOptions, message, props, strings, userId]);\n  const isBlockedMessage = false;\n  const chatMyMessageStyles = useChatMyMessageStyles();\n  const chatMessageCommonStyles = useChatMessageCommonStyles();\n  const chatMessageStyles = useChatMessageStyles();\n  const chatItemMessageContainerClassName = mergeClasses(\n  // messageContainerStyle used in className and style prop as style prop can't handle CSS selectors\n  chatMessageStyles.body,\n  // disable placeholder functionality for GA releases as it might confuse users\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  chatMessageStyles.bodyWithPlaceholderImage, isBlockedMessage ? chatMessageCommonStyles.blocked : props.message.status === 'failed' ? chatMessageCommonStyles.failed : undefined, shouldOverlapAvatarAndMessage ? chatMessageStyles.avatarOverlap : chatMessageStyles.avatarNoOverlap, message.attached === 'top' || message.attached === false ? chatMessageStyles.bodyWithAvatar : chatMessageStyles.bodyWithoutAvatar, mergeStyles(messageContainerStyle));\n  const attached = message.attached === true ? 'center' : message.attached === 'bottom' ? 'bottom' : 'top';\n  const chatMessage = <>\n      <div key={props.message.messageId}>\n        {message.mine ? <ChatMyMessage attached={attached} key={props.message.messageId} body={{\n        // messageContainerStyle used in className and style prop as style prop can't handle CSS selectors\n        className: mergeClasses(chatMyMessageStyles.body, isBlockedMessage ? chatMessageCommonStyles.blocked : props.message.status === 'failed' ? chatMessageCommonStyles.failed : undefined, attached !== 'top' ? chatMyMessageStyles.bodyAttached : undefined, mergeStyles(messageContainerStyle)),\n        style: {\n          ...createStyleFromV8Style(messageContainerStyle)\n        },\n        ref: messageRef\n      }} root={{\n        className: chatMyMessageStyles.root,\n        onBlur: e => {\n          // `focused` controls is focused the whole `ChatMessage` or any of its children. When we're navigating\n          // with keyboard the focused element will be changed and there is no way to use `:focus` selector\n          if (chatMessageActionFlyoutTarget?.current) {\n            // doesn't dismiss action button if flyout is open, otherwise, narrator's focus will stay on the closed action menu\n            return;\n          }\n          const shouldPreserveFocusState = e.currentTarget.contains(e.relatedTarget);\n          setFocused(shouldPreserveFocusState);\n        },\n        onFocus: () => {\n          // react onFocus is called even when nested component receives focus (i.e. it bubbles)\n          // so when focus moves within actionMenu, the `focus` state in chatMessage remains true, and keeps actionMenu visible\n          setFocused(true);\n        },\n        // make body not focusable to remove repetitions from narrators.\n        // inner components are already focusable\n        role: 'none',\n        tabIndex: -1\n      }} data-ui-id=\"chat-composite-message\" author={<Text className={chatMessageDateStyle} tabIndex={0}>\n                {message.senderDisplayName}\n              </Text>} timestamp={<Text className={chatMessageDateStyle} data-ui-id={ids.messageTimestamp} tabIndex={0}>\n                {formattedTimestamp}\n              </Text>} details={getMessageDetails()} actions={{\n        children: actionMenuProps?.children,\n        className: mergeClasses(chatMyMessageStyles.menu,\n        // Make actions menu visible when the message is focused or the flyout is shown\n        focused || chatMessageActionFlyoutTarget?.current ? chatMyMessageStyles.menuVisible : chatMyMessageStyles.menuHidden, attached !== 'top' ? chatMyMessageStyles.menuAttached : undefined)\n      }} onTouchStart={() => setWasInteractionByTouch(true)} onPointerDown={() => setWasInteractionByTouch(false)} onKeyDown={() => setWasInteractionByTouch(false)} onClick={() => {\n        if (!wasInteractionByTouch) {\n          return;\n        }\n        // If the message was touched via touch we immediately open the menu\n        // flyout (when using mouse the 3-dot menu that appears on hover\n        // must be clicked to open the flyout).\n        // In doing so here we set the target of the flyout to be the message and\n        // not the 3-dot menu button to position the flyout correctly.\n        setChatMessageActionFlyoutTarget(messageRef);\n        if (message.messageType === 'chat') {\n          props.onActionButtonClick(message, setMessageReadBy);\n        }\n      }}>\n            {getContent()}\n          </ChatMyMessage> : <FluentChatMessage attached={attached} key={props.message.messageId} root={{\n        className: chatMessageStyles.root,\n        // make body not focusable to remove repetitions from narrators.\n        // inner components are already focusable\n        tabIndex: -1,\n        role: 'none'\n      }} author={<Text className={chatMessageAuthorStyle}>{message.senderDisplayName}</Text>} body={{\n        className: chatItemMessageContainerClassName,\n        style: {\n          ...createStyleFromV8Style(messageContainerStyle)\n        }\n      }} data-ui-id=\"chat-composite-message\" timestamp={<Text className={chatMessageDateStyle} data-ui-id={ids.messageTimestamp}>\n                {formattedTimestamp}\n              </Text>} details={getMessageDetails()}>\n            {getContent()}\n          </FluentChatMessage>}\n      </div>\n      {chatActionsEnabled && <ChatMessageActionFlyout hidden={!chatMessageActionFlyoutTarget} target={chatMessageActionFlyoutTarget} increaseFlyoutItemSize={wasInteractionByTouch} onDismiss={onActionFlyoutDismiss} onEditClick={onEditClick} onRemoveClick={onRemoveClick} onResendClick={onResendClick} strings={strings} messageReadBy={messageReadBy} messageStatus={messageStatus ?? 'failed'} remoteParticipantsCount={remoteParticipantsCount} onRenderAvatar={onRenderAvatar} showMessageStatus={showMessageStatus} />}\n    </>;\n  return chatMessage;\n};\n\n/** @private */\nexport const ChatMessageComponentAsMessageBubble = React.memo(MessageBubble);","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _formatString } from '@internal/acs-ui-common';\nimport React, { useCallback, useState } from 'react';\nimport { ChatMessageComponentAsEditBox } from './ChatMessageComponentAsEditBox';\nimport { MessageThreadStrings } from '../MessageThread';\nimport { ChatMessage, ComponentSlotStyle, OnRenderAvatarCallback } from '../../types';\nimport { ChatMessageComponentAsMessageBubble } from './ChatMessageComponentAsMessageBubble';\nimport { FileDownloadHandler, AttachmentMetadata } from '../FileDownloadCards';\n/* @conditional-compile-remove(image-overlay) */\nimport { InlineImageOptions } from './ChatMessageContent';\ntype ChatMessageComponentProps = {\n  message: ChatMessage;\n  userId: string;\n  messageContainerStyle?: ComponentSlotStyle;\n  showDate?: boolean;\n  disableEditing?: boolean;\n  onUpdateMessage?: (messageId: string, content: string, metadata?: Record<string, string>, options?: {\n    attachmentMetadata?: AttachmentMetadata[];\n  }) => Promise<void>;\n  onCancelEditMessage?: (messageId: string) => void;\n  /**\n   * Callback to delete a message. Also called before resending a message that failed to send.\n   * @param messageId ID of the message to delete\n   */\n  onDeleteMessage?: (messageId: string) => Promise<void>;\n  /**\n   * Callback to send a message\n   * @param content The message content to send\n   */\n  onSendMessage?: (content: string) => Promise<void>;\n  strings: MessageThreadStrings;\n  messageStatus?: string;\n  /**\n   * Optional text to display when the message status is 'failed'.\n   */\n  failureReason?: string;\n  /**\n   * Whether the status indicator for each message is displayed or not.\n   */\n  showMessageStatus?: boolean;\n  /**\n   * Whether to overlap avatar and message when the view is width constrained.\n   */\n  shouldOverlapAvatarAndMessage: boolean;\n  /**\n   * Optional callback to render uploaded files in the message component.\n   */\n  onRenderFileDownloads?: (userId: string, message: ChatMessage) => JSX.Element;\n  /**\n   * Optional function called when someone clicks on the file download icon.\n   */\n  fileDownloadHandler?: FileDownloadHandler;\n  remoteParticipantsCount?: number;\n  onActionButtonClick: (message: ChatMessage, setMessageReadBy: (readBy: {\n    id: string;\n    displayName: string;\n  }[]) => void) => void;\n  /**\n   * Optional callback to override render of the avatar.\n   *\n   * @param userId - user Id\n   */\n  onRenderAvatar?: OnRenderAvatarCallback;\n  /* @conditional-compile-remove(image-overlay) */\n  /**\n   * Optional callback called when an inline image is clicked.\n   * @beta\n   */\n  inlineImageOptions?: InlineImageOptions;\n};\n\n/**\n * @private\n */\nexport const ChatMessageComponent = (props: ChatMessageComponentProps): JSX.Element => {\n  const {\n    onDeleteMessage,\n    onSendMessage,\n    message\n  } = props;\n  const [isEditing, setIsEditing] = useState(false);\n  const onEditClick = useCallback(() => setIsEditing(true), [setIsEditing]);\n  const clientMessageId = 'clientMessageId' in message ? message.clientMessageId : undefined;\n  const content = 'content' in message ? message.content : undefined;\n  const onRemoveClick = useCallback(() => {\n    if (onDeleteMessage && message.messageId) {\n      onDeleteMessage(message.messageId);\n    }\n    // when fail to send, message does not have message id, delete message using clientMessageId\n    else if (onDeleteMessage && message.messageType === 'chat' && clientMessageId) {\n      onDeleteMessage(clientMessageId);\n    }\n  }, [onDeleteMessage, message.messageId, message.messageType, clientMessageId]);\n  const onResendClick = useCallback(() => {\n    onDeleteMessage && clientMessageId && onDeleteMessage(clientMessageId);\n    onSendMessage && onSendMessage(content !== undefined ? content : '');\n  }, [clientMessageId, content, onSendMessage, onDeleteMessage]);\n  if (isEditing && message.messageType === 'chat') {\n    return <ChatMessageComponentAsEditBox message={message} strings={props.strings} onSubmit={async (text, metadata, options) => {\n      props.onUpdateMessage && message.messageId && (await props.onUpdateMessage(message.messageId, text, metadata, options));\n      setIsEditing(false);\n    }} onCancel={messageId => {\n      props.onCancelEditMessage && props.onCancelEditMessage(messageId);\n      setIsEditing(false);\n    }} />;\n  } else {\n    return <ChatMessageComponentAsMessageBubble {...props} onRemoveClick={onRemoveClick} onEditClick={onEditClick} onResendClick={onResendClick} onRenderAvatar={props.onRenderAvatar} strings={props.strings}\n    /* @conditional-compile-remove(image-overlay) */ inlineImageOptions={props.inlineImageOptions} />;\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { MessageStatus, _formatString } from '@internal/acs-ui-common';\nimport React, { useCallback, useMemo } from 'react';\nimport { MessageProps, _ChatMessageProps } from '../MessageThread';\nimport { ChatMessage } from '../../types';\nimport { gutterWithAvatar, gutterWithHiddenAvatar, noMessageStatusStyle, useChatMessageRenderStyles } from '../styles/MessageThread.styles';\nimport { IPersona, PersonaSize, mergeStyles, Persona } from '@fluentui/react';\nimport { mergeClasses } from '@fluentui/react-components';\nimport { createStyleFromV8Style } from '../styles/v8StyleShim';\nimport { MessageStatusIndicatorProps } from '../MessageStatusIndicator';\nimport { ChatMessageComponentWrapperProps } from './ChatMessageComponentWrapper';\nimport { ChatMessageComponent } from './ChatMessageComponent';\nimport { ChatMessage as FluentChatMessage, ChatMyMessage as FluentChatMyMessage } from '@fluentui-contrib/react-chat';\n\n/**\n * Props for {@link FluentChatMessageComponentWrapper}\n *\n * @private\n */\ntype FluentChatMessageComponentWrapperProps = ChatMessageComponentWrapperProps & {\n  message: ChatMessage;\n};\n\n/**\n * The component for rendering a chat message using Fluent UI components\n * and handling default and custom renderers.\n * This component handles rendering for chat message body, avatar and message status.\n * The chat message body, avatar and message status should be shown for both default and custom renderers.\n *\n * @private\n */\nexport const FluentChatMessageComponentWrapper = (props: FluentChatMessageComponentWrapperProps): JSX.Element => {\n  const {\n    message,\n    styles,\n    shouldOverlapAvatarAndMessage,\n    onRenderMessage,\n    onRenderAvatar,\n    showMessageStatus,\n    onRenderMessageStatus,\n    participantCount,\n    readCount,\n    onActionButtonClick,\n    /* @conditional-compile-remove(image-overlay) */\n    inlineImageOptions,\n    userId,\n    defaultStatusRenderer,\n    statusToRender\n  } = props;\n  const chatMessageRenderStyles = useChatMessageRenderStyles();\n  const onRenderFileDownloadsMemo = useMemo(() => {\n    return undefined;\n  }, []);\n\n  // To rerender the defaultChatMessageRenderer if app running across days(every new day chat time stamp\n  // needs to be regenerated), the dependency on \"new Date().toDateString()\"\" is added.\n  const defaultChatMessageRenderer = useCallback((messageProps: MessageProps) => {\n    if (messageProps.message.messageType === 'chat') {\n      return <ChatMessageComponent {...messageProps} message={messageProps.message} userId={userId} remoteParticipantsCount={participantCount ? participantCount - 1 : 0} shouldOverlapAvatarAndMessage={shouldOverlapAvatarAndMessage} onRenderAvatar={onRenderAvatar} showMessageStatus={showMessageStatus} messageStatus={messageProps.message.status} onActionButtonClick={onActionButtonClick} /* @conditional-compile-remove(image-overlay) */\n      inlineImageOptions={inlineImageOptions} />;\n    }\n    return <></>;\n  }, [onActionButtonClick, onRenderAvatar, onRenderFileDownloadsMemo, participantCount, shouldOverlapAvatarAndMessage, showMessageStatus, userId, /* @conditional-compile-remove(image-overlay) */\n  inlineImageOptions,\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  new Date().toDateString()]);\n  const messageRenderer = useCallback((messageProps: MessageProps) => {\n    return onRenderMessage === undefined ? defaultChatMessageRenderer({\n      ...messageProps\n    }) : onRenderMessage(messageProps, defaultChatMessageRenderer);\n  }, [defaultChatMessageRenderer, onRenderMessage]);\n  const messageStatusRenderer = useCallback((onRenderMessageStatus: ((messageStatusIndicatorProps: MessageStatusIndicatorProps) => JSX.Element | null) | undefined, defaultStatusRenderer: (message: ChatMessage, participantCount: number, readCount: number, status?: MessageStatus) => JSX.Element, showMessageStatus?: boolean, participantCount?: number, readCount?: number) => {\n    return showMessageStatus && statusToRender ? onRenderMessageStatus ? onRenderMessageStatus({\n      status: message.status\n    }) : defaultStatusRenderer(message, participantCount ?? 0, readCount ?? 0, message.status) : <div className={mergeStyles(noMessageStatusStyle)} />;\n  }, [message, statusToRender]);\n  const shouldShowAvatar = useMemo(() => {\n    return message.attached === 'top' || message.attached === false;\n  }, [message.attached]);\n  const attached = useMemo(() => {\n    return shouldShowAvatar ? 'top' : 'center';\n  }, [shouldShowAvatar]);\n  const myMessageRootProps = useMemo(() => {\n    return {\n      // myChatItemMessageContainer used in className and style prop as style prop can't handle CSS selectors\n      className: mergeClasses(chatMessageRenderStyles.rootMyMessage, chatMessageRenderStyles.rootCommon, mergeStyles(styles?.myChatItemMessageContainer)),\n      style: styles?.myChatItemMessageContainer !== undefined ? createStyleFromV8Style(styles?.myChatItemMessageContainer) : {},\n      role: 'none'\n    };\n  }, [chatMessageRenderStyles.rootCommon, chatMessageRenderStyles.rootMyMessage, styles?.myChatItemMessageContainer]);\n  const myMessageBodyProps = useMemo(() => {\n    return {\n      className: mergeClasses(chatMessageRenderStyles.bodyCommon, chatMessageRenderStyles.bodyMyMessage),\n      // make body not focusable to remove repetitions from narrators.\n      // inner components are already focusable\n      tabIndex: -1,\n      role: 'none'\n    };\n  }, [chatMessageRenderStyles.bodyCommon, chatMessageRenderStyles.bodyMyMessage]);\n  const myMessageStatusIcon = useMemo(() => {\n    return <div className={mergeStyles({\n      paddingLeft: '0.25rem'\n    }, styles?.messageStatusContainer ? styles.messageStatusContainer(message.mine ?? false) : '')}>\n        {message.status ? messageStatusRenderer(onRenderMessageStatus, defaultStatusRenderer, showMessageStatus, participantCount, readCount) : undefined}\n      </div>;\n  }, [defaultStatusRenderer, message.mine, message.status, messageStatusRenderer, onRenderMessageStatus, participantCount, readCount, showMessageStatus, styles]);\n  const messageRootProps = useMemo(() => {\n    return {\n      className: mergeClasses(chatMessageRenderStyles.rootMessage, chatMessageRenderStyles.rootCommon)\n    };\n  }, [chatMessageRenderStyles.rootCommon, chatMessageRenderStyles.rootMessage]);\n  const messageBodyProps = useMemo(() => {\n    return {\n      // chatItemMessageContainer used in className and style prop as style prop can't handle CSS selectors\n      className: mergeClasses(chatMessageRenderStyles.bodyCommon, !shouldShowAvatar ? chatMessageRenderStyles.bodyWithoutAvatar : chatMessageRenderStyles.bodyWithAvatar, shouldOverlapAvatarAndMessage ? chatMessageRenderStyles.avatarOverlap : chatMessageRenderStyles.avatarNoOverlap, mergeStyles(styles?.chatItemMessageContainer)),\n      style: styles?.chatItemMessageContainer !== undefined ? createStyleFromV8Style(styles?.chatItemMessageContainer) : {},\n      // make body not focusable to remove repetitions from narrators.\n      // inner components are already focusable\n      tabIndex: -1,\n      role: 'none'\n    };\n  }, [chatMessageRenderStyles.avatarNoOverlap, chatMessageRenderStyles.avatarOverlap, chatMessageRenderStyles.bodyCommon, chatMessageRenderStyles.bodyWithAvatar, chatMessageRenderStyles.bodyWithoutAvatar, shouldOverlapAvatarAndMessage, shouldShowAvatar, styles?.chatItemMessageContainer]);\n  const avatar = useMemo(() => {\n    const chatAvatarStyle = shouldShowAvatar ? gutterWithAvatar : gutterWithHiddenAvatar;\n    const personaOptions: IPersona = {\n      hidePersonaDetails: true,\n      size: PersonaSize.size32,\n      text: message.senderDisplayName,\n      showOverflowTooltip: false\n    };\n    return <div className={mergeStyles(chatAvatarStyle)}>\n        {onRenderAvatar ? onRenderAvatar?.(message.senderId, personaOptions) : <Persona {...personaOptions} />}\n      </div>;\n  }, [message.senderDisplayName, message.senderId, onRenderAvatar, shouldShowAvatar]);\n\n  // Fluent UI message components are used here as for default message renderer,\n  // timestamp and author name should be shown but they aren't shown for custom renderer.\n  // More investigations are needed to check if this can be simplified with states.\n  // Status and avatar should be shown for both custom and default renderers.\n  if (message.mine === true) {\n    return <div>\n        <FluentChatMyMessage attached={attached} root={myMessageRootProps} body={myMessageBodyProps} statusIcon={myMessageStatusIcon}>\n          {messageRenderer({\n          ...props\n        })}\n        </FluentChatMyMessage>\n      </div>;\n  } else {\n    return <div>\n        <FluentChatMessage attached={attached} root={messageRootProps} body={messageBodyProps} avatar={avatar}>\n          {messageRenderer({\n          ...props\n        })}\n        </FluentChatMessage>\n      </div>;\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const systemMessageIconStyle = mergeStyles({\n  marginInlineEnd: '0.688rem'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, FontIcon, mergeStyles, Stack, Text } from '@fluentui/react';\nimport React from 'react';\nimport { systemMessageIconStyle } from './styles/SystemMessage.styles';\nimport { ComponentSlotStyle } from '../types';\n\n/**\n * Todo: We need to add more types of system messages that we support.\n *\n * @private\n */\nexport type SystemMessageIconTypes = 'PeopleAdd' | 'PeopleBlock' | 'Edit';\n\n/**\n * @private\n */\nexport type SystemMessageProps = {\n  /**\n   * Icon name for the system message.\n   */\n  iconName: SystemMessageIconTypes;\n  /**\n   * Content string for the system message.\n   */\n  content: string;\n  /*\n   * Custom CSS Style for the system message container.\n   */\n  containerStyle?: ComponentSlotStyle;\n};\n\n/**\n * @private\n */\nexport const SystemMessage = (props: SystemMessageProps): JSX.Element => {\n  const {\n    iconName,\n    content\n  } = props;\n  const Icon: JSX.Element = <FontIcon iconName={iconName} className={mergeStyles(systemMessageIconStyle)} />;\n  return <Stack horizontal className={mergeStyles((props?.containerStyle as IStyle))} tabIndex={0}>\n      {Icon}\n      <Text style={{\n      wordBreak: 'break-word'\n    }} role=\"status\" title={content} variant={'small'}>\n        {content}\n      </Text>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _formatString } from '@internal/acs-ui-common';\nimport React from 'react';\nimport { MessageProps, MessageRenderer, _ChatMessageProps } from '../MessageThread';\nimport { CommunicationParticipant, ComponentSlotStyle, ParticipantAddedSystemMessage, ParticipantRemovedSystemMessage } from '../../types';\nimport { SystemMessage as SystemMessageComponent, SystemMessageIconTypes } from './../SystemMessage';\nimport { useLocale } from '../../localization/LocalizationProvider';\n\n/**\n * @private\n */\nexport const DefaultSystemMessage: MessageRenderer = (props: MessageProps) => {\n  const message = props.message;\n  switch (message.messageType) {\n    case 'system':\n      switch (message.systemMessageType) {\n        case 'content':\n          return <SystemMessageComponent iconName={((message.iconName ? message.iconName : '') as SystemMessageIconTypes)} content={message.content ?? ''} containerStyle={props?.messageContainerStyle} />;\n        case 'participantAdded':\n        case 'participantRemoved':\n          return <ParticipantSystemMessageComponent message={message} style={props.messageContainerStyle} defaultName={props.strings.noDisplayNameSub} />;\n      }\n  }\n  return <></>;\n};\nconst ParticipantSystemMessageComponent = ({\n  message,\n  style,\n  defaultName\n}: {\n  message: ParticipantAddedSystemMessage | ParticipantRemovedSystemMessage;\n  style?: ComponentSlotStyle;\n  defaultName: string;\n}): JSX.Element => {\n  const {\n    strings\n  } = useLocale();\n  const participantsStr = generateParticipantsStr(message.participants, defaultName);\n  const messageSuffix = message.systemMessageType === 'participantAdded' ? strings.messageThread.participantJoined : strings.messageThread.participantLeft;\n  if (participantsStr !== '') {\n    return <SystemMessageComponent iconName={((message.iconName ? message.iconName : '') as SystemMessageIconTypes)} content={`${participantsStr} ${messageSuffix}`} containerStyle={style} />;\n  }\n  return <></>;\n};\nconst generateParticipantsStr = (participants: CommunicationParticipant[], defaultName: string): string => participants.map(participant => `${!participant.displayName || participant.displayName === '' ? defaultName : participant.displayName}`).join(', ');","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { MessageStatus } from '@internal/acs-ui-common';\nimport React, { useMemo } from 'react';\nimport { MessageProps, MessageRenderer, MessageThreadStyles, _ChatMessageProps } from '../MessageThread';\nimport { ChatMessage, OnRenderAvatarCallback } from '../../types';\nimport { MessageStatusIndicatorProps } from '../MessageStatusIndicator';\nimport { FluentChatMessageComponentWrapper } from './FluentChatMessageComponentWrapper';\nimport { DefaultSystemMessage } from './DefaultSystemMessage';\n/* @conditional-compile-remove(image-overlay) */\nimport { InlineImageOptions } from './ChatMessageContent';\n\n/**\n * Props for {@link ChatMessageComponentWrapper}\n *\n * @private\n */\nexport type ChatMessageComponentWrapperProps = _ChatMessageProps & {\n  /**\n   * UserId of the current user.\n   */\n  userId: string;\n  styles: MessageThreadStyles | undefined;\n  shouldOverlapAvatarAndMessage: boolean;\n  onRenderMessageStatus: ((messageStatusIndicatorProps: MessageStatusIndicatorProps) => JSX.Element | null) | undefined;\n  defaultStatusRenderer: (message: ChatMessage, participantCount: number, readCount: number, status?: MessageStatus) => JSX.Element;\n  onRenderMessage?: (messageProps: MessageProps, messageRenderer?: MessageRenderer) => JSX.Element;\n  onRenderAvatar?: OnRenderAvatarCallback;\n  showMessageStatus?: boolean;\n  participantCount?: number;\n  readCount?: number;\n  onActionButtonClick: (message: ChatMessage, setMessageReadBy: (readBy: {\n    id: string;\n    displayName: string;\n  }[]) => void) => void;\n  /* @conditional-compile-remove(image-overlay) */\n  inlineImageOptions?: InlineImageOptions;\n};\n\n/**\n * The wrapper component to display different types of chat message.\n *\n * @private\n */\nexport const ChatMessageComponentWrapper = (props: ChatMessageComponentWrapperProps): JSX.Element => {\n  const {\n    message,\n    styles,\n    onRenderMessage,\n    key: messageKey\n  } = props;\n  const systemMessageStyle = useMemo(() => {\n    return {\n      paddingTop: '0.5rem'\n    };\n  }, []);\n  const customMessageStyle = useMemo(() => {\n    return {\n      paddingTop: '1rem',\n      paddingBottom: '0.25rem'\n    };\n  }, []);\n  switch (message.messageType) {\n    case 'chat':\n      {\n        const myChatMessageStyle = message.status === 'failed' ? styles?.failedMyChatMessageContainer ?? styles?.myChatMessageContainer : styles?.myChatMessageContainer;\n        const chatMessageStyle = styles?.chatMessageContainer;\n        const messageContainerStyle = message.mine ? myChatMessageStyle : chatMessageStyle;\n        return <FluentChatMessageComponentWrapper {...props} message={message} messageContainerStyle={messageContainerStyle} />;\n      }\n    case 'system':\n      {\n        const messageContainerStyle = styles?.systemMessageContainer;\n        const systemMessageComponent = onRenderMessage === undefined ? <DefaultSystemMessage {...props} /> : onRenderMessage({\n          ...props,\n          messageContainerStyle\n        }, props => <DefaultSystemMessage {...props} />);\n        return <div key={messageKey} style={systemMessageStyle}>\n          {systemMessageComponent}\n        </div>;\n      }\n    default:\n      {\n        // We do not handle custom type message by default, users can handle custom type by using onRenderMessage function.\n        const customMessageComponent = onRenderMessage === undefined ? <></> : onRenderMessage({\n          ...props\n        });\n        return <div key={messageKey} style={customMessageStyle}>\n          {customMessageComponent}\n        </div>;\n      }\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles, Stack } from '@fluentui/react';\nimport React from 'react';\n\n/**\n * @internal\n *  aria props for this hidden component.\n */\nexport type AnnouncerProps = {\n  announcementString?: string;\n  ariaLive: 'off' | 'polite' | 'assertive' | undefined;\n};\n\n/**\n * @internal\n * Announcer component to maker aria announcements on actions\n */\nexport const Announcer = (props: AnnouncerProps): JSX.Element => {\n  const {\n    announcementString,\n    ariaLive\n  } = props;\n  return <Stack aria-label={announcementString} aria-live={ariaLive} styles={announcerStyles}></Stack>;\n};\n\n/**\n * Styles to hide the announcer from view but still existing on the DOM tree it so that narration can happen.\n */\nconst announcerStyles: IStackStyles = {\n  root: {\n    position: 'absolute',\n    width: '1px',\n    height: '1px',\n    padding: 0,\n    margin: '-1px',\n    overflow: 'hidden',\n    clip: 'rect(0,0,0,0)',\n    whiteSpace: 'nowrap',\n    border: 0\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Icon, IStyle, mergeStyles, PrimaryButton } from '@fluentui/react';\nimport { Chat } from '@fluentui-contrib/react-chat';\nimport { mergeClasses } from '@fluentui/react-components';\nimport { DownIconStyle, newMessageButtonContainerStyle, messageThreadContainerStyle, messageThreadWrapperContainerStyle, useChatStyles, buttonWithIconStyles, newMessageButtonStyle } from './styles/MessageThread.styles';\nimport { delay } from './utils/delay';\nimport { BaseCustomStyles, ChatMessage, CustomMessage, SystemMessage, OnRenderAvatarCallback, Message, ReadReceiptsBySenderId, ComponentSlotStyle } from '../types';\nimport { MessageStatusIndicatorProps } from './MessageStatusIndicator';\nimport { memoizeFnAll, MessageStatus } from '@internal/acs-ui-common';\nimport { useLocale } from '../localization/LocalizationProvider';\nimport { isNarrowWidth, _useContainerWidth } from './utils/responsive';\nimport getParticipantsWhoHaveReadMessage from './utils/getParticipantsWhoHaveReadMessage';\nimport { useTheme } from '../theming';\nimport { FluentV9ThemeProvider } from './../theming/FluentV9ThemeProvider';\nimport LiveAnnouncer from './Announcer/LiveAnnouncer';\nimport { createStyleFromV8Style } from './styles/v8StyleShim';\nimport { ChatMessageComponentWrapper, ChatMessageComponentWrapperProps } from './ChatMessage/ChatMessageComponentWrapper';\n/* @conditional-compile-remove(image-overlay) */\nimport { InlineImageOptions } from './ChatMessage/ChatMessageContent';\nimport { MessageStatusIndicatorInternal } from './MessageStatusIndicatorInternal';\nimport { Announcer } from './Announcer';\nconst isMessageSame = (first: ChatMessage, second: ChatMessage): boolean => {\n  return first.messageId === second.messageId && first.content === second.content && first.contentType === second.contentType && JSON.stringify(first.createdOn) === JSON.stringify(second.createdOn) && first.senderId === second.senderId && first.senderDisplayName === second.senderDisplayName && JSON.stringify(first.editedOn) === JSON.stringify(second.editedOn);\n};\n\n/**\n * Get the latest message from the message array.\n *\n * @param messages\n */\nconst getLatestChatMessage = (messages: Message[]): ChatMessage | undefined => {\n  for (let i = messages.length - 1; i >= 0; i--) {\n    const message = messages[i];\n    if (message.messageType === 'chat' && !!message.createdOn) {\n      return message;\n    }\n  }\n  return undefined;\n};\n\n/**\n * Compare latestMessageFromPreviousMessages & latestMessageFromNewMessages to see if the new message is not from\n * current user.\n */\nconst isThereNewMessageNotFromCurrentUser = (userId: string, latestMessageFromPreviousMessages?: ChatMessage, latestMessageFromNewMessages?: ChatMessage): boolean => {\n  if (latestMessageFromNewMessages === undefined) {\n    return false;\n  }\n  if (latestMessageFromPreviousMessages === undefined) {\n    return latestMessageFromNewMessages.senderId !== userId;\n  }\n  return !isMessageSame(latestMessageFromNewMessages, latestMessageFromPreviousMessages) && latestMessageFromNewMessages.senderId !== userId;\n};\n\n/**\n * Returns true if the current user sent the latest message and false otherwise. It will ignore messages that have no\n * sender, messages that have failed to send, and messages from the current user that is marked as SEEN. This is meant\n * as an indirect way to detect if user is at bottom of the chat when the component updates with new messages. If we\n * updated this component due to current user sending a message we want to then call scrollToBottom.\n */\nconst didUserSendTheLatestMessage = (userId: string, latestMessageFromPreviousMessages?: ChatMessage, latestMessageFromNewMessages?: ChatMessage): boolean => {\n  if (latestMessageFromNewMessages === undefined) {\n    return false;\n  }\n  if (latestMessageFromPreviousMessages === undefined) {\n    return latestMessageFromNewMessages.senderId === userId;\n  }\n  return !isMessageSame(latestMessageFromNewMessages, latestMessageFromPreviousMessages) && latestMessageFromNewMessages.senderId === userId;\n};\n\n/**\n * Fluent styles for {@link MessageThread}.\n *\n * @public\n */\nexport interface MessageThreadStyles extends BaseCustomStyles {\n  /** Styles for load previous messages container. */\n  loadPreviousMessagesButtonContainer?: IStyle;\n  /** Styles for new message container. */\n  newMessageButtonContainer?: IStyle;\n  /** Styles for chat container. */\n  chatContainer?: ComponentSlotStyle;\n  /** styles for my chat items.  */\n  myChatItemMessageContainer?: ComponentSlotStyle;\n  /** styles for chat items.  */\n  chatItemMessageContainer?: ComponentSlotStyle;\n  /** Styles for my chat message container. */\n  myChatMessageContainer?: ComponentSlotStyle;\n  /** Styles for my chat message container in case of failure. */\n  failedMyChatMessageContainer?: ComponentSlotStyle;\n  /** Styles for chat message container. */\n  chatMessageContainer?: ComponentSlotStyle;\n  /** Styles for system message container. */\n  systemMessageContainer?: ComponentSlotStyle;\n  /** Styles for blocked message container. */\n  /** Styles for message status indicator container. */\n  messageStatusContainer?: (mine: boolean) => IStyle;\n}\n\n/**\n * Strings of {@link MessageThread} that can be overridden.\n *\n * @public\n */\nexport interface MessageThreadStrings {\n  /** String for Sunday */\n  sunday: string;\n  /** String for Monday */\n  monday: string;\n  /** String for Tuesday */\n  tuesday: string;\n  /** String for Wednesday */\n  wednesday: string;\n  /** String for Thursday */\n  thursday: string;\n  /** String for Friday */\n  friday: string;\n  /** String for Saturday */\n  saturday: string;\n  /** String for Yesterday */\n  yesterday: string;\n  /** String for participants joined */\n  participantJoined: string;\n  /** String for participants left */\n  participantLeft: string;\n  /** Tag shown on a message that has been edited */\n  editedTag: string;\n  /** String for editing message in floating menu */\n  editMessage: string;\n  /** String for removing message in floating menu */\n  removeMessage: string;\n  /** String for resending failed message in floating menu */\n  resendMessage?: string;\n  /** String for indicating failed to send messages */\n  failToSendTag?: string;\n  /** String for LiveMessage introduction for the Chat Message */\n  liveAuthorIntro: string;\n  /** String for aria text of remote user's message content */\n  messageContentAriaText: string;\n  /** String for aria text of local user's message content */\n  messageContentMineAriaText: string;\n  /** String for warning on text limit exceeded in EditBox*/\n  editBoxTextLimit: string;\n  /** String for placeholder text in EditBox when there is no user input*/\n  editBoxPlaceholderText: string;\n  /** String for new messages indicator*/\n  newMessagesIndicator: string;\n  /** String for showing message read status in floating menu */\n  messageReadCount?: string;\n  /** String for replacing display name when there is none*/\n  noDisplayNameSub: string;\n  /** String for Cancel button in EditBox*/\n  editBoxCancelButton: string;\n  /** String for Submit in EditBox when there is no user input*/\n  editBoxSubmitButton: string;\n  /** String for action menu indicating there are more options */\n  actionMenuMoreOptions?: string;\n  /** Aria label to announce when a message is deleted */\n  messageDeletedAnnouncementAriaLabel: string;\n}\n\n/**\n * Arguments for {@link MessageThreadProps.onRenderJumpToNewMessageButton}.\n *\n * @public\n */\nexport interface JumpToNewMessageButtonProps {\n  /** String for button text */\n  text: string;\n  /** Callback for when button is clicked */\n  onClick: () => void;\n}\nconst DefaultJumpToNewMessageButton = (props: JumpToNewMessageButtonProps): JSX.Element => {\n  const {\n    text,\n    onClick\n  } = props;\n  return <PrimaryButton className={newMessageButtonStyle} styles={buttonWithIconStyles} text={text} onClick={onClick} onRenderIcon={() => <Icon iconName=\"Down\" className={DownIconStyle} />} />;\n};\n\n/**\n * A component to render a single message.\n *\n * @public\n */\nexport type MessageRenderer = (props: MessageProps) => JSX.Element;\nconst memoizeAllMessages = memoizeFnAll((message: Message, showMessageDate: boolean, showMessageStatus: boolean, strings: MessageThreadStrings, index: number, onUpdateMessage?: UpdateMessageCallback, onCancelEditMessage?: CancelEditCallback, onDeleteMessage?: (messageId: string) => Promise<void>, onSendMessage?: (content: string) => Promise<void>, disableEditing?: boolean, lastSeenChatMessage?: string, lastSendingChatMessage?: string, lastDeliveredChatMessage?: string): _ChatMessageProps => {\n  let key: string | undefined = message.messageId;\n  let statusToRender: MessageStatus | undefined = undefined;\n  if (message.messageType === 'chat') {\n    if ((!message.messageId || message.messageId === '') && 'clientMessageId' in message) {\n      key = message.clientMessageId;\n    }\n    if (showMessageStatus && message.mine) {\n      switch (message.messageId) {\n        case lastSeenChatMessage:\n          {\n            statusToRender = 'seen';\n            break;\n          }\n        case lastSendingChatMessage:\n          {\n            statusToRender = 'sending';\n            break;\n          }\n        case lastDeliveredChatMessage:\n          {\n            statusToRender = 'delivered';\n            break;\n          }\n      }\n    }\n    if (message.mine && message.status === 'failed') {\n      statusToRender = 'failed';\n    }\n  }\n  return {\n    key: key ?? 'id_' + index,\n    statusToRender,\n    message,\n    strings,\n    showDate: showMessageDate,\n    onUpdateMessage,\n    onCancelEditMessage,\n    onDeleteMessage,\n    onSendMessage,\n    disableEditing,\n    showMessageStatus\n  };\n});\nconst getLastChatMessageIdWithStatus = (messages: Message[], status: MessageStatus): string | undefined => {\n  for (let i = messages.length - 1; i >= 0; i--) {\n    const message = messages[i];\n    if (message.messageType === 'chat' && message.status === status && message.mine) {\n      return message.messageId;\n    }\n  }\n  return undefined;\n};\nconst getLastChatMessageForCurrentUser = (messages: Message[]): ChatMessage | undefined => {\n  for (let i = messages.length - 1; i >= 0; i--) {\n    const message = messages[i];\n    if (message.messageType === 'chat' && message.mine) {\n      return message;\n    }\n  }\n  return undefined;\n};\n\n/**\n * @public\n * Callback function run when a message is updated.\n */\nexport type UpdateMessageCallback = (messageId: string, content: string) => Promise<void>;\n/**\n * @public\n * Callback function run when a message edit is cancelled.\n */\nexport type CancelEditCallback = (messageId: string) => void;\n\n/**\n * Props for {@link MessageThread}.\n *\n * @public\n */\nexport type MessageThreadProps = {\n  /**\n   * UserId of the current user.\n   */\n  userId: string;\n  /**\n   * Messages to render in message thread. A message can be of type `ChatMessage`, `SystemMessage`, `BlockedMessage` or `CustomMessage`.\n   */\n  messages: (ChatMessage | SystemMessage | CustomMessage)[];\n  /**\n   * number of participants in the thread\n   */\n  participantCount?: number;\n  /**\n   * read receipts for each sender in the chat\n   */\n  readReceiptsBySenderId?: ReadReceiptsBySenderId;\n  /**\n   * Allows users to pass an object containing custom CSS styles.\n   * @Example\n   * ```\n   * <MessageThread styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: MessageThreadStyles;\n  /**\n   * Whether the new message button is disabled or not.\n   *\n   * @defaultValue `false`\n   */\n  disableJumpToNewMessageButton?: boolean;\n  /**\n   * Whether the date of each message is displayed or not.\n   * It is ignored when onDisplayDateTimeString is supplied.\n   *\n   * @defaultValue `false`\n   */\n  showMessageDate?: boolean;\n  /**\n   * Whether the status indicator for each message is displayed or not.\n   *\n   * @defaultValue `false`\n   */\n  showMessageStatus?: boolean;\n  /**\n   * Number of chat messages to reload each time onLoadPreviousChatMessages is called.\n   *\n   * @defaultValue 0\n   */\n  numberOfChatMessagesToReload?: number;\n  /**\n   * Optional callback to override actions on message being seen.\n   *\n   * @param messageId - message Id\n   */\n  onMessageSeen?: (messageId: string) => Promise<void>;\n  /**\n   * Optional callback to override render of the message status indicator.\n   *\n   * @param messageStatusIndicatorProps - props of type MessageStatusIndicatorProps\n   */\n  onRenderMessageStatus?: (messageStatusIndicatorProps: MessageStatusIndicatorProps) => JSX.Element | null;\n  /**\n   * Optional callback to override render of the avatar.\n   *\n   * @param userId - user Id\n   */\n  onRenderAvatar?: OnRenderAvatarCallback;\n  /**\n   * Optional callback to override render of the button for jumping to the new message.\n   *\n   * @param newMessageButtonProps - button props of type JumpToNewMessageButtonProps 0  */\n  onRenderJumpToNewMessageButton?: (newMessageButtonProps: JumpToNewMessageButtonProps) => JSX.Element;\n  /**\n   * Optional callback to override loading of previous messages.\n   * It accepts the number of history chat messages that we want to load and return a boolean Promise indicating if we have got all the history messages.\n   * If the promise resolves to `true`, we have load all chat messages into the message thread and `loadPreviousMessagesButton` will not be rendered anymore.\n   */\n  onLoadPreviousChatMessages?: (messagesToLoad: number) => Promise<boolean>;\n  /**\n   * Optional callback to override render of a message.\n   *\n   * @param messageProps - props of type {@link communication-react#MessageProps}\n   * @param defaultOnRender - default render of type {@link communication-react#MessageRenderer}\n   *\n   * @remarks\n   * `messageRenderer` is not provided for `CustomMessage` and thus only available for `ChatMessage` and `SystemMessage`.\n   */\n  onRenderMessage?: (messageProps: MessageProps, messageRenderer?: MessageRenderer) => JSX.Element;\n  /**\n   * Optional callback to edit a message.\n   *\n   * @param messageId - message id from chatClient\n   * @param content - new content of the message\n   *\n   */\n  onUpdateMessage?: UpdateMessageCallback;\n\n  /**\n   * Optional callback for when a message edit is cancelled.\n   *\n   * @param messageId - message id from chatClient\n   */\n  onCancelEditMessage?: CancelEditCallback;\n  /**\n   * Optional callback to delete a message.\n   *\n   * @param messageId - message id from chatClient\n   *\n   */\n  onDeleteMessage?: (messageId: string) => Promise<void>;\n\n  /**\n   * Optional callback to send a message.\n   *\n   * @param content - message body to send\n   *\n   */\n  onSendMessage?: (content: string) => Promise<void>;\n\n  /**\n  /**\n   * Disable editing messages.\n   *\n   * @remarks This removes the action menu on messages.\n   *\n   * @defaultValue `false`\n   */\n  disableEditing?: boolean;\n\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<MessageThreadStrings>;\n  /* @conditional-compile-remove(image-overlay) */\n  /**\n   * Optional callback called when an inline image is clicked.\n   * @beta\n   */\n  inlineImageOptions?: InlineImageOptions;\n};\n\n/**\n * Props to render a single message.\n *\n * See {@link MessageRenderer}.\n *\n * @public\n */\nexport type MessageProps = {\n  /**\n   * Message to render. It can type `ChatMessage` or `SystemMessage`, `BlockedMessage` or `CustomMessage`.\n   */\n  message: Message;\n  /**\n   * Strings from parent MessageThread component\n   */\n  strings: MessageThreadStrings;\n  /**\n   * Custom CSS styles for chat message container.\n   */\n  messageContainerStyle?: ComponentSlotStyle;\n  /**\n   * Whether the date of a message is displayed or not.\n   *\n   * @defaultValue `false`\n   */\n  showDate?: boolean;\n  /**\n   * Disable editing messages.\n   *\n   * @remarks This removes the action menu on messages.\n   *\n   * @defaultValue `false`\n   */\n  disableEditing?: boolean;\n  /**\n   * Optional callback to edit a message.\n   *\n   * @param messageId - message id from chatClient\n   * @param content - new content of the message\n   */\n  onUpdateMessage?: UpdateMessageCallback;\n\n  /**\n   * Optional callback for when a message edit is cancelled.\n   *\n   * @param messageId - message id from chatClient\n   */\n  onCancelEditMessage?: CancelEditCallback;\n  /**\n   * Optional callback to delete a message.\n   *\n   * @param messageId - message id from chatClient\n   *\n   */\n  onDeleteMessage?: (messageId: string) => Promise<void>;\n\n  /**\n   * Optional callback to send a message.\n   *\n   * @param messageId - message id from chatClient\n   *\n   */\n  onSendMessage?: (messageId: string) => Promise<void>;\n};\n\n/**\n * @internal\n */\nexport type _ChatMessageProps = MessageProps & {\n  key: string;\n  statusToRender: MessageStatus | undefined;\n  showMessageStatus?: boolean;\n};\n\n/**\n * `MessageThread` allows you to easily create a component for rendering chat messages, handling scrolling behavior of new/old messages and customizing icons & controls inside the chat thread.\n * @param props - of type MessageThreadProps\n *\n * Users will need to provide at least chat messages and userId to render the `MessageThread` component.\n * Users can also customize `MessageThread` by passing in their own Avatar, `MessageStatusIndicator` icon, `JumpToNewMessageButton`, `LoadPreviousMessagesButton` and the behavior of these controls.\n *\n * `MessageThread` internally uses the `Chat` component from `@fluentui-contrib/chat`. You can checkout the details about these components [here](https://microsoft.github.io/fluentui-contrib/react-chat/).\n *\n * @public\n */\nexport const MessageThread = (props: MessageThreadProps): JSX.Element => {\n  const theme = useTheme();\n  const chatBody = useMemo(() => {\n    return <FluentV9ThemeProvider v8Theme={theme}>\n        {/* Wrapper is required to call \"useClasses\" hook with proper context values */}\n        <MessageThreadWrapper {...props} />\n      </FluentV9ThemeProvider>;\n  }, [theme, props]);\n  return <div className={mergeStyles(messageThreadContainerStyle, props.styles?.root)}>{chatBody}</div>;\n};\n\n/**\n * @private\n */\nexport const MessageThreadWrapper = (props: MessageThreadProps): JSX.Element => {\n  const {\n    messages: newMessages,\n    userId,\n    participantCount,\n    readReceiptsBySenderId,\n    styles,\n    disableJumpToNewMessageButton = false,\n    showMessageDate = false,\n    showMessageStatus = false,\n    numberOfChatMessagesToReload = 5,\n    onMessageSeen,\n    onRenderMessageStatus,\n    onRenderAvatar,\n    onLoadPreviousChatMessages,\n    onRenderJumpToNewMessageButton,\n    onRenderMessage,\n    onUpdateMessage,\n    onCancelEditMessage,\n    onDeleteMessage,\n    onSendMessage,\n    /* @conditional-compile-remove(image-overlay) */\n    inlineImageOptions\n  } = props;\n  // We need this state to wait for one tick and scroll to bottom after messages have been initialized.\n  // Otherwise chatScrollDivRef.current.clientHeight is wrong if we scroll to bottom before messages are initialized.\n  const [chatMessagesInitialized, setChatMessagesInitialized] = useState<boolean>(false);\n  const [isAtBottomOfScroll, setIsAtBottomOfScroll] = useState<boolean>(true);\n  const [forceUpdate, setForceUpdate] = useState<number>(0);\n\n  // Used to decide if should auto scroll to bottom or show \"new message\" button\n  const [latestPreviousChatMessage, setLatestPreviousChatMessage] = useState<ChatMessage | undefined>(undefined);\n  const [latestCurrentChatMessage, setLatestCurrentChatMessage] = useState<ChatMessage | undefined>(undefined);\n  const [existsNewChatMessage, setExistsNewChatMessage] = useState<boolean>(false);\n  const [lastSeenChatMessage, setLastSeenChatMessage] = useState<string | undefined>(undefined);\n  const [lastDeliveredChatMessage, setLastDeliveredChatMessage] = useState<string | undefined>(undefined);\n  const [lastSendingChatMessage, setLastSendingChatMessage] = useState<string | undefined>(undefined);\n\n  // readCount and participantCount will only need to be updated on-fly when user hover on an indicator\n  const [readCountForHoveredIndicator, setReadCountForHoveredIndicator] = useState<number | undefined>(undefined);\n  const localeStrings = useLocale().strings.messageThread;\n  const strings = useMemo(() => ({\n    ...localeStrings,\n    ...props.strings\n  }), [localeStrings, props.strings]);\n  // it is required to use useState for messages\n  // as the scrolling logic requires re - render at a specific point in time\n  const [messages, setMessages] = useState<Message[]>([]);\n\n  // id for the latest deleted message\n  const [latestDeletedMessageId, setLatestDeletedMessageId] = useState<string | undefined>(undefined);\n  // this value is used to check if a message is deleted for the previous value of messages array\n  const previousMessagesRef = useRef<Message[]>([]);\n  // an aria label for Narrator to notify when a message is deleted\n  const [deletedMessageAriaLabel, setDeletedMessageAriaLabel] = useState<string | undefined>(undefined);\n  const onDeleteMessageCallback = useCallback(async (messageId: string): Promise<void> => {\n    if (!onDeleteMessage) {\n      return;\n    }\n    try {\n      // reset deleted message label in case if there was a value already (messages are deleted 1 after another)\n      setDeletedMessageAriaLabel(undefined);\n      setLatestDeletedMessageId(messageId);\n      lastChatMessageStatus.current = 'deleted';\n      // we should set up latestDeletedMessageId before the onDeleteMessage call\n      // as otherwise in very rare cases the messages array can be updated before latestDeletedMessageId\n      await onDeleteMessage(messageId);\n    } catch (e) {\n      console.log('onDeleteMessage failed: messageId', messageId, 'error', e);\n    }\n  }, [onDeleteMessage]);\n  const isAllChatMessagesLoadedRef = useRef(false);\n  // isAllChatMessagesLoadedRef needs to be updated every time when a new adapter is set in order to display correct data\n  // onLoadPreviousChatMessages is updated when a new adapter is set\n  useEffect(() => {\n    if (onLoadPreviousChatMessages) {\n      isAllChatMessagesLoadedRef.current = false;\n    }\n  }, [onLoadPreviousChatMessages]);\n  const previousTopRef = useRef<number>(-1);\n  const previousHeightRef = useRef<number>(-1);\n  const messageIdSeenByMeRef = useRef<string>('');\n  const chatScrollDivRef = useRef<HTMLDivElement>(null);\n  const isLoadingChatMessagesRef = useRef(false);\n  useEffect(() => {\n    if (latestDeletedMessageId === undefined) {\n      setDeletedMessageAriaLabel(undefined);\n    } else {\n      if (!previousMessagesRef.current.find(message => message.messageId === latestDeletedMessageId)) {\n        // the message is deleted in previousMessagesRef\n        // no need to update deletedMessageAriaLabel\n        setDeletedMessageAriaLabel(undefined);\n      } else if (!messages.find(message => message.messageId === latestDeletedMessageId)) {\n        // the message is deleted in messages array but still exists in previousMessagesRef\n        // update deletedMessageAriaLabel\n        setDeletedMessageAriaLabel(strings.messageDeletedAnnouncementAriaLabel);\n      } else {\n        // the message exists in both arrays\n        // no need to update deletedMessageAriaLabel\n        setDeletedMessageAriaLabel(undefined);\n      }\n    }\n    previousMessagesRef.current = messages;\n  }, [latestDeletedMessageId, messages, strings.messageDeletedAnnouncementAriaLabel]);\n  const messagesRef = useRef(messages);\n  const setMessagesRef = (messagesWithAttachedValue: Message[]): void => {\n    messagesRef.current = messagesWithAttachedValue;\n    setMessages(messagesWithAttachedValue);\n  };\n  const isAtBottomOfScrollRef = useRef(isAtBottomOfScroll);\n  const setIsAtBottomOfScrollRef = (isAtBottomOfScrollValue: boolean): void => {\n    isAtBottomOfScrollRef.current = isAtBottomOfScrollValue;\n    setIsAtBottomOfScroll(isAtBottomOfScrollValue);\n  };\n  const chatMessagesInitializedRef = useRef(chatMessagesInitialized);\n  const setChatMessagesInitializedRef = (chatMessagesInitialized: boolean): void => {\n    chatMessagesInitializedRef.current = chatMessagesInitialized;\n    setChatMessagesInitialized(chatMessagesInitialized);\n  };\n  const chatThreadRef = useRef<HTMLDivElement>(null);\n\n  // When the chat thread is narrow, we perform space optimizations such as overlapping\n  // the avatar on top of the chat message and moving the chat accept/reject edit buttons\n  // to a new line\n  const chatThreadWidth = _useContainerWidth(chatThreadRef);\n  const isNarrow = chatThreadWidth ? isNarrowWidth(chatThreadWidth) : false;\n\n  /**\n   * ClientHeight controls the number of messages to render. However ClientHeight will not be initialized after the\n   * first render (not sure but I guess Fluent is updating it in hook which is after render maybe?) so we need to\n   * trigger a re-render until ClientHeight is initialized. This force re-render should only happen once.\n   */\n  const clientHeight = chatThreadRef.current?.clientHeight;\n\n  // we try to only send those message status if user is scrolled to the bottom.\n  const sendMessageStatusIfAtBottom = useCallback(async (): Promise<void> => {\n    if (!isAtBottomOfScrollRef.current || !document.hasFocus() || !messagesRef.current || messagesRef.current.length === 0 || !showMessageStatus) {\n      return;\n    }\n    const messagesWithId = messagesRef.current.filter(message => {\n      return message.messageType === 'chat' && !message.mine && !!message.messageId;\n    });\n    if (messagesWithId.length === 0) {\n      return;\n    }\n    const lastMessage: ChatMessage = (messagesWithId[messagesWithId.length - 1] as ChatMessage);\n    try {\n      if (onMessageSeen && lastMessage && lastMessage.messageId && lastMessage.messageId !== messageIdSeenByMeRef.current) {\n        await onMessageSeen(lastMessage.messageId);\n        messageIdSeenByMeRef.current = lastMessage.messageId;\n      }\n    } catch (e) {\n      console.log('onMessageSeen Error', lastMessage, e);\n    }\n  }, [showMessageStatus, onMessageSeen]);\n  const scrollToBottom = useCallback((): void => {\n    if (chatScrollDivRef.current) {\n      chatScrollDivRef.current.scrollTop = chatScrollDivRef.current.scrollHeight;\n    }\n    setExistsNewChatMessage(false);\n    setIsAtBottomOfScrollRef(true);\n    sendMessageStatusIfAtBottom();\n  }, [sendMessageStatusIfAtBottom]);\n  const handleScrollToTheBottom = useCallback((): void => {\n    if (!chatScrollDivRef.current) {\n      return;\n    }\n    const atBottom = Math.ceil(chatScrollDivRef.current.scrollTop) >= chatScrollDivRef.current.scrollHeight - chatScrollDivRef.current.clientHeight;\n    if (atBottom) {\n      sendMessageStatusIfAtBottom();\n      if (!isAtBottomOfScrollRef.current) {\n        scrollToBottom();\n      }\n    }\n    setIsAtBottomOfScrollRef(atBottom);\n  }, [scrollToBottom, sendMessageStatusIfAtBottom]);\n\n  // Infinite scrolling + threadInitialize function\n  const fetchNewMessageWhenAtTop = useCallback(async () => {\n    if (!isLoadingChatMessagesRef.current) {\n      if (onLoadPreviousChatMessages) {\n        isLoadingChatMessagesRef.current = true;\n        try {\n          // Fetch message until scrollTop reach the threshold for fetching new message\n          while (!isAllChatMessagesLoadedRef.current && chatScrollDivRef.current && chatScrollDivRef.current.scrollTop <= 500) {\n            isAllChatMessagesLoadedRef.current = await onLoadPreviousChatMessages(numberOfChatMessagesToReload);\n            await delay(200);\n          }\n        } finally {\n          // Set isLoadingChatMessagesRef to false after messages are fetched\n          isLoadingChatMessagesRef.current = false;\n        }\n      }\n    }\n  }, [numberOfChatMessagesToReload, onLoadPreviousChatMessages]);\n\n  // The below 2 of useEffects are design for fixing infinite scrolling problem\n  // Scrolling element will behave differently when scrollTop = 0(it sticks at the top)\n  // we need to get previousTop before it prepend contents\n  // Execute order [newMessage useEffect] => get previousTop => dom update => [messages useEffect]\n  useEffect(() => {\n    if (!chatScrollDivRef.current) {\n      return;\n    }\n    previousTopRef.current = chatScrollDivRef.current.scrollTop;\n    previousHeightRef.current = chatScrollDivRef.current.scrollHeight;\n  }, [newMessages]);\n  useEffect(() => {\n    if (!chatScrollDivRef.current) {\n      return;\n    }\n    chatScrollDivRef.current.scrollTop = chatScrollDivRef.current.scrollHeight - (previousHeightRef.current - previousTopRef.current);\n  }, [messages]);\n\n  // Fetch more messages to make the scroll bar appear, infinity scroll is then handled in the handleScroll function.\n  useEffect(() => {\n    fetchNewMessageWhenAtTop();\n  }, [fetchNewMessageWhenAtTop]);\n\n  /**\n   * One time run useEffects. Sets up listeners when component is mounted and tears down listeners when component\n   * unmounts unless these function changed\n   */\n  useEffect(() => {\n    window && window.addEventListener('click', sendMessageStatusIfAtBottom);\n    window && window.addEventListener('focus', sendMessageStatusIfAtBottom);\n    return () => {\n      window && window.removeEventListener('click', sendMessageStatusIfAtBottom);\n      window && window.removeEventListener('focus', sendMessageStatusIfAtBottom);\n    };\n  }, [sendMessageStatusIfAtBottom]);\n  useEffect(() => {\n    const chatScrollDiv = chatScrollDivRef.current;\n    chatScrollDiv?.addEventListener('scroll', handleScrollToTheBottom);\n    chatScrollDiv?.addEventListener('scroll', fetchNewMessageWhenAtTop);\n    return () => {\n      chatScrollDiv?.removeEventListener('scroll', handleScrollToTheBottom);\n      chatScrollDiv?.removeEventListener('scroll', fetchNewMessageWhenAtTop);\n    };\n  }, [fetchNewMessageWhenAtTop, handleScrollToTheBottom]);\n  useEffect(() => {\n    if (clientHeight === undefined) {\n      setForceUpdate(forceUpdate + 1);\n      return;\n    }\n    // Only scroll to bottom if isAtBottomOfScrollRef is true\n    isAtBottomOfScrollRef.current && scrollToBottom();\n  }, [clientHeight, forceUpdate, scrollToBottom, chatMessagesInitialized]);\n  useEffect(() => {\n    const newStatus = getLastChatMessageForCurrentUser(newMessages)?.status;\n    if (newStatus !== undefined) {\n      if (lastChatMessageStatus.current === 'deleted' && newStatus === 'sending') {\n        // enforce message life cycle\n        // message status should always be [ sending -> delivered -> seen (optional) -> deleted ] or [sending -> failed -> deleted]\n        // not any other way around\n        // therefore, if current message status is deleted, we should only update it if newStatus is sending\n        lastChatMessageStatus.current = newStatus;\n      } else if (lastChatMessageStatus.current !== 'deleted') {\n        lastChatMessageStatus.current = newStatus;\n      }\n    }\n    // The hook should depend on newMessages not on messages as otherwise it will skip the sending status for a first message\n  }, [newMessages]);\n\n  /**\n   * This needs to run to update latestPreviousChatMessage & latestCurrentChatMessage.\n   * These two states are used to manipulate scrollbar\n   */\n  useEffect(() => {\n    setLatestPreviousChatMessage(getLatestChatMessage(messagesRef.current));\n    setLatestCurrentChatMessage(getLatestChatMessage(newMessages));\n    setMessagesRef(newMessages);\n    !chatMessagesInitializedRef.current && setChatMessagesInitializedRef(true);\n    setLastDeliveredChatMessage(getLastChatMessageIdWithStatus(newMessages, 'delivered'));\n    setLastSeenChatMessage(getLastChatMessageIdWithStatus(newMessages, 'seen'));\n    setLastSendingChatMessage(getLastChatMessageIdWithStatus(newMessages, 'sending'));\n  }, [newMessages]);\n\n  /**\n   * This needs to run after messages are rendered so we can manipulate the scroll bar.\n   */\n  useEffect(() => {\n    // If user just sent the latest message then we assume we can move user to bottom of scroll.\n    if (isThereNewMessageNotFromCurrentUser(userId, latestPreviousChatMessage, latestCurrentChatMessage) && !isAtBottomOfScrollRef.current) {\n      setExistsNewChatMessage(true);\n    } else if (didUserSendTheLatestMessage(userId, latestPreviousChatMessage, latestCurrentChatMessage) || isAtBottomOfScrollRef.current) {\n      scrollToBottom();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [messages]);\n  const lastChatMessageStatus = useRef<string | undefined>(undefined);\n  const participantCountRef = useRef(participantCount);\n  const readReceiptsBySenderIdRef = useRef(readReceiptsBySenderId);\n  participantCountRef.current = participantCount;\n  readReceiptsBySenderIdRef.current = readReceiptsBySenderId;\n  const onActionButtonClickMemo = useCallback((message: ChatMessage, setMessageReadBy: (readBy: {\n    id: string;\n    displayName: string;\n  }[]) => void) => {\n    if (participantCountRef.current && participantCountRef.current - 1 > 1 && readReceiptsBySenderIdRef.current) {\n      setMessageReadBy(getParticipantsWhoHaveReadMessage(message, readReceiptsBySenderIdRef.current));\n    }\n  }, []);\n  const defaultStatusRenderer = useCallback((message: ChatMessage, participantCount: number, readCount: number, status?: MessageStatus) => {\n    // we should only announce label if the message status isn't deleted\n    // because after message is deleted, we now need to render statusIndicator for previous messages\n    // and their status has been announced already and we should not announce them again\n    const shouldAnnounce = lastChatMessageStatus.current !== 'deleted';\n    const onToggleToolTip = (isToggled: boolean): void => {\n      if (isToggled && readReceiptsBySenderIdRef.current) {\n        setReadCountForHoveredIndicator(getParticipantsWhoHaveReadMessage(message, readReceiptsBySenderIdRef.current).length);\n      } else {\n        setReadCountForHoveredIndicator(undefined);\n      }\n    };\n    return <MessageStatusIndicatorInternal status={status} readCount={readCount} onToggleToolTip={onToggleToolTip}\n    // -1 because participant count does not include myself\n    remoteParticipantsCount={participantCount ? participantCount - 1 : 0} shouldAnnounce={shouldAnnounce} />;\n  }, []);\n  const theme = useTheme();\n  const messagesToDisplay = useMemo(() => {\n    return memoizeAllMessages(memoizedMessageFn => {\n      return messages.map((message: Message, index: number): _ChatMessageProps => {\n        return memoizedMessageFn(message, showMessageDate, showMessageStatus, strings, index, onUpdateMessage, onCancelEditMessage, onDeleteMessageCallback, onSendMessage, props.disableEditing, lastDeliveredChatMessage, lastSeenChatMessage, lastSendingChatMessage);\n      });\n    });\n  }, [lastDeliveredChatMessage, lastSeenChatMessage, lastSendingChatMessage, messages, onCancelEditMessage, onDeleteMessageCallback, onSendMessage, onUpdateMessage, props.disableEditing, showMessageDate, showMessageStatus, strings]);\n  const classes = useChatStyles();\n  return <div className={mergeStyles(messageThreadWrapperContainerStyle)} ref={chatThreadRef}>\n      {/* Always ensure New Messages button is above the chat body element in the DOM tree. This is to ensure correct\n        tab ordering. Because the New Messages button floats on top of the chat body it is in a higher z-index and\n        thus Users should be able to tab navigate to the new messages button _before_ tab focus is taken to the chat body.*/}\n      {existsNewChatMessage && !disableJumpToNewMessageButton && <div className={mergeStyles(newMessageButtonContainerStyle, styles?.newMessageButtonContainer)}>\n          {onRenderJumpToNewMessageButton ? onRenderJumpToNewMessageButton({\n        text: strings.newMessagesIndicator,\n        onClick: scrollToBottom\n      }) : <DefaultJumpToNewMessageButton text={strings.newMessagesIndicator} onClick={scrollToBottom} />}\n        </div>}\n      <LiveAnnouncer>\n        <FluentV9ThemeProvider v8Theme={theme}>\n          {latestDeletedMessageId && <Announcer key={latestDeletedMessageId} announcementString={deletedMessageAriaLabel} ariaLive={'assertive'} />}\n          <Chat\n        // styles?.chatContainer used in className and style prop as style prop can't handle CSS selectors\n        className={mergeClasses(classes.root, mergeStyles(styles?.chatContainer))} ref={chatScrollDivRef} style={{\n          ...createStyleFromV8Style(styles?.chatContainer)\n        }}>\n            {messagesToDisplay.map((message: _ChatMessageProps): JSX.Element => {\n            return <MemoChatMessageComponentWrapper {...message} userId={userId} key={message.key} styles={styles} shouldOverlapAvatarAndMessage={isNarrow} strings={strings} onRenderAvatar={onRenderAvatar} onRenderMessage={onRenderMessage} onRenderMessageStatus={onRenderMessageStatus} defaultStatusRenderer={defaultStatusRenderer} onActionButtonClick={onActionButtonClickMemo} readCount={readCountForHoveredIndicator} participantCount={participantCount} /* @conditional-compile-remove(image-overlay) */\n            inlineImageOptions={inlineImageOptions} />;\n          })}\n          </Chat>\n        </FluentV9ThemeProvider>\n      </LiveAnnouncer>\n    </div>;\n};\nconst MemoChatMessageComponentWrapper = React.memo((obj: ChatMessageComponentWrapperProps): JSX.Element => {\n  return <ChatMessageComponentWrapper {...obj} />;\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ISpinnerStyles, mergeStyles, Theme } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const container = (): string => mergeStyles({\n  position: 'relative',\n  // ensures child element's `position: absolute` is relative to this container\n  display: 'contents'\n});\n\n/**\n * @private\n */\nexport const loadingSpinnerContainer = (): string => mergeStyles({\n  // Position centrally on top of content. Parent must have position: relative.\n  position: 'absolute',\n  top: '50%',\n  bottom: '0',\n  left: '50%',\n  right: '0',\n  transform: 'translate(-50%, -50%)'\n});\n\n/**\n * @private\n */\nexport const loadSpinnerStyles: ISpinnerStyles = {\n  root: {\n    height: '100%' // ensure height fills container\n  },\n  circle: {\n    maxHeight: '5rem',\n    height: '50%',\n    width: 'unset',\n    // remove default width applied by fluent for spinners\n    aspectRatio: '1 / 1',\n    // make height match width to ensure a circle shape\n    borderWidth: '0.25em'\n  }\n};\n\n/**\n * @private\n */\nexport const mediaContainer = (theme: Theme): string => mergeStyles({\n  position: 'relative',\n  height: '100%',\n  width: '100%',\n  background: 'transparent',\n  display: 'flex',\n  '& video': {\n    borderRadius: theme.effects.roundedCorner4\n  }\n});\n\n/**\n * @private\n */\nexport const invertedVideoInPipStyle = (theme: Theme): string => mergeStyles(mediaContainer(theme), {\n  // The HTMLElement returned by the headless SDK is already inverted.\n  // But in picture-in-picture mode, we do not want to invert the host HTMLElement.\n  // Instead, we need to target the :picture-in-picture pseudoclass.\n  //\n  // First reset the host HTMLElement.\n  transform: 'rotateY(180deg)',\n  // This doesn't work yet on latest Edge.\n  // Probably just not implemented yet.\n  // picture-in-picture API is not yet stable: https://www.w3.org/TR/picture-in-picture/#css-pseudo-class\n  '& video:picture-in-picture': {\n    transform: 'rotateY(180deg)'\n  }\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles, Spinner } from '@fluentui/react';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { invertedVideoInPipStyle, mediaContainer, container, loadingSpinnerContainer, loadSpinnerStyles } from './styles/StreamMedia.styles';\nimport { useTheme } from '../theming';\nimport { BaseCustomStyles } from '../types';\n\n/**\n * Whether the stream is loading or not.\n * @public\n */\nexport type LoadingState = 'loading' | 'none';\n\n/**\n * Props for {@link StreamMedia}.\n *\n * @public\n */\nexport interface StreamMediaProps {\n  /** Video stream element to render. */\n  videoStreamElement: HTMLElement | null;\n  /** Decides whether to mirror the video or not. */\n  isMirrored?: boolean;\n  /** Whether the stream is loading data */\n  loadingState?: LoadingState;\n  /**\n   * Allows users to pass in an object contains custom CSS styles.\n   * @Example\n   * ```\n   * <StreamMedia styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: BaseCustomStyles;\n}\n\n/**\n * Utility component to convert an HTMLElement with a video stream into a JSX element.\n *\n * Use to convert an HTMLElement returned by headless calling API into a component that can be rendered as a {@link VideoTile}.\n *\n * @public\n */\nexport const StreamMedia = (props: StreamMediaProps): JSX.Element => {\n  const containerEl = useRef<HTMLDivElement>(null);\n  const theme = useTheme();\n  const {\n    isMirrored,\n    videoStreamElement,\n    styles,\n    loadingState = 'none'\n  } = props;\n  const [pipEnabled, setPipEnabled] = useState(false);\n  useEffect(() => {\n    const container = containerEl.current;\n    if (!container) {\n      return;\n    }\n\n    // If videoStreamElement changes, we clear the container to make sure we don't have duplicate, and replace it with\n    // the new videoStreamElement. If videoStreamElement is undefined nothing is appended and container should be empty\n    // and we don't render anyting.\n    container.innerHTML = '';\n    setPipEnabled(false);\n    if (videoStreamElement) {\n      videoStreamElement.addEventListener('enterpictureinpicture', () => {\n        setPipEnabled(true);\n      });\n      videoStreamElement.addEventListener('leavepictureinpicture', () => {\n        setPipEnabled(false);\n      });\n      container.appendChild(videoStreamElement);\n    }\n    return () => {\n      container.innerHTML = '';\n      setPipEnabled(false);\n    };\n  }, [videoStreamElement]);\n  return <div className={container()}>\n      <div data-ui-id=\"stream-media-container\" className={mergeStyles(isMirrored && pipEnabled ? invertedVideoInPipStyle(theme) : mediaContainer(theme), styles?.root)} ref={containerEl} />\n      {loadingState === 'loading' && <div className={loadingSpinnerContainer()}>\n          <Spinner data-ui-id=\"stream-media-loading-spinner\" styles={loadSpinnerStyles} />\n        </div>}\n    </div>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, mergeStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const participantItemContainerStyle = (options: {\n  localparticipant: boolean | undefined;\n  clickable: boolean;\n}): IStyle => {\n  return {\n    paddingTop: '0.25rem',\n    paddingBottom: '0.25rem',\n    display: 'flex',\n    maxWidth: '100%',\n    minWidth: '8rem',\n    cursor: options.localparticipant || !options.clickable ? 'default' : 'pointer',\n    alignItems: 'center'\n  };\n};\n\n/**\n * @private\n */\nexport const menuButtonContainerStyle = {\n  width: '1.5rem'\n};\n\n/**\n * @private\n */\nexport const participantStateMaxWidth = '5rem';\n/**\n * @private\n */\nexport const participantStateStringStyles: IStyle = {\n  maxWidth: participantStateMaxWidth,\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  whiteSpace: 'nowrap',\n  lineHeight: 'normal',\n  marginLeft: '0.5rem',\n  marginRight: 0\n};\n\n/**\n * @private\n */\nexport const iconContainerStyle = {\n  display: 'flex',\n  alignItems: 'center',\n  height: '100%',\n  paddingTop: '0.2rem'\n};\n\n/**\n * @private\n */\nexport const iconStyles = mergeStyles({\n  display: 'flex',\n  lineHeight: 0,\n  // ensure the icon center is on the center line and not slightly above it\n  alignItems: 'center'\n});\n\n/**\n * @private\n */\nexport const meContainerStyle = {\n  paddingRight: '0.5rem'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ContextualMenu, DirectionalHint, Icon, IContextualMenuItem, IStyle, mergeStyles, Persona, PersonaPresence, PersonaSize, Stack, Text } from '@fluentui/react';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { useIdentifiers } from '../identifiers';\nimport { useLocale } from '../localization';\nimport { useTheme } from '../theming';\nimport { BaseCustomStyles, OnRenderAvatarCallback } from '../types';\nimport { iconContainerStyle, iconStyles, meContainerStyle, menuButtonContainerStyle, participantItemContainerStyle, participantStateMaxWidth, participantStateStringStyles } from './styles/ParticipantItem.styles';\nimport { _preventDismissOnEvent as preventDismissOnEvent } from '@internal/acs-ui-common';\nimport { useId } from '@fluentui/react-hooks';\n\n/**\n * Fluent styles for {@link ParticipantItem}.\n *\n * @public\n */\nexport interface ParticipantItemStyles extends BaseCustomStyles {\n  /** Styles for the avatar. */\n  avatar?: IStyle;\n  /** Styles for the (You) string. */\n  me?: IStyle;\n  /** Styles for the container of the icon. */\n  iconContainer?: IStyle;\n  /** Styles for the menu. */\n  menu?: IStyle;\n}\n\n/**\n * Strings of {@link ParticipantItem} that can be overridden.\n *\n * @public\n */\nexport interface ParticipantItemStrings {\n  /** String shown when participant is me */\n  isMeText: string;\n  /** String shown when hovering over menu button */\n  menuTitle: string;\n  /** Label for the remove button in participant menu  */\n  removeButtonLabel: string;\n  /** Label for the sharing icon in participant state stack  */\n  sharingIconLabel: string;\n  /** Label for the muted icon in participant state stack  */\n  mutedIconLabel: string;\n  /** placeholder text for participants who does not have a display name*/\n  displayNamePlaceholder?: string;\n}\n\n/**\n * Props for {@link ParticipantItem}.\n *\n * @public\n */\nexport interface ParticipantItemProps {\n  /** Unique User ID of the participant. This `userId` is available in the `onRenderAvatar` callback function */\n  userId?: string;\n  /** Name of participant. */\n  displayName?: string;\n  /** Optional indicator to show participant is the user. */\n  me?: boolean;\n  /** Optional callback returning a JSX element to override avatar. */\n  onRenderAvatar?: OnRenderAvatarCallback;\n  /** Optional array of IContextualMenuItem for contextual menu. */\n  menuItems?: IContextualMenuItem[];\n  /** Optional callback returning a JSX element rendered on the right portion of the ParticipantItem. Intended for adding icons. */\n  onRenderIcon?: (props?: ParticipantItemProps) => JSX.Element | null;\n  /** Optional PersonaPresence to show participant presence. This will not have an effect if property avatar is assigned. */\n  presence?: PersonaPresence;\n  /**\n   * Allows users to pass in an object contains custom CSS styles.\n   * @Example\n   * ```\n   * <ParticipantItem styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: ParticipantItemStyles;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<ParticipantItemStrings>;\n  /**\n   * Optional callback when component is clicked\n   */\n  onClick?: (props?: ParticipantItemProps) => void;\n  /** Optional value to determine if the tooltip should be shown for participants or not */\n  showParticipantOverflowTooltip?: boolean;\n  /**\n   * Optional aria property that prefixes the ParticipantItems aria content\n   * Takes in a unique id value of the element you would like to be read before the ParticipantItem.\n   */\n  ariaLabelledBy?: string;\n}\n\n/**\n * Component to render a calling or chat participant.\n *\n * Displays the participant's avatar, displayName and status as well as optional icons and context menu.\n *\n * @public\n */\nexport const ParticipantItem = (props: ParticipantItemProps): JSX.Element => {\n  const {\n    userId,\n    displayName,\n    onRenderAvatar,\n    menuItems,\n    onRenderIcon,\n    presence,\n    styles,\n    me,\n    onClick,\n    showParticipantOverflowTooltip\n  } = props;\n  const [itemHovered, setItemHovered] = useState<boolean>(false);\n  const [itemFocused, setItemFocused] = useState<boolean>(false);\n  const [menuHidden, setMenuHidden] = useState<boolean>(true);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const theme = useTheme();\n  const localeStrings = useLocale().strings.participantItem;\n  const ids = useIdentifiers();\n  const uniqueId = useId();\n  const strings = {\n    ...localeStrings,\n    ...props.strings\n  };\n\n  // For 'me' show empty name so avatar will get 'Person' icon, when there is no name\n  const meAvatarText = displayName?.trim() || '';\n  const avatarOptions = {\n    text: me ? meAvatarText : displayName?.trim() || strings.displayNamePlaceholder,\n    size: PersonaSize.size32,\n    presence: presence,\n    initialsTextColor: 'white',\n    showOverflowTooltip: showParticipantOverflowTooltip,\n    showUnknownPersonaCoin: !me && (!displayName?.trim() || displayName === strings.displayNamePlaceholder)\n  };\n  const avatar = onRenderAvatar ? onRenderAvatar(userId ?? '', avatarOptions) : <Persona className={mergeStyles({\n    // Prevents persona text from being vertically truncated if a global line height is less than 1.15.\n    lineHeight: '1.15rem'\n  }, styles?.avatar)} {...avatarOptions} />;\n  const meTextStyle = useMemo(() => mergeStyles(meContainerStyle, {\n    color: theme.palette.neutralSecondary\n  }, styles?.me), [theme.palette.neutralSecondary, styles?.me]);\n  const contextualMenuStyle = useMemo(() => mergeStyles({\n    background: theme.palette.neutralLighterAlt\n  }, styles?.menu), [theme.palette.neutralLighterAlt, styles?.menu]);\n  const infoContainerStyle = useMemo(() => mergeStyles(iconContainerStyle, {\n    color: theme.palette.neutralTertiary,\n    marginLeft: 'auto'\n  }, styles?.iconContainer), [theme.palette.neutralTertiary, styles?.iconContainer]);\n  const onDismissMenu = (): void => {\n    setItemHovered(false);\n    setItemFocused(false);\n    setMenuHidden(true);\n  };\n  const menuButton = useMemo(() => <Stack horizontal={true} horizontalAlign=\"end\" className={mergeStyles(menuButtonContainerStyle)} title={strings.menuTitle} data-ui-id={ids.participantItemMenuButton}>\n        <Icon iconName={itemHovered || itemFocused || !menuHidden ? 'ParticipantItemOptionsHovered' : 'ParticipantItemOptions'} className={iconStyles} />\n      </Stack>, [strings.menuTitle, ids.participantItemMenuButton, itemHovered, itemFocused, menuHidden]);\n  const participantStateString = participantStateStringTrampoline(props, strings);\n  return <div ref={containerRef} role={'menuitem'} data-is-focusable={true} data-ui-id=\"participant-item\" className={mergeStyles(participantItemContainerStyle({\n    localparticipant: me,\n    clickable: !!menuItems && menuItems.length > 0\n  }), styles?.root)} onMouseEnter={() => setItemHovered(true)} onMouseLeave={() => setItemHovered(false)} onFocus={() => setItemFocused(true)} onBlur={() => setItemFocused(false)} onClick={() => {\n    if (!participantStateString) {\n      setItemHovered(true);\n      setItemFocused(false);\n      setMenuHidden(false);\n      onClick?.(props);\n    }\n    if (!menuHidden) {\n      onDismissMenu();\n    }\n  }} tabIndex={0}>\n      <Stack horizontal className={mergeStyles({\n      width: `calc(100% - ${!me && participantStateString ? participantStateMaxWidth : menuButtonContainerStyle.width})`,\n      alignItems: 'center'\n    })} id={uniqueId} aria-labelledby={`${props.ariaLabelledBy} ${uniqueId}`}>\n        {avatar}\n        {me && <Text className={meTextStyle}>{strings.isMeText}</Text>}\n        <Stack horizontal className={mergeStyles(infoContainerStyle)}>\n          {onRenderIcon && onRenderIcon(props)}\n        </Stack>\n      </Stack>\n      {/* When the participantStateString has a value, we don't show the menu  */}\n      {!me && participantStateString ? <Text data-ui-id=\"participant-item-state-string\" className={mergeStyles(participantStateStringStyles)}>\n          {participantStateString}\n        </Text> : <div>\n          {menuItems && menuItems.length > 0 && <>\n              {menuButton}\n              <ContextualMenu items={menuItems} hidden={menuHidden} target={containerRef} onItemClick={onDismissMenu} onDismiss={onDismissMenu} directionalHint={DirectionalHint.bottomRightEdge} className={contextualMenuStyle} calloutProps={{\n          preventDismissOnEvent\n        }} />\n            </>}\n        </div>}\n    </div>;\n};\nconst participantStateStringTrampoline = (props: ParticipantItemProps, strings: ParticipantItemStrings): string | undefined => {\n  return undefined;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(raise-hand) */\nimport React from 'react';\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * Raised hand icon for ParticipantList and VideoTitle.\n *\n * @public\n */\nexport const RaisedHandIcon = (): JSX.Element => {\n  return <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <radialGradient id=\"paint0_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(16.6796 10.8658) rotate(161.935) scale(13.4702 20.3408)\">\n          <stop offset=\"0.817521\" stopColor=\"#E99329\" stopOpacity=\"0\" />\n          <stop offset=\"0.961397\" stopColor=\"#E99329\" />\n        </radialGradient>\n        <radialGradient id=\"paint1_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(11.7464 4.86265) rotate(103.662) scale(15.5522 10.8511)\">\n          <stop offset=\"0.750766\" stopColor=\"#F88456\" stopOpacity=\"0\" />\n          <stop offset=\"1\" stopColor=\"#F88456\" />\n        </radialGradient>\n        <radialGradient id=\"paint2_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(10.8862 4.86067) rotate(98.3094) scale(14.3189 9.99881)\">\n          <stop offset=\"0.937186\" stopColor=\"#F27A74\" stopOpacity=\"0\" />\n          <stop offset=\"1\" stopColor=\"#F27A74\" />\n        </radialGradient>\n        <radialGradient id=\"paint3_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(17.3363 11.238) rotate(-144.906) scale(1.08553 4.6268)\">\n          <stop offset=\"0.0636767\" stopColor=\"#EAB170\" />\n          <stop offset=\"1\" stopColor=\"#F6B44B\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint4_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(17.1484 8.75) rotate(129.452) scale(4.85649 1.57945)\">\n          <stop stopColor=\"#FFC748\" />\n          <stop offset=\"1\" stopColor=\"#FFC64A\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint5_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(17.6953 8.75) rotate(135) scale(1.1601 1.07723)\">\n          <stop stopColor=\"#FFE964\" />\n          <stop offset=\"1\" stopColor=\"#FFE65F\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint6_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(15.7422 8.47656) rotate(128.853) scale(3.61154 0.774997)\">\n          <stop offset=\"0.251132\" stopColor=\"#EDB019\" />\n          <stop offset=\"1\" stopColor=\"#EEB018\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint7_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(15.6055 8.04687) rotate(125.92) scale(3.06292 0.505665)\">\n          <stop offset=\"0.0171863\" stopColor=\"#D29E4C\" />\n          <stop offset=\"1\" stopColor=\"#DAA23E\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint8_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(14.2578 9.47266) rotate(-56.3099) scale(1.05631 0.227513)\">\n          <stop offset=\"0.297381\" stopColor=\"#FFD260\" />\n          <stop offset=\"1\" stopColor=\"#FFD361\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint9_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(12.4609 9.62891) rotate(107.216) scale(1.45176 3.15212)\">\n          <stop offset=\"0.251132\" stopColor=\"#FFCF48\" />\n          <stop offset=\"1\" stopColor=\"#FFD04B\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint10_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(12.3242 9.02344) rotate(144.638) scale(0.742444 1.38192)\">\n          <stop offset=\"0.420068\" stopColor=\"#F2AA23\" />\n          <stop offset=\"1\" stopColor=\"#F2AA23\" stopOpacity=\"0\" />\n        </radialGradient>\n        <linearGradient id=\"paint11_linear_10246_159312\" x1=\"5.72266\" y1=\"10.9399\" x2=\"5.07979\" y2=\"9.68081\" gradientUnits=\"userSpaceOnUse\">\n          <stop offset=\"0.376446\" stopColor=\"#FFC23E\" />\n          <stop offset=\"1\" stopColor=\"#FFC23E\" stopOpacity=\"0\" />\n        </linearGradient>\n        <radialGradient id=\"paint12_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(3.32031 8.28125) rotate(85.0032) scale(7.17571 2.51091)\">\n          <stop stopColor=\"#E6943A\" />\n          <stop offset=\"1\" stopColor=\"#E7943A\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint13_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(5.46875 6.17188) rotate(87.0391) scale(6.80596 1.61557)\">\n          <stop stopColor=\"#FFCF50\" />\n          <stop offset=\"0.741378\" stopColor=\"#FFB847\" />\n          <stop offset=\"1\" stopColor=\"#FFB848\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint14_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(6.69922 6.95312) rotate(85.2393) scale(4.00062 0.583904)\">\n          <stop stopColor=\"#E79F08\" />\n          <stop offset=\"1\" stopColor=\"#E79F08\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint15_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(5.82031 7.76306) rotate(83.1071) scale(3.90579 0.814298)\">\n          <stop stopColor=\"#FFD14D\" />\n          <stop offset=\"1\" stopColor=\"#FFD04E\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint16_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(6.69922 9.17969) rotate(136.548) scale(1.53355 0.783563)\">\n          <stop offset=\"0.426346\" stopColor=\"#FFD260\" />\n          <stop offset=\"1\" stopColor=\"#FFD361\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint17_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(5.46875 5.48828) rotate(80.3401) scale(0.931172 0.709009)\">\n          <stop stopColor=\"#FFDA62\" />\n          <stop offset=\"1\" stopColor=\"#FFDA60\" stopOpacity=\"0\" />\n        </radialGradient>\n        <linearGradient id=\"paint18_linear_10246_159312\" x1=\"6.05957\" y1=\"7.05618\" x2=\"7.26562\" y2=\"7.03125\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#DE890D\" />\n          <stop offset=\"1\" stopColor=\"#F9B23D\" />\n        </linearGradient>\n        <linearGradient id=\"paint19_linear_10246_159312\" x1=\"11.7919\" y1=\"10.3872\" x2=\"11.5711\" y2=\"7.83625\" gradientUnits=\"userSpaceOnUse\">\n          <stop offset=\"0.405208\" stopColor=\"#FFC23E\" />\n          <stop offset=\"1\" stopColor=\"#FFC23E\" stopOpacity=\"0\" />\n        </linearGradient>\n        <radialGradient id=\"paint20_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(9.90363 2.31009) rotate(56.3221) scale(2.85335 11.4486)\">\n          <stop stopColor=\"#E1AE3F\" />\n          <stop offset=\"1\" stopColor=\"#E8AD3C\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint21_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(8.35938 5.19531) rotate(86.2538) scale(6.57655 1.44733)\">\n          <stop stopColor=\"#FFCE4C\" />\n          <stop offset=\"0.621882\" stopColor=\"#FFBA49\" />\n          <stop offset=\"1\" stopColor=\"#FEB848\" stopOpacity=\"0\" />\n        </radialGradient>\n        <linearGradient id=\"paint22_linear_10246_159312\" x1=\"8.0957\" y1=\"9.0918\" x2=\"7.91992\" y2=\"7.06055\" gradientUnits=\"userSpaceOnUse\">\n          <stop offset=\"0.168836\" stopColor=\"#FFC23E\" />\n          <stop offset=\"1\" stopColor=\"#FFC23E\" stopOpacity=\"0\" />\n        </linearGradient>\n        <radialGradient id=\"paint23_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(5.82031 5.97656) rotate(78.518) scale(5.10211 0.93429)\">\n          <stop offset=\"0.425088\" stopColor=\"#BD6606\" />\n          <stop offset=\"1\" stopColor=\"#C77122\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint24_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(8.24219 5.89844) rotate(83.5653) scale(5.22825 0.629818)\">\n          <stop stopColor=\"#FFCB4F\" />\n          <stop offset=\"1\" stopColor=\"#FFCD4C\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint25_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(9.29687 8.20313) rotate(154.799) scale(1.46784 0.851345)\">\n          <stop offset=\"0.426346\" stopColor=\"#FFD260\" />\n          <stop offset=\"1\" stopColor=\"#FFD361\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint26_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(9.33594 4.98047) rotate(88.915) scale(5.15717 0.762321)\">\n          <stop offset=\"0.342657\" stopColor=\"#E29E07\" />\n          <stop offset=\"1\" stopColor=\"#DF9906\" stopOpacity=\"0\" />\n        </radialGradient>\n        <linearGradient id=\"paint27_linear_10246_159312\" x1=\"9.14062\" y1=\"6.25\" x2=\"8.80978\" y2=\"6.26984\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#B76001\" />\n          <stop offset=\"0.647059\" stopColor=\"#E59714\" stopOpacity=\"0\" />\n        </linearGradient>\n        <radialGradient id=\"paint28_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(8.125 3.51562) rotate(86.1859) scale(1.17448 1.07205)\">\n          <stop stopColor=\"#FFDA62\" />\n          <stop offset=\"1\" stopColor=\"#FFDA60\" stopOpacity=\"0\" />\n        </radialGradient>\n        <linearGradient id=\"paint29_linear_10246_159312\" x1=\"9.0625\" y1=\"5.68143\" x2=\"10.5816\" y2=\"5.72531\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#D5850A\" />\n          <stop offset=\"1\" stopColor=\"#F9B343\" stopOpacity=\"0\" />\n        </linearGradient>\n        <linearGradient id=\"paint30_linear_10246_159312\" x1=\"9.0625\" y1=\"5.68143\" x2=\"9.55093\" y2=\"5.6712\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#B76001\" />\n          <stop offset=\"1\" stopColor=\"#E59714\" stopOpacity=\"0\" />\n        </linearGradient>\n        <radialGradient id=\"paint31_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(11.3014 4.55861) rotate(90) scale(5.01272 0.983716)\">\n          <stop stopColor=\"#FFCB45\" />\n          <stop offset=\"1\" stopColor=\"#FFC44A\" stopOpacity=\"0\" />\n        </radialGradient>\n        <linearGradient id=\"paint32_linear_10246_159312\" x1=\"10.0391\" y1=\"8.40332\" x2=\"10.0195\" y2=\"7.2461\" gradientUnits=\"userSpaceOnUse\">\n          <stop offset=\"0.210964\" stopColor=\"#FFC23E\" />\n          <stop offset=\"0.80669\" stopColor=\"#FFC23E\" stopOpacity=\"0\" />\n        </linearGradient>\n        <radialGradient id=\"paint33_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(11.7188 8.04687) rotate(166.996) scale(1.16638 0.888873)\">\n          <stop offset=\"0.426346\" stopColor=\"#FFCA5B\" />\n          <stop offset=\"1\" stopColor=\"#FFCF60\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint34_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(11.9922 4.76563) rotate(92.1409) scale(4.18261 0.38546)\">\n          <stop offset=\"0.342657\" stopColor=\"#E29E07\" />\n          <stop offset=\"1\" stopColor=\"#DF9906\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint35_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(10.9766 4.51172) rotate(90) scale(9.27734 1.28906)\">\n          <stop stopColor=\"#FFCE4C\" />\n          <stop offset=\"0.621882\" stopColor=\"#FFBA49\" />\n          <stop offset=\"1\" stopColor=\"#FEB848\" stopOpacity=\"0\" />\n        </radialGradient>\n        <linearGradient id=\"paint36_linear_10246_159312\" x1=\"12.3828\" y1=\"5.9375\" x2=\"11.6797\" y2=\"5.93971\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#E59714\" />\n          <stop offset=\"1\" stopColor=\"#E59714\" stopOpacity=\"0\" />\n        </linearGradient>\n        <linearGradient id=\"paint37_linear_10246_159312\" x1=\"10.0195\" y1=\"8.82935\" x2=\"10.2318\" y2=\"8.00715\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#FFC23E\" />\n          <stop offset=\"1\" stopColor=\"#FFC23E\" stopOpacity=\"0\" />\n        </linearGradient>\n        <radialGradient id=\"paint38_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(12.2847 7.66848) rotate(-113.448) scale(6.85723 7.32906)\">\n          <stop offset=\"0.869582\" stopColor=\"#D8A13D\" stopOpacity=\"0\" />\n          <stop offset=\"1\" stopColor=\"#D8A13D\" />\n        </radialGradient>\n        <radialGradient id=\"paint39_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(11.2891 1.91406) rotate(93.0128) scale(1.48643 1.29895)\">\n          <stop stopColor=\"#FFE763\" />\n          <stop offset=\"1\" stopColor=\"#FFE55D\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint40_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(11.8164 8.53516) rotate(168.022) scale(1.41758 0.903842)\">\n          <stop offset=\"0.426346\" stopColor=\"#FFD260\" />\n          <stop offset=\"1\" stopColor=\"#FFD361\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint41_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(13.4766 5.89844) rotate(92.6574) scale(9.26778 2.30713)\">\n          <stop stopColor=\"#FFCE4C\" />\n          <stop offset=\"0.431711\" stopColor=\"#FFBA49\" />\n          <stop offset=\"1\" stopColor=\"#FEB848\" stopOpacity=\"0\" />\n        </radialGradient>\n        <linearGradient id=\"paint42_linear_10246_159312\" x1=\"11.5863\" y1=\"6.2696\" x2=\"13.5726\" y2=\"6.42645\" gradientUnits=\"userSpaceOnUse\">\n          <stop offset=\"0.0662431\" stopColor=\"#E08F13\" />\n          <stop offset=\"0.602743\" stopColor=\"#E7981B\" stopOpacity=\"0\" />\n        </linearGradient>\n        <linearGradient id=\"paint43_linear_10246_159312\" x1=\"11.5863\" y1=\"6.2696\" x2=\"13.259\" y2=\"6.33379\" gradientUnits=\"userSpaceOnUse\">\n          <stop offset=\"0.0662431\" stopColor=\"#C2681D\" />\n          <stop offset=\"0.602743\" stopColor=\"#E69717\" stopOpacity=\"0\" />\n        </linearGradient>\n        <radialGradient id=\"paint44_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(14.9907 8.54439) rotate(-115.482) scale(6.44971 7.3339)\">\n          <stop offset=\"0.869582\" stopColor=\"#D8A13D\" stopOpacity=\"0\" />\n          <stop offset=\"1\" stopColor=\"#D8A13D\" />\n        </radialGradient>\n        <radialGradient id=\"paint45_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(14.0625 5.66406) rotate(91.8841) scale(5.94071 1.40501)\">\n          <stop stopColor=\"#FFDC3F\" />\n          <stop offset=\"1\" stopColor=\"#FFDA3C\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint46_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(14.1016 3.51563) rotate(99.1412) scale(1.27667 1.12346)\">\n          <stop stopColor=\"#FFE966\" />\n          <stop offset=\"1\" stopColor=\"#FFE966\" stopOpacity=\"0\" />\n        </radialGradient>\n        <radialGradient id=\"paint47_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(11.7139 8.84766) rotate(124.509) scale(0.853264 2.02461)\">\n          <stop offset=\"0.251132\" stopColor=\"#F0A623\" />\n          <stop offset=\"1\" stopColor=\"#F2AA23\" stopOpacity=\"0\" />\n        </radialGradient>\n        <linearGradient id=\"paint48_linear_10246_159312\" x1=\"13.877\" y1=\"10.0293\" x2=\"13.5547\" y2=\"9.05273\" gradientUnits=\"userSpaceOnUse\">\n          <stop offset=\"0.0912498\" stopColor=\"#FFCD47\" />\n          <stop offset=\"1\" stopColor=\"#FFCD52\" stopOpacity=\"0\" />\n        </linearGradient>\n        <radialGradient id=\"paint49_radial_10246_159312\" cx=\"0\" cy=\"0\" r=\"1\" gradientUnits=\"userSpaceOnUse\" gradientTransform=\"translate(14.8059 9.14063) rotate(99.1613) scale(2.21576 0.860587)\">\n          <stop offset=\"0.251132\" stopColor=\"#D69211\" />\n          <stop offset=\"1\" stopColor=\"#DAA23E\" stopOpacity=\"0\" />\n        </radialGradient>\n      </defs>\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"#FFC23E\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint0_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint1_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint2_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint3_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint4_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint5_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint6_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint7_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint8_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint9_radial_10246_159312)\" />\n      <path d=\"M10.4435 1.23817C11.6481 1.06813 12.2265 2.26542 12.08 3.30216C12.3425 2.83259 12.7902 2.56116 13.3593 2.57808C14.1793 2.60246 14.83 3.32606 14.8046 4.15738L14.5986 9.26659L15.4927 8.14205C16.0297 7.46657 17.0049 7.3596 17.6721 7.90298C18.3408 8.44763 18.4466 9.43906 17.9083 10.1161L17.5242 10.5991L17.5205 10.6047C17.1674 11.0632 16.4446 12.0018 15.5377 13.5195C15.2451 13.9644 14.991 14.4396 14.7373 14.9139C14.3755 15.5904 14.0146 16.2651 13.5446 16.8478C12.6103 18.0157 11.2012 18.7207 9.41406 18.7207C7.46969 18.7207 5.96858 17.7407 5.06836 16.2598C4.39645 15.1544 4.09135 13.756 4.01367 12.3535C3.90459 10.384 3.64472 8.30425 3.52479 6.33789C3.46522 5.36133 4.03401 4.62819 4.82415 4.58984C5.43983 4.55997 5.83432 4.75144 6.11318 5.06836C6.11318 5.06836 6.05957 4.77051 6.05957 4.15738C6.05957 3.54425 6.58827 2.73728 7.41201 2.67578C8.7206 2.57808 8.93545 3.65234 9.0624 4.15738C9.08953 3.10816 8.83779 1.46464 10.4435 1.23817Z\" fill=\"url(#paint10_radial_10246_159312)\" />\n      <path d=\"M3.52479 6.33728C3.46522 5.36072 4.03401 4.62758 4.82415 4.58924C5.43983 4.55936 5.83432 4.75084 6.11318 5.06775C6.20599 5.20142 6.40332 5.6084 6.4502 6.16699C6.49707 6.72559 6.63574 8.10547 6.69922 8.72559C6.66584 9.373 6.06222 10.7221 3.91477 10.9394C3.78945 9.4056 3.61634 7.8384 3.52479 6.33728Z\" fill=\"#FFC23E\" />\n\n      <path d=\"M3.52479 6.33728C3.46522 5.36072 4.03401 4.62758 4.82415 4.58924C5.43983 4.55936 5.83432 4.75084 6.11318 5.06775C6.20599 5.20142 6.40332 5.6084 6.4502 6.16699C6.49707 6.72559 6.63574 8.10547 6.69922 8.72559C6.66584 9.373 6.06222 10.7221 3.91477 10.9394C3.78945 9.4056 3.61634 7.8384 3.52479 6.33728Z\" fill=\"url(#paint11_linear_10246_159312)\" />\n\n      <path d=\"M3.52479 6.33728C3.46522 5.36072 4.03401 4.62758 4.82415 4.58924C5.43983 4.55936 5.83432 4.75084 6.11318 5.06775C6.20599 5.20142 6.40332 5.6084 6.4502 6.16699C6.49707 6.72559 6.63574 8.10547 6.69922 8.72559C6.66584 9.373 6.06222 10.7221 3.91477 10.9394C3.78945 9.4056 3.61634 7.8384 3.52479 6.33728Z\" fill=\"url(#paint12_radial_10246_159312)\" />\n\n      <path d=\"M3.52479 6.33728C3.46522 5.36072 4.03401 4.62758 4.82415 4.58924C5.43983 4.55936 5.83432 4.75084 6.11318 5.06775C6.20599 5.20142 6.40332 5.6084 6.4502 6.16699C6.49707 6.72559 6.63574 8.10547 6.69922 8.72559C6.66584 9.373 6.06222 10.7221 3.91477 10.9394C3.78945 9.4056 3.61634 7.8384 3.52479 6.33728Z\" fill=\"url(#paint13_radial_10246_159312)\" />\n\n      <path d=\"M3.52479 6.33728C3.46522 5.36072 4.03401 4.62758 4.82415 4.58924C5.43983 4.55936 5.83432 4.75084 6.11318 5.06775C6.20599 5.20142 6.40332 5.6084 6.4502 6.16699C6.49707 6.72559 6.63574 8.10547 6.69922 8.72559C6.66584 9.373 6.06222 10.7221 3.91477 10.9394C3.78945 9.4056 3.61634 7.8384 3.52479 6.33728Z\" fill=\"url(#paint14_radial_10246_159312)\" />\n\n      <path d=\"M3.52479 6.33728C3.46522 5.36072 4.03401 4.62758 4.82415 4.58924C5.43983 4.55936 5.83432 4.75084 6.11318 5.06775C6.20599 5.20142 6.40332 5.6084 6.4502 6.16699C6.49707 6.72559 6.63574 8.10547 6.69922 8.72559C6.66584 9.373 6.06222 10.7221 3.91477 10.9394C3.78945 9.4056 3.61634 7.8384 3.52479 6.33728Z\" fill=\"url(#paint15_radial_10246_159312)\" />\n\n      <path d=\"M3.52479 6.33728C3.46522 5.36072 4.03401 4.62758 4.82415 4.58924C5.43983 4.55936 5.83432 4.75084 6.11318 5.06775C6.20599 5.20142 6.40332 5.6084 6.4502 6.16699C6.49707 6.72559 6.63574 8.10547 6.69922 8.72559C6.66584 9.373 6.06222 10.7221 3.91477 10.9394C3.78945 9.4056 3.61634 7.8384 3.52479 6.33728Z\" fill=\"url(#paint16_radial_10246_159312)\" />\n\n      <path d=\"M3.52479 6.33728C3.46522 5.36072 4.03401 4.62758 4.82415 4.58924C5.43983 4.55936 5.83432 4.75084 6.11318 5.06775C6.20599 5.20142 6.40332 5.6084 6.4502 6.16699C6.49707 6.72559 6.63574 8.10547 6.69922 8.72559C6.66584 9.373 6.06222 10.7221 3.91477 10.9394C3.78945 9.4056 3.61634 7.8384 3.52479 6.33728Z\" fill=\"url(#paint17_radial_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"#FFC23E\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint18_linear_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint19_linear_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint20_radial_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint21_radial_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint22_linear_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint23_radial_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint24_radial_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint25_radial_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint26_radial_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint27_linear_10246_159312)\" />\n\n      <path d=\"M6.11318 5.0685C6.11318 5.0685 6.05957 4.77065 6.05957 4.15752C6.05957 3.54439 6.58827 2.73742 7.41201 2.67592C8.7206 2.57821 8.93545 3.65248 9.0624 4.15752L9.19922 7.71484C9.08203 8.04036 8.67578 8.74219 7.98828 8.94531C7.30078 9.14844 6.82943 8.86068 6.67969 8.69141C6.60156 7.89062 6.4375 6.20312 6.40625 5.85938C6.375 5.51562 6.19785 5.18889 6.11318 5.0685Z\" fill=\"url(#paint28_radial_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"#FFC23E\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint29_linear_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint30_linear_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint31_radial_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint32_linear_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint33_radial_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint34_radial_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint35_radial_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint36_linear_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint37_linear_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint38_radial_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint39_radial_10246_159312)\" />\n\n      <path d=\"M10.4437 1.23817C11.6483 1.06813 12.2267 2.26542 12.0802 3.30216C11.9943 3.45951 11.9337 3.79649 11.9141 3.94531L11.6992 8.10547C10.8008 9.25781 9.53125 8.96484 9.17969 7.71484L9.0626 4.15738C9.08973 3.10816 8.83799 1.46464 10.4437 1.23817Z\" fill=\"url(#paint40_radial_10246_159312)\" />\n\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"#FFC23E\" />\n\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"url(#paint41_radial_10246_159312)\" />\n\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"url(#paint42_linear_10246_159312)\" />\n\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"url(#paint43_linear_10246_159312)\" />\n\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"url(#paint44_radial_10246_159312)\" />\n\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"url(#paint45_radial_10246_159312)\" />\n\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"url(#paint46_radial_10246_159312)\" />\n\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"url(#paint47_radial_10246_159312)\" />\n\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"url(#paint48_linear_10246_159312)\" />\n      <path d=\"M11.8994 4.15737C11.9482 2.8956 12.7903 2.56181 13.3594 2.57873C14.1794 2.60311 14.8301 3.32672 14.8047 4.15803L14.5987 8.92578C14.5501 9.1505 14.207 9.94531 13.2227 9.96094C12.2383 9.97656 11.8066 8.711 11.7139 8.07626L11.8994 4.15737Z\" fill=\"url(#paint49_radial_10246_159312)\" />\n    </svg>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles } from '@fluentui/react';\nimport { ParticipantListItemStyles } from '../ParticipantList';\n\n/**\n * @private\n */\nexport const participantListStyle = mergeStyles({\n  height: '100%',\n  padding: '0.125rem'\n});\n\n/**\n * @private\n */\nexport const participantListItemStyle: ParticipantListItemStyles = {\n  root: {\n    paddingLeft: '1rem',\n    paddingRight: '1rem',\n    ':focus-visible': {\n      margin: '0.125rem'\n    }\n  }\n};\n\n/**\n * @private\n */\nexport const iconStyles = mergeStyles({\n  display: 'flex',\n  lineHeight: 0,\n  alignItems: 'center'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Icon, IContextualMenuItem, IContextualMenuItemStyles, merge, mergeStyles, PersonaPresence, Stack, Theme } from '@fluentui/react';\n/* @conditional-compile-remove(total-participant-count) */ /* @conditional-compile-remove(raise-hand) */\nimport { Text } from '@fluentui/react';\n/* @conditional-compile-remove(raise-hand) */\nimport { useTheme, CallingTheme } from '../theming';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHandIcon } from './assets/RaisedHandIcon';\nimport React, { useCallback, useMemo } from 'react';\nimport { useIdentifiers } from '../identifiers';\nimport { useLocale } from '../localization';\nimport { BaseCustomStyles, CallParticipantListParticipant, OnRenderAvatarCallback, ParticipantListParticipant } from '../types';\n/* @conditional-compile-remove(raise-hand) */\nimport { CustomAvatarOptions } from '../types';\nimport { ParticipantItem, ParticipantItemStrings, ParticipantItemStyles } from './ParticipantItem';\nimport { iconStyles, participantListItemStyle, participantListStyle } from './styles/ParticipantList.styles';\nimport { _formatString } from '@internal/acs-ui-common';\n\n/**\n * Styles for the {@link ParticipantList} {@link ParticipantItem}.\n *\n * @public\n */\nexport interface ParticipantListItemStyles extends ParticipantItemStyles {\n  /** Styles applied to the sub-menu of the {@link ParticipantList} {@link ParticipantItem}. */\n  participantSubMenuItemsStyles?: IContextualMenuItemStyles;\n}\n\n/**\n * Styles for the {@link ParticipantList}.\n *\n * @public\n */\nexport interface ParticipantListStyles extends BaseCustomStyles {\n  /** Styles for the {@link ParticipantList} {@link ParticipantItem}. */\n  participantItemStyles?: ParticipantListItemStyles;\n}\n/**\n * A callback for providing custom menu items for each participant in {@link ParticipantList}.\n *\n * @public\n */\nexport type ParticipantMenuItemsCallback = (participantUserId: string, userId?: string, defaultMenuItems?: IContextualMenuItem[]) => IContextualMenuItem[];\n\n/**\n * Props for {@link ParticipantList}.\n *\n * @public\n */\nexport type ParticipantListProps = {\n  /** Participants in user call or chat */\n  participants: ParticipantListParticipant[];\n  /** User ID of user */\n  myUserId?: string;\n  /**\n   * If set to `true`, excludes the local participant from the participant list with use of `myUserId` props (required in this case).\n   *\n   * @defaultValue `false`\n   */\n  excludeMe?: boolean;\n  /** Optional callback to render each participant. If no callback is provided, each participant will be rendered with `ParticipantItem`  */\n  onRenderParticipant?: (participant: ParticipantListParticipant) => JSX.Element | null;\n  /** Optional callback to render the avatar for each participant. This property will have no effect if `onRenderParticipant` is assigned.  */\n  onRenderAvatar?: OnRenderAvatarCallback;\n  /** Optional callback to render the context menu for each participant  */\n  onRemoveParticipant?: (userId: string) => void;\n  /** Optional callback to render custom menu items for each participant. */\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  /** Optional callback when rendered ParticipantItem is clicked */\n  onParticipantClick?: (participant?: ParticipantListParticipant) => void;\n  styles?: ParticipantListStyles;\n  /** Optional value to determine if the tooltip should be shown for participants or not */\n  showParticipantOverflowTooltip?: boolean;\n  /** Optional aria-labelledby prop that prefixes each ParticipantItem aria-label */\n  participantAriaLabelledBy?: string;\n};\nconst onRenderParticipantDefault = (participant: ParticipantListParticipant, strings: ParticipantItemStrings, myUserId?: string, onRenderAvatar?: OnRenderAvatarCallback, createParticipantMenuItems?: (participant: ParticipantListParticipant) => IContextualMenuItem[], styles?: ParticipantListItemStyles, onParticipantClick?: (participant?: ParticipantListParticipant) => void, showParticipantOverflowTooltip?: boolean, participantAriaLabelledBy?: string, theme?: Theme): JSX.Element | null => {\n  const callingParticipant = (participant as CallParticipantListParticipant);\n  let presence: PersonaPresence | undefined = undefined;\n  if (callingParticipant) {\n    presence = PersonaPresence.none;\n  }\n  const menuItems = createParticipantMenuItems && createParticipantMenuItems(participant);\n  let displayName = participant.displayName;\n  /* @conditional-compile-remove(raise-hand) */\n  const callingPalette = ((theme as unknown) as CallingTheme).callingPalette;\n  const onRenderIcon = callingParticipant?.isScreenSharing || callingParticipant?.isMuted || /* @conditional-compile-remove(raise-hand) */callingParticipant?.raisedHand ? () => <Stack horizontal={true} tokens={{\n    childrenGap: '0.5rem'\n  }}>\n            {/* @conditional-compile-remove(raise-hand) */callingParticipant.raisedHand && <Stack horizontal={true} tokens={{\n      childrenGap: '0.2rem'\n    }} style={{\n      alignItems: 'center',\n      padding: '0.1rem 0.2rem',\n      backgroundColor: theme?.palette.neutralLighter,\n      borderRadius: '0.3rem'\n    }}>\n                  {callingParticipant.raisedHand.raisedHandOrderPosition && <Stack.Item>\n                      <Text>{callingParticipant.raisedHand?.raisedHandOrderPosition}</Text>\n                    </Stack.Item>}\n                  <Stack.Item>\n                    <RaisedHandIcon />\n                  </Stack.Item>\n                </Stack>}\n            {callingParticipant.isScreenSharing && <Icon iconName=\"ParticipantItemScreenShareStart\" className={iconStyles} ariaLabel={strings.sharingIconLabel} />}\n            {callingParticipant.isMuted && <Icon iconName=\"ParticipantItemMicOff\" className={iconStyles} ariaLabel={strings.mutedIconLabel} />}\n            {}\n          </Stack> : () => null;\n\n  /* @conditional-compile-remove(raise-hand) */\n  const onRenderAvatarWithRaiseHand = callingParticipant?.raisedHand && onRenderAvatar ? (userId?: string, options?: CustomAvatarOptions, defaultOnRender?: (props: CustomAvatarOptions) => JSX.Element) => onRenderAvatar(userId, {\n    ...options,\n    styles: {\n      root: {\n        border: callingPalette.raiseHandGold\n      }\n    }\n  }, defaultOnRender) : onRenderAvatar;\n  return <ParticipantItem styles={styles} key={participant.userId} userId={participant.userId} displayName={displayName} me={myUserId ? participant.userId === myUserId : false} menuItems={menuItems} presence={presence} onRenderIcon={onRenderIcon} onRenderAvatar={onRenderAvatarWithRaiseHand} onClick={() => onParticipantClick?.(participant)} showParticipantOverflowTooltip={showParticipantOverflowTooltip} ariaLabelledBy={participantAriaLabelledBy} />;\n};\n\n/**\n * Sort participants by raised hand order position\n */\nconst sortParticipants = (participants: ParticipantListParticipant[]): ParticipantListParticipant[] => {\n  /* @conditional-compile-remove(raise-hand) */\n  const isParticipantListCallParticipant = function (participant: ParticipantListParticipant): boolean {\n    return 'raisedHand' in participant;\n  };\n\n  /* @conditional-compile-remove(raise-hand) */\n  participants.sort((a, b) => {\n    if (!isParticipantListCallParticipant(a) || !isParticipantListCallParticipant(b)) {\n      return 0;\n    }\n    const callA = (a as CallParticipantListParticipant);\n    const callB = (b as CallParticipantListParticipant);\n    if (callA.raisedHand && callB.raisedHand) {\n      return callA.raisedHand.raisedHandOrderPosition - callB.raisedHand.raisedHandOrderPosition;\n    } else if (callA.raisedHand) {\n      return -1;\n    } else if (callB.raisedHand) {\n      return 1;\n    }\n    return 0;\n  });\n  return participants;\n};\nconst getParticipantsForDefaultRender = (participants: ParticipantListParticipant[], excludeMe: boolean, myUserId: string | undefined): ParticipantListParticipant[] => {\n  if (!excludeMe || !myUserId) {\n    return [...participants];\n  }\n  const userIndex = participants.map(p => p.userId).indexOf(myUserId);\n  if (userIndex === -1) {\n    return [...participants];\n  }\n  const remoteParticipants = [...participants];\n  remoteParticipants.splice(userIndex, 1);\n  return remoteParticipants;\n};\n\n/**\n * Component to render all calling or chat participants.\n *\n * By default, each participant is rendered with {@link ParticipantItem}. See {@link ParticipantListProps.onRenderParticipant} to override.\n *\n * @public\n */\nexport const ParticipantList = (props: ParticipantListProps): JSX.Element => {\n  const {\n    excludeMe = false,\n    myUserId,\n    participants,\n    onRemoveParticipant,\n    onRenderAvatar,\n    onRenderParticipant,\n    onFetchParticipantMenuItems,\n    showParticipantOverflowTooltip,\n    participantAriaLabelledBy\n  } = props;\n\n  /* @conditional-compile-remove(raise-hand) */\n  const theme = useTheme();\n  const ids = useIdentifiers();\n  const participantItemStrings = useLocale().strings.participantItem;\n  const displayedParticipants: ParticipantListParticipant[] = useMemo(() => {\n    return onRenderParticipant ? participants : getParticipantsForDefaultRender(participants, excludeMe, myUserId);\n  }, [participants, excludeMe, myUserId, onRenderParticipant]);\n  sortParticipants(displayedParticipants);\n  const createParticipantMenuItems = useCallback((participant: ParticipantListParticipant): IContextualMenuItem[] => {\n    let menuItems: IContextualMenuItem[] = [];\n    const participantIsRemovable = participant.isRemovable;\n    if (participant.userId !== myUserId && onRemoveParticipant && participantIsRemovable) {\n      menuItems.push({\n        key: 'remove',\n        text: participantItemStrings.removeButtonLabel,\n        onClick: () => onRemoveParticipant(participant.userId),\n        itemProps: {\n          styles: props.styles?.participantItemStyles?.participantSubMenuItemsStyles\n        },\n        'data-ui-id': ids.participantListRemoveParticipantButton\n      });\n    }\n    if (onFetchParticipantMenuItems) {\n      menuItems = onFetchParticipantMenuItems(participant.userId, myUserId, menuItems);\n    }\n    return menuItems;\n  }, [ids.participantListRemoveParticipantButton, myUserId, onFetchParticipantMenuItems, onRemoveParticipant, props.styles?.participantItemStyles?.participantSubMenuItemsStyles, /* @conditional-compile-remove(raise-hand) */\n  participantItemStrings.removeButtonLabel]);\n  const participantItemStyles = useMemo(() => merge(participantListItemStyle, props.styles?.participantItemStyles), [props.styles?.participantItemStyles]);\n  return <Stack data-ui-id={ids.participantList} className={mergeStyles(participantListStyle, props.styles?.root)} role={'menu'}>\n      {displayedParticipants.map((participant: ParticipantListParticipant) => onRenderParticipant ? onRenderParticipant(participant) : onRenderParticipantDefault(participant, participantItemStrings, myUserId, onRenderAvatar, createParticipantMenuItems, participantItemStyles, props.onParticipantClick, showParticipantOverflowTooltip, participantAriaLabelledBy, /* @conditional-compile-remove(raise-hand) */\n    theme))}\n      {}\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * For keyboard navigation - when this component has active focus, enter key and space keys should have the same behavior as mouse click.\n *\n * @private\n */\nexport const submitWithKeyboard = (e: React.KeyboardEvent<HTMLElement>, onSubmit: (e?: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>) => void): void => {\n  if (e.key === 'Enter' || e.key === ' ') {\n    onSubmit(e);\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { FocusZone, FontIcon, IFontIconProps, IIconProps, IRawStyle, IStackStyles, IStyle, mergeStyles, Stack, Text } from '@fluentui/react';\nimport React from 'react';\nimport { useTheme } from '../../theming/FluentThemeProvider';\nimport { BaseCustomStyles } from '../../types';\nimport { submitWithKeyboard } from '../utils/keyboardNavigation';\n\n/**\n * Props for the DrawerMenuItem\n *\n * @internal\n */\nexport interface _DrawerMenuItemProps {\n  onItemClick?: (ev?: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>, itemKey?: string) => void;\n  itemKey: string;\n  /** Text that shows at the start of the menu item after any icon supplied */\n  text?: string;\n  /** Text that shows at the end of the menu item before any secondaryIcon is supplied */\n  secondaryText?: string;\n  /** A component that shows at the end of the menu item before any secondaryIcon is supplied */\n  secondaryComponent?: JSX.Element;\n  /** Icon shown at the start of the menu item (before the menu item text) */\n  iconProps?: IIconProps;\n  /**\n   * Icon shown at the end of the menu item.\n   * By default if this component has subMenuProps, this icon is the RightChevron.\n   */\n  secondaryIconProps?: IIconProps;\n  styles?: BaseCustomStyles;\n  subMenuProps?: _DrawerMenuItemProps[];\n  /**\n   * Whether the menu item is disabled\n   * @defaultvalue false\n   */\n  disabled?: boolean;\n  /**\n   * A unique id set for the standard HTML id attibute\n   */\n  id?: string;\n  /**\n   * Property to set the focus since this is the first item in the menu\n   */\n  shouldFocusOnMount?: boolean;\n}\n\n/**\n * Maps the individual item in menuProps.items passed in the {@link DrawerMenu} into a UI component.\n *\n * @private\n */\nexport const DrawerMenuItem = (props: _DrawerMenuItemProps): JSX.Element => {\n  const theme = useTheme();\n  const onClick = (ev?: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>): void => props.onItemClick && props.onItemClick(ev, props.itemKey);\n  const onKeyPress = (ev: React.KeyboardEvent<HTMLElement>): void => onClick && submitWithKeyboard(ev, onClick);\n  const secondaryIcon = props.secondaryIconProps ? <MenuItemIcon {...props.secondaryIconProps} /> : props.subMenuProps ? <MenuItemIcon iconName=\"ChevronRight\" /> : undefined;\n  return <FocusZone shouldFocusOnMount={props.shouldFocusOnMount}>\n      <Stack tabIndex={0} role=\"menuitem\" horizontal className={mergeStyles(drawerMenuItemRootStyles(theme.palette.neutralLight, theme.fonts.small), props.disabled ? disabledDrawerMenuItemRootStyles(theme.palette.neutralQuaternaryAlt) : undefined, props.styles?.root)} onKeyPress={props.disabled ? undefined : onKeyPress} onClick={props.disabled ? undefined : onClick} tokens={menuItemChildrenGap} id={props.id}>\n        {props.iconProps && <Stack.Item role=\"presentation\" styles={props.disabled ? {\n        root: {\n          color: theme.palette.neutralTertiaryAlt\n        }\n      } : undefined}>\n            <MenuItemIcon {...props.iconProps} />\n          </Stack.Item>}\n        <Stack.Item styles={drawerMenuItemTextStyles} grow>\n          <Text styles={props.disabled ? {\n          root: {\n            color: theme.palette.neutralTertiaryAlt\n          }\n        } : undefined}>\n            {props.text}\n          </Text>\n        </Stack.Item>\n        {props.secondaryText && <Stack.Item styles={drawerMenuItemTextStyles} className={mergeStyles(secondaryTextStyles)}>\n            <Text styles={{\n          root: {\n            color: props.disabled ? theme.palette.neutralTertiaryAlt : theme.palette.neutralSecondary\n          }\n        }}>\n              {props.secondaryText}\n            </Text>\n          </Stack.Item>}\n        {props.secondaryComponent && <Stack.Item>{props.secondaryComponent}</Stack.Item>}\n        {secondaryIcon && <Stack.Item>{secondaryIcon}</Stack.Item>}\n      </Stack>\n    </FocusZone>;\n};\nconst MenuItemIcon = (props: IFontIconProps): JSX.Element => <FontIcon className={mergeStyles(iconStyles)} {...props} />;\nconst menuItemChildrenGap = {\n  childrenGap: '0.5rem'\n};\nconst drawerMenuItemRootStyles = (hoverBackground: string, fontSize: IRawStyle): IStyle => ({\n  ...fontSize,\n  height: '3rem',\n  lineHeight: '3rem',\n  padding: '0rem 0.75rem',\n  cursor: 'pointer',\n  ':hover, :focus': {\n    background: hoverBackground\n  }\n});\nconst disabledDrawerMenuItemRootStyles = (background: string): IStyle => ({\n  pointerEvents: 'none',\n  background: background,\n  ':hover, :focus': {\n    background: background\n  }\n});\n\n/** Ensure long text entries appropriately show ellipsis instead of wrapping to a new line or showing a scrollbar */\nconst drawerMenuItemTextStyles: IStackStyles = {\n  root: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  }\n};\nconst iconStyles: IStyle = {\n  // Vertically center icons in the menu item. Using line-height does not work for centering fluent SVG icons.\n  display: 'flex',\n  alignItems: 'center',\n  height: '100%',\n  // This can be removed when we upgrade to fluent-react-icons v2 (that removes the inner span element)\n  ' span': {\n    display: 'flex',\n    alignItems: 'center',\n    height: '100%'\n  }\n};\nconst secondaryTextStyles: IStyle = {\n  // limit width for secondaryText in the menu item so it does not overlap with text on left.\n  maxWidth: '50%'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { AnimationStyles, IStyle, mergeStyles, Stack, Text, Theme, useTheme } from '@fluentui/react';\nimport React from 'react';\nimport { BaseCustomStyles } from '../../types';\n\n/**\n * Container that holds the content of the drawer\n *\n * @private\n */\nexport const DrawerContentContainer = (props: {\n  children: React.ReactNode;\n  heading?: string;\n  styles?: BaseCustomStyles;\n}): JSX.Element => {\n  const theme = useTheme();\n  const backgroundColor = theme.palette.white;\n  const borderRadius = theme.effects.roundedCorner4;\n  const rootStyles = mergeStyles(containerStyles(backgroundColor, borderRadius), props.styles?.root);\n  return <Stack className={rootStyles}>\n      {props.heading && <Stack className={mergeStyles(headingContainerStyles)}>\n          <Text className={mergeStyles(headingStyles(theme))}>{props.heading}</Text>\n        </Stack>}\n      {props.children}\n    </Stack>;\n};\nconst containerStyles = (backgroundColor: string, borderRadius: string): IStyle => ({\n  background: backgroundColor,\n  borderTopRightRadius: borderRadius,\n  borderTopLeftRadius: borderRadius,\n  ...AnimationStyles.slideUpIn10\n});\nconst headingContainerStyles: IStyle = {\n  textAlign: 'center',\n  width: '100%',\n  padding: '0.5rem'\n};\nconst headingStyles = (theme: Theme): IStyle => ({\n  color: theme.palette.neutralSecondary,\n  fontSize: theme.fonts.smallPlus.fontSize,\n  lineHeight: '1rem',\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles, mergeStyles, Stack } from '@fluentui/react';\nimport React from 'react';\nimport { BaseCustomStyles } from '../../types';\n\n/**\n * An element that fills the space the DrawerContentContainer does not take up.\n * This is the element that enables the light dismiss feature.\n *\n * @private\n */\nexport const DrawerLightDismiss = (props: {\n  onDismiss: () => void;\n  styles?: BaseCustomStyles;\n}): JSX.Element => {\n  return <Stack className={mergeStyles(lightDismissContainerStyles, props.styles)} grow onClick={() => props.onDismiss()} />;\n};\nconst lightDismissContainerStyles: IStackStyles = {\n  root: {\n    height: '100%'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { FocusTrapZone, IStyle, mergeStyles, mergeStyleSets, Stack } from '@fluentui/react';\nimport React from 'react';\nimport { BaseCustomStyles } from '../../types';\nimport { DrawerContentContainer } from './DrawerContentContainer';\nimport { DrawerLightDismiss } from './DrawerLightDismiss';\n\n/**\n * Styles for the {@link _DrawerSurface}.\n *\n * @internal\n */\nexport interface _DrawerSurfaceStyles extends BaseCustomStyles {\n  /** Styles for the root of the container of the {@link DrawerSurface} content. */\n  drawerContentRoot?: BaseCustomStyles;\n  /** Styles for the container of the {@link DrawerSurface} content. */\n  drawerContentContainer?: BaseCustomStyles;\n  /** Styles for the light dismiss element of the {@link DrawerSurface}. */\n  lightDismissRoot?: BaseCustomStyles;\n}\n\n/**\n * Props for {@link DrawerSurface} component.\n *\n * @internal\n */\nexport interface _DrawerSurfaceProps {\n  /** Content of the Drawer */\n  children: React.ReactNode;\n\n  /**\n   * Callback when the drawer's light-dismissal is triggered.\n   */\n  onLightDismiss: () => void;\n\n  /**\n   * String to show in heading of drawer surface\n   */\n  heading?: string;\n\n  /**\n   * By default, maxHeight value is set to 75%.\n   * Set value to true for no default maxHeight to be applied on drawerSurface\n   */\n  disableMaxHeight?: boolean;\n\n  /** Styles for the {@link DrawerSurface} */\n  styles?: _DrawerSurfaceStyles;\n}\n\n/**\n * A `Drawer` can be used to reveal lightweight views inside your application.\n * They appear from the bottom of the screen upwards and are light-dismissed.\n *\n * @internal\n */\nexport const _DrawerSurface = (props: _DrawerSurfaceProps): JSX.Element => {\n  const rootStyles = props.disableMaxHeight ? mergeStyles(drawerSurfaceStyles, props.styles?.root) : mergeStyles(drawerSurfaceStyles, focusTrapZoneStyles, props.styles?.root);\n  const containerStyles = mergeStyleSets(drawerContentContainerStyles, props.styles?.drawerContentContainer);\n  return <Stack className={rootStyles}>\n      <DrawerLightDismiss styles={props.styles?.lightDismissRoot} onDismiss={props.onLightDismiss} />\n      <FocusTrapZone onKeyDown={e => {\n      if (e.key === 'Escape' || e.key === 'Esc') {\n        props.onLightDismiss && props.onLightDismiss();\n      }\n    }}\n    // Ensure when the focus trap has focus, the light dismiss area can still be clicked with mouse to dismiss.\n    // Note: this still correctly captures keyboard focus, this just allows mouse click outside of the focus trap.\n    isClickableOutsideFocusTrap={true}>\n        <DrawerContentContainer styles={containerStyles} heading={props.heading}>\n          {props.children}\n        </DrawerContentContainer>\n      </FocusTrapZone>\n    </Stack>;\n};\nconst drawerSurfaceStyles: IStyle = {\n  width: '100%',\n  height: '100%',\n  background: 'rgba(0,0,0,0.4)'\n};\nconst focusTrapZoneStyles: IStyle = {\n  // Targets FocusTrapZone in drawer.\n  // Setting percentage to Height to transform a container does not work unless the\n  // direct parent container also has a Height set other than 'auto'.\n  '> div:nth-child(2)': {\n    maxHeight: '75%',\n    overflow: 'auto'\n  }\n};\nconst drawerContentContainerStyles: BaseCustomStyles = {\n  root: {\n    height: 'auto'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { merge, Stack } from '@fluentui/react';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { _DrawerSurfaceProps } from '.';\nimport { useTheme } from '../../theming/FluentThemeProvider';\nimport { BaseCustomStyles } from '../../types';\nimport { DrawerMenuItem, _DrawerMenuItemProps } from './DrawerMenuItem';\nimport { _DrawerSurface, _DrawerSurfaceStyles } from './DrawerSurface';\n\n/**\n * Styles for the {@link _DrawerMenu}.\n *\n * @internal\n */\nexport interface _DrawerMenuStyles extends BaseCustomStyles {\n  /** Styles for the {@link DrawerSurface} container. */\n  drawerSurfaceStyles?: _DrawerSurfaceStyles;\n}\n\n/**\n * Props for the {@link _DrawerMenu}\n *\n * @internal\n */\nexport interface _DrawerMenuProps {\n  items: _DrawerMenuItemProps[];\n\n  /**\n   * Callback when the drawer's light-dismissal is triggered.\n   */\n  onLightDismiss: () => void;\n\n  /**\n   * String to show in heading of drawer menu\n   */\n  heading?: string;\n\n  /**\n   * By default, maxHeight value is set to 75%.\n   * Set value to true for no default maxHeight to be applied on drawerSurface\n   */\n  disableMaxHeight?: boolean;\n  styles?: _DrawerMenuStyles;\n}\n\n/**\n * Takes a set of menu items and returns a created menu inside a {@link _DrawerSurface}.\n *\n * @internal\n */\nexport const _DrawerMenu = (props: _DrawerMenuProps): JSX.Element => {\n  // This component breaks from a pure component pattern in order to internally support sub menus.\n  // When a sub menu item is clicked the menu items displayed is updated to be that of the submenu.\n  // To track this state we store a list of the keys clicked up until this point.\n  const [selectedKeyPath, setSelectedKeyPath] = useState<string[]>([]);\n\n  // Get the menu items that should be rendered\n  const menuItemsToRender = useMemo(() => {\n    let items: _DrawerMenuItemProps[] | undefined = props.items;\n    for (const subMenuKey of selectedKeyPath) {\n      items = items?.find(item => item.itemKey === subMenuKey)?.subMenuProps;\n    }\n    return items;\n  }, [props.items, selectedKeyPath]);\n\n  // When an item is clicked and it contains a submenu, push the key for the submenu. This will ensure\n  // a new render is triggered, menuItemsToRender will be re-calculated and the submenu will render.\n  const onItemClick = useCallback((item: _DrawerMenuItemProps, ev?: React.MouseEvent<HTMLElement, MouseEvent> | React.KeyboardEvent<HTMLElement> | undefined, itemKey?: string | undefined): void => {\n    if (item.subMenuProps) {\n      setSelectedKeyPath([...selectedKeyPath, item.itemKey]);\n    }\n    item.onItemClick?.(ev, itemKey);\n  }, [selectedKeyPath]);\n\n  // Ensure the first item has a border radius that matches the DrawerSurface\n  const borderRadius = useTheme().effects.roundedCorner4;\n  const firstItemStyle = menuItemsToRender && menuItemsToRender[0]?.styles;\n  const modifiedFirstItemStyle = useMemo(() => merge(firstItemStyle ?? {}, {\n    root: {\n      borderTopRightRadius: borderRadius,\n      borderTopLeftRadius: borderRadius\n    }\n  }), [firstItemStyle, borderRadius]);\n  return <_DrawerSurface disableMaxHeight={props.disableMaxHeight} styles={props.styles?.drawerSurfaceStyles} onLightDismiss={props.onLightDismiss} heading={props.heading}>\n      <Stack styles={props.styles} role=\"menu\" data-ui-id=\"drawer-menu\">\n        {menuItemsToRender?.slice(0, 1).map(item => <DrawerMenuItem {...item} key={`${item.itemKey}` + '0'} shouldFocusOnMount={true} styles={modifiedFirstItemStyle} onItemClick={(ev, itemKey) => {\n        onItemClick(item, ev, itemKey);\n      }} />)}\n        {menuItemsToRender?.slice(1).map((item, i) => <DrawerMenuItem {...item} key={`${item.itemKey}` + `${i + 1}`} onItemClick={(ev, itemKey) => {\n        onItemClick(item, ev, itemKey);\n      }} />)}\n      </Stack>\n    </_DrawerSurface>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle } from '@fluentui/react';\nimport { CSSProperties } from 'react';\n\n/** @private */\nexport const remoteVideoTileWrapperStyle: CSSProperties = {\n  height: '100%',\n  width: '100%',\n  position: 'relative'\n};\n\n/** @private */\nexport const drawerMenuWrapperStyles: {\n  root: IStyle;\n} = {\n  root: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    // Any zIndex > 0 will work because this is the only absolutely\n    // positioned element in the container.\n    zIndex: 2\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { VideoStreamOptions, CreateVideoStreamViewResult, ViewScalingMode } from '../../types';\n\n/** @private */\nexport interface VideoStreamLifecycleMaintainerExtendableProps {\n  isStreamAvailable?: boolean;\n  renderElementExists?: boolean;\n  isMirrored?: boolean;\n  scalingMode?: ViewScalingMode;\n  isScreenSharingOn?: boolean;\n}\ninterface VideoStreamLifecycleMaintainerProps extends VideoStreamLifecycleMaintainerExtendableProps {\n  onCreateStreamView: (options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult> | undefined;\n  onDisposeStreamView: () => void | undefined;\n}\n\n/**\n * Helper hook to maintain the video stream lifecycle. This calls onCreateStreamView and onDisposeStreamView\n * appropriately based on react lifecycle events and prop changes.\n *\n * @remarks\n *\n * Notes on handling changes to scaling mode:\n *\n * Ideally we have access to the original StreamRenderView and can call view.updateScalingMode() and do not need to recreate the stream view.\n * However, to support backwards compat we cannot guarantee this. If we don't have access to the original StreamRenderView we need to dispose\n * the old view and create a new one.\n *\n * Supporting both of these scenarios became too complex and fragile. When we introduce a breaking change this should be update to ensure that\n * onCreateStreamView _must_ return a view object with updateScalingMode and update logic in this hook to call view.updateScalingMode instead\n * of recreating the stream.\n *\n * @private\n */\nconst useVideoStreamLifecycleMaintainer = (props: VideoStreamLifecycleMaintainerProps): CreateVideoStreamViewResult | undefined => {\n  const {\n    isMirrored,\n    isScreenSharingOn,\n    isStreamAvailable,\n    onCreateStreamView,\n    onDisposeStreamView,\n    renderElementExists,\n    scalingMode\n  } = props;\n  const [videoStreamViewResult, setVideoStreamViewResult] = useState<CreateVideoStreamViewResult | undefined>();\n  useEffect(() => {\n    if (isStreamAvailable && !renderElementExists) {\n      onCreateStreamView?.({\n        isMirrored,\n        scalingMode\n      })?.then(result => {\n        result && setVideoStreamViewResult(result);\n      });\n    }\n\n    // Always clean up element to make tile up to date and be able to dispose correctly\n    return () => {\n      if (renderElementExists) {\n        // TODO: Remove `if isScreenSharingOn` when we isolate dispose behavior for screen share\n        if (!isScreenSharingOn) {\n          onDisposeStreamView?.();\n        }\n      }\n    };\n  }, [isMirrored, isScreenSharingOn, isStreamAvailable, onCreateStreamView, onDisposeStreamView, renderElementExists, scalingMode]);\n\n  // The execution order for above useEffect is onCreateRemoteStreamView =>(async time gap) RenderElement generated => element disposed => onDisposeRemoteStreamView\n  // Element disposed could happen during async time gap, which still cause leaks for unused renderElement.\n  // Need to do an entire cleanup when remoteTile gets disposed and make sure element gets correctly disposed\n  useEffect(() => {\n    return () => {\n      // TODO: Remove `if isScreenSharingOn` when we isolate dispose behavior for screen share\n      if (!isScreenSharingOn) {\n        onDisposeStreamView?.();\n      }\n    };\n  }, [isScreenSharingOn, onDisposeStreamView]);\n  return videoStreamViewResult;\n};\n\n/** @private */\nexport interface LocalVideoStreamLifecycleMaintainerProps extends VideoStreamLifecycleMaintainerExtendableProps {\n  onCreateLocalStreamView?: (options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  onDisposeLocalStreamView?: () => void;\n}\n\n/**\n * Extension of {@link useVideoStreamLifecycleMaintainer} specifically for local video streams\n *\n * @private\n */\nexport const useLocalVideoStreamLifecycleMaintainer = (props: LocalVideoStreamLifecycleMaintainerProps): CreateVideoStreamViewResult | undefined => {\n  const {\n    onCreateLocalStreamView,\n    onDisposeLocalStreamView\n  } = props;\n  const onCreateStreamView = useMemo(() => (options?: VideoStreamOptions) => {\n    return onCreateLocalStreamView?.(options);\n  }, [onCreateLocalStreamView]);\n  const onDisposeStreamView = useMemo(() => () => {\n    onDisposeLocalStreamView?.();\n  }, [onDisposeLocalStreamView]);\n  return useVideoStreamLifecycleMaintainer({\n    ...props,\n    onCreateStreamView,\n    onDisposeStreamView\n  });\n};\n\n/** @private */\nexport interface RemoteVideoStreamLifecycleMaintainerProps extends VideoStreamLifecycleMaintainerExtendableProps {\n  onCreateRemoteStreamView?: (userId: string, options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  onDisposeRemoteStreamView?: (userId: string) => Promise<void>;\n  remoteParticipantId: string;\n}\n\n/**\n * Extension of {@link useVideoStreamLifecycleMaintainer} specifically for remote video streams\n *\n * @private\n */\nexport const useRemoteVideoStreamLifecycleMaintainer = (props: RemoteVideoStreamLifecycleMaintainerProps): CreateVideoStreamViewResult | undefined => {\n  const {\n    remoteParticipantId,\n    onCreateRemoteStreamView,\n    onDisposeRemoteStreamView\n  } = props;\n  const onCreateStreamView = useMemo(() => (options?: VideoStreamOptions) => {\n    return onCreateRemoteStreamView?.(remoteParticipantId, options);\n  }, [onCreateRemoteStreamView, remoteParticipantId]);\n  const onDisposeStreamView = useMemo(() => () => {\n    onDisposeRemoteStreamView?.(remoteParticipantId);\n  }, [onDisposeRemoteStreamView, remoteParticipantId]);\n  return useVideoStreamLifecycleMaintainer({\n    ...props,\n    onCreateStreamView,\n    onDisposeStreamView\n  });\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IContextualMenuItem, IContextualMenuProps } from '@fluentui/react';\nimport { _formatString } from '@internal/acs-ui-common';\nimport { useMemo } from 'react';\nimport { VideoGalleryParticipant, ViewScalingMode } from '../../types';\nimport { _preventDismissOnEvent as preventDismissOnEvent } from '@internal/acs-ui-common';\n\n/**\n * @private\n */\nexport const useVideoTileContextualMenuProps = (props: {\n  participant: VideoGalleryParticipant;\n  strings?: {\n    fitRemoteParticipantToFrame?: string;\n    fillRemoteParticipantFrame?: string;\n    pinParticipantForMe?: string;\n    pinParticipantForMeLimitReached?: string;\n    unpinParticipantForMe?: string;\n    pinParticipantMenuItemAriaLabel?: string;\n    unpinParticipantMenuItemAriaLabel?: string;\n    pinnedParticipantAnnouncementAriaLabel?: string;\n    unpinnedParticipantAnnouncementAriaLabel?: string;\n  };\n  view?: {\n    updateScalingMode: (scalingMode: ViewScalingMode) => Promise<void>;\n  };\n  isPinned?: boolean;\n  onPinParticipant?: (userId: string) => void;\n  onUnpinParticipant?: (userId: string) => void;\n  onUpdateScalingMode?: (userId: string, scalingMode: ViewScalingMode) => void;\n  disablePinMenuItem?: boolean;\n  toggleAnnouncerString?: (announcerString: string) => void;\n}): IContextualMenuProps | undefined => {\n  const {\n    participant,\n    view,\n    strings,\n    isPinned,\n    onPinParticipant,\n    onUnpinParticipant,\n    onUpdateScalingMode,\n    disablePinMenuItem,\n    toggleAnnouncerString\n  } = props;\n  const scalingMode = useMemo(() => {\n    return props.participant.videoStream?.scalingMode;\n  }, [props.participant.videoStream?.scalingMode]);\n  const contextualMenuProps: IContextualMenuProps | undefined = useMemo(() => {\n    const items: IContextualMenuItem[] = [];\n    if (isPinned !== undefined) {\n      if (isPinned && onUnpinParticipant && strings?.unpinParticipantForMe) {\n        let unpinActionString: string | undefined = undefined;\n        if (toggleAnnouncerString && strings.unpinParticipantMenuItemAriaLabel && participant.displayName) {\n          unpinActionString = _formatString(strings?.unpinParticipantMenuItemAriaLabel, {\n            participantName: participant.displayName\n          });\n        }\n        items.push({\n          key: 'unpin',\n          text: strings.unpinParticipantForMe,\n          iconProps: {\n            iconName: 'UnpinParticipant',\n            styles: {\n              root: {\n                lineHeight: '1rem',\n                textAlign: 'center'\n              }\n            }\n          },\n          onClick: () => {\n            onUnpinParticipant(participant.userId);\n            unpinActionString && toggleAnnouncerString?.(unpinActionString);\n          },\n          'data-ui-id': 'video-tile-unpin-participant-button',\n          ariaLabel: unpinActionString\n        });\n      }\n      if (!isPinned && onPinParticipant && strings?.pinParticipantForMe) {\n        let pinActionString: string | undefined = undefined;\n        if (toggleAnnouncerString && strings.pinnedParticipantAnnouncementAriaLabel && participant.displayName) {\n          pinActionString = _formatString(strings?.pinnedParticipantAnnouncementAriaLabel, {\n            participantName: participant.displayName\n          });\n        }\n        items.push({\n          key: 'pin',\n          text: disablePinMenuItem ? strings.pinParticipantForMeLimitReached : strings.pinParticipantForMe,\n          iconProps: {\n            iconName: 'PinParticipant',\n            styles: {\n              root: {\n                lineHeight: '1rem',\n                textAlign: 'center'\n              }\n            }\n          },\n          onClick: () => {\n            onPinParticipant(participant.userId);\n            pinActionString && toggleAnnouncerString?.(pinActionString);\n          },\n          'data-ui-id': 'video-tile-pin-participant-button',\n          disabled: disablePinMenuItem,\n          ariaLabel: pinActionString\n        });\n      }\n    }\n    if (scalingMode) {\n      if (scalingMode === 'Crop' && strings?.fitRemoteParticipantToFrame) {\n        items.push({\n          key: 'fitRemoteParticipantToFrame',\n          text: strings.fitRemoteParticipantToFrame,\n          iconProps: {\n            iconName: 'VideoTileScaleFit',\n            styles: {\n              root: {\n                lineHeight: '1rem',\n                textAlign: 'center'\n              }\n            }\n          },\n          onClick: () => {\n            onUpdateScalingMode?.(participant.userId, 'Fit');\n            view?.updateScalingMode('Fit');\n          },\n          'data-ui-id': 'video-tile-fit-to-frame',\n          ariaLabel: strings.fitRemoteParticipantToFrame\n        });\n      } else if (scalingMode === 'Fit' && strings?.fillRemoteParticipantFrame) {\n        items.push({\n          key: 'fillRemoteParticipantFrame',\n          text: strings.fillRemoteParticipantFrame,\n          iconProps: {\n            iconName: 'VideoTileScaleFill',\n            styles: {\n              root: {\n                lineHeight: '1rem',\n                textAlign: 'center'\n              }\n            }\n          },\n          onClick: () => {\n            onUpdateScalingMode?.(participant.userId, 'Crop');\n            view?.updateScalingMode('Crop');\n          },\n          'data-ui-id': 'video-tile-fill-frame',\n          ariaLabel: strings.fillRemoteParticipantFrame\n        });\n      }\n    }\n    if (items.length === 0) {\n      return undefined;\n    }\n    return {\n      items,\n      styles: {},\n      calloutProps: {\n        preventDismissOnEvent\n      }\n    };\n  }, [scalingMode, strings, view, isPinned, onPinParticipant, onUnpinParticipant, onUpdateScalingMode, participant.userId, participant.displayName, disablePinMenuItem, toggleAnnouncerString]);\n  return contextualMenuProps;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IButtonStyles, IStyle, mergeStyles, Theme, ITheme } from '@fluentui/react';\n/**\n * @private\n */\nexport const rootStyles: IStyle = {\n  position: 'relative',\n  height: '100%',\n  width: '100%'\n};\n\n/**\n * @private\n */\nexport const videoContainerStyles: IStyle = {\n  position: 'absolute',\n  top: '0',\n  left: '0',\n  width: '100%',\n  height: '100%',\n  minWidth: '100%',\n  minHeight: '100%',\n  objectPosition: 'center',\n  objectFit: 'cover',\n  zIndex: 0\n};\n\n/**\n * @private\n */\nexport const overlayContainerStyles: IStyle = {\n  width: '100%',\n  height: '100%',\n  zIndex: 5\n};\n\n/**\n * @private\n */\nexport const tileInfoContainerStyle = mergeStyles({\n  position: 'absolute',\n  bottom: '0',\n  left: '0',\n  padding: '0.5rem',\n  width: '100%'\n});\n\n/**\n * @private\n */\nexport const disabledVideoHint = mergeStyles({\n  backgroundColor: 'inherit',\n  boxShadow: 'none',\n  textAlign: 'left',\n  overflow: 'hidden',\n  whiteSpace: 'nowrap',\n  alignItems: 'center',\n  padding: '0.15rem',\n  maxWidth: '100%'\n});\n\n/**\n * @private\n */\nexport const videoHint = mergeStyles(disabledVideoHint, {\n  // This will appear on top of the video stream, so no dependency on theme and explicitly use a translucent white\n  backgroundColor: 'rgba(255,255,255,0.8)'\n});\n\n/**\n * @private\n */\nexport const displayNameStyle: IStyle = {\n  padding: '0.1rem',\n  fontSize: '0.75rem',\n  fontWeight: 600,\n  // Text component will take body color by default (white in Dark Mode), so forcing it to be parent container color\n  color: 'inherit',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  maxWidth: '100%'\n};\n\n/**\n * @private\n */\nexport const pinIconStyle: IStyle = {\n  padding: '0.125rem'\n};\n\n/**\n * @private\n */\nexport const iconContainerStyle: IStyle = {\n  margin: 'auto',\n  alignItems: 'center',\n  '& svg': {\n    display: 'block',\n    // Similar to text color, icon color will be inherited from parent container\n    color: 'inherit'\n  }\n};\n\n/**\n * @private\n */\nexport const participantStateStringStyles = (theme: Theme): IStyle => {\n  return {\n    minWidth: 'max-content',\n    color: theme.palette.black,\n    fontSize: '0.75rem',\n    lineHeight: 'normal',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    padding: '0.1rem'\n  };\n};\n\n/**\n * @private\n */\nexport const moreButtonStyles: IButtonStyles = {\n  root: {\n    // To ensure that the button is clickable when there is a floating video tile\n    zIndex: 1,\n    color: 'inherit',\n    top: '-0.125rem',\n    height: '100%',\n    padding: '0rem'\n  },\n  rootHovered: {\n    background: 'none'\n  },\n  rootPressed: {\n    background: 'none'\n  },\n  rootExpanded: {\n    background: 'none'\n  }\n};\n\n/**\n * @private\n */\nexport const raiseHandContainerStyles = (theme: ITheme, limitedSpace: boolean): string => mergeStyles({\n  alignItems: 'center',\n  padding: '0.2rem 0.3rem',\n  backgroundColor: theme.palette.white,\n  opacity: 0.9,\n  borderRadius: '1rem',\n  margin: '0.5rem',\n  width: 'fit-content',\n  position: 'absolute'\n}, limitedSpace && raiseHandLimitedSpaceStyles);\n\n/**\n * @private\n */\nexport const raiseHandLimitedSpaceStyles: IStyle = {\n  // position centrally\n  marginLeft: 'auto',\n  marginRight: 'auto',\n  left: 0,\n  right: 0,\n  // position at the bottom\n  bottom: 0\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { DefaultPalette as palette, IStyle, Theme, IPalette } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const getVideoTileOverrideColor = (isVideoRendered: boolean, theme: Theme, color: keyof IPalette): IStyle => {\n  // when video is being rendered, the info has a grey-ish background, so no use of theme\n  return {\n    color: isVideoRendered ? palette[color] : theme.palette[color]\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { useMemo, useRef, useState, useCallback, useEffect } from 'react';\n\n/**\n * @private\n */\nexport default function useLongPress(props: {\n  onLongPress: () => void;\n  onClick?: () => void;\n  touchEventsOnly?: boolean;\n}): {\n  onClick: () => void;\n  onMouseDown: () => void;\n  onMouseUp: () => void;\n  onTouchStart: () => void;\n  onTouchEnd: () => void;\n  onKeyDown: () => void;\n  onKeyUp: () => void;\n  onTouchMove: () => void;\n} {\n  const {\n    onClick,\n    onLongPress,\n    touchEventsOnly = false\n  } = props;\n  const timerRef = useRef<ReturnType<typeof setTimeout>>();\n  const [isLongPress, setIsLongPress] = useState(false);\n  const [action, setAction] = useState(false);\n  useEffect(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n    }\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n      }\n    };\n  }, [onClick, onLongPress, touchEventsOnly]);\n  const startPressTimer = useCallback(() => {\n    setIsLongPress(false);\n    timerRef.current = setTimeout(() => {\n      setIsLongPress(true);\n      onLongPress();\n    }, 500);\n  }, [onLongPress]);\n  const handleOnClick = useCallback(() => {\n    if (touchEventsOnly || !onClick) {\n      return;\n    }\n    if (!isLongPress) {\n      onClick();\n    }\n  }, [isLongPress, onClick, touchEventsOnly]);\n  const handleOnKeyDown = useCallback(() => {\n    if (touchEventsOnly) {\n      return;\n    }\n    if (action) {\n      setAction(false);\n      startPressTimer();\n    }\n  }, [action, startPressTimer, touchEventsOnly]);\n  const handleOnKeyUp = useCallback(() => {\n    if (touchEventsOnly) {\n      return;\n    }\n    setAction(true);\n    timerRef.current && clearTimeout(timerRef.current);\n  }, [touchEventsOnly]);\n  const handleOnMouseDown = useCallback(() => {\n    if (touchEventsOnly) {\n      return;\n    }\n    startPressTimer();\n  }, [startPressTimer, touchEventsOnly]);\n  const handleOnMouseUp = useCallback(() => {\n    if (touchEventsOnly) {\n      return;\n    }\n    timerRef.current && clearTimeout(timerRef.current);\n  }, [touchEventsOnly]);\n  const handleOnTouchStart = useCallback(() => {\n    startPressTimer();\n  }, [startPressTimer]);\n  const handleOnTouchEnd = useCallback(() => {\n    if (!isLongPress && onClick) {\n      onClick();\n    }\n    timerRef.current && clearTimeout(timerRef.current);\n  }, [onClick, isLongPress]);\n  const handleOnTouchMove = useCallback(() => {\n    timerRef.current && clearTimeout(timerRef.current);\n  }, []);\n  return useMemo(() => ({\n    onClick: handleOnClick,\n    onMouseDown: handleOnMouseDown,\n    onMouseUp: handleOnMouseUp,\n    onTouchStart: handleOnTouchStart,\n    onTouchEnd: handleOnTouchEnd,\n    onKeyDown: handleOnKeyDown,\n    onKeyUp: handleOnKeyUp,\n    onTouchMove: handleOnTouchMove\n  }), [handleOnClick, handleOnKeyDown, handleOnKeyUp, handleOnMouseDown, handleOnMouseUp, handleOnTouchEnd, handleOnTouchStart, handleOnTouchMove]);\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { DirectionalHint, Icon, IconButton, IContextualMenuProps, IStyle, mergeStyles, Persona, Stack, Text } from '@fluentui/react';\nimport React, { useLayoutEffect, useMemo, useRef, useState } from 'react';\nimport { useIdentifiers } from '../identifiers';\nimport { ComponentLocale, useLocale } from '../localization';\nimport { useTheme } from '../theming';\nimport { BaseCustomStyles, CustomAvatarOptions, OnRenderAvatarCallback } from '../types';\n/* @conditional-compile-remove(raise-hand) */\nimport { CallingTheme } from '../theming';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHand } from '../types';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHandIcon } from './assets/RaisedHandIcon';\nimport { disabledVideoHint, displayNameStyle, iconContainerStyle, overlayContainerStyles, rootStyles, videoContainerStyles, videoHint, tileInfoContainerStyle, participantStateStringStyles } from './styles/VideoTile.styles';\nimport { getVideoTileOverrideColor } from './utils/videoTileStylesUtils';\nimport { pinIconStyle } from './styles/VideoTile.styles';\nimport useLongPress from './utils/useLongPress';\nimport { moreButtonStyles } from './styles/VideoTile.styles';\n/* @conditional-compile-remove(raise-hand) */\nimport { raiseHandContainerStyles } from './styles/VideoTile.styles';\n/**\n * Strings of {@link VideoTile} that can be overridden.\n * @beta\n */\nexport interface VideoTileStrings {\n  participantStateRinging: string;\n  participantStateHold: string;\n}\n\n/**\n * Fluent styles for {@link VideoTile}.\n *\n * @public\n */\nexport interface VideoTileStylesProps extends BaseCustomStyles {\n  /** Styles for video container. */\n  videoContainer?: IStyle;\n  /** Styles for container overlayed on the video container. */\n  overlayContainer?: IStyle;\n  /** Styles for displayName on the video container. */\n  displayNameContainer?: IStyle;\n}\n\n/**\n * Props for {@link VideoTile}.\n *\n * @public\n */\nexport interface VideoTileProps {\n  /** React Child components. Child Components will show as overlay component in the VideoTile. */\n  children?: React.ReactNode;\n  /**\n   * Allows users to pass in an object contains custom CSS styles.\n   * @Example\n   * ```\n   * <VideoTile styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: VideoTileStylesProps;\n  /** user id for the VideoTile placeholder. */\n  userId?: string;\n  /** Component with the video stream. */\n  renderElement?: JSX.Element | null;\n  /** Determines if the video is mirrored or not. */\n  isMirrored?: boolean;\n  /** Custom render Component function for no video is available. Render a Persona Icon if undefined. */\n  onRenderPlaceholder?: OnRenderAvatarCallback;\n  /**\n   * Show label on the VideoTile\n   * @defaultValue true\n   */\n  showLabel?: boolean;\n  /**\n   * Whether to display a mute icon beside the user's display name.\n   * @defaultValue true\n   */\n  showMuteIndicator?: boolean;\n  /**\n   * Whether the video is muted or not.\n   */\n  isMuted?: boolean;\n  /**\n   * If true, the video tile will show the pin icon.\n   */\n  isPinned?: boolean;\n  /**\n   * Display Name of the Participant to be shown in the label.\n   * @remarks `displayName` is used to generate avatar initials if `initialsName` is not provided.\n   */\n  displayName?: string;\n  /**\n   * Name of the participant used to generate initials. For example, a name `John Doe` will display `JD` as initials.\n   * @remarks `displayName` is used if this property is not specified.\n   */\n  initialsName?: string;\n  /**\n   * Minimum size of the persona avatar in px.\n   * The persona avatar is the default placeholder shown when no video stream is available.\n   * For more information see https://developer.microsoft.com/en-us/fluentui#/controls/web/persona\n   * @defaultValue 32px\n   */\n  personaMinSize?: number;\n  /**\n   * Maximum size of the personal avatar in px.\n   * The persona avatar is the default placeholder shown when no video stream is available.\n   * For more information see https://developer.microsoft.com/en-us/fluentui#/controls/web/persona\n   * @defaultValue 100px\n   */\n  personaMaxSize?: number;\n  /** Optional property to set the aria label of the video tile if there is no available stream. */\n  noVideoAvailableAriaLabel?: string;\n  /** Whether the participant in the videoTile is speaking. Shows a speaking indicator (border). */\n  isSpeaking?: boolean;\n\n  /* @conditional-compile-remove(raise-hand) */\n  /** Whether the participant is raised hand. Show a indicator (border) and icon with order */\n  raisedHand?: RaisedHand;\n  /**\n   * Display custom menu items in the VideoTile's contextual menu.\n   * Uses Fluent UI ContextualMenu.\n   * An ellipses icon will be displayed to open the contextual menu if this prop is defined.\n   */\n  contextualMenu?: IContextualMenuProps;\n  /**\n   * Callback triggered by video tile on touch and hold.\n   */\n  onLongTouch?: () => void;\n}\n\n// Coin max size is set to PersonaSize.size100\nconst DEFAULT_PERSONA_MAX_SIZE_PX = 100;\n// Coin min size is set PersonaSize.size32\nconst DEFAULT_PERSONA_MIN_SIZE_PX = 32;\nconst DefaultPlaceholder = (props: CustomAvatarOptions): JSX.Element => {\n  const {\n    text,\n    noVideoAvailableAriaLabel,\n    coinSize,\n    hidePersonaDetails\n  } = props;\n  return <Stack className={mergeStyles({\n    position: 'absolute',\n    height: '100%',\n    width: '100%'\n  })}>\n      <Stack styles={defaultPersonaStyles}>\n        {coinSize && <Persona coinSize={coinSize} hidePersonaDetails={hidePersonaDetails} text={text ?? ''} initialsTextColor=\"white\" aria-label={noVideoAvailableAriaLabel ?? ''} showOverflowTooltip={false} />}\n      </Stack>\n    </Stack>;\n};\nconst defaultPersonaStyles = {\n  root: {\n    margin: 'auto',\n    maxHeight: '100%'\n  }\n};\nconst videoTileMoreMenuIconProps = {\n  iconName: undefined,\n  style: {\n    display: 'none'\n  }\n};\nconst videoTileMoreMenuProps = {\n  directionalHint: DirectionalHint.topLeftEdge,\n  isBeakVisible: false,\n  styles: {\n    container: {\n      maxWidth: '8rem'\n    }\n  }\n};\nconst VideoTileMoreOptionsButton = (props: {\n  contextualMenu?: IContextualMenuProps;\n  canShowContextMenuButton: boolean;\n}): JSX.Element => {\n  const {\n    contextualMenu,\n    canShowContextMenuButton\n  } = props;\n  if (!contextualMenu) {\n    return <></>;\n  }\n  const optionsIcon = canShowContextMenuButton ? 'VideoTileMoreOptions' : undefined;\n  return <IconButton data-ui-id=\"video-tile-more-options-button\" styles={moreButtonStyles} menuIconProps={videoTileMoreMenuIconProps} menuProps={{\n    ...videoTileMoreMenuProps,\n    ...contextualMenu\n  }} iconProps={{\n    iconName: optionsIcon\n  }} />;\n};\n\n/**\n * A component to render the video stream for a single call participant.\n *\n * Use with {@link GridLayout} in a {@link VideoGallery}.\n *\n * @public\n */\nexport const VideoTile = (props: VideoTileProps): JSX.Element => {\n  const {\n    children,\n    displayName,\n    initialsName,\n    isMirrored,\n    isMuted,\n    isPinned,\n    onRenderPlaceholder,\n    renderElement,\n    showLabel = true,\n    showMuteIndicator = true,\n    styles,\n    userId,\n    noVideoAvailableAriaLabel,\n    isSpeaking,\n    /* @conditional-compile-remove(raise-hand) */\n    raisedHand,\n    personaMinSize = DEFAULT_PERSONA_MIN_SIZE_PX,\n    personaMaxSize = DEFAULT_PERSONA_MAX_SIZE_PX,\n    contextualMenu\n  } = props;\n  const [isHovered, setIsHovered] = useState<boolean>(false);\n  const [isFocused, setIsFocused] = useState<boolean>(false);\n  // need to set a default otherwise the resizeObserver will get stuck in an infinite loop.\n  const [personaSize, setPersonaSize] = useState<number>(1);\n  const videoTileRef = useRef<HTMLDivElement>(null);\n  const locale = useLocale();\n  const theme = useTheme();\n  const isVideoRendered = !!renderElement;\n  const observer = useRef(new ResizeObserver((entries): void => {\n    const {\n      width,\n      height\n    } = entries[0].contentRect;\n    const personaCalcSize = Math.min(width, height) / 3;\n    // we only want to set the persona size if it has changed\n    if (personaCalcSize !== personaSize) {\n      setPersonaSize(Math.max(Math.min(personaCalcSize, personaMaxSize), personaMinSize));\n    }\n  }));\n  useLayoutEffect(() => {\n    if (videoTileRef.current) {\n      observer.current.observe(videoTileRef.current);\n    }\n    const currentObserver = observer.current;\n    return () => currentObserver.disconnect();\n  }, [videoTileRef]);\n  const useLongPressProps = useMemo(() => {\n    return {\n      onLongPress: () => {\n        props.onLongTouch?.();\n      },\n      touchEventsOnly: true\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.onLongTouch]);\n  const longPressHandlers = useLongPress(useLongPressProps);\n  const hoverHandlers = useMemo(() => {\n    return {\n      onMouseEnter: () => setIsHovered(true),\n      onMouseLeave: () => setIsHovered(false),\n      onFocus: () => setIsFocused(true),\n      onBlur: () => setIsFocused(false)\n    };\n  }, []);\n  const placeholderOptions = {\n    userId,\n    text: initialsName ?? displayName,\n    noVideoAvailableAriaLabel,\n    coinSize: personaSize,\n    styles: defaultPersonaStyles,\n    hidePersonaDetails: true\n  };\n  const videoHintWithBorderRadius = mergeStyles(videoHint, {\n    borderRadius: theme.effects.roundedCorner4\n  });\n  const tileInfoStyle = useMemo(() => mergeStyles(isVideoRendered ? videoHintWithBorderRadius : disabledVideoHint, getVideoTileOverrideColor(isVideoRendered, theme, 'neutralPrimary'), styles?.displayNameContainer), [isVideoRendered, videoHintWithBorderRadius, theme, styles?.displayNameContainer]);\n  const ids = useIdentifiers();\n  const canShowLabel = showLabel && (displayName || showMuteIndicator && isMuted);\n  const participantStateString = participantStateStringTrampoline(props, locale);\n  const canShowContextMenuButton = isHovered || isFocused;\n  let raisedHandBackgroundColor = '';\n  /* @conditional-compile-remove(raise-hand) */\n  const callingPalette = ((theme as unknown) as CallingTheme).callingPalette;\n  /* @conditional-compile-remove(raise-hand) */\n  raisedHandBackgroundColor = callingPalette.raiseHandGold;\n  return <Stack data-ui-id={ids.videoTile} className={mergeStyles(rootStyles, {\n    background: theme.palette.neutralLighter,\n    borderRadius: theme.effects.roundedCorner4\n  }, (isSpeaking || /* @conditional-compile-remove(raise-hand) */raisedHand) && {\n    '&::after': {\n      content: `''`,\n      position: 'absolute',\n      border: `0.25rem solid ${isSpeaking ? theme.palette.themePrimary : raisedHandBackgroundColor}`,\n      borderRadius: theme.effects.roundedCorner4,\n      width: '100%',\n      height: '100%',\n      pointerEvents: 'none'\n    }\n  }, styles?.root)} {...longPressHandlers}>\n      <div ref={videoTileRef} style={{\n      width: '100%',\n      height: '100%'\n    }} {...hoverHandlers} data-is-focusable={true}>\n        {isVideoRendered ? <Stack className={mergeStyles(videoContainerStyles, isMirrored && {\n        transform: 'scaleX(-1)'\n      }, styles?.videoContainer)}>\n            {renderElement}\n          </Stack> : <Stack className={mergeStyles(videoContainerStyles, {\n        opacity: participantStateString ? 0.4 : 1\n      })}>\n            {onRenderPlaceholder ? onRenderPlaceholder(userId ?? '', placeholderOptions, DefaultPlaceholder) : <DefaultPlaceholder {...placeholderOptions} />}\n          </Stack>}\n\n        {}\n        {(canShowLabel || participantStateString) && <Stack horizontal className={tileInfoContainerStyle} tokens={tileInfoContainerTokens}>\n            <Stack horizontal className={tileInfoStyle}>\n              {canShowLabel && <Text className={mergeStyles(displayNameStyle)} title={displayName} style={{\n            color: participantStateString ? theme.palette.neutralSecondary : 'inherit'\n          }} data-ui-id=\"video-tile-display-name\">\n                  {displayName}\n                </Text>}\n              {participantStateString && <Text className={mergeStyles(participantStateStringStyles(theme))}>\n                  {bracketedParticipantString(participantStateString, !!canShowLabel)}\n                </Text>}\n              {showMuteIndicator && isMuted && <Stack className={mergeStyles(iconContainerStyle)}>\n                  <Icon iconName=\"VideoTileMicOff\" />\n                </Stack>}\n              {}\n              {isPinned && <Stack className={mergeStyles(iconContainerStyle)}>\n                  <Icon iconName=\"VideoTilePinned\" className={mergeStyles(pinIconStyle)} />\n                </Stack>}\n              <VideoTileMoreOptionsButton contextualMenu={contextualMenu} canShowContextMenuButton={canShowContextMenuButton} />\n            </Stack>\n          </Stack>}\n\n        {children && <Stack className={mergeStyles(overlayContainerStyles, styles?.overlayContainer)}>{children}</Stack>}\n        {/* @conditional-compile-remove(raise-hand) */raisedHand && <Stack horizontal={true} tokens={{\n        childrenGap: '0.2rem'\n      }} className={raiseHandContainerStyles(theme, !canShowLabel)}>\n              <Stack.Item>\n                <Text>{raisedHand.raisedHandOrderPosition}</Text>\n              </Stack.Item>\n              <Stack.Item>\n                <RaisedHandIcon />\n              </Stack.Item>\n            </Stack>}\n      </div>\n    </Stack>;\n};\nconst participantStateStringTrampoline = (props: VideoTileProps, locale: ComponentLocale): string | undefined => {\n  return undefined;\n};\nconst tileInfoContainerTokens = {\n  // A horizontal Stack sets the left margin to 0 for all it's children.\n  // We need to allow the children to set their own margins\n  childrenGap: 'none'\n};\nconst bracketedParticipantString = (participantString: string, withBrackets: boolean): string => {\n  return withBrackets ? `(${participantString})` : participantString;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IContextualMenuProps, Layer, Stack } from '@fluentui/react';\nimport React, { useMemo } from 'react';\nimport { KeyboardEvent, useCallback } from 'react';\nimport { CreateVideoStreamViewResult, OnRenderAvatarCallback, ParticipantState, VideoGalleryRemoteParticipant, VideoStreamOptions, ViewScalingMode } from '../types';\nimport { _DrawerMenu, _DrawerMenuItemProps } from './Drawer';\nimport { StreamMedia } from './StreamMedia';\nimport { VideoGalleryStrings } from './VideoGallery';\nimport { drawerMenuWrapperStyles, remoteVideoTileWrapperStyle } from './VideoGallery/styles/RemoteVideoTile.styles';\nimport { RemoteVideoStreamLifecycleMaintainerProps, useRemoteVideoStreamLifecycleMaintainer } from './VideoGallery/useVideoStreamLifecycleMaintainer';\nimport { useVideoTileContextualMenuProps } from './VideoGallery/useVideoTileContextualMenuProps';\nimport { VideoTile } from './VideoTile';\n/**\n * A memoized version of VideoTile for rendering remote participants. React.memo is used for a performance\n * boost by memoizing the same rendered component to avoid rerendering a VideoTile when its position in the\n * array changes causing a rerender in the parent component. https://reactjs.org/docs/react-api.html#reactmemo\n *\n * @internal\n */\nexport const _RemoteVideoTile = React.memo((props: {\n  userId: string;\n  remoteParticipant: VideoGalleryRemoteParticipant;\n  onCreateRemoteStreamView?: (userId: string, options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  onDisposeRemoteStreamView?: (userId: string) => Promise<void>;\n  isAvailable?: boolean;\n  isReceiving?: boolean;\n  isScreenSharingOn?: boolean; // TODO: Remove this once onDisposeRemoteStreamView no longer disposes of screen share stream\n  renderElement?: HTMLElement;\n  remoteVideoViewOptions?: VideoStreamOptions;\n  onRenderAvatar?: OnRenderAvatarCallback;\n  showMuteIndicator?: boolean;\n  showLabel?: boolean;\n  personaMinSize?: number;\n  strings: VideoGalleryStrings;\n  participantState?: ParticipantState;\n  menuKind?: 'contextual' | 'drawer';\n  drawerMenuHostId?: string;\n  onPinParticipant?: (userId: string) => void;\n  onUnpinParticipant?: (userId: string) => void;\n  onUpdateScalingMode?: (userId: string, scalingMode: ViewScalingMode) => void;\n  isPinned?: boolean;\n  disablePinMenuItem?: boolean;\n  toggleAnnouncerString?: (announcerString: string) => void;\n}) => {\n  const {\n    isAvailable,\n    isReceiving = true,\n    // default to true to prevent any breaking change\n    isScreenSharingOn,\n    onCreateRemoteStreamView,\n    onDisposeRemoteStreamView,\n    remoteVideoViewOptions,\n    renderElement,\n    userId,\n    onRenderAvatar,\n    showMuteIndicator,\n    remoteParticipant,\n    participantState,\n    menuKind,\n    isPinned,\n    onPinParticipant,\n    onUnpinParticipant,\n    onUpdateScalingMode,\n    disablePinMenuItem,\n    toggleAnnouncerString,\n    strings\n  } = props;\n  const remoteVideoStreamProps: RemoteVideoStreamLifecycleMaintainerProps = useMemo(() => ({\n    isMirrored: remoteVideoViewOptions?.isMirrored,\n    isScreenSharingOn,\n    isStreamAvailable: isAvailable,\n    isStreamReceiving: isReceiving,\n    onCreateRemoteStreamView,\n    onDisposeRemoteStreamView,\n    remoteParticipantId: userId,\n    renderElementExists: !!renderElement,\n    scalingMode: remoteVideoViewOptions?.scalingMode\n  }), [isAvailable, isReceiving, isScreenSharingOn, onCreateRemoteStreamView, onDisposeRemoteStreamView, remoteVideoViewOptions?.isMirrored, remoteVideoViewOptions?.scalingMode, renderElement, userId]);\n\n  // Handle creating, destroying and updating the video stream as necessary\n  const createVideoStreamResult = useRemoteVideoStreamLifecycleMaintainer(remoteVideoStreamProps);\n  const contextualMenuProps = useVideoTileContextualMenuProps({\n    participant: remoteParticipant,\n    view: createVideoStreamResult?.view,\n    strings: {\n      ...props.strings\n    },\n    isPinned,\n    onPinParticipant,\n    onUnpinParticipant,\n    onUpdateScalingMode,\n    disablePinMenuItem,\n    toggleAnnouncerString\n  });\n  const videoTileContextualMenuProps = useMemo(() => {\n    if (menuKind !== 'contextual' || !contextualMenuProps) {\n      return {};\n    }\n    return {\n      contextualMenu: contextualMenuProps\n    };\n  }, [contextualMenuProps, menuKind]);\n  const showLoadingIndicator = isAvailable && isReceiving === false && participantState !== 'Disconnected';\n  const [drawerMenuItemProps, setDrawerMenuItemProps] = React.useState<_DrawerMenuItemProps[]>([]);\n  const renderVideoStreamElement = useMemo(() => {\n    // Checking if renderElement is well defined or not as calling SDK has a number of video streams limitation which\n    // implies that, after their threshold, all streams have no child (blank video)\n    if (!renderElement || !renderElement.childElementCount) {\n      // Returning `undefined` results in the placeholder with avatar being shown\n      return undefined;\n    }\n    return <StreamMedia videoStreamElement={renderElement} loadingState={showLoadingIndicator ? 'loading' : 'none'} />;\n  }, [renderElement, showLoadingIndicator]);\n  const onKeyDown = useCallback((e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      setDrawerMenuItemProps(convertContextualMenuItemsToDrawerMenuItemProps(contextualMenuProps, () => setDrawerMenuItemProps([])));\n    }\n  }, [setDrawerMenuItemProps, contextualMenuProps]);\n  let displayName = remoteParticipant.displayName || strings.displayNamePlaceholder;\n  return <Stack tabIndex={menuKind === 'drawer' ? 0 : undefined} onKeyDown={menuKind === 'drawer' ? onKeyDown : undefined} style={remoteVideoTileWrapperStyle}>\n        <VideoTile key={userId} userId={userId} initialsName={remoteParticipant.displayName ?? ''} renderElement={renderVideoStreamElement} displayName={displayName} onRenderPlaceholder={onRenderAvatar} isMuted={remoteParticipant.isMuted}\n    /* @conditional-compile-remove(raise-hand) */ raisedHand={remoteParticipant.raisedHand} isSpeaking={remoteParticipant.isSpeaking} showMuteIndicator={showMuteIndicator} personaMinSize={props.personaMinSize} showLabel={props.showLabel} {...videoTileContextualMenuProps} isPinned={props.isPinned} onLongTouch={() => setDrawerMenuItemProps(convertContextualMenuItemsToDrawerMenuItemProps(contextualMenuProps, () => setDrawerMenuItemProps([])))} />\n        {drawerMenuItemProps.length > 0 && <Layer hostId={props.drawerMenuHostId}>\n            <Stack styles={drawerMenuWrapperStyles}>\n              <_DrawerMenu onLightDismiss={() => setDrawerMenuItemProps([])} items={drawerMenuItemProps} heading={remoteParticipant.displayName} />\n            </Stack>\n          </Layer>}\n      </Stack>;\n});\nconst convertContextualMenuItemsToDrawerMenuItemProps = (contextualMenuProps?: IContextualMenuProps, onLightDismiss?: () => void): _DrawerMenuItemProps[] => {\n  if (!contextualMenuProps) {\n    return [];\n  }\n  return contextualMenuProps.items.map(item => {\n    return {\n      itemKey: item.key,\n      text: item.text,\n      iconProps: item.iconProps,\n      disabled: item.disabled,\n      onItemClick: () => {\n        item.onClick?.();\n        onLightDismiss?.();\n      }\n    };\n  });\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles, Theme } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const screenSharingContainerStyle = mergeStyles({\n  width: '100%',\n  height: '100%'\n});\n\n/**\n * @private\n */\nexport const screenSharingNotificationContainerStyle = (theme: Theme): string => mergeStyles({\n  backgroundColor: 'inherit',\n  padding: '1rem',\n  maxWidth: '95%',\n  borderRadius: theme.effects.roundedCorner4,\n  color: theme.palette.neutralSecondary\n});\n\n/**\n * @private\n */\nexport const screenSharingNotificationIconContainerStyle = mergeStyles({\n  height: '2rem',\n  lineHeight: 0\n});\n\n/**\n * @private\n */\nexport const screenSharingNotificationIconStyle = (theme: Theme): string => mergeStyles({\n  // svg is (20px x 20px) but path is only (16px x 12px), so need to scale at 2.5 to get 40px\n  transform: 'scale(2.5)',\n  color: theme.palette.neutralTertiary\n});\n\n/**\n * @private\n */\nexport const screenSharingNotificationTextStyle = mergeStyles({\n  fontSize: '1rem',\n  // Text component will take body color by default (white in Dark Mode), so forcing it to be parent container color\n  color: 'inherit'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Icon, Stack, Text } from '@fluentui/react';\nimport React from 'react';\nimport { useLocale } from '../../localization';\nimport { useTheme } from '../../theming';\nimport { VideoGalleryLocalParticipant } from '../../types';\nimport { VideoTile } from '../VideoTile';\nimport { screenSharingContainerStyle, screenSharingNotificationContainerStyle, screenSharingNotificationIconContainerStyle, screenSharingNotificationIconStyle, screenSharingNotificationTextStyle } from './styles/LocalScreenShare.styles';\n\n/**\n * A memoized version of local screen share component. React.memo is used for a performance\n * boost by memoizing the same rendered component to avoid rerendering this when the parent component rerenders.\n * https://reactjs.org/docs/react-api.html#reactmemo\n */\nexport const LocalScreenShare = React.memo((props: {\n  localParticipant: VideoGalleryLocalParticipant;\n}) => {\n  const {\n    localParticipant\n  } = props;\n  const theme = useTheme();\n  const locale = useLocale();\n  if (!localParticipant || !localParticipant.isScreenSharingOn) {\n    return null;\n  }\n  const localScreenSharingNotification = <Stack horizontalAlign=\"center\" verticalAlign=\"center\" className={screenSharingContainerStyle}>\n      <Stack horizontalAlign=\"center\" verticalAlign=\"center\" className={screenSharingNotificationContainerStyle(theme)} tokens={{\n      childrenGap: '1rem'\n    }}>\n        <Stack horizontal verticalAlign=\"center\" className={screenSharingNotificationIconContainerStyle}>\n          <Icon iconName=\"ControlButtonScreenShareStart\" className={screenSharingNotificationIconStyle(theme)} />\n        </Stack>\n        <Text className={screenSharingNotificationTextStyle} aria-live=\"polite\">\n          {locale.strings.videoGallery.screenIsBeingSharedMessage}\n        </Text>\n      </Stack>\n    </Stack>;\n  const displayName = !localParticipant?.displayName ? locale.strings.videoGallery.displayNamePlaceholder : localParticipant?.displayName;\n  return <VideoTile displayName={displayName} isMuted={localParticipant?.isMuted} onRenderPlaceholder={() => <></>}>\n      {localScreenSharingNotification}\n    </VideoTile>;\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { mergeStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const loadingStyle = mergeStyles({\n  height: '100%',\n  width: '100%'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Spinner, SpinnerSize, Stack } from '@fluentui/react';\nimport React, { useEffect } from 'react';\nimport { useLocale } from '../../localization';\nimport { StreamMedia } from '../StreamMedia';\nimport { VideoTile } from '../VideoTile';\nimport { CreateVideoStreamViewResult, VideoStreamOptions } from '../../types';\nimport { loadingStyle } from './styles/RemoteScreenShare.styles';\nimport { _formatString } from '@internal/acs-ui-common';\n\n/**\n * A memoized version of VideoTile for rendering the remote screen share stream. React.memo is used for a performance\n * boost by memoizing the same rendered component to avoid rerendering this when the parent component rerenders.\n * https://reactjs.org/docs/react-api.html#reactmemo\n */\nexport const RemoteScreenShare = React.memo((props: {\n  userId: string;\n  displayName?: string;\n  onCreateRemoteStreamView?: (userId: string, options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  onDisposeRemoteStreamView?: (userId: string) => Promise<void>;\n  isAvailable?: boolean;\n  isReceiving?: boolean;\n  isMuted?: boolean;\n  isSpeaking?: boolean;\n  renderElement?: HTMLElement;\n  participantVideoScalingMode?: VideoStreamOptions;\n}) => {\n  const {\n    userId,\n    displayName,\n    isMuted,\n    renderElement,\n    onCreateRemoteStreamView,\n    onDisposeRemoteStreamView,\n    isReceiving,\n    participantVideoScalingMode\n  } = props;\n  const locale = useLocale();\n  if (!renderElement) {\n    /**\n     * TODO: We need to pass in the scaling mode of the screen share participant to this function because when we\n     * call this it will recreate both streams (video and screen share) and we need to make sure that the scaling\n     * mode is the same as before we started the screen share.\n     *\n     * We should deprecate the current function and replace it with a\n     * createRemoteScreenShareStreamView and createRemoteVideoStreamView.\n     */\n    onCreateRemoteStreamView && onCreateRemoteStreamView(userId, participantVideoScalingMode);\n  }\n  useEffect(() => {\n    return () => {\n      // TODO: Isolate disposing behaviors for screenShare and videoStream\n      onDisposeRemoteStreamView && onDisposeRemoteStreamView(userId);\n    };\n  }, [onDisposeRemoteStreamView, userId]);\n  const loadingMessage = displayName ? _formatString(locale.strings.videoGallery.screenShareLoadingMessage, {\n    participant: displayName\n  }) : '';\n  return <VideoTile displayName={displayName} isMuted={isMuted} renderElement={renderElement ? <StreamMedia videoStreamElement={renderElement} loadingState={isReceiving === false ? 'loading' : 'none'} /> : undefined} onRenderPlaceholder={() => <LoadingSpinner loadingMessage={loadingMessage} />} />;\n});\nconst LoadingSpinner = (props: {\n  loadingMessage: string;\n}): JSX.Element => {\n  return <Stack verticalAlign=\"center\" className={loadingStyle}>\n      <Spinner label={props.loadingMessage} size={SpinnerSize.xSmall} aria-live={'assertive'} />\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IButtonStyles, IStackStyles, mergeStyles, Theme } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\n\n/**\n * @private\n */\nexport const videoGalleryOuterDivStyle = mergeStyles({\n  position: 'relative',\n  width: '100%',\n  height: '100%'\n});\n\n/**\n * @private\n */\nexport const videoGalleryContainerStyle: IStackStyles = {\n  root: {\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n    padding: '0.5rem'\n  }\n};\n\n/**\n * @private\n */\nexport const localVideoCameraCycleButtonStyles = (theme: Theme, size?: 'small' | 'large'): IButtonStyles => {\n  return {\n    root: {\n      position: 'absolute',\n      width: size === 'large' ? _pxToRem(40) : _pxToRem(32),\n      height: size === 'large' ? _pxToRem(40) : _pxToRem(32),\n      right: '0rem',\n      top: '0rem',\n      color: '#FFFFFF',\n      // only shows up on running video feed to we want to force specific colours.\n      zIndex: 2,\n      // shows the button directly over the local video feed.\n      background: 'rgba(0,0,0,0.4)',\n      borderRadius: theme.effects.roundedCorner2\n    },\n    rootFocused: {\n      // styles to remove the unwanted white highlight and blue colour after tapping on button.\n      color: '#FFFFFF',\n      background: 'rgba(0,0,0,0.4)' // sets opacity of background to be visible on all backdrops in video stream.\n    },\n    rootDisabled: {\n      // In the disabled state, FluentUI sets the position to relative. We need to override this to keep the button correctly positioned.\n      position: 'absolute'\n    },\n    icon: {\n      paddingLeft: _pxToRem(3),\n      paddingRight: _pxToRem(3),\n      margin: 0\n    },\n    flexContainer: {\n      paddingBottom: _pxToRem(8),\n      height: 'unset'\n    }\n  };\n};\n\n/**\n * @private\n */\nexport const localVideoTileContainerStyles: IStackStyles = {\n  root: {\n    width: '100%',\n    height: '100%'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IconButton, useTheme } from '@fluentui/react';\nimport React, { useCallback, useState } from 'react';\nimport { OptionsDevice } from './DevicesButton';\nimport { localVideoCameraCycleButtonStyles } from './styles/VideoGallery.styles';\nimport { useLocale } from '../localization';\n\n/**\n * @public\n */\nexport interface LocalVideoCameraCycleButtonProps {\n  /** Array of cameras available to the user. */\n  cameras?: OptionsDevice[];\n  /** Currently selected camera in the local video stream. */\n  selectedCamera?: OptionsDevice;\n  /** callback function to change video feed. */\n  onSelectCamera?: (device: OptionsDevice) => Promise<void>;\n  /** label for local video camera switcher */\n  label?: string;\n  /** description for local video camera switcher */\n  ariaDescription?: string;\n  /** control to enable large button mode */\n  size?: 'small' | 'large';\n}\n\n/**\n * local video tile camera cycle button - for use on mobile screens only.\n * @internal\n */\nexport const LocalVideoCameraCycleButton = (props: LocalVideoCameraCycleButtonProps): JSX.Element => {\n  const {\n    cameras,\n    selectedCamera,\n    onSelectCamera,\n    label,\n    ariaDescription,\n    size\n  } = props;\n  const theme = useTheme();\n  const [waitForCamera, setWaitForCamera] = useState(false);\n  const onChangeCameraClick = useCallback(async (device: OptionsDevice) => {\n    // Throttle changing camera to prevent too many callbacks\n    if (onSelectCamera) {\n      setWaitForCamera(true);\n      try {\n        await onSelectCamera(device);\n      } finally {\n        setWaitForCamera(false);\n      }\n    }\n  }, [onSelectCamera]);\n  const disabled = !!waitForCamera;\n  const cameraLoadingString = useLocale().strings.cameraButton.tooltipVideoLoadingContent;\n  return <IconButton data-ui-id={'local-camera-switcher-button'} styles={localVideoCameraCycleButtonStyles(theme, size)} disabled={disabled} iconProps={{\n    iconName: 'LocalCameraSwitch'\n  }} ariaLabel={label} ariaDescription={disabled ? cameraLoadingString : ariaDescription} aria-live={'polite'} onClick={() => {\n    if (cameras && cameras.length > 1 && selectedCamera !== undefined) {\n      const index = cameras.findIndex(camera => selectedCamera.id === camera.id);\n      const newCamera = cameras[(index + 1) % cameras.length];\n      onChangeCameraClick(newCamera);\n    }\n  }} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles, Stack } from '@fluentui/react';\nimport { _formatString } from '@internal/acs-ui-common';\nimport React, { useMemo } from 'react';\nimport { OnRenderAvatarCallback, VideoStreamOptions, CreateVideoStreamViewResult } from '../types';\nimport { LocalVideoCameraCycleButton, LocalVideoCameraCycleButtonProps } from './LocalVideoCameraButton';\nimport { StreamMedia } from './StreamMedia';\nimport { useLocalVideoStreamLifecycleMaintainer, LocalVideoStreamLifecycleMaintainerProps } from './VideoGallery/useVideoStreamLifecycleMaintainer';\nimport { VideoTile, VideoTileStylesProps } from './VideoTile';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHand } from '../types';\n/**\n * A memoized version of VideoTile for rendering local participant.\n *\n * @internal\n */\nexport const _LocalVideoTile = React.memo((props: {\n  userId?: string;\n  onCreateLocalStreamView?: (options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  onDisposeLocalStreamView?: () => void;\n  isAvailable?: boolean;\n  isMuted?: boolean;\n  renderElement?: HTMLElement;\n  displayName?: string;\n  initialsName?: string;\n  localVideoViewOptions?: VideoStreamOptions;\n  onRenderAvatar?: OnRenderAvatarCallback;\n  showLabel: boolean;\n  showMuteIndicator?: boolean;\n  showCameraSwitcherInLocalPreview?: boolean;\n  localVideoCameraCycleButtonProps?: LocalVideoCameraCycleButtonProps;\n  localVideoCameraSwitcherLabel?: string;\n  localVideoSelectedDescription?: string;\n  styles?: VideoTileStylesProps;\n  personaMinSize?: number;\n  /* @conditional-compile-remove(raise-hand) */\n  raisedHand?: RaisedHand;\n}) => {\n  const {\n    isAvailable,\n    isMuted,\n    onCreateLocalStreamView,\n    onDisposeLocalStreamView,\n    localVideoViewOptions,\n    renderElement,\n    userId,\n    showLabel,\n    displayName,\n    initialsName,\n    onRenderAvatar,\n    showMuteIndicator,\n    styles,\n    showCameraSwitcherInLocalPreview,\n    localVideoCameraCycleButtonProps,\n    localVideoCameraSwitcherLabel,\n    localVideoSelectedDescription,\n    /* @conditional-compile-remove(raise-hand) */\n    raisedHand\n  } = props;\n  const localVideoStreamProps: LocalVideoStreamLifecycleMaintainerProps = useMemo(() => ({\n    isMirrored: localVideoViewOptions?.isMirrored,\n    isStreamAvailable: isAvailable,\n    onCreateLocalStreamView,\n    onDisposeLocalStreamView,\n    renderElementExists: !!renderElement,\n    scalingMode: localVideoViewOptions?.scalingMode\n  }), [isAvailable, localVideoViewOptions?.isMirrored, localVideoViewOptions?.scalingMode, onCreateLocalStreamView, onDisposeLocalStreamView, renderElement]);\n\n  // Handle creating, destroying and updating the video stream as necessary\n  useLocalVideoStreamLifecycleMaintainer(localVideoStreamProps);\n  const videoTileContextualMenuProps = useMemo(() => {\n    return {};\n  }, []);\n  const videoTileStyles = useMemo(() => {\n    return styles;\n  }, [styles]);\n  const renderVideoStreamElement = useMemo(() => {\n    // Checking if renderElement is well defined or not as calling SDK has a number of video streams limitation which\n    // implies that, after their threshold, all streams have no child (blank video)\n    if (!renderElement || !renderElement.childElementCount) {\n      // Returning `undefined` results in the placeholder with avatar being shown\n      return undefined;\n    }\n    return <>\n          <FloatingLocalCameraCycleButton showCameraSwitcherInLocalPreview={showCameraSwitcherInLocalPreview ?? false} localVideoCameraCycleButtonProps={localVideoCameraCycleButtonProps} localVideoCameraSwitcherLabel={localVideoCameraSwitcherLabel} localVideoSelectedDescription={localVideoSelectedDescription} />\n          <StreamMedia videoStreamElement={renderElement} isMirrored={true} />\n        </>;\n  }, [localVideoCameraCycleButtonProps, localVideoCameraSwitcherLabel, localVideoSelectedDescription, renderElement, showCameraSwitcherInLocalPreview]);\n  return <Stack className={mergeStyles({\n    width: '100%',\n    height: '100%'\n  })}>\n        <VideoTile key={userId ?? 'local-video-tile'} userId={userId} renderElement={renderVideoStreamElement} showLabel={showLabel} displayName={displayName} initialsName={initialsName} styles={videoTileStyles} onRenderPlaceholder={onRenderAvatar} isMuted={isMuted} showMuteIndicator={showMuteIndicator} personaMinSize={props.personaMinSize}\n    /* @conditional-compile-remove(raise-hand) */ raisedHand={raisedHand} {...videoTileContextualMenuProps}>\n          {}\n        </VideoTile>\n      </Stack>;\n});\nconst FloatingLocalCameraCycleButton = (props: {\n  showCameraSwitcherInLocalPreview: boolean;\n  localVideoCameraCycleButtonProps?: LocalVideoCameraCycleButtonProps;\n  localVideoCameraSwitcherLabel?: string;\n  localVideoSelectedDescription?: string;\n}): JSX.Element => {\n  const {\n    showCameraSwitcherInLocalPreview,\n    localVideoCameraCycleButtonProps,\n    localVideoCameraSwitcherLabel,\n    localVideoSelectedDescription\n  } = props;\n  const ariaDescription = localVideoCameraCycleButtonProps?.selectedCamera && localVideoSelectedDescription && _formatString(localVideoSelectedDescription, {\n    cameraName: localVideoCameraCycleButtonProps.selectedCamera.name\n  });\n  return <Stack horizontalAlign=\"end\">\n      {showCameraSwitcherInLocalPreview && localVideoCameraCycleButtonProps?.cameras !== undefined && localVideoCameraCycleButtonProps?.selectedCamera !== undefined && localVideoCameraCycleButtonProps?.onSelectCamera !== undefined && <LocalVideoCameraCycleButton cameras={localVideoCameraCycleButtonProps.cameras} selectedCamera={localVideoCameraCycleButtonProps.selectedCamera} onSelectCamera={localVideoCameraCycleButtonProps.onSelectCamera} label={localVideoCameraSwitcherLabel} ariaDescription={ariaDescription} />}\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const rootLayoutStyle: IStackStyles = {\n  root: {\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n    padding: '0.5rem'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackTokens } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const videoGalleryLayoutGap: IStackTokens = {\n  childrenGap: '0.5rem'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { VideoGalleryRemoteParticipant } from '../types';\ntype SmartDominantSpeakerParticipantsArgs = {\n  /**\n   * Array containing all participants of a call. {@link @azure/communication-react#VideoGalleryRemoteParticipant}\n   */\n  participants: VideoGalleryRemoteParticipant[];\n  /**\n   * An array containing the userId of dominant speakers\n   * in a call in the order of their dominance. 0th index is the most dominant, 1st is the second most etc\n   */\n  dominantSpeakers?: string[];\n  /**\n   * Array containing currently rendered (visible)\n   * participants in the call. {@link @azure/communication-react#VideoGalleryRemoteParticipant}\n   */\n  lastVisibleParticipants?: VideoGalleryRemoteParticipant[];\n  /**\n   * Maximum number of dominant speaker positions to move participants in.\n   */\n  maxDominantSpeakers: number;\n};\n\n/**\n * Calculates the participants that should be rendered based on the list of dominant\n * speakers and currently rendered participants in a call.\n * @param args - SmartDominantSpeakerParticipantsArgs\n * @returns VideoGalleryRemoteParticipant[] {@link @azure/communication-react#VideoGalleryRemoteParticipant}\n */\nexport const smartDominantSpeakerParticipants = (args: SmartDominantSpeakerParticipantsArgs): VideoGalleryRemoteParticipant[] => {\n  const {\n    participants,\n    dominantSpeakers = [],\n    lastVisibleParticipants = [],\n    maxDominantSpeakers\n  } = args;\n\n  // Don't apply any logic if total number of video streams is less than max dominant speakers.\n  if (participants.length <= maxDominantSpeakers) {\n    return participants;\n  }\n  const participantsMap = participantsById(participants);\n\n  // Only use the Max allowed dominant speakers that exist in participants\n  const dominantSpeakerIds = dominantSpeakers.filter(id => !!participantsMap[id]).slice(0, maxDominantSpeakers);\n  const newVisibleParticipantIds = lastVisibleParticipants.map(p => p.userId).slice(0, maxDominantSpeakers);\n  const newDominantSpeakerIds = dominantSpeakerIds.filter(id => !newVisibleParticipantIds.includes(id));\n\n  // Remove participants that are no longer dominant and replace them with new dominant speakers.\n  for (let index = 0; index < maxDominantSpeakers; index++) {\n    const newVisibleParticipantId = newVisibleParticipantIds[index];\n    if (newVisibleParticipantId === undefined || !dominantSpeakerIds.includes(newVisibleParticipantId)) {\n      const replacement = newDominantSpeakerIds.shift();\n      if (!replacement) {\n        break;\n      }\n      newVisibleParticipantIds[index] = replacement;\n    }\n  }\n  let newVisibleParticipants = newVisibleParticipantIds.map(participantId => participantsMap[participantId]).filter(p => p !== undefined);\n  const newVisibleParticipantIdsSet = new Set(newVisibleParticipantIds);\n  const remainingParticipants = participants.filter(p => !newVisibleParticipantIdsSet.has(p.userId));\n  newVisibleParticipants = newVisibleParticipants.concat(remainingParticipants);\n  return newVisibleParticipants;\n};\n\n/**\n * maps the participants array to an object with userId as key\n * @private\n */\nexport const participantsById = (participants: VideoGalleryRemoteParticipant[]): {\n  [key: string]: VideoGalleryRemoteParticipant;\n} => {\n  const response: {\n    [key: string]: VideoGalleryRemoteParticipant;\n  } = {};\n  participants.forEach(p => response[p.userId] = p);\n  return response;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { useCallback, useRef } from 'react';\nimport { smartDominantSpeakerParticipants } from '../../../gallery';\nimport { VideoGalleryParticipant, VideoGalleryRemoteParticipant } from '../../../types';\nimport { VideoGalleryLayout } from '../../VideoGallery';\n\n/**\n * Arguments used to determine a {@link OrganizedParticipantsResult}\n * @private\n */\nexport interface OrganizedParticipantsArgs {\n  remoteParticipants: VideoGalleryRemoteParticipant[];\n  localParticipant?: VideoGalleryParticipant;\n  dominantSpeakers?: string[];\n  maxRemoteVideoStreams?: number;\n  maxOverflowGalleryDominantSpeakers?: number;\n  isScreenShareActive?: boolean;\n  pinnedParticipantUserIds?: string[];\n  layout?: VideoGalleryLayout;\n  spotlightedParticipantUserIds?: string[];\n}\n\n/**\n * A result that defines grid participants and overflow gallery participants in the VideoGallery\n * @private\n */\nexport interface OrganizedParticipantsResult {\n  gridParticipants: VideoGalleryParticipant[];\n  overflowGalleryParticipants: VideoGalleryParticipant[];\n}\nconst DEFAULT_MAX_OVERFLOW_GALLERY_DOMINANT_SPEAKERS = 6;\nconst DEFAULT_MAX_VIDEO_SREAMS = 4;\nconst MAX_GRID_PARTICIPANTS_NOT_LARGE_GALLERY = 9;\nconst _useOrganizedParticipants = (props: OrganizedParticipantsArgs): OrganizedParticipantsResult => {\n  const visibleGridParticipants = useRef<VideoGalleryRemoteParticipant[]>([]);\n  const visibleOverflowGalleryParticipants = useRef<VideoGalleryRemoteParticipant[]>([]);\n  const {\n    remoteParticipants = [],\n    dominantSpeakers = [],\n    maxRemoteVideoStreams = DEFAULT_MAX_VIDEO_SREAMS,\n    maxOverflowGalleryDominantSpeakers = DEFAULT_MAX_OVERFLOW_GALLERY_DOMINANT_SPEAKERS,\n    isScreenShareActive = false,\n    pinnedParticipantUserIds = [],\n    layout\n  } = props;\n  const calculateMaxRemoteVideoStreams = (): number => {\n    if (maxRemoteVideoStreams > MAX_GRID_PARTICIPANTS_NOT_LARGE_GALLERY) {\n      return MAX_GRID_PARTICIPANTS_NOT_LARGE_GALLERY;\n    } else {\n      return maxRemoteVideoStreams;\n    }\n    return maxRemoteVideoStreams;\n  };\n  const maxRemoteVideoStreamsToUse = calculateMaxRemoteVideoStreams();\n  const videoParticipants = remoteParticipants.filter(p => p.videoStream?.isAvailable);\n  const participantsToSortTrampoline = (): VideoGalleryRemoteParticipant[] => {\n    return layout !== 'floatingLocalVideo' ? putVideoParticipantsFirst(remoteParticipants) : videoParticipants;\n    return videoParticipants;\n  };\n  visibleGridParticipants.current = pinnedParticipantUserIds.length > 0 || isScreenShareActive ? [] : smartDominantSpeakerParticipants({\n    participants: participantsToSortTrampoline(),\n    dominantSpeakers,\n    lastVisibleParticipants: visibleGridParticipants.current,\n    maxDominantSpeakers: maxRemoteVideoStreamsToUse\n  }).slice(0, maxRemoteVideoStreamsToUse);\n  const dominantSpeakerToGrid = layout === 'speaker' ? dominantSpeakers && dominantSpeakers[0] ? visibleGridParticipants.current.filter(p => p.userId === dominantSpeakers[0]) : [visibleGridParticipants.current[0]] : [];\n  if (dominantSpeakerToGrid[0]) {\n    visibleGridParticipants.current = dominantSpeakerToGrid;\n  }\n  const visibleGridParticipantsSet = new Set(visibleGridParticipants.current.map(p => p.userId));\n  const remoteParticipantsOrdered = putVideoParticipantsFirst(remoteParticipants);\n  visibleOverflowGalleryParticipants.current = smartDominantSpeakerParticipants({\n    participants: remoteParticipantsOrdered.filter(p => !visibleGridParticipantsSet.has(p.userId)),\n    dominantSpeakers: dominantSpeakers,\n    lastVisibleParticipants: visibleOverflowGalleryParticipants.current,\n    maxDominantSpeakers: maxOverflowGalleryDominantSpeakers\n  });\n  const getGridParticipants = useCallback((): VideoGalleryRemoteParticipant[] => {\n    if (isScreenShareActive) {\n      return [];\n    }\n    // if we have no grid participants we need to cap the max number of overflowGallery participants in the grid\n    // we will use the max streams provided to the function to find the max participants that can go in the grid\n    // if there are less participants than max streams then we will use all participants including joining in the grid\n    return visibleGridParticipants.current.length > 0 ? visibleGridParticipants.current : visibleOverflowGalleryParticipants.current.slice(0, maxRemoteVideoStreamsToUse);\n  }, [isScreenShareActive, maxRemoteVideoStreamsToUse]);\n  const gridParticipants = getGridParticipants();\n  const getOverflowGalleryRemoteParticipants = useCallback((): (VideoGalleryParticipant | VideoGalleryRemoteParticipant)[] => {\n    if (isScreenShareActive) {\n      // If screen sharing is active, assign video and audio participants as overflow gallery participants\n      return visibleGridParticipants.current.concat(visibleOverflowGalleryParticipants.current);\n    } else {\n      // If screen sharing is not active, then assign all video tiles as grid tiles.\n      // If there are no video tiles, then assign audio tiles as grid tiles.\n      // if there are more overflow tiles than max streams then find the tiles that don't fit in the grid and put them in overflow\n      // overflow should be empty if total participants including calling participants is less than max streams\n      return visibleGridParticipants.current.length > 0 ? visibleOverflowGalleryParticipants.current : visibleOverflowGalleryParticipants.current.slice(maxRemoteVideoStreamsToUse);\n    }\n  }, [isScreenShareActive, maxRemoteVideoStreamsToUse]);\n  const overflowGalleryParticipants = getOverflowGalleryRemoteParticipants();\n  return {\n    gridParticipants,\n    overflowGalleryParticipants: overflowGalleryParticipants\n  };\n};\ninterface SortedRemoteParticipants {\n  [key: string]: VideoGalleryRemoteParticipant;\n}\nconst _useOrganizedParticipantsWithFocusedParticipants = (props: OrganizedParticipantsArgs): OrganizedParticipantsResult => {\n  // map remote participants by userId\n  const remoteParticipantMap = props.remoteParticipants.reduce((map, remoteParticipant) => {\n    map[remoteParticipant.userId] = remoteParticipant;\n    return map;\n  }, ({} as SortedRemoteParticipants));\n  const spotlightedParticipantUserIds = props.spotlightedParticipantUserIds ?? [];\n  // declare focused participant user ids as spotlighted participants user ids followed by\n  // pinned participants user ids\n  const focusedParticipantUserIds = [...new Set(spotlightedParticipantUserIds.concat(props.pinnedParticipantUserIds ?? []))];\n  // get focused participants from map of remote participants in the order of the user ids\n  const focusedParticipants: VideoGalleryRemoteParticipant[] = [];\n  focusedParticipantUserIds.forEach(id => {\n    const pinnedParticipant = remoteParticipantMap[id];\n    if (pinnedParticipant) {\n      focusedParticipants.push(pinnedParticipant);\n    }\n  });\n\n  // get unfocused participants by filtering out set of focused participant user ids from all remote participants\n  const focusedParticipantUserIdSet = new Set(focusedParticipantUserIds);\n  const unfocusedParticipants = props.remoteParticipants.filter(p => !focusedParticipantUserIdSet.has(p.userId));\n  const useOrganizedParticipantsProps = {\n    ...props,\n    // if there are pinned participants then we should only consider unpinned participants\n    remoteParticipants: unfocusedParticipants\n  };\n  const useOrganizedParticipantsResult = _useOrganizedParticipants(useOrganizedParticipantsProps);\n  if (focusedParticipants.length === 0) {\n    return useOrganizedParticipantsResult;\n  }\n  return {\n    gridParticipants: props.isScreenShareActive ? [] : focusedParticipants,\n    overflowGalleryParticipants: props.isScreenShareActive ? focusedParticipants.concat(useOrganizedParticipantsResult.overflowGalleryParticipants) : useOrganizedParticipantsResult.gridParticipants.concat(useOrganizedParticipantsResult.overflowGalleryParticipants)\n  };\n};\nconst putVideoParticipantsFirst = (remoteParticipants: VideoGalleryRemoteParticipant[]): VideoGalleryRemoteParticipant[] => {\n  const videoParticipants: VideoGalleryRemoteParticipant[] = [];\n  const audioParticipants: VideoGalleryRemoteParticipant[] = [];\n  remoteParticipants.forEach(p => {\n    if (p.videoStream?.isAvailable) {\n      videoParticipants.push(p);\n    } else {\n      audioParticipants.push(p);\n    }\n  });\n  const remoteParticipantSortedByVideo = videoParticipants.concat(audioParticipants);\n  return remoteParticipantSortedByVideo;\n};\n\n/**\n * Hook to determine which participants should be in grid and overflow gallery and their order respectively\n * @private\n */\nexport const useOrganizedParticipants = (args: OrganizedParticipantsArgs): OrganizedParticipantsResult => {\n  return _useOrganizedParticipantsWithFocusedParticipants(args);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, Theme } from '@fluentui/react';\n\n/**\n * Horizontal Gallery button width in rem\n */\nexport const HORIZONTAL_GALLERY_BUTTON_WIDTH = 1.75;\n\n/**\n * @private\n */\nexport const leftRightButtonStyles = (theme: Theme): IStyle => {\n  return {\n    background: 'none',\n    padding: 0,\n    height: 'auto',\n    minWidth: `${HORIZONTAL_GALLERY_BUTTON_WIDTH}rem`,\n    maxWidth: `${HORIZONTAL_GALLERY_BUTTON_WIDTH}rem`,\n    border: `1px solid ${theme.palette.neutralLight}`,\n    borderRadius: theme.effects.roundedCorner4\n  };\n};\n\n/**\n * Horizontal Gallery gap size in rem between tiles and buttons\n */\nexport const HORIZONTAL_GALLERY_GAP = 0.5;\n\n/**\n * @private\n */\nexport const rootStyle: IStyle = {\n  height: '100%',\n  width: '100%',\n  gap: `${HORIZONTAL_GALLERY_GAP}rem`\n};\n\n/**\n * @private\n */\nexport const childrenContainerStyle: IStyle = {\n  height: '100%',\n  width: '100%',\n  gap: `${HORIZONTAL_GALLERY_GAP}rem`\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * Helper function to bucketize a given array of items into buckets of a specified size.\n *\n * @param arr array to bucketize\n * @param bucketSize number of children for each bucket\n * @returns nested array of given children\n *\n * @private\n */\nexport function bucketize<T>(arr: T[], bucketSize: number): T[][] {\n  const bucketArray: T[][] = [];\n  if (bucketSize <= 0) {\n    return bucketArray;\n  }\n  for (let i = 0; i < arr.length; i += bucketSize) {\n    bucketArray.push(arr.slice(i, i + bucketSize));\n  }\n  return bucketArray;\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { DefaultButton, Icon, IStyle, Stack, mergeStyles } from '@fluentui/react';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useTheme } from '../theming';\nimport { BaseCustomStyles } from '../types';\nimport { rootStyle, childrenContainerStyle, leftRightButtonStyles } from './styles/HorizontalGallery.styles';\nimport { useIdentifiers } from '../identifiers';\nimport { bucketize } from './utils/overFlowGalleriesUtils';\n\n/**\n * {@link HorizontalGallery} default children per page\n */\nconst DEFAULT_CHILDREN_PER_PAGE = 5;\n\n/**\n * {@link HorizontalGallery} Component Styles.\n * @public\n */\nexport interface HorizontalGalleryStyles extends BaseCustomStyles {\n  /** Styles for each child of {@link HorizontalGallery} */\n  children?: IStyle;\n  /** Styles for navigation button to go to previous page */\n  previousButton?: IStyle;\n  /** Styles for navigation button to go to next page */\n  nextButton?: IStyle;\n}\n\n/**\n * {@link HorizontalGallery} Component Props.\n */\nexport interface HorizontalGalleryProps {\n  children: React.ReactNode;\n  /**\n   * Styles for HorizontalGallery\n   */\n  styles?: HorizontalGalleryStyles;\n  /**\n   * Children shown per page\n   * @defaultValue 5\n   */\n  childrenPerPage?: number;\n  /**\n   * helper function to choose which tiles to give video to.\n   */\n  onFetchTilesToRender?: (indexes: number[]) => void;\n}\n\n/**\n * Renders a horizontal gallery that parents children horizontally. Handles pagination based on the childrenPerPage prop.\n * @param props - HorizontalGalleryProps {@link @azure/communication-react#HorizontalGalleryProps}\n * @returns\n */\nexport const HorizontalGallery = (props: HorizontalGalleryProps): JSX.Element => {\n  const {\n    children,\n    childrenPerPage = DEFAULT_CHILDREN_PER_PAGE,\n    styles,\n    onFetchTilesToRender\n  } = props;\n  const ids = useIdentifiers();\n  const [page, setPage] = useState(0);\n  const numberOfChildren = React.Children.count(children);\n  const lastPage = Math.ceil(numberOfChildren / childrenPerPage) - 1;\n  const indexesArray: number[][] = useMemo(() => {\n    return bucketize([...Array(numberOfChildren).keys()], childrenPerPage);\n  }, [numberOfChildren, childrenPerPage]);\n  useEffect(() => {\n    if (onFetchTilesToRender && indexesArray) {\n      onFetchTilesToRender(indexesArray[page]);\n    }\n  }, [indexesArray, onFetchTilesToRender, page]);\n  const firstIndexOfCurrentPage = page * childrenPerPage;\n  const clippedPage = firstIndexOfCurrentPage < numberOfChildren - 1 ? page : lastPage;\n  const childrenOnCurrentPage = useMemo(() => {\n    if (indexesArray[0] !== undefined) {\n      return indexesArray[clippedPage].map(index => {\n        return React.Children.toArray(children)[index];\n      });\n    }\n    return [];\n  }, [indexesArray, clippedPage, children]);\n  const showButtons = numberOfChildren > childrenPerPage;\n  const disablePreviousButton = page === 0;\n  const disableNextButton = page === lastPage;\n  const childrenStyles = useMemo(() => {\n    return {\n      root: styles?.children\n    };\n  }, [styles?.children]);\n\n  // If children per page is 0 or less return empty element\n  if (childrenPerPage <= 0) {\n    return <></>;\n  }\n  return <Stack horizontal className={mergeStyles(rootStyle, props.styles?.root)}>\n      {showButtons && <HorizontalGalleryNavigationButton key=\"previous-nav-button\" icon={<Icon iconName=\"HorizontalGalleryLeftButton\" />} styles={styles?.previousButton} onClick={() => setPage(Math.max(0, Math.min(lastPage, page - 1)))} disabled={disablePreviousButton} identifier={ids.overflowGalleryLeftNavButton} />}\n      <Stack horizontal className={mergeStyles(childrenContainerStyle)}>\n        {childrenOnCurrentPage.map((child, i) => {\n        return <Stack.Item styles={childrenStyles} key={i} data-ui-id={ids.horizontalGalleryVideoTile}>\n              {child}\n            </Stack.Item>;\n      })}\n      </Stack>\n      {showButtons && <HorizontalGalleryNavigationButton key=\"next-nav-button\" icon={<Icon iconName=\"HorizontalGalleryRightButton\" />} styles={styles?.nextButton} onClick={() => setPage(Math.min(lastPage, page + 1))} disabled={disableNextButton} identifier={ids.overflowGalleryRightNavButton} />}\n    </Stack>;\n};\nconst HorizontalGalleryNavigationButton = (props: {\n  icon: JSX.Element;\n  styles: IStyle;\n  onClick?: () => void;\n  disabled?: boolean;\n  identifier?: string;\n}): JSX.Element => {\n  const theme = useTheme();\n  return <DefaultButton className={mergeStyles(leftRightButtonStyles(theme), props.styles)} onClick={props.onClick} disabled={props.disabled} data-ui-id={props.identifier}>\n      {props.icon}\n    </DefaultButton>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, IButtonStyles, IModalStyleProps, IModalStyles, IStackStyles, IStyle, IStyleFunctionOrObject, mergeStyles, Theme } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\nimport { VideoTileStylesProps } from '../../VideoTile';\n\n/**\n * @private\n */\nexport const videoGalleryOuterDivStyle = mergeStyles({\n  position: 'relative',\n  width: '100%',\n  height: '100%'\n});\n\n/**\n * @private\n */\nexport const videoGalleryContainerStyle: IStackStyles = {\n  root: {\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n    padding: '0.5rem'\n  }\n};\n\n/**\n * Small floating modal width and height in rem for small screen\n */\nexport const SMALL_FLOATING_MODAL_SIZE_REM = {\n  width: 3.625,\n  height: 6.5\n};\n\n/**\n * Large floating modal width and height in rem for large screen\n * Aspect ratio: 16:9\n */\nexport const LARGE_FLOATING_MODAL_SIZE_REM = {\n  width: 13.438,\n  height: 7.5\n};\n\n/**\n * Vertical gallery floating modal width and height in rem\n * Aspect ratio: 16:9\n */\nexport const SHORT_VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM = {\n  width: 9,\n  height: 5.063\n};\n\n/**\n * Vertical gallery floating modal width and height in rem\n * Aspect ratio: 16:9\n */\nexport const VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM = {\n  width: 11,\n  height: 6.25\n};\n/**\n * @private\n * z-index to ensure that the local video tile is above the video gallery.\n */\nexport const LOCAL_VIDEO_TILE_ZINDEX = 2;\n\n/**\n * @private\n */\nexport const localVideoTileContainerStyle = (theme: Theme, localVideoTileSizeRem: {\n  width: number;\n  height: number;\n}, screenSharePresent?: boolean, overflowGalleryPosition?: 'horizontalBottom' | 'verticalRight' | 'horizontalTop'): IStyle => {\n  return {\n    width: screenSharePresent ? `${localVideoTileSizeRem.width}rem` : '',\n    height: screenSharePresent ? `${localVideoTileSizeRem.height}rem` : '',\n    minWidth: screenSharePresent ? '' : `${localVideoTileSizeRem.width}rem`,\n    minHeight: screenSharePresent ? '' : `${localVideoTileSizeRem.height}rem`,\n    position: 'absolute',\n    bottom: overflowGalleryPosition !== 'horizontalTop' ? `${dockedlocalVideoTileContainerPaddingRem}rem` : 'unset',\n    top: overflowGalleryPosition === 'horizontalTop' ? `${dockedlocalVideoTileContainerPaddingRem}rem` : 'unset',\n    borderRadius: theme.effects.roundedCorner4,\n    overflow: 'hidden',\n    right: `${dockedlocalVideoTileContainerPaddingRem}rem`\n  };\n};\n\n/**\n * @private\n */\nexport const localVideoTileWithControlsContainerStyle = (theme: Theme, localVideoTileSizeRem: {\n  width: number;\n  height: number;\n}): IStackStyles => {\n  return concatStyleSets(localVideoTileContainerStyle(theme, localVideoTileSizeRem), {\n    root: {\n      boxShadow: theme.effects.elevation8\n    }\n  });\n};\n\n/**\n * @private\n */\nexport const floatingLocalVideoModalStyle = (theme: Theme, modalSizeRem: {\n  width: number;\n  height: number;\n}): IStyleFunctionOrObject<IModalStyleProps, IModalStyles> => {\n  return concatStyleSets({\n    main: mergeStyles(localVideoTileContainerStyle(theme, modalSizeRem), {\n      bottom: `${floatinglocalVideoModalInitialPositionGapRem}rem`,\n      right: `${floatinglocalVideoModalInitialPositionGapRem}rem`\n    })\n  }, {\n    main: {\n      boxShadow: theme.effects.elevation8,\n      ':focus-within': {\n        boxShadow: theme.effects.elevation16,\n        border: `${_pxToRem(2)} solid ${theme.palette.neutralPrimary}`\n      }\n    }\n  }, localVideoModalStyles);\n};\n\n/**\n * Initial position gap of the floating local video modal.\n * ie. if this is 1rem, then floating local video modal would initially be positioned 1rem from\n * the bottom and 1rem from the right.\n * @private\n */\nexport const floatinglocalVideoModalInitialPositionGapRem = 1;\n\n/**\n * Padding of the docked local video tile container.\n * @private\n */\nexport const dockedlocalVideoTileContainerPaddingRem = 0.5;\n\n/**\n * @private\n */\nexport const floatingLocalVideoTileStyle: VideoTileStylesProps = {\n  root: {\n    position: 'absolute',\n    zIndex: LOCAL_VIDEO_TILE_ZINDEX,\n    height: '100%',\n    width: '100%'\n  }\n};\n\n/**\n * @private\n */\nexport const localVideoCameraCycleButtonStyles = (theme: Theme): IButtonStyles => {\n  return {\n    root: {\n      position: 'absolute',\n      width: _pxToRem(32),\n      height: _pxToRem(32),\n      right: '0rem',\n      top: '0rem',\n      color: '#FFFFFF',\n      // only shows up on running video feed to we want to force specific colours.\n      zIndex: 2,\n      // shows the button directly over the local video feed.\n      background: 'rgba(0,0,0,0.4)',\n      borderRadius: theme.effects.roundedCorner2\n    },\n    rootFocused: {\n      // styles to remove the unwanted white highlight and blue colour after tapping on button.\n      color: '#FFFFFF',\n      background: 'rgba(0,0,0,0.4)' // sets opacity of background to be visible on all backdrops in video stream.\n    },\n    icon: {\n      paddingLeft: _pxToRem(3),\n      paddingRight: _pxToRem(3),\n      margin: 0\n    },\n    flexContainer: {\n      paddingBottom: _pxToRem(8)\n    }\n  };\n};\n\n/**\n * Styles for the local video tile modal when it is focused, will cause keyboard move icon to appear over video\n * @private\n */\nexport const localVideoModalStyles: Partial<IModalStyles> = {\n  keyboardMoveIconContainer: {\n    zIndex: LOCAL_VIDEO_TILE_ZINDEX + 1 // zIndex to set the keyboard movement Icon above the other layers in the video tile.\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle } from '@fluentui/react';\nimport { HorizontalGalleryStyles } from '../../HorizontalGallery';\nimport { LARGE_FLOATING_MODAL_SIZE_REM, SMALL_FLOATING_MODAL_SIZE_REM } from './FloatingLocalVideo.styles';\n\n/**\n * @private\n */\nexport const horizontalGalleryContainerStyle = (shouldFloatLocalVideo: boolean, isNarrow: boolean): IStyle => {\n  return {\n    minHeight: isNarrow ? `${SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM.height}rem` : `${LARGE_HORIZONTAL_GALLERY_TILE_SIZE_REM.height}rem`,\n    width: shouldFloatLocalVideo ? isNarrow ? `calc(100% - ${SMALL_FLOATING_MODAL_SIZE_REM.width}rem)` : `calc(100% - ${LARGE_FLOATING_MODAL_SIZE_REM.width}rem)` : '100%',\n    paddingRight: '0.5rem'\n  };\n};\n\n/**\n * @private\n */\nexport const horizontalGalleryStyle = (isNarrow: boolean): HorizontalGalleryStyles => {\n  return {\n    children: isNarrow ? SMALL_HORIZONTAL_GALLERY_TILE_STYLE : LARGE_HORIZONTAL_GALLERY_TILE_STYLE\n  };\n};\n\n/**\n * Small horizontal gallery tile size in rem\n * @private\n */\nexport const SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM = {\n  height: 6.5,\n  width: 6.5\n};\n\n/**\n * Large horizontal gallery tile size in rem\n * @private\n */\nexport const LARGE_HORIZONTAL_GALLERY_TILE_SIZE_REM = {\n  height: 7.5,\n  minWidth: 7.5,\n  maxWidth: 13.43\n};\n\n/**\n * @private\n */\nexport const SMALL_HORIZONTAL_GALLERY_TILE_STYLE = {\n  minHeight: `${SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM.height}rem`,\n  minWidth: `${SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM.width}rem`,\n  maxHeight: `${SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM.height}rem`,\n  maxWidth: `${SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM.width}rem`\n};\n/**\n * @private\n */\nexport const LARGE_HORIZONTAL_GALLERY_TILE_STYLE = {\n  minHeight: `${LARGE_HORIZONTAL_GALLERY_TILE_SIZE_REM.height}rem`,\n  minWidth: `${LARGE_HORIZONTAL_GALLERY_TILE_SIZE_REM.minWidth}rem`,\n  maxHeight: `${LARGE_HORIZONTAL_GALLERY_TILE_SIZE_REM.height}rem`,\n  maxWidth: `${LARGE_HORIZONTAL_GALLERY_TILE_SIZE_REM.maxWidth}rem`,\n  width: '100%',\n  height: '100%'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\nimport { VerticalGalleryStyles } from '../../VerticalGallery';\nimport { SHORT_VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM, SMALL_FLOATING_MODAL_SIZE_REM, VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM } from './FloatingLocalVideo.styles';\n\n/**\n * VerticalGallery tile size in rem:\n *\n * min - smallest possible size of the tile (90px)\n * max - Largest size we want the vertical tiles (144px)\n *\n * @private\n */\nexport const SHORT_VERTICAL_GALLERY_TILE_SIZE_REM = {\n  minHeight: 5.625,\n  maxHeight: 9,\n  width: 9\n};\n\n/**\n * VerticalGallery tile size in rem:\n *\n * min - smallest possible size of the tile (90px)\n * max - Largest size we want the vertical tiles (144px)\n *\n * @private\n */\nexport const VERTICAL_GALLERY_TILE_SIZE_REM = {\n  minHeight: 6.75,\n  maxHeight: 11,\n  width: 11\n};\n\n/**\n * Styles for the VerticalGallery's container set in parent.\n *\n * width is being increased by 1rem to account for the gap width desired for the VerticalGallery.\n *\n * @param shouldFloatLocalVideo whether rendered in floating layout or not\n * @returns Style set for VerticalGallery container.\n */\nexport const verticalGalleryContainerStyle = (shouldFloatLocalVideo: boolean, isNarrow: boolean, isShort: boolean): IStyle => {\n  return isNarrow && isShort ? {\n    width: `${SHORT_VERTICAL_GALLERY_TILE_SIZE_REM.width}rem`,\n    height: shouldFloatLocalVideo ? `calc(100% - ${SMALL_FLOATING_MODAL_SIZE_REM.height}rem)` : '100%',\n    paddingBottom: '0.5rem'\n  } : !isNarrow && isShort ? {\n    width: `${SHORT_VERTICAL_GALLERY_TILE_SIZE_REM.width}rem`,\n    height: shouldFloatLocalVideo ? `calc(100% - ${SHORT_VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM.height}rem)` : '100%',\n    paddingBottom: '0.5rem'\n  } : {\n    width: `${VERTICAL_GALLERY_TILE_SIZE_REM.width}rem`,\n    height: shouldFloatLocalVideo ? `calc(100% - ${VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM.height}rem)` : '100%',\n    paddingBottom: '0.5rem'\n  };\n};\n\n/**\n * @private\n */\nexport const SHORT_VERTICAL_GALLERY_TILE_STYLE = {\n  minHeight: `${SHORT_VERTICAL_GALLERY_TILE_SIZE_REM.minHeight}rem`,\n  minWidth: `${SHORT_VERTICAL_GALLERY_TILE_SIZE_REM.width}rem`,\n  maxHeight: `${SHORT_VERTICAL_GALLERY_TILE_SIZE_REM.maxHeight}rem`,\n  maxWidth: `${SHORT_VERTICAL_GALLERY_TILE_SIZE_REM.width}rem`,\n  width: '100%',\n  height: '100%'\n};\n\n/**\n * @private\n */\nexport const VERTICAL_GALLERY_TILE_STYLE = {\n  minHeight: `${VERTICAL_GALLERY_TILE_SIZE_REM.minHeight}rem`,\n  minWidth: `${VERTICAL_GALLERY_TILE_SIZE_REM.width}rem`,\n  maxHeight: `${VERTICAL_GALLERY_TILE_SIZE_REM.maxHeight}rem`,\n  maxWidth: `${VERTICAL_GALLERY_TILE_SIZE_REM.width}rem`,\n  width: '100%',\n  height: '100%'\n};\n\n/**\n * @private\n */\nexport const verticalGalleryStyle = (isShort: boolean): VerticalGalleryStyles => {\n  return isShort ? {\n    children: SHORT_VERTICAL_GALLERY_TILE_STYLE\n  } : {\n    children: VERTICAL_GALLERY_TILE_STYLE\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _convertRemToPx as convertRemToPx } from '@internal/acs-ui-common';\nimport { LARGE_HORIZONTAL_GALLERY_TILE_SIZE_REM } from '../styles/VideoGalleryResponsiveHorizontalGallery.styles';\nimport { SHORT_VERTICAL_GALLERY_TILE_SIZE_REM, VERTICAL_GALLERY_TILE_SIZE_REM } from '../styles/VideoGalleryResponsiveVerticalGallery.styles';\n\n/**\n * Helper function to calculate children per page for HorizontalGallery based on width of container, child, buttons, and\n * gaps in between\n *\n * @private\n */\nexport const calculateHorizontalChildrenPerPage = (args: {\n  numberOfChildren: number;\n  containerWidth: number;\n  gapWidthRem: number;\n  buttonWidthRem: number;\n}): number => {\n  const {\n    numberOfChildren,\n    containerWidth,\n    buttonWidthRem,\n    gapWidthRem\n  } = args;\n  const childMinWidth = convertRemToPx(LARGE_HORIZONTAL_GALLERY_TILE_SIZE_REM.minWidth);\n  const gapWidth = convertRemToPx(gapWidthRem);\n\n  /** First check how many children can fit in containerWidth.\n   *    __________________________________\n   *   |                ||                |\n   *   |                ||                |\n   *   |________________||________________|\n   *   <-----------containerWidth--------->\n   *  containerWidth = n * childWidth + (n - 1) * gapWidth. Isolate n and take the floor.\n   */\n  const numberOfChildrenInContainer = Math.floor((containerWidth + gapWidth) / (childMinWidth + gapWidth));\n  // If all children fit then return numberOfChildrenInContainer\n  if (numberOfChildren <= numberOfChildrenInContainer) {\n    return numberOfChildrenInContainer;\n  }\n  const buttonWidth = convertRemToPx(buttonWidthRem);\n\n  /** We know we need to paginate. So we need to subtract the buttonWidth twice and gapWidth twice from\n   * containerWidth to compute childrenSpace\n   *   <-----------containerWidth--------->\n   *    __________________________________\n   *   | ||             ||             || |\n   *   |<||             ||             ||>|\n   *   |_||_____________||_____________||_|\n   *       <-------childrenSpace------>\n   */\n  const childrenSpace = containerWidth - 2 * buttonWidth - 2 * gapWidth;\n  // Now that we have childrenSpace width we can figure out how many children can fit in childrenSpace.\n  // childrenSpace = n * childWidth + (n - 1) * gapWidth. Isolate n and take the floor.\n  return Math.max(Math.floor((childrenSpace + gapWidth) / (childMinWidth + gapWidth)), 1);\n};\n\n/**\n * Helper function to find the number of children for the VerticalGallery on each page.\n *\n * @private\n */\nexport const calculateVerticalChildrenPerPage = (args: {\n  numberOfChildren: number;\n  containerHeight: number;\n  gapHeightRem: number;\n  controlBarHeight: number;\n  isShort: boolean;\n}): number => {\n  const {\n    numberOfChildren,\n    containerHeight,\n    gapHeightRem,\n    controlBarHeight,\n    isShort\n  } = args;\n  const childMinHeightPx = convertRemToPx(isShort ? SHORT_VERTICAL_GALLERY_TILE_SIZE_REM.minHeight : VERTICAL_GALLERY_TILE_SIZE_REM.minHeight);\n  const gapHeightPx = convertRemToPx(gapHeightRem);\n  const controlBarHeightPx = convertRemToPx(controlBarHeight);\n\n  /** First check how many children can fit in containerHeight.\n   *\n   *   _________________\n   *   |                |\n   *   |                |\n   *   |________________|\n   *    _________________\n   *   |                |\n   *   |                |\n   *   |________________|\n   *\n   *      <   n/m   >\n   *\n   * number of children = container height - (2* gap height + button height) / childMinHeight\n   *\n   * we want to find the maximum number of children at the smallest size we can fit in the gallery and then resize them\n   * to fill in the space as much as possible\n   *\n   * First we will find the max number of children without any controls we can fit.\n   */\n\n  const maxNumberOfChildrenInContainer = Math.floor((containerHeight + gapHeightPx) / (childMinHeightPx + gapHeightPx));\n  // if all of the children fit in the container just return the number of children\n  if (numberOfChildren <= maxNumberOfChildrenInContainer) {\n    return maxNumberOfChildrenInContainer;\n  }\n\n  /**\n   * For the pagination we know the container height, the height of the button bar and the 2 times the gap\n   * height, top tile and bottom tile above control bar. So the child space is calculated as:\n   *\n   *      space = height - controlbar - (2 * gap)\n   */\n  const childSpace = containerHeight - controlBarHeightPx - 2 * gapHeightPx;\n\n  /**\n   * Now that we have the childrenSpace height we can figure out how many Children can fir in the childrenSpace.\n   * childrenSpace = n * childHeightMin + (n - 1) * gapHeight. isolate n and take the floor.\n   *\n   * We want to always return at least one video tile if there are children present.So we take the max.\n   */\n  return Math.max(Math.floor((childSpace + gapHeightPx) / (childMinHeightPx + gapHeightPx)), 1);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, mergeStyles } from '@fluentui/react';\nimport React, { useRef } from 'react';\nimport { HorizontalGallery, HorizontalGalleryStyles } from './HorizontalGallery';\nimport { _useContainerWidth } from './utils/responsive';\nimport { calculateHorizontalChildrenPerPage } from './VideoGallery/utils/OverflowGalleryUtils';\n\n/**\n * Wrapped HorizontalGallery that adjusts the number of items per page based on the\n * available width obtained from a ResizeObserver, width per child, gap width, and button width\n */\nexport const ResponsiveHorizontalGallery = (props: {\n  children: React.ReactNode;\n  containerStyles: IStyle;\n  horizontalGalleryStyles: HorizontalGalleryStyles;\n  gapWidthRem: number;\n  buttonWidthRem?: number;\n  onFetchTilesToRender?: (indexes: number[]) => void;\n  /** event to listen for children per page changes */\n  onChildrenPerPageChange?: (childrenPerPage: number) => void;\n}): JSX.Element => {\n  const {\n    gapWidthRem,\n    buttonWidthRem = 0,\n    onFetchTilesToRender,\n    onChildrenPerPageChange\n  } = props;\n  const containerRef = useRef<HTMLDivElement>(null);\n  const containerWidth = _useContainerWidth(containerRef);\n  const leftPadding = containerRef.current ? parseFloat(getComputedStyle(containerRef.current).paddingLeft) : 0;\n  const rightPadding = containerRef.current ? parseFloat(getComputedStyle(containerRef.current).paddingRight) : 0;\n  const childrenPerPage = calculateHorizontalChildrenPerPage({\n    numberOfChildren: React.Children.count(props.children),\n    containerWidth: (containerWidth ?? 0) - leftPadding - rightPadding,\n    gapWidthRem,\n    buttonWidthRem\n  });\n  onChildrenPerPageChange?.(childrenPerPage);\n  return <div data-ui-id=\"responsive-horizontal-gallery\" ref={containerRef} className={mergeStyles(props.containerStyles)}>\n      <HorizontalGallery childrenPerPage={childrenPerPage} styles={props.horizontalGalleryStyles} onFetchTilesToRender={onFetchTilesToRender}>\n        {props.children}\n      </HorizontalGallery>\n    </div>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IIconStyles, IStyle, Theme } from '@fluentui/react';\n\n/**\n * Vertical Gallery gap size in rem between tiles and buttons\n *\n * @private\n */\nexport const VERTICAL_GALLERY_GAP = 0.5;\n\n/**\n * @private\n */\nexport const childrenContainerStyle = (pageControlBarHeight: number): IStyle => {\n  return {\n    width: '100%',\n    height: `calc(100% - ${pageControlBarHeight + VERTICAL_GALLERY_GAP}rem)`,\n    gap: `${VERTICAL_GALLERY_GAP}rem`\n  };\n};\n\n/**\n * @private\n */\nexport const rootStyle: IStyle = {\n  height: '100%',\n  width: 'inherit',\n  // this needs to inherit its parent's width otherwise will collapse if there are no children.\n  gap: `${VERTICAL_GALLERY_GAP}rem`,\n  position: 'relative'\n};\n\n/**\n * @private\n */\nexport const pageNavigationControlBarContainerStyle: IStyle = {\n  height: '2rem',\n  width: '100%',\n  position: 'absolute',\n  bottom: '0'\n};\n\n/**\n * @private\n */\nexport const leftRightButtonStyles = (theme: Theme): IStyle => {\n  return {\n    background: 'none',\n    padding: 0,\n    height: 'auto',\n    borderRadius: theme.effects.roundedCorner4,\n    border: 'none',\n    minWidth: '2rem'\n  };\n};\n\n/**\n * @private\n */\nexport const participantPageCounter: IStyle = {\n  lineHeight: '2rem',\n  width: '100%',\n  textAlign: 'center'\n};\n\n/**\n * @private\n */\nexport const navIconStyles: IIconStyles = {\n  root: {\n    lineHeight: '0'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { DefaultButton, Icon, IStyle, mergeStyles, Stack, Text } from '@fluentui/react';\nimport React, { useEffect, useMemo, useState } from 'react';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { useLocale } from '../localization';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { useIdentifiers } from '../identifiers';\nimport { useTheme } from '../theming';\nimport { BaseCustomStyles } from '../types';\nimport { childrenContainerStyle, pageNavigationControlBarContainerStyle, participantPageCounter, leftRightButtonStyles, navIconStyles, rootStyle } from './styles/VerticalGallery.styles';\nimport { bucketize } from './utils/overFlowGalleriesUtils';\n\n/**\n * Styles for the VerticalGallery component\n *\n * @public\n */\nexport interface VerticalGalleryStyles extends BaseCustomStyles {\n  /** Styles for each video tile in the vertical gallery */\n  children?: IStyle;\n  /** Styles for the verticalGallery control bar */\n  controlBar?: VerticalGalleryControlBarStyles;\n}\n\n/**\n * Strings for localization of the vertical gallery.\n *\n * @public\n */\nexport interface VerticalGalleryStrings {\n  /** Aria label for the left page navigation button */\n  leftNavButtonAriaLabel?: string;\n  /** Aria label for the right page navigation button */\n  rightNavButtonAriaLabel?: string;\n}\n\n/**\n * Styles for the control bar inside the VerticalGallery component\n *\n * @public\n */\nexport interface VerticalGalleryControlBarStyles extends BaseCustomStyles {\n  /**\n   * styles for the next button in the VerticalGalleryControlBar\n   */\n  nextButton?: IStyle;\n  /**\n   * Styles for the previous button in the VerticalGalleryControlBar\n   */\n  previousButton?: IStyle;\n  /**\n   * Styles for the counter in the VerticalGalleryControlBar\n   */\n  counter?: IStyle;\n}\n/**\n * Props for the VerticalGallery component\n *\n * @public\n */\nexport interface VerticalGalleryProps {\n  /** Video tiles for the remote participants in the vertical gallery */\n  children: React.ReactNode;\n  /** Max number of children per page in the vertical Gallery */\n  childrenPerPage: number;\n  /** Styles to customize the vertical gallery */\n  styles?: VerticalGalleryStyles;\n  /** helper function to choose which tiles to give video to. */\n  onFetchTilesToRender?: (indexes: number[]) => void;\n}\ninterface VerticalGalleryControlBarProps {\n  onNextButtonClick: () => void;\n  onPreviousButtonClick: () => void;\n  buttonsDisabled: {\n    next: boolean;\n    previous: boolean;\n  };\n  totalPages: number;\n  currentPage: number;\n  styles?: VerticalGalleryControlBarStyles;\n}\n\n/**\n * VerticalGallery is a overflow gallery for participants in the {@link VideoGallery} component. Stacks\n * participants on the Y-axis of the VideoGallery for better use of horizontal space.\n *\n * @public\n */\nexport const VerticalGallery = (props: VerticalGalleryProps): JSX.Element => {\n  const {\n    children,\n    styles,\n    childrenPerPage,\n    onFetchTilesToRender\n  } = props;\n  const [page, setPage] = useState(1);\n  const [buttonState, setButtonState] = useState<{\n    previous: boolean;\n    next: boolean;\n  }>({\n    previous: true,\n    next: true\n  });\n\n  /* @conditional-compile-remove(vertical-gallery) */\n  const ids = useIdentifiers();\n  const numberOfChildren = React.Children.count(children);\n  const lastPage = Math.ceil(numberOfChildren / childrenPerPage);\n  const indexesArray: number[][] = useMemo(() => {\n    return bucketize([...Array(numberOfChildren).keys()], childrenPerPage);\n  }, [numberOfChildren, childrenPerPage]);\n  useEffect(() => {\n    if (onFetchTilesToRender && indexesArray) {\n      onFetchTilesToRender(indexesArray[page - 1]);\n    }\n  }, [indexesArray, onFetchTilesToRender, page]);\n  const firstIndexOfCurrentPage = (page - 1) * childrenPerPage;\n  const clippedPage = firstIndexOfCurrentPage < numberOfChildren - 1 ? page : lastPage;\n  const childrenOnCurrentPage = useMemo(() => {\n    if (indexesArray[0] !== undefined) {\n      return indexesArray[clippedPage - 1].map(index => {\n        return React.Children.toArray(children)[index];\n      });\n    }\n    return;\n  }, [indexesArray, clippedPage, children]);\n  const showButtons = numberOfChildren > childrenPerPage;\n  const onPreviousButtonClick = (): void => {\n    setPage(page - 1);\n  };\n  const onNextButtonClick = (): void => {\n    setPage(page + 1);\n  };\n  if (page > lastPage && lastPage > 0) {\n    setPage(lastPage);\n  }\n  useEffect(() => {\n    if (page > 1 && page < lastPage && showButtons) {\n      // we are somewhere in between first and last pages.\n      setButtonState({\n        previous: false,\n        next: false\n      });\n    } else if (page === 1 && showButtons) {\n      // we are on the first page.\n      setButtonState({\n        previous: true,\n        next: false\n      });\n    } else if (page === lastPage && showButtons) {\n      // we are on the last page.\n      setButtonState({\n        previous: false,\n        next: true\n      });\n    }\n  }, [page, numberOfChildren, lastPage, showButtons]);\n  const childContainerStyle = useMemo(() => {\n    return {\n      root: childrenContainerStyle(2)\n    };\n  }, []);\n  const childrenStyles = useMemo(() => {\n    return {\n      root: styles?.children\n    };\n  }, [styles?.children]);\n  if (childrenPerPage <= 0) {\n    return <></>;\n  }\n  return <Stack className={mergeStyles(rootStyle, styles?.root)}>\n      <Stack styles={childContainerStyle}>\n        {childrenOnCurrentPage?.map((child, i) => {\n        return <Stack.Item key={i} styles={childrenStyles}\n        /* @conditional-compile-remove(vertical-gallery) */ data-ui-id={ids.verticalGalleryVideoTile}>\n              {child}\n            </Stack.Item>;\n      })}\n      </Stack>\n      {showButtons && <VerticalGalleryControlBar buttonsDisabled={buttonState} onPreviousButtonClick={onPreviousButtonClick} onNextButtonClick={onNextButtonClick} totalPages={lastPage} currentPage={page} />}\n    </Stack>;\n};\nconst VerticalGalleryControlBar = (props: VerticalGalleryControlBarProps): JSX.Element => {\n  const {\n    onNextButtonClick,\n    onPreviousButtonClick,\n    buttonsDisabled,\n    currentPage,\n    totalPages,\n    styles\n  } = props;\n  const theme = useTheme();\n  /* @conditional-compile-remove(vertical-gallery) */\n  const ids = useIdentifiers();\n\n  /* @conditional-compile-remove(vertical-gallery) */\n  const strings = useLocale().strings.verticalGallery;\n  const pageCounterContainerStyles = useMemo(() => {\n    return mergeStyles(pageNavigationControlBarContainerStyle, styles?.root);\n  }, [styles?.root]);\n  const previousButtonSyles = useMemo(() => {\n    return mergeStyles(leftRightButtonStyles(theme), styles?.previousButton);\n  }, [styles?.previousButton, theme]);\n  const pageCounterStyles = useMemo(() => {\n    return mergeStyles(participantPageCounter, styles?.counter);\n  }, [styles?.counter]);\n  const nextButtonsStyles = useMemo(() => {\n    return mergeStyles(leftRightButtonStyles(theme), styles?.nextButton);\n  }, [styles?.nextButton, theme]);\n  const controlBarSpacing = {\n    childrenGap: '0.5rem'\n  };\n  return <Stack horizontalAlign=\"center\" tokens={controlBarSpacing} horizontal className={pageCounterContainerStyles}>\n      <DefaultButton className={previousButtonSyles} onClick={onPreviousButtonClick} disabled={buttonsDisabled?.previous}\n    /* @conditional-compile-remove(vertical-gallery) */ ariaLabel={strings.leftNavButtonAriaLabel}\n    /* @conditional-compile-remove(vertical-gallery) */ data-ui-id={ids.overflowGalleryLeftNavButton}>\n        <Icon iconName=\"VerticalGalleryLeftButton\" styles={navIconStyles} />\n      </DefaultButton>\n      <Text\n    /* @conditional-compile-remove(vertical-gallery) */ data-ui-id={ids.verticalGalleryPageCounter} className={pageCounterStyles}>{`${currentPage} / ${totalPages}`}</Text>\n      <DefaultButton className={nextButtonsStyles} onClick={onNextButtonClick} disabled={buttonsDisabled?.next}\n    /* @conditional-compile-remove(vertical-gallery) */ ariaLabel={strings.rightNavButtonAriaLabel}\n    /* @conditional-compile-remove(vertical-gallery) */ data-ui-id={ids.overflowGalleryRightNavButton}>\n        <Icon iconName=\"VerticalGalleryRightButton\" styles={navIconStyles} />\n      </DefaultButton>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, mergeStyles } from '@fluentui/react';\nimport { _convertRemToPx } from '@internal/acs-ui-common';\nimport React, { useRef } from 'react';\nimport { _useContainerHeight } from './utils/responsive';\nimport { VerticalGallery, VerticalGalleryStyles } from './VerticalGallery';\nimport { calculateVerticalChildrenPerPage } from './VideoGallery/utils/OverflowGalleryUtils';\n\n/**\n * Props for the Responsive wrapper of the VerticalGallery component\n *\n * @beta\n */\nexport interface ResponsiveVerticalGalleryProps {\n  /** Styles for the Children space container */\n  containerStyles: IStyle;\n  /** Styles for the VerticalGallery component */\n  verticalGalleryStyles: VerticalGalleryStyles;\n  /** Height of the gap in between the video tiles */\n  gapHeightRem: number;\n  /** Video tiles to be rendered in the Vertical Gallery */\n  children?: React.ReactNode;\n  /** Height of the control bar for navigating pages */\n  controlBarHeightRem?: number;\n  /** container is shorter than 480 px. */\n  isShort?: boolean;\n  /** Function to set which tiles to give video to in the children. */\n  onFetchTilesToRender?: (indexes: number[]) => void;\n  /** event to listen for children per page changes */\n  onChildrenPerPageChange?: (childrenPerPage: number) => void;\n}\n\n/**\n * Responsive container for the VerticalGallery Component. Performs calculations for number of children\n * for the VerticalGallery\n * @param props\n *\n * @beta\n */\nexport const ResponsiveVerticalGallery = (props: ResponsiveVerticalGalleryProps): JSX.Element => {\n  const {\n    children,\n    containerStyles,\n    verticalGalleryStyles,\n    gapHeightRem,\n    controlBarHeightRem,\n    isShort,\n    onFetchTilesToRender,\n    onChildrenPerPageChange\n  } = props;\n  const containerRef = useRef<HTMLDivElement>(null);\n  const containerHeight = _useContainerHeight(containerRef);\n  const topPadding = containerRef.current ? parseFloat(getComputedStyle(containerRef.current).paddingTop) : 0;\n  const bottomPadding = containerRef.current ? parseFloat(getComputedStyle(containerRef.current).paddingBottom) : 0;\n  const childrenPerPage = calculateVerticalChildrenPerPage({\n    numberOfChildren: React.Children.count(children) ?? 0,\n    containerHeight: (containerHeight ?? 0) - topPadding - bottomPadding,\n    gapHeightRem,\n    controlBarHeight: controlBarHeightRem ?? 2,\n    isShort: isShort ?? false\n  });\n  onChildrenPerPageChange?.(childrenPerPage);\n  return <div data-ui-id=\"responsive-vertical-gallery\" ref={containerRef} className={mergeStyles(containerStyles)}>\n      <VerticalGallery childrenPerPage={childrenPerPage} styles={verticalGalleryStyles} onFetchTilesToRender={onFetchTilesToRender}>\n        {children}\n      </VerticalGallery>\n    </div>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles, IStyle } from '@fluentui/react';\nimport { SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM, SMALL_HORIZONTAL_GALLERY_TILE_STYLE } from './VideoGalleryResponsiveHorizontalGallery.styles';\n\n/**\n * @private\n */\nexport const scrollableHorizontalGalleryStyles: IStackStyles = {\n  root: {\n    width: '100%',\n    minHeight: `${SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM.height}rem`,\n    paddingRight: '0.5rem',\n    '> *': SMALL_HORIZONTAL_GALLERY_TILE_STYLE\n  }\n};\n\n/**\n * @private\n */\nexport const scrollableHorizontalGalleryContainerStyles: IStyle = {\n  display: 'flex',\n  minHeight: `${SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM.height}rem`,\n  overflow: 'scroll',\n  '-ms-overflow-style': 'none',\n  'scrollbar-width': 'none',\n  '::-webkit-scrollbar': {\n    display: 'none'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, Stack, mergeStyles } from '@fluentui/react';\nimport React, { useEffect, useRef } from 'react';\nimport { useDraggable } from 'react-use-draggable-scroll';\nimport { scrollableHorizontalGalleryContainerStyles, scrollableHorizontalGalleryStyles } from './styles/ScrollableHorizontalGallery.style';\n\n/**\n * Component to display elements horizontally in a scrollable container\n * @private\n */\nexport const ScrollableHorizontalGallery = (props: {\n  horizontalGalleryElements?: JSX.Element[];\n  onFetchTilesToRender?: (indexes: number[]) => void;\n  containerStyles?: IStyle;\n}): JSX.Element => {\n  const {\n    horizontalGalleryElements,\n    onFetchTilesToRender,\n    containerStyles\n  } = props;\n  useEffect(() => {\n    const indexesArray = [...Array(horizontalGalleryElements?.length).keys()];\n    if (onFetchTilesToRender && indexesArray) {\n      onFetchTilesToRender(indexesArray);\n    }\n  }, [onFetchTilesToRender, horizontalGalleryElements?.length]);\n  const ref = (useRef<HTMLDivElement>() as React.MutableRefObject<HTMLInputElement>);\n  const {\n    events: dragabbleEvents\n  } = useDraggable(ref);\n  return <div ref={ref} {...dragabbleEvents} className={mergeStyles(scrollableHorizontalGalleryContainerStyles, containerStyles)}>\n      <Stack data-ui-id=\"scrollable-horizontal-gallery\" horizontal={true} styles={scrollableHorizontalGalleryStyles} tokens={{\n      childrenGap: '0.5rem'\n    }}>\n        {horizontalGalleryElements}\n      </Stack>\n    </div>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets } from '@fluentui/react';\nimport React, { useMemo } from 'react';\nimport { HorizontalGalleryStyles } from '../HorizontalGallery';\nimport { ResponsiveHorizontalGallery } from '../ResponsiveHorizontalGallery';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { ResponsiveVerticalGallery } from '../ResponsiveVerticalGallery';\nimport { HORIZONTAL_GALLERY_BUTTON_WIDTH, HORIZONTAL_GALLERY_GAP } from '../styles/HorizontalGallery.styles';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { VerticalGalleryStyles } from '../VerticalGallery';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { OverflowGalleryPosition } from '../VideoGallery';\nimport { ScrollableHorizontalGallery } from './ScrollableHorizontalGallery';\nimport { SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM, horizontalGalleryContainerStyle, horizontalGalleryStyle } from './styles/VideoGalleryResponsiveHorizontalGallery.styles';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { _convertPxToRem } from '@internal/acs-ui-common';\nimport { SMALL_FLOATING_MODAL_SIZE_REM } from './styles/FloatingLocalVideo.styles';\nimport { verticalGalleryContainerStyle, verticalGalleryStyle } from './styles/VideoGalleryResponsiveVerticalGallery.styles';\n\n/**\n * A ResponsiveHorizontalGallery styled for the {@link VideoGallery}\n *\n * @private\n */\nexport const OverflowGallery = (props: {\n  shouldFloatLocalVideo?: boolean;\n  onFetchTilesToRender?: (indexes: number[]) => void;\n  isNarrow?: boolean;\n  /* @conditional-compile-remove(vertical-gallery) */\n  isShort?: boolean;\n  overflowGalleryElements?: JSX.Element[];\n  horizontalGalleryStyles?: HorizontalGalleryStyles;\n  /* @conditional-compile-remove(vertical-gallery) */\n  verticalGalleryStyles?: VerticalGalleryStyles;\n  /* @conditional-compile-remove(vertical-gallery) */\n  overflowGalleryPosition?: OverflowGalleryPosition;\n  onChildrenPerPageChange?: (childrenPerPage: number) => void;\n  parentWidth?: number;\n}): JSX.Element => {\n  const {\n    shouldFloatLocalVideo = false,\n    onFetchTilesToRender,\n    isNarrow = false,\n    /* @conditional-compile-remove(vertical-gallery) */\n    isShort = false,\n    overflowGalleryElements,\n    horizontalGalleryStyles,\n    /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition = 'horizontalBottom',\n    /* @conditional-compile-remove(vertical-gallery) */verticalGalleryStyles,\n    onChildrenPerPageChange,\n    parentWidth\n  } = props;\n  const containerStyles = useMemo(() => {\n    /* @conditional-compile-remove(vertical-gallery) */\n    if (overflowGalleryPosition === 'verticalRight') {\n      return verticalGalleryContainerStyle(shouldFloatLocalVideo, isNarrow, isShort);\n    }\n    return horizontalGalleryContainerStyle(shouldFloatLocalVideo, isNarrow);\n  }, [shouldFloatLocalVideo, /* @conditional-compile-remove(vertical-gallery) */isShort, isNarrow, /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition]);\n  const galleryStyles = useMemo(() => {\n    /* @conditional-compile-remove(vertical-gallery) */\n    if (overflowGalleryPosition === 'verticalRight') {\n      return concatStyleSets(verticalGalleryStyle(isShort), verticalGalleryStyles);\n    }\n    return concatStyleSets(horizontalGalleryStyle(isNarrow), horizontalGalleryStyles);\n  }, [isNarrow, /* @conditional-compile-remove(vertical-gallery) */isShort, horizontalGalleryStyles, /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition, /* @conditional-compile-remove(vertical-gallery) */verticalGalleryStyles]);\n  const scrollableHorizontalGalleryContainerStyles = useMemo(() => {\n    if (isNarrow && parentWidth) {\n      return {\n        width: shouldFloatLocalVideo ? `${_convertPxToRem(parentWidth) - SMALL_FLOATING_MODAL_SIZE_REM.width - 1}rem` : `${_convertPxToRem(parentWidth) - 1}rem`\n      };\n    }\n    return undefined;\n  }, [isNarrow, parentWidth, shouldFloatLocalVideo]);\n\n  /* @conditional-compile-remove(vertical-gallery) */\n  if (overflowGalleryPosition === 'verticalRight') {\n    return <ResponsiveVerticalGallery key=\"responsive-vertical-gallery\" containerStyles={containerStyles} verticalGalleryStyles={(galleryStyles as VerticalGalleryStyles)} controlBarHeightRem={HORIZONTAL_GALLERY_BUTTON_WIDTH} gapHeightRem={HORIZONTAL_GALLERY_GAP} isShort={isShort} onFetchTilesToRender={onFetchTilesToRender} onChildrenPerPageChange={onChildrenPerPageChange}>\n        {overflowGalleryElements ? overflowGalleryElements : [<></>]}\n      </ResponsiveVerticalGallery>;\n  }\n  SMALL_HORIZONTAL_GALLERY_TILE_SIZE_REM;\n  if (isNarrow) {\n    // There are no pages for ScrollableHorizontalGallery so we will approximate the first 3 remote\n    // participant tiles are visible\n    onChildrenPerPageChange?.(3);\n    return <ScrollableHorizontalGallery horizontalGalleryElements={overflowGalleryElements ? overflowGalleryElements : [<></>]} onFetchTilesToRender={onFetchTilesToRender} key=\"scrollable-horizontal-gallery\" containerStyles={scrollableHorizontalGalleryContainerStyles} />;\n  }\n  return <ResponsiveHorizontalGallery key=\"responsive-horizontal-gallery\" containerStyles={containerStyles} onFetchTilesToRender={onFetchTilesToRender} horizontalGalleryStyles={galleryStyles} buttonWidthRem={HORIZONTAL_GALLERY_BUTTON_WIDTH} gapWidthRem={HORIZONTAL_GALLERY_GAP} onChildrenPerPageChange={onChildrenPerPageChange}>\n      {overflowGalleryElements ? overflowGalleryElements : [<></>]}\n    </ResponsiveHorizontalGallery>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Stack } from '@fluentui/react';\nimport React, { useMemo, useState, useRef } from 'react';\nimport { GridLayout } from '../GridLayout';\nimport { isNarrowWidth } from '../utils/responsive';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { isShortHeight } from '../utils/responsive';\nimport { LayoutProps } from './Layout';\nimport { rootLayoutStyle } from './styles/DefaultLayout.styles';\nimport { videoGalleryLayoutGap } from './styles/Layout.styles';\nimport { useOrganizedParticipants } from './utils/videoGalleryLayoutUtils';\nimport { OverflowGallery } from './OverflowGallery';\n\n/**\n * Props for {@link DefaultLayout}.\n *\n * @private\n */\nexport type DefaultLayoutProps = LayoutProps;\n\n/**\n * DefaultLayout displays remote participants, local video component, and screen sharing component in\n * a grid an overflow gallery.\n *\n * @private\n */\nexport const DefaultLayout = (props: DefaultLayoutProps): JSX.Element => {\n  const {\n    remoteParticipants = [],\n    localParticipant,\n    dominantSpeakers,\n    localVideoComponent,\n    screenShareComponent,\n    onRenderRemoteParticipant,\n    styles,\n    maxRemoteVideoStreams,\n    parentWidth,\n    /* @conditional-compile-remove(vertical-gallery) */\n    parentHeight,\n    pinnedParticipantUserIds = [],\n    /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition = 'horizontalBottom'\n  } = props;\n  const isNarrow = parentWidth ? isNarrowWidth(parentWidth) : false;\n\n  /* @conditional-compile-remove(vertical-gallery) */\n  const isShort = parentHeight ? isShortHeight(parentHeight) : false;\n\n  // This is for tracking the number of children in the first page of overflow gallery.\n  // This number will be used for the maxOverflowGalleryDominantSpeakers when organizing the remote participants.\n  // We need to add the local participant to the pinned participant count so we are placing the speakers correctly.\n  const childrenPerPage = useRef(4);\n  const {\n    gridParticipants,\n    overflowGalleryParticipants\n  } = useOrganizedParticipants({\n    remoteParticipants,\n    localParticipant,\n    dominantSpeakers,\n    maxRemoteVideoStreams,\n    isScreenShareActive: !!screenShareComponent,\n    maxOverflowGalleryDominantSpeakers: screenShareComponent ? childrenPerPage.current - (pinnedParticipantUserIds.length + 1) % childrenPerPage.current : childrenPerPage.current,\n    pinnedParticipantUserIds,\n    layout: 'default'\n  });\n  let activeVideoStreams = 0;\n  let gridTiles = gridParticipants.map(p => {\n    return onRenderRemoteParticipant(p, maxRemoteVideoStreams && maxRemoteVideoStreams >= 0 ? p.videoStream?.isAvailable && activeVideoStreams++ < maxRemoteVideoStreams : p.videoStream?.isAvailable);\n  });\n\n  /**\n   * instantiate indexes available to render with indexes available that would be on first page\n   *\n   * For some components which do not strictly follow the order of the array, we might\n   * re-render the initial tiles -> dispose them -> create new tiles, we need to take care of\n   * this case when those components are here\n   */\n  const [indexesToRender, setIndexesToRender] = useState<number[]>([]);\n  let overflowGalleryTiles = overflowGalleryParticipants.map((p, i) => {\n    return onRenderRemoteParticipant(p, maxRemoteVideoStreams && maxRemoteVideoStreams >= 0 ? p.videoStream?.isAvailable && indexesToRender.includes(i) && activeVideoStreams++ < maxRemoteVideoStreams : p.videoStream?.isAvailable);\n  });\n  if (localVideoComponent) {\n    if (screenShareComponent) {\n      overflowGalleryTiles = [localVideoComponent].concat(overflowGalleryTiles);\n    } else {\n      gridTiles = [localVideoComponent].concat(gridTiles);\n    }\n  }\n  const overflowGallery = useMemo(() => {\n    if (overflowGalleryTiles.length === 0) {\n      return null;\n    }\n    return <OverflowGallery isNarrow={isNarrow}\n    /* @conditional-compile-remove(vertical-gallery) */ isShort={isShort} shouldFloatLocalVideo={false} overflowGalleryElements={overflowGalleryTiles} horizontalGalleryStyles={styles?.horizontalGallery}\n    /* @conditional-compile-remove(vertical-gallery) */ verticalGalleryStyles={styles?.verticalGallery}\n    /* @conditional-compile-remove(vertical-gallery) */ overflowGalleryPosition={overflowGalleryPosition} onFetchTilesToRender={setIndexesToRender} onChildrenPerPageChange={(n: number) => {\n      childrenPerPage.current = n;\n    }} parentWidth={parentWidth} />;\n  }, [isNarrow, /* @conditional-compile-remove(vertical-gallery) */isShort, overflowGalleryTiles, styles?.horizontalGallery, /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition, setIndexesToRender, /* @conditional-compile-remove(vertical-gallery) */styles?.verticalGallery, parentWidth]);\n  return <Stack\n  /* @conditional-compile-remove(vertical-gallery) */ horizontal={overflowGalleryPosition === 'verticalRight'} styles={rootLayoutStyle} tokens={videoGalleryLayoutGap}>\n      {props.overflowGalleryPosition === 'horizontalTop' ? overflowGallery : <></>}\n      {screenShareComponent ? screenShareComponent : <GridLayout key=\"grid-layout\" styles={styles?.gridLayout}>\n          {gridTiles}\n        </GridLayout>}\n      {overflowGalleryTrampoline(overflowGallery, props.overflowGalleryPosition)}\n    </Stack>;\n};\nconst overflowGalleryTrampoline = (gallery: JSX.Element | null, galleryPosition?: 'horizontalBottom' | 'verticalRight' | 'horizontalTop'): JSX.Element | null => {\n  return galleryPosition !== 'horizontalTop' ? gallery : <></>;\n  return gallery;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* eslint-disable react/prop-types */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as React from 'react';\nimport { useBoolean, useMergedRefs, useConst, useSetTimeout, useId, useUnmount } from '@fluentui/react-hooks';\nimport { allowOverscrollOnElement, allowScrollOnElement, AnimationVariables, classNamesFunction, DirectionalHint, elementContains, EventGroup, FocusTrapZone, getGlobalClassNames, getPropsWithDefaults, Icon, IDragOptions, IFocusTrapZone, ILayerProps, IModalProps, IModalStyleProps, IModalStyles, KeyCodes, Layer, memoizeFunction, mergeStyles, on, Overlay, Popup, ResponsiveMode, styled, useResponsiveMode, ZIndexes } from '@fluentui/react';\nimport { useWindow } from '@fluentui/react-window-provider';\n\n// @TODO - need to change this to a panel whenever the breakpoint is under medium (verify the spec)\n\n/** @internal */\nexport interface _ExtendedIModalProps extends IModalProps {\n  minDragPosition?: _ICoordinates;\n  maxDragPosition?: _ICoordinates;\n}\nconst animationDuration = AnimationVariables.durationValue2;\n/** @internal */\nexport type _ICoordinates = {\n  x: number;\n  y: number;\n};\ninterface IModalInternalState {\n  onModalCloseTimer: number;\n  allowTouchBodyScroll?: boolean;\n  scrollableContent: HTMLDivElement | null;\n  lastSetCoordinates: _ICoordinates;\n  /** Minimum clamped position, if dragging and clamping (`dragOptions.keepInBounds`) are enabled */\n  minPosition?: _ICoordinates;\n  /** Maximum clamped position, if dragging and clamping (`dragOptions.keepInBounds`) are enabled */\n  maxPosition?: _ICoordinates;\n  events: EventGroup;\n  /** Ensures we dispose the same keydown callback as was registered */\n  disposeOnKeyDown?: () => void;\n  /** Ensures we dispose the same keyup callback as was registered (also tracks whether keyup has been registered) */\n  disposeOnKeyUp?: () => void;\n  isInKeyboardMoveMode?: boolean;\n  hasBeenOpened?: boolean;\n}\nconst ZERO: _ICoordinates = {\n  x: 0,\n  y: 0\n};\nconst DEFAULT_PROPS: Partial<_ExtendedIModalProps> = {\n  isOpen: false,\n  isDarkOverlay: true,\n  className: '',\n  containerClassName: '',\n  enableAriaHiddenSiblings: true\n};\nconst getModalClassNames = classNamesFunction<IModalStyleProps, IModalStyles>();\nconst getMoveDelta = (ev: React.KeyboardEvent<HTMLElement>): number => {\n  let delta = 10;\n  if (ev.shiftKey) {\n    if (!ev.ctrlKey) {\n      delta = 50;\n    }\n  } else if (ev.ctrlKey) {\n    delta = 1;\n  }\n  return delta;\n};\nconst useComponentRef = (props: IModalProps, focusTrapZone: React.RefObject<IFocusTrapZone>) => {\n  React.useImperativeHandle(props.componentRef, () => ({\n    focus() {\n      if (focusTrapZone.current) {\n        focusTrapZone.current.focus();\n      }\n    }\n  }), [focusTrapZone]);\n};\nconst ModalBase: React.FunctionComponent<_ExtendedIModalProps> = React.forwardRef<HTMLDivElement, _ExtendedIModalProps>((propsWithoutDefaults, ref) => {\n  const props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n  const {\n    allowTouchBodyScroll,\n    className,\n    children,\n    containerClassName,\n    scrollableContentClassName,\n    elementToFocusOnDismiss,\n    firstFocusableSelector,\n    forceFocusInsideTrap,\n    ignoreExternalFocusing,\n    isBlocking,\n    isAlert,\n    isClickableOutsideFocusTrap,\n    isDarkOverlay,\n    onDismiss,\n    layerProps,\n    overlay,\n    isOpen,\n    titleAriaId,\n    styles,\n    subtitleAriaId,\n    theme,\n    topOffsetFixed,\n    responsiveMode,\n    onLayerDidMount,\n    isModeless,\n    dragOptions,\n    onDismissed,\n    minDragPosition,\n    maxDragPosition\n  } = props;\n  const rootRef = React.useRef<HTMLDivElement>(null);\n  const focusTrapZone = React.useRef<IFocusTrapZone>(null);\n  const focusTrapZoneElm = React.useRef<HTMLDivElement>(null);\n  const mergedRef = useMergedRefs(rootRef, ref);\n  const modalResponsiveMode = useResponsiveMode(mergedRef);\n  const focusTrapZoneId = useId('ModalFocusTrapZone');\n  const win = useWindow();\n  const {\n    setTimeout,\n    clearTimeout\n  } = useSetTimeout();\n  const [isModalOpen, setIsModalOpen] = React.useState(isOpen);\n  const [isVisible, setIsVisible] = React.useState(isOpen);\n  const [coordinates, setCoordinates] = React.useState<_ICoordinates>(ZERO);\n  const [modalRectangleTop, setModalRectangleTop] = React.useState<number | undefined>();\n  const [isModalMenuOpen, {\n    toggle: toggleModalMenuOpen,\n    setFalse: setModalMenuClose\n  }] = useBoolean(false);\n  const internalState = useConst<IModalInternalState>(() => ({\n    onModalCloseTimer: 0,\n    allowTouchBodyScroll,\n    scrollableContent: null,\n    lastSetCoordinates: ZERO,\n    events: new EventGroup({})\n  }));\n  const {\n    keepInBounds\n  } = dragOptions || ({} as IDragOptions);\n  const isAlertRole = isAlert ?? (isBlocking && !isModeless);\n  const layerClassName = layerProps === undefined ? '' : layerProps.className;\n  const classNames = getModalClassNames(styles, {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    theme: theme!,\n    className,\n    containerClassName,\n    scrollableContentClassName,\n    isOpen,\n    isVisible,\n    hasBeenOpened: internalState.hasBeenOpened,\n    modalRectangleTop,\n    topOffsetFixed,\n    isModeless,\n    layerClassName,\n    windowInnerHeight: win?.innerHeight,\n    isDefaultDragHandle: dragOptions && !dragOptions.dragHandleSelector\n  });\n  const mergedLayerProps: ILayerProps = {\n    eventBubblingEnabled: false,\n    ...layerProps,\n    onLayerDidMount: layerProps && layerProps.onLayerDidMount ? layerProps.onLayerDidMount : onLayerDidMount,\n    insertFirst: isModeless,\n    className: classNames.layer\n  };\n\n  // Allow the user to scroll within the modal but not on the body\n  const allowScrollOnModal = React.useCallback((elt: HTMLDivElement | null): void => {\n    if (elt) {\n      if (internalState.allowTouchBodyScroll) {\n        allowOverscrollOnElement(elt, internalState.events);\n      } else {\n        allowScrollOnElement(elt, internalState.events);\n      }\n    } else {\n      internalState.events.off(internalState.scrollableContent);\n    }\n    internalState.scrollableContent = elt;\n  }, [internalState]);\n  const registerInitialModalPosition = (): void => {\n    const dialogMain = focusTrapZoneElm.current;\n    const modalRectangle = dialogMain?.getBoundingClientRect();\n    if (modalRectangle) {\n      if (topOffsetFixed) {\n        setModalRectangleTop(modalRectangle.top);\n      }\n      if (keepInBounds) {\n        // x/y are unavailable in IE, so use the equivalent left/top\n        internalState.minPosition = minDragPosition ?? {\n          x: -modalRectangle.left,\n          y: -modalRectangle.top\n        };\n        internalState.maxPosition = maxDragPosition ?? {\n          x: modalRectangle.left,\n          y: modalRectangle.top\n        };\n\n        // Make sure the initial co-ordinates are within clamp bounds.\n        setCoordinates({\n          x: getClampedAxis('x', coordinates.x),\n          y: getClampedAxis('y', coordinates.y)\n        });\n      }\n    }\n  };\n\n  /**\n   * Clamps an axis to a specified min and max position.\n   *\n   * @param axis A string that represents the axis (x/y).\n   * @param position The position on the axis.\n   */\n  const getClampedAxis = React.useCallback((axis: keyof _ICoordinates, position: number) => {\n    const {\n      minPosition,\n      maxPosition\n    } = internalState;\n    if (keepInBounds && minPosition && maxPosition) {\n      position = Math.max(minPosition[axis], position);\n      position = Math.min(maxPosition[axis], position);\n    }\n    return position;\n  }, [keepInBounds, internalState]);\n  const handleModalClose = (): void => {\n    internalState.lastSetCoordinates = ZERO;\n    setModalMenuClose();\n    internalState.isInKeyboardMoveMode = false;\n    setIsModalOpen(false);\n    setCoordinates(ZERO);\n    internalState.disposeOnKeyUp?.();\n    onDismissed?.();\n  };\n  const handleDragStart = React.useCallback((): void => {\n    setModalMenuClose();\n    internalState.isInKeyboardMoveMode = false;\n  }, [internalState, setModalMenuClose]);\n  const handleDrag = React.useCallback(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (ev: React.MouseEvent<HTMLElement> & React.TouchEvent<HTMLElement>, dragData: any): void => {\n    setCoordinates(prevValue => ({\n      x: getClampedAxis('x', prevValue.x + dragData.delta.x),\n      y: getClampedAxis('y', prevValue.y + dragData.delta.y)\n    }));\n  }, [getClampedAxis]);\n  const handleDragStop = React.useCallback((): void => {\n    if (focusTrapZone.current) {\n      focusTrapZone.current.focus();\n    }\n  }, []);\n  const handleEnterKeyboardMoveMode = () => {\n    // We need a global handleKeyDown event when we are in the move mode so that we can\n    // handle the key presses and the components inside the modal do not get the events\n    const handleKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\n      if (ev.altKey && ev.ctrlKey && ev.keyCode === KeyCodes.space) {\n        // CTRL + ALT + SPACE is handled during keyUp\n        ev.preventDefault();\n        ev.stopPropagation();\n        return;\n      }\n      const newLocal = ev.altKey || ev.keyCode === KeyCodes.escape;\n      if (isModalMenuOpen && newLocal) {\n        setModalMenuClose();\n      }\n      if (internalState.isInKeyboardMoveMode && (ev.keyCode === KeyCodes.escape || ev.keyCode === KeyCodes.enter)) {\n        internalState.isInKeyboardMoveMode = false;\n        ev.preventDefault();\n        ev.stopPropagation();\n      }\n      if (internalState.isInKeyboardMoveMode) {\n        let handledEvent = true;\n        const delta = getMoveDelta(ev);\n        switch (ev.keyCode) {\n          /* eslint-disable no-fallthrough */\n          case KeyCodes.escape:\n            setCoordinates(internalState.lastSetCoordinates);\n          case KeyCodes.enter:\n            {\n              // TODO: determine if fallthrough was intentional\n              /* eslint-enable no-fallthrough */\n              internalState.lastSetCoordinates = ZERO;\n              // setIsInKeyboardMoveMode(false);\n              break;\n            }\n          case KeyCodes.up:\n            {\n              setCoordinates(prevValue => ({\n                x: prevValue.x,\n                y: getClampedAxis('y', prevValue.y - delta)\n              }));\n              break;\n            }\n          case KeyCodes.down:\n            {\n              setCoordinates(prevValue => ({\n                x: prevValue.x,\n                y: getClampedAxis('y', prevValue.y + delta)\n              }));\n              break;\n            }\n          case KeyCodes.left:\n            {\n              setCoordinates(prevValue => ({\n                x: getClampedAxis('x', prevValue.x - delta),\n                y: prevValue.y\n              }));\n              break;\n            }\n          case KeyCodes.right:\n            {\n              setCoordinates(prevValue => ({\n                x: getClampedAxis('x', prevValue.x + delta),\n                y: prevValue.y\n              }));\n              break;\n            }\n          default:\n            {\n              handledEvent = false;\n            }\n        }\n        if (handledEvent) {\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      }\n    };\n    internalState.lastSetCoordinates = coordinates;\n    setModalMenuClose();\n    internalState.isInKeyboardMoveMode = true;\n    internalState.events.on(win, 'keydown', handleKeyDown, true /* useCapture */);\n    internalState.disposeOnKeyDown = () => {\n      internalState.events.off(win, 'keydown', handleKeyDown, true /* useCapture */);\n      internalState.disposeOnKeyDown = undefined;\n    };\n  };\n  const handleExitKeyboardMoveMode = () => {\n    internalState.lastSetCoordinates = ZERO;\n    internalState.isInKeyboardMoveMode = false;\n    internalState.disposeOnKeyDown?.();\n  };\n  const registerForKeyUp = (): void => {\n    const handleKeyUp = (ev: React.KeyboardEvent<HTMLElement>): void => {\n      // Needs to handle the CTRL + ALT + SPACE key during keyup due to FireFox bug:\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=1220143\n      if (ev.altKey && ev.ctrlKey && ev.keyCode === KeyCodes.space) {\n        if (elementContains(internalState.scrollableContent, (ev.target as HTMLElement))) {\n          toggleModalMenuOpen();\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n      }\n    };\n    if (!internalState.disposeOnKeyUp) {\n      internalState.events.on(win, 'keyup', handleKeyUp, true /* useCapture */);\n      internalState.disposeOnKeyUp = () => {\n        internalState.events.off(win, 'keyup', handleKeyUp, true /* useCapture */);\n        internalState.disposeOnKeyUp = undefined;\n      };\n    }\n  };\n  React.useEffect(() => {\n    clearTimeout(internalState.onModalCloseTimer);\n    // Opening the dialog\n    if (isOpen) {\n      // This must be done after the modal content has rendered\n      requestAnimationFrame(() => setTimeout(registerInitialModalPosition, 0));\n      setIsModalOpen(true);\n\n      // Add a keyUp handler for all key up events once the dialog is open.\n      if (dragOptions) {\n        registerForKeyUp();\n      }\n      internalState.hasBeenOpened = true;\n      setIsVisible(true);\n    }\n\n    // Closing the dialog\n    if (!isOpen && isModalOpen) {\n      internalState.onModalCloseTimer = setTimeout(handleModalClose, parseFloat(animationDuration) * 1000);\n      setIsVisible(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- should only run if isModalOpen or isOpen mutates or if min/max drag bounds are updated.\n  }, [isModalOpen, isOpen, minDragPosition, maxDragPosition]);\n  useUnmount(() => {\n    internalState.events.dispose();\n  });\n  useComponentRef(props, focusTrapZone);\n  const modalContent = <FocusTrapZone disabled={true} id={focusTrapZoneId} ref={focusTrapZoneElm} componentRef={focusTrapZone} className={classNames.main} elementToFocusOnDismiss={elementToFocusOnDismiss} isClickableOutsideFocusTrap={isModeless || isClickableOutsideFocusTrap || !isBlocking} ignoreExternalFocusing={ignoreExternalFocusing} forceFocusInsideTrap={forceFocusInsideTrap && !isModeless} firstFocusableSelector={firstFocusableSelector} focusPreviouslyFocusedInnerElement onBlur={internalState.isInKeyboardMoveMode ? handleExitKeyboardMoveMode : undefined} data-ui-id={props[('data-ui-id' as keyof _ExtendedIModalProps)]}\n  // enableAriaHiddenSiblings is handled by the Popup\n  >\n        {dragOptions && internalState.isInKeyboardMoveMode && <div className={classNames.keyboardMoveIconContainer}>\n            {dragOptions.keyboardMoveIconProps ? <Icon {...dragOptions.keyboardMoveIconProps} /> : <Icon iconName=\"move\" className={classNames.keyboardMoveIcon} />}\n          </div>}\n        <div ref={allowScrollOnModal} className={classNames.scrollableContent} data-is-scrollable>\n          {dragOptions && isModalMenuOpen && <dragOptions.menu items={[{\n        key: 'move',\n        text: dragOptions.moveMenuItemText,\n        onClick: handleEnterKeyboardMoveMode\n      }, {\n        key: 'close',\n        text: dragOptions.closeMenuItemText,\n        onClick: handleModalClose\n      }]} onDismiss={setModalMenuClose} alignTargetEdge coverTarget directionalHint={DirectionalHint.topLeftEdge} directionalHintFixed shouldFocusOnMount target={internalState.scrollableContent} />}\n          {children}\n        </div>\n      </FocusTrapZone>;\n  return (\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    isModalOpen && modalResponsiveMode! >= (responsiveMode || ResponsiveMode.small) && <Layer ref={mergedRef} {...mergedLayerProps}>\n          <Popup role={isAlertRole ? 'alertdialog' : 'dialog'} ariaLabelledBy={titleAriaId} ariaDescribedBy={subtitleAriaId}\n      // onDismiss={onDismiss}\n      shouldRestoreFocus={!ignoreExternalFocusing}\n      // Modeless modals shouldn't hide siblings.\n      // Popup will automatically handle this based on the aria-modal setting.\n      // enableAriaHiddenSiblings={enableAriaHiddenSiblings}\n      aria-modal={!isModeless}>\n            <div className={classNames.root} role={!isModeless ? 'document' : undefined}>\n              {!isModeless && <Overlay aria-hidden={true} isDarkThemed={isDarkOverlay} onClick={isBlocking ? undefined : onDismiss} allowTouchBodyScroll={allowTouchBodyScroll} {...overlay} />}\n              {dragOptions ? <DraggableZone handleSelector={dragOptions.dragHandleSelector || `#${focusTrapZoneId}`} preventDragSelector=\"button\" onStart={handleDragStart} onDragChange={handleDrag} onStop={handleDragStop} position={coordinates}>\n                  {modalContent}\n                </DraggableZone> : modalContent}\n            </div>\n          </Popup>\n        </Layer> || null\n  );\n});\nModalBase.displayName = 'ModalBase';\ninterface IDraggableZoneStyles {\n  root: string;\n}\nconst getDraggableZoneClassNames = memoizeFunction((className: string, isDragging: boolean): IDraggableZoneStyles => {\n  return {\n    root: mergeStyles(className, isDragging && {\n      touchAction: 'none',\n      selectors: {\n        '& *': {\n          userSelect: 'none'\n        }\n      }\n    })\n  };\n});\ninterface IDragData {\n  position: _ICoordinates;\n  lastPosition?: _ICoordinates;\n  delta: _ICoordinates;\n}\ninterface IDraggableZoneProps extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * Specifies a selector to be used as the handle that initiates drag\n   */\n  handleSelector?: string;\n\n  /**\n   * Specifies a selector to be used to prevent drag initialization.\n   * For example, if you do not want buttons inside of your handleSelector\n   * to have the cursor change to move or to allow users to select from buttons,\n   * you could pass button here (the close button in the header of a dialog is a concrete example)\n   */\n  preventDragSelector?: string;\n\n  /**\n   * the X and Y coordinates to use as an offest to position the draggable content\n   */\n  position?: _ICoordinates;\n\n  /**\n   * Callback for when dragging starts\n   */\n  onStart?: (event: React.MouseEvent<HTMLElement> & React.TouchEvent<HTMLElement>, dragData: IDragData) => void;\n\n  /**\n   * Callback for when the drag changes, while dragging\n   */\n  onDragChange?: (event: React.MouseEvent<HTMLElement> & React.TouchEvent<HTMLElement>, dragData: IDragData) => void;\n\n  /**\n   * Callback for when dragging stops\n   */\n  onStop?: (event: React.MouseEvent<HTMLElement> & React.TouchEvent<HTMLElement>, dragData: IDragData) => void;\n}\ninterface IDraggableZoneState {\n  isDragging: boolean;\n  position: _ICoordinates;\n  lastPosition?: _ICoordinates;\n}\nconst eventMapping = {\n  touch: {\n    start: 'touchstart',\n    move: 'touchmove',\n    stop: 'touchend'\n  },\n  mouse: {\n    start: 'mousedown',\n    move: 'mousemove',\n    stop: 'mouseup'\n  }\n};\n\n// These are needed so that we can generalize the events\n// and so we have access to clientX and clientY in the touch events\ntype MouseTouchEvent<T> = React.MouseEvent<T> & React.TouchEvent<T> & Event;\nclass DraggableZone extends React.Component<IDraggableZoneProps, IDraggableZoneState> {\n  private _touchId?: number;\n  private _currentEventType = eventMapping.mouse;\n  private _events: (() => void)[] = [];\n  constructor(props: IDraggableZoneProps) {\n    super(props);\n    this.state = {\n      isDragging: false,\n      position: this.props.position || {\n        x: 0,\n        y: 0\n      },\n      lastPosition: undefined\n    };\n  }\n  public componentDidUpdate(prevProps: IDraggableZoneProps) {\n    if (this.props.position && (!prevProps.position || this.props.position !== prevProps.position)) {\n      this.setState({\n        position: this.props.position\n      });\n    }\n  }\n  public componentWillUnmount() {\n    this._events.forEach(dispose => dispose());\n  }\n  public render() {\n    const child: any = React.Children.only(this.props.children);\n    const {\n      props\n    } = child;\n    const {\n      position\n    } = this.props;\n    const {\n      position: statePosition,\n      isDragging\n    } = this.state;\n    let x = statePosition.x;\n    let y = statePosition.y;\n    if (position && !isDragging) {\n      x = position.x;\n      y = position.y;\n    }\n    return React.cloneElement(child, {\n      style: {\n        ...props.style,\n        transform: `translate(${x}px, ${y}px)`\n      },\n      className: getDraggableZoneClassNames(props.className, this.state.isDragging).root,\n      onMouseDown: this._onMouseDown,\n      onMouseUp: this._onMouseUp,\n      onTouchStart: this._onTouchStart,\n      onTouchEnd: this._onTouchEnd\n    });\n  }\n  private _onMouseDown = (event: MouseTouchEvent<HTMLElement>) => {\n    const onMouseDown = (React.Children.only(this.props.children) as any).props.onMouseDown;\n    if (onMouseDown) {\n      onMouseDown(event);\n    }\n    this._currentEventType = eventMapping.mouse;\n    return this._onDragStart(event);\n  };\n  private _onMouseUp = (event: MouseTouchEvent<HTMLElement>) => {\n    const onMouseUp = (React.Children.only(this.props.children) as any).props.onMouseUp;\n    if (onMouseUp) {\n      onMouseUp(event);\n    }\n    this._currentEventType = eventMapping.mouse;\n    return this._onDragStop(event);\n  };\n  private _onTouchStart = (event: MouseTouchEvent<HTMLElement>) => {\n    const onTouchStart = (React.Children.only(this.props.children) as any).props.onTouchStart;\n    if (onTouchStart) {\n      onTouchStart(event);\n    }\n    this._currentEventType = eventMapping.touch;\n    return this._onDragStart(event);\n  };\n  private _onTouchEnd = (event: MouseTouchEvent<HTMLElement>) => {\n    const onTouchEnd = (React.Children.only(this.props.children) as any).props.onTouchEnd;\n    if (onTouchEnd) {\n      onTouchEnd(event);\n    }\n    this._currentEventType = eventMapping.touch;\n    this._onDragStop(event);\n  };\n  private _onDragStart = (event: MouseTouchEvent<HTMLElement>) => {\n    // Only handle left click for dragging\n    if (typeof event.button === 'number' && event.button !== 0) {\n      return false;\n    }\n\n    // If the target doesn't match the handleSelector OR\n    // if the target does match the preventDragSelector, bail out\n    if (this.props.handleSelector && !this._matchesSelector((event.target as HTMLElement), this.props.handleSelector) || this.props.preventDragSelector && this._matchesSelector((event.target as HTMLElement), this.props.preventDragSelector)) {\n      return;\n    }\n\n    // Remember the touch identifier if this is a touch event so we can\n    // distinguish between individual touches in multitouch scenarios\n    // by remembering which touch point we were given\n    this._touchId = this._getTouchId(event);\n    const position = this._getControlPosition(event);\n    if (position === undefined) {\n      return;\n    }\n    const dragData = this._createDragDataFromPosition(position);\n    this.props.onStart && this.props.onStart(event, dragData);\n    this.setState({\n      isDragging: true,\n      lastPosition: position\n    });\n\n    // hook up the appropriate mouse/touch events to the body to ensure\n    // smooth dragging\n    this._events = [on(document.body, this._currentEventType.move, this._onDrag, true /* use capture phase */), on(document.body, this._currentEventType.stop, this._onDragStop, true /* use capture phase */)];\n    return;\n  };\n  private _onDrag = (event: any) => {\n    // Prevent scrolling on mobile devices\n    if (event.type === 'touchmove') {\n      event.preventDefault();\n    }\n    const position = this._getControlPosition(event);\n    if (!position) {\n      return;\n    }\n\n    // create the updated drag data from the position data\n    const updatedData = this._createUpdatedDragData(this._createDragDataFromPosition(position));\n    const updatedPosition = updatedData.position;\n    this.props.onDragChange && this.props.onDragChange(event, updatedData);\n    this.setState({\n      position: updatedPosition,\n      lastPosition: position\n    });\n  };\n  private _onDragStop = (event: any) => {\n    if (!this.state.isDragging) {\n      return;\n    }\n    const position = this._getControlPosition(event);\n    if (!position) {\n      return;\n    }\n    const baseDragData = this._createDragDataFromPosition(position);\n\n    // Set dragging to false and reset the lastPosition\n    this.setState({\n      isDragging: false,\n      lastPosition: undefined\n    });\n    this.props.onStop && this.props.onStop(event, baseDragData);\n    if (this.props.position) {\n      this.setState({\n        position: this.props.position\n      });\n    }\n\n    // Remove event handlers\n    this._events.forEach(dispose => dispose());\n  };\n\n  /**\n   * Get the control position based off the event that fired\n   * @param event - The event to get offsets from\n   */\n  private _getControlPosition(event: MouseTouchEvent<HTMLElement>): _ICoordinates | undefined {\n    const touchObj = this._getActiveTouch(event);\n\n    // did we get the right touch?\n    if (this._touchId !== undefined && !touchObj) {\n      return undefined;\n    }\n    const eventToGetOffset = touchObj || event;\n    return {\n      x: eventToGetOffset.clientX,\n      y: eventToGetOffset.clientY\n    };\n  }\n\n  /**\n   * Get the active touch point that we have saved from the event's TouchList\n   * @param event - The event used to get the TouchList for the active touch point\n   */\n  private _getActiveTouch(event: MouseTouchEvent<HTMLElement>): React.Touch | undefined {\n    return event.targetTouches && this._findTouchInTouchList(event.targetTouches) || event.changedTouches && this._findTouchInTouchList(event.changedTouches);\n  }\n\n  /**\n   * Get the initial touch identifier associated with the given event\n   * @param event - The event that contains the TouchList\n   */\n  private _getTouchId(event: MouseTouchEvent<HTMLElement>): number | undefined {\n    const touch: React.Touch | undefined = event.targetTouches && event.targetTouches[0] || event.changedTouches && event.changedTouches[0];\n    if (touch) {\n      return touch.identifier;\n    }\n    return;\n  }\n\n  /**\n   * Returns if an element (or any of the element's parents) match the given selector\n   */\n  private _matchesSelector(element: HTMLElement | null, selector: string): boolean {\n    if (!element || element === document.body) {\n      return false;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    const matchesSelectorFn: Function = element.matches || element.webkitMatchesSelector || (element as any).msMatchesSelector; /* for IE */\n\n    if (!matchesSelectorFn) {\n      return false;\n    }\n    return matchesSelectorFn.call(element, selector) || this._matchesSelector(element.parentElement, selector);\n  }\n\n  /**\n   * Attempts to find the Touch that matches the identifier  we stored in dragStart\n   * @param touchList The TouchList to look for the stored identifier from dragStart\n   */\n  private _findTouchInTouchList(touchList: React.TouchList): React.Touch | undefined {\n    if (this._touchId === undefined) {\n      return;\n    }\n    for (let i = 0; i < touchList.length; i++) {\n      if (touchList[i].identifier === this._touchId) {\n        return touchList[i];\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Create DragData based off of the last known position and the new position passed in\n   * @param position The new position as part of the drag\n   */\n  private _createDragDataFromPosition(position: _ICoordinates): IDragData {\n    const {\n      lastPosition\n    } = this.state;\n\n    // If we have no lastPosition, use the given position\n    // for last position\n    if (lastPosition === undefined) {\n      return {\n        delta: {\n          x: 0,\n          y: 0\n        },\n        lastPosition: position,\n        position\n      };\n    }\n    return {\n      delta: {\n        x: position.x - lastPosition.x,\n        y: position.y - lastPosition.y\n      },\n      lastPosition,\n      position\n    };\n  }\n\n  /**\n   * Creates an updated DragData based off the current position and given baseDragData\n   * @param baseDragData The base DragData (from _createDragDataFromPosition) used to calculate the updated positions\n   */\n  private _createUpdatedDragData(baseDragData: IDragData): IDragData {\n    const {\n      position\n    } = this.state;\n    return {\n      position: {\n        x: position.x + baseDragData.delta.x,\n        y: position.y + baseDragData.delta.y\n      },\n      delta: baseDragData.delta,\n      lastPosition: position\n    };\n  }\n}\nconst globalClassNames = {\n  root: 'ms-Modal',\n  main: 'ms-Dialog-main',\n  scrollableContent: 'ms-Modal-scrollableContent',\n  isOpen: 'is-open',\n  layer: 'ms-Modal-Layer'\n};\nconst getStyles = (props: IModalStyleProps): IModalStyles => {\n  const {\n    className,\n    containerClassName,\n    scrollableContentClassName,\n    isOpen,\n    isVisible,\n    hasBeenOpened,\n    modalRectangleTop,\n    theme,\n    topOffsetFixed,\n    isModeless,\n    layerClassName,\n    isDefaultDragHandle,\n    windowInnerHeight\n  } = props;\n  const {\n    palette,\n    effects,\n    fonts\n  } = theme;\n  const classNames = getGlobalClassNames(globalClassNames, theme);\n  return {\n    root: [classNames.root, fonts.medium, {\n      backgroundColor: 'transparent',\n      position: isModeless ? 'absolute' : 'fixed',\n      height: '100%',\n      width: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      opacity: 0,\n      pointerEvents: 'none',\n      transition: `opacity ${animationDuration}`\n    }, topOffsetFixed && typeof modalRectangleTop === 'number' && hasBeenOpened && {\n      alignItems: 'flex-start'\n    }, isOpen && classNames.isOpen, isVisible && {\n      opacity: 1,\n      pointerEvents: 'auto'\n    }, className],\n    main: [classNames.main, {\n      boxShadow: effects.elevation64,\n      borderRadius: effects.roundedCorner2,\n      backgroundColor: palette.white,\n      boxSizing: 'border-box',\n      position: 'relative',\n      textAlign: 'left',\n      outline: '3px solid transparent',\n      maxHeight: 'calc(100% - 32px)',\n      maxWidth: 'calc(100% - 32px)',\n      minHeight: '176px',\n      minWidth: '288px',\n      overflowY: 'auto',\n      zIndex: isModeless ? ZIndexes.Layer : undefined\n    }, topOffsetFixed && typeof modalRectangleTop === 'number' && hasBeenOpened && {\n      top: modalRectangleTop\n    }, isDefaultDragHandle && {\n      cursor: 'move'\n    }, containerClassName],\n    scrollableContent: [classNames.scrollableContent, {\n      overflowY: 'auto',\n      flexGrow: 1,\n      maxHeight: '100vh',\n      selectors: {\n        ['@supports (-webkit-overflow-scrolling: touch)']: {\n          maxHeight: windowInnerHeight\n        }\n      }\n    }, scrollableContentClassName],\n    layer: isModeless && [layerClassName, classNames.layer, {\n      position: 'static',\n      width: 'unset',\n      height: 'unset'\n    }],\n    keyboardMoveIconContainer: {\n      position: 'absolute',\n      display: 'flex',\n      justifyContent: 'center',\n      width: '100%',\n      padding: '3px 0px'\n    },\n    keyboardMoveIcon: {\n      fontSize: fonts.xLargePlus.fontSize,\n      width: '24px'\n    }\n  };\n};\n\n/** @internal */\nexport const _ModalClone: React.FunctionComponent<_ExtendedIModalProps> = styled<_ExtendedIModalProps, IModalStyleProps, IModalStyles>(ModalBase, getStyles, undefined, {\n  scope: 'Modal',\n  fields: ['theme', 'styles', 'enableAriaHiddenSiblings']\n});\n_ModalClone.displayName = 'Modal';","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ContextualMenu, IDragOptions } from '@fluentui/react';\nimport { _convertRemToPx } from '@internal/acs-ui-common';\nimport React, { useMemo } from 'react';\nimport { useTheme } from '../../theming';\nimport { _ICoordinates, _ModalClone } from '../ModalClone/ModalClone';\nimport { floatingLocalVideoModalStyle, floatinglocalVideoModalInitialPositionGapRem } from './styles/FloatingLocalVideo.styles';\nconst DRAG_OPTIONS: IDragOptions = {\n  moveMenuItemText: 'Move',\n  closeMenuItemText: 'Close',\n  menu: ContextualMenu,\n  keepInBounds: true\n};\n\n// Manually override the max position used to keep the modal in the bounds of its container.\n// This is a workaround for: https://github.com/microsoft/fluentui/issues/20122\n// Because our modal starts in the bottom right corner, we can say that this is the max (i.e. rightmost and bottomost)\n// position the modal can be dragged to.\nconst modalMaxDragPosition = {\n  x: _convertRemToPx(floatinglocalVideoModalInitialPositionGapRem),\n  y: _convertRemToPx(floatinglocalVideoModalInitialPositionGapRem)\n};\n\n/**\n * @private\n */\nexport interface FloatingLocalVideoProps {\n  // Local video component to make draggable\n  localVideoComponent: JSX.Element;\n  // Element id of layer host to constrain the dragging of local video\n  layerHostId: string;\n  // Parent component width in px\n  parentWidth?: number;\n  // Parent component height in px\n  parentHeight?: number;\n  // Local video width and height in rem\n  localVideoSizeRem: {\n    width: number;\n    height: number;\n  };\n}\n\n/**\n * @private\n */\nexport const FloatingLocalVideo = (props: FloatingLocalVideoProps): JSX.Element => {\n  const {\n    localVideoComponent,\n    layerHostId,\n    localVideoSizeRem,\n    parentWidth,\n    parentHeight\n  } = props;\n  const theme = useTheme();\n\n  // The minimum drag position is the top left of the video gallery. i.e. the modal (PiP) should not be able\n  // to be dragged offscreen and these are the top and left bounds of that calculation.\n  const modalMinDragPosition: _ICoordinates | undefined = useMemo(() => parentWidth && parentHeight ? {\n    // We use -parentWidth/Height because our modal is positioned to start in the bottom right,\n    // hence (0,0) is the bottom right of the video gallery.\n    x: -parentWidth + _convertRemToPx(localVideoSizeRem.width) + _convertRemToPx(floatinglocalVideoModalInitialPositionGapRem),\n    y: -parentHeight + _convertRemToPx(localVideoSizeRem.height) + _convertRemToPx(floatinglocalVideoModalInitialPositionGapRem)\n  } : undefined, [parentHeight, parentWidth, localVideoSizeRem.width, localVideoSizeRem.height]);\n  const modalStyles = useMemo(() => floatingLocalVideoModalStyle(theme, localVideoSizeRem), [theme, localVideoSizeRem]);\n  const layerProps = useMemo(() => ({\n    hostId: layerHostId\n  }), [layerHostId]);\n  return <_ModalClone isOpen={true} isModeless={true} dragOptions={DRAG_OPTIONS} styles={modalStyles} layerProps={layerProps} maxDragPosition={modalMaxDragPosition} minDragPosition={modalMinDragPosition} data-ui-id=\"floating-local-video-host\">\n      {localVideoComponent}\n    </_ModalClone>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles, IStyle } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const rootLayoutStyle: IStackStyles = {\n  root: {\n    position: 'relative',\n    height: '100%',\n    width: '100%'\n  }\n};\n\n/**\n * @private\n */\nexport const innerLayoutStyle: IStackStyles = {\n  root: {\n    position: 'relative',\n    height: '100%',\n    width: '100%',\n    padding: '0.5rem'\n  }\n};\n\n/**\n * @private\n */\nexport const layerHostStyle: IStyle = {\n  position: 'absolute',\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden',\n  // pointer events for layerHost set to none to make descendants interactive\n  pointerEvents: 'none'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { LayerHost, mergeStyles, Stack } from '@fluentui/react';\nimport { useId } from '@fluentui/react-hooks';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { useTheme } from '../../theming';\nimport { GridLayout } from '../GridLayout';\nimport { isNarrowWidth } from '../utils/responsive';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { isShortHeight } from '../utils/responsive';\nimport { FloatingLocalVideo } from './FloatingLocalVideo';\nimport { LayoutProps } from './Layout';\nimport { LARGE_FLOATING_MODAL_SIZE_REM, localVideoTileContainerStyle, localVideoTileWithControlsContainerStyle, LOCAL_VIDEO_TILE_ZINDEX, SMALL_FLOATING_MODAL_SIZE_REM } from './styles/FloatingLocalVideo.styles';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { SHORT_VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM, VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM } from './styles/FloatingLocalVideo.styles';\nimport { innerLayoutStyle, layerHostStyle, rootLayoutStyle } from './styles/FloatingLocalVideoLayout.styles';\nimport { videoGalleryLayoutGap } from './styles/Layout.styles';\nimport { useOrganizedParticipants } from './utils/videoGalleryLayoutUtils';\nimport { OverflowGallery } from './OverflowGallery';\n/* @conditional-compile-remove(click-to-call) */\nimport { LocalVideoTileSize } from '../VideoGallery';\n\n/**\n * Props for {@link FloatingLocalVideoLayout}.\n *\n * @private\n */\nexport interface FloatingLocalVideoLayoutProps extends LayoutProps {\n  /**\n   * Whether to display the local video camera switcher button\n   */\n  showCameraSwitcherInLocalPreview?: boolean;\n  /**\n   * Height of parent element\n   */\n  parentHeight?: number;\n  /* @conditional-compile-remove(click-to-call) */\n  /**\n   * Local video tile mode\n   */\n  localVideoTileSize?: LocalVideoTileSize;\n}\n\n/**\n * FloatingLocalVideoLayout displays remote participants and a screen sharing component in\n * a grid and overflow gallery while floating the local video\n *\n * @private\n */\nexport const FloatingLocalVideoLayout = (props: FloatingLocalVideoLayoutProps): JSX.Element => {\n  const {\n    remoteParticipants = [],\n    dominantSpeakers,\n    localVideoComponent,\n    screenShareComponent,\n    onRenderRemoteParticipant,\n    styles,\n    maxRemoteVideoStreams,\n    showCameraSwitcherInLocalPreview,\n    parentWidth,\n    parentHeight,\n    /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition = 'horizontalBottom',\n    pinnedParticipantUserIds = [],\n    /* @conditional-compile-remove(click-to-call) */localVideoTileSize\n  } = props;\n  const theme = useTheme();\n  const isNarrow = parentWidth ? isNarrowWidth(parentWidth) : false;\n\n  /* @conditional-compile-remove(vertical-gallery) */\n  const isShort = parentHeight ? isShortHeight(parentHeight) : false;\n\n  // This is for tracking the number of children in the first page of overflow gallery.\n  // This number will be used for the maxOverflowGalleryDominantSpeakers when organizing the remote participants.\n  const childrenPerPage = useRef(4);\n  const {\n    gridParticipants,\n    overflowGalleryParticipants\n  } = useOrganizedParticipants({\n    remoteParticipants,\n    dominantSpeakers,\n    maxRemoteVideoStreams,\n    isScreenShareActive: !!screenShareComponent,\n    maxOverflowGalleryDominantSpeakers: screenShareComponent ? childrenPerPage.current - pinnedParticipantUserIds.length % childrenPerPage.current : childrenPerPage.current,\n    pinnedParticipantUserIds,\n    layout: 'floatingLocalVideo'\n  });\n  let activeVideoStreams = 0;\n  const gridTiles = gridParticipants.map(p => {\n    return onRenderRemoteParticipant(p, maxRemoteVideoStreams && maxRemoteVideoStreams >= 0 ? p.videoStream?.isAvailable && activeVideoStreams++ < maxRemoteVideoStreams : p.videoStream?.isAvailable);\n  });\n  const shouldFloatLocalVideo = remoteParticipants.length > 0;\n  if (!shouldFloatLocalVideo && localVideoComponent) {\n    gridTiles.push(localVideoComponent);\n  }\n\n  /**\n   * instantiate indexes available to render with indexes available that would be on first page\n   *\n   * For some components which do not strictly follow the order of the array, we might\n   * re-render the initial tiles -> dispose them -> create new tiles, we need to take care of\n   * this case when those components are here\n   */\n  const [indexesToRender, setIndexesToRender] = useState<number[]>([]);\n  const overflowGalleryTiles = overflowGalleryParticipants.map((p, i) => {\n    return onRenderRemoteParticipant(p, maxRemoteVideoStreams && maxRemoteVideoStreams >= 0 ? p.videoStream?.isAvailable && indexesToRender && indexesToRender.includes(i) && activeVideoStreams++ < maxRemoteVideoStreams : p.videoStream?.isAvailable);\n  });\n  const layerHostId = useId('layerhost');\n  const localVideoSizeRem = useMemo(() => {\n    if (isNarrow || /*@conditional-compile-remove(click-to-call) */localVideoTileSize === '9:16') {\n      return SMALL_FLOATING_MODAL_SIZE_REM;\n    }\n    /* @conditional-compile-remove(vertical-gallery) */\n    if ((overflowGalleryTiles.length > 0 || screenShareComponent) && overflowGalleryPosition === 'verticalRight') {\n      return isNarrow ? SMALL_FLOATING_MODAL_SIZE_REM : isShort ? SHORT_VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM : VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM;\n    }\n    /*@conditional-compile-remove(click-to-call) */\n    if ((overflowGalleryTiles.length > 0 || screenShareComponent) && overflowGalleryPosition === 'horizontalBottom') {\n      return localVideoTileSize === '16:9' || !isNarrow ? LARGE_FLOATING_MODAL_SIZE_REM : SMALL_FLOATING_MODAL_SIZE_REM;\n    }\n    return LARGE_FLOATING_MODAL_SIZE_REM;\n  }, [overflowGalleryTiles.length, isNarrow, screenShareComponent, /* @conditional-compile-remove(vertical-gallery) */isShort, /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition, /* @conditional-compile-remove(click-to-call) */localVideoTileSize]);\n  const wrappedLocalVideoComponent = localVideoComponent && shouldFloatLocalVideo || screenShareComponent && localVideoComponent ?\n  // When we use showCameraSwitcherInLocalPreview it disables dragging to allow keyboard navigation.\n  showCameraSwitcherInLocalPreview ? <Stack className={mergeStyles(localVideoTileWithControlsContainerStyle(theme, localVideoSizeRem), {\n    boxShadow: theme.effects.elevation8,\n    zIndex: LOCAL_VIDEO_TILE_ZINDEX\n  })}>\n          {localVideoComponent}\n        </Stack> : overflowGalleryTiles.length > 0 || screenShareComponent ? <Stack className={mergeStyles(localVideoTileContainerStyle(theme, localVideoSizeRem, !!screenShareComponent, overflowGalleryPosition))}>\n          {localVideoComponent}\n        </Stack> : <FloatingLocalVideo localVideoComponent={localVideoComponent} layerHostId={layerHostId} localVideoSizeRem={localVideoSizeRem} parentWidth={parentWidth} parentHeight={parentHeight} /> : undefined;\n  const overflowGallery = useMemo(() => {\n    if (overflowGalleryTiles.length === 0 && !screenShareComponent) {\n      return null;\n    }\n    return <OverflowGallery\n    /* @conditional-compile-remove(vertical-gallery) */ isShort={isShort} onFetchTilesToRender={setIndexesToRender} isNarrow={isNarrow} shouldFloatLocalVideo={!!localVideoComponent} overflowGalleryElements={overflowGalleryTiles} horizontalGalleryStyles={styles?.horizontalGallery}\n    /* @conditional-compile-remove(vertical-gallery) */ verticalGalleryStyles={styles?.verticalGallery}\n    /* @conditional-compile-remove(vertical-gallery) */ overflowGalleryPosition={overflowGalleryPosition} onChildrenPerPageChange={(n: number) => {\n      childrenPerPage.current = n;\n    }} parentWidth={parentWidth} />;\n  }, [isNarrow, /* @conditional-compile-remove(vertical-gallery) */isShort, screenShareComponent, overflowGalleryTiles, styles?.horizontalGallery, /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition, setIndexesToRender, /* @conditional-compile-remove(vertical-gallery) */styles?.verticalGallery, parentWidth, localVideoComponent]);\n  return <Stack styles={rootLayoutStyle}>\n      {wrappedLocalVideoComponent}\n      <LayerHost id={layerHostId} className={mergeStyles(layerHostStyle)} />\n      <Stack\n    /* @conditional-compile-remove(vertical-gallery) */ horizontal={overflowGalleryPosition === 'verticalRight'} styles={innerLayoutStyle} tokens={videoGalleryLayoutGap}>\n        {props.overflowGalleryPosition === 'horizontalTop' ? overflowGallery : <></>}\n        {screenShareComponent ? screenShareComponent : <GridLayout key=\"grid-layout\" styles={styles?.gridLayout}>\n            {gridTiles}\n          </GridLayout>}\n        {overflowGalleryTrampoline(overflowGallery, props.overflowGalleryPosition)}\n      </Stack>\n    </Stack>;\n};\nconst overflowGalleryTrampoline = (gallery: JSX.Element | null, galleryPosition?: 'horizontalBottom' | 'verticalRight' | 'horizontalTop'): JSX.Element | null => {\n  return galleryPosition !== 'horizontalTop' ? gallery : <></>;\n  return gallery;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { LayerHost, Stack, mergeStyles, useTheme } from '@fluentui/react';\n/* @conditional-compile-remove(click-to-call) */\nimport { LocalVideoTileSize } from '../VideoGallery';\nimport { LayoutProps } from './Layout';\nimport { isNarrowWidth } from '../utils/responsive';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { isShortHeight } from '../utils/responsive';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { OverflowGallery } from './OverflowGallery';\nimport { SMALL_FLOATING_MODAL_SIZE_REM, LARGE_FLOATING_MODAL_SIZE_REM, localVideoTileContainerStyle } from './styles/FloatingLocalVideo.styles';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM, SHORT_VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM } from './styles/FloatingLocalVideo.styles';\nimport { useOrganizedParticipants } from './utils/videoGalleryLayoutUtils';\nimport { GridLayout } from '../GridLayout';\nimport { rootLayoutStyle } from './styles/FloatingLocalVideoLayout.styles';\nimport { layerHostStyle, innerLayoutStyle } from './styles/FloatingLocalVideoLayout.styles';\nimport { videoGalleryLayoutGap } from './styles/Layout.styles';\nimport { useId } from '@fluentui/react-hooks';\n\n/**\n * Props for {@link SpeakerVideoLayout}.\n *\n * @private\n */\nexport interface SpeakerVideoLayoutProps extends LayoutProps {\n  /**\n   * Whether to display the local video camera switcher button\n   */\n  showCameraSwitcherInLocalPreview?: boolean;\n  /**\n   * Height of parent element\n   */\n  parentHeight?: number;\n  /* @conditional-compile-remove(click-to-call) */\n  /**\n   * Local video tile mode\n   */\n  localVideoTileSize?: LocalVideoTileSize;\n}\n\n/**\n * Layout for the gallery mode to highlight the current dominant speaker\n *\n * @private\n */\nexport const SpeakerVideoLayout = (props: SpeakerVideoLayoutProps): JSX.Element => {\n  const {\n    remoteParticipants = [],\n    dominantSpeakers,\n    localVideoComponent,\n    screenShareComponent,\n    onRenderRemoteParticipant,\n    styles,\n    maxRemoteVideoStreams,\n    parentWidth,\n    /* @conditional-compile-remove(vertical-gallery) */parentHeight,\n    /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition = 'horizontalBottom',\n    pinnedParticipantUserIds = [],\n    /* @conditional-compile-remove(click-to-call) */localVideoTileSize\n  } = props;\n  const theme = useTheme();\n  const isNarrow = parentWidth ? isNarrowWidth(parentWidth) : false;\n\n  /* @conditional-compile-remove(vertical-gallery) */\n  const isShort = parentHeight ? isShortHeight(parentHeight) : false;\n\n  // This is for tracking the number of children in the first page of overflow gallery.\n  // This number will be used for the maxOverflowGalleryDominantSpeakers when organizing the remote participants.\n  const childrenPerPage = useRef(4);\n  const {\n    gridParticipants,\n    overflowGalleryParticipants\n  } = useOrganizedParticipants({\n    remoteParticipants,\n    dominantSpeakers,\n    maxRemoteVideoStreams,\n    isScreenShareActive: !!screenShareComponent,\n    maxOverflowGalleryDominantSpeakers: screenShareComponent ? childrenPerPage.current - pinnedParticipantUserIds.length % childrenPerPage.current : childrenPerPage.current,\n    pinnedParticipantUserIds,\n    layout: 'speaker'\n  });\n  let activeVideoStreams = 0;\n  const gridTiles = gridParticipants.map(p => {\n    return onRenderRemoteParticipant(p, maxRemoteVideoStreams && maxRemoteVideoStreams >= 0 ? p.videoStream?.isAvailable && activeVideoStreams++ < maxRemoteVideoStreams : p.videoStream?.isAvailable);\n  });\n  const shouldFloatLocalVideo = remoteParticipants.length > 0;\n  if (!shouldFloatLocalVideo && localVideoComponent) {\n    gridTiles.push(localVideoComponent);\n  }\n\n  /**\n   * instantiate indexes available to render with indexes available that would be on first page\n   *\n   * For some components which do not strictly follow the order of the array, we might\n   * re-render the initial tiles -> dispose them -> create new tiles, we need to take care of\n   * this case when those components are here\n   */\n  const [indexesToRender, setIndexesToRender] = useState<number[]>([]);\n  const overflowGalleryTiles = overflowGalleryParticipants.map((p, i) => {\n    return onRenderRemoteParticipant(p, maxRemoteVideoStreams && maxRemoteVideoStreams >= 0 ? p.videoStream?.isAvailable && indexesToRender && indexesToRender.includes(i) && activeVideoStreams++ < maxRemoteVideoStreams : p.videoStream?.isAvailable);\n  });\n  const layerHostId = useId('layerhost');\n  const localVideoSizeRem = useMemo(() => {\n    if (isNarrow || /*@conditional-compile-remove(click-to-call) */localVideoTileSize === '9:16') {\n      return SMALL_FLOATING_MODAL_SIZE_REM;\n    }\n    /* @conditional-compile-remove(vertical-gallery) */\n    if ((overflowGalleryTiles.length > 0 || screenShareComponent) && overflowGalleryPosition === 'verticalRight') {\n      return isNarrow ? SMALL_FLOATING_MODAL_SIZE_REM : isShort ? SHORT_VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM : VERTICAL_GALLERY_FLOATING_MODAL_SIZE_REM;\n    }\n    /*@conditional-compile-remove(click-to-call) */\n    if ((overflowGalleryTiles.length > 0 || screenShareComponent) && overflowGalleryPosition === 'horizontalBottom') {\n      return localVideoTileSize === '16:9' || !isNarrow ? LARGE_FLOATING_MODAL_SIZE_REM : SMALL_FLOATING_MODAL_SIZE_REM;\n    }\n    return LARGE_FLOATING_MODAL_SIZE_REM;\n  }, [overflowGalleryTiles.length, isNarrow, screenShareComponent, /* @conditional-compile-remove(vertical-gallery) */isShort, /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition, /* @conditional-compile-remove(click-to-call) */localVideoTileSize]);\n  const wrappedLocalVideoComponent = localVideoComponent || screenShareComponent && localVideoComponent ? <Stack className={mergeStyles(localVideoTileContainerStyle(theme, localVideoSizeRem, !!screenShareComponent, overflowGalleryPosition))}>\n        {localVideoComponent}\n      </Stack> : undefined;\n  const overflowGallery = useMemo(() => {\n    if (overflowGalleryTiles.length === 0 && !screenShareComponent) {\n      return null;\n    }\n    return <OverflowGallery\n    /* @conditional-compile-remove(vertical-gallery) */ isShort={isShort} onFetchTilesToRender={setIndexesToRender} isNarrow={isNarrow} shouldFloatLocalVideo={!!localVideoComponent} overflowGalleryElements={overflowGalleryTiles} horizontalGalleryStyles={styles?.horizontalGallery}\n    /* @conditional-compile-remove(vertical-gallery) */ verticalGalleryStyles={styles?.verticalGallery}\n    /* @conditional-compile-remove(vertical-gallery) */ overflowGalleryPosition={overflowGalleryPosition} onChildrenPerPageChange={(n: number) => {\n      childrenPerPage.current = n;\n    }} parentWidth={parentWidth} />;\n  }, [isNarrow, /* @conditional-compile-remove(vertical-gallery) */isShort, screenShareComponent, overflowGalleryTiles, styles?.horizontalGallery, /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition, setIndexesToRender, /* @conditional-compile-remove(vertical-gallery) */styles?.verticalGallery, parentWidth, localVideoComponent]);\n  return <Stack styles={rootLayoutStyle}>\n      {wrappedLocalVideoComponent}\n      <LayerHost id={layerHostId} className={mergeStyles(layerHostStyle)} />\n      <Stack\n    /* @conditional-compile-remove(vertical-gallery) */ horizontal={overflowGalleryPosition === 'verticalRight'} styles={innerLayoutStyle} tokens={videoGalleryLayoutGap}>\n        {props.overflowGalleryPosition === 'horizontalTop' ? overflowGallery : <></>}\n        {screenShareComponent ? screenShareComponent : <GridLayout key=\"grid-layout\" styles={styles?.gridLayout}>\n            {gridTiles}\n          </GridLayout>}\n        {overflowGalleryTrampoline(overflowGallery, props.overflowGalleryPosition)}\n      </Stack>\n    </Stack>;\n};\nconst overflowGalleryTrampoline = (gallery: JSX.Element | null, galleryPosition?: 'horizontalBottom' | 'verticalRight' | 'horizontalTop'): JSX.Element | null => {\n  return galleryPosition !== 'horizontalTop' ? gallery : <></>;\n  return gallery;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { LayerHost, Stack, mergeStyles } from '@fluentui/react';\nimport { LayoutProps } from './Layout';\nimport React from 'react';\nimport { innerLayoutStyle, layerHostStyle, rootLayoutStyle } from './styles/FloatingLocalVideoLayout.styles';\nimport { videoGalleryLayoutGap } from './styles/Layout.styles';\nimport { useId } from '@fluentui/react-hooks';\n\n/**\n * Props for {@link FocusedContentLayout}.\n *\n * @private\n */\nexport interface FocusedContentLayoutProps extends LayoutProps {\n  /**\n   * Whether to display the local video camera switcher button\n   */\n  showCameraSwitcherInLocalPreview?: boolean;\n  /**\n   * Height of parent element\n   */\n  parentHeight?: number;\n}\n\n/**\n * Video gallery layout to focus on the screenshare stream that is present in the call.\n */\nexport const FocusedContentLayout = (props: FocusedContentLayoutProps): JSX.Element => {\n  const {\n    screenShareComponent\n  } = props;\n  const layerHostId = useId('layerhost');\n  return <Stack styles={rootLayoutStyle}>\n      <LayerHost id={layerHostId} className={mergeStyles(layerHostStyle)} />\n      <Stack styles={innerLayoutStyle} tokens={videoGalleryLayoutGap}>\n        {screenShareComponent ? screenShareComponent : <></>}\n      </Stack>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, IStyle, mergeStyles, Stack } from '@fluentui/react';\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { GridLayoutStyles } from '.';\nimport { Announcer } from './Announcer';\nimport { useEffect } from 'react';\nimport { useLocale } from '../localization';\nimport { useTheme } from '../theming';\nimport { BaseCustomStyles, OnRenderAvatarCallback, VideoGalleryLocalParticipant, VideoGalleryRemoteParticipant, VideoStreamOptions, CreateVideoStreamViewResult } from '../types';\nimport { ViewScalingMode } from '../types';\nimport { HorizontalGalleryStyles } from './HorizontalGallery';\nimport { _RemoteVideoTile } from './RemoteVideoTile';\nimport { isNarrowWidth, _useContainerHeight, _useContainerWidth } from './utils/responsive';\nimport { LocalScreenShare } from './VideoGallery/LocalScreenShare';\nimport { RemoteScreenShare } from './VideoGallery/RemoteScreenShare';\nimport { LocalVideoCameraCycleButtonProps } from './LocalVideoCameraButton';\nimport { _ICoordinates, _ModalClone } from './ModalClone/ModalClone';\nimport { _formatString } from '@internal/acs-ui-common';\nimport { _LocalVideoTile } from './LocalVideoTile';\nimport { DefaultLayout } from './VideoGallery/DefaultLayout';\nimport { FloatingLocalVideoLayout } from './VideoGallery/FloatingLocalVideoLayout';\nimport { useIdentifiers } from '../identifiers';\nimport { localVideoTileContainerStyles, videoGalleryOuterDivStyle } from './styles/VideoGallery.styles';\nimport { floatingLocalVideoTileStyle } from './VideoGallery/styles/FloatingLocalVideo.styles';\nimport { useId } from '@fluentui/react-hooks';\n/* @conditional-compile-remove(vertical-gallery) */\nimport { VerticalGalleryStyles } from './VerticalGallery';\nimport { SpeakerVideoLayout } from './VideoGallery/SpeakerVideoLayout';\nimport { FocusedContentLayout } from './VideoGallery/FocusContentLayout';\nimport { LayoutProps } from './VideoGallery/Layout';\n/**\n * @private\n * Currently the Calling JS SDK supports up to 4 remote video streams\n */\nexport const DEFAULT_MAX_REMOTE_VIDEO_STREAMS = 4;\n\n/**\n * @private\n * Styles to disable the selectivity of a text in video gallery\n */\nexport const unselectable = {\n  '-webkit-user-select': 'none',\n  '-webkit-touch-callout': 'none',\n  '-moz-user-select': 'none',\n  '-ms-user-select': 'none',\n  'user-select': 'none'\n};\n/**\n * @private\n * Set aside only 6 dominant speakers for remaining audio participants\n */\nexport const MAX_AUDIO_DOMINANT_SPEAKERS = 6;\n/**\n * @private\n * Default remote video tile menu options\n */\nexport const DEFAULT_REMOTE_VIDEO_TILE_MENU_OPTIONS = {\n  kind: 'contextual'\n};\n\n/**\n * @private\n * Maximum number of remote video tiles that can be pinned\n */\nexport const MAX_PINNED_REMOTE_VIDEO_TILES = 4;\n\n/**\n * All strings that may be shown on the UI in the {@link VideoGallery}.\n *\n * @public\n */\nexport interface VideoGalleryStrings {\n  /** String to notify that local user is sharing their screen */\n  screenIsBeingSharedMessage: string;\n  /** String to show when remote screen share stream is loading */\n  screenShareLoadingMessage: string;\n  /** String for local video label. Default is \"You\" */\n  localVideoLabel: string;\n  /** String for local video camera switcher */\n  localVideoCameraSwitcherLabel: string;\n  /** String for announcing the local video tile can be moved by keyboard controls */\n  localVideoMovementLabel: string;\n  /** String for announcing the selected camera */\n  localVideoSelectedDescription: string;\n  /** placeholder text for participants who does not have a display name*/\n  displayNamePlaceholder: string;\n  /** Menu text shown in Video Tile contextual menu for setting a remote participants video to fit in frame */\n  fitRemoteParticipantToFrame: string;\n  /** Menu text shown in Video Tile contextual menu for setting a remote participants video to fill the frame */\n  fillRemoteParticipantFrame: string;\n  /** Menu text shown in Video Tile contextual menu for pinning a remote participant's video tile */\n  pinParticipantForMe: string;\n  /** Menu text shown in Video Tile contextual menu for unpinning a remote participant's video tile */\n  unpinParticipantForMe: string;\n  /** Aria label for pin participant menu item of remote participant's video tile */\n  pinParticipantMenuItemAriaLabel: string;\n  /** Aria label for unpin participant menu item of remote participant's video tile */\n  unpinParticipantMenuItemAriaLabel: string;\n  /** Aria label to announce when remote participant's video tile is pinned */\n  pinnedParticipantAnnouncementAriaLabel: string;\n  /** Aria label to announce when remote participant's video tile is unpinned */\n  unpinnedParticipantAnnouncementAriaLabel: string;\n}\n\n/**\n * @public\n */\nexport type VideoGalleryLayout = 'default' | 'floatingLocalVideo' | 'speaker' | 'focusedContent';\n\n/**\n * {@link VideoGallery} Component Styles.\n * @public\n */\nexport interface VideoGalleryStyles extends BaseCustomStyles {\n  /** Styles for the grid layout */\n  gridLayout?: GridLayoutStyles;\n  /** Styles for the horizontal gallery  */\n  horizontalGallery?: HorizontalGalleryStyles;\n  /** Styles for the local video  */\n  localVideo?: IStyle;\n  /* @conditional-compile-remove(vertical-gallery) */\n  /** Styles for the vertical gallery */\n  verticalGallery?: VerticalGalleryStyles;\n}\n\n/* @conditional-compile-remove(vertical-gallery) */\n/**\n * Different modes and positions of the overflow gallery in the VideoGallery\n *\n * @public\n */\nexport type OverflowGalleryPosition = 'horizontalBottom' | 'verticalRight' | 'horizontalTop';\n\n/* @conditional-compile-remove(click-to-call) */ /* @conditional-compile-remove(rooms) */\n/**\n * different modes of the local video tile\n *\n * @public\n */\nexport type LocalVideoTileSize = '9:16' | '16:9' | 'hidden' | 'followDeviceOrientation';\n\n/**\n * Props for {@link VideoGallery}.\n *\n * @public\n */\nexport interface VideoGalleryProps {\n  /**\n   * Allows users to pass an object containing custom CSS styles for the gallery container.\n   *\n   * @Example\n   * ```\n   * <VideoGallery styles={{ root: { border: 'solid 1px red' } }} />\n   * ```\n   */\n  styles?: VideoGalleryStyles;\n  /** Layout of the video tiles. */\n  layout?: VideoGalleryLayout;\n  /** Local video particpant */\n  localParticipant: VideoGalleryLocalParticipant;\n  /** List of remote video particpants */\n  remoteParticipants?: VideoGalleryRemoteParticipant[];\n  /** List of dominant speaker userIds in the order of their dominance. 0th index is the most dominant. */\n  dominantSpeakers?: string[];\n  /** Local video view options */\n  localVideoViewOptions?: VideoStreamOptions;\n  /** Remote videos view options */\n  remoteVideoViewOptions?: VideoStreamOptions;\n  /** Callback to create the local video stream view */\n  onCreateLocalStreamView?: (options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  /** Callback to dispose of the local video stream view */\n  onDisposeLocalStreamView?: () => void;\n  /** Callback to render the local video tile*/\n  onRenderLocalVideoTile?: (localParticipant: VideoGalleryLocalParticipant) => JSX.Element;\n  /** Callback to create a remote video stream view */\n  onCreateRemoteStreamView?: (userId: string, options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  /** Callback to render a remote video tile */\n  onRenderRemoteVideoTile?: (remoteParticipant: VideoGalleryRemoteParticipant) => JSX.Element;\n  /**\n   * @deprecated use {@link onDisposeRemoteVideoStreamView} and {@link onDisposeRemoteScreenShareStreamView} instead\n   *\n   * Callback to dispose a remote video stream view\n   */\n  onDisposeRemoteStreamView?: (userId: string) => Promise<void>;\n  /** Callback to dispose a remote video stream view */\n  onDisposeRemoteVideoStreamView?: (userId: string) => Promise<void>;\n  /** Callback to dispose a remote screen share stream view */\n  onDisposeRemoteScreenShareStreamView?: (userId: string) => Promise<void>;\n  /** Callback to render a particpant avatar */\n  onRenderAvatar?: OnRenderAvatarCallback;\n  /**\n   * Whether to display the local video camera switcher button\n   */\n  showCameraSwitcherInLocalPreview?: boolean;\n  /**\n   * Whether to display a mute icon beside the user's display name.\n   * @defaultValue `true`\n   */\n  showMuteIndicator?: boolean;\n  /** Optional strings to override in component  */\n  strings?: Partial<VideoGalleryStrings>;\n  /**\n   * Maximum number of participant remote video streams that is rendered.\n   * @defaultValue 4\n   */\n  maxRemoteVideoStreams?: number;\n  /**\n   * Camera control information for button to switch cameras.\n   */\n  localVideoCameraCycleButtonProps?: LocalVideoCameraCycleButtonProps;\n  /**\n   * List of pinned participant userIds.\n   */\n  pinnedParticipants?: string[];\n  /**\n   * This callback will be called when a participant video tile is pinned.\n   */\n  onPinParticipant?: (userId: string) => void;\n  /**\n   * This callback will be called when a participant video tile is un-pinned.\n   */\n  onUnpinParticipant?: (userId: string) => void;\n  /**\n   * Options for showing the remote video tile menu.\n   *\n   * @defaultValue \\{ kind: 'contextual' \\}\n   */\n  remoteVideoTileMenu?: false | VideoTileContextualMenuProps | VideoTileDrawerMenuProps;\n  /* @conditional-compile-remove(vertical-gallery) */\n  /**\n   * Determines the layout of the overflowGallery inside the VideoGallery.\n   * @defaultValue 'horizontalBottom'\n   */\n  overflowGalleryPosition?: OverflowGalleryPosition;\n  /* @conditional-compile-remove(click-to-call) */ /* @conditional-compile-remove(rooms) */\n  /**\n   * Determines the aspect ratio of local video tile in the video gallery.\n   * @remarks 'followDeviceOrientation' will be responsive to the screen orientation and will change between 9:16 (portrait) and\n   * 16:9 (landscape) aspect ratios.\n   * @defaultValue 'followDeviceOrientation'\n   */\n  localVideoTileSize?: LocalVideoTileSize;\n}\n\n/**\n * Properties for showing contextual menu for remote {@link VideoTile} components in {@link VideoGallery}.\n *\n * @public\n */\nexport interface VideoTileContextualMenuProps {\n  /**\n   * The menu property kind\n   */\n  kind: 'contextual';\n}\n\n/**\n * Properties for showing drawer menu on remote {@link VideoTile} long touch in {@link VideoGallery}.\n *\n * @public\n */\nexport interface VideoTileDrawerMenuProps {\n  /**\n   * The menu property kind\n   */\n  kind: 'drawer';\n  /**\n   * The optional id property provided on an element that the drawer menu should render within when a\n   * remote participant video tile Drawer is shown. If an id is not provided, then a drawer menu will\n   * render within the VideoGallery component.\n   */\n  hostId?: string;\n}\n/**\n * VideoGallery represents a layout of video tiles for a specific call.\n * It displays a {@link VideoTile} for the local user as well as for each remote participant who has joined the call.\n *\n * @public\n */\nexport const VideoGallery = (props: VideoGalleryProps): JSX.Element => {\n  const {\n    localParticipant,\n    remoteParticipants = [],\n    localVideoViewOptions,\n    remoteVideoViewOptions,\n    dominantSpeakers,\n    onRenderLocalVideoTile,\n    onRenderRemoteVideoTile,\n    onCreateLocalStreamView,\n    onDisposeLocalStreamView,\n    onCreateRemoteStreamView,\n    onDisposeRemoteScreenShareStreamView,\n    onDisposeRemoteVideoStreamView,\n    styles,\n    layout,\n    onRenderAvatar,\n    showMuteIndicator,\n    maxRemoteVideoStreams = DEFAULT_MAX_REMOTE_VIDEO_STREAMS,\n    showCameraSwitcherInLocalPreview,\n    localVideoCameraCycleButtonProps,\n    onPinParticipant: onPinParticipantHandler,\n    onUnpinParticipant: onUnpinParticipantHandler,\n    remoteVideoTileMenu = DEFAULT_REMOTE_VIDEO_TILE_MENU_OPTIONS,\n    /* @conditional-compile-remove(vertical-gallery) */\n    overflowGalleryPosition = 'horizontalBottom',\n    /* @conditional-compile-remove(rooms) */\n    localVideoTileSize = 'followDeviceOrientation'\n  } = props;\n  const ids = useIdentifiers();\n  const theme = useTheme();\n  const localeStrings = useLocale().strings.videoGallery;\n  const strings = useMemo(() => ({\n    ...localeStrings,\n    ...props.strings\n  }), [localeStrings, props.strings]);\n  const drawerMenuHostIdFromProp = remoteVideoTileMenu && remoteVideoTileMenu.kind === 'drawer' ? (remoteVideoTileMenu as VideoTileDrawerMenuProps).hostId : undefined;\n  const drawerMenuHostId = useId('drawerMenuHost', drawerMenuHostIdFromProp);\n  const localTileNotInGrid = (layout === 'floatingLocalVideo' || layout === 'speaker') && remoteParticipants.length > 0;\n  const containerRef = useRef<HTMLDivElement>(null);\n  const containerWidth = _useContainerWidth(containerRef);\n  const containerHeight = _useContainerHeight(containerRef);\n  const isNarrow = containerWidth ? isNarrowWidth(containerWidth) : false;\n  const [pinnedParticipantsState, setPinnedParticipantsState] = React.useState<string[]>([]);\n  const [selectedScalingModeState, setselectedScalingModeState] = React.useState<Record<string, VideoStreamOptions>>({});\n  const onUpdateScalingMode = useCallback((remoteUserId: string, scalingMode: ViewScalingMode) => {\n    setselectedScalingModeState(current => ({\n      ...current,\n      [remoteUserId]: {\n        scalingMode,\n        isMirrored: remoteVideoViewOptions?.isMirrored\n      }\n    }));\n  }, [remoteVideoViewOptions?.isMirrored]);\n  useEffect(() => {\n    props.pinnedParticipants?.forEach(pinParticipant => {\n      if (!props.remoteParticipants?.find(t => t.userId === pinParticipant)) {\n        // warning will be logged in the console when invalid participant id is passed in pinned participants\n        console.warn('Invalid pinned participant UserId :' + pinParticipant);\n      }\n    });\n  }, [props.pinnedParticipants, props.remoteParticipants]);\n  // Use pinnedParticipants from props but if it is not defined use the maintained state of pinned participants\n  const pinnedParticipants = props.pinnedParticipants ?? pinnedParticipantsState;\n  const showLocalVideoTileLabel = !(localTileNotInGrid && isNarrow || /*@conditional-compile-remove(click-to-call) */ /* @conditional-compile-remove(rooms) */localVideoTileSize === '9:16') || layout === 'default';\n  /**\n   * Utility function for memoized rendering of LocalParticipant.\n   */\n  const localVideoTile = useMemo((): JSX.Element /* @conditional-compile-remove(rooms) */ | undefined => {\n    /* @conditional-compile-remove(click-to-call) */\n    if (localVideoTileSize === 'hidden') {\n      return undefined;\n    }\n    if (onRenderLocalVideoTile) {\n      return onRenderLocalVideoTile(localParticipant);\n    }\n    const localVideoTileStyles = concatStyleSets(localTileNotInGrid ? floatingLocalVideoTileStyle : {}, {\n      root: {\n        borderRadius: theme.effects.roundedCorner4\n      }\n    }, styles?.localVideo);\n    const initialsName = !localParticipant.displayName ? '' : localParticipant.displayName;\n    const showDisplayNameTrampoline = (): string => {\n      return layout === 'default' ? strings.localVideoLabel : isNarrow ? '' : strings.localVideoLabel;\n      return isNarrow ? '' : strings.localVideoLabel;\n    };\n    return <Stack styles={localVideoTileContainerStyles} key=\"local-video-tile-key\" tabIndex={0} aria-label={strings.localVideoMovementLabel} role={'dialog'}>\n        <_LocalVideoTile userId={localParticipant.userId} onCreateLocalStreamView={onCreateLocalStreamView} onDisposeLocalStreamView={onDisposeLocalStreamView} isAvailable={localParticipant?.videoStream?.isAvailable} isMuted={localParticipant.isMuted} renderElement={localParticipant?.videoStream?.renderElement} displayName={showDisplayNameTrampoline()} initialsName={initialsName} localVideoViewOptions={localVideoViewOptions} onRenderAvatar={onRenderAvatar} showLabel={showLocalVideoTileLabel} showMuteIndicator={showMuteIndicator} showCameraSwitcherInLocalPreview={showCameraSwitcherInLocalPreview} localVideoCameraCycleButtonProps={localVideoCameraCycleButtonProps} localVideoCameraSwitcherLabel={strings.localVideoCameraSwitcherLabel} localVideoSelectedDescription={strings.localVideoSelectedDescription} styles={localVideoTileStyles}\n      /* @conditional-compile-remove(raise-hand) */ raisedHand={localParticipant.raisedHand} />\n      </Stack>;\n  }, [isNarrow, localParticipant, localVideoCameraCycleButtonProps, localVideoViewOptions, onCreateLocalStreamView, onDisposeLocalStreamView, onRenderAvatar, onRenderLocalVideoTile, localTileNotInGrid, showCameraSwitcherInLocalPreview, showMuteIndicator, styles?.localVideo, theme.effects.roundedCorner4, /*@conditional-compile-remove(click-to-call) */\n  localVideoTileSize, layout, showLocalVideoTileLabel]);\n  const onPinParticipant = useCallback((userId: string) => {\n    if (pinnedParticipants.length >= MAX_PINNED_REMOTE_VIDEO_TILES) {\n      return;\n    }\n    if (!pinnedParticipantsState.includes(userId)) {\n      setPinnedParticipantsState(pinnedParticipantsState.concat(userId));\n    }\n    onPinParticipantHandler?.(userId);\n  }, [pinnedParticipants.length, pinnedParticipantsState, setPinnedParticipantsState, onPinParticipantHandler]);\n  const onUnpinParticipant = useCallback((userId: string) => {\n    setPinnedParticipantsState(pinnedParticipantsState.filter(p => p !== userId));\n    onUnpinParticipantHandler?.(userId);\n  }, [pinnedParticipantsState, setPinnedParticipantsState, onUnpinParticipantHandler]);\n  const [announcementString, setAnnouncementString] = React.useState<string>('');\n  /**\n   * sets the announcement string for VideoGallery actions so that the screenreader will trigger\n   */\n  const toggleAnnouncerString = useCallback((announcement: string) => {\n    setAnnouncementString(announcement);\n    /**\n     * Clears the announcer string after VideoGallery action allowing it to be re-announced.\n     */\n    setTimeout(() => {\n      setAnnouncementString('');\n    }, 3000);\n  }, [setAnnouncementString]);\n  const defaultOnRenderVideoTile = useCallback((participant: VideoGalleryRemoteParticipant, isVideoParticipant?: boolean) => {\n    const remoteVideoStream = participant.videoStream;\n    const selectedScalingMode = remoteVideoStream ? selectedScalingModeState[participant.userId] : undefined;\n    let isPinned = pinnedParticipants?.includes(participant.userId);\n    const createViewOptions = (): VideoStreamOptions | undefined => {\n      if (selectedScalingMode) {\n        return selectedScalingMode;\n      }\n      return remoteVideoStream?.streamSize && remoteVideoStream.streamSize?.height > remoteVideoStream.streamSize?.width ? ({\n        scalingMode: 'Fit',\n        isMirrored: remoteVideoViewOptions?.isMirrored\n      } as VideoStreamOptions) : remoteVideoViewOptions;\n    };\n    return <_RemoteVideoTile key={participant.userId} userId={participant.userId} remoteParticipant={participant} onCreateRemoteStreamView={isVideoParticipant ? onCreateRemoteStreamView : undefined} onDisposeRemoteStreamView={isVideoParticipant ? onDisposeRemoteVideoStreamView : undefined} isAvailable={isVideoParticipant ? remoteVideoStream?.isAvailable : false} isReceiving={isVideoParticipant ? remoteVideoStream?.isReceiving : false} renderElement={isVideoParticipant ? remoteVideoStream?.renderElement : undefined} remoteVideoViewOptions={createViewOptions()} onRenderAvatar={onRenderAvatar} showMuteIndicator={showMuteIndicator} strings={strings} menuKind={participant.userId === localParticipant.userId ? undefined : remoteVideoTileMenu ? remoteVideoTileMenu.kind === 'drawer' ? 'drawer' : 'contextual' : undefined} drawerMenuHostId={drawerMenuHostId} onPinParticipant={onPinParticipant} onUnpinParticipant={onUnpinParticipant} onUpdateScalingMode={onUpdateScalingMode} isPinned={isPinned} disablePinMenuItem={pinnedParticipants.length >= MAX_PINNED_REMOTE_VIDEO_TILES} toggleAnnouncerString={toggleAnnouncerString} />;\n  }, [onCreateRemoteStreamView, onDisposeRemoteVideoStreamView, remoteVideoViewOptions, localParticipant, onRenderAvatar, showMuteIndicator, strings, drawerMenuHostId, remoteVideoTileMenu, selectedScalingModeState, pinnedParticipants, onPinParticipant, onUnpinParticipant, toggleAnnouncerString, onUpdateScalingMode]);\n  const screenShareParticipant = remoteParticipants.find(participant => participant.screenShareStream?.isAvailable);\n  const localScreenShareStreamComponent = <LocalScreenShare localParticipant={localParticipant} />;\n  const remoteScreenShareComponent = screenShareParticipant && <RemoteScreenShare {...screenShareParticipant} renderElement={screenShareParticipant.screenShareStream?.renderElement} onCreateRemoteStreamView={onCreateRemoteStreamView} onDisposeRemoteStreamView={onDisposeRemoteScreenShareStreamView} isReceiving={screenShareParticipant.screenShareStream?.isReceiving} participantVideoScalingMode={selectedScalingModeState[screenShareParticipant.userId]} />;\n  const screenShareComponent = remoteScreenShareComponent ? remoteScreenShareComponent : localParticipant.isScreenSharingOn ? localScreenShareStreamComponent : undefined;\n  const layoutProps = useMemo<LayoutProps>(() => ({\n    remoteParticipants,\n    localParticipant,\n    screenShareComponent,\n    showCameraSwitcherInLocalPreview,\n    maxRemoteVideoStreams,\n    dominantSpeakers,\n    styles,\n    onRenderRemoteParticipant: onRenderRemoteVideoTile ?? defaultOnRenderVideoTile,\n    localVideoComponent: localVideoTile,\n    parentWidth: containerWidth,\n    parentHeight: containerHeight,\n    pinnedParticipantUserIds: pinnedParticipants,\n    /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition,\n    /* @conditional-compile-remove(click-to-call) */localVideoTileSize\n  }), [remoteParticipants, localParticipant, screenShareComponent, showCameraSwitcherInLocalPreview, maxRemoteVideoStreams, dominantSpeakers, styles, localVideoTile, containerWidth, containerHeight, onRenderRemoteVideoTile, defaultOnRenderVideoTile, pinnedParticipants, /* @conditional-compile-remove(vertical-gallery) */overflowGalleryPosition, /* @conditional-compile-remove(click-to-call) */localVideoTileSize]);\n  const videoGalleryLayout = useMemo(() => {\n    if (screenShareParticipant && layout === 'focusedContent') {\n      return <FocusedContentLayout {...layoutProps} />;\n    }\n    if (layout === 'floatingLocalVideo') {\n      return <FloatingLocalVideoLayout {...layoutProps} />;\n    }\n    if (layout === 'speaker') {\n      return <SpeakerVideoLayout {...layoutProps} />;\n    }\n    return <DefaultLayout {...layoutProps} />;\n  }, [layout, layoutProps, screenShareParticipant]);\n  return <div\n  // We don't assign an drawer menu host id to the VideoGallery when a drawerMenuHostId is assigned from props\n  id={drawerMenuHostIdFromProp ? undefined : drawerMenuHostId} data-ui-id={ids.videoGallery} ref={containerRef} className={mergeStyles(videoGalleryOuterDivStyle, styles?.root, unselectable)}>\n      {videoGalleryLayout}\n      <Announcer announcementString={announcementString} ariaLive=\"polite\" />\n    </div>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, IButtonStyles, IContextualMenuStyles, IContextualMenuItemStyles } from '@fluentui/react';\ninterface IControlBarStyles {\n  horizontal: IStyle;\n  vertical: IStyle;\n  dockedTop: IStyle;\n  dockedBottom: IStyle;\n  dockedLeft: IStyle;\n  dockedRight: IStyle;\n  floatingTop: IStyle;\n  floatingBottom: IStyle;\n  floatingLeft: IStyle;\n  floatingRight: IStyle;\n}\n\n/**\n * @private\n */\nexport const controlBarStyles: IControlBarStyles = {\n  horizontal: {\n    flexFlow: 'row nowrap'\n  },\n  vertical: {\n    flexFlow: 'column nowrap',\n    width: 'fit-content',\n    maxWidth: '8rem'\n  },\n  dockedTop: {\n    flexFlow: 'row nowrap',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    minWidth: 'fit-content'\n  },\n  dockedBottom: {\n    flexFlow: 'row nowrap',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    width: '100%',\n    minWidth: 'fit-content'\n  },\n  dockedLeft: {\n    justifyContent: 'center',\n    overflow: 'hidden',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%'\n  },\n  dockedRight: {\n    justifyContent: 'center',\n    overflow: 'hidden',\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    height: '100%'\n  },\n  floatingTop: {\n    flexFlow: 'row nowrap',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    position: 'absolute',\n    top: '1rem',\n    left: '50%',\n    transform: 'translateX(-50%)',\n    minWidth: 'fit-content',\n    zIndex: 10\n  },\n  floatingBottom: {\n    flexFlow: 'row nowrap',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    position: 'absolute',\n    bottom: '1rem',\n    left: '50%',\n    transform: 'translateX(-50%)',\n    minWidth: 'fit-content',\n    zIndex: 10\n  },\n  floatingLeft: {\n    flexFlow: 'column nowrap',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    position: 'absolute',\n    top: '50%',\n    left: '1rem',\n    transform: 'translateY(-50%)',\n    zIndex: 10\n  },\n  floatingRight: {\n    flexFlow: 'column nowrap',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    position: 'absolute',\n    top: '50%',\n    right: '1rem',\n    transform: 'translateY(-50%)',\n    zIndex: 10\n  }\n};\n\n/**\n * @private\n */\nexport const controlButtonStyles: IButtonStyles = {\n  root: {\n    background: 'none',\n    border: 'none',\n    borderRadius: 0,\n    minHeight: '3.5rem',\n    minWidth: '3.5rem',\n    width: '100%',\n    maxWidth: '8rem',\n    svg: {\n      verticalAlign: 'text-top'\n    }\n  },\n  splitButtonMenuButton: {\n    border: 'none'\n  },\n  flexContainer: {\n    flexFlow: 'column',\n    display: 'contents'\n  },\n  label: {\n    fontSize: '0.625rem',\n    fontWeight: '400',\n    lineHeight: '1rem',\n    cursor: 'pointer',\n    display: 'block',\n    margin: '0rem 0.25rem',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  }\n};\n\n/**\n * making it Partial as IContextualMenuStyles has all its props non-optional and we only need title to be defined here.\n *\n * @private\n */\nexport const participantsButtonMenuPropsStyle: Partial<IContextualMenuStyles> = {\n  title: {\n    background: 'initial',\n    paddingLeft: '.5rem',\n    fontWeight: 600,\n    fontSize: '.75rem'\n  }\n};\n\n/**\n * Default styles for button flyout items\n *\n * @private\n */\nexport const buttonFlyoutItemStyles: IContextualMenuItemStyles = {\n  icon: {\n    lineHeight: 0\n  },\n  checkmarkIcon: {\n    lineHeight: 0\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { TooltipHost, ITooltipHostStyles, ITooltipHostProps, ICalloutContentStyles, mergeStyleSets, useTheme } from '@fluentui/react';\nimport { isDarkThemed } from '../theming/themeUtils';\n\n// The TooltipHost root uses display: inline by default.\n// To prevent sizing issues or tooltip positioning issues, we override to inline-block.\n// For more details see \"Icon Button with Tooltip\" on https://developer.microsoft.com/en-us/fluentui#/controls/web/button\nconst hostStyles: Partial<ITooltipHostStyles> = {\n  root: {\n    display: 'inline-block'\n  }\n};\n\n/**\n * Tooltip that should wrap control bar buttons.\n *\n * @private\n */\nexport const ControlButtonTooltip = (props: ITooltipHostProps): JSX.Element => {\n  const theme = useTheme();\n  const calloutStyle: Partial<ICalloutContentStyles> = {\n    root: {\n      padding: 0\n    },\n    calloutMain: {\n      padding: '0.5rem'\n    }\n  };\n  const calloutProps = {\n    gapSpace: 4,\n    styles: calloutStyle,\n    backgroundColor: isDarkThemed(theme) ? theme.palette.neutralLighter : ''\n  };\n  return <TooltipHost {...props} data-ui-id={props.id} calloutProps={{\n    ...calloutProps,\n    ...props.calloutProps\n  }} styles={mergeStyleSets(hostStyles, props.styles)}>\n      {props.children}\n    </TooltipHost>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { DefaultButton, IButtonProps, IRenderFunction, concatStyleSets, IButtonStyles, KeyCodes } from '@fluentui/react';\nimport { controlButtonStyles } from './styles/ControlBar.styles';\nimport { ControlButtonTooltip } from './ControlButtonTooltip';\n\n/**\n * Strings of {@link ControlBarButton} that can be overridden.\n *\n * @public\n */\nexport interface ControlBarButtonStrings {\n  /**\n   * Label of the button. This supersedes onLabel or offLabel if used.\n   */\n  label?: string;\n  /**\n   * Label of the button shown when the button is checked.\n   */\n  onLabel?: string;\n  /**\n   * Label of the button shown when the button is not checked.\n   */\n  offLabel?: string;\n  /**\n   * Tooltip content of the button. This supersedes tooltipDisabledContent, tooltipOnContent and tooltipOffContent if used.\n   */\n  tooltipContent?: string;\n  /**\n   * Tooltip content when the button is disabled.\n   */\n  tooltipDisabledContent?: string;\n  /**\n   * Tooltip content when the button is in the checked state.\n   */\n  tooltipOnContent?: string;\n  /**\n   * Tooltip content when the button is in the unchecked state.\n   */\n  tooltipOffContent?: string;\n}\n\n/**\n * Styles for all {@link ControlBarButton} implementations.\n *\n * @public\n */\nexport type ControlBarButtonStyles = IButtonStyles;\n\n/**\n * Props for {@link ControlBarButton}.\n *\n * @public\n */\nexport interface ControlBarButtonProps extends IButtonProps {\n  /**\n   * Whether the label is displayed or not.\n   *\n   * @defaultValue `false`\n   */\n  showLabel?: boolean;\n\n  /**\n   * Key to use for the Label component\n   */\n  labelKey?: string;\n\n  /**\n   * Disable tooltip.\n   *\n   * @defaultValue 'false'\n   */\n  disableTooltip?: boolean;\n\n  /**\n   * Id to use for the tooltip host.\n   *\n   * @defaultValue This uses the labelKey and appends -tooltip by default\n   */\n  tooltipId?: string;\n\n  /**\n   * Optional strings to override in component.\n   */\n  strings?: ControlBarButtonStrings;\n\n  /**\n   * Icon to render when the button is checked.\n   */\n  onRenderOnIcon?: IRenderFunction<IButtonProps>;\n\n  /**\n   * Icon to render when the button is not checked.\n   */\n  onRenderOffIcon?: IRenderFunction<IButtonProps>;\n\n  /**\n   * Fluent styles, including extensions common to all {@link ControlBarButton}s.\n   */\n  styles?: ControlBarButtonStyles;\n}\nconst DefaultRenderIcon = (props?: ControlBarButtonProps): JSX.Element | null => {\n  return props?.checked ? props?.onRenderOnIcon ? props?.onRenderOnIcon() : null : props?.onRenderOffIcon ? props?.onRenderOffIcon() : null;\n};\n\n/**\n * Default button styled for the {@link ControlBar}.\n *\n * Use this component create custom buttons that are styled the same as other buttons provided by the UI Library.\n *\n * @public\n */\nexport const ControlBarButton = (props: ControlBarButtonProps): JSX.Element => {\n  const componentStyles = concatStyleSets(controlButtonStyles, props.styles ?? {});\n  const labelText = props?.text ?? props?.strings?.label ?? (props?.checked ? props?.strings?.onLabel : props?.strings?.offLabel);\n  const tooltipContent = props?.strings?.tooltipContent ?? (props?.disabled ? props?.strings?.tooltipDisabledContent : props?.checked ? props?.strings?.tooltipOnContent : props?.strings?.tooltipOffContent);\n  const tooltipId = props.tooltipId ?? props.labelKey ? props.labelKey + '-tooltip' : undefined;\n  return <ControlButtonTooltip hidden={props.disableTooltip} content={tooltipContent} id={tooltipId}>\n      <DefaultButton {...props} styles={componentStyles} onRenderText={props.showLabel && props.onRenderText ? props.onRenderText : undefined} onRenderIcon={props.onRenderIcon ?? DefaultRenderIcon} ariaLabel={props.splitButtonAriaLabel ?? props.ariaLabel ?? tooltipContent ?? labelText} allowDisabledFocus={props.allowDisabledFocus ?? true} menuTriggerKeyCode={KeyCodes.down} // explicitly sets the keypress to activiate the split button drop down.\n    text={undefined} // this is handled as a child of the button, without this the `showLabel` prop may be ignored.\n    >\n        {props.showLabel ? labelText : <></>}\n      </DefaultButton>\n    </ControlButtonTooltip>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Icon, mergeStyles } from '@fluentui/react';\nimport React from 'react';\nimport { useTheme } from '../theming';\n\n/**\n * @internal\n */\nexport interface _HighContrastAwareIconProps {\n  /** Icon name */\n  iconName: string;\n  /** Whether button is disabled */\n  disabled?: boolean | undefined;\n}\n\n/**\n * This is a helper component to define and unify icon colors\n *\n * @internal\n */\nexport const _HighContrastAwareIcon = (props: _HighContrastAwareIconProps): JSX.Element => {\n  const {\n    iconName,\n    disabled\n  } = props;\n  const theme = useTheme();\n  // setting colors for the icons using color from theme, so in dark mode or other accessibility modes, they have pre-defined contrast colors\n  // the media query is for when in specific window accessibility mode, change the svg colors\n  return <Icon iconName={iconName} className={mergeStyles({\n    svg: {\n      fill: disabled ? theme.palette.neutralTertiary : theme.palette.neutralPrimaryAlt,\n      '@media (forced-colors: active) and (prefers-color-scheme: dark)': {\n        fill: disabled ? theme.palette.neutralPrimaryAlt : theme.palette.neutralTertiary\n      }\n    }\n  })} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ContextualMenuItemType, IContextualMenuItem, IContextualMenuItemStyles, IContextualMenuProps, IContextualMenuStyles, merge } from '@fluentui/react';\nimport React from 'react';\nimport { useLocale } from '../localization';\nimport { ControlBarButton, ControlBarButtonProps, ControlBarButtonStyles } from './ControlBarButton';\nimport { _HighContrastAwareIcon } from './HighContrastAwareIcon';\nimport { buttonFlyoutItemStyles } from './styles/ControlBar.styles';\nimport { _preventDismissOnEvent as preventDismissOnEvent } from '@internal/acs-ui-common';\n\n/**\n * Styles for the {@link DevicesButton} menu.\n *\n * @public\n */\nexport interface DevicesButtonContextualMenuStyles extends IContextualMenuStyles {\n  /**\n   * Styles for the items inside the {@link DevicesButton} button menu.\n   */\n  menuItemStyles?: IContextualMenuItemStyles;\n}\n\n/**\n * Styles for the Devices button menu items.\n *\n * @public\n */\nexport interface DevicesButtonStyles extends ControlBarButtonStyles {\n  /**\n   * Styles for the {@link DevicesButton} menu.\n   */\n  menuStyles?: Partial<DevicesButtonContextualMenuStyles>;\n}\n\n/**\n * A device, e.g. camera, microphone, or speaker, in the {@link DevicesButton} flyout.\n *\n * @public\n */\nexport interface OptionsDevice {\n  /**\n   * Device unique identifier\n   */\n  id: string;\n  /**\n   * Device name\n   */\n  name: string;\n}\n\n/**\n * Strings of {@link DevicesButton} that can be overridden.\n *\n * @public\n */\nexport interface DevicesButtonStrings {\n  /**\n   * Label of button\n   */\n  label: string;\n  /**\n   * Button tooltip content.\n   */\n  tooltipContent?: string;\n  /**\n   * Title of camera menu\n   */\n  cameraMenuTitle: string;\n  /**\n   * Title of microphone menu\n   */\n  microphoneMenuTitle: string;\n  /**\n   * Title of speaker menu\n   */\n  speakerMenuTitle: string;\n  /**\n   * Tooltip of camera menu\n   */\n  cameraMenuTooltip: string;\n  /**\n   * Tooltip of microphone menu\n   */\n  microphoneMenuTooltip: string;\n  /**\n   * Tooltip of speaker menu\n   */\n  speakerMenuTooltip: string;\n}\n\n/**\n * Props for {@link DevicesButton}.\n *\n * @public\n */\nexport interface DevicesButtonProps extends ControlBarButtonProps {\n  /**\n   * Available microphones for selection\n   */\n  microphones?: OptionsDevice[];\n  /**\n   * Available speakers for selection\n   */\n  speakers?: OptionsDevice[];\n  /**\n   * Available cameras for selection\n   */\n  cameras?: OptionsDevice[];\n  /**\n   * Microphone that is shown as currently selected\n   */\n  selectedMicrophone?: OptionsDevice;\n  /**\n   * Speaker that is shown as currently selected\n   */\n  selectedSpeaker?: OptionsDevice;\n  /**\n   * Camera that is shown as currently selected\n   */\n  selectedCamera?: OptionsDevice;\n  /**\n   * Callback when a camera is selected\n   */\n  onSelectCamera?: (device: OptionsDevice) => Promise<void>;\n  /**\n   * Callback when a microphone is selected\n   */\n  onSelectMicrophone?: (device: OptionsDevice) => Promise<void>;\n  /**\n   * Speaker when a speaker is selected\n   */\n  onSelectSpeaker?: (device: OptionsDevice) => Promise<void>;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<DevicesButtonStrings>;\n  /**\n   * Option to increase the touch targets of the button flyout menu items from 36px to 48px.\n   * Recommended for mobile devices.\n   */\n  styles?: DevicesButtonStyles;\n}\n\n/**\n * Subset props for various buttons that show device selection menus.\n *\n * @internal\n */\nexport interface DeviceMenuProps {\n  microphones?: OptionsDevice[];\n  speakers?: OptionsDevice[];\n  cameras?: OptionsDevice[];\n  selectedMicrophone?: OptionsDevice;\n  selectedSpeaker?: OptionsDevice;\n  selectedCamera?: OptionsDevice;\n  onSelectCamera?: (device: OptionsDevice) => Promise<void>;\n  onSelectMicrophone?: (device: OptionsDevice) => Promise<void>;\n  onSelectSpeaker?: (device: OptionsDevice) => Promise<void>;\n  styles?: Partial<DeviceMenuStyles>;\n}\n\n/**\n * Subset of strings for various buttons that show device selection menus.\n *\n * @internal\n */\nexport interface DeviceMenuStrings {\n  /**\n   * Title for Camera section in the contextual menu\n   */\n  cameraMenuTitle?: string;\n  /**\n   * Title for Audio Device section in the contextual menu\n   *\n   * @remark Used in place of microphoneMenuTitle when speakers can be enumerated\n   */\n  audioDeviceMenuTitle?: string;\n  /**\n   * Title for Microphone section in the contextual menu\n   *\n   * @remark Used when speakers can be enumerated\n   */\n  microphoneMenuTitle?: string;\n  /**\n   * Title for Speaker section in the contextual menu\n   */\n  speakerMenuTitle?: string;\n  /**\n   * Tooltip label for Camera section in the contextual menu\n   */\n  cameraMenuTooltip?: string;\n  /**\n   * Tooltip label for Audio Device section in the contextual menu\n   *\n   * @remark Used in place of microphoneMenuTooltip when speakers can be enumerated\n   */\n  audioDeviceMenuTooltip?: string;\n  /**\n   * Tooltip label for Microphone section in the contextual menu\n   *\n   * @remark Used when speakers can be enumerated\n   */\n  microphoneMenuTooltip?: string;\n  /**\n   * Tooltip label for Speaker section in the contextual menu\n   */\n  speakerMenuTooltip?: string;\n}\n\n/**\n * Styles for flyouts used by various buttons for device selection flyouts.\n *\n * @internal\n */\nexport interface DeviceMenuStyles extends IContextualMenuStyles {\n  menuItemStyles?: IContextualMenuItemStyles;\n}\n\n/**\n * Generates default {@link IContextualMenuProps} for buttons that\n * show a drop-down to select devices to use.\n *\n * @internal\n */\nexport const generateDefaultDeviceMenuProps = (props: DeviceMenuProps, strings: DeviceMenuStrings, primaryActionItem?: IContextualMenuItem, isSelectCamAllowed = true, isSelectMicAllowed = true): {\n  items: IContextualMenuItem[];\n} | undefined => {\n  const {\n    microphones,\n    speakers,\n    cameras,\n    selectedMicrophone,\n    selectedSpeaker,\n    selectedCamera,\n    onSelectCamera,\n    onSelectMicrophone,\n    onSelectSpeaker\n  } = props;\n  const defaultMenuProps: IContextualMenuProps = {\n    items: [],\n    styles: props.styles,\n    calloutProps: {\n      styles: {\n        root: {\n          // Confine the menu to the parents bounds.\n          // More info: https://github.com/microsoft/fluentui/issues/18835\n          // NB: 95% to keep some space for margin, drop shadow etc around the Callout.\n          maxWidth: '95%'\n        }\n      },\n      preventDismissOnEvent\n    }\n  };\n  const menuItemStyles = merge(buttonFlyoutItemStyles, props.styles?.menuItemStyles ?? {});\n  if (cameras && selectedCamera && onSelectCamera && isSelectCamAllowed) {\n    defaultMenuProps.items.push({\n      key: 'cameras',\n      itemType: ContextualMenuItemType.Section,\n      sectionProps: {\n        title: strings.cameraMenuTitle,\n        items: [{\n          key: 'sectionCamera',\n          title: strings.cameraMenuTooltip,\n          subMenuProps: {\n            calloutProps: {\n              preventDismissOnEvent\n            },\n            items: cameras.map(camera => ({\n              key: camera.id,\n              text: camera.name,\n              title: camera.name,\n              iconProps: {\n                iconName: 'ContextMenuCameraIcon',\n                styles: {\n                  root: {\n                    lineHeight: 0\n                  }\n                }\n              },\n              itemProps: {\n                styles: menuItemStyles\n              },\n              canCheck: true,\n              isChecked: camera.id === selectedCamera?.id,\n              onClick: () => {\n                if (camera.id !== selectedCamera?.id) {\n                  onSelectCamera(camera);\n                }\n              }\n            }))\n          },\n          text: selectedCamera.name\n        }]\n      }\n    });\n    if (primaryActionItem) {\n      defaultMenuProps.items.push(primaryActionItem);\n    }\n  }\n  if (microphones && selectedMicrophone && onSelectMicrophone && isSelectMicAllowed) {\n    // Set props as Microphone if speakers can be enumerated else set as Audio Device\n    const speakersAvailable = speakers && speakers.length > 0;\n    const key = speakersAvailable ? 'sectionMicrophone' : 'sectionAudioDevice';\n    const title = speakersAvailable ? strings.microphoneMenuTooltip : strings.audioDeviceMenuTooltip;\n    defaultMenuProps.items.push({\n      key: 'microphones',\n      itemType: ContextualMenuItemType.Section,\n      sectionProps: {\n        title: strings.microphoneMenuTitle,\n        items: [{\n          key: key,\n          title: title,\n          subMenuProps: {\n            calloutProps: {\n              preventDismissOnEvent\n            },\n            items: microphones.map(microphone => ({\n              key: microphone.id,\n              text: microphone.name,\n              title: microphone.name,\n              itemProps: {\n                styles: menuItemStyles\n              },\n              iconProps: {\n                iconName: 'ContextMenuMicIcon',\n                styles: {\n                  root: {\n                    lineHeight: 0\n                  }\n                }\n              },\n              canCheck: true,\n              isChecked: microphone.id === selectedMicrophone?.id,\n              onClick: () => {\n                if (microphone.id !== selectedMicrophone?.id) {\n                  onSelectMicrophone(microphone);\n                }\n              }\n            }))\n          },\n          text: selectedMicrophone.name\n        }]\n      }\n    });\n  }\n  if (speakers && selectedSpeaker && onSelectSpeaker) {\n    defaultMenuProps.items.push({\n      key: 'speakers',\n      itemType: ContextualMenuItemType.Section,\n      sectionProps: {\n        title: strings.speakerMenuTitle,\n        items: [{\n          key: 'sectionSpeaker',\n          subMenuProps: {\n            calloutProps: {\n              preventDismissOnEvent\n            },\n            items: speakers.map(speaker => ({\n              key: speaker.id,\n              text: speaker.name,\n              title: speaker.name,\n              itemProps: {\n                styles: menuItemStyles\n              },\n              iconProps: {\n                iconName: 'ContextMenuSpeakerIcon',\n                styles: {\n                  root: {\n                    lineHeight: 0\n                  }\n                }\n              },\n              canCheck: true,\n              isChecked: speaker.id === selectedSpeaker?.id,\n              onClick: () => {\n                if (speaker.id !== selectedSpeaker?.id) {\n                  onSelectSpeaker(speaker);\n                }\n              }\n            }))\n          },\n          text: selectedSpeaker.name\n        }]\n      }\n    });\n  }\n  if (microphones && selectedMicrophone && onSelectMicrophone && isSelectMicAllowed && primaryActionItem) {\n    defaultMenuProps.items.push(primaryActionItem);\n  }\n  if (defaultMenuProps.items.length === 0) {\n    // Avoids creating an empty context menu.\n    return undefined;\n  }\n  return defaultMenuProps;\n};\n\n/**\n * A button to open a menu that controls device options.\n *\n * Can be used with {@link ControlBar}.\n *\n * @public\n */\nexport const DevicesButton = (props: DevicesButtonProps): JSX.Element => {\n  const {\n    onRenderIcon\n  } = props;\n  const localeStrings = useLocale().strings.devicesButton;\n  const strings = {\n    ...localeStrings,\n    ...props.strings\n  };\n  const devicesButtonMenu = props.menuProps ?? generateDefaultDeviceMenuProps({\n    ...props,\n    styles: props.styles?.menuStyles\n  }, strings);\n  const onRenderOptionsIcon = (): JSX.Element => {\n    return <_HighContrastAwareIcon disabled={props.disabled} iconName=\"ControlButtonOptions\" />;\n  };\n  return <ControlBarButton {...props} menuProps={devicesButtonMenu} menuIconProps={{\n    hidden: true\n  }} onRenderIcon={onRenderIcon ?? onRenderOptionsIcon} strings={strings} labelKey={props.labelKey ?? 'devicesButtonLabel'} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useCallback, useState, useMemo } from 'react';\nimport { useLocale } from '../localization';\nimport { VideoStreamOptions } from '../types';\nimport { ControlBarButton, ControlBarButtonProps } from './ControlBarButton';\nimport { _HighContrastAwareIcon } from './HighContrastAwareIcon';\nimport { ContextualMenuItemType, IButtonProps, IContextualMenuItem, IContextualMenuItemStyles, IContextualMenuStyles } from '@fluentui/react';\nimport { ControlBarButtonStyles } from './ControlBarButton';\nimport { OptionsDevice, generateDefaultDeviceMenuProps } from './DevicesButton';\nimport { Announcer } from './Announcer';\nconst defaultLocalVideoViewOptions = ({\n  scalingMode: 'Crop',\n  isMirrored: true\n} as VideoStreamOptions);\n\n/**\n * Strings of CameraButton that can be overridden.\n *\n * @public\n */\nexport interface CameraButtonStrings {\n  /** Label when button is on. */\n  onLabel: string;\n  /** Label when button is off. */\n  offLabel: string;\n  /** Tooltip content when the button is disabled. */\n  tooltipDisabledContent?: string;\n  /** Tooltip content when the button is on. */\n  tooltipOnContent?: string;\n  /** Tooltip content when the button is off. */\n  tooltipOffContent?: string;\n  /** Tooltip content when the button is disabled due to video loading. */\n  tooltipVideoLoadingContent?: string;\n  /**\n   * Title of camera menu\n   */\n  cameraMenuTitle: string;\n  /**\n   * Tooltip of camera menu\n   */\n  cameraMenuTooltip: string;\n  /**\n   * description of camera button split button role\n   */\n  cameraButtonSplitRoleDescription?: string;\n  /**\n   * Camera split button aria label for when button is enabled.\n   */\n  onSplitButtonAriaLabel?: string;\n  /**\n   * Camera split button aria label for when button is disabled.\n   */\n  offSplitButtonAriaLabel?: string;\n  /**\n   * Camera action turned on string for announcer\n   */\n  cameraActionTurnedOnAnnouncement?: string;\n  /**\n   * Camera action turned off string for announcer\n   */\n  cameraActionTurnedOffAnnouncement?: string;\n  /**\n   * Primary action for when the camera is turned off\n   */\n  offSplitButtonPrimaryActionCamera?: string;\n  /**\n   * Primary action for when the camera is on\n   */\n  onSplitButtonPrimaryActionCamera?: string;\n  /**\n   * Title for primary action section of split button\n   */\n  cameraPrimaryActionSplitButtonTitle?: string;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Title for video effects menu item\n   */\n  videoEffectsMenuItemTitle?: string;\n}\n\n/**\n * Styles for {@link CameraButton}\n *\n * @public\n */\nexport interface CameraButtonStyles extends ControlBarButtonStyles {\n  /**\n   * Styles for the {@link CameraButton} menu.\n   */\n  menuStyles?: Partial<CameraButtonContextualMenuStyles>;\n}\n\n/**\n * Styles for the {@link CameraButton} menu.\n *\n * @public\n */\nexport interface CameraButtonContextualMenuStyles extends IContextualMenuStyles {\n  /**\n   * Styles for the items inside the {@link CameraButton} button menu.\n   */\n  menuItemStyles?: IContextualMenuItemStyles;\n}\n/**\n * Props for {@link CameraButton} component.\n *\n * @public\n */\nexport interface CameraButtonProps extends ControlBarButtonProps {\n  /**\n   * Utility property for using this component with `communication react eventHandlers`.\n   * Maps directly to the `onClick` property.\n   */\n  onToggleCamera?: (options?: VideoStreamOptions) => Promise<void>;\n\n  /**\n   * Options for rendering local video view.\n   */\n  localVideoViewOptions?: VideoStreamOptions;\n  /**\n   * Available cameras for selection\n   */\n  cameras?: OptionsDevice[];\n  /**\n   * Camera that is shown as currently selected\n   */\n  selectedCamera?: OptionsDevice;\n  /**\n   * Callback when a camera is selected\n   */\n  onSelectCamera?: (device: OptionsDevice) => Promise<void>;\n  /**\n   * Whether to use a {@link SplitButton} with a {@link IContextualMenu} for device selection.\n   *\n   * default: false\n   */\n  enableDeviceSelectionMenu?: boolean;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<CameraButtonStrings>;\n  /**\n   * Styles for {@link CameraButton} and the device selection flyout.\n   */\n  styles?: Partial<CameraButtonStyles>;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Callback when a effects is clicked\n   */\n  onClickVideoEffects?: (showVideoEffects: boolean) => void;\n}\n\n/**\n * A button to turn camera on / off.\n *\n * Can be used with {@link ControlBar}.\n *\n * @public\n */\nexport const CameraButton = (props: CameraButtonProps): JSX.Element => {\n  const {\n    localVideoViewOptions,\n    onToggleCamera,\n    onSelectCamera\n  } = props;\n  const [waitForCamera, setWaitForCamera] = useState(false);\n  const localeStrings = useLocale().strings.cameraButton;\n  const strings = {\n    ...localeStrings,\n    ...props.strings\n  };\n  const [announcerString, setAnnouncerString] = useState<string | undefined>(undefined);\n  const disabled = props.disabled || waitForCamera;\n  const onRenderCameraOnIcon = (): JSX.Element => <_HighContrastAwareIcon disabled={disabled} iconName=\"ControlButtonCameraOn\" />;\n  const onRenderCameraOffIcon = (): JSX.Element => <_HighContrastAwareIcon disabled={disabled} iconName=\"ControlButtonCameraOff\" />;\n  if (waitForCamera && strings.tooltipVideoLoadingContent) {\n    strings.tooltipDisabledContent = strings.tooltipVideoLoadingContent;\n  }\n  const cameraOn = props.checked;\n  const splitButtonAriaString = cameraOn ? strings.onSplitButtonAriaLabel : strings.offSplitButtonAriaLabel;\n  const toggleAnnouncerString = useCallback((isCameraOn: boolean) => {\n    setAnnouncerString(!isCameraOn ? strings.cameraActionTurnedOffAnnouncement : strings.cameraActionTurnedOnAnnouncement);\n  }, [strings.cameraActionTurnedOffAnnouncement, strings.cameraActionTurnedOnAnnouncement]);\n  const onToggleClick = useCallback(async () => {\n    // Throttle click on camera, need to await onToggleCamera then allow another click\n    if (onToggleCamera) {\n      setWaitForCamera(true);\n      try {\n        await onToggleCamera(localVideoViewOptions ?? defaultLocalVideoViewOptions);\n        // allows for the setting of narrator strings triggering the announcer when camera is turned on or off.\n        toggleAnnouncerString(!cameraOn);\n      } finally {\n        setWaitForCamera(false);\n      }\n    }\n  }, [cameraOn, localVideoViewOptions, onToggleCamera, toggleAnnouncerString]);\n  const onChangeCameraClick = useCallback(async (device: OptionsDevice) => {\n    // Throttle changing camera to prevent too many callbacks\n    if (onSelectCamera) {\n      setWaitForCamera(true);\n      try {\n        await onSelectCamera(device);\n      } finally {\n        setWaitForCamera(false);\n      }\n    }\n  }, [onSelectCamera]);\n  const splitButtonMenuItems: IContextualMenuItem[] = [];\n  /* @conditional-compile-remove(video-background-effects) */\n  if (props.onClickVideoEffects) {\n    splitButtonMenuItems.push({\n      key: 'effects',\n      'data-ui-id': 'camera-split-button-video-effects',\n      text: strings.videoEffectsMenuItemTitle,\n      iconProps: {\n        iconName: 'ControlButtonVideoEffectsOption',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      onClick: () => {\n        if (props.onClickVideoEffects) {\n          props.onClickVideoEffects(true);\n        }\n      }\n    });\n  }\n  splitButtonMenuItems.push({\n    key: 'cameraPrimaryAction',\n    text: props.checked ? strings.onSplitButtonPrimaryActionCamera : strings.offSplitButtonPrimaryActionCamera,\n    onClick: () => {\n      onToggleClick();\n    },\n    iconProps: {\n      iconName: props.checked ? 'SplitButtonPrimaryActionCameraOn' : 'SplitButtonPrimaryActionCameraOff',\n      styles: {\n        root: {\n          lineHeight: 0\n        }\n      }\n    }\n  });\n  const splitButtonPrimaryAction: IContextualMenuItem = {\n    key: 'primaryAction',\n    title: 'toggle camera',\n    itemType: ContextualMenuItemType.Section,\n    sectionProps: {\n      topDivider: true,\n      items: splitButtonMenuItems\n    }\n  };\n  const splitButtonMenuProps: IButtonProps = useMemo(() => ({\n    ...props.splitButtonMenuProps,\n    className: 'camera-split-button'\n  }), [props.splitButtonMenuProps]);\n  return <>\n      <Announcer announcementString={announcerString} ariaLive={'polite'} />\n      <ControlBarButton {...props} disabled={disabled} onClick={onToggleCamera ? onToggleClick : props.onClick} onRenderOnIcon={props.onRenderOnIcon ?? onRenderCameraOnIcon} onRenderOffIcon={props.onRenderOffIcon ?? onRenderCameraOffIcon} strings={strings} labelKey={props.labelKey ?? 'cameraButtonLabel'} menuProps={props.menuProps ?? (props.enableDeviceSelectionMenu ? generateDefaultDeviceMenuProps({\n      ...props,\n      onSelectCamera: onChangeCameraClick,\n      styles: props.styles?.menuStyles\n    }, strings, splitButtonPrimaryAction) : undefined)} menuIconProps={props.menuIconProps ?? !props.enableDeviceSelectionMenu ? {\n      hidden: true\n    } : undefined} split={props.split ?? props.enableDeviceSelectionMenu} aria-roledescription={props.enableDeviceSelectionMenu ? strings.cameraButtonSplitRoleDescription : undefined} splitButtonAriaLabel={props.enableDeviceSelectionMenu ? splitButtonAriaString : undefined} splitButtonMenuProps={splitButtonMenuProps} />\n    </>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, mergeStyles, Stack } from '@fluentui/react';\nimport React, { useMemo } from 'react';\nimport { BaseCustomStyles } from '../types';\nimport { controlBarStyles } from './styles/ControlBar.styles';\nimport { useTheme } from '../theming';\nimport { isDarkThemed } from '../theming/themeUtils';\nconst mainDivStyle: IStyle = {\n  position: 'relative',\n  height: '100%',\n  width: '100%'\n};\n\n/**\n * Present layouts for the {@link ControlBar}.\n *\n * @public\n */\nexport type ControlBarLayout = 'horizontal' | 'vertical' | 'dockedTop' | 'dockedBottom' | 'dockedLeft' | 'dockedRight' | 'floatingTop' | 'floatingBottom' | 'floatingLeft' | 'floatingRight';\n\n/**\n * Props for {@link ControlBar}.\n *\n * @public\n */\nexport interface ControlBarProps {\n  /** React Child components. */\n  children?: React.ReactNode;\n  /**\n   * Allows users to pass an object containing custom CSS styles.\n   * @Example\n   * ```\n   * <ControlBar styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: BaseCustomStyles;\n  /**\n   * Changes the layout of the control bar.\n   * Available layouts are `horizontal`, `vertical`, `dockedTop`, `dockedBottom`,\n   * `dockedLeft`, `dockedRight`, `floatingTop`, `floatingBottom`, `floatingLeft`,\n   * `floatingRight`\n   * Defaults to a `horizontal` layout.\n   */\n  layout?: ControlBarLayout;\n}\n\n/**\n * A container for various buttons for call controls.\n *\n * Use with various call control buttons in this library, e.g., {@link CameraButton}, or your own instances of\n * {@link ControlBarButton} directly.\n *\n * @public\n */\nexport const ControlBar = (props: ControlBarProps): JSX.Element => {\n  const {\n    styles,\n    layout\n  } = props;\n  const theme = useTheme();\n  const controlBarClassName = useMemo(() => {\n    const controlBarStyle = controlBarStyles[layout ?? 'horizontal'];\n    // if theme is dark and layout is floating then use palette.neutralQuaternaryAlt as background, otherwise use theme.palette.white\n    const backgroundStyle = {\n      background: isDarkThemed(theme) && layout?.startsWith('floating') ? theme.palette.neutralQuaternaryAlt : theme.palette.white\n    };\n    const borderAndBoxShadowStyle = layout?.startsWith('floating') ? {\n      boxShadow: theme.effects.elevation16,\n      borderRadius: theme.effects.roundedCorner6\n    } : {};\n    // if rtl is true and layout is either floatingTop or floatingBottom then we need to override the transform-style property\n    // to translate 50% to right instead of the left\n    const transformOverrideStyle = theme.rtl && (layout === 'floatingTop' || layout === 'floatingBottom') ? {\n      transform: 'translateX(50%)'\n    } : {};\n    return mergeStyles(controlBarStyle, backgroundStyle, borderAndBoxShadowStyle, transformOverrideStyle, styles?.root);\n  }, [layout, styles?.root, theme]);\n  return <div className={mergeStyles(mainDivStyle)}>\n      <Stack className={controlBarClassName}>{props.children}</Stack>\n    </div>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, Icon } from '@fluentui/react';\nimport React from 'react';\nimport { useLocale } from '../localization';\nimport { useTheme } from '../theming';\nimport { darkTheme, lightTheme } from '../theming/themes';\nimport { isDarkThemed } from '../theming/themeUtils';\nimport { ControlBarButton, ControlBarButtonProps } from './ControlBarButton';\n\n/**\n * Strings of {@link EndCallButton} that can be overridden.\n *\n * @public\n */\nexport interface EndCallButtonStrings {\n  /**\n   * Label of button\n   */\n  label: string;\n  /** Tooltip content. */\n  tooltipContent?: string;\n}\n\n/**\n * Props for {@link EndCallButton}.\n *\n * @public\n */\nexport interface EndCallButtonProps extends ControlBarButtonProps {\n  /**\n   * Utility property for using this component with `communication react eventHandlers`.\n   * Maps directly to the `onClick` property.\n   */\n  onHangUp?: () => Promise<void>;\n\n  /**\n   * Optional strings to override in component\n   */\n  strings?: EndCallButtonStrings;\n}\nconst onRenderEndCallIcon = (): JSX.Element => <Icon iconName=\"ControlButtonEndCall\" />;\n\n/**\n * A button to end an ongoing call.\n *\n * Can be used with {@link ControlBar}.\n *\n * @public\n */\nexport const EndCallButton = (props: EndCallButtonProps): JSX.Element => {\n  const {\n    styles\n  } = props;\n  const localeStrings = useLocale().strings.endCallButton;\n  const strings = {\n    ...localeStrings,\n    ...props.strings\n  };\n  const theme = useTheme();\n  const isDarkTheme = isDarkThemed(theme);\n  const componentStyles = concatStyleSets(isDarkTheme ? darkThemeCallButtonStyles : lightThemeCallButtonStyles, styles ?? {});\n  return <ControlBarButton {...props} onClick={props.onHangUp ?? props.onClick} styles={componentStyles} onRenderIcon={props.onRenderIcon ?? onRenderEndCallIcon} strings={strings} labelKey={props.labelKey ?? 'endCallButtonLabel'} />;\n};\n// using media query to prevent windows from overwriting the button color\nconst darkThemeCallButtonStyles = {\n  root: {\n    color: darkTheme.callingPalette.iconWhite,\n    background: darkTheme.callingPalette.callRed,\n    '@media (forced-colors: active)': {\n      forcedColorAdjust: 'auto',\n      border: `1px ${lightTheme.palette?.neutralQuaternaryAlt} solid`\n    },\n    ':focus::after': {\n      outlineColor: `${darkTheme.callingPalette.iconWhite} !important`\n    } // added !important to avoid override by FluentUI button styles\n  },\n  rootHovered: {\n    color: darkTheme.callingPalette.iconWhite,\n    background: darkTheme.callingPalette.callRed,\n    '@media (forced-colors: active)': {\n      forcedColorAdjust: 'auto'\n    }\n  },\n  rootPressed: {\n    color: darkTheme.callingPalette.iconWhite,\n    background: darkTheme.callingPalette.callRed,\n    '@media (forced-colors: active)': {\n      forcedColorAdjust: 'auto'\n    }\n  },\n  label: {\n    color: darkTheme.callingPalette.iconWhite\n  }\n};\nconst lightThemeCallButtonStyles = {\n  root: {\n    color: lightTheme.callingPalette.iconWhite,\n    background: lightTheme.callingPalette.callRed,\n    '@media (forced-colors: active)': {\n      forcedColorAdjust: 'auto',\n      border: `1px ${lightTheme.palette?.neutralQuaternaryAlt} solid`\n    },\n    ':focus::after': {\n      outlineColor: `${lightTheme.callingPalette.iconWhite} !important`\n    } // added !important to avoid override by FluentUI button styles\n  },\n  rootHovered: {\n    color: lightTheme.callingPalette.iconWhite,\n    background: lightTheme.callingPalette.callRed,\n    '@media (forced-colors: active)': {\n      forcedColorAdjust: 'auto'\n    }\n  },\n  rootPressed: {\n    color: lightTheme.callingPalette.iconWhite,\n    background: lightTheme.callingPalette.callRed,\n    '@media (forced-colors: active)': {\n      forcedColorAdjust: 'auto'\n    }\n  },\n  label: {\n    color: lightTheme.callingPalette.iconWhite\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useState, useCallback } from 'react';\nimport { useLocale } from '../localization';\nimport { ControlBarButton, ControlBarButtonProps } from './ControlBarButton';\nimport { _HighContrastAwareIcon } from './HighContrastAwareIcon';\nimport { ContextualMenuItemType, IContextualMenuItem, IContextualMenuItemStyles, IContextualMenuStyles } from '@fluentui/react';\nimport { ControlBarButtonStyles } from './ControlBarButton';\nimport { OptionsDevice, generateDefaultDeviceMenuProps } from './DevicesButton';\nimport { Announcer } from './Announcer';\n\n/**\n * Strings of {@link MicrophoneButton} that can be overridden.\n *\n * @public\n */\nexport interface MicrophoneButtonStrings {\n  /** Label when button is on. */\n  onLabel: string;\n  /** Label when button is off. */\n  offLabel: string;\n  /** * Tooltip content when the button is disabled. */\n  tooltipDisabledContent?: string;\n  /** Tooltip content when the button is on. */\n  tooltipOnContent?: string;\n  /** Tooltip content when the button is off. */\n  tooltipOffContent?: string;\n  /**\n   * Title of microphone menu\n   */\n  microphoneMenuTitle?: string;\n  /**\n   * Title of speaker menu\n   */\n  speakerMenuTitle?: string;\n  /**\n   * Tooltip of microphone menu\n   */\n  microphoneMenuTooltip?: string;\n  /**\n   * Tooltip of speaker menu\n   */\n  speakerMenuTooltip?: string;\n  /**\n   * Description of microphone button split button role\n   */\n  microphoneButtonSplitRoleDescription?: string;\n  /**\n   * Microphone split button aria label when mic is enabled.\n   */\n  onSplitButtonAriaLabel?: string;\n  /**\n   * Microphone split button aria label when mic is disabled.\n   */\n  offSplitButtonAriaLabel?: string;\n  /**\n   * Microphone action turned on string for announcer\n   */\n  microphoneActionTurnedOnAnnouncement?: string;\n  /**\n   * Microphone action turned off string for announcer\n   */\n  microphoneActionTurnedOffAnnouncement?: string;\n  /**\n   * Primary action for the microphone when microphone is live.\n   */\n  onSplitButtonMicrophonePrimaryAction?: string;\n  /**\n   * Primary action for the microphone when the microphone is muted.\n   */\n  offSplitButtonMicrophonePrimaryAction?: string;\n  /**\n   * Title for primary action section of split button\n   */\n  microphonePrimaryActionSplitButtonTitle?: string;\n}\n\n/**\n * Styles for {@link MicrophoneButton}\n *\n * @public\n */\nexport interface MicrophoneButtonStyles extends ControlBarButtonStyles {\n  /**\n   * Styles for the {@link MicrophoneButton} menu.\n   */\n  menuStyles?: Partial<MicrophoneButtonContextualMenuStyles>;\n}\n\n/**\n * Styles for the {@link MicrophoneButton} menu.\n *\n * @public\n */\nexport interface MicrophoneButtonContextualMenuStyles extends IContextualMenuStyles {\n  /**\n   * Styles for the items inside the {@link MicrophoneButton} button menu.\n   */\n  menuItemStyles?: IContextualMenuItemStyles;\n}\n\n/**\n * Props for {@link MicrophoneButton}.\n *\n * @public\n */\nexport interface MicrophoneButtonProps extends ControlBarButtonProps {\n  /**\n   * Utility property for using this component with `communication react eventHandlers`.\n   * Maps directly to the `onClick` property.\n   */\n  onToggleMicrophone?: () => Promise<void>;\n  /**\n   * Available microphones for selection\n   */\n  microphones?: OptionsDevice[];\n  /**\n   * Available speakers for selection\n   */\n  speakers?: OptionsDevice[];\n  /**\n   * Microphone that is shown as currently selected\n   */\n  selectedMicrophone?: OptionsDevice;\n  /**\n   * Speaker that is shown as currently selected\n   */\n  selectedSpeaker?: OptionsDevice;\n  /**\n   * Callback when a microphone is selected\n   */\n  onSelectMicrophone?: (device: OptionsDevice) => Promise<void>;\n  /**\n   * Speaker when a speaker is selected\n   */\n  onSelectSpeaker?: (device: OptionsDevice) => Promise<void>;\n  /**\n   * Whether to use a {@link SplitButton} with a {@link IContextualMenu} for device selection.\n   *\n   * default: false\n   */\n  enableDeviceSelectionMenu?: boolean;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<MicrophoneButtonStrings>;\n  /**\n   * Styles for {@link MicrophoneButton} and the device selection flyout.\n   */\n  styles?: Partial<MicrophoneButtonStyles>;\n}\n\n/**\n * A button to turn microphone on / off.\n *\n * Can be used with {@link ControlBar}.\n *\n * @public\n */\nexport const MicrophoneButton = (props: MicrophoneButtonProps): JSX.Element => {\n  const {\n    onToggleMicrophone\n  } = props;\n  const localeStrings = useLocale().strings.microphoneButton;\n  const strings = {\n    ...localeStrings,\n    ...props.strings\n  };\n  const [announcerString, setAnnouncerString] = useState<string | undefined>(undefined);\n  const isSplit = props.split ?? props.enableDeviceSelectionMenu;\n\n  // The button should be disabled when there are no mics. However if the button is a split button, if there are\n  // no mics but there are speakers, then only the primary part of the button should be disabled to allow for\n  // speaker change.\n  const primaryDisabled = props.primaryDisabled || (isSplit && !props.microphones?.length ? true : undefined);\n  const disabled = props.disabled || isSplit && !props.microphones?.length && !props.speakers?.length || !isSplit && props.microphones && props.microphones?.length === 0;\n  const onRenderMicOnIcon = (): JSX.Element => {\n    return <_HighContrastAwareIcon disabled={disabled} iconName=\"ControlButtonMicOn\" />;\n  };\n  const onRenderMicOffIcon = (): JSX.Element => {\n    return <_HighContrastAwareIcon disabled={disabled} iconName=\"ControlButtonMicOff\" />;\n  };\n  const isMicOn = props.checked;\n  const splitButtonAriaString = isMicOn ? strings.onSplitButtonAriaLabel : strings.offSplitButtonAriaLabel;\n  const toggleAnnouncerString = useCallback((isMicOn: boolean) => {\n    setAnnouncerString(!isMicOn ? strings.microphoneActionTurnedOffAnnouncement : strings.microphoneActionTurnedOnAnnouncement);\n  }, [strings.microphoneActionTurnedOffAnnouncement, strings.microphoneActionTurnedOnAnnouncement]);\n  const onToggleClick = useCallback(async () => {\n    if (onToggleMicrophone) {\n      try {\n        await onToggleMicrophone();\n        // allows for the setting of narrator strings triggering the announcer when microphone is turned on or off.\n        toggleAnnouncerString(!isMicOn);\n        // eslint-disable-next-line no-empty\n      } finally {}\n    }\n  }, [isMicOn, onToggleMicrophone, toggleAnnouncerString]);\n\n  /**\n   * We need to also include the primary action of the button to the\n   * split button for mobile devices.\n   */\n  const splitButtonPrimaryAction: IContextualMenuItem = {\n    key: 'primaryAction',\n    title: 'toggle mic',\n    itemType: ContextualMenuItemType.Section,\n    sectionProps: {\n      topDivider: true,\n      items: [{\n        key: 'microphonePrimaryAction',\n        text: props.checked ? strings.onSplitButtonMicrophonePrimaryAction : strings.offSplitButtonMicrophonePrimaryAction,\n        onClick: () => {\n          onToggleClick();\n        },\n        iconProps: {\n          iconName: props.checked ? 'SplitButtonPrimaryActionMicUnmuted' : 'SplitButtonPrimaryActionMicMuted',\n          styles: {\n            root: {\n              lineHeight: 0\n            }\n          }\n        }\n      }]\n    }\n  };\n  return <>\n      <Announcer announcementString={announcerString} ariaLive={'polite'} />\n      <ControlBarButton {...props} onClick={props.onToggleMicrophone ? onToggleClick : props.onClick} onRenderOnIcon={props.onRenderOnIcon ?? onRenderMicOnIcon} onRenderOffIcon={props.onRenderOffIcon ?? onRenderMicOffIcon} strings={strings} labelKey={props.labelKey ?? 'microphoneButtonLabel'} menuProps={props.menuProps ?? (props.enableDeviceSelectionMenu ? generateDefaultDeviceMenuProps({\n      ...props,\n      styles: props.styles?.menuStyles\n    }, strings, splitButtonPrimaryAction) : undefined)} menuIconProps={props.menuIconProps ?? !props.enableDeviceSelectionMenu ? {\n      hidden: true\n    } : undefined} split={props.split ?? props.enableDeviceSelectionMenu} aria-roledescription={props.enableDeviceSelectionMenu ? strings.microphoneButtonSplitRoleDescription : undefined} splitButtonAriaLabel={props.enableDeviceSelectionMenu ? splitButtonAriaString : undefined} disabled={disabled} primaryDisabled={primaryDisabled} />\n    </>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ContextualMenuItemType, IContextualMenuItem, IContextualMenuProps, IContextualMenuStyles, IContextualMenuItemStyles, merge } from '@fluentui/react';\nimport { _formatString } from '@internal/acs-ui-common';\nimport copy from 'copy-to-clipboard';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { ParticipantList, ParticipantListProps, ParticipantListStyles, ParticipantMenuItemsCallback } from './ParticipantList';\nimport { participantsButtonMenuPropsStyle } from './styles/ControlBar.styles';\nimport { useLocale } from '../localization';\nimport { ControlBarButton, ControlBarButtonProps, ControlBarButtonStyles } from './ControlBarButton';\nimport { useIdentifiers } from '../identifiers';\nimport { CommunicationParticipant } from '../types/CommunicationParticipant';\nimport { OnRenderAvatarCallback } from '../types/OnRender';\nimport { ParticipantListParticipant } from '../types';\nimport { _HighContrastAwareIcon } from './HighContrastAwareIcon';\nimport { _preventDismissOnEvent as preventDismissOnEvent } from '@internal/acs-ui-common';\nimport { Announcer } from './Announcer';\n\n/**\n * Styles for the {@link ParticipantsButton} menu.\n *\n * @public\n */\nexport interface ParticipantsButtonContextualMenuStyles extends IContextualMenuStyles {\n  /** Styles for the {@link ParticipantsButton} menu items. */\n  menuItemStyles?: IContextualMenuItemStyles;\n  /** Styles for the {@link ParticipantList} menu item inside the {@link ParticipantsButton} menu. */\n  participantListStyles?: ParticipantListStyles;\n}\n\n/**\n * Styles Props for {@link ParticipantsButton}.\n *\n * @public\n */\nexport interface ParticipantsButtonStyles extends ControlBarButtonStyles {\n  /** Styles of the {@link ParticipantsButton} menu flyout */\n  menuStyles?: Partial<ParticipantsButtonContextualMenuStyles>;\n}\n\n/**\n * Strings of {@link ParticipantsButton} that can be overridden.\n *\n * @public\n */\nexport interface ParticipantsButtonStrings {\n  /**\n   * Label of button\n   */\n  label: string;\n  /**\n   * Button tooltip content.\n   */\n  tooltipContent?: string;\n  /**\n   * Header of menu pop up\n   */\n  menuHeader: string;\n  /**\n   * Label of menu button to show list of participants. Placeholders: [numParticipants]\n   */\n  participantsListButtonLabel: string;\n  /**\n   * Label of menu button to copy invite link\n   */\n  copyInviteLinkButtonLabel: string;\n  /**\n   * Label of menu button to mute all participants\n   */\n  muteAllButtonLabel: string;\n  /**\n   * Narrator announcement for when the invite link has been copied by the user to the clipboard\n   */\n  copyInviteLinkActionedAriaLabel: string;\n}\n\n/**\n * Props for {@link ParticipantsButton}.\n *\n * @public\n */\nexport interface ParticipantsButtonProps extends ControlBarButtonProps {\n  /**\n   * Participants in user call or chat\n   */\n  participants: ParticipantListParticipant[];\n  /**\n   * User ID of user\n   */\n  myUserId?: string;\n  /**\n   * If set to `true`, excludes the local participant from the participant list with use of `myUserId` props (required in this case).\n   *\n   * @defaultValue `false`\n   */\n  excludeMe?: boolean;\n  /**\n   * Callback to render each participant. If no callback is provided, each participant will be rendered with `ParticipantItem`\n   */\n  onRenderParticipant?: (participant: CommunicationParticipant) => JSX.Element | null;\n  /**\n   * Callback to render the avatar for each participant. This property will have no effect if `onRenderParticipant` is assigned.\n   */\n  onRenderAvatar?: OnRenderAvatarCallback;\n  /**\n   * Callback to render the context menu for each participant\n   */\n  onRemoveParticipant?: (userId: string) => void;\n  /**\n   * Callback to render custom menu items for each participant.\n   */\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  /**\n   * Optional callback to render a custom participant list.\n   */\n  onRenderParticipantList?: (props: ParticipantListProps) => JSX.Element | null;\n  /**\n   * Allows users to pass an object containing custom CSS styles.\n   * @Example\n   * ```\n   * <ParticipantsButton styles={{ root: { background: 'blue' } }} />\n   * ```\n   */\n  styles?: ParticipantsButtonStyles;\n  /**\n   * URL to invite new participants to the current call\n   */\n  callInvitationURL?: string;\n  /**\n   * CallBack to mute all remote participants\n   */\n  onMuteAll?: () => void;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<ParticipantsButtonStrings>;\n  /** Optional value to determine if the tooltip should be shown for participants or not */\n  showParticipantOverflowTooltip?: boolean;\n}\n\n/**\n * A button to show a menu with calling or chat participants.\n *\n * Can be used with {@link ControlBar}.\n *\n * This button contains dropdown menu items defined through its property `menuProps`. By default, it can display the number of remote participants with the full list\n * as sub-menu and an option to mute all participants, as well as a copy-to-clipboard button to copy the call invitation URL.\n * This `menuProps` can be fully redefined and its property is of type [IContextualMenuProps](https://developer.microsoft.com/fluentui#/controls/web/contextualmenu#IContextualMenuProps).\n *\n * @public\n */\nexport const ParticipantsButton = (props: ParticipantsButtonProps): JSX.Element => {\n  const {\n    callInvitationURL,\n    styles,\n    onMuteAll,\n    onRenderIcon,\n    onRenderParticipantList,\n    participants,\n    myUserId,\n    excludeMe,\n    onRenderParticipant,\n    onRenderAvatar,\n    onRemoveParticipant,\n    onFetchParticipantMenuItems,\n    showParticipantOverflowTooltip\n  } = props;\n  const disabled = props.disabled;\n  const [copyInviteLinkAnnouncerStrings, setCopyInviteLinkAnnouncerStrings] = useState<string>('');\n  const onRenderPeopleIcon = (): JSX.Element => <_HighContrastAwareIcon disabled={disabled} iconName=\"ControlButtonParticipants\" />;\n  const ids = useIdentifiers();\n  const onMuteAllCallback = useCallback(() => {\n    if (onMuteAll) {\n      onMuteAll();\n    }\n  }, [onMuteAll]);\n  const defaultParticipantList = useCallback(() => {\n    return <ParticipantList participants={participants} myUserId={myUserId} excludeMe={excludeMe} onRenderParticipant={onRenderParticipant} onRenderAvatar={onRenderAvatar} onRemoveParticipant={onRemoveParticipant} onFetchParticipantMenuItems={onFetchParticipantMenuItems} styles={styles?.menuStyles?.participantListStyles} showParticipantOverflowTooltip={showParticipantOverflowTooltip} />;\n  }, [excludeMe, myUserId, onRemoveParticipant, onRenderAvatar, onRenderParticipant, participants, styles?.menuStyles?.participantListStyles, onFetchParticipantMenuItems, showParticipantOverflowTooltip]);\n  const onCopyCallback = useCallback(() => {\n    if (callInvitationURL) {\n      return copy(callInvitationURL);\n    }\n    return false;\n  }, [callInvitationURL]);\n  const localeStrings = useLocale().strings.participantsButton;\n  const strings = useMemo(() => ({\n    ...localeStrings,\n    ...props.strings\n  }), [localeStrings, props.strings]);\n  const participantCount = participants.length;\n\n  /**\n   * sets the announcement string for when the link is copied.\n   */\n  const toggleAnnouncerString = useCallback(() => {\n    setCopyInviteLinkAnnouncerStrings(strings.copyInviteLinkActionedAriaLabel);\n    /**\n     * Clears the announcer string after the user clicks the\n     * copyInviteLink button allowing it to be re-announced.\n     */\n    setTimeout(() => {\n      setCopyInviteLinkAnnouncerStrings('');\n    }, 3000);\n  }, [strings.copyInviteLinkActionedAriaLabel]);\n  const generateDefaultParticipantsSubMenuProps = useCallback((): IContextualMenuItem[] => {\n    const items: IContextualMenuItem[] = [];\n    if (participantCount > 0) {\n      items.push({\n        key: 'participantListMenuItemKey',\n        onRender: onRenderParticipantList ?? defaultParticipantList\n      });\n      items.push({\n        key: 'participantsDivider1',\n        itemType: ContextualMenuItemType.Divider\n      });\n      if (onMuteAll) {\n        items.push({\n          key: 'muteAllKey',\n          text: strings.muteAllButtonLabel,\n          title: strings.muteAllButtonLabel,\n          styles: styles?.menuStyles?.menuItemStyles,\n          iconProps: {\n            iconName: 'MicOff2'\n          },\n          onClick: onMuteAllCallback\n        });\n      }\n    }\n    return items;\n  }, [participantCount, onRenderParticipantList, defaultParticipantList, onMuteAll, strings.muteAllButtonLabel, styles?.menuStyles?.menuItemStyles, onMuteAllCallback]);\n  const defaultMenuProps = useMemo((): IContextualMenuProps => {\n    const menuProps: IContextualMenuProps = {\n      title: strings.menuHeader,\n      ariaLabel: strings.menuHeader,\n      styles: merge(participantsButtonMenuPropsStyle, styles?.menuStyles),\n      items: [],\n      calloutProps: {\n        preventDismissOnEvent\n      }\n    };\n    if (participantCount > 0) {\n      const participantIds = participants.map(p => p.userId);\n      let participantCountWithoutMe = participantIds.length;\n      if (excludeMe) {\n        participantCountWithoutMe -= 1;\n      }\n      menuProps.items.push({\n        key: 'participantCountKey',\n        name: _formatString(strings.participantsListButtonLabel, {\n          numParticipants: `${participantCountWithoutMe}`\n        }),\n        itemProps: {\n          styles: styles?.menuStyles?.menuItemStyles\n        },\n        iconProps: {\n          iconName: 'People'\n        },\n        subMenuProps: {\n          items: generateDefaultParticipantsSubMenuProps(),\n          calloutProps: {\n            styles: {\n              root: {\n                // Confine the menu to the parents bounds.\n                // More info: https://github.com/microsoft/fluentui/issues/18835\n                maxWidth: '100%'\n              }\n            },\n            style: {\n              maxHeight: '20rem'\n            },\n            // Disable dismiss on resize to work around a couple Fluent UI bugs\n            // See reasoning in the props for the parent menu.\n            preventDismissOnEvent\n          }\n        },\n        'data-ui-id': ids.participantButtonPeopleMenuItem\n      });\n    }\n    if (callInvitationURL) {\n      menuProps.items.push({\n        key: 'InviteLinkKey',\n        name: strings.copyInviteLinkButtonLabel,\n        title: strings.copyInviteLinkButtonLabel,\n        itemProps: {\n          styles: styles?.menuStyles?.menuItemStyles\n        },\n        iconProps: {\n          iconName: 'Link'\n        },\n        onClick: () => {\n          onCopyCallback();\n          toggleAnnouncerString();\n        }\n      });\n    }\n    return menuProps;\n  }, [strings.menuHeader, strings.participantsListButtonLabel, strings.copyInviteLinkButtonLabel, styles?.menuStyles, participantCount, callInvitationURL, participants, excludeMe, ids.participantButtonPeopleMenuItem, generateDefaultParticipantsSubMenuProps, onCopyCallback, toggleAnnouncerString]);\n  return <>\n      <Announcer announcementString={copyInviteLinkAnnouncerStrings} ariaLive={'polite'} />\n      <ControlBarButton {...props} disabled={disabled} menuProps={props.menuProps ?? defaultMenuProps} menuIconProps={{\n      hidden: true\n    }} onRenderIcon={onRenderIcon ?? onRenderPeopleIcon} strings={strings} labelKey={props.labelKey ?? 'participantsButtonLabel'} />\n    </>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { useLocale } from '../localization';\nimport { ControlBarButton, ControlBarButtonProps } from './ControlBarButton';\nimport { DefaultPalette, IButtonStyles, mergeStyles, Theme, useTheme } from '@fluentui/react';\nimport { _HighContrastAwareIcon } from './HighContrastAwareIcon';\n\n/**\n * Strings of {@link ScreenShareButton} that can be overridden.\n *\n * @public\n */\nexport interface ScreenShareButtonStrings {\n  /** Label when button is on. */\n  onLabel: string;\n  /** Label when button is off. */\n  offLabel: string;\n  /** * Tooltip content when the button is disabled. */\n  tooltipDisabledContent?: string;\n  /** Tooltip content when the button is on. */\n  tooltipOnContent?: string;\n  /** Tooltip content when the button is off. */\n  tooltipOffContent?: string;\n}\n\n/**\n * Props for {@link ScreenShareButton}.\n *\n * @public\n */\nexport interface ScreenShareButtonProps extends ControlBarButtonProps {\n  /**\n   * Utility property for using this component with `communication react eventHandlers`.\n   * Maps directly to the `onClick` property.\n   */\n  onToggleScreenShare?: () => Promise<void>;\n\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<ScreenShareButtonStrings>;\n}\n\n/**\n * A button to start / stop screen sharing.\n *\n * Can be used with {@link ControlBar}.\n *\n * @public\n */\nexport const ScreenShareButton = (props: ScreenShareButtonProps): JSX.Element => {\n  const localeStrings = useLocale().strings.screenShareButton;\n  const strings = {\n    ...localeStrings,\n    ...props.strings\n  };\n  const theme = useTheme();\n  const styles = screenshareButtonStyles(theme);\n  const onRenderScreenShareOnIcon = (): JSX.Element => <_HighContrastAwareIcon disabled={props.disabled} iconName=\"ControlButtonScreenShareStop\" />;\n  const onRenderScreenShareOffIcon = (): JSX.Element => <_HighContrastAwareIcon disabled={props.disabled} iconName=\"ControlButtonScreenShareStart\" />;\n  return <ControlBarButton {...props} className={mergeStyles(styles, props.styles)} onClick={props.onToggleScreenShare ?? props.onClick} onRenderOnIcon={props.onRenderOnIcon ?? onRenderScreenShareOnIcon} onRenderOffIcon={props.onRenderOffIcon ?? onRenderScreenShareOffIcon} strings={strings} labelKey={props.labelKey ?? 'screenShareButtonLabel'} disabled={props.disabled} />;\n};\nconst screenshareButtonStyles = (theme: Theme): IButtonStyles => ({\n  rootChecked: {\n    background: theme.palette.themePrimary,\n    color: DefaultPalette.white,\n    ':focus::after': {\n      outlineColor: `${DefaultPalette.white} !important`\n    },\n    // added !important to avoid override by FluentUI button styles\n    '@media (forced-colors: active)': {\n      border: '1px solid',\n      borderColor: theme.palette.black\n    }\n  },\n  rootCheckedHovered: {\n    background: theme.palette.themePrimary,\n    color: DefaultPalette.white,\n    ':focus::after': {\n      outlineColor: `${DefaultPalette.white} !important`\n    },\n    // added !important to avoid override by FluentUI button styles\n    '@media (forced-colors: active)': {\n      border: '1px solid',\n      borderColor: theme.palette.black\n    }\n  },\n  labelChecked: {\n    color: DefaultPalette.white\n  }\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(raise-hand) */\nimport React from 'react';\n/* @conditional-compile-remove(raise-hand) */\nimport { useLocale } from '../localization';\n/* @conditional-compile-remove(raise-hand) */\nimport { ControlBarButton, ControlBarButtonProps } from './ControlBarButton';\n/* @conditional-compile-remove(raise-hand) */\nimport { DefaultPalette, IButtonStyles, mergeStyles, Theme, useTheme } from '@fluentui/react';\n/* @conditional-compile-remove(raise-hand) */\nimport { _HighContrastAwareIcon } from './HighContrastAwareIcon';\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * Strings of {@link RaiseHandButton} that can be overridden.\n *\n * @public\n */\nexport interface RaiseHandButtonStrings {\n  /** Label when button is on. */\n  onLabel: string;\n  /** Label when button is off. */\n  offLabel: string;\n  /** * Tooltip content when the button is disabled. */\n  tooltipDisabledContent?: string;\n  /** Tooltip content when the button is on. */\n  tooltipOnContent?: string;\n  /** Tooltip content when the button is off. */\n  tooltipOffContent?: string;\n}\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * Props for {@link RaiseHandButton}.\n *\n * @public\n */\nexport interface RaiseHandButtonProps extends ControlBarButtonProps {\n  /**\n   * Utility property for using this component with `communication react eventHandlers`.\n   * Maps directly to the `onClick` property.\n   */\n  onToggleRaiseHand?: () => Promise<void>;\n\n  /**\n   * Optional strings to override in component\n   */\n  strings?: Partial<RaiseHandButtonStrings>;\n}\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * A button to start / stop screen sharing.\n *\n * Can be used with {@link ControlBar}.\n *\n * @public\n */\nexport const RaiseHandButton = (props: RaiseHandButtonProps): JSX.Element => {\n  const localeStrings = useLocale().strings.raiseHandButton;\n  const strings = {\n    ...localeStrings,\n    ...props.strings\n  };\n  const theme = useTheme();\n  const styles = raiseHandButtonStyles(theme);\n  const onRenderRaiseHandIcon = (): JSX.Element => <_HighContrastAwareIcon disabled={props.disabled} iconName=\"ControlButtonRaiseHand\" />;\n  const onRenderLowerHandIcon = (): JSX.Element => <_HighContrastAwareIcon disabled={props.disabled} iconName=\"ControlButtonLowerHand\" />;\n  return <ControlBarButton {...props} className={mergeStyles(styles, props.styles)} onClick={props.onToggleRaiseHand ?? props.onClick} onRenderOnIcon={props.onRenderOnIcon ?? onRenderLowerHandIcon} onRenderOffIcon={props.onRenderOffIcon ?? onRenderRaiseHandIcon} strings={strings} labelKey={props.labelKey ?? 'raiseHandButtonLabel'} disabled={props.disabled} />;\n};\n\n/* @conditional-compile-remove(raise-hand) */\nconst raiseHandButtonStyles = (theme: Theme): IButtonStyles => ({\n  rootChecked: {\n    background: theme.palette.themePrimary,\n    color: DefaultPalette.white,\n    ':focus::after': {\n      outlineColor: `${DefaultPalette.white}`\n    }\n  },\n  rootCheckedHovered: {\n    background: theme.palette.themePrimary,\n    color: DefaultPalette.white,\n    ':focus::after': {\n      outlineColor: `${DefaultPalette.white}`\n    }\n  },\n  labelChecked: {\n    color: DefaultPalette.white\n  }\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles, memoizeFunction, Stack } from '@fluentui/react';\nimport React, { ReactElement, PropsWithChildren } from 'react';\nimport { useTheme } from '../../theming/FluentThemeProvider';\n\n/** @internal */\nexport type _TileOrientation = 'portrait' | 'landscape';\n\n/** @internal */\nexport type _PictureInPictureInPictureTileProps = PropsWithChildren<{\n  orientation: _TileOrientation;\n}>;\n\n/** @private */\nexport const PictureInPictureInPicturePrimaryTile = (props: _PictureInPictureInPictureTileProps): ReactElement => {\n  const boxShadow = useTheme().effects.elevation8;\n  return <PictureInPictureInPictureTile styles={primaryTileStyles(props.orientation, boxShadow)}>\n      {props.children}\n    </PictureInPictureInPictureTile>;\n};\n\n/** @private */\nexport const PictureInPictureInPictureSecondaryTile = (props: _PictureInPictureInPictureTileProps): ReactElement => <PictureInPictureInPictureTile styles={secondaryTileStyles(props.orientation)}>\n    {props.children}\n  </PictureInPictureInPictureTile>;\nconst PictureInPictureInPictureTile = (props: PropsWithChildren<{\n  styles: IStackStyles;\n}>): ReactElement => <Stack styles={props.styles}>{props.children}</Stack>;\nconst primaryTileStyles = memoizeFunction((orientation: _TileOrientation, themeElevation: string): IStackStyles => ({\n  root: {\n    borderRadius: '0.25rem',\n    height: orientation === 'landscape' ? '5.5rem' : '8rem',\n    width: orientation === 'landscape' ? '8rem' : '5.5rem',\n    boxShadow: themeElevation,\n    // PiPiP tiles were not designed to host scrollable content. If removed check no scrollbar is showing in e2e tests\n    overflow: 'hidden'\n  }\n}));\nconst secondaryTileStyles = memoizeFunction((orientation: _TileOrientation): IStackStyles => ({\n  root: {\n    borderRadius: '0.25rem',\n    height: orientation === 'landscape' ? '1.625rem' : '2rem',\n    width: orientation === 'landscape' ? '2rem' : '1.625rem',\n    // PiPiP tiles were not designed to host scrollable content. If removed check no scrollbar is showing in e2e tests\n    overflow: 'hidden'\n  }\n}));","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { ReactChild } from 'react';\nimport { submitWithKeyboard } from '../utils/keyboardNavigation';\nimport { PictureInPictureInPicturePrimaryTile, PictureInPictureInPictureSecondaryTile, _PictureInPictureInPictureTileProps } from './PictureInPictureInPictureTile';\n\n/**\n * Strings of {@link _PictureInPictureInPicture} that can be overridden.\n *\n * @internal\n */\nexport interface _PictureInPictureInPictureStrings {\n  /** Aria-label for the focusable root of the PictureInPictureInPicture component. */\n  rootAriaLabel: string;\n}\n\n/**\n * Props for {@link _PictureInPictureInPicture} component.\n *\n * @internal\n */\nexport interface _PictureInPictureInPictureProps {\n  /**\n   * Callback when the {@link _PictureInPictureInPicture} is clicked.\n   */\n  onClick?: () => void;\n  primaryTile: _PictureInPictureInPictureTileProps;\n  secondaryTile?: _PictureInPictureInPictureTileProps;\n  strings: _PictureInPictureInPictureStrings;\n}\n\n/**\n * Component that displays a video feed for use as a Picture-in-Picture style component.\n * It contains a secondary video feed resulting in an inner Picture-in-Picture style feed.\n *\n * @remarks\n * The double nature of the Picture-in-Picture styles is where this component gets its name; Picture-in-Picture-in-Picture.\n *\n * @internal\n */\nexport const _PictureInPictureInPicture = (props: _PictureInPictureInPictureProps): JSX.Element => {\n  return <PictureInPictureInPictureContainer onClick={props.onClick} primaryView={<PictureInPictureInPicturePrimaryTile {...props.primaryTile} />} secondaryView={props.secondaryTile && <PictureInPictureInPictureSecondaryTile {...props.secondaryTile} />} ariaLabel={props.strings.rootAriaLabel} />;\n};\n/**\n * Container for the picture in picture in picture component.\n * This governs positioning and floating of the secondary PiP.\n */\nconst PictureInPictureInPictureContainer = (props: {\n  primaryView: ReactChild;\n  secondaryView?: ReactChild;\n  onClick?: () => void;\n  ariaLabel: string;\n}): JSX.Element => {\n  const onKeyPress = (e: React.KeyboardEvent<HTMLElement>): void => props.onClick && submitWithKeyboard(e, props.onClick);\n  return <aside style={tileContainerStyles} onClick={props.onClick} onKeyPress={onKeyPress} aria-label={props.ariaLabel} tabIndex={props.onClick ? 0 : -1} // Only allow focus to be set if there is a click handler\n  data-ui-id=\"picture-in-picture-in-picture-root\">\n      {props.primaryView}\n      <div style={secondaryTileFloatingStyles}>{props.secondaryView}</div>\n    </aside>;\n};\nconst tileContainerStyles: React.CSSProperties = {\n  display: 'flex',\n  width: 'min-content',\n  position: 'relative',\n  cursor: 'pointer'\n};\nconst secondaryTileFloatingStyles: React.CSSProperties = {\n  // The secondary tile should float above the primary tile, aligned to the bottom right.\n  position: 'absolute',\n  bottom: '0.125rem',\n  right: '0.125rem'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles, Stack } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\nimport React from 'react';\n\n/**\n * @internal\n * Props for `_FileCardGroup` component.\n */\nexport interface _FileCardGroupProps {\n  children: React.ReactNode;\n  ariaLabel?: string;\n}\n\n/**\n * Note: If we use stack tokens.childrenGap, when child elements are wrapped and moved to the next line,\n * an extra margin is added to the left of each line.\n * This is a workaround to avoid this issue.\n */\n\nconst fileCardGroupClassName = mergeStyles({\n  flexFlow: 'row wrap',\n  '& > *': {\n    margin: _pxToRem(2)\n  },\n  /**\n   * margin for children is overriden by parent stack, so adding left margin for each child\n   */\n  '& > *:not(:first-child)': {\n    marginLeft: _pxToRem(2)\n  }\n});\n\n/**\n * @internal\n * Used with `_FileCard` component where `_FileCard` components are passed as children.\n * Renders the children equally spaced in multiple rows.\n */\nexport const _FileCardGroup = (props: _FileCardGroupProps): JSX.Element => {\n  const {\n    children,\n    ariaLabel\n  } = props;\n  if (!children) {\n    return <></>;\n  }\n  return <Stack horizontal className={fileCardGroupClassName} aria-label={ariaLabel}>\n      {children}\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const iconButtonClassName = mergeStyles({\n  color: 'unset',\n  width: '1rem',\n  height: '1rem',\n  background: 'transparent',\n  ':hover': {\n    color: 'unset',\n    background: 'transparent'\n  }\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Icon, IconButton, Spinner, SpinnerSize, TooltipHost } from '@fluentui/react';\nimport React, { useCallback, useState } from 'react';\nimport { useMemo } from 'react';\nimport { _FileCard } from './FileCard';\nimport { _FileCardGroup } from './FileCardGroup';\nimport { iconButtonClassName } from './styles/IconButton.styles';\nimport { _formatString } from '@internal/acs-ui-common';\n\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n/**\n * Represents the type of attachment\n * @public\n */\nexport type ChatAttachmentType = 'unknown' | /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */'image';\n\n/**\n * Metadata containing basic information about the uploaded file.\n *\n * @beta\n */\nexport interface AttachmentMetadata {\n  /**\n   * Extension hint, useful for rendering a specific icon.\n   * An unknown or empty extension will be rendered as a generic icon.\n   * Example: `pdf`\n   */\n  extension: string;\n  /**\n   * Unique ID of the file.\n   */\n  /**\n   * File name to be displayed.\n   */\n  name: string;\n  /**\n   * Download URL for the file.\n   */\n  url: string;\n}\n\n/**\n * Strings of _FileDownloadCards that can be overridden.\n *\n * @internal\n */\nexport interface _FileDownloadCardsStrings {\n  /** Aria label to notify user when focus is on file download button. */\n  downloadFile: string;\n  fileCardGroupMessage: string;\n}\n\n/**\n * @beta\n * A file download error returned via a {@link FileDownloadHandler}.\n * This error message is used to render an error message in the UI.\n */\nexport interface FileDownloadError {\n  /** The error message to display in the UI */\n  errorMessage: string;\n}\n\n/**\n * @beta\n *\n * A callback function for handling file downloads.\n * The function needs to return a promise that resolves to a file download URL.\n * If the promise is rejected, the {@link Error.message} will be used to display an error message to the user.\n *\n * @example\n * ```ts\n * const fileDownloadHandler: FileDownloadHandler = async (userId, fileData) => {\n *   if (isUnauthorizedUser(userId)) {\n *     return { errorMessage: 'You dont have permission to download this file.' };\n *   } else {\n *     return new URL(fileData.url);\n *   }\n * }\n *\n * const App = () => (\n *   <ChatComposite\n *     ...\n *     fileSharing={{\n *       fileDownloadHandler: fileDownloadHandler\n *     }}\n *   />\n * )\n *\n * ```\n * @param userId - The user ID of the user downloading the file.\n * @param fileMetadata - The {@link AttachmentMetadata} containing file `url`, `extension` and `name`.\n */\nexport type FileDownloadHandler = (userId: string, fileMetadata: AttachmentMetadata) => Promise<URL | FileDownloadError>;\n\n/**\n * @internal\n */\nexport interface _FileDownloadCardsProps {\n  /**\n   * User id of the local participant\n   */\n  userId: string;\n  /**\n   * A chat message metadata that includes file metadata\n   */\n  fileMetadata?: AttachmentMetadata[];\n  /**\n   * A function of type {@link FileDownloadHandler} for handling file downloads.\n   * If the function is not specified, the file's `url` will be opened in a new tab to\n   * initiate the download.\n   */\n  downloadHandler?: FileDownloadHandler;\n  /**\n   * Optional callback that runs if downloadHandler returns {@link FileDownloadError}.\n   */\n  onDownloadErrorMessage?: (errMsg: string) => void;\n  /**\n   * Optional aria label strings for file download cards\n   */\n  strings?: _FileDownloadCardsStrings;\n}\nconst fileDownloadCardsStyle = {\n  marginTop: '0.25rem'\n};\nconst actionIconStyle = {\n  height: '1rem'\n};\n\n/**\n * @internal\n */\nexport const _FileDownloadCards = (props: _FileDownloadCardsProps): JSX.Element => {\n  const {\n    userId,\n    fileMetadata\n  } = props;\n  const [showSpinner, setShowSpinner] = useState(false);\n  const localeStrings = useLocaleStringsTrampoline();\n  const downloadFileButtonString = useMemo(() => () => {\n    return props.strings?.downloadFile ?? localeStrings.downloadFile;\n  }, [props.strings?.downloadFile, localeStrings.downloadFile]);\n\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  const isShowDownloadIcon = useCallback((attachment: AttachmentMetadata): boolean => {\n    return true;\n  }, []);\n  const fileCardGroupDescription = useMemo(() => () => {\n    const fileGroupLocaleString = props.strings?.fileCardGroupMessage ?? localeStrings.fileCardGroupMessage;\n    return _formatString(fileGroupLocaleString, {\n      fileCount: `${fileMetadata?.length ?? 0}`\n    });\n  }, [props.strings?.fileCardGroupMessage, localeStrings.fileCardGroupMessage, fileMetadata]);\n  const fileDownloadHandler = useCallback(async (userId: string, file: AttachmentMetadata) => {\n    if (!props.downloadHandler) {\n      window.open(file.url, '_blank', 'noopener,noreferrer');\n    } else {\n      setShowSpinner(true);\n      try {\n        const response = await props.downloadHandler(userId, file);\n        setShowSpinner(false);\n        if (response instanceof URL) {\n          window.open(response.toString(), '_blank', 'noopener,noreferrer');\n        } else {\n          props.onDownloadErrorMessage && props.onDownloadErrorMessage(response.errorMessage);\n        }\n      } finally {\n        setShowSpinner(false);\n      }\n    }\n  }, [props]);\n  if (!fileMetadata || fileMetadata.length === 0 || /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */!fileMetadata) {\n    return <></>;\n  }\n  return <div style={fileDownloadCardsStyle} data-ui-id=\"file-download-card-group\">\n      <_FileCardGroup ariaLabel={fileCardGroupDescription()}>\n        {fileMetadata && fileMetadata.map(file => <TooltipHost content={downloadFileButtonString()} key={file.name}>\n              <_FileCard fileName={file.name} key={file.name} fileExtension={file.extension} actionIcon={showSpinner ? <Spinner size={SpinnerSize.medium} aria-live={'polite'} role={'status'} /> : true && /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */isShowDownloadIcon(file) ? <IconButton className={iconButtonClassName} ariaLabel={downloadFileButtonString()}>\n                      <DownloadIconTrampoline />\n                    </IconButton> : undefined} actionHandler={() => fileDownloadHandler(userId, file)} />\n            </TooltipHost>)}\n      </_FileCardGroup>\n    </div>;\n};\n\n/**\n * @private\n */\nconst DownloadIconTrampoline = (): JSX.Element => {\n  // Return _some_ available icon, as the real icon is beta-only.\n  return <Icon iconName=\"EditBoxCancel\" style={actionIconStyle} />;\n};\nconst useLocaleStringsTrampoline = (): _FileDownloadCardsStrings => {\n  return {\n    downloadFile: '',\n    fileCardGroupMessage: ''\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @private\n */\nexport type ComplianceState = 'on' | 'off' | 'stopped';\n\n/**\n * Return different conditions based on the current and previous state of recording and transcribing\n *\n * @param callRecordState - The current call record state: on, off, stopped\n * @param callTranscribeState - The current call transcribe state: on, off, stopped\n *\n * @remarks - The stopped state means: previously on but currently off\n *\n * @private\n */\nexport const computeVariant = (callRecordState: ComplianceState, callTranscribeState: ComplianceState): ComplianceBannerVariant => {\n  if (callRecordState === 'on' && callTranscribeState === 'on') {\n    return 'RECORDING_AND_TRANSCRIPTION_STARTED';\n  } else if (callRecordState === 'on' && callTranscribeState === 'off') {\n    return 'RECORDING_STARTED';\n  } else if (callRecordState === 'off' && callTranscribeState === 'on') {\n    return 'TRANSCRIPTION_STARTED';\n  } else if (callRecordState === 'on' && callTranscribeState === 'stopped') {\n    return 'TRANSCRIPTION_STOPPED_STILL_RECORDING';\n  } else if (callRecordState === 'stopped' && callTranscribeState === 'on') {\n    return 'RECORDING_STOPPED_STILL_TRANSCRIBING';\n  } else if (callRecordState === 'off' && callTranscribeState === 'stopped') {\n    return 'TRANSCRIPTION_STOPPED';\n  } else if (callRecordState === 'stopped' && callTranscribeState === 'off') {\n    return 'RECORDING_STOPPED';\n  } else if (callRecordState === 'stopped' && callTranscribeState === 'stopped') {\n    return 'RECORDING_AND_TRANSCRIPTION_STOPPED';\n  } else {\n    return 'NO_STATE';\n  }\n};\n\n/**\n * @private\n */\nexport type ComplianceBannerVariant = 'NO_STATE' | 'TRANSCRIPTION_STOPPED_STILL_RECORDING' | 'RECORDING_STOPPED_STILL_TRANSCRIBING' | 'RECORDING_AND_TRANSCRIPTION_STOPPED' | 'RECORDING_AND_TRANSCRIPTION_STARTED' | 'TRANSCRIPTION_STARTED' | 'RECORDING_STOPPED' | 'RECORDING_STARTED' | 'TRANSCRIPTION_STOPPED';","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Link } from '@fluentui/react';\nimport React from 'react';\nimport { _ComplianceBannerStrings } from './types';\nimport { ComplianceBannerVariant } from './Utils';\n\n/** @private */\nexport function BannerMessage(props: {\n  variant: ComplianceBannerVariant;\n  strings: _ComplianceBannerStrings;\n}): JSX.Element {\n  const {\n    variant,\n    strings\n  } = props;\n  switch (variant) {\n    case 'TRANSCRIPTION_STOPPED_STILL_RECORDING':\n      return <>\n          <b>{strings.complianceBannerTranscriptionStopped}</b>\n          {` ${strings.complianceBannerNowOnlyRecording}`}\n          <PrivacyPolicy linkText={strings.privacyPolicy} />\n        </>;\n    case 'RECORDING_STOPPED_STILL_TRANSCRIBING':\n      return <>\n          <b>{strings.complianceBannerRecordingStopped}</b>\n          {` ${strings.complianceBannerNowOnlyTranscription}`}\n          <PrivacyPolicy linkText={strings.privacyPolicy} />\n        </>;\n    case 'RECORDING_AND_TRANSCRIPTION_STOPPED':\n      return <>\n          <b>{strings.complianceBannerRecordingAndTranscriptionSaved}</b>\n          {` ${strings.complianceBannerRecordingAndTranscriptionStopped}`}\n          <LearnMore linkText={strings.learnMore} />\n        </>;\n    case 'RECORDING_AND_TRANSCRIPTION_STARTED':\n      return <>\n          <b>{strings.complianceBannerRecordingAndTranscriptionStarted}</b>\n          {` ${strings.complianceBannerTranscriptionConsent}`}\n          <PrivacyPolicy linkText={strings.privacyPolicy} />\n        </>;\n    case 'TRANSCRIPTION_STARTED':\n      return <>\n          <b>{strings.complianceBannerTranscriptionStarted}</b>\n          {` ${strings.complianceBannerTranscriptionConsent}`}\n          <PrivacyPolicy linkText={strings.privacyPolicy} />\n        </>;\n    case 'RECORDING_STOPPED':\n      return <>\n          <b>{strings.complianceBannerRecordingSaving}</b>\n          {` ${strings.complianceBannerRecordingStopped}`}\n          <LearnMore linkText={strings.learnMore} />\n        </>;\n    case 'RECORDING_STARTED':\n      return <>\n          <b>{strings.complianceBannerRecordingStarted}</b>\n          {` ${strings.complianceBannerTranscriptionConsent}`}\n          <PrivacyPolicy linkText={strings.privacyPolicy} />\n        </>;\n    case 'TRANSCRIPTION_STOPPED':\n      return <>\n          <b>{strings.complianceBannerTranscriptionSaving}</b>\n          {` ${strings.complianceBannerTranscriptionStopped}`}\n          <LearnMore linkText={strings.learnMore} />\n        </>;\n  }\n  return <></>;\n}\nfunction PrivacyPolicy(props: {\n  linkText: string;\n}): JSX.Element {\n  return <Link href=\"https://privacy.microsoft.com/privacystatement#mainnoticetoendusersmodule\" target=\"_blank\" underline>\n      {props.linkText}\n    </Link>;\n}\nfunction LearnMore(props: {\n  linkText: string;\n}): JSX.Element {\n  return <Link href=\"https://support.microsoft.com/office/record-a-meeting-in-teams-34dfbe7f-b07d-4a27-b4c6-de62f1348c24\" target=\"_blank\" underline>\n      {props.linkText}\n    </Link>;\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { MessageBar, MessageBarType } from '@fluentui/react';\nimport React, { useRef, useState } from 'react';\nimport { BannerMessage } from './BannerMessage';\nimport { _ComplianceBannerStrings } from './types';\nimport { ComplianceBannerVariant } from './Utils';\nconst BANNER_OVERWRITE_DELAY_MS = 3000;\n\n/** @private */\nexport interface TimestampedVariant {\n  variant: ComplianceBannerVariant;\n  // Milliseconds since epoch (i.e., return value of Date.now()).\n  lastUpdated: number;\n}\n\n/**\n * Shows a {@link BannerMessage} in a {@link MessageBar} tracking `variant` internally.\n *\n * This component delays and combines frequent updates to `variant` such that:\n * - Updates that happen within {@link BANNER_OVERWRITE_DELAY_MS} are delayed.\n * - Once {@link BANNER_OVERWRITE_DELAY_MS} has passed since the last update, the _latest_ pending update is shown.\n *\n * This ensures that there is enough time for the user to see a banner message before it is overwritten.\n * In case of multiple delayed messages, the user always sees the final message as it reflects the final state\n * of recording and transcription.\n *\n * @private\n */\nexport function DelayedUpdateBanner(props: {\n  variant: TimestampedVariant;\n  onDismiss: () => void;\n  strings: _ComplianceBannerStrings;\n}): JSX.Element {\n  const {\n    variant,\n    lastUpdated: variantLastUpdated\n  } = props.variant;\n\n  // Tracks the variant that is currently visible in the UI.\n  const [visible, setVisible] = useState<TimestampedVariant>({\n    variant,\n    lastUpdated: Date.now()\n  });\n  const pendingUpdateHandle = useRef<ReturnType<typeof setTimeout> | null>(null);\n  if (variant !== visible.variant && variantLastUpdated > visible.lastUpdated) {\n    // Always clear pending updates.\n    // We'll either update now, or schedule an update for later.\n    if (pendingUpdateHandle.current) {\n      clearTimeout(pendingUpdateHandle.current);\n    }\n    const now = Date.now();\n    const timeToNextUpdate = BANNER_OVERWRITE_DELAY_MS - (now - visible.lastUpdated);\n    if (variant === 'NO_STATE' || timeToNextUpdate <= 0) {\n      setVisible({\n        variant,\n        lastUpdated: now\n      });\n    } else {\n      pendingUpdateHandle.current = setTimeout(() => {\n        // Set the actual update time, not the computed time when the update should happen.\n        // The actual update might be later than we planned.\n        setVisible({\n          variant,\n          lastUpdated: Date.now()\n        });\n      }, timeToNextUpdate);\n    }\n  }\n  if (visible.variant === 'NO_STATE') {\n    return <></>;\n  }\n  return <MessageBar messageBarType={MessageBarType.warning} onDismiss={() => {\n    // when closing the banner, change variant to nostate and change stopped state to off state.\n    // Reason: on banner close, going back to the default state.\n    setVisible({\n      variant: 'NO_STATE',\n      lastUpdated: Date.now()\n    });\n    props.onDismiss();\n  }} dismissButtonAriaLabel={props.strings.close}>\n      <BannerMessage variant={visible.variant} strings={props.strings} />\n    </MessageBar>;\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useRef } from 'react';\nimport { ComplianceState, computeVariant } from './Utils';\nimport { _ComplianceBannerProps } from './types';\nimport { DelayedUpdateBanner } from './DelayedUpdateBanner';\n\n// latestBooleanState so we can compare with props.callRecordState and props.callTranscribeState easily\n// latestStringState is on, off, stopped state generated by function determineStates using previous and current state values, this is used for computeVariants later\ntype CachedComplianceBannerProps = {\n  latestBooleanState: {\n    callTranscribeState?: boolean;\n    callRecordState?: boolean;\n  };\n  latestStringState: {\n    callTranscribeState: ComplianceState;\n    callRecordState: ComplianceState;\n  };\n  // Timestamp for the last time cached state was updated.\n  // Represented as milliseconds since epoch (i.e., the value returned by Date.now()).\n  lastUpdated: number;\n};\n\n/**\n * A component that displays banners to notify the user when call recording and\n * transcription is enabled or disabled in a call.\n *\n * This component implements a state machine that tracks the changes to call\n * recording and transcription state and shows the corresponding message.\n *\n * @internal\n */\nexport const _ComplianceBanner = (props: _ComplianceBannerProps): JSX.Element => {\n  const cachedProps = useRef<CachedComplianceBannerProps>({\n    latestBooleanState: {\n      callTranscribeState: false,\n      callRecordState: false\n    },\n    latestStringState: {\n      callTranscribeState: 'off',\n      callRecordState: 'off'\n    },\n    lastUpdated: Date.now()\n  });\n\n  // Only update cached props and variant if there is _some_ change in the latest props.\n  // This ensures that state machine is only updated if there is an actual change in the props.\n  const shouldUpdateCached = props.callRecordState !== cachedProps.current.latestBooleanState.callRecordState || props.callTranscribeState !== cachedProps.current.latestBooleanState.callTranscribeState;\n\n  // The following three operations must be performed in this exact order:\n\n  // [1]: Update cached state to transition the state machine.\n  if (shouldUpdateCached) {\n    cachedProps.current = {\n      latestBooleanState: props,\n      latestStringState: {\n        callRecordState: determineStates(cachedProps.current.latestStringState.callRecordState, props.callRecordState),\n        callTranscribeState: determineStates(cachedProps.current.latestStringState.callTranscribeState, props.callTranscribeState)\n      },\n      lastUpdated: Date.now()\n    };\n  }\n\n  // [2]: Compute the variant, using the transitioned state machine.\n  const variant = computeVariant(cachedProps.current.latestStringState.callRecordState, cachedProps.current.latestStringState.callTranscribeState);\n\n  // [3]: Transition the state machine again to deal with some end-states.\n  if (shouldUpdateCached && cachedProps.current.latestStringState.callRecordState === 'stopped' && cachedProps.current.latestStringState.callTranscribeState === 'stopped') {\n    // When both states are stopped, after displaying message \"RECORDING_AND_TRANSCRIPTION_STOPPED\", change both states to off (going back to the default state).\n    cachedProps.current.latestStringState.callRecordState = 'off';\n    cachedProps.current.latestStringState.callTranscribeState = 'off';\n  }\n  return <DelayedUpdateBanner variant={{\n    variant,\n    lastUpdated: cachedProps.current.lastUpdated\n  }} strings={props.strings} onDismiss={() => {\n    if (cachedProps.current.latestStringState.callRecordState === 'stopped') {\n      cachedProps.current.latestStringState.callRecordState = 'off';\n    }\n    if (cachedProps.current.latestStringState.callTranscribeState === 'stopped') {\n      cachedProps.current.latestStringState.callTranscribeState = 'off';\n    }\n  }} />;\n};\nfunction determineStates(previous: ComplianceState, current: boolean | undefined): ComplianceState {\n  // if current state is on, then return on\n  if (current) {\n    return 'on';\n  }\n  // if current state is off\n  else {\n    // if previous state is on and current state is off, return stopped (on -> off)\n    if (previous === 'on') {\n      return 'stopped';\n    }\n    // otherwise remain previous state unchanged\n    else {\n      return previous;\n    }\n  }\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\nimport { IButtonStyles, IStyle, ITextFieldStyles, Theme } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\n\n/**\n * @private\n */\nexport const containerStyles = (theme: Theme): IStyle => {\n  return {\n    maxWidth: '16rem',\n    textAlign: 'center',\n    background: `${theme.palette.white}`,\n    borderRadius: '0.75rem',\n    margin: 'auto'\n  };\n};\n\n/**\n * @private\n */\nexport const buttonStyles = (theme: Theme): IButtonStyles => ({\n  root: {\n    background: 'none',\n    fontWeight: 600,\n    fontSize: `${_pxToRem(20)}`,\n    border: 'none',\n    borderRadius: 0,\n    width: '3rem',\n    height: '3rem',\n    padding: `${_pxToRem(16)}, ${_pxToRem(5)}, ${_pxToRem(16)}, ${_pxToRem(5)}`,\n    minWidth: 0,\n    minHeight: 0\n  }\n});\n\n/**\n * @private\n */\nexport const digitStyles = (theme: Theme): IStyle => {\n  return {\n    fontSize: '1.25rem',\n    fontWeight: theme.fonts.medium.fontWeight,\n    color: `${theme.palette.themePrimary}`\n  };\n};\n\n/**\n * @private\n */\nexport const textFieldStyles = (theme: Theme, buttonPresent: boolean): Partial<ITextFieldStyles> => ({\n  field: {\n    padding: 0,\n    textAlign: 'center',\n    fontSize: `${_pxToRem(18)}`,\n    fontWeight: 400,\n    width: `${buttonPresent ? '10rem' : '12rem'}`,\n    height: '3rem',\n    borderRadius: '0.5rem',\n    position: 'relative',\n    overflowX: 'hidden',\n    textOverflow: 'clip'\n  },\n  root: {\n    backgroundColor: `${theme.palette.neutralLighter}`,\n    marginBottom: '0.625rem',\n    height: '3rem',\n    borderRadius: '0.5rem'\n  },\n  fieldGroup: {\n    border: 'none',\n    borderRadius: '0.5rem',\n    width: '12rem',\n    height: '3rem',\n    backgroundColor: `${theme.palette.neutralLighter}`,\n    ':after': {\n      borderRadius: '0.5rem'\n    }\n  },\n  errorMessage: {\n    color: theme.semanticColors.errorText\n  },\n  suffix: {\n    padding: 0,\n    position: 'absolute',\n    right: '0.25rem',\n    top: '0.55rem',\n    transform: 'scale(1.15)',\n    background: 'unset'\n  }\n});\n\n/**\n * @private\n */\nexport const letterStyles = (theme: Theme): IStyle => {\n  return {\n    fontSize: '0.625rem',\n    color: `${theme.palette.neutralSecondary}`,\n    fontWeight: 400,\n    margin: '0.125rem',\n    minHeight: '0.75rem'\n  };\n};\n\n/**\n * @private\n */\nexport const iconButtonStyles = (theme: Theme): IButtonStyles => {\n  return {\n    root: {\n      color: `${theme.palette.black}`,\n      padding: 0,\n      background: 'transparent'\n    },\n    icon: {\n      height: 'auto',\n      background: 'transparent',\n      // Needed to keep the icon vertically centered.\n      '> span': {\n        display: 'flex'\n      }\n    }\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @private\n */\nexport const formatPhoneNumber = (phoneNumber: string): string => {\n  // if input value is falsy eg if the user deletes the input, then just return\n  if (!phoneNumber) {\n    return phoneNumber;\n  }\n\n  // if phone number starts with 1, format like 1 (xxx)xxx-xxxx.\n  // if phone number starts with +, we format like +x (xxx)xxx-xxxx.\n  // For now we are only supporting NA phone number formatting with country code +x\n  // first we chop off the countrycode then we add it on when returning\n  let countryCodeNA = '';\n  if (phoneNumber[0] === '1') {\n    countryCodeNA = '1 ';\n    phoneNumber = phoneNumber.slice(1, phoneNumber.length);\n  } else if (phoneNumber[0] === '+') {\n    countryCodeNA = phoneNumber.slice(0, 2) + ' ';\n    phoneNumber = phoneNumber.slice(2, phoneNumber.length);\n  }\n\n  // phoneNumberLength is used to know when to apply our formatting for the phone number\n  const phoneNumberLength = phoneNumber.length;\n\n  // we need to return the value with no formatting if its less then four digits\n  // this is to avoid weird behavior that occurs if you  format the area code too early\n  // if phoneNumberLength is greater than 10 we don't do any formatting\n\n  if (phoneNumberLength < 4 || phoneNumberLength > 10) {\n    // no formatting in this case, remove ' ' behind countrycode\n    return countryCodeNA.replace(' ', '') + phoneNumber;\n  }\n\n  // if phoneNumberLength is greater than 4 and less the 7 we start to return\n  // the formatted number\n  if (phoneNumberLength < 7) {\n    return `${countryCodeNA}(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3)}`;\n  }\n\n  // finally, if the phoneNumberLength is greater then seven, we add the last\n  // bit of formatting and return it.\n  return `${countryCodeNA}(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3, 6)}-${phoneNumber.slice(6, phoneNumber.length)}`;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * Class for playing individual DTMF Tones.\n *\n * @internal\n */\nexport class Tone {\n  private context: AudioContext;\n  private frequency1: number;\n  private frequency2: number;\n  private oscillatorNode1?: OscillatorNode;\n  private oscillatorNode2?: OscillatorNode;\n  private isPlaying: boolean = false;\n  constructor(context: AudioContext, frequency1: number, frequency2: number) {\n    this.context = context;\n    this.frequency1 = frequency1;\n    this.frequency2 = frequency2;\n  }\n\n  /**\n   * Function to play the tone. will create new ocillators because they are one use objects so we need to make\n   * new ones every time we play a tone.\n   */\n  public play = (): void => {\n    if (this.isPlaying) {\n      return;\n    }\n    const gainNode = this.context.createGain();\n    gainNode.gain.value = 0.1;\n    gainNode.connect(this.context.destination);\n    this.oscillatorNode1 = this.context.createOscillator();\n    this.oscillatorNode1.frequency.value = this.frequency1;\n    this.oscillatorNode1.connect(gainNode);\n    this.oscillatorNode2 = this.context.createOscillator();\n    this.oscillatorNode2.frequency.value = this.frequency2;\n    this.oscillatorNode2.connect(gainNode);\n    this.oscillatorNode1.start();\n    this.oscillatorNode2.start();\n    this.isPlaying = true;\n  };\n\n  /**\n   * Function to stop the tone.\n   */\n  public stop = (): void => {\n    if (this.oscillatorNode1 && this.oscillatorNode2) {\n      this.oscillatorNode1.stop();\n      this.oscillatorNode2.stop();\n      this.oscillatorNode1.disconnect();\n      this.oscillatorNode2.disconnect();\n      this.isPlaying = false;\n    }\n  };\n}\n\n/**\n * Mapping of the different dtmf frequencies that are needed for the creation of sound that\n * matches the dtmf tones.\n *\n * @internal\n */\nexport const dtmfFrequencies = {\n  '1': {\n    f1: 697,\n    f2: 1209\n  },\n  '2': {\n    f1: 697,\n    f2: 1336\n  },\n  '3': {\n    f1: 697,\n    f2: 1477\n  },\n  '4': {\n    f1: 770,\n    f2: 1209\n  },\n  '5': {\n    f1: 770,\n    f2: 1336\n  },\n  '6': {\n    f1: 770,\n    f2: 1477\n  },\n  '7': {\n    f1: 852,\n    f2: 1209\n  },\n  '8': {\n    f1: 852,\n    f2: 1336\n  },\n  '9': {\n    f1: 852,\n    f2: 1477\n  },\n  '*': {\n    f1: 941,\n    f2: 1209\n  },\n  '0': {\n    f1: 941,\n    f2: 1336\n  },\n  '#': {\n    f1: 941,\n    f2: 1477\n  }\n};\n\n/**\n * Key of the mapping of the different dtmf frequencies that are needed for the creation of sound that\n * matches the dtmf tones.\n *\n * @internal\n */\nexport type DtmfFrequenciesKeys = keyof typeof dtmfFrequencies;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useEffect, useRef } from 'react';\nimport { IStyle, IButtonStyles, ITextFieldStyles } from '@fluentui/react';\nimport { IconButton } from '@fluentui/react';\nimport { concatStyleSets, DefaultButton, FocusZone, mergeStyles, Stack, Text, TextField, useTheme } from '@fluentui/react';\nimport { _formatString } from '@internal/acs-ui-common';\nimport { useState } from 'react';\n/* @conditional-compile-remove(dialpad) */\nimport { useLocale } from '../../localization';\nimport { buttonStyles, containerStyles, iconButtonStyles, digitStyles, letterStyles, textFieldStyles } from '../styles/Dialpad.styles';\nimport { formatPhoneNumber } from '../utils/formatPhoneNumber';\nimport useLongPress from '../utils/useLongPress';\nimport { dtmfFrequencies, DtmfFrequenciesKeys, Tone } from './DTMFToneGenerator';\n\n/**\n * Strings of {@link Dialpad} that can be overridden.\n *\n * @public\n */\nexport interface DialpadStrings {\n  placeholderText: string;\n  deleteButtonAriaLabel?: string;\n}\n\n/**\n * Styles for {@link Dialpad} component.\n *\n * @public\n */\nexport interface DialpadStyles {\n  root?: IStyle;\n  button?: IButtonStyles;\n  textField?: Partial<ITextFieldStyles>;\n  digit?: IStyle;\n  letter?: IStyle;\n  deleteIcon?: IButtonStyles;\n}\n\n/**\n * DTMF tone for PSTN calls.\n *\n * @public\n */\nexport type DtmfTone = 'A' | 'B' | 'C' | 'D' | 'Flash' | 'Num0' | 'Num1' | 'Num2' | 'Num3' | 'Num4' | 'Num5' | 'Num6' | 'Num7' | 'Num8' | 'Num9' | 'Pound' | 'Star';\n\n/**\n * Modes of the dialpad component.\n * @public\n */\nexport type DialpadMode = 'dtmf' | 'dialer';\n\n/**\n * Modes of how the longpress handlers can be tiggered.\n * @public\n */\nexport type LongPressTrigger = 'mouseAndTouch' | 'touch';\n\n/**\n * Props for {@link Dialpad} component.\n *\n * @public\n */\nexport interface DialpadProps {\n  strings?: DialpadStrings;\n  /**\n   * function to send dtmf tones on button click\n   */\n  onSendDtmfTone?: (dtmfTone: DtmfTone) => Promise<void>;\n  /**\n   * Callback for dialpad button behavior\n   */\n  onClickDialpadButton?: (buttonValue: string, buttonIndex: number) => void;\n  /**\n   * set dialpad textfield content\n   */\n  textFieldValue?: string;\n  /**\n   * on change function for text field, provides an unformatted plain text\n   */\n  onChange?: (input: string) => void;\n  /**\n   * flag to determine when to show/hide delete button, default true\n   */\n  showDeleteButton?: boolean;\n  /**\n   * Determines what kind of device that the user is on and should respect that based on interaction\n   * interfaces available to the user\n   */\n  longPressTrigger?: LongPressTrigger;\n  /**\n   * Styles for customizing the dialpad component\n   */\n  styles?: DialpadStyles;\n  /**\n   * Disables DTMF sounds when dialpad buttons are pressed. the actual\n   * tones are still sent to the call.\n   */\n  disableDtmfPlayback?: boolean;\n  /**\n   * Dialer mode for the dialpad. The dtmf mode is for sending dtmf tones and the appearence of\n   * the dialpad is changed like hiding the input box. When using dialer mode the input box is there\n   * and can be edited to change the number being dialed.\n   */\n  dialpadMode?: DialpadMode;\n}\ntype DialpadButtonContent = {\n  /** Number displayed on each dialpad button */\n  digit: DtmfFrequenciesKeys;\n  /** Letters displayed on each dialpad button */\n  letter?: string;\n};\nconst dialPadButtonsDefault: DialpadButtonContent[][] = [[{\n  digit: '1'\n}, {\n  digit: '2',\n  letter: 'ABC'\n}, {\n  digit: '3',\n  letter: 'DEF'\n}], [{\n  digit: '4',\n  letter: 'GHI'\n}, {\n  digit: '5',\n  letter: 'JKL'\n}, {\n  digit: '6',\n  letter: 'MNO'\n}], [{\n  digit: '7',\n  letter: 'PQRS'\n}, {\n  digit: '8',\n  letter: 'TUV'\n}, {\n  digit: '9',\n  letter: 'WXYZ'\n}], [{\n  digit: '*'\n}, {\n  digit: '0',\n  letter: '+'\n}, {\n  digit: '#'\n}]];\nconst DtmfTones: DtmfTone[] = ['Num1', 'Num2', 'Num3', 'Num4', 'Num5', 'Num6', 'Num7', 'Num8', 'Num9', 'Star', 'Num0', 'Pound'];\nconst DialpadButton = (props: {\n  digit: DtmfFrequenciesKeys;\n  letter?: string;\n  styles?: DialpadStyles;\n  index: number;\n  onClick: (input: string, index: number) => void;\n  onLongPress: (input: string, index: number) => void;\n  longPressTrigger: LongPressTrigger;\n  dtmfToneAudioContext: AudioContext;\n  disableDtmfPlayback?: boolean;\n}): JSX.Element => {\n  const theme = useTheme();\n  const {\n    digit,\n    index,\n    onClick,\n    onLongPress,\n    longPressTrigger,\n    dtmfToneAudioContext,\n    disableDtmfPlayback\n  } = props;\n  const [buttonPressed, setButtonPressed] = useState(false);\n  const dtmfToneSound = useRef<Tone>(new Tone(dtmfToneAudioContext, dtmfFrequencies[digit].f1, dtmfFrequencies[digit].f2));\n  const useLongPressProps = React.useMemo(() => ({\n    onClick: async () => {\n      onClick(digit, index);\n    },\n    onLongPress: async () => {\n      onLongPress(digit, index);\n    },\n    touchEventsOnly: longPressTrigger === 'touch'\n  }), [digit, index, longPressTrigger, onClick, onLongPress]);\n  const longPressHandlers = useLongPress(useLongPressProps);\n  return <DefaultButton data-test-id={`dialpad-button-${props.index}`} styles={concatStyleSets(buttonStyles(theme), props.styles?.button)} {...longPressHandlers} onKeyDown={e => {\n    if ((e.key === 'Enter' || e.key === ' ') && !buttonPressed) {\n      if (!disableDtmfPlayback) {\n        dtmfToneSound.current.play();\n      }\n      longPressHandlers.onKeyDown();\n      setButtonPressed(true);\n      return;\n    }\n    if (e.key === 'Tab' || e.key === 'ArrowLeft' || e.key === 'ArrowRight' || e.key === 'ArrowUp' || e.key === 'ArrowDown') {\n      dtmfToneSound.current.stop();\n    }\n    longPressHandlers.onKeyDown();\n  }} onKeyUp={e => {\n    if ((e.key === 'Enter' || e.key === ' ') && buttonPressed) {\n      dtmfToneSound.current.stop();\n      longPressHandlers.onKeyUp();\n      setButtonPressed(false);\n    }\n    longPressHandlers.onKeyUp();\n  }} onMouseDown={() => {\n    if (!disableDtmfPlayback) {\n      dtmfToneSound.current.play();\n    }\n    longPressHandlers.onMouseDown();\n  }} onMouseUp={() => {\n    dtmfToneSound.current.stop();\n    longPressHandlers.onMouseUp();\n  }} onMouseLeave={() => {\n    dtmfToneSound.current.stop();\n  }} onTouchStart={() => {\n    if (!disableDtmfPlayback) {\n      dtmfToneSound.current.play();\n    }\n    longPressHandlers.onTouchStart();\n  }} onTouchEnd={() => {\n    dtmfToneSound.current.stop();\n    longPressHandlers.onTouchEnd();\n  }}>\n      <Stack>\n        <Text className={mergeStyles(digitStyles(theme), props.styles?.digit)}>{props.digit}</Text>\n\n        <Text className={mergeStyles(letterStyles(theme), props.styles?.letter)}>{props.letter ?? ' '}</Text>\n      </Stack>\n    </DefaultButton>;\n};\nconst DialpadContainer = (props: {\n  strings: DialpadStrings;\n  onSendDtmfTone?: (dtmfTone: DtmfTone) => Promise<void>;\n  /**  Callback for dialpad button behavior */\n  onClickDialpadButton?: (buttonValue: string, buttonIndex: number) => void;\n  /** Pass in custom content to dialpad textfield */\n  textFieldValue?: string;\n  /**  on change function for text field, provides an unformatted plain text */\n  onChange?: (input: string) => void;\n  /**  boolean input to determine when to show/hide delete button, default true */\n  showDeleteButton?: boolean;\n  /**  boolean input to determine if dialpad is in mobile view, default false */\n  longPressTrigger?: LongPressTrigger;\n  styles?: DialpadStyles;\n  disableDtmfPlayback?: boolean;\n  dialpadMode?: DialpadMode;\n}): JSX.Element => {\n  const theme = useTheme();\n  const {\n    onSendDtmfTone,\n    onClickDialpadButton,\n    textFieldValue,\n    onChange,\n    showDeleteButton = true,\n    longPressTrigger = 'mouseAndTouch',\n    disableDtmfPlayback,\n    dialpadMode = 'dialer'\n  } = props;\n  const dtmfToneAudioContext = useRef(new AudioContext());\n  const [plainTextValue, setPlainTextValue] = useState(textFieldValue ?? '');\n  const plainTextValuePreviousRenderValue = useRef(plainTextValue);\n  useEffect(() => {\n    if (plainTextValuePreviousRenderValue.current !== plainTextValue) {\n      onChange?.(plainTextValue);\n    }\n    plainTextValuePreviousRenderValue.current = plainTextValue;\n  }, [plainTextValuePreviousRenderValue, plainTextValue, onChange]);\n  useEffect(() => {\n    setText(textFieldValue ?? '');\n  }, [textFieldValue]);\n  const onClickDialpad = (input: string, index: number): void => {\n    setText(plainTextValue + input);\n    if (onSendDtmfTone) {\n      onSendDtmfTone(DtmfTones[index]);\n    }\n    if (onClickDialpadButton) {\n      onClickDialpadButton(input, index);\n    }\n  };\n  const onLongPressDialpad = (input: string, index: number): void => {\n    if (input === '0' && index === 10) {\n      setText(plainTextValue + '+');\n    } else {\n      setText(plainTextValue + input);\n    }\n    if (onSendDtmfTone) {\n      onSendDtmfTone(DtmfTones[index]);\n    }\n    if (onClickDialpadButton) {\n      onClickDialpadButton(input, index);\n    }\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const setText = (input: string): void => {\n    // remove non-valid characters from input: letters,special characters excluding +, *,#\n    const plainInput = sanitizeInput(input);\n    setPlainTextValue(plainInput);\n  };\n  const deleteNumbers = (): void => {\n    const modifiedInput = plainTextValue.substring(0, plainTextValue.length - 1);\n    setText(modifiedInput);\n  };\n  return <Stack className={mergeStyles(containerStyles(theme), props.styles?.root)} data-test-id=\"dialpadContainer\" data-ui-id=\"dialpadContainer\" horizontalAlign={'center'}>\n      {dialpadMode === 'dialer' && <TextField styles={concatStyleSets(textFieldStyles(theme, plainTextValue !== ''), props.styles?.textField)} value={textFieldValue ? textFieldValue : formatPhoneNumber(plainTextValue)}\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onChange={(e: any) => {\n      setText(e.target.value);\n    }} onClick={e => {\n      e.preventDefault();\n    }} placeholder={props.strings.placeholderText} data-test-id=\"dialpad-input\" onRenderSuffix={(): JSX.Element => <>\n              {showDeleteButton && plainTextValue.length !== 0 && <IconButton ariaLabel={props.strings.deleteButtonAriaLabel} onClick={deleteNumbers} styles={concatStyleSets(iconButtonStyles(theme), props.styles?.deleteIcon)} iconProps={{\n        iconName: 'DialpadBackspace'\n      }} />}\n            </>} />}\n      <FocusZone>\n        {dialPadButtonsDefault.map((rows, rowIndex) => {\n        return <Stack horizontal key={`row_${rowIndex}`} horizontalAlign=\"stretch\" tokens={{\n          childrenGap: '1rem'\n        }}>\n              {rows.map((button, columnIndex) => <DialpadButton key={`button_${columnIndex}`}\n          /* row index = 0\n          columnIndex: (0,1,2) => (0,1,2)\n          row index = 1\n          columnIndex: (0,1,2)=> (3,4,5)\n          row index = 2\n          columnIndex: (0,1,2)=> (6,7,8)\n          row index = 3\n          columnIndex: (0,1,2)=> (9,10,11)\n          columnIndex + rowIndex*rows.length calculates the corresponding index for each button\n          dialpad index:\n          0 1 2\n          3 4 5\n          6 7 8\n          9 10 11\n          then use this index to locate the corresponding dtmf tones\n          DtmfTones[index]\n          */ index={columnIndex + rowIndex * rows.length} digit={button.digit} letter={button.letter} styles={props.styles} onClick={onClickDialpad} onLongPress={onLongPressDialpad} longPressTrigger={longPressTrigger} dtmfToneAudioContext={dtmfToneAudioContext.current} disableDtmfPlayback={disableDtmfPlayback} />)}\n            </Stack>;\n      })}\n      </FocusZone>\n    </Stack>;\n};\n\n/**\n * A component to allow users to enter phone number through clicking on dialpad/using keyboard\n * It will return empty component for stable builds\n *\n * @public\n */\nexport const Dialpad = (props: DialpadProps): JSX.Element => {\n  /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\n  const localeStrings = useLocale().strings.dialpad;\n  const dialpadLocaleStringsTrampoline = (): DialpadStrings => {\n    /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\n    return localeStrings;\n    // Even though the component strings type doesn't have `DialpadStrings` in stable build,\n    // the string values exist. So unsafe cast for stable build.\n    return (('' as unknown) as DialpadStrings);\n  };\n  const strings = {\n    ...dialpadLocaleStringsTrampoline(),\n    ...props.strings\n  };\n  return <DialpadContainer strings={strings} {...props} />;\n};\nconst sanitizeInput = (input: string): string => {\n  // remove non-valid characters from input: letters,special characters excluding +, *,#\n  return input.replace(/[^\\d*#+]/g, '');\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IButtonStyles, IStackStyles, ITheme } from '@fluentui/react';\nconst VideoEffectsItemContainerHeight = '3.375rem';\nconst VideoEffectsItemContainerWidth = '4.83rem';\nconst VideoEffectsItemContainerBorderHeight = '3.373rem';\nconst VideoEffectsItemContainerBorderWidth = '4.85rem';\nconst VideoEffectsItemContainerBorderSize = '2px';\n\n/** @private */\nexport const hiddenVideoEffectsItemContainerStyles: IStackStyles = {\n  root: {\n    visibility: 'hidden',\n    height: VideoEffectsItemContainerHeight,\n    width: VideoEffectsItemContainerWidth,\n    border: VideoEffectsItemContainerBorderSize\n  }\n};\n\n/** @private */\nexport const videoEffectsItemContainerStyles = (args: {\n  theme: ITheme;\n  isSelected: boolean;\n  disabled: boolean;\n  backgroundImage?: string;\n}): IButtonStyles => {\n  const borderDefaultThickness = '1px';\n  const borderActiveThickness = '2px';\n  return {\n    root: {\n      background: args.disabled ? args.theme.palette.neutralQuaternaryAlt : undefined,\n      backgroundImage: args.backgroundImage ? `url(${args.backgroundImage})` : undefined,\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      borderRadius: '0.25rem',\n      color: args.theme.palette.neutralPrimary,\n      cursor: args.disabled ? 'default' : 'pointer',\n      height: VideoEffectsItemContainerHeight,\n      width: VideoEffectsItemContainerWidth,\n      outlineOffset: '-1px',\n      outline: args.isSelected ? `${borderActiveThickness} solid ${args.theme.palette.themePrimary}` : `${borderDefaultThickness} solid ${args.theme.palette.neutralQuaternaryAlt}`,\n      ':hover': {\n        boxSizing: 'border-box',\n        width: VideoEffectsItemContainerBorderWidth,\n        height: VideoEffectsItemContainerBorderHeight,\n        outlineOffset: '-1px',\n        outline: args.disabled && !args.isSelected ? `${borderDefaultThickness} solid ${args.theme.palette.neutralQuaternaryAlt}` : `${borderActiveThickness} solid ${args.theme.palette.themePrimary}`\n      }\n    }\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { DefaultButton, IButton, Icon, IIconProps, IStyle, ITooltipHostProps, mergeStyles, Stack, Text, TooltipHost, useTheme } from '@fluentui/react';\nimport React, { useCallback, useEffect } from 'react';\nimport { videoEffectsItemContainerStyles } from './VideoEffectsItem.styles';\n\n/**\n * Props for {@link _VideoEffectsItem}\n *\n * @internal\n */\nexport interface _VideoEffectsItemProps {\n  /**\n   * The key of the Video Background Effect.\n   * This is used to identify the Video Background Effect and is returned in the onChange event.\n   * It must be unique within the set of options.\n   * @example 'blur'\n   */\n  itemKey: string;\n\n  /**\n   * The text to display for the Video effects item.\n   */\n  title?: string;\n\n  /**\n   * Whether the Video effects item is currently in the selected state.\n   * @default false\n   */\n  isSelected?: boolean;\n\n  /**\n   * Callback to invoke when the Video effects item is selected.\n   */\n  onSelect?: (key: string) => void;\n\n  /**\n   * Whether the Video effects item is disabled.\n   * @default false\n   */\n  disabled?: boolean;\n\n  /**\n   * The icon to display for the Video effects item.\n   * @default undefined (no icon)\n   */\n  iconProps?: IIconProps;\n\n  /**\n   * Properties to have a Tooltip display when hovering over the Video effects item.\n   * @default undefined (no tooltip)\n   */\n  tooltipProps?: ITooltipHostProps;\n\n  /**\n   * Aria label for the Video effects item.\n   */\n  ariaLabel?: string;\n\n  /**\n   * Background to display for the Video effects item.\n   * @default undefined (no background image)\n   */\n  backgroundProps?: {\n    /**\n     * The URL of the background image.\n     */\n    url: string;\n  };\n\n  /**\n   * Styles for the Video effects item.\n   */\n  styles?: _VideoEffectsItemStyles;\n\n  /**\n   * Should focus on mounting of the picker item\n   */\n  focusOnMount?: boolean;\n}\n\n/**\n * Styles for {@link _VideoEffectsItem}\n *\n * @internal\n */\nexport interface _VideoEffectsItemStyles {\n  /**\n   * Styles for the container of the Video effects item.\n   */\n  root: IStyle;\n\n  /**\n   * Styles for the container of the icon of the Video effects item.\n   */\n  iconContainer: IStyle;\n\n  /**\n   * Styles for the text container of the Video effects item.\n   */\n  textContainer: IStyle;\n}\n\n/**\n * A component for displaying a Video Background Effect Option.\n *\n * @internal\n */\nexport const _VideoEffectsItem = (props: _VideoEffectsItemProps): JSX.Element => {\n  const theme = useTheme();\n  const isSelected = props.isSelected ?? false;\n  const disabled = props.disabled ?? false;\n  const backgroundImage = props.backgroundProps?.url;\n  const containerStyles = useCallback(() => videoEffectsItemContainerStyles({\n    theme,\n    isSelected,\n    disabled,\n    backgroundImage\n  }), [backgroundImage, disabled, isSelected, theme]);\n  const componentRef = React.createRef<IButton>();\n  useEffect(() => {\n    if (props.focusOnMount && componentRef.current) {\n      componentRef.current.focus();\n    }\n  }, [componentRef, props.focusOnMount]);\n  return <TooltipHost {...props.tooltipProps}>\n      <Stack key={props.itemKey} className={mergeStyles(props.styles?.root)} verticalAlign=\"center\" horizontalAlign=\"center\" data-ui-id={`video-effects-item`} aria-label={props.ariaLabel ?? props.itemKey} aria-disabled={props.disabled}>\n        <DefaultButton styles={containerStyles()} onClick={disabled ? undefined : () => props.onSelect?.(props.itemKey)} componentRef={componentRef} autoFocus={props.focusOnMount}>\n          <Stack horizontalAlign={'center'} tokens={{\n          childrenGap: '0.15rem'\n        }}>\n            {props.iconProps && <Stack.Item styles={{\n            root: props.styles?.iconContainer\n          }}>\n                <Icon {...props.iconProps} />\n              </Stack.Item>}\n            {props.title && <Stack.Item styles={{\n            root: props.styles?.textContainer\n          }}>\n                <Text variant=\"small\">{props.title}</Text>\n              </Stack.Item>}\n          </Stack>\n        </DefaultButton>\n      </Stack>\n    </TooltipHost>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, Label, mergeStyles, Stack } from '@fluentui/react';\nimport { useWarnings } from '@fluentui/react-hooks';\nimport React from 'react';\nimport { chunk } from '../utils';\nimport { _VideoEffectsItem, _VideoEffectsItemProps } from './VideoEffectsItem';\nimport { hiddenVideoEffectsItemContainerStyles } from './VideoEffectsItem.styles';\n\n/**\n * Props for {@link _VideoBackgroundEffectsPicker}\n * @internal\n */\nexport interface _VideoBackgroundEffectsPickerProps {\n  /**\n   * The options to display in the picker.\n   */\n  options: _VideoBackgroundEffectChoiceOption[];\n\n  /**\n   * The key of the current selected Video Background Effect.\n   * If you provide this, you must maintain selection state by observing onChange events and passing a new value in when changed.\n   */\n  selectedEffectKey?: string;\n\n  /**\n   * Callback to invoke when a Video Background Effect is selected.\n   * @param effectKey - The key of the Video Background Effect that was selected.\n   */\n  onChange?: (effectKey: string) => void;\n\n  /**\n   * The key of the Video Background Effect that is initially selected.\n   * Only provide this if the picker is an uncontrolled component;\n   * otherwise, use the `selectedEffectKey` property.\n   */\n  defaultSelectedEffectKey?: string;\n\n  /**\n   * The label to display for the picker.\n   */\n  label?: string;\n\n  /**\n   * The number of items to display per row.\n   * @default 3\n   */\n  itemsPerRow?: 'wrap' | number;\n\n  /**\n   * Styles for the picker.\n   */\n  styles?: _VideoBackgroundEffectsPickerStyles;\n}\n\n/**\n * Option for the {@link _VideoBackgroundEffectsPicker}.\n * @internal\n */\nexport type _VideoBackgroundEffectChoiceOption = _VideoEffectsItemProps;\n\n/**\n * Styles for the {@link _VideoBackgroundEffectsPicker}.\n * @internal\n */\nexport interface _VideoBackgroundEffectsPickerStyles {\n  /**\n   * Styles for the root element.\n   */\n  root?: IStyle;\n\n  /**\n   * Styles for the label.\n   */\n  label?: IStyle;\n\n  /**\n   * Styles for the root of each row element.\n   */\n  rowRoot?: IStyle;\n}\n\n/**\n * Picker for choosing a Video Background Effect.\n *\n * @remarks\n * This functions similar to a radio group of buttons, where the user can select one of the options.\n *\n * @internal\n */\nexport const _VideoBackgroundEffectsPicker = (props: _VideoBackgroundEffectsPickerProps): JSX.Element => {\n  const [componentControlledSelectedEffectKey, setComponentControlledSelectedEffectKey] = React.useState<string | undefined>(props.defaultSelectedEffectKey);\n\n  // Warn the developer if they use the component in an incorrect controlled way.\n  useWarnings({\n    name: 'VideoBackgroundEffectsPicker',\n    props,\n    controlledUsage: {\n      onChangeProp: 'onChange',\n      valueProp: 'selectedEffectKey',\n      defaultValueProp: 'defaultSelectedEffectKey'\n    }\n  });\n  const selectedEffect = props.selectedEffectKey ?? componentControlledSelectedEffectKey;\n  const setSelectedEffect = (selectedEffectKey: string): void => {\n    setComponentControlledSelectedEffectKey(selectedEffectKey);\n    props.onChange?.(selectedEffectKey);\n  };\n  const convertedOptions: _VideoEffectsItemProps[] = props.options.map(option => ({\n    isSelected: option.itemKey === selectedEffect,\n    onSelect: () => setSelectedEffect(option.itemKey),\n    ...option\n  }));\n  const itemsPerRow = props.itemsPerRow ?? 3;\n  const optionsByRow = itemsPerRow === 'wrap' ? [convertedOptions] : chunk(convertedOptions, itemsPerRow);\n\n  // If the final row is not full, fill it with hidden items to ensure layout.\n  const fillCount = itemsPerRow === 'wrap' ? 0 : itemsPerRow - optionsByRow[optionsByRow.length - 1].length;\n  return <Stack tokens={{\n    childrenGap: '0.5rem'\n  }}>\n      <Label className={mergeStyles(props.styles?.label)}>{props.label}</Label>\n      {optionsByRow.map((options, rowIndex) => <Stack className={mergeStyles(props.styles?.rowRoot)} wrap={props.itemsPerRow === 'wrap'} horizontal key={rowIndex} tokens={{\n      childrenGap: '0.5rem'\n    }} data-ui-id=\"video-effects-picker-row\">\n          {options.map((option, i) => {\n        if (i === 0 && rowIndex === 0) {\n          return <_VideoEffectsItem {...option} itemKey={option.itemKey} key={option.itemKey} focusOnMount={true} />;\n        }\n        return <_VideoEffectsItem {...option} itemKey={option.itemKey} key={option.itemKey} />;\n      })}\n          {fillCount > 0 && rowIndex === optionsByRow.length - 1 && Array.from({\n        length: fillCount\n      }).map((_, index) => <Stack key={index} styles={hiddenVideoEffectsItemContainerStyles} data-ui-id=\"video-effects-hidden-item\" />)}\n        </Stack>)}\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @private\n */\nexport const scrollbarStyles = {\n  '::-webkit-scrollbar, *::-webkit-scrollbar': {\n    width: '0.3rem',\n    height: '0.3rem'\n  },\n  '::-webkit-scrollbar-thumb, *::-webkit-scrollbar-thumb': {\n    borderRadius: '10px',\n    background: 'rgba(150, 150, 150)'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles, mergeStyles } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\nimport { scrollbarStyles } from './Common.style';\n\n/**\n * @private\n */\nexport const iconClassName = mergeStyles({\n  marginRight: _pxToRem(8)\n});\n\n/**\n * @private\n */\nexport const displayNameClassName = mergeStyles({\n  fontWeight: 400,\n  fontSize: _pxToRem(12),\n  lineHeight: _pxToRem(16)\n});\n\n/**\n * @private\n */\nexport const captionClassName = mergeStyles({\n  fontWeight: 400,\n  fontSize: _pxToRem(16),\n  lineHeight: _pxToRem(22),\n  width: '100%'\n});\n\n/**\n * @private\n */\nexport const captionsContainerClassName = mergeStyles({\n  height: '100%',\n  margin: 0,\n  overflow: 'auto',\n  padding: 0\n});\n\n/**\n * @private\n */\nexport const captionContainerClassName = mergeStyles({\n  marginTop: _pxToRem(6),\n  marginBottom: _pxToRem(6),\n  overflowAnchor: 'auto'\n});\n\n/**\n * @private\n */\nexport const captionsBannerClassName = (formFactor: 'default' | 'compact'): string => {\n  return mergeStyles({\n    overflowX: 'hidden',\n    height: formFactor === 'compact' ? '4.5rem' : '8.75rem',\n    overflowY: 'auto',\n    ...scrollbarStyles\n  });\n};\n\n/**\n * @private\n */\nexport const loadingBannerStyles = (formFactor: 'default' | 'compact'): IStackStyles => {\n  return {\n    root: {\n      height: formFactor === 'compact' ? '4.5rem' : '8.75rem'\n    }\n  };\n};\n\n/**\n * @private\n */\nexport const captionsContentContainerClassName = mergeStyles({\n  width: '100%'\n});\n\n/**\n * @private\n */\nexport const displayNameContainerClassName = mergeStyles({\n  overflow: 'hidden',\n  textOverflow: 'ellipsis'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IPersona, Persona, Stack, PersonaSize, Text } from '@fluentui/react';\nimport React from 'react';\nimport { _FileUploadCardsStrings } from './FileUploadCards';\nimport { OnRenderAvatarCallback } from '../types';\nimport { captionClassName, captionsContentContainerClassName, displayNameClassName, displayNameContainerClassName, iconClassName } from './styles/Captions.style';\nimport { _CaptionsInfo } from './CaptionsBanner';\n\n/**\n * @internal\n * Props for a single line of caption.\n */\nexport interface _CaptionProps extends _CaptionsInfo {\n  /**\n   * Optional callback to override render of the avatar.\n   *\n   * @param userId - user Id\n   */\n  onRenderAvatar?: OnRenderAvatarCallback;\n}\n\n/**\n * @internal\n * A component for displaying a single line of caption\n */\nexport const _Caption = (props: _CaptionProps): JSX.Element => {\n  const {\n    displayName,\n    userId,\n    captionText,\n    onRenderAvatar\n  } = props;\n  const personaOptions: IPersona = {\n    hidePersonaDetails: true,\n    size: PersonaSize.size32,\n    text: displayName,\n    showOverflowTooltip: false,\n    imageShouldStartVisible: true,\n    initialsTextColor: 'white',\n    styles: {\n      root: {\n        margin: '0.25rem'\n      }\n    }\n  };\n  const userIcon = onRenderAvatar ? onRenderAvatar(userId ?? '', personaOptions) : <Persona {...personaOptions} />;\n  return <Stack horizontal verticalAlign=\"start\" horizontalAlign=\"start\">\n      <Stack.Item className={iconClassName}>{userIcon}</Stack.Item>\n\n      <Stack verticalAlign=\"start\" className={captionsContentContainerClassName}>\n        <Stack.Item className={displayNameContainerClassName}>\n          <Text className={displayNameClassName}>{displayName}</Text>\n        </Stack.Item>\n        <Stack.Item className={captionClassName} dir=\"auto\">\n          {captionText}\n        </Stack.Item>\n      </Stack>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { Stack, FocusZone, Spinner } from '@fluentui/react';\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { _FileUploadCardsStrings } from './FileUploadCards';\nimport { _Caption } from './Caption';\nimport { captionContainerClassName, captionsBannerClassName, captionsContainerClassName, loadingBannerStyles } from './styles/Captions.style';\nimport { OnRenderAvatarCallback } from '../types';\n\n/**\n * @internal\n * information required for each line of caption\n */\nexport type _CaptionsInfo = {\n  id: string;\n  displayName: string;\n  captionText: string;\n  userId?: string;\n};\n\n/**\n * @internal\n * strings for captions banner\n */\nexport interface _CaptionsBannerStrings {\n  captionsBannerSpinnerText?: string;\n}\n\n/**\n * @internal\n * _CaptionsBanner Component Props.\n */\nexport interface _CaptionsBannerProps {\n  captions: _CaptionsInfo[];\n  isCaptionsOn?: boolean;\n  startCaptionsInProgress?: boolean;\n  /**\n   * Optional callback to override render of the avatar.\n   *\n   * @param userId - user Id\n   */\n  onRenderAvatar?: OnRenderAvatarCallback;\n  strings?: _CaptionsBannerStrings;\n  /**\n   * Optional form factor for the component.\n   * @defaultValue 'default'\n   */\n  formFactor?: 'default' | 'compact';\n}\n\n/**\n * @internal\n * A component for displaying a CaptionsBanner with user icon, displayName and captions text.\n */\nexport const _CaptionsBanner = (props: _CaptionsBannerProps): JSX.Element => {\n  const {\n    captions,\n    isCaptionsOn,\n    startCaptionsInProgress,\n    onRenderAvatar,\n    strings,\n    formFactor = 'default'\n  } = props;\n  const captionsScrollDivRef = useRef<HTMLDivElement>(null);\n  const [isAtBottomOfScroll, setIsAtBottomOfScroll] = useState<boolean>(true);\n  const scrollToBottom = (): void => {\n    if (captionsScrollDivRef.current) {\n      captionsScrollDivRef.current.scrollTop = captionsScrollDivRef.current.scrollHeight;\n    }\n  };\n  const handleScrollToTheBottom = useCallback((): void => {\n    if (!captionsScrollDivRef.current) {\n      return;\n    }\n    const atBottom = Math.ceil(captionsScrollDivRef.current.scrollTop) >= captionsScrollDivRef.current.scrollHeight - captionsScrollDivRef.current.clientHeight;\n    setIsAtBottomOfScroll(atBottom);\n  }, []);\n  useEffect(() => {\n    const captionsScrollDiv = captionsScrollDivRef.current;\n    captionsScrollDiv?.addEventListener('scroll', handleScrollToTheBottom);\n    return () => {\n      captionsScrollDiv?.removeEventListener('scroll', handleScrollToTheBottom);\n    };\n  }, [handleScrollToTheBottom, isCaptionsOn]);\n  useEffect(() => {\n    // only auto scroll to bottom is already is at bottom of scroll before new caption comes in\n    if (isAtBottomOfScroll) {\n      scrollToBottom();\n    }\n  }, [captions, isAtBottomOfScroll]);\n  return <>\n      {startCaptionsInProgress && <FocusZone as=\"ul\" className={captionsContainerClassName}>\n          {isCaptionsOn && <div ref={captionsScrollDivRef} className={captionsBannerClassName(formFactor)}>\n              {captions.map(caption => {\n          return <div key={caption.id} className={captionContainerClassName} data-is-focusable={true}>\n                    <_Caption {...caption} onRenderAvatar={onRenderAvatar} />\n                  </div>;\n        })}\n            </div>}\n          {!isCaptionsOn && <Stack verticalAlign=\"center\" styles={loadingBannerStyles(formFactor)} data-is-focusable={true}>\n              <Spinner label={strings?.captionsBannerSpinnerText} ariaLive=\"assertive\" labelPosition=\"right\" />\n            </Stack>}\n        </FocusZone>}\n    </>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ControlBarButton, ControlBarButtonProps } from './ControlBarButton';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { _HighContrastAwareIcon } from './HighContrastAwareIcon';\nimport { defaultSpokenLanguage } from './utils';\n\n/**\n * options bag to start captions\n *\n * @internal\n */\nexport type _captionsOptions = {\n  spokenLanguage: string;\n};\n\n/**\n *@internal\n */\nexport interface _StartCaptionsButtonProps extends ControlBarButtonProps {\n  /**\n   * Utility property for using this component with communication react handlers\n   * Start captions based on captions state\n   */\n  onStartCaptions: (options?: _captionsOptions) => Promise<void>;\n  /**\n   * Utility property for using this component with communication react handlers\n   * Stop captions based on captions state\n   */\n  onStopCaptions: () => Promise<void>;\n  /**\n   * Utility property for using this component with communication react handlers\n   * set captions spoken language\n   */\n  onSetSpokenLanguage: (language: string) => Promise<void>;\n  /**\n   * Spoken language set for starting captions\n   */\n  currentSpokenLanguage: string;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: _StartCaptionsButtonStrings;\n}\n\n/**\n * Strings for the hold button labels\n * @internal\n */\nexport interface _StartCaptionsButtonStrings {\n  /**\n   * Label for when action is to start Captions\n   */\n  onLabel: string;\n  /**\n   * Label for when action is to stop Captions\n   */\n  offLabel: string;\n  /**\n   * Content for when button is checked, captions is on\n   */\n  tooltipOnContent: string;\n  /**\n   * Content for when button is unchecked, captions is off\n   */\n  tooltipOffContent: string;\n}\n\n/**\n * a button to start or stop captions\n *\n * Can be used with {@link ControlBar}\n *\n * @param props - properties for the start captions button.\n * @internal\n */\nexport const _StartCaptionsButton = (props: _StartCaptionsButtonProps): JSX.Element => {\n  const {\n    onStartCaptions,\n    onStopCaptions,\n    onSetSpokenLanguage,\n    currentSpokenLanguage,\n    strings\n  } = props;\n  const onRenderStartIcon = (): JSX.Element => {\n    /* @conditional-compile-remove(close-captions) */\n    return <_HighContrastAwareIcon disabled={props.disabled} iconName=\"CaptionsIcon\" />;\n    return <></>;\n  };\n  const onRenderOffIcon = (): JSX.Element => {\n    /* @conditional-compile-remove(close-captions) */\n    return <_HighContrastAwareIcon disabled={props.disabled} iconName=\"CaptionsOffIcon\" />;\n    return <></>;\n  };\n  const options: _captionsOptions = useMemo(() => {\n    return {\n      spokenLanguage: currentSpokenLanguage === '' ? defaultSpokenLanguage : currentSpokenLanguage\n    };\n  }, [currentSpokenLanguage]);\n  const [hasSetSpokenLanguage, setHasSetSpokenLanguage] = useState(false);\n  const onToggleStartCaptions = useCallback(async (): Promise<void> => {\n    if (props.checked) {\n      onStopCaptions();\n    } else {\n      await onStartCaptions(options);\n    }\n  }, [props.checked, onStartCaptions, onStopCaptions, options]);\n  useEffect(() => {\n    if (props.checked && !hasSetSpokenLanguage) {\n      // set spoken language when start captions with a spoken language specified.\n      // this is to fix the bug when a second user starts captions with a new spoken language, captions bot ignore that spoken language\n      onSetSpokenLanguage(options.spokenLanguage);\n      // we only need to call set spoken language once when first starting captions\n      setHasSetSpokenLanguage(true);\n    }\n  }, [props.checked, onSetSpokenLanguage, options.spokenLanguage, hasSetSpokenLanguage]);\n  return <ControlBarButton {...props} strings={strings} onClick={onToggleStartCaptions ?? props.onClick} onRenderOnIcon={onRenderStartIcon} onRenderOffIcon={onRenderOffIcon} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IButtonStyles, IDropdownStyles, IModalStyles, mergeStyles, Theme } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\nimport { scrollbarStyles } from './Common.style';\n\n/**\n * @private\n */\nexport const themedCaptionsSettingsModalStyle = (theme: Theme): Partial<IModalStyles> => ({\n  main: {\n    borderRadius: theme.effects.roundedCorner6,\n    padding: _pxToRem(24),\n    width: _pxToRem(440),\n    height: 'fit-content',\n    overflow: 'hidden'\n  }\n});\n\n/**\n * @private\n */\nexport const titleClassName = mergeStyles({\n  fontWeight: 600,\n  fontSize: _pxToRem(20),\n  lineHeight: _pxToRem(28)\n});\n\n/**\n * @private\n */\nexport const titleContainerClassName = mergeStyles({\n  paddingBottom: _pxToRem(20)\n});\n\n/**\n * @private\n */\nexport const dropdownContainerClassName = mergeStyles({\n  paddingTop: _pxToRem(16)\n});\n\n/**\n * @private\n */\nexport const dropdownInfoTextStyle = (theme: Theme): string => mergeStyles({\n  fontWeight: 400,\n  fontSize: _pxToRem(12),\n  lineHeight: _pxToRem(16),\n  color: theme.palette.neutralSecondary,\n  paddingBottom: _pxToRem(24)\n});\n\n/**\n * @private\n */\nexport const buttonsContainerClassName = mergeStyles({\n  paddingTop: _pxToRem(16)\n});\n\n/**\n * @private\n */\nexport const buttonStyles = (theme: Theme): IButtonStyles => {\n  return {\n    root: {\n      borderRadius: _pxToRem(2),\n      margin: _pxToRem(8)\n    },\n    rootHovered: {\n      backgroundColor: theme.palette.themePrimary,\n      borderColor: theme.palette.themePrimary,\n      color: theme.palette.white\n    },\n    rootFocused: {\n      backgroundColor: theme.palette.themePrimary,\n      borderColor: theme.palette.themePrimary,\n      color: theme.palette.white\n    },\n    rootPressed: {\n      backgroundColor: theme.palette.themePrimary,\n      borderColor: theme.palette.themePrimary,\n      color: theme.palette.white\n    }\n  };\n};\n\n/**\n * @private\n */\nexport const dropdownStyles: Partial<IDropdownStyles> = {\n  callout: {\n    height: _pxToRem(300),\n    overflow: 'auto',\n    ...scrollbarStyles\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IDropdownOption } from '@fluentui/react';\n\n/**\n * @public\n * spoken language strings for captions setting modal\n */\nexport interface SpokenLanguageStrings {\n  'ar-ae': string;\n  'ar-sa': string;\n  'da-dk': string;\n  'de-de': string;\n  'en-au': string;\n  'en-ca': string;\n  'en-gb': string;\n  'en-in': string;\n  'en-nz': string;\n  'en-us': string;\n  'es-es': string;\n  'es-mx': string;\n  'fi-fi': string;\n  'fr-ca': string;\n  'fr-fr': string;\n  'hi-in': string;\n  'it-it': string;\n  'ja-jp': string;\n  'ko-kr': string;\n  'nb-no': string;\n  'nl-be': string;\n  'nl-nl': string;\n  'pl-pl': string;\n  'pt-br': string;\n  'ru-ru': string;\n  'sv-se': string;\n  'zh-cn': string;\n  'zh-hk': string;\n  'cs-cz': string;\n  'pt-pt': string;\n  'tr-tr': string;\n  'vi-vn': string;\n  'th-th': string;\n  'he-il': string;\n  'cy-gb': string;\n  'uk-ua': string;\n  'el-gr': string;\n  'hu-hu': string;\n  'ro-ro': string;\n  'sk-sk': string;\n  'zh-tw': string;\n}\n\n/**\n * @public\n * caption language strings for captions setting modal\n */\nexport interface CaptionLanguageStrings {\n  ar: string;\n  da: string;\n  de: string;\n  en: string;\n  es: string;\n  fi: string;\n  fr: string;\n  'fr-ca': string;\n  hi: string;\n  it: string;\n  ja: string;\n  ko: string;\n  nb: string;\n  nl: string;\n  pl: string;\n  pt: string;\n  ru: string;\n  sv: string;\n  'zh-Hans': string;\n  'zh-Hant': string;\n  cs: string;\n  'pt-pt': string;\n  tr: string;\n  vi: string;\n  th: string;\n  he: string;\n  cy: string;\n  uk: string;\n  el: string;\n  hu: string;\n  ro: string;\n  sk: string;\n}\n\n/**\n * @internal\n * mapping between caption language and spoken language codes\n */\nexport const _spokenLanguageToCaptionLanguage = {\n  'ar-ae': 'ar',\n  'ar-sa': 'ar',\n  'da-dk': 'da',\n  'de-de': 'de',\n  'en-au': 'en',\n  'en-ca': 'en',\n  'en-gb': 'en',\n  'en-in': 'en',\n  'en-nz': 'en',\n  'en-us': 'en',\n  'es-es': 'es',\n  'es-mx': 'es',\n  'fi-fi': 'fi',\n  'fr-ca': 'fr-ca',\n  'fr-fr': 'fr',\n  'hi-in': 'hi',\n  'it-it': 'it',\n  'ja-jp': 'ja',\n  'ko-kr': 'ko',\n  'nb-no': 'nb',\n  'nl-be': 'nl',\n  'nl-nl': 'nl',\n  'pl-pl': 'pl',\n  'pt-br': 'pt',\n  'ru-ru': 'ru',\n  'sv-se': 'sv',\n  'zh-cn': 'zh-Hans',\n  'zh-hk': 'zh-Hant',\n  'cs-cz': 'cs',\n  'pt-pt': 'pt-pt',\n  'tr-tr': 'tr',\n  'vi-vn': 'vi',\n  'th-th': 'th',\n  'he-il': 'he',\n  'cy-gb': 'cy',\n  'uk-ua': 'uk',\n  'el-gr': 'el',\n  'hu-hu': 'hu',\n  'ro-ro': 'ro',\n  'sk-sk': 'sk',\n  'zh-tw': 'zh-Hant'\n};\n\n/**\n * @internal\n */\nexport type _SupportedSpokenLanguage = keyof SpokenLanguageStrings;\n\n/**\n * @internal\n */\nexport type _SupportedCaptionLanguage = keyof CaptionLanguageStrings;\n\n/**\n * @internal\n */\nexport type SpokenLanguageDropdownOptions = IDropdownOption<SpokenLanguageStrings> & {\n  key: keyof SpokenLanguageStrings;\n};\n\n/**\n * @internal\n */\nexport type CaptionLanguageDropdownOptions = IDropdownOption<CaptionLanguageStrings> & {\n  key: keyof CaptionLanguageStrings;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useCallback } from 'react';\nimport { useMemo, useState, useEffect } from 'react';\nimport { IModalStyles, Modal, Stack, useTheme, Text, IconButton, Dropdown, IDropdownOption, DefaultButton, PrimaryButton } from '@fluentui/react';\nimport { buttonsContainerClassName, buttonStyles, dropdownContainerClassName, dropdownInfoTextStyle, dropdownStyles, themedCaptionsSettingsModalStyle, titleClassName, titleContainerClassName } from './styles/CaptionsSettingsModal.styles';\nimport { _captionsOptions } from './StartCaptionsButton';\nimport { defaultSpokenLanguage } from './utils';\nimport { SpokenLanguageStrings, CaptionLanguageStrings, _spokenLanguageToCaptionLanguage, _SupportedSpokenLanguage, _SupportedCaptionLanguage, SpokenLanguageDropdownOptions, CaptionLanguageDropdownOptions } from '../types';\nimport { _preventDismissOnEvent } from '@internal/acs-ui-common';\n\n/**\n * @internal\n * strings for captions setting modal\n */\nexport interface _CaptionsSettingsModalStrings {\n  captionsSettingsModalTitle?: string;\n  captionsSettingsSpokenLanguageDropdownLabel?: string;\n  captionsSettingsCaptionLanguageDropdownLabel?: string;\n  captionsSettingsSpokenLanguageDropdownInfoText?: string;\n  captionsSettingsCaptionLanguageDropdownInfoText?: string;\n  captionsSettingsConfirmButtonLabel?: string;\n  captionsSettingsCancelButtonLabel?: string;\n  captionsSettingsModalAriaLabel?: string;\n  captionsSettingsCloseModalButtonAriaLabel?: string;\n}\n\n/**\n * @internal\n * _CaptionsSettingsModal Component Props.\n */\nexport interface _CaptionsSettingsModalProps {\n  supportedSpokenLanguages: _SupportedSpokenLanguage[];\n  supportedCaptionLanguages: _SupportedCaptionLanguage[];\n  onSetSpokenLanguage: (language: _SupportedSpokenLanguage) => Promise<void>;\n  onSetCaptionLanguage: (language: _SupportedCaptionLanguage) => Promise<void>;\n  onStartCaptions: (options?: _captionsOptions) => Promise<void>;\n  currentSpokenLanguage: _SupportedSpokenLanguage;\n  currentCaptionLanguage: _SupportedCaptionLanguage;\n  spokenLanguageStrings?: SpokenLanguageStrings;\n  captionLanguageStrings?: CaptionLanguageStrings;\n  isCaptionsFeatureActive?: boolean;\n  strings?: _CaptionsSettingsModalStrings;\n  showModal?: boolean;\n  onDismissCaptionsSettings?: () => void;\n  changeCaptionLanguage?: boolean;\n}\n\n/**\n * @internal\n * a component for setting spoken languages\n */\nexport const _CaptionsSettingsModal = (props: _CaptionsSettingsModalProps): JSX.Element => {\n  const {\n    supportedSpokenLanguages,\n    supportedCaptionLanguages,\n    currentSpokenLanguage,\n    currentCaptionLanguage,\n    isCaptionsFeatureActive,\n    showModal,\n    onSetSpokenLanguage,\n    onSetCaptionLanguage,\n    onDismissCaptionsSettings,\n    onStartCaptions,\n    strings,\n    spokenLanguageStrings,\n    captionLanguageStrings,\n    changeCaptionLanguage = false\n  } = props;\n  const theme = useTheme();\n  const [hasSetSpokenLanguage, setHasSetSpokenLanguage] = useState(false);\n  const [selectedSpokenLanguage, setSelectedSpokenLanguage] = useState<SpokenLanguageDropdownOptions>({\n    key: currentSpokenLanguage || defaultSpokenLanguage,\n    text: currentSpokenLanguage || defaultSpokenLanguage\n  });\n  const [selectedCaptionLanguage, setSelectedCaptionLanguage] = useState<CaptionLanguageDropdownOptions>({\n    key: currentCaptionLanguage || _spokenLanguageToCaptionLanguage[selectedSpokenLanguage.key],\n    text: currentCaptionLanguage || _spokenLanguageToCaptionLanguage[selectedSpokenLanguage.key]\n  });\n  useEffect(() => {\n    // set spoken language when start captions with a spoken language specified.\n    // this is to fix the bug when a second user starts captions with a new spoken language, captions bot ignore that spoken language\n    if (isCaptionsFeatureActive && !hasSetSpokenLanguage) {\n      onSetSpokenLanguage(selectedSpokenLanguage.key);\n      // we only need to call set spoken language once when first starting captions\n      setHasSetSpokenLanguage(true);\n    }\n  }, [isCaptionsFeatureActive, onSetSpokenLanguage, selectedSpokenLanguage.key, hasSetSpokenLanguage]);\n  const onDismiss = useCallback((): void => {\n    if (onDismissCaptionsSettings) {\n      onDismissCaptionsSettings();\n    }\n  }, [onDismissCaptionsSettings]);\n  const onConfirm = useCallback(async (): Promise<void> => {\n    const spokenLanguageCode = selectedSpokenLanguage.key;\n    const captionLanguageCode = selectedCaptionLanguage.key;\n    if (isCaptionsFeatureActive) {\n      onSetSpokenLanguage(spokenLanguageCode);\n      onSetCaptionLanguage(captionLanguageCode);\n    } else {\n      await onStartCaptions({\n        spokenLanguage: spokenLanguageCode\n      });\n    }\n    onDismiss();\n  }, [onDismiss, isCaptionsFeatureActive, onSetSpokenLanguage, onSetCaptionLanguage, onStartCaptions, selectedSpokenLanguage.key, selectedCaptionLanguage.key]);\n  const spokenLanguageDropdownOptions: IDropdownOption[] = useMemo(() => {\n    return supportedSpokenLanguages.map(languageCode => {\n      return {\n        key: languageCode,\n        text: spokenLanguageStrings ? spokenLanguageStrings[languageCode] : languageCode\n      };\n    });\n  }, [supportedSpokenLanguages, spokenLanguageStrings]);\n  const captionLanguageDropdownOptions: IDropdownOption[] = useMemo(() => {\n    return supportedCaptionLanguages.map(languageCode => {\n      return {\n        key: languageCode,\n        text: captionLanguageStrings ? captionLanguageStrings[languageCode] : languageCode\n      };\n    });\n  }, [supportedCaptionLanguages, captionLanguageStrings]);\n  const sortedSpokenLanguageDropdownOptions: IDropdownOption[] = useMemo(() => {\n    const copy = [...spokenLanguageDropdownOptions];\n    return copy.sort((a, b) => a.text > b.text ? 1 : -1);\n  }, [spokenLanguageDropdownOptions]);\n  const sortedCaptionLanguageDropdownOptions: IDropdownOption[] = useMemo(() => {\n    const copy = [...captionLanguageDropdownOptions];\n    return copy.sort((a, b) => a.text > b.text ? 1 : -1);\n  }, [captionLanguageDropdownOptions]);\n  const onSpokenLanguageChange = (event: React.FormEvent<HTMLDivElement>, option: SpokenLanguageDropdownOptions | undefined): void => {\n    if (option) {\n      setSelectedSpokenLanguage(option);\n    }\n  };\n  const onCaptionLanguageChange = (event: React.FormEvent<HTMLDivElement>, option: CaptionLanguageDropdownOptions | undefined): void => {\n    if (option) {\n      setSelectedCaptionLanguage(option);\n    }\n  };\n  const calloutProps = useMemo(() => ({\n    preventDismissOnEvent: _preventDismissOnEvent\n  }), []);\n  const CaptionsSettingsComponent = useCallback((): JSX.Element => {\n    const placeholderSpokenLanguage = currentSpokenLanguage ?? defaultSpokenLanguage;\n    const placeholderCaptionLanguage = currentCaptionLanguage ?? _spokenLanguageToCaptionLanguage[placeholderSpokenLanguage];\n    return <Stack>\n        <Dropdown label={strings?.captionsSettingsSpokenLanguageDropdownLabel} selectedKey={selectedSpokenLanguage ? selectedSpokenLanguage.key : undefined} onChange={(ev, option) => onSpokenLanguageChange(ev, (option as SpokenLanguageDropdownOptions))} calloutProps={calloutProps} placeholder={placeholderSpokenLanguage} options={sortedSpokenLanguageDropdownOptions} styles={dropdownStyles} />\n        <Text className={dropdownInfoTextStyle(theme)}>{strings?.captionsSettingsSpokenLanguageDropdownInfoText}</Text>\n        {changeCaptionLanguage && <>\n            <Dropdown label={strings?.captionsSettingsCaptionLanguageDropdownLabel} selectedKey={selectedCaptionLanguage ? selectedCaptionLanguage.key : undefined} onChange={(ev, option) => onCaptionLanguageChange(ev, (option as CaptionLanguageDropdownOptions))} calloutProps={calloutProps} placeholder={placeholderCaptionLanguage} options={sortedCaptionLanguageDropdownOptions} styles={dropdownStyles} />\n            <Text className={dropdownInfoTextStyle(theme)}>\n              {strings?.captionsSettingsCaptionLanguageDropdownInfoText}\n            </Text>\n          </>}\n      </Stack>;\n  }, [calloutProps, currentSpokenLanguage, currentCaptionLanguage, sortedSpokenLanguageDropdownOptions, sortedCaptionLanguageDropdownOptions, selectedCaptionLanguage, selectedSpokenLanguage, strings?.captionsSettingsSpokenLanguageDropdownInfoText, strings?.captionsSettingsCaptionLanguageDropdownLabel, strings?.captionsSettingsSpokenLanguageDropdownLabel, strings?.captionsSettingsCaptionLanguageDropdownInfoText, theme, changeCaptionLanguage]);\n  const CaptionsSettingsModalStyle: Partial<IModalStyles> = useMemo(() => themedCaptionsSettingsModalStyle(theme), [theme]);\n  return <>\n      {<Modal titleAriaId={strings?.captionsSettingsModalAriaLabel} isOpen={showModal} onDismiss={onDismiss} isBlocking={true} styles={CaptionsSettingsModalStyle}>\n          <Stack horizontal horizontalAlign=\"space-between\" verticalAlign=\"center\" className={titleContainerClassName}>\n            <Text className={titleClassName}>{strings?.captionsSettingsModalTitle}</Text>\n            <IconButton iconProps={{\n          iconName: 'Cancel'\n        }} ariaLabel={strings?.captionsSettingsCloseModalButtonAriaLabel} onClick={onDismiss} style={{\n          color: theme.palette.black\n        }} />\n          </Stack>\n\n          <Stack className={dropdownContainerClassName}>{CaptionsSettingsComponent()}</Stack>\n          <Stack horizontal horizontalAlign=\"end\" className={buttonsContainerClassName}>\n            <PrimaryButton styles={buttonStyles(theme)} onClick={onConfirm}>\n              <span>{strings?.captionsSettingsConfirmButtonLabel}</span>\n            </PrimaryButton>\n            <DefaultButton onClick={onDismiss} styles={buttonStyles(theme)}>\n              <span>{strings?.captionsSettingsCancelButtonLabel}</span>\n            </DefaultButton>\n          </Stack>\n        </Modal>}\n    </>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { PartialDeep } from 'type-fest';\nimport { ComponentStrings } from '..';\nimport en_US from './en-US/strings.json';\nimport { _getKeys } from '@internal/acs-ui-common';\n\n/**\n *\n * @private\n */\nexport const createComponentStrings = (localizedStrings: PartialDeep<ComponentStrings>): ComponentStrings => {\n  const strings: ComponentStrings = {\n    ...en_US\n  };\n  _getKeys(localizedStrings).forEach(key => {\n    // mark the value as unknown because the type changes based on the key.\n    // this is unsafe at runtime as we could assign the wrong type based on the key here.\n    // but typescript isn't smart enough to know that the key used across each access will result in the same type\n    (strings as Record<keyof ComponentStrings, unknown>)[key] = {\n      ...strings[key],\n      ...localizedStrings[key]\n    };\n  });\n  return strings;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport en_GB from './strings.json';\n\n/**\n * Locale for English (GB).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_EN_GB: ComponentLocale = {\n  strings: createComponentStrings(en_GB)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport ar_SA from './strings.json';\n\n/**\n * Locale for Arabic (Saudi Arabia).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_AR_SA: ComponentLocale = {\n  strings: createComponentStrings(ar_SA)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport cs_CZ from './strings.json';\n\n/**\n * Locale for Czech (Czech Republic).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_CS_CZ: ComponentLocale = {\n  strings: createComponentStrings(cs_CZ)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport de_DE from './strings.json';\n\n/**\n * Locale for German (Germany).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_DE_DE: ComponentLocale = {\n  strings: createComponentStrings(de_DE)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport es_ES from './strings.json';\n\n/**\n * Locale for Spanish (Spain).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_ES_ES: ComponentLocale = {\n  strings: createComponentStrings(es_ES)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport fi_FI from './strings.json';\n\n/**\n * Locale for Finnish (Finland).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_FI_FI: ComponentLocale = {\n  strings: createComponentStrings(fi_FI)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport fr_FR from './strings.json';\n\n/**\n * Locale for French (France).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_FR_FR: ComponentLocale = {\n  strings: createComponentStrings(fr_FR)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport he_IL from './strings.json';\n\n/**\n * Locale for Hebrew (Israel).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_HE_IL: ComponentLocale = {\n  strings: createComponentStrings(he_IL)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport it_IT from './strings.json';\n\n/**\n * Locale for Italian (Italy).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_IT_IT: ComponentLocale = {\n  strings: createComponentStrings(it_IT)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport ja_JP from './strings.json';\n\n/**\n * Locale for Japanese (Japan).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_JA_JP: ComponentLocale = {\n  strings: createComponentStrings(ja_JP)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport ko_KR from './strings.json';\n\n/**\n * Locale for Korean (South Korea).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_KO_KR: ComponentLocale = {\n  strings: createComponentStrings(ko_KR)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport nb_NO from './strings.json';\n\n/**\n * Locale for Norwegian Bokml (Norway) .\n *\n * @public\n */\nexport const COMPONENT_LOCALE_NB_NO: ComponentLocale = {\n  strings: createComponentStrings(nb_NO)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport nl_NL from './strings.json';\n\n/**\n * Locale for Dutch (Netherlands).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_NL_NL: ComponentLocale = {\n  strings: createComponentStrings(nl_NL)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport pl_PL from './strings.json';\n\n/**\n * Locale for Polish (Poland).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_PL_PL: ComponentLocale = {\n  strings: createComponentStrings(pl_PL)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport pt_BR from './strings.json';\n\n/**\n * Locale for Portuguese (Brazil).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_PT_BR: ComponentLocale = {\n  strings: createComponentStrings(pt_BR)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport ru_RU from './strings.json';\n\n/**\n * Locale for Russian (Russia).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_RU_RU: ComponentLocale = {\n  strings: createComponentStrings(ru_RU)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport sv_SE from './strings.json';\n\n/**\n * Locale for Swedish (Sweden) .\n *\n * @public\n */\nexport const COMPONENT_LOCALE_SV_SE: ComponentLocale = {\n  strings: createComponentStrings(sv_SE)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport tr_TR from './strings.json';\n\n/**\n * Locale for Turkish (Turkey).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_TR_TR: ComponentLocale = {\n  strings: createComponentStrings(tr_TR)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport zh_CN from './strings.json';\n\n/**\n * Locale for Chinese (Mainland China).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_ZH_CN: ComponentLocale = {\n  strings: createComponentStrings(zh_CN)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createComponentStrings } from '../utils';\nimport type { ComponentLocale } from '../..';\nimport zh_TW from './strings.json';\n\n/**\n * Locale for Chinese (Taiwan).\n *\n * @public\n */\nexport const COMPONENT_LOCALE_ZH_TW: ComponentLocale = {\n  strings: createComponentStrings(zh_TW)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { RemoteParticipantState } from '@internal/calling-stateful-client';\n\n/**\n * @private\n */\nexport const checkIsSpeaking = (participant: RemoteParticipantState): boolean => participant.isSpeaking && !participant.isMuted;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { DominantSpeakersInfo, RemoteParticipantState as RemoteParticipantConnectionState } from '@azure/communication-calling';\nimport { memoizeFnAll, toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { RemoteParticipantState, RemoteVideoStreamState } from '@internal/calling-stateful-client';\nimport { VideoGalleryRemoteParticipant, VideoGalleryStream } from '@internal/react-components';\nimport memoizeOne from 'memoize-one';\nimport { _isRingingPSTNParticipant } from './callUtils';\nimport { checkIsSpeaking } from './SelectorUtils';\nimport { isPhoneNumberIdentifier } from '@azure/communication-common';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHandState } from '@internal/calling-stateful-client';\n/** @internal */\nexport const _dominantSpeakersWithFlatId = (dominantSpeakers?: DominantSpeakersInfo): undefined | string[] => {\n  return dominantSpeakers?.speakersList?.map(toFlatCommunicationIdentifier);\n};\n\n/** @internal */\nexport type _VideoGalleryRemoteParticipantsMemoFn = (remoteParticipants: RemoteParticipantState[] | undefined) => VideoGalleryRemoteParticipant[];\n\n/** @internal */\nexport const _videoGalleryRemoteParticipantsMemo: _VideoGalleryRemoteParticipantsMemoFn = (remoteParticipants: RemoteParticipantState[] | undefined, isHideAttendeeNamesEnabled?: boolean): VideoGalleryRemoteParticipant[] => {\n  if (!remoteParticipants) {\n    return [];\n  }\n  return memoizedAllConvertRemoteParticipant(memoizedFn => {\n    return Object.values(remoteParticipants)\n    /**\n     * hiding participants who are inLobby, idle, or connecting in ACS clients till we can admit users through ACS clients.\n     * phone users will be in the connecting state until they are connected to the call.\n     */.filter((participant: RemoteParticipantState) => {\n      return !['InLobby', 'Idle', 'Connecting', 'Disconnected'].includes(participant.state) || isPhoneNumberIdentifier(participant.identifier);\n    }).map((participant: RemoteParticipantState) => {\n      const state = _isRingingPSTNParticipant(participant);\n      let displayName = participant.displayName;\n      return memoizedFn(toFlatCommunicationIdentifier(participant.identifier), participant.isMuted, checkIsSpeaking(participant), participant.videoStreams, state, displayName, /* @conditional-compile-remove(raise-hand) */\n      participant.raisedHand);\n    });\n  });\n};\nconst memoizedAllConvertRemoteParticipant = memoizeFnAll((userId: string, isMuted: boolean, isSpeaking: boolean, videoStreams: {\n  [key: number]: RemoteVideoStreamState;\n}, state: RemoteParticipantConnectionState, displayName?: string, raisedHand?: unknown, reaction?: unknown, spotlight?: unknown, contentSharingStream?: HTMLElement): VideoGalleryRemoteParticipant => {\n  return convertRemoteParticipantToVideoGalleryRemoteParticipant(userId, isMuted, isSpeaking, videoStreams, state, displayName, ( /* @conditional-compile-remove(raise-hand) */\n  raisedHand as RaisedHandState));\n});\n\n/** @private */\nexport const convertRemoteParticipantToVideoGalleryRemoteParticipant = (userId: string, isMuted: boolean, isSpeaking: boolean, videoStreams: {\n  [key: number]: RemoteVideoStreamState;\n}, state: RemoteParticipantConnectionState, displayName?: string, raisedHand?: unknown, reaction?: unknown, spotlight?: unknown, contentSharingStream?: HTMLElement): VideoGalleryRemoteParticipant => {\n  const rawVideoStreamsArray = Object.values(videoStreams);\n  let videoStream: VideoGalleryStream | undefined = undefined;\n  let screenShareStream: VideoGalleryStream | undefined = undefined;\n  const sdkRemoteVideoStream = Object.values(rawVideoStreamsArray).find(i => i.mediaStreamType === 'Video' && i.isAvailable) || Object.values(rawVideoStreamsArray).find(i => i.mediaStreamType === 'Video');\n  const sdkScreenShareStream = Object.values(rawVideoStreamsArray).find(i => i.mediaStreamType === 'ScreenSharing' && i.isAvailable) || Object.values(rawVideoStreamsArray).find(i => i.mediaStreamType === 'ScreenSharing');\n  if (sdkRemoteVideoStream) {\n    videoStream = convertRemoteVideoStreamToVideoGalleryStream(sdkRemoteVideoStream);\n  }\n  if (sdkScreenShareStream) {\n    screenShareStream = convertRemoteVideoStreamToVideoGalleryStream(sdkScreenShareStream);\n  }\n  return {\n    userId,\n    displayName,\n    isMuted,\n    isSpeaking,\n    videoStream,\n    screenShareStream,\n    isScreenSharingOn: screenShareStream !== undefined && screenShareStream.isAvailable,\n    /* @conditional-compile-remove(raise-hand) */\n    raisedHand: (raisedHand as RaisedHandState)\n  };\n};\nconst convertRemoteVideoStreamToVideoGalleryStream = (stream: RemoteVideoStreamState): VideoGalleryStream => {\n  return {\n    id: stream.id,\n    isAvailable: stream.isAvailable,\n    isMirrored: stream.view?.isMirrored,\n    renderElement: stream.view?.target,\n    scalingMode: stream.view?.scalingMode,\n    streamSize: stream.streamSize\n  };\n};\n/** @private */\nexport const memoizeLocalParticipant = memoizeOne((identifier, displayName, isMuted, isScreenSharingOn, localVideoStream, /* @conditional-compile-remove(rooms) */role, /* @conditional-compile-remove(raise-hand) */raisedHand) => ({\n  userId: identifier,\n  displayName: displayName ?? '',\n  isMuted: isMuted,\n  isScreenSharingOn: isScreenSharingOn,\n  videoStream: {\n    isAvailable: !!localVideoStream,\n    isMirrored: localVideoStream?.view?.isMirrored,\n    renderElement: localVideoStream?.view?.target\n  },\n  /* @conditional-compile-remove(rooms) */\n  role,\n  /* @conditional-compile-remove(raise-hand) */\n  raisedHand: raisedHand\n}));","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createSelector } from 'reselect';\nimport { getRemoteParticipants } from './baseSelectors';\nimport { RemoteParticipantState } from '@internal/calling-stateful-client';\n\n/**\n * @private\n */\nexport const getRemoteParticipantsExcludingConsumers = createSelector([getRemoteParticipants], (remoteParticipants): {\n  [keys: string]: RemoteParticipantState;\n} | undefined => {\n  /* @conditional-compile-remove(rooms) */\n  {\n    const newRemoteParticipants = {\n      ...remoteParticipants\n    };\n    Object.keys(newRemoteParticipants).forEach(k => {\n      if (newRemoteParticipants[k].role === 'Consumer') {\n        delete newRemoteParticipants[k];\n      }\n    });\n    return newRemoteParticipants;\n  }\n  return remoteParticipants;\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { CallClientState, RemoteParticipantState } from '@internal/calling-stateful-client';\nimport { VideoGalleryRemoteParticipant, VideoGalleryLocalParticipant } from '@internal/react-components';\nimport { createSelector } from 'reselect';\nimport { CallingBaseSelectorProps, getDisplayName, getDominantSpeakers, getIdentifier, getIsMuted, getIsScreenSharingOn, getLocalVideoStreams, getScreenShareRemoteParticipant } from './baseSelectors';\n/* @conditional-compile-remove(rooms) */\nimport { getRole } from './baseSelectors';\n/* @conditional-compile-remove(optimal-video-count) */\nimport { getOptimalVideoCount } from './baseSelectors';\nimport { _updateUserDisplayNames } from './utils/callUtils';\nimport { checkIsSpeaking } from './utils/SelectorUtils';\nimport { _videoGalleryRemoteParticipantsMemo, _dominantSpeakersWithFlatId, convertRemoteParticipantToVideoGalleryRemoteParticipant, memoizeLocalParticipant } from './utils/videoGalleryUtils';\n/* @conditional-compile-remove(raise-hand) */\nimport { getLocalParticipantRaisedHand } from './baseSelectors';\nimport { getRemoteParticipantsExcludingConsumers } from './getRemoteParticipantsExcludingConsumers';\n/**\n * Selector type for {@link VideoGallery} component.\n *\n * @public\n */\nexport type VideoGallerySelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  screenShareParticipant?: VideoGalleryRemoteParticipant;\n  localParticipant: VideoGalleryLocalParticipant;\n  remoteParticipants: VideoGalleryRemoteParticipant[];\n  dominantSpeakers?: string[];\n  /* @conditional-compile-remove(optimal-video-count) */\n  optimalVideoCount?: number;\n};\n\n/**\n * Provides data attributes to {@link VideoGallery} component.\n * @public\n */\nexport const videoGallerySelector: VideoGallerySelector = createSelector([getScreenShareRemoteParticipant, getRemoteParticipantsExcludingConsumers, getLocalVideoStreams, getIsMuted, getIsScreenSharingOn, getDisplayName, getIdentifier, getDominantSpeakers, /* @conditional-compile-remove(optimal-video-count) */\ngetOptimalVideoCount, /* @conditional-compile-remove(rooms) */\ngetRole, /* @conditional-compile-remove(raise-hand) */\ngetLocalParticipantRaisedHand], (screenShareRemoteParticipantId, remoteParticipants, localVideoStreams, isMuted, isScreenSharingOn, displayName: string | undefined, identifier: string, dominantSpeakers, /* @conditional-compile-remove(optimal-video-count) */\noptimalVideoCount, /* @conditional-compile-remove(rooms) */\nrole, /* @conditional-compile-remove(raise-hand) */\nraisedHand) => {\n  const screenShareRemoteParticipant = screenShareRemoteParticipantId && remoteParticipants ? remoteParticipants[screenShareRemoteParticipantId] : undefined;\n  const localVideoStream = localVideoStreams?.find(i => i.mediaStreamType === 'Video');\n  const dominantSpeakerIds = _dominantSpeakersWithFlatId(dominantSpeakers);\n  const dominantSpeakersMap: Record<string, number> = {};\n  dominantSpeakerIds?.forEach((speaker, idx) => dominantSpeakersMap[speaker] = idx);\n  const noRemoteParticipants: RemoteParticipantState[] = [];\n  return {\n    screenShareParticipant: screenShareRemoteParticipant ? convertRemoteParticipantToVideoGalleryRemoteParticipant(toFlatCommunicationIdentifier(screenShareRemoteParticipant.identifier), screenShareRemoteParticipant.isMuted, checkIsSpeaking(screenShareRemoteParticipant), screenShareRemoteParticipant.videoStreams, screenShareRemoteParticipant.state, screenShareRemoteParticipant.displayName, /* @conditional-compile-remove(raise-hand) */\n    screenShareRemoteParticipant.raisedHand) : undefined,\n    localParticipant: memoizeLocalParticipant(identifier, displayName, isMuted, isScreenSharingOn, localVideoStream, /* @conditional-compile-remove(rooms) */\n    role, /* @conditional-compile-remove(raise-hand) */\n    raisedHand),\n    remoteParticipants: _videoGalleryRemoteParticipantsMemo(updateUserDisplayNamesTrampoline(remoteParticipants ? Object.values(remoteParticipants) : noRemoteParticipants)),\n    dominantSpeakers: dominantSpeakerIds,\n    /* @conditional-compile-remove(optimal-video-count) */\n    maxRemoteVideoStreams: optimalVideoCount\n  };\n});\nconst updateUserDisplayNamesTrampoline = (remoteParticipants: RemoteParticipantState[]): RemoteParticipantState[] => {\n  return remoteParticipants;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { RemoteParticipantState } from '@azure/communication-calling';\nimport { getIdentifierKind } from '@azure/communication-common';\nimport { fromFlatCommunicationIdentifier, memoizeFnAll } from '@internal/acs-ui-common';\nimport { CallParticipantListParticipant } from '@internal/react-components';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHandState } from '@internal/calling-stateful-client';\n/**\n * @private\n */\nexport const memoizedConvertAllremoteParticipants = memoizeFnAll((userId: string, displayName: string | undefined, state: RemoteParticipantState, isMuted: boolean, isScreenSharing: boolean, isSpeaking: boolean, raisedHand: RaisedHandState | undefined, localUserCanRemoveOthers: boolean): CallParticipantListParticipant => {\n  return convertRemoteParticipantToParticipantListParticipant(userId, displayName, state, isMuted, isScreenSharing, isSpeaking, raisedHand, localUserCanRemoveOthers);\n});\nconst convertRemoteParticipantToParticipantListParticipant = (userId: string, displayName: string | undefined, state: RemoteParticipantState, isMuted: boolean, isScreenSharing: boolean, isSpeaking: boolean, raisedHand: RaisedHandState | undefined, localUserCanRemoveOthers: boolean): CallParticipantListParticipant => {\n  const identifier = fromFlatCommunicationIdentifier(userId);\n  return {\n    userId,\n    displayName,\n    state,\n    isMuted,\n    isScreenSharing,\n    isSpeaking,\n    // ACS users can not remove Teams users.\n    // Removing unknown types of users is undefined.\n    isRemovable: (getIdentifierKind(identifier).kind === 'communicationUser' || getIdentifierKind(identifier).kind === 'phoneNumber') && localUserCanRemoveOthers\n  };\n};\n\n/* @conditional-compile-remove(rooms) */\n/**\n * @private\n */\nexport const memoizedConvertAllremoteParticipantsBetaRelease = memoizeFnAll((userId: string, displayName: string | undefined, state: RemoteParticipantState, isMuted: boolean, isScreenSharing: boolean, isSpeaking: boolean, raisedHand: RaisedHandState | undefined, localUserCanRemoveOthers: boolean): CallParticipantListParticipant => {\n  return convertRemoteParticipantToParticipantListParticipantBetaRelease(userId, displayName, state, isMuted, isScreenSharing, isSpeaking, raisedHand, localUserCanRemoveOthers);\n});\n/* @conditional-compile-remove(rooms) */\nconst convertRemoteParticipantToParticipantListParticipantBetaRelease = (userId: string, displayName: string | undefined, state: RemoteParticipantState, isMuted: boolean, isScreenSharing: boolean, isSpeaking: boolean, raisedHand: RaisedHandState | undefined, localUserCanRemoveOthers: boolean): CallParticipantListParticipant => {\n  return {\n    ...convertRemoteParticipantToParticipantListParticipant(userId, displayName, state, isMuted, isScreenSharing, isSpeaking, raisedHand, localUserCanRemoveOthers)\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallClientState, RemoteParticipantState } from '@internal/calling-stateful-client';\nimport { createSelector } from 'reselect';\nimport { getIdentifier, getDisplayName, getIsScreenSharingOn, getIsMuted, CallingBaseSelectorProps } from './baseSelectors';\nimport { getRole } from './baseSelectors';\nimport { CallParticipantListParticipant } from '@internal/react-components';\nimport { _isRingingPSTNParticipant, _updateUserDisplayNames } from './utils/callUtils';\nimport { memoizedConvertAllremoteParticipants } from './utils/participantListSelectorUtils';\n/* @conditional-compile-remove(rooms) */\nimport { memoizedConvertAllremoteParticipantsBetaRelease } from './utils/participantListSelectorUtils';\n/* @conditional-compile-remove(raise-hand) */\nimport { getLocalParticipantRaisedHand } from './baseSelectors';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { getParticipantCount } from './baseSelectors';\nimport { isMicrosoftTeamsAppIdentifier, isPhoneNumberIdentifier } from '@azure/communication-common';\nimport { ParticipantRole, SpotlightedParticipant } from '@azure/communication-calling';\nimport { getRemoteParticipantsExcludingConsumers } from './getRemoteParticipantsExcludingConsumers';\nconst convertRemoteParticipantsToParticipantListParticipants = (remoteParticipants: RemoteParticipantState[], localUserCanRemoveOthers: boolean, isHideAttendeeNamesEnabled?: boolean, localUserRole?: ParticipantRole, spotlightedParticipants?: SpotlightedParticipant[]): CallParticipantListParticipant[] => {\n  const conversionCallback = (memoizeFn: (...args: any[]) => CallParticipantListParticipant): CallParticipantListParticipant[] => {\n    return remoteParticipants\n    // Filter out MicrosoftBot participants\n    .filter((participant: RemoteParticipantState) => {\n      return !isMicrosoftTeamsAppIdentifier(participant.identifier);\n      return true;\n    })\n    /**\n     * hiding participants who are inLobby, idle, or connecting in ACS clients till we can admit users through ACS clients.\n     * phone users will be in the connecting state until they are connected to the call.\n     */.filter(participant => {\n      return !['InLobby', 'Idle', 'Connecting', 'Disconnected'].includes(participant.state) || isPhoneNumberIdentifier(participant.identifier);\n    }).map((participant: RemoteParticipantState) => {\n      const isScreenSharing = Object.values(participant.videoStreams).some(videoStream => videoStream.mediaStreamType === 'ScreenSharing' && videoStream.isAvailable);\n      /**\n       * We want to check the participant to see if they are a PSTN participant joining the call\n       * and mapping their state to be 'Ringing'\n       */\n      const state = _isRingingPSTNParticipant(participant);\n      let displayName = participant.displayName;\n      return memoizeFn(toFlatCommunicationIdentifier(participant.identifier), displayName, state, participant.isMuted, isScreenSharing, participant.isSpeaking, /* @conditional-compile-remove(raise-hand) */\n      participant.raisedHand, localUserCanRemoveOthers);\n    }).sort((a, b) => {\n      const nameA = a.displayName?.toLowerCase() || '';\n      const nameB = b.displayName?.toLowerCase() || '';\n      if (nameA < nameB) {\n        return -1;\n      } else if (nameA > nameB) {\n        return 1;\n      } else {\n        return 0;\n      }\n    });\n  };\n  /* @conditional-compile-remove(rooms) */\n  return memoizedConvertAllremoteParticipantsBetaRelease(conversionCallback);\n  return memoizedConvertAllremoteParticipants(conversionCallback);\n};\n\n/**\n * Selector type for {@link ParticipantList} component.\n *\n * @public\n */\nexport type ParticipantListSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  participants: CallParticipantListParticipant[];\n  myUserId: string;\n};\n\n/**\n * Selects data that drives {@link ParticipantList} component.\n *\n * @public\n */\nexport const participantListSelector: ParticipantListSelector = createSelector([getIdentifier, getDisplayName, getRemoteParticipantsExcludingConsumers, getIsScreenSharingOn, getIsMuted, /* @conditional-compile-remove(raise-hand) */getLocalParticipantRaisedHand, getRole, getParticipantCount], (userId, displayName, remoteParticipants, isScreenSharingOn, isMuted, /* @conditional-compile-remove(raise-hand) */\nraisedHand, role, partitipantCount): {\n  participants: CallParticipantListParticipant[];\n  myUserId: string;\n  totalParticipantCount?: number;\n} => {\n  const localUserCanRemoveOthers = localUserCanRemoveOthersTrampoline(role);\n  const participants = remoteParticipants ? convertRemoteParticipantsToParticipantListParticipants(updateUserDisplayNamesTrampoline(Object.values(remoteParticipants)), localUserCanRemoveOthers) : [];\n  participants.push({\n    userId: userId,\n    displayName: displayName,\n    isScreenSharing: isScreenSharingOn,\n    isMuted: isMuted,\n    /* @conditional-compile-remove(raise-hand) */\n    raisedHand: raisedHand,\n    state: 'Connected',\n    // Local participant can never remove themselves.\n    isRemovable: false\n  });\n  return {\n    participants: participants,\n    myUserId: userId\n  };\n});\nconst updateUserDisplayNamesTrampoline = (remoteParticipants: RemoteParticipantState[]): RemoteParticipantState[] => {\n  return remoteParticipants;\n};\nconst localUserCanRemoveOthersTrampoline = (role?: string): boolean => {\n  /* @conditional-compile-remove(rooms) */\n  return role === 'Presenter' || role === 'Unknown' || role === undefined;\n  return true;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallParticipantListParticipant } from '@internal/react-components';\nimport { participantListSelector } from './participantListSelector';\nimport { CallClientState } from '@internal/calling-stateful-client';\nimport { CallingBaseSelectorProps } from '.';\nimport { createSelector } from 'reselect';\n\n/**\n * Selector type for {@link ParticipantsButton} component.\n *\n * @public\n */\nexport type ParticipantsButtonSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  participants: CallParticipantListParticipant[];\n  myUserId: string;\n};\n\n/**\n * Selects data that drives {@link ParticipantsButton} component.\n *\n * @public\n */\nexport const participantsButtonSelector: ParticipantsButtonSelector = createSelector([participantListSelector], (participantListProps): {\n  participants: CallParticipantListParticipant[];\n  myUserId: string;\n} => {\n  return participantListProps;\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { Common } from '@internal/acs-ui-common';\nimport { StatefulCallClient, StatefulDeviceManager, CallAgentCommon, CallCommon, _isACSCall, _isACSCallAgent } from '@internal/calling-stateful-client';\nimport { ReactElement } from 'react';\nimport { createDefaultCallingHandlers } from './createHandlers';\nimport { CommonCallingHandlers } from './createCommonHandlers';\n\n/**\n * Create a set of default handlers for given component. Memoization is applied to the result. Multiple invocations with\n * the same arguments will return the same handler instances. DeclarativeCallAgent, DeclarativeDeviceManager, and\n * DeclarativeCall may be undefined. If undefined, their associated handlers will not be created and returned.\n *\n * @param callClient - StatefulCallClient returned from\n *   {@link @azure/communication-react#createStatefulCallClient}.\n * @param callAgent - Instance of {@link @azure/communication-calling#CallClient}.\n * @param deviceManager - Instance of {@link @azure/communication-calling#DeviceManager}.\n * @param call - Instance of {@link @azure/communication-calling#Call}.\n * @param _ - React component that you want to generate handlers for.\n *\n * @public\n */\nexport const createDefaultCallingHandlersForComponent = <Props,>(callClient: StatefulCallClient, callAgent: CallAgentCommon | undefined, deviceManager: StatefulDeviceManager | undefined, call: CallCommon | undefined, _Component: (props: Props) => ReactElement | null): Common<CommonCallingHandlers, Props> => {\n  if (!callAgent && !call && !deviceManager) {\n    return createDefaultCallingHandlers(callClient, callAgent, deviceManager, call);\n  }\n  if (callAgent && _isACSCallAgent(callAgent) && (!call || call && _isACSCall(call))) {\n    return createDefaultCallingHandlers(callClient, callAgent, deviceManager, call);\n  }\n  throw new Error('CallAgent type and Call type are not compatible!');\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ReactElement, useContext } from 'react';\nimport { StatefulCallClient, _isACSCall, _isACSCallAgent, _isTeamsCall, _isTeamsCallAgent } from '@internal/calling-stateful-client';\nimport { createDefaultCallingHandlersForComponent } from '../handlers/createDefaultCallingHandlersForComponent';\nimport { CallAgentContext, CallClientContext, CallContext, useDeviceManager } from '../providers';\n\n/**\n * Hook to obtain a handler for a specified component.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/explicit-function-return-type\nexport const useHandlers = <PropsT,>(component: (props: PropsT) => ReactElement | null) => {\n  const callClient: StatefulCallClient = (useContext(CallClientContext) as any)?.callClient;\n  const deviceManager = useDeviceManager();\n  const call = useContext(CallContext)?.call;\n  const callAgent = useContext(CallAgentContext)?.callAgent;\n  if (!callClient) {\n    return undefined;\n  }\n\n  // Handle edge case, validate if call and callAgent are the same type (ACS/Teams)\n  if (callAgent && _isTeamsCallAgent(callAgent)) {\n    if (call && !_isTeamsCall(call)) {\n      throw new Error('A TeamsCall must be provided when callAgent is TeamsCallAgent');\n    }\n  }\n  if (callAgent && _isACSCallAgent(callAgent)) {\n    if (call && !_isACSCall(call)) {\n      throw new Error('A regular ACS Call must be provided when callAgent is regular CallAgent');\n    }\n  }\n  return createDefaultCallingHandlersForComponent(callClient, callAgent, deviceManager, call, component);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallClientState, StatefulCallClient } from '@internal/calling-stateful-client';\nimport { CallClientContext, CallContext } from '../providers';\nimport { useState, useEffect, useRef, useMemo, useContext } from 'react';\n\n/**\n * Hook to obtain a selector for a specified component.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const useSelector = <SelectorT extends (state: CallClientState, props: any) => any, ParamT extends SelectorT | undefined>(selector: ParamT, selectorProps?: Parameters<SelectorT>[1]): ParamT extends SelectorT ? ReturnType<SelectorT> : undefined => {\n  const callClient: StatefulCallClient | undefined = useContext(CallClientContext)?.callClient;\n  const callId = useContext(CallContext)?.call?.id;\n\n  // Keeps track of whether the current component is mounted or not. If it has unmounted, make sure we do not modify the\n  // state or it will cause React warnings in the console. https://skype.visualstudio.com/SPOOL/_workitems/edit/2453212\n  const mounted = useRef(false);\n  useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  });\n  const callIdConfigProps = useMemo(() => ({\n    callId\n  }), [callId]);\n  const [props, setProps] = useState(callClient && selector ? selector(callClient.getState(), selectorProps ?? callIdConfigProps) : undefined);\n  const propRef = useRef(props);\n  propRef.current = props;\n  useEffect(() => {\n    if (!callClient || !selector) {\n      return;\n    }\n    const onStateChange = (state: CallClientState): void => {\n      if (!mounted.current) {\n        return;\n      }\n      const newProps = selector(state, selectorProps ?? callIdConfigProps);\n      if (propRef.current !== newProps) {\n        setProps(newProps);\n      }\n    };\n    callClient.onStateChange(onStateChange);\n    return () => {\n      callClient.offStateChange(onStateChange);\n    };\n  }, [callClient, selector, selectorProps, callIdConfigProps, mounted]);\n  return selector ? props : undefined;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallingBaseSelectorProps, getDeviceManager, getDiagnostics, getLatestErrors, getEnvironmentInfo } from './baseSelectors';\nimport { ActiveErrorMessage, ErrorType } from '@internal/react-components';\nimport { createSelector } from 'reselect';\nimport { CallClientState, CallErrors, CallErrorTarget } from '@internal/calling-stateful-client';\nimport { DiagnosticQuality } from '@azure/communication-calling';\n/**\n * Selector type for {@link ErrorBar} component.\n *\n * @public\n */\nexport type ErrorBarSelector = (state: CallClientState, props: CallingBaseSelectorProps) => {\n  activeErrorMessages: ActiveErrorMessage[];\n};\n\n/**\n * Select the first 3 active errors from the state for the `ErrorBar` component.\n *\n * In case there are many errors, only the first three errors are returned to avoid\n * filling up the UI with too many errors.\n *\n * Invariants:\n *   - `ErrorType` is never repeated in the returned errors.\n *   - Errors are returned in a fixed order by `ErrorType`.\n *\n * @public\n */\nexport const errorBarSelector: ErrorBarSelector = createSelector([getLatestErrors, getDiagnostics, getDeviceManager, getEnvironmentInfo], (latestErrors: CallErrors, diagnostics, deviceManager, environmentInfo): {\n  activeErrorMessages: ActiveErrorMessage[];\n} => {\n  // The order in which the errors are returned is significant: The `ErrorBar` shows errors on the UI in that order.\n  // There are several options for the ordering:\n  //   - Sorted by when the errors happened (latest first / oldest first).\n  //   - Stable sort by error type.\n  //\n  // We chose to stable sort by error type: We intend to show only a small number of errors on the UI and we do not\n  // have timestamps for errors.\n  const activeErrorMessages: ActiveErrorMessage[] = [];\n  const isSafari = (): boolean => {\n    return /^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent);\n  };\n  const isMacOS = (): boolean => {\n    return false;\n  };\n\n  // Errors reported via diagnostics are more reliable than from API method failures, so process those first.\n  if (diagnostics?.network.latest.networkReceiveQuality?.value === DiagnosticQuality.Bad || diagnostics?.network.latest.networkReceiveQuality?.value === DiagnosticQuality.Poor) {\n    activeErrorMessages.push({\n      type: 'callNetworkQualityLow'\n    });\n  }\n  if (diagnostics?.media.latest.noSpeakerDevicesEnumerated?.value === true) {\n    activeErrorMessages.push({\n      type: 'callNoSpeakerFound'\n    });\n  }\n  if (diagnostics?.media.latest.noMicrophoneDevicesEnumerated?.value === true) {\n    activeErrorMessages.push({\n      type: 'callNoMicrophoneFound'\n    });\n  }\n  if (deviceManager.deviceAccess?.audio === false && isSafari()) {\n    activeErrorMessages.push({\n      type: 'callMicrophoneAccessDeniedSafari'\n    });\n  }\n  if (deviceManager.deviceAccess?.audio === false && !isSafari()) {\n    activeErrorMessages.push({\n      type: 'callMicrophoneAccessDenied'\n    });\n  }\n  if (diagnostics?.media.latest.microphonePermissionDenied?.value === true && isMacOS()) {\n    activeErrorMessages.push({\n      type: 'callMacOsMicrophoneAccessDenied'\n    });\n  } else if (diagnostics?.media.latest.microphonePermissionDenied?.value === true) {\n    activeErrorMessages.push({\n      type: 'callMicrophoneAccessDenied'\n    });\n  }\n  const microphoneMuteUnexpectedlyDiagnostic = diagnostics?.media.latest.microphoneMuteUnexpectedly || diagnostics?.media.latest.microphoneNotFunctioning;\n  if (microphoneMuteUnexpectedlyDiagnostic) {\n    if (microphoneMuteUnexpectedlyDiagnostic.value === DiagnosticQuality.Bad) {\n      // Inform the user that microphone stopped working and inform them to start microphone again\n      activeErrorMessages.push({\n        type: 'callMicrophoneMutedBySystem'\n      });\n    } else if (microphoneMuteUnexpectedlyDiagnostic.value === DiagnosticQuality.Good) {\n      // Inform the user that microphone recovered\n      activeErrorMessages.push({\n        type: 'callMicrophoneUnmutedBySystem'\n      });\n    }\n  }\n  const cameraStoppedUnexpectedlyDiagnostic = diagnostics?.media.latest.cameraStoppedUnexpectedly;\n  if (cameraStoppedUnexpectedlyDiagnostic) {\n    if (cameraStoppedUnexpectedlyDiagnostic.value === DiagnosticQuality.Bad) {\n      // Inform the user that camera stopped working and inform them to start video again\n      activeErrorMessages.push({\n        type: 'callVideoStoppedBySystem'\n      });\n    } else if (cameraStoppedUnexpectedlyDiagnostic.value === DiagnosticQuality.Good) {\n      // Inform the user that camera recovered\n      activeErrorMessages.push({\n        type: 'callVideoRecoveredBySystem'\n      });\n    }\n  }\n  if (deviceManager.deviceAccess?.video === false && isSafari()) {\n    activeErrorMessages.push({\n      type: 'callCameraAccessDeniedSafari'\n    });\n  } else if (deviceManager.deviceAccess?.video === false) {\n    activeErrorMessages.push({\n      type: 'callCameraAccessDenied'\n    });\n  } else {\n    if (diagnostics?.media.latest.cameraFreeze?.value === true) {\n      activeErrorMessages.push({\n        type: 'cameraFrozenForRemoteParticipants'\n      });\n    }\n  }\n\n  /**\n   * show the Mac specific strings if the platform is detected as mac\n   */\n  if (diagnostics?.media.latest.cameraPermissionDenied?.value === true && isMacOS()) {\n    activeErrorMessages.push({\n      type: 'callMacOsCameraAccessDenied'\n    });\n  }\n\n  /**\n   * This UFD only works on mac still so we should only see it fire on mac.\n   */\n  if (diagnostics?.media.latest.screenshareRecordingDisabled?.value === true && isMacOS()) {\n    activeErrorMessages.push({\n      type: 'callMacOsScreenShareAccessDenied'\n    });\n  } else if (diagnostics?.media.latest.screenshareRecordingDisabled?.value === true) {\n    activeErrorMessages.push({\n      type: 'startScreenShareGeneric'\n    });\n  }\n\n  // Prefer to show errors with privacy implications.\n  appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'Call.stopVideo', 'stopVideoGeneric');\n  appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'Call.mute', 'muteGeneric');\n  appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'Call.stopScreenSharing', 'stopScreenShareGeneric');\n  if (latestErrors['Call.startVideo']?.message === 'Call.startVideo: Video operation failure SourceUnavailableError') {\n    appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'Call.startVideo', 'callCameraAlreadyInUse');\n  } else if (latestErrors['Call.startVideo']?.message === 'Call.startVideo: Video operation failure permissionDeniedError') {\n    appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'Call.startVideo', 'callCameraAccessDenied');\n  } else {\n    appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'Call.startVideo', 'startVideoGeneric');\n  }\n  appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'Call.unmute', 'unmuteGeneric');\n  /* @conditional-compile-remove(video-background-effects) */\n  appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'VideoEffectsFeature.startEffects', 'unableToStartVideoEffect');\n  if (latestErrors['CallAgent.join']?.message === 'CallAgent.join: Invalid meeting link') {\n    appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'CallAgent.join', 'failedToJoinCallInvalidMeetingLink');\n  } else {\n    appendActiveErrorIfDefined(activeErrorMessages, latestErrors, 'CallAgent.join', 'failedToJoinCallGeneric');\n  }\n  // We only return the first few errors to avoid filling up the UI with too many `MessageBar`s.\n  activeErrorMessages.splice(maxErrorCount);\n  return {\n    activeErrorMessages: activeErrorMessages\n  };\n});\nconst appendActiveErrorIfDefined = (activeErrorMessages: ActiveErrorMessage[], latestErrors: CallErrors, target: CallErrorTarget, activeErrorType: ErrorType): void => {\n  if (latestErrors[target] === undefined) {\n    return;\n  }\n  activeErrorMessages.push({\n    type: activeErrorType,\n    timestamp: latestErrors[target].timestamp\n  });\n};\nconst maxErrorCount = 3;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CameraButton, EndCallButton, ErrorBar, MicrophoneButton, DevicesButton, ParticipantList, ScreenShareButton, VideoGallery } from '@internal/react-components';\n/* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\nimport { Dialpad } from '@internal/react-components';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaiseHandButton } from '@internal/react-components';\n/* @conditional-compile-remove(raise-hand) */\nimport { raiseHandButtonSelector } from '../callControlSelectors';\nimport { CameraButtonSelector, cameraButtonSelector, MicrophoneButtonSelector, microphoneButtonSelector, DevicesButtonSelector, devicesButtonSelector, ScreenShareButtonSelector, screenShareButtonSelector } from '../callControlSelectors';\nimport { VideoGallerySelector, videoGallerySelector } from '../videoGallerySelector';\nimport { ParticipantListSelector, participantListSelector } from '../participantListSelector';\nimport { ParticipantsButtonSelector, participantsButtonSelector } from '../participantsButtonSelector';\nimport { useHandlers } from './useHandlers';\nimport { useSelector } from './useSelector';\nimport { Common } from '@internal/acs-ui-common';\nimport { AreEqual } from '@internal/acs-ui-common';\nimport { ParticipantsButton } from '@internal/react-components';\nimport { ErrorBarSelector, errorBarSelector } from '../errorBarSelector';\nimport { CommonCallingHandlers } from '../handlers/createCommonHandlers';\n/**\n * Primary hook to get all hooks necessary for a calling Component.\n *\n * Most straightforward usage of calling components looks like:\n *\n * @example\n * ```\n *     import { ParticipantList, usePropsFor } from '@azure/communication-react';\n *\n *     const App = (): JSX.Element => {\n *         // ... code to setup Providers ...\n *\n *         return <ParticipantList {...usePropsFor(ParticipantList)}/>\n *     }\n * ```\n *\n * @public\n */\nexport const usePropsFor = <Component extends (props: any) => JSX.Element,>(component: Component): GetSelector<Component> extends (props: any) => any ? ReturnType<GetSelector<Component>> & Common<CommonCallingHandlers, Parameters<Component>[0]> : undefined => {\n  const selector = getSelector(component);\n  const props = useSelector(selector);\n  const handlers = useHandlers<Parameters<Component>[0]>(component);\n  if (props !== undefined) {\n    return ({\n      ...props,\n      ...handlers\n    } as any);\n  }\n  return (undefined as any);\n};\n\n/**\n * A type for trivial selectors that return no data.\n *\n * Used as a default return value if {@link usePropsFor} is called for a component that requires no data.\n *\n * @public\n */\nexport type EmptySelector = () => Record<string, never>;\nconst emptySelector: EmptySelector = (): Record<string, never> => ({});\n\n/**\n * Specific type of the selector applicable to a given Component.\n *\n * @public\n */\nexport type GetSelector<Component extends (props: any) => JSX.Element | undefined> = AreEqual<Component, typeof VideoGallery> extends true ? VideoGallerySelector : AreEqual<Component, typeof DevicesButton> extends true ? DevicesButtonSelector : AreEqual<Component, typeof MicrophoneButton> extends true ? MicrophoneButtonSelector : AreEqual<Component, typeof CameraButton> extends true ? CameraButtonSelector : AreEqual<Component, typeof ScreenShareButton> extends true ? ScreenShareButtonSelector : AreEqual<Component, typeof ParticipantList> extends true ? ParticipantListSelector : AreEqual<Component, typeof ParticipantsButton> extends true ? ParticipantsButtonSelector : AreEqual<Component, typeof EndCallButton> extends true ? EmptySelector : AreEqual<Component, typeof ErrorBar> extends true ? ErrorBarSelector : AreEqual<Component, typeof Dialpad> extends true ? /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */EmptySelector : undefined;\n\n/**\n * Get the selector for a specified component.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport const getSelector = <Component extends (props: any) => JSX.Element | undefined,>(component: Component): GetSelector<Component> => {\n  /* @conditional-compile-remove(raise-hand) */\n  if (component === RaiseHandButton) {\n    return findConditionalCompiledSelector(component);\n  }\n  return findSelector(component);\n};\nconst findSelector = (component: (props: any) => JSX.Element | undefined): any => {\n  /* @conditional-compile-remove(dialpad) */ /* @conditional-compile-remove(PSTN-calls) */\n  // Dialpad only has handlers currently and doesn't require any props from the stateful layer so return the emptySelector\n  if (component === Dialpad) {\n    return emptySelector;\n  }\n  switch (component) {\n    case VideoGallery:\n      return videoGallerySelector;\n    case MicrophoneButton:\n      return microphoneButtonSelector;\n    case CameraButton:\n      return cameraButtonSelector;\n    case ScreenShareButton:\n      return screenShareButtonSelector;\n    case DevicesButton:\n      return devicesButtonSelector;\n    case ParticipantList:\n      return participantListSelector;\n    case ParticipantsButton:\n      return participantsButtonSelector;\n    case EndCallButton:\n      return emptySelector;\n    case ErrorBar:\n      return errorBarSelector;\n  }\n  return undefined;\n};\n\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(raise-hand) */\nconst findConditionalCompiledSelector = (component: (props: any) => JSX.Element | undefined): any => {\n  switch (component) {\n    /* @conditional-compile-remove(raise-hand) */\n    case RaiseHandButton:\n      /* @conditional-compile-remove(raise-hand) */\n      return raiseHandButtonSelector;\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { PagedAsyncIterableIterator } from '@azure/core-paging';\nimport { ReactElement } from 'react';\nimport { Common, fromFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { StatefulChatClient } from '@internal/chat-stateful-client';\nimport { ChatMessage, ChatMessageReadReceipt, ChatThreadClient, SendMessageOptions } from '@azure/communication-chat';\nimport memoizeOne from 'memoize-one';\nimport { AttachmentMetadata } from '@internal/react-components';\n\n/**\n * Object containing all the handlers required for chat components.\n *\n * Chat related components from this package are able to pick out relevant handlers from this object.\n * See {@link useHandlers} and {@link usePropsFor}.\n *\n * @public\n */\nexport type ChatHandlers = {\n  onSendMessage: (content: string, options?: SendMessageOptions) => Promise<void>;\n  onMessageSeen: (chatMessageId: string) => Promise<void>;\n  onTyping: () => Promise<void>;\n  onRemoveParticipant: (userId: string) => Promise<void>;\n  updateThreadTopicName: (topicName: string) => Promise<void>;\n  onLoadPreviousChatMessages: (messagesToLoad: number) => Promise<boolean>;\n  onUpdateMessage: (messageId: string, content: string) => Promise<void>;\n  onDeleteMessage: (messageId: string) => Promise<void>;\n};\n\n/**\n * Create the default implementation of {@link ChatHandlers}.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * Returned object is memoized to avoid rerenders when used as props for React Components.\n *\n * @public\n */\nexport const createDefaultChatHandlers = memoizeOne((chatClient: StatefulChatClient, chatThreadClient: ChatThreadClient): ChatHandlers => {\n  let messageIterator: PagedAsyncIterableIterator<ChatMessage> | undefined = undefined;\n  let readReceiptIterator: PagedAsyncIterableIterator<ChatMessageReadReceipt> | undefined = undefined;\n  return {\n    onSendMessage: async (content: string, options?: SendMessageOptions) => {\n      const sendMessageRequest = {\n        content,\n        senderDisplayName: chatClient.getState().displayName\n      };\n      await chatThreadClient.sendMessage(sendMessageRequest, options);\n    },\n    onUpdateMessage: async (messageId: string, content: string, options?: {\n      metadata?: Record<string, string>;\n      attachmentMetadata?: AttachmentMetadata[];\n    }) => {\n      const updatedMetadata = options?.metadata ? {\n        ...options.metadata\n      } : {};\n      updatedMetadata.fileSharingMetadata = JSON.stringify(options?.attachmentMetadata || []);\n      await chatThreadClient.updateMessage(messageId, {\n        content,\n        metadata: updatedMetadata\n      });\n    },\n    onDeleteMessage: async (messageId: string) => {\n      await chatThreadClient.deleteMessage(messageId);\n    },\n    // This handler is designed for chatThread to consume\n    onMessageSeen: async (chatMessageId: string) => {\n      await chatThreadClient.sendReadReceipt({\n        chatMessageId\n      });\n    },\n    onTyping: async () => {\n      await chatThreadClient.sendTypingNotification();\n    },\n    onRemoveParticipant: async (userId: string) => {\n      await chatThreadClient.removeParticipant(fromFlatCommunicationIdentifier(userId));\n    },\n    updateThreadTopicName: async (topicName: string) => {\n      await chatThreadClient.updateTopic(topicName);\n    },\n    onLoadPreviousChatMessages: async (messagesToLoad: number) => {\n      if (messageIterator === undefined) {\n        // Lazy definition so that errors in the method call are reported correctly.\n        // Also allows recovery via retries in case of transient errors.\n        messageIterator = chatThreadClient.listMessages({\n          maxPageSize: 50\n        });\n      }\n      if (readReceiptIterator === undefined) {\n        readReceiptIterator = chatThreadClient.listReadReceipts();\n      }\n      // get the earliest message time\n      let remainingMessagesToGet = messagesToLoad;\n      let isAllChatMessagesLoaded = false;\n      let earliestTime = Number.MAX_SAFE_INTEGER;\n      while (remainingMessagesToGet >= 1) {\n        const message = await messageIterator.next();\n        if (message?.value?.id) {\n          if (parseInt(message.value.id) < earliestTime) {\n            earliestTime = parseInt(message.value.id);\n          }\n        }\n        if (message.value?.type && message.value.type === 'text') {\n          remainingMessagesToGet--;\n        }\n\n        // We have traversed all messages in this thread\n        if (message.done) {\n          isAllChatMessagesLoaded = true;\n          break;\n        }\n      }\n      // keep fetching read receipts until read receipt time < earlist message time\n      let readReceipt = await readReceiptIterator.next();\n      while (!readReceipt.done && parseInt(readReceipt?.value?.chatMessageId) >= earliestTime) {\n        readReceipt = await readReceiptIterator.next();\n      }\n      return isAllChatMessagesLoaded;\n    }\n  };\n});\n\n/**\n * Create a set of default handlers for given component.\n *\n * Returned object is memoized (with reference to the arguments) to avoid\n * renders when used as props for React Components.\n *\n * @public\n */\nexport const createDefaultChatHandlersForComponent = <Props,>(chatClient: StatefulChatClient, chatThreadClient: ChatThreadClient, _: (props: Props) => ReactElement | null): Common<ChatHandlers, Props> => {\n  return createDefaultChatHandlers(chatClient, chatThreadClient);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { createContext, useContext } from 'react';\nimport { StatefulChatClient } from '@internal/chat-stateful-client';\n\n/**\n * @private\n */\nexport const ChatClientContext = createContext<StatefulChatClient | undefined>(undefined);\n\n/**\n * Arguments to initialize a {@link ChatClientProvider}.\n *\n * @public\n */\nexport type ChatClientProviderProps = {\n  children: React.ReactNode;\n  chatClient: StatefulChatClient;\n};\n\n/**\n * A {@link React.Context} that stores a {@link StatefulChatClient}.\n *\n * Chat components from this package must be wrapped with a {@link ChatClientProvider}.\n *\n * @public\n */\nexport const ChatClientProvider = (props: ChatClientProviderProps): JSX.Element => {\n  return <ChatClientContext.Provider value={props.chatClient}>{props.children}</ChatClientContext.Provider>;\n};\n\n/**\n * Hook to obtain {@link StatefulChatClient} from the provider.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const useChatClient = (): StatefulChatClient => {\n  const chatClient = useContext(ChatClientContext);\n  if (!chatClient) {\n    throw 'Please wrap components with ChatClientProvider and initialize a chat client before calling the hook!';\n  }\n  return chatClient;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { createContext, useContext } from 'react';\nimport { ChatThreadClient } from '@azure/communication-chat';\n\n/**\n * @private\n */\nexport const ChatThreadClientContext = createContext<ChatThreadClient | undefined>(undefined);\n\n/**\n * Arguments to initialize a {@link ChatThreadClientProvider}.\n *\n * @public\n */\nexport type ChatThreadClientProviderProps = {\n  children: React.ReactNode;\n  chatThreadClient: ChatThreadClient;\n};\n\n/**\n * A {@link React.Context} that stores a {@link @azure/communication-chat#ChatThreadClient}.\n *\n * Chat components from this package must be wrapped with a {@link ChatThreadClientProvider}.\n *\n * @public\n */\nexport const ChatThreadClientProvider = (props: ChatThreadClientProviderProps): JSX.Element => {\n  return <ChatThreadClientContext.Provider value={props.chatThreadClient}>{props.children}</ChatThreadClientContext.Provider>;\n};\n/**\n * Hook to obtain {@link @azure/communication-chat#ChatThreadClient} from the provider.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const useChatThreadClient = (): ChatThreadClient => {\n  const chatThreadClient = useContext(ChatThreadClientContext);\n  if (!chatThreadClient) {\n    throw 'Please wrap components with ChatThreadClientProvider and initialize a chat thread client before calling the hook.';\n  }\n  return chatThreadClient;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createDefaultChatHandlersForComponent } from '../handlers/createHandlers';\nimport { ChatClientContext } from '../providers/ChatClientProvider';\nimport { ChatThreadClientContext } from '../providers/ChatThreadClientProvider';\nimport { ReactElement, useContext } from 'react';\nimport { Common } from '@internal/acs-ui-common';\nimport { ChatHandlers } from '../handlers/createHandlers';\n\n/**\n * Hook to obtain a handler for a specified component.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const useHandlers = <PropsT,>(component: (props: PropsT) => ReactElement | null): Common<ChatHandlers, PropsT> | undefined => {\n  const chatClient = useContext(ChatClientContext);\n  const chatThreadClient = useContext(ChatThreadClientContext);\n  if (!chatThreadClient || !chatClient) {\n    return undefined;\n  }\n  return createDefaultChatHandlersForComponent(chatClient, chatThreadClient, component);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatClientState, StatefulChatClient } from '@internal/chat-stateful-client';\nimport { ChatClientContext } from '../providers/ChatClientProvider';\nimport { useState, useEffect, useRef, useMemo, useContext } from 'react';\nimport { ChatThreadClientContext } from '../providers/ChatThreadClientProvider';\n\n/**\n * Hook to obtain a selector for a specified component.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const useSelector = <SelectorT extends (state: ChatClientState, props: any) => any, ParamT extends SelectorT | undefined>(selector: ParamT, selectorProps?: Parameters<SelectorT>[1]): ParamT extends SelectorT ? ReturnType<SelectorT> : undefined => {\n  const chatClient: StatefulChatClient | undefined = useContext(ChatClientContext);\n  const threadId = useContext(ChatThreadClientContext)?.threadId;\n\n  // Keeps track of whether the current component is mounted or not. If it has unmounted, make sure we do not modify the\n  // state or it will cause React warnings in the console. https://skype.visualstudio.com/SPOOL/_workitems/edit/2453212\n  const mounted = useRef(false);\n  useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  });\n  const threadConfigProps = useMemo(() => ({\n    threadId\n  }), [threadId]);\n  const [props, setProps] = useState(chatClient && selector ? selector(chatClient.getState(), selectorProps ?? threadConfigProps) : undefined);\n  const propRef = useRef(props);\n  propRef.current = props;\n  useEffect(() => {\n    if (!chatClient || !selector) {\n      return;\n    }\n    const onStateChange = (state: ChatClientState): void => {\n      const newProps = selector(state, selectorProps ?? threadConfigProps);\n      if (propRef.current !== newProps) {\n        setProps(newProps);\n      }\n    };\n    chatClient.onStateChange(onStateChange);\n    return () => {\n      chatClient.offStateChange(onStateChange);\n    };\n  }, [chatClient, selector, selectorProps, threadConfigProps]);\n  return selector ? props : undefined;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatClientState, ChatErrors, ChatMessageWithStatus } from '@internal/chat-stateful-client';\nimport { ChatMessageReadReceipt, ChatParticipant } from '@azure/communication-chat';\nimport { TypingIndicatorReceivedEvent } from '@azure/communication-chat';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\n\n/**\n * Common props for selectors for {@link ChatClientState}.\n *\n * @public\n */\nexport type ChatBaseSelectorProps = {\n  threadId: string;\n};\n\n/**\n * @private\n */\nexport const getUserId = (state: ChatClientState): string => toFlatCommunicationIdentifier(state.userId);\n\n/**\n * @private\n */\nexport const getDisplayName = (state: ChatClientState): string => state.displayName;\n\n/**\n * @private\n */\nexport const getChatMessages = (state: ChatClientState, props: ChatBaseSelectorProps): {\n  [key: string]: ChatMessageWithStatus;\n} => props.threadId && state.threads[props.threadId]?.chatMessages || {};\n\n/**\n * @private\n */\nexport const getParticipants = (state: ChatClientState, props: ChatBaseSelectorProps): {\n  [key: string]: ChatParticipant;\n} => props.threadId && state.threads[props.threadId]?.participants || {};\n\n/**\n * @private\n */\nexport const getReadReceipts = (state: ChatClientState, props: ChatBaseSelectorProps): ChatMessageReadReceipt[] => {\n  return state.threads[props?.threadId]?.readReceipts;\n};\n\n/**\n * @private\n */\nexport const getIsLargeGroup = (state: ChatClientState, props: ChatBaseSelectorProps): boolean => {\n  const participants = state.threads[props.threadId]?.participants;\n  return !!participants && Object.values(participants).length > 20;\n};\n\n/**\n * @private\n */\nexport const getLatestReadTime = (state: ChatClientState, props: ChatBaseSelectorProps): Date => props.threadId && state.threads[props.threadId]?.latestReadTime || new Date(0);\n\n/**\n * @private\n */\nexport const getTypingIndicators = (state: ChatClientState, props: ChatBaseSelectorProps): TypingIndicatorReceivedEvent[] => {\n  return props.threadId && state.threads[props.threadId]?.typingIndicators || [];\n};\n\n/**\n * @private\n */\nexport const getLatestErrors = (state: ChatClientState): ChatErrors => state.latestErrors;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatClientState } from '@internal/chat-stateful-client';\nimport { createSelector } from 'reselect';\nimport { ChatBaseSelectorProps, getDisplayName, getUserId } from './baseSelectors';\n\n/**\n * Selector type for {@link SendBox} component.\n *\n * @public\n */\nexport type SendBoxSelector = (state: ChatClientState, props: ChatBaseSelectorProps) => {\n  displayName: string;\n  userId: string;\n};\n\n/**\n * Selector for {@link SendBox} component.\n *\n * @public\n */\nexport const sendBoxSelector: SendBoxSelector = createSelector([getUserId, getDisplayName], (userId, displayName) => ({\n  displayName: displayName,\n  userId: userId\n}));","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @private\n */\nexport const MINIMUM_TYPING_INTERVAL_IN_MILLISECONDS = 8000;\n\n/**\n * @private\n */\nexport const PARTICIPANTS_THRESHOLD = 20;\n\n/**\n * @private\n */\nexport const MINUTE_IN_MS = 1000 * 60;\n\n/**\n * @private\n */\nexport const DEFAULT_DATA_LOSS_PREVENTION_POLICY_URL = 'https://go.microsoft.com/fwlink/?LinkId=2132837';\n\n/**\n * @private\n *\n * TODO: Import enum from @azure/communication-chat when ChatMessageType shows up in new release version\n * (or define our type to decouple)\n */\nexport const ACSKnownMessageType = {\n  text: ('text' as const),\n  html: ('html' as const),\n  richtextHtml: ('richtext/html' as const),\n  topicUpdated: ('topicUpdated' as const),\n  participantAdded: ('participantAdded' as const),\n  participantRemoved: ('participantRemoved' as const)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Message } from '@internal/react-components';\n\n/**\n * @private\n */\nexport const compareMessages = (firstMessage: Message, secondMessage: Message): number => {\n  if (firstMessage.createdOn === undefined) {\n    return 1;\n  }\n  if (secondMessage.createdOn === undefined) {\n    return -1;\n  }\n  const firstDate = new Date(firstMessage.createdOn).getTime();\n  const secondDate = new Date(secondMessage.createdOn).getTime();\n  // Workaround to get a stable order of message before we can get sequenceId from chat service.\n  // MessageIds are generated by time order the message persist, a good candidate other than time\n  const idDelta = firstMessage.messageId && secondMessage.messageId ? Number.parseInt(firstMessage.messageId) - Number.parseInt(secondMessage.messageId) : 0;\n  return firstDate - secondDate === 0 ? idDelta : firstDate - secondDate;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { Message, MessageAttachedStatus } from '@internal/react-components';\nimport { compareMessages } from './compareMessages';\nimport { MINUTE_IN_MS } from './constants';\n\n/**\n * @private\n */\nexport const updateMessagesWithAttached = (chatMessagesWithStatus: Message[]): void => {\n  chatMessagesWithStatus.sort(compareMessages);\n  chatMessagesWithStatus.forEach((message, index, messages) => {\n    if (message.messageType === 'chat') {\n      /**\n       * Attached === true means it is within a group of messages in the current order\n       * Attached === top/bottom means it is on the top/bottom boundary\n       * Attached === false means it is just a single message\n       * A group of messages: continuous messages that belong to the same sender and not intercepted by other senders.\n       */\n      let attached: boolean | MessageAttachedStatus = false;\n      const previousMessage = index > 0 ? messages[index - 1] : undefined;\n      const nextMessage = index === messages.length - 1 ? undefined : messages[index + 1];\n      const previousSenderId = previousMessage?.messageType === 'chat' ? previousMessage.senderId : undefined;\n      const nextSenderId = nextMessage?.messageType === 'chat' ? nextMessage.senderId : undefined;\n      const timediff = new Date(message?.createdOn ?? '').getTime() - new Date(previousMessage?.createdOn ?? '').getTime();\n      const diffMins = Math.round(timediff / MINUTE_IN_MS); // minutes\n\n      if (previousSenderId !== message.senderId) {\n        attached = message.senderId === nextSenderId ? 'top' : false;\n      } else if (diffMins && diffMins >= 5) {\n        // if there are more than or equal to 5 mins time gap between messages do not attach and show time stamp\n        attached = false;\n      } else {\n        attached = message.senderId === nextSenderId ? true : 'bottom';\n      }\n      message.attached = attached;\n    }\n  });\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatBaseSelectorProps, getChatMessages, getIsLargeGroup, getLatestReadTime, getParticipants, getReadReceipts, getUserId } from './baseSelectors';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { ChatClientState, ChatMessageWithStatus, ResourceFetchResult } from '@internal/chat-stateful-client';\nimport { memoizeFnAll } from '@internal/acs-ui-common';\nimport { ChatMessage, Message, CommunicationParticipant, SystemMessage, MessageContentType, ReadReceiptsBySenderId } from '@internal/react-components';\nimport { createSelector } from 'reselect';\nimport { ACSKnownMessageType } from './utils/constants';\nimport { updateMessagesWithAttached } from './utils/updateMessagesWithAttached';\nimport { ChatAttachment } from '@azure/communication-chat';\nimport type { ChatParticipant } from '@azure/communication-chat';\nconst memoizedAllConvertChatMessage = memoizeFnAll((_key: string, chatMessage: ChatMessageWithStatus, userId: string, isSeen: boolean, isLargeGroup: boolean): Message => {\n  const messageType = chatMessage.type.toLowerCase();\n  if (messageType === ACSKnownMessageType.text || messageType === ACSKnownMessageType.richtextHtml || messageType === ACSKnownMessageType.html) {\n    return convertToUiChatMessage(chatMessage, userId, isSeen, isLargeGroup);\n  } else {\n    return convertToUiSystemMessage(chatMessage);\n  }\n});\nconst processChatMessageContent = (message: ChatMessageWithStatus): string | undefined => {\n  let content = message.content?.message;\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n\n  if (message.content?.attachments && message.content?.attachments.length > 0 && sanitizedMessageContentType(message.type).includes('html')) {\n    const attachments: ChatAttachment[] = message.content?.attachments;\n    // Fill in the src here\n    /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n    if (content) {\n      const document = new DOMParser().parseFromString(content ?? '', 'text/html');\n      document.querySelectorAll('img').forEach(img => {\n        const attachmentPreviewUrl = attachments.find(attachment => attachment.id === img.id)?.previewUrl;\n        if (attachmentPreviewUrl) {\n          const resourceCache = message.resourceCache?.[attachmentPreviewUrl];\n          img.src = getResourceSourceUrl(resourceCache);\n        }\n      });\n      content = document.body.innerHTML;\n    }\n    const teamsImageHtmlContent = attachments.filter(attachment => attachment.attachmentType === 'image' && attachment.previewUrl !== undefined && !message.content?.message?.includes(attachment.id)).map(attachment => generateImageAttachmentImgHtml(message, attachment)).join('');\n    if (teamsImageHtmlContent) {\n      return (content ?? '') + teamsImageHtmlContent;\n    }\n  }\n  return content;\n};\n\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nconst generateImageAttachmentImgHtml = (message: ChatMessageWithStatus, attachment: ChatAttachment): string => {\n  if (attachment.previewUrl !== undefined) {\n    const contentType = extractAttachmentContentTypeFromName(attachment.name);\n    const resourceCache = message.resourceCache?.[attachment.previewUrl];\n    const src = getResourceSourceUrl(resourceCache);\n    return `\\r\\n<p><img alt=\"image\" src=\"${src}\" itemscope=\"${contentType}\" id=\"${attachment.id}\"></p>`;\n  }\n  return '';\n};\n\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nconst getResourceSourceUrl = (result?: ResourceFetchResult): string => {\n  let src = '';\n  if (result) {\n    if (result.error || !result.sourceUrl) {\n      // In case of an error we set src to some invalid value to show broken image\n      src = 'blob://';\n    } else {\n      src = result.sourceUrl;\n    }\n  }\n  return src;\n};\n\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nconst extractAttachmentContentTypeFromName = (name?: string): string => {\n  if (name === undefined) {\n    return '';\n  }\n  const indexOfLastDot = name.lastIndexOf('.');\n  if (indexOfLastDot === undefined || indexOfLastDot < 0) {\n    return '';\n  }\n  const contentType = name.substring(indexOfLastDot + 1);\n  return contentType;\n};\nconst convertToUiChatMessage = (message: ChatMessageWithStatus, userId: string, isSeen: boolean, isLargeGroup: boolean): ChatMessage => {\n  const messageSenderId = message.sender !== undefined ? toFlatCommunicationIdentifier(message.sender) : userId;\n  return {\n    messageType: 'chat',\n    createdOn: message.createdOn,\n    content: processChatMessageContent(message),\n    contentType: sanitizedMessageContentType(message.type),\n    status: !isLargeGroup && message.status === 'delivered' && isSeen ? 'seen' : message.status,\n    senderDisplayName: message.senderDisplayName,\n    senderId: messageSenderId,\n    messageId: message.id,\n    clientMessageId: message.clientMessageId,\n    editedOn: message.editedOn,\n    deletedOn: message.deletedOn,\n    mine: messageSenderId === userId,\n    metadata: message.metadata\n  };\n};\nconst convertToUiSystemMessage = (message: ChatMessageWithStatus): SystemMessage => {\n  const systemMessageType = message.type;\n  if (systemMessageType === 'participantAdded' || systemMessageType === 'participantRemoved') {\n    return {\n      messageType: 'system',\n      systemMessageType,\n      createdOn: message.createdOn,\n      participants: message.content?.participants\n      // TODO: In our moderator logic, we use undefined name as our displayName for moderator, which should be filtered out\n      // Once we have a better solution to identify the moderator, remove this line\n      ?.filter((participant: ChatParticipant) => participant.displayName && participant.displayName !== '').map((participant: ChatParticipant): CommunicationParticipant => ({\n        userId: toFlatCommunicationIdentifier(participant.id),\n        displayName: participant.displayName\n      })) ?? [],\n      messageId: message.id,\n      iconName: systemMessageType === 'participantAdded' ? 'PeopleAdd' : 'PeopleBlock'\n    };\n  } else {\n    // Only topic updated type left, according to ACSKnown type\n    return {\n      messageType: 'system',\n      systemMessageType: 'topicUpdated',\n      createdOn: message.createdOn,\n      topic: message.content?.topic ?? '',\n      messageId: message.id,\n      iconName: 'Edit'\n    };\n  }\n};\n\n/**\n * Selector type for {@link MessageThread} component.\n *\n * @public\n */\nexport type MessageThreadSelector = (state: ChatClientState, props: ChatBaseSelectorProps) => {\n  userId: string;\n  showMessageStatus: boolean;\n  messages: Message[];\n};\n\n/** Returns `true` if the message has participants and at least one participant has a display name. */\nconst hasValidParticipant = (chatMessage: ChatMessageWithStatus): boolean => !!chatMessage.content?.participants && chatMessage.content.participants.some((p: ChatParticipant) => !!p.displayName);\n\n/**\n *\n * @private\n */\nexport const messageThreadSelectorWithThread: () => MessageThreadSelector = () => createSelector([getUserId, getChatMessages, getLatestReadTime, getIsLargeGroup, getReadReceipts, getParticipants], (userId, chatMessages, latestReadTime, isLargeGroup, readReceipts, participants) => {\n  // We can't get displayName in teams meeting interop for now, disable rr feature when it is teams interop\n  const isTeamsInterop = Object.values(participants).find(p => 'microsoftTeamsUserId' in p.id) !== undefined;\n\n  // get number of participants\n  // filter out the non valid participants (no display name)\n  // Read Receipt details will be disabled when participant count is 0\n  const participantCount = isTeamsInterop ? undefined : Object.values(participants).filter(p => p.displayName && p.displayName !== '').length;\n\n  // creating key value pairs of senderID: last read message information\n\n  const readReceiptsBySenderId: ReadReceiptsBySenderId = {};\n\n  // readReceiptsBySenderId[senderID] gets updated every time a new message is read by this sender\n  // in this way we can make sure that we are only saving the latest read message id and read on time for each sender\n  readReceipts.filter(r => r.sender && toFlatCommunicationIdentifier(r.sender) !== userId).forEach(r => {\n    readReceiptsBySenderId[toFlatCommunicationIdentifier(r.sender)] = {\n      lastReadMessage: r.chatMessageId,\n      displayName: participants[toFlatCommunicationIdentifier(r.sender)]?.displayName ?? ''\n    };\n  });\n\n  // A function takes parameter above and generate return value\n  const convertedMessages = memoizedAllConvertChatMessage(memoizedFn => Object.values(chatMessages).filter(message => message.type.toLowerCase() === ACSKnownMessageType.text || message.type.toLowerCase() === ACSKnownMessageType.richtextHtml || message.type.toLowerCase() === ACSKnownMessageType.html || message.type === ACSKnownMessageType.participantAdded && hasValidParticipant(message) || message.type === ACSKnownMessageType.participantRemoved && hasValidParticipant(message) ||\n  // TODO: Add support for topicUpdated system messages in MessageThread component.\n  // message.type === ACSKnownMessageType.topicUpdated ||\n  message.clientMessageId !== undefined).filter(isMessageValidToRender).map(message => {\n    return memoizedFn(message.id ?? message.clientMessageId, message, userId, message.createdOn <= latestReadTime, isLargeGroup);\n  }));\n  updateMessagesWithAttached(convertedMessages);\n  return {\n    userId,\n    showMessageStatus: true,\n    messages: convertedMessages,\n    participantCount,\n    readReceiptsBySenderId\n  };\n});\nconst sanitizedMessageContentType = (type: string): MessageContentType => {\n  const lowerCaseType = type.toLowerCase();\n  return lowerCaseType === 'text' || lowerCaseType === 'html' || lowerCaseType === 'richtext/html' ? lowerCaseType : 'unknown';\n};\nconst isMessageValidToRender = (message: ChatMessageWithStatus): boolean => {\n  if (message.deletedOn) {\n    return false;\n  }\n  if (message.metadata?.fileSharingMetadata || /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */message.content?.attachments) {\n    return true;\n  }\n  return !!(message.content && message.content?.message !== '');\n};\n\n/**\n * Selector for {@link MessageThread} component.\n *\n * @public\n */\nexport const messageThreadSelector: MessageThreadSelector = messageThreadSelectorWithThread();","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { getTypingIndicators, getParticipants, getUserId, ChatBaseSelectorProps } from './baseSelectors';\nimport { createSelector } from 'reselect';\nimport { ChatParticipant } from '@azure/communication-chat';\nimport { TypingIndicatorReceivedEvent } from '@azure/communication-chat';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { CommunicationParticipant } from '@internal/react-components';\nimport { MINIMUM_TYPING_INTERVAL_IN_MILLISECONDS, PARTICIPANTS_THRESHOLD } from './utils/constants';\nimport { ChatClientState } from '@internal/chat-stateful-client';\nconst filterTypingIndicators = (typingIndicators: TypingIndicatorReceivedEvent[], userId: string): TypingIndicatorReceivedEvent[] => {\n  const filteredTypingIndicators: TypingIndicatorReceivedEvent[] = [];\n  const seen = new Set();\n  const date8SecondsAgo = new Date(Date.now() - MINIMUM_TYPING_INTERVAL_IN_MILLISECONDS);\n  for (let i = typingIndicators.length - 1; i >= 0; i--) {\n    const typingIndicator = typingIndicators[i];\n    if (toFlatCommunicationIdentifier(typingIndicator.sender) === userId) {\n      continue;\n    }\n    if (typingIndicator.receivedOn < date8SecondsAgo) {\n      continue;\n    }\n    if (seen.has(toFlatCommunicationIdentifier(typingIndicator.sender))) {\n      continue;\n    }\n    seen.add(toFlatCommunicationIdentifier(typingIndicator.sender));\n    filteredTypingIndicators.push(typingIndicator);\n  }\n  return filteredTypingIndicators;\n};\nconst convertSdkTypingIndicatorsToCommunicationParticipants = (typingIndicators: TypingIndicatorReceivedEvent[], participants: {\n  [key: string]: ChatParticipant;\n}): CommunicationParticipant[] => {\n  return typingIndicators.map(typingIndicator => ({\n    userId: toFlatCommunicationIdentifier(typingIndicator.sender),\n    displayName: participants[toFlatCommunicationIdentifier(typingIndicator.sender)]?.displayName\n  }));\n};\n\n/**\n * Selector type for {@link TypingIndicator} component.\n *\n * @public\n */\nexport type TypingIndicatorSelector = (state: ChatClientState, props: ChatBaseSelectorProps) => {\n  typingUsers: CommunicationParticipant[];\n};\n\n/**\n * Selector for {@link TypingIndicator} component.\n *\n * @public\n */\nexport const typingIndicatorSelector: TypingIndicatorSelector = createSelector([getTypingIndicators, getParticipants, getUserId], (typingIndicators: TypingIndicatorReceivedEvent[], participants: {\n  [key: string]: ChatParticipant;\n}, userId: string) => {\n  // if the participant size reaches the threshold then return no typing users\n  if (Object.values(participants).length >= PARTICIPANTS_THRESHOLD) {\n    return {\n      typingUsers: []\n    };\n  }\n\n  // filter typing indicators to remove those that are from the duplicate users or current user as well as those older than a threshold\n  const filteredTypingIndicators = filterTypingIndicators(typingIndicators, userId);\n  const typingUsers: CommunicationParticipant[] = convertSdkTypingIndicatorsToCommunicationParticipants(filteredTypingIndicators, participants);\n  return {\n    typingUsers\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { getUserId, getDisplayName, getParticipants, ChatBaseSelectorProps } from './baseSelectors';\nimport * as reselect from 'reselect';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { ChatParticipant } from '@azure/communication-chat';\nimport { ParticipantListParticipant } from '@internal/react-components';\nimport { ChatClientState } from '@internal/chat-stateful-client';\nimport { getIdentifierKind } from '@azure/communication-common';\nconst convertChatParticipantsToCommunicationParticipants = (chatParticipants: ChatParticipant[]): ParticipantListParticipant[] => {\n  return chatParticipants.map((participant: ChatParticipant) => {\n    return {\n      userId: toFlatCommunicationIdentifier(participant.id),\n      displayName: participant.displayName,\n      // ACS users can not remove Teams users.\n      // Removing phone numbers or unknown types of users is undefined.\n      isRemovable: getIdentifierKind(participant.id).kind === 'communicationUser'\n    };\n  });\n};\n\n/**\n * get the index of moderator to help updating its display name if they are the local user or removing them from list of participants otherwise\n */\nconst moderatorIndex = (participants: ParticipantListParticipant[]): number => {\n  return participants.map(p => p.displayName).indexOf(undefined);\n};\n\n/**\n * Selector type for {@link ParticipantList} component.\n *\n * @public\n */\nexport type ChatParticipantListSelector = (state: ChatClientState, props: ChatBaseSelectorProps) => {\n  myUserId: string;\n  participants: ParticipantListParticipant[];\n};\n\n/**\n * Selector for {@link ParticipantList} component.\n *\n * @public\n */\nexport const chatParticipantListSelector: ChatParticipantListSelector = reselect.createSelector([getUserId, getParticipants, getDisplayName], (userId, chatParticipants: {\n  [key: string]: ChatParticipant;\n}, displayName) => {\n  let participants = convertChatParticipantsToCommunicationParticipants(Object.values(chatParticipants));\n  if (0 !== participants.length) {\n    const moderatorIdx = moderatorIndex(participants);\n    if (-1 !== moderatorIdx) {\n      const userIndex = participants.map(p => p.userId).indexOf(userId);\n      if (moderatorIdx === userIndex) {\n        participants[moderatorIdx].displayName = displayName;\n      } else {\n        participants = participants.filter(p => p.displayName);\n      }\n    }\n  }\n  return {\n    myUserId: userId,\n    participants: participants\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatBaseSelectorProps, getLatestErrors } from './baseSelectors';\nimport { ActiveErrorMessage, ErrorType } from '@internal/react-components';\nimport { createSelector } from 'reselect';\nimport { ChatClientState, ChatError, ChatErrors, ChatErrorTarget } from '@internal/chat-stateful-client';\n\n/**\n * Selector type for {@link ErrorBar} component.\n *\n * @public\n */\nexport type ErrorBarSelector = (state: ChatClientState, props: ChatBaseSelectorProps) => {\n  activeErrorMessages: ActiveErrorMessage[];\n};\n\n/**\n * Select the first fiew active errors from the state for the {@link ErrorBar} component.\n *\n * In case there are many errors, only a few top errors are returned to avoid\n * filling up the UI with too many errors.\n *\n * Invariants:\n *   - {@link ErrorType} is never repeated in the returned errors.\n *   - Errors are returned in a fixed order by {@link ErrorType}.\n *\n * @public\n */\nexport const errorBarSelector: ErrorBarSelector = createSelector([getLatestErrors], (latestErrors): {\n  activeErrorMessages: ActiveErrorMessage[];\n} => {\n  // The order in which the errors are returned is significant: The `ErrorBar` shows errors on the UI in that order.\n  // There are several options for the ordering:\n  //   - Sorted by when the errors happened (latest first / oldest first).\n  //   - Stable sort by error type.\n  //\n  // We chose to stable sort by error type: We intend to show only a small number of errors on the UI and we do not\n  // have timestamps for errors.\n  const activeErrorMessages: ActiveErrorMessage[] = [];\n  let specificSendMessageErrorSeen = false;\n  {\n    const error = latestUnableToReachChatServiceError(latestErrors);\n    if (error !== undefined) {\n      activeErrorMessages.push(error);\n    }\n  }\n  {\n    const error = latestAccessDeniedError(latestErrors);\n    if (error !== undefined) {\n      activeErrorMessages.push(error);\n    }\n  }\n  const sendMessageError = latestErrors['ChatThreadClient.sendMessage'];\n  {\n    const error = latestNotInThisThreadError(latestErrors);\n    if (error !== undefined) {\n      if (sendMessageError !== undefined) {\n        activeErrorMessages.push({\n          type: 'sendMessageNotInChatThread',\n          // Set the latest timestamp of all the errors that translated to an active error.\n          timestamp: sendMessageError.timestamp > (error.timestamp ?? 0) ? sendMessageError.timestamp : error.timestamp\n        });\n        specificSendMessageErrorSeen = true;\n      } else {\n        activeErrorMessages.push(error);\n      }\n    }\n  }\n  if (!specificSendMessageErrorSeen && sendMessageError !== undefined) {\n    activeErrorMessages.push({\n      type: 'sendMessageGeneric',\n      timestamp: sendMessageError.timestamp\n    });\n  }\n\n  // We only return the first few errors to avoid filling up the UI with too many `MessageBar`s.\n  activeErrorMessages.splice(maxErrorCount);\n  return {\n    activeErrorMessages: activeErrorMessages\n  };\n});\nconst maxErrorCount = 3;\nconst accessErrorTargets: ChatErrorTarget[] = ['ChatThreadClient.getProperties', 'ChatThreadClient.listMessages', 'ChatThreadClient.listParticipants', 'ChatThreadClient.sendMessage', 'ChatThreadClient.sendTypingNotification'];\nconst latestUnableToReachChatServiceError = (latestErrors: ChatErrors): ActiveErrorMessage | undefined => {\n  return latestActiveErrorSatisfying(latestErrors, 'unableToReachChatService', (error: ChatError): boolean => {\n    return !!error && !!error.innerError && 'code' in error.innerError && error.innerError.code === 'REQUEST_SEND_ERROR';\n  });\n};\nconst latestAccessDeniedError = (latestErrors: ChatErrors): ActiveErrorMessage | undefined => {\n  return latestActiveErrorSatisfying(latestErrors, 'accessDenied', (error: ChatError): boolean => {\n    return !!error && !!error.innerError && 'statusCode' in error.innerError && error.innerError.statusCode === 401;\n  });\n};\nconst latestNotInThisThreadError = (latestErrors: ChatErrors): ActiveErrorMessage | undefined => {\n  return latestActiveErrorSatisfying(latestErrors, 'userNotInChatThread', (error: ChatError): boolean => {\n    if (!error || !error.innerError) {\n      return false;\n    }\n\n    // Explicitly ignore 400 REST error when listParticipants() is called and a BotContact MRI is found in the participants.\n    // This check should be removed when the chat SDK has handled this issue. Note: The this does not stop the error being logged to the console.\n    // To the best of our ability we have confirmed this to have no impact on the participantList returned (all valid participants are still returned), nor\n    // does it have an impact on the participant list updating on other participants joining/leaving or on individual participant actions like removeParticipant.\n    if (isErrorDueToBotContact(error)) {\n      return false;\n    }\n\n    // Chat service returns 403 if a user has been removed from a thread.\n    // Chat service returns either 400 or 404 if the thread ID is malformed, depending on how the thread ID is malformed.\n    return [400, 403, 404].some(statusCode => 'statusCode' in error.innerError && error.innerError.statusCode === statusCode);\n  });\n};\nconst botContactMRIPrefix = '28:';\nconst isErrorDueToBotContact = (error: ChatError): boolean => 'statusCode' in error.innerError && error.innerError.statusCode === 400 && error.innerError.message.includes(`Identifier format is not supported (${botContactMRIPrefix}`);\nconst latestActiveErrorSatisfying = (errors: ChatErrors, activeErrorType: ErrorType, predicate: (error: ChatError) => boolean): ActiveErrorMessage | undefined => {\n  const activeErrorMessages: ActiveErrorMessage[] = [];\n  for (const target of accessErrorTargets) {\n    const error = errors[target];\n    if (predicate(error)) {\n      activeErrorMessages.push({\n        type: activeErrorType,\n        timestamp: error.timestamp\n      });\n    }\n  }\n  if (activeErrorMessages.length === 0) {\n    return undefined;\n  }\n  // We're actually sure that both timestamps will always exist, because we set them above.\n  activeErrorMessages.sort((a: ActiveErrorMessage, b: ActiveErrorMessage) => (a.timestamp?.getTime() ?? 0) - (b.timestamp?.getTime() ?? 0));\n  return activeErrorMessages[activeErrorMessages.length - 1];\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { ErrorBar, MessageThread, ParticipantList, SendBox, TypingIndicator } from '@internal/react-components';\nimport { useHandlers } from './useHandlers';\nimport { useSelector } from './useSelector';\nimport { SendBoxSelector, sendBoxSelector } from '../sendBoxSelector';\nimport { MessageThreadSelector, messageThreadSelectorWithThread } from '../messageThreadSelector';\nimport { TypingIndicatorSelector, typingIndicatorSelector } from '../typingIndicatorSelector';\nimport { Common, AreEqual } from '@internal/acs-ui-common';\nimport { ChatHandlers } from '../handlers/createHandlers';\nimport { ChatParticipantListSelector, chatParticipantListSelector } from '../chatParticipantListSelector';\nimport { ErrorBarSelector, errorBarSelector } from '../errorBarSelector';\nimport { ChatThreadClientContext } from '../providers/ChatThreadClientProvider';\nimport { useContext } from 'react';\n\n/**\n * Primary hook to get all hooks necessary for a chat Component.\n *\n * Most straightforward usage of chat components looks like:\n *\n * @example\n * ```\n *     import { ParticipantList, usePropsFor } from '@azure/communication-react';\n *\n *     const App = (): JSX.Element => {\n *         // ... code to setup Providers ...\n *\n *         return <ParticipantList {...usePropsFor(ParticipantList)}/>\n *     }\n * ```\n *\n * @public\n */\nexport const usePropsFor = <Component extends (props: any) => JSX.Element,>(component: Component): GetSelector<Component> extends (props: any) => any ? ReturnType<GetSelector<Component>> & Common<ChatHandlers, Parameters<Component>[0]> : undefined => {\n  const selector = getSelector(component);\n  const props = useSelector(selector);\n  const handlers = useHandlers<Parameters<Component>[0]>(component);\n  if (props !== undefined) {\n    return ({\n      ...props,\n      ...handlers\n    } as any);\n  }\n  return (undefined as any);\n};\n\n/**\n * Specific type of the selector applicable to a given Component.\n *\n * @public\n */\nexport type GetSelector<Component extends (props: any) => JSX.Element | undefined> = AreEqual<Component, typeof SendBox> extends true ? SendBoxSelector : AreEqual<Component, typeof MessageThread> extends true ? MessageThreadSelector : AreEqual<Component, typeof TypingIndicator> extends true ? TypingIndicatorSelector : AreEqual<Component, typeof ParticipantList> extends true ? ChatParticipantListSelector : AreEqual<Component, typeof ErrorBar> extends true ? ErrorBarSelector : undefined;\n\n/**\n * Get the selector for a specified component.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const getSelector = <Component extends (props: any) => JSX.Element | undefined,>(component: Component): GetSelector<Component> => {\n  return findSelector(component);\n};\nconst messageThreadSelectorsByThread: {\n  [key: string]: MessageThreadSelector;\n} = {};\nconst findSelector = (component: (props: any) => JSX.Element | undefined): any => {\n  // For the message thread selector we need to create a new one for each thread\n  // If we have just one for the entire app, then we will have updates when not expecting due to\n  // the arguments changing\n  const getMessageThreadSelector: () => MessageThreadSelector = () => {\n    const threadId = useContext(ChatThreadClientContext)?.threadId ?? 'default-id-when-not-in-provider';\n    let messageThreadSelectorImpl = messageThreadSelectorsByThread[threadId];\n    if (!messageThreadSelectorImpl) {\n      messageThreadSelectorsByThread[threadId] = messageThreadSelectorWithThread();\n      messageThreadSelectorImpl = messageThreadSelectorsByThread[threadId];\n    }\n    return messageThreadSelectorImpl;\n  };\n  switch (component) {\n    case SendBox:\n      return sendBoxSelector;\n    case MessageThread:\n      return getMessageThreadSelector();\n    case TypingIndicator:\n      return typingIndicatorSelector;\n    case ParticipantList:\n      return chatParticipantListSelector;\n    case ErrorBar:\n      return errorBarSelector;\n  }\n  return undefined;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatMessageReadReceipt, ChatParticipant } from '@azure/communication-chat';\nimport { CommunicationIdentifierKind } from '@azure/communication-common';\nimport { ChatMessageWithStatus } from './types/ChatMessageWithStatus';\nimport { TypingIndicatorReceivedEvent } from '@azure/communication-chat';\n\n/**\n * Centralized state for {@link @azure/communication-chat#ChatClient}.\n *\n * @public\n */\nexport type ChatClientState = {\n  /**\n   * Identifier of the current user.\n   */\n  userId: CommunicationIdentifierKind;\n  /**\n   * DisplayName of the current user.\n   * The same value as what others see in {@link @azure/communication-chat#ChatParticipant.displayName}\n   */\n  displayName: string;\n  /**\n   * Chat threads joined by the current user.\n   * Object with {@link ChatThreadClientState} fields, keyed by {@link ChatThreadClientState.threadId}.\n   */\n  threads: {\n    [key: string]: ChatThreadClientState;\n  };\n  /**\n   * Stores the latest error for each API method.\n   *\n   * See documentation of {@link ChatErrors} for details.\n   */\n  latestErrors: ChatErrors;\n};\n\n/**\n * Centralized state for {@link @azure/communication-chat#ChatThreadClient}.\n *\n * @public\n */\nexport type ChatThreadClientState = {\n  /**\n   * Messages in this thread.\n   * Object with {@link ChatMessageWithStatus} entries\n   * Local messages are keyed by keyed by {@link ChatMessageWithStatus.clientMessageId}.\n   * Remote messages are keyed by {@link @azure/communication-chat#ChatMessage.id}.\n   */\n  chatMessages: {\n    [key: string]: ChatMessageWithStatus;\n  };\n  /**\n   * Participants of this chat thread.\n   *\n   * Object with {@link @azure/communication-chat#ChatParticipant} fields,\n   * keyed by {@link @azure/communication-chat#ChatParticipant.id}.\n   */\n  participants: {\n    [key: string]: ChatParticipant;\n  };\n  /**\n   * Id of this chat thread. Returned from {@link @azure/communication-chat#ChatThreadClient.threadId}\n   */\n  threadId: string;\n  /**\n   * An object containing properties of this chat thread.\n   */\n  properties?: ChatThreadProperties;\n  /**\n   * An array of ReadReceipts of this chat thread. Returned from {@link @azure/communication-chat#ChatThreadClient.listReadReceipts}\n   */\n  readReceipts: ChatMessageReadReceipt[];\n  /**\n   * An array of typingIndicators of this chat thread. Captured from event listener of {@link @azure/communication-chat#ChatClient}\n   * Stateful client only stores recent 8000ms real-time typing indicators data.\n   */\n  typingIndicators: TypingIndicatorReceivedEvent[];\n  /**\n   * Latest timestamp when other users read messages sent by current user.\n   */\n  latestReadTime: Date;\n};\n\n/**\n * Properties of a chat thread.\n *\n * We define a minimal one that helps us hide the different types used by underlying API.\n *\n * @public\n */\nexport type ChatThreadProperties = {\n  topic?: string;\n};\n\n/**\n * Errors teed from API calls to the Chat SDK.\n *\n * Each property in the object stores the latest error for a particular SDK API method.\n *\n * @public\n */\nexport type ChatErrors = { [target in ChatErrorTarget]: ChatError };\n\n/**\n * Error thrown from failed {@link StatefulChatClient} methods.\n *\n * @public\n */\nexport class ChatError extends Error {\n  /**\n   * The API method target that failed.\n   */\n  public target: ChatErrorTarget;\n  /**\n   * Error thrown by the failed SDK method.\n   */\n  public innerError: Error;\n  /**\n   * Timestamp added to the error by the stateful layer.\n   */\n  public timestamp: Date;\n  constructor(target: ChatErrorTarget, innerError: Error, timestamp?: Date) {\n    super();\n    this.target = target;\n    this.innerError = innerError;\n    // Testing note: It is easier to mock Date::now() than the Date() constructor.\n    this.timestamp = timestamp ?? new Date(Date.now());\n    this.name = 'ChatError';\n    this.message = `${this.target}: ${this.innerError.message}`;\n  }\n}\n\n/**\n * String literal type for all permissible keys in {@link ChatErrors}.\n *\n * @public\n */\nexport type ChatErrorTarget = 'ChatClient.createChatThread' | 'ChatClient.deleteChatThread' | 'ChatClient.getChatThreadClient' | 'ChatClient.listChatThreads' | 'ChatClient.off' | 'ChatClient.on' | 'ChatClient.startRealtimeNotifications' | 'ChatClient.stopRealtimeNotifications' | 'ChatThreadClient.addParticipants' | 'ChatThreadClient.deleteMessage' | 'ChatThreadClient.getMessage' | 'ChatThreadClient.getProperties' | 'ChatThreadClient.listMessages' | 'ChatThreadClient.listParticipants' | 'ChatThreadClient.listReadReceipts' | 'ChatThreadClient.removeParticipant' | 'ChatThreadClient.sendMessage' | 'ChatThreadClient.sendReadReceipt' | 'ChatThreadClient.sendTypingNotification' | 'ChatThreadClient.updateMessage' | 'ChatThreadClient.updateTopic';","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @private\n */\nexport const Constants = {\n  TYPING_INDICATOR_MAINTAIN_TIME: 8 * 1000,\n  DUMMY_DATE: new Date(0)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createClientLogger } from '@azure/logger';\n\n/**\n * @private\n */\nexport const chatStatefulLogger = createClientLogger('communication-react:chat-stateful');","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nimport { ChatContext } from './ChatContext';\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nimport { ChatMessageWithStatus, ResourceFetchResult } from './types/ChatMessageWithStatus';\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nimport type { CommunicationTokenCredential } from '@azure/communication-common';\ndeclare type CancellationDetails = {\n  src: string;\n  abortController: AbortController;\n};\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n/**\n * @private\n */\nexport class ResourceDownloadQueue {\n  private _messagesNeedingResourceRetrieval: ChatMessageWithStatus[] = [];\n  private _context: ChatContext;\n  private isActive = false;\n  private _credential: CommunicationTokenCredential;\n  private _endpoint: string;\n  private _requestsToCancel: Record<string, CancellationDetails> = {};\n  constructor(context: ChatContext, authentication: {\n    credential: CommunicationTokenCredential;\n    endpoint: string;\n  }) {\n    this._context = context;\n    this._credential = authentication.credential;\n    this._endpoint = authentication.endpoint;\n  }\n  public containsMessageWithSameAttachments(message: ChatMessageWithStatus): boolean {\n    let contains = false;\n    const incomingAttachment = message.content?.attachments;\n    if (incomingAttachment) {\n      for (const m of this._messagesNeedingResourceRetrieval) {\n        const existingAttachment = m.content?.attachments ?? [];\n        contains = incomingAttachment.every((element, index) => element === existingAttachment[index]);\n        if (contains) {\n          break;\n        }\n      }\n    }\n    return contains;\n  }\n  public addMessage(message: ChatMessageWithStatus): void {\n    // make a copy of message and add to queue\n    const copy = {\n      ...message\n    };\n    this._messagesNeedingResourceRetrieval.push(copy);\n  }\n  public async startQueue(threadId: string, operation: ImageRequest, options?: {\n    singleUrl: string;\n  }): Promise<void> {\n    if (this.isActive) {\n      return;\n    }\n    while (this._messagesNeedingResourceRetrieval.length > 0) {\n      this.isActive = true;\n      let message = this._messagesNeedingResourceRetrieval.shift();\n      if (!message) {\n        this.isActive = false;\n        continue;\n      }\n      if (options) {\n        const singleUrl = options.singleUrl;\n        message = await this.downloadSingleUrl(message, singleUrl, operation);\n      } else {\n        message = await this.downloadAllPreviewUrls(message, operation);\n      }\n      this._context.setChatMessage(threadId, message);\n      this.isActive = false;\n    }\n  }\n  public cancelAllRequests(): void {\n    for (const key in this._requestsToCancel) {\n      this._requestsToCancel[key].abortController.abort();\n    }\n    this._requestsToCancel = {};\n  }\n  public cancelRequest(url: string): void {\n    if (this._requestsToCancel[url]) {\n      this._requestsToCancel[url].abortController.abort();\n      delete this._requestsToCancel[url];\n    }\n  }\n  private async downloadSingleUrl(message: ChatMessageWithStatus, resourceUrl: string, operation: ImageRequest): Promise<ChatMessageWithStatus> {\n    const response: ResourceFetchResult = {\n      sourceUrl: ''\n    };\n    try {\n      const abortController = new AbortController();\n      const blobUrl = await this.downloadResource(operation, resourceUrl, abortController);\n      response.sourceUrl = blobUrl;\n    } catch (error) {\n      response.error = (error as Error);\n      delete this._requestsToCancel[resourceUrl];\n    }\n    message = {\n      ...message,\n      resourceCache: {\n        ...message.resourceCache,\n        [resourceUrl]: response\n      }\n    };\n    return message;\n  }\n  private async downloadAllPreviewUrls(message: ChatMessageWithStatus, operation: ImageRequest): Promise<ChatMessageWithStatus> {\n    const attachments = message.content?.attachments;\n    if (message.type === 'html' && attachments) {\n      if (message.resourceCache === undefined) {\n        message.resourceCache = {};\n      }\n      for (const attachment of attachments) {\n        if (attachment.previewUrl && attachment.attachmentType === 'image') {\n          const response: ResourceFetchResult = {\n            sourceUrl: ''\n          };\n          try {\n            const abortController = new AbortController();\n            const blobUrl = await this.downloadResource(operation, attachment.previewUrl, abortController);\n            response.sourceUrl = blobUrl;\n          } catch (error) {\n            response.error = (error as Error);\n            delete this._requestsToCancel[attachment.previewUrl];\n          }\n          message.resourceCache[attachment.previewUrl] = response;\n        }\n      }\n    }\n    return message;\n  }\n  private async downloadResource(operation: ImageRequest, url: string, abortController: AbortController): Promise<string> {\n    this._requestsToCancel[url] = {\n      src: url,\n      abortController\n    };\n    const blobUrl = await operation(url, {\n      credential: this._credential,\n      endpoint: this._endpoint\n    }, {\n      abortController\n    });\n    delete this._requestsToCancel[url];\n    return blobUrl;\n  }\n}\n\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n/**\n * @private\n */\nexport const fetchImageSource = async (src: string, authentication: {\n  credential: CommunicationTokenCredential;\n  endpoint: string;\n}, options: {\n  abortController: AbortController;\n  timeout?: number;\n}): Promise<string> => {\n  async function fetchWithAuthentication(url: string, token: string, options: {\n    abortController: AbortController;\n    timeout?: number;\n  }): Promise<Response> {\n    const headers = new Headers();\n    headers.append('Authorization', `Bearer ${token}`);\n    return await fetchWithTimeout(url, {\n      timeout: options.timeout,\n      headers,\n      abortController: options.abortController\n    });\n  }\n  async function fetchWithTimeout(resource: string | URL | Request, options: {\n    timeout?: number;\n    headers?: Headers;\n    abortController: AbortController;\n  }): Promise<Response> {\n    // default timeout is 30 seconds\n    const {\n      timeout = 30000,\n      abortController\n    } = options;\n    const id = setTimeout(() => {\n      abortController.abort();\n    }, timeout);\n    const response = await fetch(resource, {\n      ...options,\n      signal: abortController.signal\n    });\n    clearTimeout(id);\n    return response;\n  }\n  const fetchUrl = new URL(src);\n  const endpoint = new URL(authentication.endpoint);\n  let token = '';\n  if (fetchUrl.hostname === endpoint.hostname && fetchUrl.protocol === 'https:') {\n    token = (await authentication.credential.getToken()).token;\n  }\n  const response = await fetchWithAuthentication(src, token, options);\n  const blob = await response.blob();\n  return URL.createObjectURL(blob);\n};\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\ninterface ImageRequest {\n  (request: string, authentication: {\n    credential: CommunicationTokenCredential;\n    endpoint: string;\n  }, options: {\n    abortController: AbortController;\n    timeout?: number;\n  }): Promise<string>;\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport EventEmitter from 'events';\nimport { enableMapSet, enablePatches, produce, Patch } from 'immer';\nimport { ChatClientState, ChatErrors, ChatThreadClientState, ChatThreadProperties, ChatErrorTarget, ChatError } from './ChatClientState';\nimport { ChatMessageWithStatus } from './types/ChatMessageWithStatus';\nimport { ChatMessageReadReceipt, ChatParticipant } from '@azure/communication-chat';\nimport { CommunicationIdentifierKind, UnknownIdentifierKind } from '@azure/communication-common';\nimport { AzureLogger, createClientLogger, getLogLevel } from '@azure/logger';\nimport { _safeJSONStringify, toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { Constants } from './Constants';\nimport { TypingIndicatorReceivedEvent } from '@azure/communication-chat';\nimport { chatStatefulLogger } from './Logger';\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nimport type { CommunicationTokenCredential } from '@azure/communication-common';\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nimport { ResourceDownloadQueue, fetchImageSource } from './ResourceDownloadQueue';\nenableMapSet();\n// Needed to generate state diff for verbose logging.\nenablePatches();\n\n/**\n * @internal\n */\nexport class ChatContext {\n  private _state: ChatClientState = {\n    userId: ({\n      id: ''\n    } as UnknownIdentifierKind),\n    displayName: '',\n    threads: {},\n    latestErrors: ({} as ChatErrors)\n  };\n  private _batchMode = false;\n  private _logger: AzureLogger;\n  private _emitter: EventEmitter;\n  private typingIndicatorInterval: number | undefined = undefined;\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  private _inlineImageQueue: ResourceDownloadQueue | undefined = undefined;\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  private _fullsizeImageQueue: ResourceDownloadQueue | undefined = undefined;\n  constructor(maxListeners?: number, /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */credential?: CommunicationTokenCredential, /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */endpoint?: string) {\n    this._logger = createClientLogger('communication-react:chat-context');\n    this._emitter = new EventEmitter();\n    /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n    if (credential) {\n      this._inlineImageQueue = new ResourceDownloadQueue(this, {\n        credential,\n        endpoint: endpoint ?? ''\n      });\n      this._fullsizeImageQueue = new ResourceDownloadQueue(this, {\n        credential,\n        endpoint: endpoint ?? ''\n      });\n    }\n    if (maxListeners) {\n      this._emitter.setMaxListeners(maxListeners);\n    }\n  }\n  public getState(): ChatClientState {\n    return this._state;\n  }\n  public modifyState(modifier: (draft: ChatClientState) => void): void {\n    const priorState = this._state;\n    this._state = produce(this._state, modifier, (patches: Patch[]) => {\n      if (getLogLevel() === 'verbose') {\n        // Log to `info` because AzureLogger.verbose() doesn't show up in console.\n        this._logger.info(`State change: ${_safeJSONStringify(patches)}`);\n      }\n    });\n    if (!this._batchMode && this._state !== priorState) {\n      this._emitter.emit('stateChanged', this._state);\n    }\n  }\n\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  public dispose(): void {\n    this.modifyState((draft: ChatClientState) => {\n      this._inlineImageQueue?.cancelAllRequests();\n      this._fullsizeImageQueue?.cancelAllRequests();\n      Object.keys(draft.threads).forEach(threadId => {\n        const thread = draft.threads[threadId];\n        Object.keys(thread.chatMessages).forEach(messageId => {\n          const cache = thread.chatMessages[messageId].resourceCache;\n          if (cache) {\n            Object.keys(cache).forEach(resourceUrl => {\n              const resource = cache[resourceUrl];\n              if (resource.sourceUrl) {\n                URL.revokeObjectURL(resource.sourceUrl);\n              }\n            });\n          }\n          thread.chatMessages[messageId].resourceCache = undefined;\n        });\n      });\n    });\n    // Any item in queue should be removed.\n  }\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  public async downloadResourceToCache(threadId: string, messageId: string, resourceUrl: string): Promise<void> {\n    let message = this.getState().threads[threadId]?.chatMessages[messageId];\n    if (message && this._fullsizeImageQueue) {\n      if (!message.resourceCache) {\n        message = {\n          ...message,\n          resourceCache: {}\n        };\n      }\n      // Need to discuss retry logic in case of failure\n      this._fullsizeImageQueue.addMessage(message);\n      await this._fullsizeImageQueue.startQueue(threadId, fetchImageSource, {\n        singleUrl: resourceUrl\n      });\n    }\n  }\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  public removeResourceFromCache(threadId: string, messageId: string, resourceUrl: string): void {\n    this.modifyState((draft: ChatClientState) => {\n      const message = draft.threads[threadId]?.chatMessages[messageId];\n      if (message && this._fullsizeImageQueue && this._fullsizeImageQueue.containsMessageWithSameAttachments(message)) {\n        this._fullsizeImageQueue?.cancelRequest(resourceUrl);\n      } else if (message && this._inlineImageQueue && this._inlineImageQueue.containsMessageWithSameAttachments(message)) {\n        this._inlineImageQueue?.cancelRequest(resourceUrl);\n      }\n      if (message && message.resourceCache && message.resourceCache[resourceUrl]) {\n        const resource = message.resourceCache[resourceUrl];\n        if (resource.sourceUrl) {\n          URL.revokeObjectURL(resource.sourceUrl);\n        }\n        delete message.resourceCache[resourceUrl];\n      }\n    });\n  }\n  public setThread(threadId: string, threadState: ChatThreadClientState): void {\n    this.modifyState((draft: ChatClientState) => {\n      draft.threads[threadId] = threadState;\n    });\n  }\n  public createThread(threadId: string, properties?: ChatThreadProperties): void {\n    this.modifyState((draft: ChatClientState) => {\n      draft.threads[threadId] = {\n        chatMessages: {},\n        threadId: threadId,\n        properties: properties,\n        participants: {},\n        readReceipts: [],\n        typingIndicators: [],\n        latestReadTime: new Date(0)\n      };\n    });\n  }\n  public updateChatConfig(userId: CommunicationIdentifierKind, displayName: string): void {\n    this.modifyState((draft: ChatClientState) => {\n      draft.displayName = displayName;\n      draft.userId = userId;\n    });\n  }\n  public createThreadIfNotExist(threadId: string, properties?: ChatThreadProperties): boolean {\n    const exists = Object.prototype.hasOwnProperty.call(this.getState().threads, threadId);\n    if (!exists) {\n      this.createThread(threadId, properties);\n      return true;\n    }\n    return false;\n  }\n  public updateThread(threadId: string, properties?: ChatThreadProperties): void {\n    this.modifyState((draft: ChatClientState) => {\n      const thread = draft.threads[threadId];\n      if (thread) {\n        thread.properties = properties;\n      }\n    });\n  }\n  public updateThreadTopic(threadId: string, topic?: string): void {\n    this.modifyState((draft: ChatClientState) => {\n      if (topic === undefined) {\n        return;\n      }\n      const thread = draft.threads[threadId];\n      if (thread && !thread.properties) {\n        thread.properties = {\n          topic: topic\n        };\n      } else if (thread && thread.properties) {\n        thread.properties.topic = topic;\n      }\n    });\n  }\n  public deleteThread(threadId: string): void {\n    this.modifyState((draft: ChatClientState) => {\n      const thread = draft.threads[threadId];\n      if (thread) {\n        delete draft.threads[threadId];\n      }\n    });\n  }\n  public setChatMessages(threadId: string, messages: {\n    [key: string]: ChatMessageWithStatus;\n  }): void {\n    this.modifyState((draft: ChatClientState) => {\n      const threadState = draft.threads[threadId];\n      if (threadState) {\n        threadState.chatMessages = messages;\n      }\n\n      // remove typing indicator when receive messages\n      const thread = draft.threads[threadId];\n      if (thread) {\n        for (const message of Object.values(messages)) {\n          this.filterTypingIndicatorForUser(thread, message.sender);\n        }\n      }\n    });\n  }\n  public updateChatMessageContent(threadId: string, messagesId: string, content: string | undefined): void {\n    this.modifyState((draft: ChatClientState) => {\n      const chatMessage = draft.threads[threadId]?.chatMessages[messagesId];\n      if (chatMessage) {\n        if (!chatMessage.content) {\n          chatMessage.content = {};\n        }\n        chatMessage.content.message = content;\n      }\n    });\n  }\n  public deleteLocalMessage(threadId: string, localId: string): boolean {\n    let localMessageDeleted = false;\n    this.modifyState((draft: ChatClientState) => {\n      const chatMessages = draft.threads[threadId]?.chatMessages;\n      const message: ChatMessageWithStatus | undefined = chatMessages ? chatMessages[localId] : undefined;\n      if (chatMessages && message && message.clientMessageId) {\n        delete chatMessages[message.clientMessageId];\n        localMessageDeleted = true;\n      }\n    });\n    return localMessageDeleted;\n  }\n  public deleteMessage(threadId: string, id: string): void {\n    this.modifyState((draft: ChatClientState) => {\n      const chatMessages = draft.threads[threadId]?.chatMessages;\n      if (chatMessages) {\n        delete chatMessages[id];\n      }\n    });\n  }\n  public setParticipant(threadId: string, participant: ChatParticipant): void {\n    this.modifyState((draft: ChatClientState) => {\n      const participants = draft.threads[threadId]?.participants;\n      if (participants) {\n        participants[toFlatCommunicationIdentifier(participant.id)] = participant;\n      }\n    });\n  }\n  public setParticipants(threadId: string, participants: ChatParticipant[]): void {\n    this.modifyState((draft: ChatClientState) => {\n      const participantsMap = draft.threads[threadId]?.participants;\n      if (participantsMap) {\n        for (const participant of participants) {\n          participantsMap[toFlatCommunicationIdentifier(participant.id)] = participant;\n        }\n      }\n    });\n  }\n  public deleteParticipants(threadId: string, participantIds: CommunicationIdentifierKind[]): void {\n    this.modifyState((draft: ChatClientState) => {\n      const participants = draft.threads[threadId]?.participants;\n      if (participants) {\n        participantIds.forEach(id => {\n          delete participants[toFlatCommunicationIdentifier(id)];\n        });\n      }\n    });\n  }\n  public deleteParticipant(threadId: string, participantId: CommunicationIdentifierKind): void {\n    this.modifyState((draft: ChatClientState) => {\n      const participants = draft.threads[threadId]?.participants;\n      if (participants) {\n        delete participants[toFlatCommunicationIdentifier(participantId)];\n      }\n    });\n  }\n  public addReadReceipt(threadId: string, readReceipt: ChatMessageReadReceipt): void {\n    this.modifyState((draft: ChatClientState) => {\n      const thread = draft.threads[threadId];\n      const readReceipts = thread?.readReceipts;\n      if (thread && readReceipts) {\n        // TODO(prprabhu): Replace `this.getState()` with `draft`?\n        if (readReceipt.sender !== this.getState().userId && thread.latestReadTime < readReceipt.readOn) {\n          thread.latestReadTime = readReceipt.readOn;\n        }\n        readReceipts.push(readReceipt);\n      }\n    });\n  }\n  private startTypingIndicatorCleanUp(): void {\n    if (this.typingIndicatorInterval) {\n      return;\n    }\n    this.typingIndicatorInterval = window.setInterval(() => {\n      let isTypingActive = false;\n      this.modifyState((draft: ChatClientState) => {\n        for (const thread of Object.values(draft.threads)) {\n          const filteredTypingIndicators = thread.typingIndicators.filter(typingIndicator => {\n            const timeGap = Date.now() - typingIndicator.receivedOn.getTime();\n            return timeGap < Constants.TYPING_INDICATOR_MAINTAIN_TIME;\n          });\n          if (thread.typingIndicators.length !== filteredTypingIndicators.length) {\n            thread.typingIndicators = filteredTypingIndicators;\n          }\n          if (thread.typingIndicators.length > 0) {\n            isTypingActive = true;\n          }\n        }\n      });\n      if (!isTypingActive && this.typingIndicatorInterval) {\n        window.clearInterval(this.typingIndicatorInterval);\n        this.typingIndicatorInterval = undefined;\n      }\n    }, 1000);\n  }\n  public addTypingIndicator(threadId: string, typingIndicator: TypingIndicatorReceivedEvent): void {\n    this.modifyState((draft: ChatClientState) => {\n      const thread = draft.threads[threadId];\n      if (thread) {\n        const typingIndicators = thread.typingIndicators;\n        typingIndicators.push(typingIndicator);\n      }\n    });\n\n    // Make sure we only maintain a period of typing indicator for perf purposes\n    this.startTypingIndicatorCleanUp();\n  }\n  public setChatMessage(threadId: string, message: ChatMessageWithStatus): void {\n    /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n    this.parseAttachments(threadId, message);\n    const {\n      id: messageId,\n      clientMessageId\n    } = message;\n    if (messageId || clientMessageId) {\n      this.modifyState((draft: ChatClientState) => {\n        const threadMessages = draft.threads[threadId]?.chatMessages;\n        const isLocalIdInMap = threadMessages && clientMessageId && threadMessages[clientMessageId];\n        const messageKey = !messageId || isLocalIdInMap ? clientMessageId : messageId;\n        if (threadMessages && messageKey) {\n          threadMessages[messageKey] = message;\n        }\n\n        // remove typing indicator when receive a message from a user\n        const thread = draft.threads[threadId];\n        if (thread) {\n          this.filterTypingIndicatorForUser(thread, message.sender);\n        }\n      });\n    }\n  }\n\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  private parseAttachments(threadId: string, message: ChatMessageWithStatus): void {\n    const attachments = message.content?.attachments;\n    if (message.type === 'html' && attachments && attachments.length > 0) {\n      if (this._inlineImageQueue && !this._inlineImageQueue.containsMessageWithSameAttachments(message) && message.resourceCache === undefined) {\n        // Need to discuss retry logic in case of failure\n        this._inlineImageQueue.addMessage(message);\n        this._inlineImageQueue.startQueue(threadId, fetchImageSource);\n      }\n    }\n  }\n\n  /**\n   * Tees any errors encountered in an async function to the state.\n   *\n   * @param f Async function to execute.\n   * @param target The error target to tee error to.\n   * @returns Result of calling `f`. Also re-raises any exceptions thrown from `f`.\n   * @throws ChatError. Exceptions thrown from `f` are tagged with the failed `target.\n   */\n  public withAsyncErrorTeedToState<Args extends unknown[], R>(f: (...args: Args) => Promise<R>, target: ChatErrorTarget): (...args: Args) => Promise<R> {\n    return async (...args: Args): Promise<R> => {\n      try {\n        return await f(...args);\n      } catch (error) {\n        const chatError = toChatError(target, error);\n        this.setLatestError(target, chatError);\n        throw chatError;\n      }\n    };\n  }\n\n  /**\n   * Tees any errors encountered in an function to the state.\n   *\n   * @param f Function to execute.\n   * @param target The error target to tee error to.\n   * @returns Result of calling `f`. Also re-raises any exceptions thrown from `f`.\n   * @throws ChatError. Exceptions thrown from `f` are tagged with the failed `target.\n   */\n  public withErrorTeedToState<Args extends unknown[], R>(f: (...args: Args) => R, target: ChatErrorTarget): (...args: Args) => R {\n    return (...args: Args): R => {\n      try {\n        chatStatefulLogger.info(`Chat stateful client target function called: ${target}`);\n        return f(...args);\n      } catch (error) {\n        const chatError = toChatError(target, error);\n        this.setLatestError(target, chatError);\n        throw chatError;\n      }\n    };\n  }\n  private setLatestError(target: ChatErrorTarget, error: ChatError): void {\n    this.modifyState((draft: ChatClientState) => {\n      draft.latestErrors[target] = error;\n    });\n  }\n\n  // This is a mutating function, only use it inside of a produce() function\n  private filterTypingIndicatorForUser(thread: ChatThreadClientState, userId?: CommunicationIdentifierKind): void {\n    if (!userId) {\n      return;\n    }\n    const typingIndicators = thread.typingIndicators;\n    const userIdAsKey = toFlatCommunicationIdentifier(userId);\n    const filteredTypingIndicators = typingIndicators.filter(typingIndicator => toFlatCommunicationIdentifier(typingIndicator.sender) !== userIdAsKey);\n    if (filteredTypingIndicators.length !== typingIndicators.length) {\n      thread.typingIndicators = filteredTypingIndicators;\n    }\n  }\n\n  /**\n   * Batch updates to minimize `stateChanged` events across related operations.\n   *\n   * - A maximum of one `stateChanged` event is emitted, at the end of the operations.\n   * - No `stateChanged` event is emitted if the state did not change through the operations.\n   * - In case of an exception, state is reset to the prior value and no `stateChanged` event is emitted.\n   *\n   * All operations finished in this batch should be synchronous.\n   * This function is not reentrant -- do not call batch() from within another batch().\n   */\n  public batch(operations: () => void): void {\n    if (this._batchMode) {\n      throw new Error('batch() called from within another batch()');\n    }\n    this._batchMode = true;\n    const priorState = this._state;\n    try {\n      operations();\n      if (this._state !== priorState) {\n        this._emitter.emit('stateChanged', this._state);\n      }\n    } catch (e) {\n      this._state = priorState;\n      if (getLogLevel() === 'verbose') {\n        this._logger.warning(`State rollback to: ${_safeJSONStringify(priorState)}`);\n      }\n      throw e;\n    } finally {\n      this._batchMode = false;\n    }\n  }\n  public onStateChange(handler: (state: ChatClientState) => void): void {\n    this._emitter.on('stateChanged', handler);\n  }\n  public offStateChange(handler: (state: ChatClientState) => void): void {\n    this._emitter.off('stateChanged', handler);\n  }\n}\nconst toChatError = (target: ChatErrorTarget, error: unknown): ChatError => {\n  if (error instanceof Error) {\n    return new ChatError(target, error);\n  }\n  return new ChatError(target, new Error(`${error}`));\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatMessage } from '@azure/communication-chat';\nimport { MessageStatus } from '@internal/acs-ui-common';\nimport { ChatMessageWithStatus } from './types/ChatMessageWithStatus';\n\n/**\n * @private\n */\nexport const convertChatMessage = (message: ChatMessage, status: MessageStatus = 'delivered', clientMessageId?: string): ChatMessageWithStatus => {\n  return {\n    ...message,\n    clientMessageId: clientMessageId,\n    status\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatClient, ChatMessageReadReceipt, ChatMessageType } from '@azure/communication-chat';\nimport { ChatMessageDeletedEvent, ChatMessageEditedEvent, ChatMessageReceivedEvent, ChatThreadCreatedEvent, ChatThreadDeletedEvent, ChatThreadPropertiesUpdatedEvent, ParticipantsAddedEvent, ParticipantsRemovedEvent, ReadReceiptReceivedEvent, TypingIndicatorReceivedEvent } from '@azure/communication-chat';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { ChatContext } from './ChatContext';\nimport { convertChatMessage } from './convertChatMessage';\nimport { ChatMessageWithStatus } from './types/ChatMessageWithStatus';\n\n// TODO: When we can get messageId of event from SDK, remove this\n// Maximum time to look back message list when we receive a system event\nconst maxSyncTimeInMs = 10 * 1000;\n\n/**\n * @private\n */\nexport class EventSubscriber {\n  private chatClient: ChatClient;\n  private chatContext: ChatContext;\n  constructor(chatClient: ChatClient, chatContext: ChatContext) {\n    this.chatClient = chatClient;\n    this.chatContext = chatContext;\n    this.subscribe();\n  }\n  private convertEventToChatMessage = (event: ChatMessageReceivedEvent | ChatMessageEditedEvent): ChatMessageWithStatus => {\n    return convertChatMessage({\n      id: event.id,\n      version: event.version,\n      content: {\n        message: event.message,\n        /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n        attachments: event.attachments\n      },\n      type: this.convertEventType(event.type),\n      sender: event.sender,\n      senderDisplayName: event.senderDisplayName,\n      sequenceId: '',\n      // Note: there is a bug in chatMessageReceived event that it is missing sequenceId\n      createdOn: new Date(event.createdOn),\n      editedOn: 'editedOn' in event ? event.editedOn : undefined,\n      metadata: event.metadata\n    });\n  };\n\n  // convert event type to chatMessage type, only possible type is 'html' and 'text' in chat event\n  private convertEventType = (type: string): ChatMessageType => {\n    const lowerCaseType = type.toLowerCase();\n    if (lowerCaseType === 'richtext/html' || lowerCaseType === 'html') {\n      return 'html';\n    } else {\n      return 'text';\n    }\n  };\n  private onChatMessageReceived = (event: ChatMessageReceivedEvent): void => {\n    // Today we are avoiding how to render these messages. In the future we can\n    // remove this condition and handle this message appropriately.\n    const messageEventType = event.type.toLowerCase();\n    if (messageEventType !== 'text' && messageEventType !== 'richtext/html' && messageEventType !== 'html') {\n      return;\n    }\n    const newMessage = this.convertEventToChatMessage(event);\n\n    // Because of bug in chatMessageReceived event, if we already have that particular message in context, we want to\n    // make sure to not overwrite the sequenceId when calling setChatMessage.\n    const existingMessage = this.chatContext.getState().threads[event.threadId]?.chatMessages[event.id];\n    if (existingMessage) {\n      newMessage.sequenceId = existingMessage.sequenceId;\n    }\n    this.chatContext.batch(() => {\n      this.chatContext.createThreadIfNotExist(event.threadId);\n      this.chatContext.setChatMessage(event.threadId, newMessage);\n    });\n  };\n  private onChatMessageDeleted = (event: ChatMessageDeletedEvent): void => {\n    this.chatContext.deleteMessage(event.threadId, event.id);\n  };\n  private onChatMessageEdited = (event: ChatMessageEditedEvent): void => {\n    const editedMessage = this.convertEventToChatMessage(event);\n    this.chatContext.setChatMessage(event.threadId, convertChatMessage(editedMessage));\n  };\n  private onParticipantsAdded = (event: ParticipantsAddedEvent): void => {\n    const participantsToAdd = event.participantsAdded.map(participant => ({\n      ...participant,\n      shareHistoryTime: participant.shareHistoryTime ? new Date(participant.shareHistoryTime) : undefined\n    }));\n    this.chatContext.batch(() => {\n      this.chatContext.createThreadIfNotExist(event.threadId);\n      this.chatContext.setParticipants(event.threadId, participantsToAdd);\n    });\n    this.fetchLastParticipantMessage(event.threadId, 'participantAdded');\n  };\n\n  // This is a temporary fix that no participant message is received for onChatMessageReceived event, which should be handled by JS SDK.\n  // Without the temporary fix, there are missing 'participant joined' and 'participant left' system messages in the chat thread.\n  private fetchLastParticipantMessage = async (threadId: string, actionType: 'participantAdded' | 'participantRemoved'): Promise<void> => {\n    for await (const message of this.chatClient.getChatThreadClient(threadId).listMessages({\n      startTime: new Date(Date.now() - maxSyncTimeInMs)\n    })) {\n      if (message.type === actionType) {\n        this.chatContext.setChatMessage(threadId, {\n          ...message,\n          status: 'delivered'\n        });\n      }\n    }\n  };\n  private onParticipantsRemoved = (event: ParticipantsRemovedEvent): void => {\n    const participantIds = event.participantsRemoved.map(participant => {\n      return participant.id;\n    });\n    this.chatContext.deleteParticipants(event.threadId, participantIds);\n\n    // If the current user is removed from the thread, do not fetch the last participant message\n    // as they no longer have access to the thread.\n    const currentUserId = toFlatCommunicationIdentifier(this.chatContext.getState().userId);\n    const wasCurrentUserRemoved = participantIds.find(id => toFlatCommunicationIdentifier(id) === currentUserId);\n    if (!wasCurrentUserRemoved) {\n      this.fetchLastParticipantMessage(event.threadId, 'participantRemoved');\n    }\n  };\n  private onReadReceiptReceived = (event: ReadReceiptReceivedEvent): void => {\n    const readReceipt: ChatMessageReadReceipt = {\n      ...event,\n      sender: event.sender,\n      readOn: new Date(event.readOn)\n    };\n    this.chatContext.batch(() => {\n      this.chatContext.createThreadIfNotExist(event.threadId);\n      this.chatContext.addReadReceipt(event.threadId, readReceipt);\n    });\n  };\n  private onTypingIndicatorReceived = (typingIndicator: TypingIndicatorReceivedEvent): void => {\n    this.chatContext.batch(() => {\n      this.chatContext.createThreadIfNotExist(typingIndicator.threadId);\n      this.chatContext.addTypingIndicator(typingIndicator.threadId, typingIndicator);\n    });\n  };\n  private onChatThreadCreated = (event: ChatThreadCreatedEvent): void => {\n    const properties = {\n      topic: event.properties.topic\n    };\n    if (!this.chatContext.createThreadIfNotExist(event.threadId, properties)) {\n      this.chatContext.updateThread(event.threadId, properties);\n    }\n  };\n  private onChatThreadDeleted = (event: ChatThreadDeletedEvent): void => {\n    this.chatContext.deleteThread(event.threadId);\n  };\n  private onChatThreadPropertiesUpdated = (event: ChatThreadPropertiesUpdatedEvent): void => {\n    this.chatContext.updateThread(event.threadId, {\n      topic: event.properties.topic\n    });\n  };\n  public subscribe = (): void => {\n    this.chatClient.on('chatMessageReceived', this.onChatMessageReceived);\n    this.chatClient.on('chatMessageDeleted', this.onChatMessageDeleted);\n    this.chatClient.on('chatMessageEdited', this.onChatMessageEdited);\n    this.chatClient.on('participantsAdded', this.onParticipantsAdded);\n    this.chatClient.on('participantsRemoved', this.onParticipantsRemoved);\n    this.chatClient.on('readReceiptReceived', this.onReadReceiptReceived);\n    this.chatClient.on('typingIndicatorReceived', this.onTypingIndicatorReceived);\n    this.chatClient.on('chatThreadCreated', this.onChatThreadCreated);\n    this.chatClient.on('chatThreadDeleted', this.onChatThreadDeleted);\n    this.chatClient.on('chatThreadPropertiesUpdated', this.onChatThreadPropertiesUpdated);\n  };\n  public unsubscribe = (): void => {\n    this.chatClient.off('chatMessageReceived', this.onChatMessageReceived);\n    this.chatClient.off('chatMessageDeleted', this.onChatMessageDeleted);\n    this.chatClient.off('chatMessageEdited', this.onChatMessageEdited);\n    this.chatClient.off('participantsAdded', this.onParticipantsAdded);\n    this.chatClient.off('participantsRemoved', this.onParticipantsRemoved);\n    this.chatClient.off('readReceiptReceived', this.onReadReceiptReceived);\n    this.chatClient.off('typingIndicatorReceived', this.onTypingIndicatorReceived);\n    this.chatClient.off('chatThreadCreated', this.onChatThreadCreated);\n    this.chatClient.off('chatThreadDeleted', this.onChatThreadDeleted);\n    this.chatClient.off('chatThreadPropertiesUpdated', this.onChatThreadPropertiesUpdated);\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ListPageSettings } from '@azure/communication-chat';\nimport { ChatContext } from '../ChatContext';\nimport { PagedAsyncIterableIterator } from '@azure/core-paging';\nimport { ChatErrorTarget } from '../ChatClientState';\ntype IteratorCreatorFn<T, OptionsType, PageT = T[]> = (options?: OptionsType) => PagedAsyncIterableIterator<T, PageT>;\n\n/**\n * Create a decorated iterator\n * returned iterators.\n *\n * @param iteratorCreator the function to create the original iterator\n * @param context chatContext\n * @param decorateFn the function for the decorating behavior\n */\nexport const createDecoratedIterator = <ItemType, OptionsType>(iteratorCreator: IteratorCreatorFn<ItemType, OptionsType>, context: ChatContext, decorateFn: (item: ItemType, context: ChatContext) => void) => {\n  return (...args: Parameters<IteratorCreatorFn<ItemType, OptionsType>>): PagedAsyncIterableIterator<ItemType> => {\n    const threadsIterator = iteratorCreator(...args);\n    return {\n      async next() {\n        const result = await threadsIterator.next();\n        if (!result.done && result.value) {\n          decorateFn(result.value, context);\n        }\n        return result;\n      },\n      [Symbol.asyncIterator]() {\n        return this;\n      },\n      byPage: (settings: ListPageSettings = {}): AsyncIterableIterator<ItemType[]> => {\n        const pages = threadsIterator.byPage(settings);\n        return {\n          async next() {\n            const result = await pages.next();\n            const page = result.value;\n            if (!result.done && result.value) {\n              context.batch(() => {\n                for (const item of page) {\n                  decorateFn(item, context);\n                }\n              });\n            }\n            return result;\n          },\n          [Symbol.asyncIterator]() {\n            return this;\n          }\n        };\n      }\n    };\n  };\n};\n\n/**\n *\n * @param iteratorCreator Function that creates the base iteartor\n * @param context The ChatContext that stores all internal state.\n * @param target See {@link ChatContext.asyncTeeErrorToState}.\n * @returns A function to create an iterator that handles errors when iterting over the iterator from `iteratorCreator`.\n */\nexport const createErrorHandlingIterator = <ItemType, OptionsType>(iteratorCreator: IteratorCreatorFn<ItemType, OptionsType>, context: ChatContext, target: ChatErrorTarget): IteratorCreatorFn<ItemType, OptionsType> => {\n  return (...args: Parameters<IteratorCreatorFn<ItemType, OptionsType>>): PagedAsyncIterableIterator<ItemType> => {\n    const innerIter = iteratorCreator(...args);\n    return {\n      next: context.withAsyncErrorTeedToState(innerIter.next.bind(innerIter), target),\n      [Symbol.asyncIterator]() {\n        return this;\n      },\n      byPage: (settings: ListPageSettings = {}): AsyncIterableIterator<ItemType[]> => {\n        const pages = innerIter.byPage(settings);\n        return {\n          next: context.withAsyncErrorTeedToState(pages.next.bind(pages), target),\n          [Symbol.asyncIterator]() {\n            return this;\n          }\n        };\n      }\n    };\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatMessage, ChatThreadClient, RestListMessagesOptions } from '@azure/communication-chat';\nimport { ChatContext } from '../ChatContext';\nimport { convertChatMessage } from '../convertChatMessage';\nimport { createDecoratedIterator, createErrorHandlingIterator } from './createDecoratedIterator';\nimport { PagedAsyncIterableIterator } from '@azure/core-paging';\n\n/**\n * @private\n */\nexport const createDecoratedListMessages = (chatThreadClient: ChatThreadClient, context: ChatContext): ((options?: RestListMessagesOptions) => PagedAsyncIterableIterator<ChatMessage>) => {\n  const setMessage = (message: ChatMessage, context: ChatContext): void => {\n    context.setChatMessage(chatThreadClient.threadId, convertChatMessage(message));\n  };\n  return createDecoratedIterator(createErrorHandlingIterator(context.withErrorTeedToState(chatThreadClient.listMessages.bind(chatThreadClient), 'ChatThreadClient.listMessages'), context, 'ChatThreadClient.listMessages'), context, setMessage);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatThreadClient, ChatMessageReadReceipt, RestListReadReceiptsOptions } from '@azure/communication-chat';\nimport { ChatContext } from '../ChatContext';\nimport { createDecoratedIterator, createErrorHandlingIterator } from './createDecoratedIterator';\nimport { PagedAsyncIterableIterator } from '@azure/core-paging';\n\n/**\n * @private\n */\nexport const createDecoratedListReadReceipts = (chatThreadClient: ChatThreadClient, context: ChatContext): ((options?: RestListReadReceiptsOptions | undefined) => PagedAsyncIterableIterator<ChatMessageReadReceipt>) => {\n  const setReadReceipt = (readReceipt: ChatMessageReadReceipt, context: ChatContext): void => {\n    context.addReadReceipt(chatThreadClient.threadId, {\n      ...readReceipt\n    });\n  };\n  return createDecoratedIterator(createErrorHandlingIterator(context.withErrorTeedToState(chatThreadClient.listReadReceipts.bind(chatThreadClient), 'ChatThreadClient.listReadReceipts'), context, 'ChatThreadClient.listReadReceipts'), context, setReadReceipt);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatParticipant, ChatThreadClient, RestListParticipantsOptions } from '@azure/communication-chat';\nimport { ChatContext } from '../ChatContext';\nimport { createDecoratedIterator, createErrorHandlingIterator } from './createDecoratedIterator';\nimport { PagedAsyncIterableIterator } from '@azure/core-paging';\n\n/**\n * @private\n */\nexport const createDecoratedListParticipants = (chatThreadClient: ChatThreadClient, context: ChatContext): ((options?: RestListParticipantsOptions) => PagedAsyncIterableIterator<ChatParticipant>) => {\n  const setParticipant = (participant: ChatParticipant, context: ChatContext): void => {\n    context.setParticipant(chatThreadClient.threadId, participant);\n  };\n  return createDecoratedIterator(createErrorHandlingIterator(context.withErrorTeedToState(chatThreadClient.listParticipants.bind(chatThreadClient), 'ChatThreadClient.listParticipants'), context, 'ChatThreadClient.listParticipants'), context, setParticipant);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatThreadClient, SendChatMessageResult } from '@azure/communication-chat';\nimport { getIdentifierKind } from '@azure/communication-common';\nimport { ChatMessageWithStatus } from './types/ChatMessageWithStatus';\nimport { ChatContext } from './ChatContext';\nimport { nanoid } from 'nanoid';\nimport { createDecoratedListMessages } from './iterators/createDecoratedListMessages';\nimport { createDecoratedListReadReceipts } from './iterators/createDecoratedListReadReceipts';\nimport { createDecoratedListParticipants } from './iterators/createDecoratedListParticipants';\nimport { convertChatMessage } from './convertChatMessage';\nclass ProxyChatThreadClient implements ProxyHandler<ChatThreadClient> {\n  private _context: ChatContext;\n  constructor(context: ChatContext) {\n    this._context = context;\n  }\n  public get<P extends keyof ChatThreadClient>(chatThreadClient: ChatThreadClient, prop: P): any {\n    switch (prop) {\n      case 'listMessages':\n        {\n          return createDecoratedListMessages(chatThreadClient, this._context);\n        }\n      case 'getMessage':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<ChatThreadClient['getMessage']>) => {\n            const message = await chatThreadClient.getMessage(...args);\n            this._context.setChatMessage(chatThreadClient.threadId, convertChatMessage(message));\n            return message;\n          }, 'ChatThreadClient.getMessage');\n        }\n      case 'sendMessage':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<ChatThreadClient['sendMessage']>) => {\n            // Retry logic?\n            const [request, options] = args;\n            const {\n              content\n            } = request;\n            const clientMessageId = nanoid(); // Generate a local short uuid for message\n            const newMessage: ChatMessageWithStatus = {\n              content: {\n                message: content\n              },\n              clientMessageId,\n              id: '',\n              type: options?.type ?? 'text',\n              sequenceId: '',\n              version: '',\n              createdOn: new Date(),\n              status: 'sending',\n              senderDisplayName: this._context.getState().displayName,\n              sender: this._context.getState().userId,\n              metadata: options?.metadata\n            };\n            this._context.setChatMessage(chatThreadClient.threadId, newMessage);\n            let result: SendChatMessageResult | undefined = undefined;\n            try {\n              result = await chatThreadClient.sendMessage(...args);\n            } catch (e) {\n              this._context.setChatMessage(chatThreadClient.threadId, {\n                ...newMessage,\n                status: 'failed'\n              });\n              throw e;\n            }\n            if (result?.id) {\n              this._context.batch(() => {\n                if (!result) {\n                  return;\n                }\n                this._context.setChatMessage(chatThreadClient.threadId, {\n                  ...newMessage,\n                  clientMessageId: undefined,\n                  status: 'delivered',\n                  id: result.id\n                });\n                this._context.deleteLocalMessage(chatThreadClient.threadId, clientMessageId);\n              });\n            }\n            return result;\n          }, 'ChatThreadClient.sendMessage');\n        }\n      case 'addParticipants':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<ChatThreadClient['addParticipants']>) => {\n            const result = await chatThreadClient.addParticipants(...args);\n            const [addRequest] = args;\n            const participantsToAdd = addRequest.participants;\n            this._context.setParticipants(chatThreadClient.threadId, participantsToAdd);\n            return result;\n          }, 'ChatThreadClient.addParticipants');\n        }\n      case 'deleteMessage':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<ChatThreadClient['deleteMessage']>) => {\n            // DeleteMessage is able to either delete local one(for failed message) or synced message\n            const [messageId] = args;\n            if (this._context.deleteLocalMessage(chatThreadClient.threadId, messageId)) {\n              return {};\n            }\n            const result = await chatThreadClient.deleteMessage(...args);\n            this._context.deleteMessage(chatThreadClient.threadId, messageId);\n            return result;\n          }, 'ChatThreadClient.deleteMessage');\n        }\n      case 'listParticipants':\n        {\n          return createDecoratedListParticipants(chatThreadClient, this._context);\n        }\n      case 'listReadReceipts':\n        {\n          return createDecoratedListReadReceipts(chatThreadClient, this._context);\n        }\n      case 'sendTypingNotification':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<ChatThreadClient['sendTypingNotification']>) => {\n            return await chatThreadClient.sendTypingNotification(...args);\n          }, 'ChatThreadClient.sendTypingNotification');\n        }\n      case 'removeParticipant':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<ChatThreadClient['removeParticipant']>) => {\n            const result = await chatThreadClient.removeParticipant(...args);\n            const [removeIdentifier] = args;\n            this._context.deleteParticipant(chatThreadClient.threadId, getIdentifierKind(removeIdentifier));\n            return result;\n          }, 'ChatThreadClient.removeParticipant');\n        }\n      case 'updateMessage':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<ChatThreadClient['updateMessage']>) => {\n            const result = await chatThreadClient.updateMessage(...args);\n            const [messageId, updateOption] = args;\n            this._context.updateChatMessageContent(chatThreadClient.threadId, messageId, updateOption?.content);\n            return result;\n          }, 'ChatThreadClient.updateMessage');\n        }\n      case 'updateTopic':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<ChatThreadClient['updateTopic']>) => {\n            const result = await chatThreadClient.updateTopic(...args);\n            const [topic] = args;\n            this._context.updateThreadTopic(chatThreadClient.threadId, topic);\n            return result;\n          }, 'ChatThreadClient.updateTopic');\n        }\n      case 'getProperties':\n        {\n          return this._context.withAsyncErrorTeedToState(async (...args: Parameters<ChatThreadClient['getProperties']>) => {\n            const result = await chatThreadClient.getProperties(...args);\n            this._context.updateThread(chatThreadClient.threadId, result);\n            return result;\n          }, 'ChatThreadClient.getProperties');\n        }\n      default:\n        return Reflect.get(chatThreadClient, prop);\n    }\n  }\n}\n\n/**\n * @private\n */\nexport const chatThreadClientDeclaratify = (chatThreadClient: ChatThreadClient, context: ChatContext): ChatThreadClient => {\n  context.createThreadIfNotExist(chatThreadClient.threadId);\n  return (new Proxy(chatThreadClient, new ProxyChatThreadClient(context)) as ChatThreadClient);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatThreadItem, ChatClient, RestListChatThreadsOptions } from '@azure/communication-chat';\nimport { ChatContext } from '../ChatContext';\nimport { createDecoratedIterator, createErrorHandlingIterator } from './createDecoratedIterator';\nimport { PagedAsyncIterableIterator } from '@azure/core-paging';\n\n/**\n * @private\n */\nexport const createDecoratedListThreads = (chatClient: ChatClient, context: ChatContext): ((options?: RestListChatThreadsOptions) => PagedAsyncIterableIterator<ChatThreadItem>) => {\n  const setThreadProperties = (chatThreadItem: ChatThreadItem, context: ChatContext): void => {\n    const properties = {\n      topic: chatThreadItem.topic\n    };\n    if (!context.createThreadIfNotExist(chatThreadItem.id, properties)) {\n      context.updateThread(chatThreadItem.id, properties);\n    }\n  };\n  return createDecoratedIterator(createErrorHandlingIterator(context.withErrorTeedToState(chatClient.listChatThreads.bind(chatClient), 'ChatClient.listChatThreads'), context, 'ChatClient.listChatThreads'), context, setThreadProperties);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ChatClient, ChatClientOptions } from '@azure/communication-chat';\nimport { _getApplicationId, _TelemetryImplementationHint } from '@internal/acs-ui-common';\nimport { ChatContext } from './ChatContext';\nimport { ChatClientState } from './ChatClientState';\nimport { EventSubscriber } from './EventSubscriber';\nimport { chatThreadClientDeclaratify } from './StatefulChatThreadClient';\nimport { createDecoratedListThreads } from './iterators/createDecoratedListThreads';\nimport { CommunicationTokenCredential, CommunicationUserIdentifier, getIdentifierKind } from '@azure/communication-common';\nimport { chatStatefulLogger } from './Logger';\n\n/**\n * Defines the methods that allow {@Link @azure/communication-chat#ChatClient} to be used with a centralized generated state.\n *\n * The interface provides access to proxied state and also allows registering a handler for state change events.\n *\n * @public\n */\nexport interface StatefulChatClient extends ChatClient {\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  /**\n   * Cleans up the resource cache from the chat thread client.\n   */\n  dispose(): void;\n  /**\n   * Holds all the state that we could proxy from ChatClient {@Link @azure/communication-chat#ChatClient} as\n   * ChatClientState {@Link ChatClientState}.\n   */\n  getState(): ChatClientState;\n  /**\n   * Allows a handler to be registered for 'stateChanged' events.\n   *\n   * @param handler - Callback to receive the state.\n   */\n  onStateChange(handler: (state: ChatClientState) => void): void;\n  /**\n   * Allows unregistering for 'stateChanged' events.\n   *\n   * @param handler - Original callback to be unsubscribed.\n   */\n  offStateChange(handler: (state: ChatClientState) => void): void;\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  /**\n   * Downloads a resource for specific message and caches it.\n   *\n   * @param threadId - The thread id of the chat thread.\n   * @param messageId - The message id of the chat message.\n   * @param resourceUrl - The resource url to fetch and cache.\n   */\n  downloadResourceToCache(threadId: string, messageId: string, resourceUrl: string): void;\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  /**\n   * Removes a resource from cache for a specific message.\n   *\n   * @param threadId - The thread id of the chat thread.\n   * @param messageId - The message id of the chat message.\n   * @param resourceUrl - The resource url to remove from cache.\n   */\n  removeResourceFromCache(threadId: string, messageId: string, resourceUrl: string): void;\n}\ninterface StatefulChatClientWithPrivateProps extends StatefulChatClient {\n  context: ChatContext;\n  eventSubscriber: EventSubscriber | undefined;\n}\nconst proxyChatClient: ProxyHandler<ChatClient> = {\n  get: function <P extends keyof StatefulChatClientWithPrivateProps>(chatClient: ChatClient, prop: P, receiver: StatefulChatClientWithPrivateProps) {\n    // skip receiver.context call to avoid recursive bugs\n    if (prop === 'context') {\n      return Reflect.get(chatClient, prop);\n    }\n    const context = receiver.context;\n    switch (prop) {\n      case 'createChatThread':\n        {\n          return context.withAsyncErrorTeedToState(async function (...args: Parameters<ChatClient['createChatThread']>) {\n            const result = await chatClient.createChatThread(...args);\n            const thread = result.chatThread;\n            if (thread) {\n              const [request] = args;\n              context.createThread(thread.id, {\n                topic: request.topic\n              });\n            }\n            return result;\n          }, 'ChatClient.createChatThread');\n        }\n      case 'deleteChatThread':\n        {\n          return context.withAsyncErrorTeedToState(async function (...args: Parameters<ChatClient['deleteChatThread']>) {\n            const result = await chatClient.deleteChatThread(...args);\n            context.deleteThread(args[0]);\n            return result;\n          }, 'ChatClient.deleteChatThread');\n        }\n      case 'listChatThreads':\n        {\n          return createDecoratedListThreads(chatClient, context);\n        }\n      case 'getChatThreadClient':\n        {\n          return function (...args: Parameters<ChatClient['getChatThreadClient']>) {\n            const chatThreadClient = chatClient.getChatThreadClient(...args);\n            // TODO(prprabhu): Ensure that thread properties are fetched into the ChatContext at this point.\n            // A new thread might be created here, but the properties will never be fetched.\n            return chatThreadClientDeclaratify(chatThreadClient, context);\n          };\n        }\n      case 'startRealtimeNotifications':\n        {\n          return context.withAsyncErrorTeedToState(async function (...args: Parameters<ChatClient['startRealtimeNotifications']>) {\n            const ret = await chatClient.startRealtimeNotifications(...args);\n            if (!receiver.eventSubscriber) {\n              receiver.eventSubscriber = new EventSubscriber(chatClient, context);\n            }\n            return ret;\n          }, 'ChatClient.startRealtimeNotifications');\n        }\n      case 'stopRealtimeNotifications':\n        {\n          return context.withAsyncErrorTeedToState(async function (...args: Parameters<ChatClient['stopRealtimeNotifications']>) {\n            const ret = await chatClient.stopRealtimeNotifications(...args);\n            if (receiver.eventSubscriber) {\n              receiver.eventSubscriber.unsubscribe();\n              receiver.eventSubscriber = undefined;\n            }\n            return ret;\n          }, 'ChatClient.stopRealtimeNotifications');\n        }\n      default:\n        return Reflect.get(chatClient, prop);\n    }\n  }\n};\n\n/**\n * Arguments to construct the {@link StatefulChatClient}.\n *\n * @public\n */\nexport type StatefulChatClientArgs = {\n  userId: CommunicationUserIdentifier;\n  displayName: string;\n  endpoint: string;\n  credential: CommunicationTokenCredential;\n};\n\n/**\n * Options to construct the {@link StatefulChatClient}.\n *\n * @public\n */\nexport type StatefulChatClientOptions = {\n  /**\n   * Options to construct the {@link @azure/communication-chat#ChatClient} with.\n   */\n  chatClientOptions: ChatClientOptions;\n  /**\n   * Sets the max listeners limit of the 'stateChange' event. Defaults to the node.js EventEmitter.defaultMaxListeners\n   * if not specified.\n   */\n  maxStateChangeListeners?: number;\n};\n\n/**\n * Creates a stateful ChatClient {@link StatefulChatClient} by proxying ChatClient\n * {@link @azure/communication-chat#ChatClient} with ProxyChatClient {@link ProxyChatClient} which then allows access\n * to state in a declarative way.\n *\n * @public\n */\nexport const createStatefulChatClient = (args: StatefulChatClientArgs, options?: StatefulChatClientOptions): StatefulChatClient => {\n  return _createStatefulChatClientInner(args, options);\n};\n\n/**\n * This inner function is used to allow injection of TelemetryImplementationHint without changing the public API.\n *\n * @internal\n */\nexport const _createStatefulChatClientInner = (args: StatefulChatClientArgs, options?: StatefulChatClientOptions, telemetryImplementationHint: _TelemetryImplementationHint = 'StatefulComponents'): StatefulChatClient => {\n  chatStatefulLogger.info(`Creating chat stateful client using library version: ${_getApplicationId(telemetryImplementationHint)}`);\n  const tweakedOptions = {\n    ...options,\n    chatClientOptions: {\n      ...options?.chatClientOptions,\n      userAgentOptions: {\n        userAgentPrefix: _getApplicationId(telemetryImplementationHint)\n      }\n    }\n  };\n  return _createStatefulChatClientWithDeps(new ChatClient(args.endpoint, args.credential, tweakedOptions.chatClientOptions), args, tweakedOptions);\n};\n\n/**\n * A function to modify the state of the StatefulChatClient.\n *\n * Provided as a callback to the {@link StatefulChatClient.modifyState} method.\n *\n * The function must modify the provided state in place as much as possible.\n * Making large modifications can lead to bad performance by causing spurious rerendering of the UI.\n *\n * Consider using commonly used modifier functions exported from this package.\n */\nexport type ChatStateModifier = (state: ChatClientState) => void;\n\n/**\n * Internal implementation of {@link createStatefulChatClient} for dependency injection.\n *\n * Used by tests. Should not be exported out of this package.\n * @internal\n */\nexport const _createStatefulChatClientWithDeps = (chatClient: ChatClient, args: StatefulChatClientArgs, options?: StatefulChatClientOptions): StatefulChatClient => {\n  const context = new ChatContext(options?.maxStateChangeListeners, /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */args.credential, /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */args.endpoint);\n  let eventSubscriber: EventSubscriber;\n  context.updateChatConfig(getIdentifierKind(args.userId), args.displayName);\n  const proxy = new Proxy(chatClient, proxyChatClient);\n  Object.defineProperty(proxy, 'context', {\n    configurable: false,\n    get: () => context\n  });\n  Object.defineProperty(proxy, 'eventSubscriber', {\n    configurable: false,\n    get: () => eventSubscriber,\n    set: (val: EventSubscriber) => {\n      eventSubscriber = val;\n    }\n  });\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  Object.defineProperty(proxy, 'dispose', {\n    configurable: false,\n    value: () => context?.dispose()\n  });\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  Object.defineProperty(proxy, 'downloadResourceToCache', {\n    configurable: false,\n    value: (threadId: string, messageId: string, resourceUrl: string) => context?.downloadResourceToCache(threadId, messageId, resourceUrl)\n  });\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  Object.defineProperty(proxy, 'removeResourceFromCache', {\n    configurable: false,\n    value: (threadId: string, messageId: string, resourceUrl: string) => context?.removeResourceFromCache(threadId, messageId, resourceUrl)\n  });\n  Object.defineProperty(proxy, 'getState', {\n    configurable: false,\n    value: () => context?.getState()\n  });\n  Object.defineProperty(proxy, 'onStateChange', {\n    configurable: false,\n    value: (handler: (state: ChatClientState) => void) => context?.onStateChange(handler)\n  });\n  Object.defineProperty(proxy, 'offStateChange', {\n    configurable: false,\n    value: (handler: (state: ChatClientState) => void) => context?.offStateChange(handler)\n  });\n  return (proxy as StatefulChatClient);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _createStatefulChatClientInner, ChatClientState, ChatError, StatefulChatClient } from '@internal/chat-stateful-client';\nimport { ChatHandlers, createDefaultChatHandlers } from '@internal/chat-component-bindings';\nimport { ChatMessage, ChatMessageType, ChatThreadClient, SendMessageOptions } from '@azure/communication-chat';\nimport { CommunicationTokenCredential, CommunicationUserIdentifier } from '@azure/communication-common';\nimport type { ChatMessageDeletedEvent, ChatMessageEditedEvent, ChatMessageReceivedEvent, ChatThreadPropertiesUpdatedEvent, ParticipantsAddedEvent, ParticipantsRemovedEvent, ReadReceiptReceivedEvent } from '@azure/communication-chat';\nimport { toFlatCommunicationIdentifier, _TelemetryImplementationHint } from '@internal/acs-ui-common';\nimport EventEmitter from 'events';\nimport { ChatAdapter, ChatAdapterState, MessageDeletedListener, MessageEditedListener, MessageReadListener, MessageReceivedListener, ParticipantsAddedListener, ParticipantsRemovedListener, TopicChangedListener } from './ChatAdapter';\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nimport { ResourceDetails } from './ChatAdapter';\nimport { AdapterError } from '../../common/adapters';\nimport { useEffect, useRef, useState } from 'react';\nimport { _isValidIdentifier } from '@internal/acs-ui-common';\n/**\n * Context of Chat, which is a centralized context for all state updates\n * @private\n */\nexport class ChatContext {\n  private emitter: EventEmitter = new EventEmitter();\n  private state: ChatAdapterState;\n  private threadId: string;\n  constructor(clientState: ChatClientState, threadId: string) {\n    const thread = clientState.threads[threadId];\n    this.threadId = threadId;\n    if (!thread) {\n      throw 'Cannot find threadId, please initialize thread before use!';\n    }\n    this.state = {\n      userId: clientState.userId,\n      displayName: clientState.displayName,\n      thread,\n      latestErrors: clientState.latestErrors\n    };\n  }\n  public onStateChange(handler: (_uiState: ChatAdapterState) => void): void {\n    this.emitter.on('stateChanged', handler);\n  }\n  public offStateChange(handler: (_uiState: ChatAdapterState) => void): void {\n    this.emitter.off('stateChanged', handler);\n  }\n  public setState(state: ChatAdapterState): void {\n    this.state = state;\n    this.emitter.emit('stateChanged', this.state);\n  }\n  public getState(): ChatAdapterState {\n    return this.state;\n  }\n  public setError(error: Error): void {\n    this.setState({\n      ...this.state,\n      error\n    });\n  }\n  public updateClientState(clientState: ChatClientState): void {\n    const thread = clientState.threads[this.threadId];\n    if (!thread) {\n      throw 'Cannot find threadId, please make sure thread state is still in Stateful ChatClient.';\n    }\n    let updatedState: ChatAdapterState = {\n      userId: clientState.userId,\n      displayName: clientState.displayName,\n      thread,\n      latestErrors: clientState.latestErrors\n    };\n    this.setState(updatedState);\n  }\n}\n\n/**\n * @private\n */\nexport class AzureCommunicationChatAdapter implements ChatAdapter {\n  private chatClient: StatefulChatClient;\n  private chatThreadClient: ChatThreadClient;\n  private context: ChatContext;\n  private handlers: ChatHandlers;\n  private emitter: EventEmitter = new EventEmitter();\n  constructor(chatClient: StatefulChatClient, chatThreadClient: ChatThreadClient) {\n    this.bindAllPublicMethods();\n    this.chatClient = chatClient;\n    this.chatThreadClient = chatThreadClient;\n    this.context = new ChatContext(chatClient.getState(), chatThreadClient.threadId);\n    const onStateChange = (clientState: ChatClientState): void => {\n      // unsubscribe when the instance gets disposed\n      if (!this) {\n        chatClient.offStateChange(onStateChange);\n        return;\n      }\n      this.context.updateClientState(clientState);\n    };\n    this.handlers = createDefaultChatHandlers(chatClient, chatThreadClient);\n    this.chatClient.onStateChange(onStateChange);\n    this.subscribeAllEvents();\n  }\n  private bindAllPublicMethods(): void {\n    this.onStateChange = this.onStateChange.bind(this);\n    this.offStateChange = this.offStateChange.bind(this);\n    this.getState = this.getState.bind(this);\n    this.dispose = this.dispose.bind(this);\n    this.fetchInitialData = this.fetchInitialData.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n    this.sendReadReceipt = this.sendReadReceipt.bind(this);\n    this.sendTypingIndicator = this.sendTypingIndicator.bind(this);\n    this.updateMessage = this.updateMessage.bind(this);\n    this.deleteMessage = this.deleteMessage.bind(this);\n    this.removeParticipant = this.removeParticipant.bind(this);\n    this.setTopic = this.setTopic.bind(this);\n    this.loadPreviousChatMessages = this.loadPreviousChatMessages.bind(this);\n    this.on = this.on.bind(this);\n    this.off = this.off.bind(this);\n    /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n    this.downloadResourceToCache = this.downloadResourceToCache.bind(this);\n    /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n    this.removeResourceFromCache = this.removeResourceFromCache.bind(this);\n  }\n  dispose(): void {\n    this.unsubscribeAllEvents();\n    /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n    this.chatClient.dispose();\n  }\n  async fetchInitialData(): Promise<void> {\n    // If get properties fails we dont want to try to get the participants after.\n    await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.chatThreadClient.getProperties();\n      // Fetch all participants who joined before the local user.\n      for await (const _page of this.chatThreadClient.listParticipants().byPage({\n        // Fetch 100 participants per page by default.\n        maxPageSize: 100\n        // eslint-disable-next-line curly\n      }));\n    });\n  }\n  getState(): ChatAdapterState {\n    return this.context.getState();\n  }\n  onStateChange(handler: (state: ChatAdapterState) => void): void {\n    this.context.onStateChange(handler);\n  }\n  offStateChange(handler: (state: ChatAdapterState) => void): void {\n    this.context.offStateChange(handler);\n  }\n  async sendMessage(content: string, options: SendMessageOptions = {}): Promise<void> {\n    await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.onSendMessage(content, options);\n    });\n  }\n  async sendReadReceipt(chatMessageId: string): Promise<void> {\n    await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.onMessageSeen(chatMessageId);\n    });\n  }\n  async sendTypingIndicator(): Promise<void> {\n    await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.onTyping();\n    });\n  }\n  async removeParticipant(userId: string): Promise<void> {\n    await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.onRemoveParticipant(userId);\n    });\n  }\n  async setTopic(topicName: string): Promise<void> {\n    await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.updateThreadTopicName(topicName);\n    });\n  }\n  async loadPreviousChatMessages(messagesToLoad: number): Promise<boolean> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      return await this.handlers.onLoadPreviousChatMessages(messagesToLoad);\n    });\n  }\n  async updateMessage(messageId: string, content: string, metadata?: Record<string, string>, options?: {}): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      return await this.handlers.onUpdateMessage(messageId, content);\n    });\n  }\n  async deleteMessage(messageId: string): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      return await this.handlers.onDeleteMessage(messageId);\n    });\n  }\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  async downloadResourceToCache(resourceDetails: ResourceDetails): Promise<void> {\n    this.chatClient.downloadResourceToCache(resourceDetails.threadId, resourceDetails.messageId, resourceDetails.resourceUrl);\n  }\n\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  removeResourceFromCache(resourceDetails: ResourceDetails): void {\n    this.chatClient.removeResourceFromCache(resourceDetails.threadId, resourceDetails.messageId, resourceDetails.resourceUrl);\n  }\n  private messageReceivedListener(event: ChatMessageReceivedEvent): void {\n    const isCurrentChatAdapterThread = event.threadId === this.chatThreadClient.threadId;\n    if (!isCurrentChatAdapterThread) {\n      return;\n    }\n    const message = convertEventToChatMessage(event);\n    this.emitter.emit('messageReceived', {\n      message\n    });\n    const currentUserId = toFlatCommunicationIdentifier(this.chatClient.getState().userId);\n    if (message?.sender && toFlatCommunicationIdentifier(message.sender) === currentUserId) {\n      this.emitter.emit('messageSent', {\n        message\n      });\n    }\n  }\n  private messageEditedListener(event: ChatMessageEditedEvent): void {\n    const isCurrentChatAdapterThread = event.threadId === this.chatThreadClient.threadId;\n    if (!isCurrentChatAdapterThread) {\n      return;\n    }\n    const message = convertEventToChatMessage(event);\n    this.emitter.emit('messageEdited', {\n      message\n    });\n  }\n  private messageDeletedListener(event: ChatMessageDeletedEvent): void {\n    const isCurrentChatAdapterThread = event.threadId === this.chatThreadClient.threadId;\n    if (!isCurrentChatAdapterThread) {\n      return;\n    }\n    const message = convertEventToChatMessage(event);\n    this.emitter.emit('messageDeleted', {\n      message\n    });\n  }\n  private messageReadListener({\n    chatMessageId,\n    recipient\n  }: ReadReceiptReceivedEvent): void {\n    const message = this.getState().thread.chatMessages[chatMessageId];\n    if (message) {\n      this.emitter.emit('messageRead', {\n        message,\n        readBy: recipient\n      });\n    }\n  }\n  private participantsAddedListener({\n    addedBy,\n    participantsAdded\n  }: ParticipantsAddedEvent): void {\n    this.emitter.emit('participantsAdded', {\n      addedBy,\n      participantsAdded\n    });\n  }\n  private participantsRemovedListener({\n    removedBy,\n    participantsRemoved\n  }: ParticipantsRemovedEvent): void {\n    this.emitter.emit('participantsRemoved', {\n      removedBy,\n      participantsRemoved\n    });\n  }\n  private chatThreadPropertiesUpdatedListener(event: ChatThreadPropertiesUpdatedEvent): void {\n    this.emitter.emit('topicChanged', {\n      topic: event.properties.topic\n    });\n  }\n  private subscribeAllEvents(): void {\n    this.chatClient.on('chatThreadPropertiesUpdated', this.chatThreadPropertiesUpdatedListener.bind(this));\n    this.chatClient.on('participantsAdded', this.participantsAddedListener.bind(this));\n    this.chatClient.on('participantsRemoved', this.participantsRemovedListener.bind(this));\n    this.chatClient.on('chatMessageReceived', this.messageReceivedListener.bind(this));\n    this.chatClient.on('chatMessageEdited', this.messageEditedListener.bind(this));\n    this.chatClient.on('chatMessageDeleted', this.messageDeletedListener.bind(this));\n    this.chatClient.on('readReceiptReceived', this.messageReadListener.bind(this));\n    this.chatClient.on('participantsRemoved', this.participantsRemovedListener.bind(this));\n  }\n  private unsubscribeAllEvents(): void {\n    this.chatClient.off('chatThreadPropertiesUpdated', this.chatThreadPropertiesUpdatedListener.bind(this));\n    this.chatClient.off('participantsAdded', this.participantsAddedListener.bind(this));\n    this.chatClient.off('participantsRemoved', this.participantsRemovedListener.bind(this));\n    this.chatClient.off('chatMessageReceived', this.messageReceivedListener.bind(this));\n    this.chatClient.off('chatMessageEdited', this.messageEditedListener.bind(this));\n    this.chatClient.off('chatMessageDeleted', this.messageDeletedListener.bind(this));\n    this.chatClient.off('readReceiptReceived', this.messageReadListener.bind(this));\n    this.chatClient.off('participantsRemoved', this.participantsRemovedListener.bind(this));\n  }\n  on(event: 'messageReceived', listener: MessageReceivedListener): void;\n  on(event: 'messageEdited', listener: MessageEditedListener): void;\n  on(event: 'messageDeleted', listener: MessageDeletedListener): void;\n  on(event: 'messageSent', listener: MessageReceivedListener): void;\n  on(event: 'messageRead', listener: MessageReadListener): void;\n  on(event: 'participantsAdded', listener: ParticipantsAddedListener): void;\n  on(event: 'participantsRemoved', listener: ParticipantsRemovedListener): void;\n  on(event: 'topicChanged', listener: TopicChangedListener): void;\n  on(event: 'error', listener: (e: AdapterError) => void): void;\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  on(event: string, listener: (e: any) => void): void {\n    this.emitter.on(event, listener);\n  }\n  off(event: 'messageReceived', listener: MessageReceivedListener): void;\n  off(event: 'messageEdited', listener: MessageEditedListener): void;\n  off(event: 'messageDeleted', listener: MessageDeletedListener): void;\n  off(event: 'messageSent', listener: MessageReceivedListener): void;\n  off(event: 'messageRead', listener: MessageReadListener): void;\n  off(event: 'participantsAdded', listener: ParticipantsAddedListener): void;\n  off(event: 'participantsRemoved', listener: ParticipantsRemovedListener): void;\n  off(event: 'topicChanged', listener: TopicChangedListener): void;\n  off(event: 'error', listener: (e: AdapterError) => void): void;\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  off(event: string, listener: (e: any) => void): void {\n    this.emitter.off(event, listener);\n  }\n  private async asyncTeeErrorToEventEmitter<T>(f: () => Promise<T>): Promise<T> {\n    try {\n      return await f();\n    } catch (error) {\n      if (isChatError((error as Error))) {\n        this.emitter.emit('error', (error as AdapterError));\n      }\n      throw error;\n    }\n  }\n}\nconst convertEventToChatMessage = (event: ChatMessageReceivedEvent | ChatMessageEditedEvent | ChatMessageDeletedEvent): ChatMessage => {\n  return {\n    id: event.id,\n    version: event.version,\n    content: isChatMessageDeletedEvent(event) ? undefined : {\n      message: event.message\n    },\n    type: convertEventType(event.type),\n    sender: event.sender,\n    senderDisplayName: event.senderDisplayName,\n    sequenceId: '',\n    createdOn: new Date(event.createdOn),\n    editedOn: isChatMessageEditedEvent(event) ? event.editedOn : undefined,\n    deletedOn: isChatMessageDeletedEvent(event) ? event.deletedOn : undefined\n  };\n};\nconst isChatMessageEditedEvent = (event: ChatMessageReceivedEvent | ChatMessageEditedEvent | ChatMessageDeletedEvent): event is ChatMessageEditedEvent => {\n  return 'editedOn' in event;\n};\nconst isChatMessageDeletedEvent = (event: ChatMessageReceivedEvent | ChatMessageEditedEvent | ChatMessageDeletedEvent): event is ChatMessageDeletedEvent => {\n  return 'deletedOn' in event;\n};\n\n// only text/html message type will be received from event\nconst convertEventType = (type: string): ChatMessageType => {\n  const lowerCaseType = type.toLowerCase();\n  if (lowerCaseType === 'richtext/html' || lowerCaseType === 'html') {\n    return 'html';\n  } else {\n    return 'text';\n  }\n};\n\n/**\n * Arguments for creating the Azure Communication Services implementation of {@link ChatAdapter}.\n *\n * @public\n */\nexport type AzureCommunicationChatAdapterArgs = {\n  endpoint: string;\n  userId: CommunicationUserIdentifier;\n  displayName: string;\n  credential: CommunicationTokenCredential;\n  threadId: string;\n};\n\n/**\n * Create a {@link ChatAdapter} backed by Azure Communication Services.\n *\n * This is the default implementation of {@link ChatAdapter} provided by this library.\n *\n * @public\n */\nexport const createAzureCommunicationChatAdapter = async ({\n  endpoint: endpointUrl,\n  userId,\n  displayName,\n  credential,\n  threadId\n}: AzureCommunicationChatAdapterArgs): Promise<ChatAdapter> => {\n  return _createAzureCommunicationChatAdapterInner(endpointUrl, userId, displayName, credential, threadId);\n};\n\n/**\n * This inner function is used to allow injection of TelemetryImplementationHint without changing the public API.\n *\n * @internal\n */\nexport const _createAzureCommunicationChatAdapterInner = async (endpoint: string, userId: CommunicationUserIdentifier, displayName: string, credential: CommunicationTokenCredential, threadId: string, telemetryImplementationHint: _TelemetryImplementationHint = 'Chat'): Promise<ChatAdapter> => {\n  if (!_isValidIdentifier(userId)) {\n    throw new Error('Provided userId is invalid. Please provide valid identifier object.');\n  }\n  const chatClient = _createStatefulChatClientInner({\n    userId,\n    displayName,\n    endpoint,\n    credential\n  }, undefined, telemetryImplementationHint);\n  const chatThreadClient = await chatClient.getChatThreadClient(threadId);\n  await chatClient.startRealtimeNotifications();\n  const adapter = await createAzureCommunicationChatAdapterFromClient(chatClient, chatThreadClient);\n  return adapter;\n};\n\n/**\n * A custom React hook to simplify the creation of {@link ChatAdapter}.\n *\n * Similar to {@link createAzureCommunicationChatAdapter}, but takes care of asynchronous\n * creation of the adapter internally.\n *\n * Allows arguments to be undefined so that you can respect the rule-of-hooks and pass in arguments\n * as they are created. The adapter is only created when all arguments are defined.\n *\n * Note that you must memoize the arguments to avoid recreating adapter on each render.\n * See storybook for typical usage examples.\n *\n * @public\n */\nexport const useAzureCommunicationChatAdapter = (args: Partial<AzureCommunicationChatAdapterArgs>, afterCreate?: (adapter: ChatAdapter) => Promise<ChatAdapter>, beforeDispose?: (adapter: ChatAdapter) => Promise<void>): ChatAdapter | undefined => {\n  const {\n    credential,\n    displayName,\n    endpoint,\n    threadId,\n    userId\n  } = args;\n\n  // State update needed to rerender the parent component when a new adapter is created.\n  const [adapter, setAdapter] = useState<ChatAdapter | undefined>(undefined);\n  // Ref needed for cleanup to access the old adapter created asynchronously.\n  const adapterRef = useRef<ChatAdapter | undefined>(undefined);\n  const afterCreateRef = useRef<((adapter: ChatAdapter) => Promise<ChatAdapter>) | undefined>(undefined);\n  const beforeDisposeRef = useRef<((adapter: ChatAdapter) => Promise<void>) | undefined>(undefined);\n  // These refs are updated on *each* render, so that the latest values\n  // are used in the `useEffect` closures below.\n  // Using a Ref ensures that new values for the callbacks do not trigger the\n  // useEffect blocks, and a new adapter creation / distruction is not triggered.\n  afterCreateRef.current = afterCreate;\n  beforeDisposeRef.current = beforeDispose;\n  useEffect(() => {\n    if (!credential || !displayName || !endpoint || !threadId || !userId) {\n      return;\n    }\n    (async () => {\n      if (adapterRef.current) {\n        // Dispose the old adapter when a new one is created.\n        //\n        // This clean up function uses `adapterRef` because `adapter` can not be added to the dependency array of\n        // this `useEffect` -- we do not want to trigger a new adapter creation because of the first adapter\n        // creation.\n        if (beforeDisposeRef.current) {\n          await beforeDisposeRef.current(adapterRef.current);\n        }\n        adapterRef.current.dispose();\n        adapterRef.current = undefined;\n      }\n      let newAdapter = await createAzureCommunicationChatAdapter({\n        credential,\n        displayName,\n        endpoint,\n        threadId,\n        userId\n      });\n      if (afterCreateRef.current) {\n        newAdapter = await afterCreateRef.current(newAdapter);\n      }\n      adapterRef.current = newAdapter;\n      setAdapter(newAdapter);\n    })();\n  },\n  // Explicitly list all arguments so that caller doesn't have to memoize the `args` object.\n  [adapterRef, afterCreateRef, beforeDisposeRef, credential, displayName, endpoint, threadId, userId]);\n\n  // Dispose any existing adapter when the component unmounts.\n  useEffect(() => {\n    return () => {\n      (async () => {\n        if (adapterRef.current) {\n          if (beforeDisposeRef.current) {\n            await beforeDisposeRef.current(adapterRef.current);\n          }\n          adapterRef.current.dispose();\n          adapterRef.current = undefined;\n        }\n      })();\n    };\n  }, []);\n  return adapter;\n};\n\n/**\n * Create a {@link ChatAdapter} using the provided {@link StatefulChatClient}.\n *\n * Useful if you want to keep a reference to {@link StatefulChatClient}.\n * Consider using {@link createAzureCommunicationChatAdapter} for a simpler API.\n *\n * @public\n */\nexport async function createAzureCommunicationChatAdapterFromClient(chatClient: StatefulChatClient, chatThreadClient: ChatThreadClient): Promise<ChatAdapter> {\n  return new AzureCommunicationChatAdapter(chatClient, chatThreadClient);\n}\nconst isChatError = (e: Error): e is ChatError => {\n  return 'target' in e && e['target'] !== undefined && 'innerError' in e && e['innerError'] !== undefined;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_EN_US } from '@internal/react-components';\nimport { CompositeLocale } from '../LocalizationProvider';\nimport en_US from './en-US/strings.json';\n\n/**\r\n * Locale for English (US)\r\n *\r\n * @public\r\n */\nexport const COMPOSITE_LOCALE_EN_US: CompositeLocale = {\n  component: COMPONENT_LOCALE_EN_US,\n  strings: en_US\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { createContext, useContext } from 'react';\nimport { ComponentLocale, LocalizationProvider as ComponentLocalizationProvider } from '@internal/react-components';\nimport { COMPOSITE_LOCALE_EN_US } from './locales';\nimport { CallCompositeStrings } from '../CallComposite';\nimport { CallWithChatCompositeStrings } from '../CallWithChatComposite';\nimport { ChatCompositeStrings } from '../ChatComposite';\n\n/**\n * Locale information for all composites exported from this library.\n *\n * @public\n */\nexport interface CompositeLocale {\n  /** Strings used in composites directly\n   *\n   * Contrast with {@link CompositeLocale.component}, which contains strings used via the component library.\n   */\n  strings: CompositeStrings;\n\n  /** Locale information for the pure Components used by Composites. See {@link communication-react#ComponentLocale}. */\n  component: ComponentLocale;\n}\n\n/**\n * Strings used in the composites directly.\n *\n * These strings are used by the composites directly, instead of by the contained components.\n *\n * @public\n */\nexport interface CompositeStrings {\n  /**\n   * Strings used by {@link CallComposite}.\n   */\n  call: CallCompositeStrings;\n  /**\n   * Strings used by {@link ChatComposite}.\n   */\n  chat: ChatCompositeStrings;\n\n  /**\n   * Strings used by {@link CallWithChatComposite}.\n   */\n  callWithChat: CallWithChatCompositeStrings;\n}\n\n/**\n * Context for providing localized strings to components\n *\n * @private\n */\nexport const LocaleContext = createContext<CompositeLocale>(COMPOSITE_LOCALE_EN_US);\n\n/**\n * Props to LocalizationProvider\n *\n * @private\n */\nexport type LocalizationProviderProps = {\n  /** Locale context to provide components */\n  locale: CompositeLocale;\n  /** Children to provide locale context. */\n  children: React.ReactNode;\n};\n\n/**\n * Provider to provide localized strings for this library's composites.\n *\n * @private\n */\nexport const LocalizationProvider = (props: LocalizationProviderProps): JSX.Element => {\n  const {\n    locale,\n    children\n  } = props;\n  return <LocaleContext.Provider value={locale}>\n      <ComponentLocalizationProvider locale={locale.component}>{children}</ComponentLocalizationProvider>\n    </LocaleContext.Provider>;\n};\n\n/**\n * @private\n */\nexport const useLocale = (): CompositeLocale => useContext(LocaleContext);","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallEnd20Filled, CallMissed20Filled, CameraSwitch24Regular, Chat20Filled, Chat20Regular, Info20Filled, MicOff20Filled, Mic20Filled, Mic20Regular, People20Regular, PersonDelete20Filled, Speaker220Filled, Speaker220Regular, Video20Filled, VideoOff20Filled, WifiWarning20Filled, Circle20Regular } from '@fluentui/react-icons';\n/* @conditional-compile-remove(capabilities) */\nimport { MicProhibited20Filled, VideoProhibited20Filled } from '@fluentui/react-icons';\nimport { Grid20Regular } from '@fluentui/react-icons';\nimport { Dialpad20Regular } from '@fluentui/react-icons';\nimport { DEFAULT_COMPONENT_ICONS } from '@internal/react-components';\nimport React from 'react';\n// eslint-disable-next-line no-restricted-imports\nimport { FontIcon, IIconProps, Spinner, SpinnerSize } from '@fluentui/react';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffect20Regular, VideoPerson20Filled } from '@fluentui/react-icons';\nimport { PersonSquare20Regular, WindowHeaderHorizontal20Regular, TableSimple20Regular, BoardSplit20Regular, ContentView20Regular, Table20Regular } from '@fluentui/react-icons';\nconst SpinnerIcon = (): JSX.Element => <Spinner size={SpinnerSize.large} />;\n\n/**\n * The default set of icons used by the composites directly (i.e. not via the components defined in this library).\n *\n * @public\n */\nexport const COMPOSITE_ONLY_ICONS: CompositeIcons = {\n  ChevronLeft: undefined,\n  Link: undefined,\n  LobbyScreenConnectingToCall: <SpinnerIcon />,\n  LobbyScreenWaitingToBeAdmitted: <SpinnerIcon />,\n  LocalDeviceSettingsCamera: <Video20Filled />,\n  LocalDeviceSettingsMic: <Mic20Filled />,\n  LocalDeviceSettingsSpeaker: <Speaker220Filled />,\n  LocalPreviewPlaceholder: <VideoOff20Filled />,\n  LocalCameraSwitch: <CameraSwitch24Regular />,\n  ControlBarChatButtonActive: <Chat20Filled />,\n  ControlBarChatButtonInactive: <Chat20Regular />,\n  /* @conditional-compile-remove(capabilities) */\n  ControlButtonCameraProhibited: <VideoProhibited20Filled />,\n  /* @conditional-compile-remove(capabilities) */\n  ControlButtonMicProhibited: <MicProhibited20Filled />,\n  ControlBarPeopleButton: <People20Regular />,\n  MoreDrawerMicrophones: <Mic20Regular />,\n  MoreDrawerPeople: <People20Regular />,\n  MoreDrawerSpeakers: <Speaker220Regular />,\n  MoreDrawerSelectedMicrophone: <Mic20Filled />,\n  MoreDrawerSelectedSpeaker: <Speaker220Filled />,\n  Muted: <MicOff20Filled />,\n  NetworkReconnectIcon: <CallMissed20Filled />,\n  NoticePageAccessDeniedTeamsMeeting: <PersonDelete20Filled />,\n  NoticePageJoinCallFailedDueToNoNetwork: <WifiWarning20Filled />,\n  NoticePageLeftCall: <CallEnd20Filled />,\n  NoticePageRemovedFromCall: <Info20Filled />,\n  /* @conditional-compile-remove(rooms) */\n  NoticePageNotInvitedToRoom: <Info20Filled />,\n  /* @conditional-compile-remove(rooms) */\n  NoticePageRoomNotFound: <Info20Filled />,\n  /* @conditional-compile-remove(rooms) */\n  NoticePageRoomNotValid: <Info20Filled />,\n  /* @conditional-compile-remove(calling-sounds) */\n  NoticePageCallRejected: <Info20Filled />,\n  NoticePageCallTimeout: <Info20Filled />,\n  /* @conditional-compile-remove(rooms) */\n  NoticePageInviteToRoomRemoved: <Info20Filled />,\n  /* @conditional-compile-remove(video-background-effects) */\n  BlurVideoBackground: <VideoBackgroundEffect20Regular />,\n  /* @conditional-compile-remove(video-background-effects) */\n  RemoveVideoBackgroundEffect: <VideoPerson20Filled />,\n  GalleryOptions: <Grid20Regular />,\n  OverflowGalleryTop: <WindowHeaderHorizontal20Regular />,\n  SpeakerGalleryLayout: <PersonSquare20Regular />,\n  DefaultGalleryLayout: <TableSimple20Regular />,\n  FloatingLocalVideoGalleryLayout: <BoardSplit20Regular />,\n  FocusedContentGalleryLayout: <ContentView20Regular />,\n  LargeGalleryLayout: <Table20Regular />,\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  DefaultCustomButton: <Circle20Regular />,\n  DtmfDialpadButton: <Dialpad20Regular />\n};\n\n/**\n * The default set of icons that are available to used in the Composites.\n *\n * @public\n */\nexport const DEFAULT_COMPOSITE_ICONS = {\n  ...DEFAULT_COMPONENT_ICONS,\n  ...COMPOSITE_ONLY_ICONS\n};\n\n/** @private */\nexport type CompositeIconProps<Icons> = IIconProps & {\n  iconName: keyof Icons;\n};\n\n/**\n * Icons that can be overridden for {@link ChatComposite}.\n *\n * @public\n */\nexport type ChatCompositeIcons = {\n  EditBoxCancel?: JSX.Element;\n  EditBoxSubmit?: JSX.Element;\n  MessageDelivered?: JSX.Element;\n  MessageEdit?: JSX.Element;\n  MessageFailed?: JSX.Element;\n  MessageRemove?: JSX.Element;\n  MessageSeen?: JSX.Element;\n  MessageSending?: JSX.Element;\n  ParticipantItemOptions?: JSX.Element;\n  ParticipantItemOptionsHovered?: JSX.Element;\n  SendBoxSend?: JSX.Element;\n  SendBoxSendHovered?: JSX.Element;\n};\n\n/**\n * Icon wrapper to use when including customizable icons inside the ChatComposite.\n * This wrapper ensures the icon name is being type-checked helping ensure no typos\n * and ensure that icon is customizable through the composite API.\n *\n * @private\n */\nexport const ChatCompositeIcon = (props: CompositeIconProps<ChatCompositeIcons>): JSX.Element => <FontIcon {...props} />;\n\n/**\n * Icons that can be overridden for {@link CallComposite}.\n *\n * @public\n */\nexport type CallCompositeIcons = {\n  ControlBarPeopleButton?: JSX.Element;\n  ControlButtonCameraOff?: JSX.Element;\n  ControlButtonCameraOn?: JSX.Element;\n  ControlButtonEndCall?: JSX.Element;\n  ControlButtonMicOff?: JSX.Element;\n  ControlButtonMicOn?: JSX.Element;\n  ControlButtonOptions?: JSX.Element;\n  ControlButtonParticipants?: JSX.Element;\n  ControlButtonScreenShareStart?: JSX.Element;\n  ControlButtonScreenShareStop?: JSX.Element;\n  /* @conditional-compile-remove(capabilities) */\n  ControlButtonCameraProhibited?: JSX.Element;\n  /* @conditional-compile-remove(capabilities) */\n  ControlButtonMicProhibited?: JSX.Element;\n  /* @conditional-compile-remove(raise-hand) */\n  ControlButtonRaiseHand?: JSX.Element;\n  /* @conditional-compile-remove(raise-hand) */\n  ControlButtonLowerHand?: JSX.Element;\n  /* @conditional-compile-remove(raise-hand) */\n  RaiseHandContextualMenuItem?: JSX.Element;\n  LowerHandContextualMenuItem?: JSX.Element;\n  ErrorBarCallCameraAccessDenied?: JSX.Element;\n  ErrorBarCallCameraAlreadyInUse?: JSX.Element;\n  ErrorBarCallLocalVideoFreeze?: JSX.Element;\n  ErrorBarCallMacOsCameraAccessDenied?: JSX.Element;\n  ErrorBarCallMacOsMicrophoneAccessDenied?: JSX.Element;\n  ErrorBarCallMicrophoneAccessDenied?: JSX.Element;\n  ErrorBarCallMicrophoneMutedBySystem?: JSX.Element;\n  ErrorBarCallMicrophoneUnmutedBySystem?: JSX.Element;\n  ErrorBarCallNetworkQualityLow?: JSX.Element;\n  ErrorBarCallNoMicrophoneFound?: JSX.Element;\n  ErrorBarCallNoSpeakerFound?: JSX.Element;\n  ErrorBarClear?: JSX.Element;\n  HorizontalGalleryLeftButton?: JSX.Element;\n  HorizontalGalleryRightButton?: JSX.Element;\n  LobbyScreenConnectingToCall?: JSX.Element;\n  LobbyScreenWaitingToBeAdmitted?: JSX.Element;\n  LocalDeviceSettingsCamera?: JSX.Element;\n  LocalDeviceSettingsMic?: JSX.Element;\n  LocalDeviceSettingsSpeaker?: JSX.Element;\n  LocalPreviewPlaceholder?: JSX.Element;\n  Muted?: JSX.Element;\n  NetworkReconnectIcon?: JSX.Element;\n  NoticePageAccessDeniedTeamsMeeting?: JSX.Element;\n  NoticePageJoinCallFailedDueToNoNetwork?: JSX.Element;\n  NoticePageLeftCall?: JSX.Element;\n  NoticePageRemovedFromCall?: JSX.Element;\n  /* @conditional-compile-remove(calling-sounds) */\n  NoticePageCallRejected?: JSX.Element;\n  /* @conditional-compile-remove(rooms) */\n  NoticePageNotInvitedToRoom?: JSX.Element;\n  /* @conditional-compile-remove(rooms) */\n  NoticePageRoomNotFound?: JSX.Element;\n  /* @conditional-compile-remove(rooms) */\n  NoticePageRoomNotValid?: JSX.Element;\n  NoticePageCallTimeout?: JSX.Element;\n  OptionsCamera?: JSX.Element;\n  OptionsMic?: JSX.Element;\n  OptionsSpeaker?: JSX.Element;\n  ParticipantItemMicOff?: JSX.Element;\n  ParticipantItemOptions?: JSX.Element;\n  ParticipantItemOptionsHovered?: JSX.Element;\n  ParticipantItemScreenShareStart?: JSX.Element;\n  VideoTileMicOff?: JSX.Element;\n  LocalCameraSwitch?: JSX.Element;\n  /* @conditional-compile-remove(rooms) */\n  NoticePageInviteToRoomRemoved?: JSX.Element;\n  /* @conditional-compile-remove(video-background-effects) */\n  BlurVideoBackground?: JSX.Element;\n  /* @conditional-compile-remove(video-background-effects) */\n  RemoveVideoBackgroundEffect?: JSX.Element;\n  GalleryOptions?: JSX.Element;\n  SpeakerGalleryLayout?: JSX.Element;\n  FloatingLocalVideoGalleryLayout?: JSX.Element;\n  DefaultGalleryLayout?: JSX.Element;\n  FocusedContentGalleryLayout?: JSX.Element;\n  OverflowGalleryTop?: JSX.Element;\n  LargeGalleryLayout?: JSX.Element;\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  DefaultCustomButton?: JSX.Element;\n  DtmfDialpadButton?: JSX.Element;\n};\n\n/**\n * Icon wrapper to use when including customizable icons inside the CallComposite.\n * This wrapper ensures the icon name is being type-checked helping ensure no typos\n * and ensure that icon is customizable through the composite API.\n *\n * @private\n */\nexport const CallCompositeIcon = (props: CompositeIconProps<CallCompositeIcons>): JSX.Element => <FontIcon {...props} />;\n\n/**\n * Icons that can be overridden for {@link CallWithChatComposite}.\n *\n * @public\n */\nexport type CallWithChatCompositeIcons = {\n  // CallWithChat Specific Icons\n  ChevronLeft?: JSX.Element;\n  ControlBarChatButtonActive?: JSX.Element;\n  ControlBarChatButtonInactive?: JSX.Element;\n  ControlBarPeopleButton?: JSX.Element;\n  Link?: JSX.Element;\n  MoreDrawerMicrophones?: JSX.Element;\n  MoreDrawerPeople?: JSX.Element;\n  MoreDrawerSelectedMicrophone?: JSX.Element;\n  MoreDrawerSelectedSpeaker?: JSX.Element;\n  MoreDrawerSpeakers?: JSX.Element;\n\n  // Call icons\n  ControlButtonCameraOff?: JSX.Element;\n  ControlButtonCameraOn?: JSX.Element;\n  ControlButtonEndCall?: JSX.Element;\n  ControlButtonMicOff?: JSX.Element;\n  ControlButtonMicOn?: JSX.Element;\n  ControlButtonOptions?: JSX.Element;\n  ControlButtonScreenShareStart?: JSX.Element;\n  ControlButtonScreenShareStop?: JSX.Element;\n  /* @conditional-compile-remove(capabilities) */\n  ControlButtonCameraProhibited?: JSX.Element;\n  /* @conditional-compile-remove(capabilities) */\n  ControlButtonMicProhibited?: JSX.Element;\n  ErrorBarCallCameraAccessDenied?: JSX.Element;\n  ErrorBarCallCameraAlreadyInUse?: JSX.Element;\n  ErrorBarCallLocalVideoFreeze?: JSX.Element;\n  ErrorBarCallMacOsCameraAccessDenied?: JSX.Element;\n  ErrorBarCallMacOsMicrophoneAccessDenied?: JSX.Element;\n  ErrorBarCallMicrophoneAccessDenied?: JSX.Element;\n  ErrorBarCallMicrophoneMutedBySystem?: JSX.Element;\n  ErrorBarCallMicrophoneUnmutedBySystem?: JSX.Element;\n  ErrorBarCallNetworkQualityLow?: JSX.Element;\n  ErrorBarCallNoMicrophoneFound?: JSX.Element;\n  ErrorBarCallNoSpeakerFound?: JSX.Element;\n  ErrorBarClear?: JSX.Element;\n  HorizontalGalleryLeftButton?: JSX.Element;\n  HorizontalGalleryRightButton?: JSX.Element;\n  LobbyScreenConnectingToCall?: JSX.Element;\n  LobbyScreenWaitingToBeAdmitted?: JSX.Element;\n  LocalDeviceSettingsCamera?: JSX.Element;\n  LocalDeviceSettingsMic?: JSX.Element;\n  LocalDeviceSettingsSpeaker?: JSX.Element;\n  LocalPreviewPlaceholder?: JSX.Element;\n  Muted?: JSX.Element;\n  NetworkReconnectIcon?: JSX.Element;\n  NoticePageAccessDeniedTeamsMeeting?: JSX.Element;\n  NoticePageJoinCallFailedDueToNoNetwork?: JSX.Element;\n  NoticePageLeftCall?: JSX.Element;\n  NoticePageRemovedFromCall?: JSX.Element;\n  OptionsCamera?: JSX.Element;\n  OptionsMic?: JSX.Element;\n  OptionsSpeaker?: JSX.Element;\n  ParticipantItemMicOff?: JSX.Element;\n  ParticipantItemScreenShareStart?: JSX.Element;\n  VideoTileMicOff?: JSX.Element;\n  LocalCameraSwitch?: JSX.Element;\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  DefaultCustomButton?: JSX.Element;\n  DtmfDialpadButton?: JSX.Element;\n\n  // Chat icons\n  EditBoxCancel?: JSX.Element;\n  EditBoxSubmit?: JSX.Element;\n  MessageDelivered?: JSX.Element;\n  MessageEdit?: JSX.Element;\n  MessageFailed?: JSX.Element;\n  MessageRemove?: JSX.Element;\n  MessageSeen?: JSX.Element;\n  MessageSending?: JSX.Element;\n  SendBoxSend?: JSX.Element;\n  SendBoxSendHovered?: JSX.Element;\n  SendBoxAttachFile?: JSX.Element;\n\n  // Icons common to Call and Chat.\n  ParticipantItemOptions?: JSX.Element;\n  ParticipantItemOptionsHovered?: JSX.Element;\n};\n\n/**\n * Icon wrapper to use when including customizable icons inside the CallWithChatComposite.\n * This wrapper ensures the icon name is being type-checked helping ensure no typos\n * and ensure that icon is customizable through the composite API.\n *\n * @private\n */\nexport const CallWithChatCompositeIcon = (props: CompositeIconProps<CallWithChatCompositeIcons>): JSX.Element => <FontIcon {...props} />;\n\n/**\n * Icons that can be overridden in one of the composites exported by this library.\n *\n * See {@link ChatCompositeIcons}, {@link CallCompositeIcons} and {@link CallWithChatCompositeIcons} for more targeted types.\n *\n * @public\n */\nexport type CompositeIcons = ChatCompositeIcons & CallCompositeIcons & CallWithChatCompositeIcons;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle } from '@fluentui/react/lib/Styling';\n\n/**\n * @private\n */\nexport const globalLayerHostStyle: IStyle = {\n  position: 'fixed',\n  zIndex: 1000000,\n  inset: '0px',\n  visibility: 'hidden'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Customizer, LayerHost, mergeStyles, PartialTheme, registerIcons, Stack, Theme, useTheme } from '@fluentui/react';\nimport { FluentThemeProvider, ParticipantMenuItemsCallback } from '@internal/react-components';\nimport React, { createContext, useContext } from 'react';\nimport { CompositeLocale, LocalizationProvider } from '../localization';\nimport { AvatarPersonaDataCallback } from './AvatarPersona';\nimport { CallCompositeIcons, CallWithChatCompositeIcons, ChatCompositeIcons, DEFAULT_COMPOSITE_ICONS } from './icons';\nimport { globalLayerHostStyle } from './styles/GlobalHostLayer.styles';\nimport { useId } from '@fluentui/react-hooks';\n/**\n * Properties common to all composites exported from this library.\n *\n * @public\n */\nexport interface BaseCompositeProps<TIcons extends Record<string, JSX.Element>> {\n  /**\n   * Fluent theme for the composite.\n   *\n   * @defaultValue light theme\n   */\n  fluentTheme?: PartialTheme | Theme;\n  /**\n   * Custom Icon override for the composite.\n   * A JSX element can be provided to override the default icon.\n   */\n  icons?: TIcons;\n  /**\n   * Locale for the composite.\n   *\n   * @defaultValue English (US)\n   */\n  locale?: CompositeLocale;\n  /**\n   * Whether composite is displayed right-to-left.\n   *\n   * @defaultValue false\n   */\n  rtl?: boolean;\n  /**\n   * A callback function that can be used to provide custom data to Avatars rendered\n   * in Composite.\n   *\n   * This will not affect the displayName shown in the composite.\n   * The displayName throughout the composite will be what is provided to the adapter when the adapter is created.\n   * will be what is provided to the adapter when the adapter is created.\n   */\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n\n  /**\n   * A callback function that can be used to provide custom menu items for a participant in\n   * participant list.\n   */\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n}\n\n/**\n * A base provider {@link React.Context} to wrap components with other required providers\n * (e.g. icons, FluentThemeProvider, LocalizationProvider).\n *\n * Required providers are only wrapped once, with all other instances only passing children.\n *\n * @private\n */\nexport const BaseProvider = (props: BaseCompositeProps<CallCompositeIcons | ChatCompositeIcons | CallWithChatCompositeIcons> & {\n  children: React.ReactNode;\n}): JSX.Element => {\n  const {\n    fluentTheme,\n    rtl,\n    locale\n  } = props;\n  const globalLayerHostId = useId('composite-global-hostId');\n\n  /**\n   * Pass only the children if we previously registered icons, and have previously wrapped the children in\n   * FluentThemeProvider and LocalizationProvider\n   */\n  const alreadyWrapped = useBase();\n  if (alreadyWrapped) {\n    return <>{props.children}</>;\n  }\n\n  /**\n   * Before registering fluent icons, we should check DEFAULT_COMPOSITE_ICONS and strip out the key value pairs where value is undefined\n   */\n  const iconsToRegister: {\n    [key: string]: JSX.Element;\n  } = {};\n  Object.entries(DEFAULT_COMPOSITE_ICONS).forEach(([key, value]) => {\n    if (value) {\n      iconsToRegister[key] = value;\n    }\n  });\n\n  /**\n   * We register the default icon mappings merged with custom icons provided through props\n   * to ensure all icons render correctly.\n   */\n  registerIcons({\n    icons: {\n      ...iconsToRegister,\n      ...props.icons\n    }\n  });\n\n  // we use Customizer to override default LayerHost injected to <body />\n  // which stop polluting global dom tree and increase compatibility with react-full-screen\n  const CompositeElement = <FluentThemeProvider fluentTheme={fluentTheme} rtl={rtl}>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\" />\n      <Customizer scopedSettings={{\n      Layer: {\n        hostId: globalLayerHostId\n      }\n    }}>\n        <WithBackgroundColor>{props.children}</WithBackgroundColor>\n      </Customizer>\n      <LayerHost id={globalLayerHostId} className={mergeStyles(globalLayerHostStyle)} />\n    </FluentThemeProvider>;\n  const localizedElement = locale ? LocalizationProvider({\n    locale,\n    children: CompositeElement\n  }) : CompositeElement;\n  return <BaseContext.Provider value={true}>{localizedElement}</BaseContext.Provider>;\n};\n\n/**\n * @private\n */\nconst BaseContext = createContext<boolean>(false);\n\n/**\n * @private\n */\nconst useBase = (): boolean => useContext(BaseContext);\n\n/**\n * @private\n * Provides a wrapper with a background color to ensure that composites always have a background color.\n * This is necessary to ensure that composites are not transparent,\n * and the background color of it's parent elements doesn't show through the composite.\n */\nconst WithBackgroundColor = (props: {\n  children: React.ReactNode;\n}): JSX.Element => {\n  const {\n    children\n  } = props;\n  const theme = useTheme();\n  const className = mergeStyles({\n    background: theme.semanticColors.bodyBackground,\n    height: '100%',\n    width: '100%',\n    position: 'relative'\n  });\n  return <Stack className={className}>{children}</Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { createContext, useContext } from 'react';\nimport { FileUploadManager } from '../file-sharing';\nimport { FileUploadAdapter } from './AzureCommunicationFileUploadAdapter';\nimport { ChatAdapter } from './ChatAdapter';\n\n/**\n * @private\n */\ntype ChatProviderProps = {\n  children: React.ReactNode;\n  adapter: ChatAdapter;\n};\nconst ChatAdapterContext = createContext<ChatAdapter | undefined>(undefined);\n\n/**\n * @private\n */\nexport const ChatAdapterProvider = (props: ChatProviderProps): JSX.Element => {\n  const {\n    adapter\n  } = props;\n  return <ChatAdapterContext.Provider value={adapter}>{props.children}</ChatAdapterContext.Provider>;\n};\n\n/**\n * @private\n */\nexport const useAdapter = (): ChatAdapter => {\n  const adapter = useContext(ChatAdapterContext);\n  if (!adapter) {\n    throw 'Cannot find adapter please initialize before usage.';\n  }\n  return adapter;\n};\n\n/**\n * @private\n */\nexport const useFileUploadAdapter = (): FileUploadAdapter => {\n  // A stub that short-circuits all logic because none of the fields are available.\n  return {\n    registerActiveFileUploads() {\n      return ([] as FileUploadManager[]);\n    },\n    registerCompletedFileUploads() {\n      return ([] as FileUploadManager[]);\n    },\n    cancelFileUpload() {\n      // noop\n    },\n    clearFileUploads() {\n      // noop\n    },\n    updateFileUploadErrorMessage() {\n      // noop\n    },\n    updateFileUploadProgress() {\n      // noop\n    },\n    updateFileUploadMetadata() {\n      // noop\n    }\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @private\n */\nexport const UNSUPPORTED_CHAT_THREAD_TYPE = ['@thread.tacv2', '@thread.skype'];\n\n/**\n * @private\n */\nexport const TEAMS_LIMITATION_LEARN_MORE = 'https://learn.microsoft.com/en-us/azure/communication-services/concepts/join-teams-meeting#limitations-and-known-issues';\n\n/**\n * @remarks\n * This value is publicly documented in the ChatComposite API documentation.\n * Changing this value will require updating the API documentation.\n */\nexport const CHAT_CONTAINER_MIN_WIDTH_REM = 17.5;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, memoizeFunction, mergeStyles } from '@fluentui/react';\nimport { MessageThreadStyles } from '@internal/react-components';\nimport { CHAT_CONTAINER_MIN_WIDTH_REM } from '../../common/constants';\nconst CHAT_CONTAINER_MAX_WIDTH_REM = 41.25;\nconst CHAT_CONTAINER_MIN_HEIGHT_REM = 13;\n\n/**\n * @private\n * z-index to ensure that chat container has lower z-index than participant pane\n */\nexport const CHAT_CONTAINER_ZINDEX = 1;\n\n/**\n * @private\n */\nexport const chatScreenContainerStyle = mergeStyles({\n  height: '100%',\n  width: '100%',\n  minHeight: `${CHAT_CONTAINER_MIN_HEIGHT_REM}rem`,\n  minWidth: `${CHAT_CONTAINER_MIN_WIDTH_REM}rem`\n});\n\n/**\n * @private\n */\nexport const chatContainer = mergeStyles({\n  height: '100%',\n  width: '100%',\n  overflow: 'hidden',\n  '*::-webkit-scrollbar': {\n    width: '0.3rem',\n    height: '0.3rem'\n  },\n  '.scroll::-webkit-scrollbar-track': {\n    background: 'rgba(150, 150, 150)',\n    borderRadius: '0.3rem'\n  },\n  '*::-webkit-scrollbar-thumb': {\n    borderRadius: '10px',\n    background: 'rgba(150, 150, 150)'\n  }\n});\n\n/**\n * @private\n */\nexport const chatArea = mergeStyles({\n  height: '100%',\n  width: '100%',\n  overflow: 'auto',\n  position: 'relative' // Ensure that the absolute children components are positioned relative to the chat area\n});\n\n/**\n * @private\n */\nexport const chatWrapper = mergeStyles({\n  height: '100%',\n  width: '100%',\n  overflow: 'hidden',\n  zIndex: CHAT_CONTAINER_ZINDEX\n});\n\n/**\n * @private\n */\nexport const chatHeaderContainerStyle = mergeStyles({\n  width: '100%',\n  paddingLeft: '1.5rem',\n  paddingRight: '1.5rem',\n  '@media screen and (max-width: 25rem)': {\n    paddingLeft: '5%',\n    paddingRight: '5%'\n  },\n  borderBottom: '0.063rem solid #DDDDDD'\n});\n\n/**\n * @private\n */\nexport const topicNameLabelStyle = mergeStyles({\n  fontSize: '1.1rem',\n  lineHeight: '2.5rem',\n  fontWeight: 600,\n  marginRight: '0.125rem',\n  textOverflow: 'ellipsis',\n  overflowY: 'hidden'\n});\n\n/**\n * @private\n */\nexport const messageThreadChatCompositeStyles = memoizeFunction((background: string): MessageThreadStyles => ({\n  root: {\n    maxWidth: `${CHAT_CONTAINER_MAX_WIDTH_REM}rem`\n  },\n  chatContainer: {\n    background: background\n  }\n}));\n\n/**\n * @private\n */\nexport const typingIndicatorContainerStyles: IStyle = {\n  padding: '0rem 0.25rem'\n};\n\n/**\n * @private\n */\nexport const sendboxContainerStyles: IStyle = {\n  maxWidth: `${CHAT_CONTAINER_MAX_WIDTH_REM}rem`,\n  width: '100%',\n  alignSelf: 'center'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IPersonaProps, Persona, PersonaInitialsColor } from '@fluentui/react';\nimport React, { useEffect, useState } from 'react';\n/* @conditional-compile-remove(raise-hand) */\nimport { mergeStyles } from '@fluentui/react';\n\n/**\n * Custom data attributes for displaying avatar for a user.\n *\n * @public\n */\nexport type AvatarPersonaData = {\n  /**\n   * Primary text to display, usually the name of the person.\n   */\n  text?: string;\n  /**\n   * Image URL to use, should be a square aspect ratio and big enough to fit in the image area.\n   */\n  imageUrl?: string;\n  /**\n   * The user's initials to display in the image area when there is no image.\n   * @defaultvalue Derived from `text`\n   */\n  imageInitials?: string;\n  /**\n   * The background color when the user's initials are displayed.\n   * @defaultvalue Derived from `text`\n   */\n  initialsColor?: PersonaInitialsColor | string;\n  /**\n   * The text color when the user's initials are displayed\n   * @defaultvalue `white`\n   */\n  initialsTextColor?: string;\n};\n\n/**\n * Callback function used to provide custom data to build an avatar for a user.\n *\n * @public\n */\nexport type AvatarPersonaDataCallback = (userId: string) => Promise<AvatarPersonaData>;\n\n/**\n * @private\n */\nexport interface AvatarPersonaProps extends IPersonaProps {\n  /**\n   * Azure Communicator user ID.\n   */\n  userId?: string;\n  /**\n   * A function that returns a Promise that resolves to the data to be displayed.\n   */\n  dataProvider?: AvatarPersonaDataCallback;\n  /**\n   * Allow to show colored border around persona coin, but isActive is what shows it.\n   */\n  /* @conditional-compile-remove(raise-hand) */\n  allowActiveBorder?: boolean;\n}\n\n/**\n * An Avatar component made using the `Persona` component.\n * It allows you to specify a `userId` and a `dataProvider` to retrieve the `AvatarPersonaData`.\n * Read more about `Persona` component at https://developer.microsoft.com/fluentui#/controls/web/persona\n *\n * @private\n */\nexport const AvatarPersona = (props: AvatarPersonaProps): JSX.Element => {\n  const {\n    userId,\n    dataProvider,\n    text,\n    imageUrl,\n    imageInitials,\n    initialsColor,\n    initialsTextColor,\n    showOverflowTooltip\n  } = props;\n  const [data, setData] = useState<AvatarPersonaData | undefined>();\n  useEffect(() => {\n    (async () => {\n      if (dataProvider && userId) {\n        const newData = await dataProvider(userId);\n        if (avatarDeepDifferenceCheck(data, newData)) {\n          setData(newData);\n        }\n      }\n    })();\n  }, [data, dataProvider, userId]);\n\n  /* @conditional-compile-remove(raise-hand) */\n  let activePersona = '';\n  /* @conditional-compile-remove(raise-hand) */\n  if (props.allowActiveBorder) {\n    // Display a border for raised handed participants in participant list\n    activePersona = mergeStyles({\n      border: 'solid 2px',\n      borderColor: 'transparent',\n      borderRadius: '50%',\n      padding: '2px',\n      boxSizing: 'content-box',\n      margin: '-4px'\n    });\n    mergeStyles(activePersona, props.styles);\n  }\n  return <Persona {...props}\n  /* @conditional-compile-remove(raise-hand) */ className={activePersona} text={data?.text ?? text} imageUrl={data?.imageUrl ?? imageUrl} imageInitials={data?.imageInitials ?? imageInitials} initialsColor={data?.initialsColor ?? initialsColor} initialsTextColor={data?.initialsTextColor ?? initialsTextColor ?? 'white'}\n  // default disable tooltip unless specified\n  showOverflowTooltip={showOverflowTooltip ?? false} />;\n};\nconst avatarDeepDifferenceCheck = (currentData?: AvatarPersonaData, newData?: AvatarPersonaData): boolean => {\n  return currentData?.text !== newData?.text || currentData?.imageUrl !== newData?.imageUrl || currentData?.initialsColor !== newData?.initialsColor || currentData?.imageInitials !== newData?.imageInitials || currentData?.initialsTextColor !== newData?.initialsTextColor;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Stack } from '@fluentui/react';\nimport React from 'react';\nimport * as reselect from 'reselect';\nimport { ChatClientState } from '@internal/chat-stateful-client';\nimport { ChatBaseSelectorProps } from '@internal/chat-component-bindings';\nimport { chatHeaderContainerStyle, topicNameLabelStyle } from './styles/Chat.styles';\n\n/**\n * @private\n */\nexport type HeaderProps = {\n  topic: string;\n};\n\n/**\n * @private\n */\nexport const ChatHeader = (props: HeaderProps): JSX.Element => {\n  return <Stack className={chatHeaderContainerStyle} horizontal>\n      <Stack.Item align=\"center\">\n        <div className={topicNameLabelStyle}>{props.topic}</div>\n      </Stack.Item>\n    </Stack>;\n};\nconst getTopicName = (state: ChatClientState, props: ChatBaseSelectorProps): string => {\n  return state.threads[props.threadId]?.properties?.topic || '';\n};\n\n/**\n * @private\n */\nexport const getHeaderProps = reselect.createSelector([getTopicName], (topic): HeaderProps => {\n  return {\n    topic: topic\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IconButton, mergeStyles, Stack, useTheme } from '@fluentui/react';\nimport React from 'react';\nimport { ChatCompositeIcon } from '../../common/icons';\n/**\n * Props for {@link FileUploadButton} component.\n * @internal\n */\nexport interface FileUploadButtonProps {\n  /**\n   * A string containing the comma separated list of accepted file types.\n   * Similar to the `accept` attribute of the `<input type=\"file\" />` element.\n   */\n  accept?: string;\n  /**\n   * Allows multiple files to be selected if set to `true`.\n   * Default value is `false`.\n   * Similar to the `multiple` attribute of the `<input type=\"file\" />` element.\n   */\n  multiple?: boolean;\n  /**\n   * onChange handler for the file upload button.\n   * Similar to the `onChange` attribute of the `<input type=\"file\" />` element.\n   * Called every time files are selected through the file upload button with a {@link FileList}\n   * of selected files.\n   */\n  onChange?: (files: FileList | null) => void;\n}\n\n/**\n * @internal\n */\nexport const FileUploadButton = (props: FileUploadButtonProps): JSX.Element => {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const theme = useTheme();\n  const {\n    accept,\n    multiple = false,\n    onChange\n  } = props;\n  const fileUploadButtonClassName = mergeStyles({\n    width: '1.5rem',\n    height: '1.5rem',\n    cursor: 'pointer',\n    padding: '0.15rem',\n    ':hover': {\n      backgroundColor: theme.palette.neutralLighter\n    }\n  });\n  const iconButtonClassName = mergeStyles({\n    color: 'unset',\n    width: '1.5rem',\n    height: '1.5rem',\n    ':hover': {\n      color: 'unset',\n      background: 'transparent'\n    }\n  });\n  return <>\n      <Stack verticalAlign=\"center\" horizontalAlign=\"center\" className={fileUploadButtonClassName} onClick={() => {\n      inputRef.current?.click();\n    }}>\n        <IconButton className={iconButtonClassName} ariaLabel={uploadFileButtonStringTrampoline()}>\n          <SendBoxAttachFileIconTrampoline />\n        </IconButton>\n      </Stack>\n      <input ref={inputRef} hidden multiple={multiple} accept={accept} type=\"file\" onClick={e => {\n      // To ensure that `onChange` is fired even if the same file is picked again.\n      e.currentTarget.value = '';\n    }} onChange={e => {\n      onChange && onChange(e.currentTarget.files);\n    }} />\n    </>;\n};\nconst SendBoxAttachFileIconTrampoline = (): JSX.Element => {\n  // Return _some_ available icon, as the real icon is beta-only.\n  return <ChatCompositeIcon iconName=\"EditBoxCancel\" />;\n};\n\n/**\n * A wrapper to return {@link FileUploadButton} component conditionally.\n * It will return `<></>` for stable builds.\n * @internal\n */\nexport const FileUploadButtonWrapper = (props: Pick<FileUploadButtonProps, 'accept' | 'multiple' | 'onChange'>): JSX.Element => {\n  return <>\n      {}\n    </>;\n};\nconst uploadFileButtonStringTrampoline = (): string => {\n  return '';\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { ChatClientState, ChatErrors, ChatThreadClientState } from '@internal/chat-stateful-client';\nimport { useState, useEffect, useRef, useMemo } from 'react';\nimport { ChatAdapterState } from '../adapter/ChatAdapter';\nimport { useAdapter } from '../adapter/ChatAdapterProvider';\nimport memoizeOne from 'memoize-one';\nimport { CommunicationIdentifierKind } from '@azure/communication-common';\n\n/**\n * @private\n */\nexport const useAdaptedSelector = <SelectorT extends (state: ChatClientState, props: any) => any,>(selector: SelectorT, selectorProps?: Parameters<SelectorT>[1]): ReturnType<SelectorT> => {\n  return useSelectorWithAdaptation(selector, adaptCompositeState, selectorProps);\n};\n\n/**\n * @private\n */\nexport const useSelectorWithAdaptation = <SelectorT extends (state: ReturnType<AdaptFuncT>, props: any) => any, AdaptFuncT extends (state: ChatAdapterState) => any>(selector: SelectorT, adaptState: AdaptFuncT, selectorProps?: Parameters<SelectorT>[1]): ReturnType<SelectorT> => {\n  const adapter = useAdapter();\n\n  // Keeps track of whether the current component is mounted or not. If it has unmounted, make sure we do not modify the\n  // state or it will cause React warnings in the console. https://skype.visualstudio.com/SPOOL/_workitems/edit/2453212\n  const mounted = useRef(false);\n  useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  });\n  const threadId = adapter.getState().thread.threadId;\n  const threadConfigProps = useMemo(() => ({\n    threadId\n  }), [threadId]);\n  const [props, setProps] = useState(selector(adaptState(adapter.getState()), selectorProps ?? threadConfigProps));\n  const propRef = useRef(props);\n  propRef.current = props;\n  useEffect(() => {\n    const onStateChange = (state: ChatAdapterState): void => {\n      if (!mounted.current) {\n        return;\n      }\n      const newProps = selector(adaptState(state), selectorProps ?? threadConfigProps);\n      if (propRef.current !== newProps) {\n        setProps(newProps);\n      }\n    };\n    adapter.onStateChange(onStateChange);\n    return () => {\n      adapter.offStateChange(onStateChange);\n    };\n  }, [adaptState, adapter, selector, selectorProps, threadConfigProps]);\n  return props;\n};\nconst memoizeState = memoizeOne((userId: CommunicationIdentifierKind, displayName: string, threads: {\n  [key: string]: ChatThreadClientState;\n}, latestErrors: ChatErrors) => ({\n  userId,\n  displayName,\n  threads,\n  latestErrors\n}));\nconst memoizeThreads = memoizeOne((thread: ChatThreadClientState) => ({\n  [thread.threadId]: thread\n}));\nconst adaptCompositeState = (compositeState: ChatAdapterState): ChatClientState => {\n  return memoizeState(compositeState.userId, compositeState.displayName, memoizeThreads(compositeState.thread), (\n  // This is an unsafe type expansion.\n  // compositeState.latestErrors can contain properties that are not valid in ChatErrors.\n  //\n  // But there is no way to check for valid property names at runtime:\n  // - The set of valid property names is built from types in the @azure/communication-chat.\n  //   Thus we don't have a literal array of allowed strings at runtime.\n  // - Due to minification / uglification, the property names from the objects at runtime can't be used\n  //   to compare against permissible values inferred from the types.\n  //\n  // This is not a huge problem -- it simply means that our adapted selector will include some extra operations\n  // that are unknown to the UI component and data binding libraries. Generic handling of the errors (e.g.,\n  // just displaying them in some UI surface) will continue to work for these operations. Handling of\n  // specific operations (e.g., acting on errors related to permission issues) will ignore these operations.\n  compositeState.latestErrors as ChatErrors));\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CommonProperties } from '@internal/acs-ui-common';\nimport { ChatHandlers } from '@internal/chat-component-bindings';\nimport { ReactElement } from 'react';\nimport memoizeOne from 'memoize-one';\nimport { ChatAdapter } from '../adapter/ChatAdapter';\nimport { useAdapter } from '../adapter/ChatAdapterProvider';\n/**\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/explicit-function-return-type\nexport const useHandlers = <PropsT,>(_component: (props: PropsT) => ReactElement | null): Pick<ChatHandlers, CommonProperties<ChatHandlers, PropsT>> => {\n  return createCompositeHandlers(useAdapter());\n};\nconst createCompositeHandlers = memoizeOne((adapter: ChatAdapter): ChatHandlers => ({\n  onSendMessage: adapter.sendMessage,\n  onLoadPreviousChatMessages: adapter.loadPreviousChatMessages,\n  onMessageSeen: adapter.sendReadReceipt,\n  onTyping: adapter.sendTypingIndicator,\n  onRemoveParticipant: adapter.removeParticipant,\n  updateThreadTopicName: adapter.setTopic,\n  onUpdateMessage: (messageId: string, content: string, options?: {\n    metadata?: Record<string, string>;\n  }) => {\n    const metadata = options?.metadata;\n    return adapter.updateMessage(messageId, content, metadata);\n  },\n  onDeleteMessage: adapter.deleteMessage\n}));","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { getChatSelector, ChatHandlers, GetChatSelector } from '@internal/chat-component-bindings';\nimport { useHandlers } from './useHandlers';\nimport { useAdaptedSelector } from './useAdaptedSelector';\nimport { Common } from '@internal/acs-ui-common';\ntype Selector = (state: any, props: any) => any;\n\n/**\n * @private\n */\nexport const usePropsFor = <Component extends (props: any) => JSX.Element,>(component: Component): GetChatSelector<Component> extends Selector ? ReturnType<GetChatSelector<Component>> & Common<ChatHandlers, Parameters<Component>[0]> : Record<string, never> => {\n  const selector = getChatSelector(component);\n  if (!selector) {\n    throw new Error(\"Can't find the selector for component, please check supported component list\");\n  }\n  return {\n    ...useAdaptedSelector((selector as Selector)),\n    ...useHandlers(component)\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles, IStackItemStyles, IStackTokens, mergeStyles, Theme, ITextStyles } from '@fluentui/react';\nimport { ParticipantListStyles } from '@internal/react-components';\nimport { CHAT_CONTAINER_ZINDEX } from '../../ChatComposite/styles/Chat.styles';\n\n/**\n * @private\n */\nexport const sidePaneContainerStyles: IStackItemStyles = {\n  root: {\n    height: '100%',\n    padding: '0.5rem 0.25rem',\n    width: '21.5rem'\n  }\n};\n\n/**\n * @private\n */\nexport const sidePaneContainerHiddenStyles: IStackItemStyles = {\n  root: {\n    ...sidePaneContainerStyles,\n    display: 'none'\n  }\n};\n\n/**\n * @private\n */\nexport const sidePaneContainerTokens: IStackTokens = {\n  childrenGap: '0.5rem'\n};\n\n/**\n * @private\n */\nexport const sidePaneHeaderStyles: IStackItemStyles = {\n  root: {\n    lineHeight: '1.5rem',\n    fontSize: '1.125rem',\n    padding: '0.75rem 0.75rem 0.75rem 0.25rem',\n    fontWeight: '600'\n  }\n};\n\n/**\n * @private\n */\nexport const sidePaneHeaderContainerStyles: IStackStyles = {\n  root: {\n    margin: '0 0.25rem'\n  }\n};\n\n/**\n * @private\n */\nexport const paneBodyContainer: IStackStyles = {\n  root: {\n    flexDirection: 'column',\n    display: 'flex'\n  }\n};\n\n/**\n * @private\n */\nexport const scrollableContainer: IStackStyles = {\n  root: {\n    flexBasis: '0',\n    flexGrow: '1',\n    overflowY: 'auto'\n  }\n};\n\n/**\n * @private\n */\nexport const scrollableContainerContents: IStackItemStyles = {\n  root: {\n    flexGrow: '1',\n    flexBasis: '0',\n    maxWidth: '100%',\n    // Create a new stacking context so that `pipStyles` can set zIndex above the container.\n    position: 'relative'\n  }\n};\n\n/**\n * @private\n */\nexport const containerContextStyles: IStackStyles = {\n  root: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%'\n  }\n};\n/**\n * @private\n */\nexport const peopleSubheadingStyle: IStackItemStyles = {\n  root: {\n    fontSize: '0.75rem'\n  }\n};\n\n/**\n * @private\n */\nexport const peoplePaneContainerTokens: IStackTokens = {\n  childrenGap: '0.5rem'\n};\n\n/**\n * @private\n */\nexport const participantListWrapper = (theme: Theme): string => mergeStyles({\n  width: '20rem',\n  maxWidth: '50%',\n  height: '100%',\n  position: 'absolute',\n  right: '0',\n  boxShadow: theme.effects.elevation16,\n  background: theme.semanticColors.bodyBackground,\n  // zIndex to set the participant pane above the chat container\n  zIndex: CHAT_CONTAINER_ZINDEX + 1\n});\n\n/**\n * @private\n */\nexport const participantListContainerPadding = {\n  childrenGap: '0.5rem'\n};\n\n/**\n * @private\n */\nexport const participantListStack = mergeStyles({\n  height: '100%'\n});\n\n/**\n * @private\n */\nexport const participantListContainerStyle = mergeStyles({\n  height: '100%',\n  overflowY: 'auto',\n  overflowX: 'hidden'\n});\n\n/**\n * @private\n */\nexport const participantListStyle: ParticipantListStyles = {\n  root: {\n    padding: '0rem'\n  },\n  participantItemStyles: {\n    root: {\n      padding: '0.5rem'\n    }\n  }\n};\n\n/**\n * @private\n */\nexport const participantListMobileStyle: ParticipantListStyles = {\n  root: {\n    padding: '0rem'\n  },\n  participantItemStyles: {\n    root: {\n      padding: '0.5rem 1rem'\n    }\n  }\n};\n\n/**\n * @private\n */\nexport const displayNameStyles: ITextStyles = {\n  root: {\n    padding: '0.5rem',\n    textOverflow: 'ellipsis',\n    overflow: 'hidden'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useMemo } from 'react';\nimport { SendBoxStylesProps, SendBox as SimpleSendBox } from '@internal/react-components';\nimport { usePropsFor } from '../ChatComposite/hooks/usePropsFor';\nimport { ChatCompositeOptions } from '../ChatComposite';\n/**\n * @private\n */\nexport type SendBoxProps = {\n  options?: ChatCompositeOptions;\n  styles?: SendBoxStylesProps;\n};\n\n/**\n * @private\n */\nexport const SendBox = (props: SendBoxProps): JSX.Element => {\n  const {\n    options,\n    styles\n  } = props;\n  const sendBoxProps = usePropsFor(SimpleSendBox);\n  const sendBoxStyles = useMemo(() => {\n    return Object.assign({}, styles);\n  }, [styles]);\n  const simpleSendBox = useMemo(() => <SimpleSendBox {...sendBoxProps} autoFocus={options?.autoFocus} styles={sendBoxStyles} />, [sendBoxProps, options, sendBoxStyles]);\n  return simpleSendBox;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(image-overlay) */\nimport { isIOS } from '@fluentui/react';\nimport { mergeStyles, Stack } from '@fluentui/react';\n/* @conditional-compile-remove(image-overlay) */\nimport { PersonaSize } from '@fluentui/react';\nimport { CommunicationParticipant, ErrorBar, MessageProps, MessageRenderer, MessageThread, MessageThreadStyles, ParticipantMenuItemsCallback, SendBoxStylesProps, TypingIndicator, TypingIndicatorStylesProps, useTheme } from '@internal/react-components';\nimport React, { useCallback, useEffect, useMemo } from 'react';\n/* @conditional-compile-remove(image-overlay) */\nimport { useState } from 'react';\nimport { AvatarPersona, AvatarPersonaDataCallback, AvatarPersonaProps } from '../common/AvatarPersona';\nimport { useAdapter } from './adapter/ChatAdapterProvider';\nimport { ChatCompositeOptions } from './ChatComposite';\nimport { ChatHeader, getHeaderProps } from './ChatHeader';\nimport { FileDownloadHandler } from '@internal/react-components';\nimport { FileUploadButtonWrapper as FileUploadButton, FileUploadHandler } from './file-sharing';\nimport { useAdaptedSelector } from './hooks/useAdaptedSelector';\nimport { usePropsFor } from './hooks/usePropsFor';\nimport { chatArea, chatContainer, chatWrapper, messageThreadChatCompositeStyles, sendboxContainerStyles, typingIndicatorContainerStyles } from './styles/Chat.styles';\nimport { participantListContainerPadding } from '../common/styles/ParticipantContainer.styles';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\n/* @conditional-compile-remove(image-overlay) */\nimport { ImageOverlay } from '@internal/react-components';\n/* @conditional-compile-remove(image-overlay) */\nimport { InlineImage } from '@internal/react-components';\nimport { SendBox } from '../common/SendBox';\nimport { ResourceFetchResult } from '@internal/chat-stateful-client';\n\n/**\n * @private\n */\nexport type ChatScreenProps = {\n  options?: ChatCompositeOptions;\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  onRenderMessage?: (messageProps: MessageProps, defaultOnRender?: MessageRenderer) => JSX.Element;\n  onRenderTypingIndicator?: (typingUsers: CommunicationParticipant[]) => JSX.Element;\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  styles?: ChatScreenStyles;\n  fileSharing?: FileSharingOptions;\n  formFactor?: 'desktop' | 'mobile';\n};\n\n/**\n * @private\n */\nexport type ChatScreenStyles = {\n  messageThread?: MessageThreadStyles;\n  sendBox?: SendBoxStylesProps;\n  typingIndicator?: TypingIndicatorStylesProps;\n};\n\n/**\n * Properties for configuring the File Sharing feature.\n * @beta\n */\nexport interface FileSharingOptions {\n  /**\n   * A string containing the comma separated list of accepted file types.\n   * Similar to the `accept` attribute of the `<input type=\"file\" />` element.\n   * Accepts any type of file if not specified.\n   * @beta\n   */\n  accept?: string;\n  /**\n   * Allows multiple files to be selected if set to `true`.\n   * Similar to the `multiple` attribute of the `<input type=\"file\" />` element.\n   * @defaultValue false\n   * @beta\n   */\n  multiple?: boolean;\n  /**\n   * A function of type {@link FileUploadHandler} for handling file uploads.\n   * @beta\n   */\n  uploadHandler: FileUploadHandler;\n  /**\n   * A function of type {@link FileDownloadHandler} for handling file downloads.\n   * If the function is not specified, the file's `url` will be opened in a new tab to\n   * initiate the download.\n   */\n  downloadHandler?: FileDownloadHandler;\n}\n\n/**\n * @private\n */\n/* @conditional-compile-remove(image-overlay) */\ninterface OverlayImageItem {\n  imageSrc: string;\n  title: string;\n  titleIcon: JSX.Element;\n  attachmentId: string;\n  messageId: string;\n  imageUrl: string;\n}\n\n/**\n * @private\n */\nexport const ChatScreen = (props: ChatScreenProps): JSX.Element => {\n  const {\n    onFetchAvatarPersonaData,\n    onRenderMessage,\n    onRenderTypingIndicator,\n    options,\n    styles,\n    fileSharing,\n    formFactor\n  } = props;\n  const defaultNumberOfChatMessagesToReload = 5;\n  /* @conditional-compile-remove(image-overlay) */\n  const [overlayImageItem, setOverlayImageItem] = useState<OverlayImageItem>();\n  /* @conditional-compile-remove(image-overlay) */\n  const [isImageOverlayOpen, setIsImageOverlayOpen] = useState<boolean>(false);\n  const adapter = useAdapter();\n  const theme = useTheme();\n  useEffect(() => {\n    // Initial data should be always fetched by the composite(or external caller) instead of the adapter\n    const fetchData: () => Promise<void> = async () => {\n      // Fetch initial data for adapter\n      await adapter.fetchInitialData();\n      // Fetch initial set of messages. Without fetching messages here, if the Composite's adapter is changed the message thread does not load new messages.\n      await adapter.loadPreviousChatMessages(defaultNumberOfChatMessagesToReload);\n    };\n    fetchData();\n  }, [adapter]);\n  const messageThreadProps = usePropsFor(MessageThread);\n  const typingIndicatorProps = usePropsFor(TypingIndicator);\n  const headerProps = useAdaptedSelector(getHeaderProps);\n  const errorBarProps = usePropsFor(ErrorBar);\n\n  /* @conditional-compile-remove(image-overlay) */\n  useEffect(() => {\n    if (overlayImageItem === undefined) {\n      return;\n    }\n    const message = adapter.getState().thread.chatMessages[overlayImageItem.messageId];\n    if (message === undefined) {\n      return;\n    }\n    const resourceCache = message.resourceCache;\n    if (overlayImageItem.imageSrc === '' && resourceCache && resourceCache[overlayImageItem.imageUrl]) {\n      const fullSizeImageSrc = getResourceSourceUrl(resourceCache[overlayImageItem.imageUrl]);\n      if (fullSizeImageSrc === undefined || fullSizeImageSrc === '' || overlayImageItem.imageSrc === fullSizeImageSrc) {\n        return;\n      }\n      setOverlayImageItem({\n        ...overlayImageItem,\n        imageSrc: fullSizeImageSrc\n      });\n    }\n    // Disable eslint because we are using the overlayImageItem in this effect but don't want to have it as a dependency, as it will cause an infinite loop.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [messageThreadProps.messages]);\n  const getResourceSourceUrl = (result: ResourceFetchResult): string => {\n    let src = '';\n    if (result.error || !result.sourceUrl) {\n      src = 'blob://';\n    } else {\n      src = result.sourceUrl;\n    }\n    return src;\n  };\n  const onRenderAvatarCallback = useCallback((userId?: string, defaultOptions?: AvatarPersonaProps) => {\n    return <AvatarPersona userId={userId} hidePersonaDetails={true} {...defaultOptions} dataProvider={onFetchAvatarPersonaData} />;\n  }, [onFetchAvatarPersonaData]);\n  const messageThreadStyles = useMemo(() => {\n    return Object.assign({}, messageThreadChatCompositeStyles(theme.semanticColors.bodyBackground), styles?.messageThread);\n  }, [styles?.messageThread, theme.semanticColors.bodyBackground]);\n  const typingIndicatorStyles = useMemo(() => {\n    return Object.assign({}, styles?.typingIndicator);\n  }, [styles?.typingIndicator]);\n  const userId = toFlatCommunicationIdentifier(adapter.getState().userId);\n  const fileUploadButtonOnChange = useCallback((files: FileList | null): void => {\n    if (!files) {\n      return;\n    }\n  }, [adapter, fileSharing, userId]);\n  /* @conditional-compile-remove(image-overlay) */\n  const onInlineImageClicked = useCallback((attachmentId: string, messageId: string) => {\n    const message = adapter.getState().thread.chatMessages[messageId];\n    const inlinedImages = message.content?.attachments?.filter(attachment => {\n      return attachment.attachmentType === 'image' && attachment.id === attachmentId;\n    });\n    if (!inlinedImages || inlinedImages.length <= 0) {\n      return;\n    }\n    const attachment = inlinedImages[0];\n    const resourceCache = message.resourceCache;\n    let imageSrc = '';\n    if (attachment.url) {\n      if (resourceCache && resourceCache[attachment.url]) {\n        imageSrc = getResourceSourceUrl(resourceCache[attachment.url]);\n      } else {\n        adapter.downloadResourceToCache({\n          threadId: adapter.getState().thread.threadId,\n          messageId: messageId,\n          resourceUrl: attachment.url\n        });\n      }\n    }\n    const titleIconRenderOptions = {\n      text: message.senderDisplayName,\n      size: PersonaSize.size32,\n      showOverflowTooltip: false,\n      imageAlt: message.senderDisplayName\n    };\n    const messageSenderId = message.sender !== undefined ? toFlatCommunicationIdentifier(message.sender) : userId;\n    const titleIcon = onRenderAvatarCallback && onRenderAvatarCallback(messageSenderId, titleIconRenderOptions);\n    const overlayImage: OverlayImageItem = {\n      title: message.senderDisplayName || '',\n      titleIcon: titleIcon,\n      attachmentId: attachment.id,\n      imageSrc: imageSrc,\n      messageId: messageId,\n      imageUrl: attachment.url || ''\n    };\n    setIsImageOverlayOpen(true);\n    setOverlayImageItem(overlayImage);\n  }, [adapter, onRenderAvatarCallback, userId]);\n\n  /* @conditional-compile-remove(image-overlay) */\n  const inlineImageOptions = {\n    onRenderInlineImage: (inlineImage: InlineImage, defaultOnRender: (inlineImage: InlineImage) => JSX.Element): JSX.Element => {\n      const message = adapter.getState().thread.chatMessages[inlineImage.messageId];\n      const attachment = message?.content?.attachments?.find(attachment => attachment.id === inlineImage.imageAttributes.id);\n      if (attachment === undefined) {\n        return defaultOnRender(inlineImage);\n      }\n      let pointerEvents: 'none' | 'auto' = inlineImage.imageAttributes.src === '' ? 'none' : 'auto';\n      const resourceCache = message.resourceCache;\n      if (resourceCache && attachment.previewUrl && resourceCache[attachment.previewUrl] && resourceCache[attachment.previewUrl].error) {\n        pointerEvents = 'none';\n      }\n      return <span key={inlineImage.imageAttributes.id} onClick={() => onInlineImageClicked(inlineImage.imageAttributes.id || '', inlineImage.messageId)} tabIndex={0} role=\"button\" onKeyDown={e => {\n        if (e.key === 'Enter') {\n          onInlineImageClicked(inlineImage.imageAttributes.id || '', inlineImage.messageId);\n        }\n      }} style={{\n        cursor: 'pointer',\n        pointerEvents\n      }}>\n          {defaultOnRender(inlineImage)}\n        </span>;\n    }\n  };\n\n  /* @conditional-compile-remove(image-overlay) */\n  const onDownloadButtonClicked = useCallback((imageSrc: string): void => {\n    if (imageSrc === '') {\n      return;\n    }\n    if (isIOS()) {\n      window.open(imageSrc, '_blank');\n    } else {\n      // Create a new anchor element\n      const a = document.createElement('a');\n      // Set the href and download attributes for the anchor element\n      a.href = imageSrc;\n      a.download = overlayImageItem?.attachmentId || '';\n      a.rel = 'noopener noreferrer';\n      a.target = '_blank';\n\n      // Programmatically click the anchor element to trigger the download\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n    }\n  }, [overlayImageItem?.attachmentId]);\n  const AttachFileButton = useCallback(() => {\n    if (!fileSharing?.uploadHandler) {\n      return null;\n    }\n    return <FileUploadButton accept={fileSharing?.accept} multiple={fileSharing?.multiple} onChange={fileUploadButtonOnChange} />;\n  }, [fileSharing?.accept, fileSharing?.multiple, fileSharing?.uploadHandler, fileUploadButtonOnChange]);\n  return <Stack className={chatContainer} grow>\n      {options?.topic !== false && <ChatHeader {...headerProps} />}\n      <Stack className={chatArea} tokens={participantListContainerPadding} horizontal grow>\n        <Stack className={chatWrapper} grow>\n          {options?.errorBar !== false && <ErrorBar {...errorBarProps} />}\n          {}\n          <MessageThread {...messageThreadProps} onRenderAvatar={onRenderAvatarCallback} onRenderMessage={onRenderMessage} /* @conditional-compile-remove(image-overlay) */\n        inlineImageOptions={inlineImageOptions} numberOfChatMessagesToReload={defaultNumberOfChatMessagesToReload} styles={messageThreadStyles} />\n          <Stack className={mergeStyles(sendboxContainerStyles)}>\n            <div className={mergeStyles(typingIndicatorContainerStyles)}>\n              {onRenderTypingIndicator ? onRenderTypingIndicator(typingIndicatorProps.typingUsers) : <TypingIndicator {...typingIndicatorProps} styles={typingIndicatorStyles} />}\n            </div>\n            <Stack horizontal={formFactor === 'mobile'}>\n              {formFactor === 'mobile' && <Stack verticalAlign=\"center\">\n                  <AttachFileButton />\n                </Stack>}\n              <Stack grow>\n                <SendBox options={options} styles={styles?.sendBox} />\n              </Stack>\n              {formFactor !== 'mobile' && <AttachFileButton />}\n            </Stack>\n          </Stack>\n        </Stack>\n        {}\n      </Stack>\n      {/* @conditional-compile-remove(image-overlay) */\n    overlayImageItem && <ImageOverlay {...overlayImageItem} isOpen={isImageOverlayOpen} onDismiss={() => {\n      setOverlayImageItem(undefined);\n      setIsImageOverlayOpen(false);\n      adapter.removeResourceFromCache({\n        threadId: adapter.getState().thread.threadId,\n        messageId: overlayImageItem.messageId,\n        resourceUrl: overlayImageItem.imageUrl\n      });\n    }} onDownloadButtonClicked={onDownloadButtonClicked} />}\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CommunicationParticipant, MessageRenderer, MessageProps } from '@internal/react-components';\nimport React from 'react';\nimport { BaseProvider, BaseCompositeProps } from '../common/BaseComposite';\nimport { ChatCompositeIcons } from '../common/icons';\nimport { ChatAdapter } from './adapter/ChatAdapter';\nimport { ChatAdapterProvider } from './adapter/ChatAdapterProvider';\nimport { chatScreenContainerStyle } from './styles/Chat.styles';\nimport { ChatScreen } from './ChatScreen';\n/**\n * Props for {@link ChatComposite}.\n *\n * @public\n */\nexport interface ChatCompositeProps extends BaseCompositeProps<ChatCompositeIcons> {\n  /**\n   * An adapter provides logic and data to the composite.\n   * Composite can also be controlled using the adapter.\n   */\n  adapter: ChatAdapter;\n  /**\n   * `(messageProps: MessageProps, defaultOnRender?: MessageRenderer) => JSX.Element`\n   * A callback for customizing the message renderer.\n   */\n  onRenderMessage?: (messageProps: MessageProps, defaultOnRender?: MessageRenderer) => JSX.Element;\n  /**\n   * `(typingUsers: CommunicationParticipant[]) => JSX.Element`\n   * A callback for customizing the typing indicator renderer.\n   */\n  onRenderTypingIndicator?: (typingUsers: CommunicationParticipant[]) => JSX.Element;\n  /**\n   * Flags to enable/disable visual elements of the {@link ChatComposite}.\n   */\n  options?: ChatCompositeOptions;\n}\n\n/**\n * Optional features of the {@link ChatComposite}.\n *\n * @public\n */\nexport type ChatCompositeOptions = {\n  /**\n   * Surface Azure Communication Services backend errors in the UI with {@link @azure/communication-react#ErrorBar}.\n   * Hide or show the error bar.\n   * @defaultValue true\n   */\n  errorBar?: boolean;\n  /**\n   * Show or hide the topic at the top of the chat. Hidden if set to `false`\n   * @defaultValue true\n   */\n  topic?: boolean;\n  /**\n   * enumerable to determine if the input box has focus on render or not.\n   * When undefined nothing has focus on render\n   */\n  autoFocus?: 'sendBoxTextField';\n};\n/**\n * A customizable UI composite for the chat experience.\n *\n * @remarks Chat composite min width and height are respectively 17.5rem and 20rem (280px and 320px, with default rem at 16px)\n *\n * @public\n */\nexport const ChatComposite = (props: ChatCompositeProps): JSX.Element => {\n  const {\n    adapter,\n    options,\n    onFetchAvatarPersonaData,\n    onRenderTypingIndicator,\n    onRenderMessage,\n    onFetchParticipantMenuItems\n  } = props;\n  return <div className={chatScreenContainerStyle}>\n      <BaseProvider {...props}>\n        <ChatAdapterProvider adapter={adapter}>\n          <ChatScreen options={options} onFetchAvatarPersonaData={onFetchAvatarPersonaData} onRenderTypingIndicator={onRenderTypingIndicator} onRenderMessage={onRenderMessage} onFetchParticipantMenuItems={onFetchParticipantMenuItems} />\n        </ChatAdapterProvider>\n      </BaseProvider>\n    </div>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { createContext, useContext } from 'react';\nimport { CommonCallAdapter } from './CallAdapter';\ntype CallProviderProps = {\n  children: React.ReactNode;\n  adapter: CommonCallAdapter;\n};\nconst CallAdapterContext = createContext<CommonCallAdapter | undefined>(undefined);\n\n/**\n * @private\n */\nexport const CallAdapterProvider = (props: CallProviderProps): JSX.Element => {\n  const {\n    adapter\n  } = props;\n  return <CallAdapterContext.Provider value={adapter}>{props.children}</CallAdapterContext.Provider>;\n};\n\n/**\n * @private\n */\nexport const useAdapter = (): CommonCallAdapter => {\n  const adapter = useContext(CallAdapterContext);\n  if (!adapter) {\n    throw 'Cannot find adapter please initialize before usage.';\n  }\n  return adapter;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { useState, useEffect, useRef, useMemo } from 'react';\nimport memoizeOne from 'memoize-one';\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { CallAdapterState } from '../adapter/CallAdapter';\nimport { CallErrors, CallState, CallClientState, DeviceManagerState } from '@internal/calling-stateful-client';\nimport { CommunicationIdentifierKind } from '@azure/communication-common';\n/**\n * @private\n */\nexport const useAdaptedSelector = <SelectorT extends (state: CallClientState, props: any) => any,>(selector: SelectorT, selectorProps?: Parameters<SelectorT>[1]): ReturnType<SelectorT> => {\n  return useSelectorWithAdaptation(selector, adaptCompositeState, selectorProps);\n};\n\n/**\n * @private\n */\nexport const useSelectorWithAdaptation = <SelectorT extends (state: ReturnType<AdaptFuncT>, props: any) => any, AdaptFuncT extends (state: CallAdapterState) => any>(selector: SelectorT, adaptState: AdaptFuncT, selectorProps?: Parameters<SelectorT>[1]): ReturnType<SelectorT> => {\n  const adapter = useAdapter();\n\n  // Keeps track of whether the current component is mounted or not. If it has unmounted, make sure we do not modify the\n  // state or it will cause React warnings in the console. https://skype.visualstudio.com/SPOOL/_workitems/edit/2453212\n  const mounted = useRef(false);\n  useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  });\n  const callId = adapter.getState().call?.id;\n  const callConfigProps = useMemo(() => ({\n    callId\n  }), [callId]);\n  const [props, setProps] = useState(selector(adaptState(adapter.getState()), selectorProps ?? callConfigProps));\n  const propRef = useRef(props);\n  propRef.current = props;\n  useEffect(() => {\n    const onStateChange = (state: CallAdapterState): void => {\n      if (!mounted.current) {\n        return;\n      }\n      const newProps = selector(adaptState(state), selectorProps ?? callConfigProps);\n      if (propRef.current !== newProps) {\n        setProps(newProps);\n      }\n    };\n    adapter.onStateChange(onStateChange);\n    return () => {\n      adapter.offStateChange(onStateChange);\n    };\n  }, [adaptState, adapter, selector, selectorProps, callConfigProps]);\n  return props;\n};\nconst memoizeState = memoizeOne((userId: CommunicationIdentifierKind, deviceManager: DeviceManagerState, calls: {\n  [key: string]: CallState;\n}, latestErrors: CallErrors, displayName?: string, alternateCallerId?: string, environmentInfo?: undefined): CallClientState => ({\n  userId,\n  incomingCalls: {},\n  incomingCallsEnded: {},\n  callsEnded: {},\n  deviceManager,\n  callAgent: {\n    displayName\n  },\n  calls,\n  latestErrors\n}));\nconst memoizeCalls = memoizeOne((call?: CallState): {\n  [key: string]: CallState;\n} => call ? {\n  [call.id]: call\n} : {});\nconst adaptCompositeState = (compositeState: CallAdapterState): CallClientState => {\n  return memoizeState(compositeState.userId, compositeState.devices, memoizeCalls(compositeState.call), (\n  // This is an unsafe type expansion.\n  // compositeState.latestErrors can contain properties that are not valid in CallErrors.\n  //\n  // But there is no way to check for valid property names at runtime:\n  // - The set of valid property names is built from types in the @azure/communication-calling.\n  //   Thus we don't have a literal array of allowed strings at runtime.\n  // - Due to minification / uglification, the property names from the objects at runtime can't be used\n  //   to compare against permissible values inferred from the types.\n  //\n  // This is not a huge problem -- it simply means that our adapted selector will include some extra operations\n  // that are unknown to the UI component and data binding libraries. Generic handling of the errors (e.g.,\n  // just displaying them in some UI surface) will continue to work for these operations. Handling of\n  // specific operations (e.g., acting on errors related to permission issues) will ignore these operations.\n  compositeState.latestErrors as CallErrors), compositeState.displayName);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ActiveErrorMessage, ErrorType } from '@internal/react-components';\nimport { TrackedErrors } from '../types/ErrorTracking';\n\n/**\n * Take the set of active errors, and filter to only those that are newer than previously dismissed errors or have never been dismissed.\n *\n * @private\n */\nexport const filterLatestErrors = (activeErrors: ActiveErrorMessage[], trackedErrors: TrackedErrors): ActiveErrorMessage[] => {\n  const filteredErrors = activeErrors.filter(activeError => {\n    const trackedError = trackedErrors[activeError.type];\n    return !trackedError || !trackedError.lastDismissedAt || trackedError.lastDismissedAt < trackedError.mostRecentlyActive;\n  });\n  return filteredErrors;\n};\n\n/**\n * Maintain a record of the most recently active error for each error type.\n *\n * @private\n */\nexport const updateTrackedErrorsWithActiveErrors = (existingTrackedErrors: TrackedErrors, activeErrors: ActiveErrorMessage[]): TrackedErrors => {\n  const trackedErrors: TrackedErrors = {};\n\n  // Only care about active errors. If errors are no longer active we do not track that they have been previously dismissed.\n  for (const activeError of activeErrors) {\n    const existingTrackedError = existingTrackedErrors[activeError.type];\n    trackedErrors[activeError.type] = {\n      mostRecentlyActive: activeError.timestamp ?? existingTrackedError?.mostRecentlyActive ?? new Date(Date.now()),\n      lastDismissedAt: existingTrackedError?.lastDismissedAt\n    };\n  }\n  return trackedErrors;\n};\n\n/**\n * Create a record for when the error was most recently dismissed for tracking dismissed errors.\n *\n * @private\n */\nexport const trackErrorAsDismissed = (errorType: ErrorType, trackedErrors: TrackedErrors): TrackedErrors => {\n  const now = new Date(Date.now());\n  const existingError = trackedErrors[errorType];\n  return {\n    ...trackedErrors,\n    [errorType]: {\n      ...(existingError || {}),\n      lastDismissedAt: now\n    }\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallState, DeviceManagerState } from '@internal/calling-stateful-client';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsInfo } from '@internal/calling-stateful-client';\n/* @conditional-compile-remove(video-background-effects) */\nimport type { BackgroundBlurConfig, BackgroundReplacementConfig } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport type { CapabilitiesChangeInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(call-transfer) */\nimport { TransferEventArgs } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { StartCaptionsOptions } from '@azure/communication-calling';\nimport type { AudioDeviceInfo, VideoDeviceInfo, Call, PermissionConstraints, RemoteParticipant, StartCallOptions, MediaDiagnosticChangedEventArgs, NetworkDiagnosticChangedEventArgs, PropertyChangedEvent } from '@azure/communication-calling';\nimport { CreateVideoStreamViewResult, VideoStreamOptions } from '@internal/react-components';\nimport type { CommunicationIdentifierKind, MicrosoftTeamsAppIdentifier, UnknownIdentifier } from '@azure/communication-common';\nimport { DtmfTone } from '@azure/communication-calling';\nimport { CommunicationIdentifier } from '@azure/communication-common';\nimport type { AdapterState, Disposable, AdapterError, AdapterErrors } from '../../common/adapters';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffectsDependency } from '@internal/calling-component-bindings';\n/**\n * Major UI screens shown in the {@link CallComposite}.\n *\n * @public\n */\nexport type CallCompositePage = 'accessDeniedTeamsMeeting' | 'call' | 'configuration' | 'joinCallFailedDueToNoNetwork' | 'leftCall' | 'leaving' | 'lobby' | 'removedFromCall' | /* @conditional-compile-remove(call-transfer) */'transferring';\n\n/**\n * Subset of CallCompositePages that represent an end call state.\n * @private\n */\nexport const END_CALL_PAGES: CallCompositePage[] = ['accessDeniedTeamsMeeting', 'joinCallFailedDueToNoNetwork', 'leftCall', 'removedFromCall'];\n\n/**\n * {@link CommonCallAdapter} state for pure UI purposes.\n *\n * @public\n */\nexport type CallAdapterUiState = {\n  isLocalPreviewMicrophoneEnabled: boolean;\n  page: CallCompositePage;\n};\n\n/**\n * Identifier types for initiating a call using the CallAdapter\n * @public\n */\nexport type StartCallIdentifier = (MicrosoftTeamsAppIdentifier | UnknownIdentifier);\n\n/**\n * {@link CommonCallAdapter} state inferred from Azure Communication Services backend.\n *\n * @public\n */\nexport type CallAdapterClientState = {\n  userId: CommunicationIdentifierKind;\n  displayName?: string;\n  call?: CallState;\n  /* @conditional-compile-remove(calling-sounds) */\n  /**\n   * State to track who the original call went out to. will be undefined the call is not a outbound\n   * modality. This includes, groupCalls, Rooms calls, and Teams InteropMeetings.\n   */\n  targetCallees?: CommunicationIdentifier[];\n  devices: DeviceManagerState;\n  endedCall?: CallState;\n  isTeamsCall: boolean;\n  /* @conditional-compile-remove(rooms) */\n  /**\n   * State to track whether the call is a rooms call.\n   */\n  isRoomsCall: boolean;\n  /**\n   * Latest error encountered for each operation performed via the adapter.\n   */\n  latestErrors: AdapterErrors;\n  /**\n   * State to track whether the local participant's camera is on. To be used when creating a custom\n   * control bar with the CallComposite.\n   */\n  cameraStatus?: 'On' | 'Off';\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Default set of background images for background replacement effect.\n   */\n  videoBackgroundImages?: VideoBackgroundImage[];\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Dependency to be injected for video background effect.\n   */\n  onResolveVideoEffectDependency?: () => Promise<VideoBackgroundEffectsDependency>;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * State to track the selected video background effect.\n   */\n  selectedVideoBackgroundEffect?: VideoBackgroundEffect;\n  /* @conditional-compile-remove(call-transfer) */\n  /**\n   * Call from transfer request accepted by local user\n   */\n  acceptedTransferCallState?: CallState;\n  /* @conditional-compile-remove(calling-sounds) */\n  /**\n   * State to track the sounds to be used in the call.\n   */\n  sounds?: CallingSounds;\n};\n\n/**\n * {@link CommonCallAdapter} state.\n *\n * @public\n */\nexport type CallAdapterState = CallAdapterUiState & CallAdapterClientState;\n\n/**\n * Callback for {@link CallAdapterSubscribers} 'participantsJoined' event.\n *\n * @public\n */\nexport type ParticipantsJoinedListener = (event: {\n  joined: RemoteParticipant[];\n}) => void;\n\n/**\n * Callback for {@link CallAdapterSubscribers} 'participantsLeft' event.\n *\n * @public\n */\nexport type ParticipantsLeftListener = (event: {\n  removed: RemoteParticipant[];\n}) => void;\n\n/**\n * Callback for {@link CallAdapterSubscribers} 'isMuted' event.\n *\n * @public\n */\nexport type IsMutedChangedListener = (event: {\n  identifier: CommunicationIdentifierKind;\n  isMuted: boolean;\n}) => void;\n\n/**\n * Callback for {@link CallAdapterSubscribers} 'callIdChanged' event.\n *\n * @public\n */\nexport type CallIdChangedListener = (event: {\n  callId: string;\n}) => void;\n\n/**\n * Callback for {@link CallAdapterSubscribers} 'isLocalScreenSharingActiveChanged' event.\n *\n * @public\n */\nexport type IsLocalScreenSharingActiveChangedListener = (event: {\n  isScreenSharingOn: boolean;\n}) => void;\n\n/**\n * Callback for {@link CallAdapterSubscribers} 'isSpeakingChanged' event.\n *\n * @public\n */\nexport type IsSpeakingChangedListener = (event: {\n  identifier: CommunicationIdentifierKind;\n  isSpeaking: boolean;\n}) => void;\n\n/**\n * Callback for {@link CallAdapterSubscribers} 'displayNameChanged' event.\n *\n * @public\n */\nexport type DisplayNameChangedListener = (event: {\n  participantId: CommunicationIdentifierKind;\n  displayName: string;\n}) => void;\n\n/**\n * Payload for {@link CallEndedListener} containing details on the ended call.\n *\n * @public\n */\nexport type CallAdapterCallEndedEvent = {\n  callId: string;\n};\n\n/**\n * Callback for {@link CallAdapterSubscribers} 'callEnded' event.\n *\n * @public\n */\nexport type CallEndedListener = (event: CallAdapterCallEndedEvent) => void;\n\n/**\n * Payload for {@link DiagnosticChangedEventListner} where there is a change in a media diagnostic.\n *\n * @public\n */\nexport type MediaDiagnosticChangedEvent = MediaDiagnosticChangedEventArgs & {\n  type: 'media';\n};\n\n/**\n * Payload for {@link DiagnosticChangedEventListner} where there is a change in a network diagnostic.\n *\n * @public\n */\nexport type NetworkDiagnosticChangedEvent = NetworkDiagnosticChangedEventArgs & {\n  type: 'network';\n};\n\n/**\n * Callback for {@link CallAdapterSubscribers} 'diagnosticChanged' event.\n *\n * @public\n */\nexport type DiagnosticChangedEventListner = (event: MediaDiagnosticChangedEvent | NetworkDiagnosticChangedEvent) => void;\n\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * Contains the attibutes of a background image like url, name etc.\n *\n * @public\n */\nexport interface VideoBackgroundImage {\n  /**\n   * key for unique identification of the custom background\n   */\n  key: string;\n  /**\n   * URL of the uploaded background image.\n   */\n  url: string;\n  /**\n   * Image name to be displayed.\n   */\n  tooltipText?: string;\n}\n\n/**\n * @public\n * Type for representing a custom sound to use for a calling event\n */\nexport type SoundEffect = {\n  /**\n   * Path to sound effect\n   */\n  url: string;\n};\n\n/**\n * @public\n * Type for representing a set of sounds to use for different calling events\n */\nexport type CallingSounds = {\n  /**\n   * Sound to be played when the call ends\n   */\n  callEnded?: SoundEffect;\n  /**\n   * Sound to be played when the call is ringing\n   */\n  callRinging?: SoundEffect;\n  /**\n   * Sound to be played when the call is rejected by the user being callede\n   */\n  callBusy?: SoundEffect;\n};\n\n/**\n * Options for setting microphone and camera state when joining a call\n * true = turn on the device when joining call\n * false = turn off the device when joining call\n * 'keep'/undefined = retain devices' precall state\n *\n * @public\n */\nexport interface JoinCallOptions {\n  /**\n   * microphone state when joining call\n   * true: turn on\n   * false: turn off\n   * 'keep': maintain precall state\n   */\n  microphoneOn?: boolean | 'keep';\n  /**\n   * camera state when joining call\n   * true: turn on\n   * false: turn off\n   * 'keep': maintain precall state\n   */\n  cameraOn?: boolean | 'keep';\n}\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * Callback for {@link CallAdapterSubscribers} 'captionsReceived' event.\n *\n * @public\n */\nexport type CaptionsReceivedListener = (event: {\n  captionsInfo: CaptionsInfo;\n}) => void;\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * Callback for {@link CallAdapterSubscribers} 'isCaptionsActiveChanged' event.\n *\n * @public\n */\nexport type IsCaptionsActiveChangedListener = (event: {\n  isActive: boolean;\n}) => void;\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * Callback for {@link CallAdapterSubscribers} 'isCaptionLanguageChanged' event.\n *\n * @public\n */\nexport type IsCaptionLanguageChangedListener = (event: {\n  activeCaptionLanguage: string;\n}) => void;\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * Callback for {@link CallAdapterSubscribers} 'isSpokenLanguageChanged' event.\n *\n * @public\n */\nexport type IsSpokenLanguageChangedListener = (event: {\n  activeSpokenLanguage: string;\n}) => void;\n\n/* @conditional-compile-remove(call-transfer) */\n/**\n * Callback for {@link CallAdapterSubscribers} 'transferRequested' event.\n *\n * @public\n */\nexport type TransferAcceptedListener = (event: TransferEventArgs) => void;\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * Callback for {@link CallAdapterSubscribers} 'capabilitiesChanged' event.\n *\n * @public\n */\nexport type CapabilitiesChangedListener = (data: CapabilitiesChangeInfo) => void;\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * Contains the attibutes of a selected video background effect\n *\n * @public\n */\nexport type VideoBackgroundEffect = VideoBackgroundNoEffect | VideoBackgroundBlurEffect | VideoBackgroundReplacementEffect;\n\n/**\n * Contains the attibutes to remove video background effect\n *\n * @public\n */\nexport interface VideoBackgroundNoEffect {\n  /**\n   * Name of effect to remove video background effect\n   */\n  effectName: 'none';\n}\n\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * Contains the attibutes of the blur video background effect\n *\n * @public\n */\nexport interface VideoBackgroundBlurEffect extends BackgroundBlurConfig {\n  /**\n   * Name of effect to blur video background effect\n   */\n  effectName: 'blur';\n}\n\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * Contains the attibutes of a selected replacement video background effect\n *\n * @public\n */\nexport interface VideoBackgroundReplacementEffect extends BackgroundReplacementConfig {\n  /**\n   * Name of effect to replace video background effect\n   */\n  effectName: 'replacement';\n  /**\n   * key for unique identification of the custom background\n   */\n  key?: string;\n}\n\n/**\n * Functionality for managing the current call.\n *\n * @public\n */\nexport interface CallAdapterCallOperations {\n  /**\n   * Leave the call\n   *\n   * @param forEveryone - Whether to remove all participants when leaving\n   *\n   * @public\n   */\n  leaveCall(forEveryone?: boolean): Promise<void>;\n  /**\n   * Start the camera\n   * This method will start rendering a local camera view when the call is not active\n   *\n   * @param options - Options to control how video streams are rendered {@link @azure/communication-calling#VideoStreamOptions }\n   *\n   * @public\n   */\n  startCamera(options?: VideoStreamOptions): Promise<void>;\n  /**\n   * Stop the camera\n   * This method will stop rendering a local camera view when the call is not active\n   *\n   * @public\n   */\n  stopCamera(): Promise<void>;\n  /**\n   * Mute the current user during the call or disable microphone locally\n   *\n   * @public\n   */\n  mute(): Promise<void>;\n  /**\n   * Unmute the current user during the call or enable microphone locally\n   *\n   * @public\n   */\n  unmute(): Promise<void>;\n  /**\n   * Start sharing the screen during a call.\n   *\n   * @public\n   */\n  startScreenShare(): Promise<void>;\n  /* @conditional-compile-remove(raise-hand) */\n  /**\n   * Raise hand for current user\n   *\n   * @public\n   */\n  raiseHand(): Promise<void>;\n  /* @conditional-compile-remove(raise-hand) */\n  /**\n   * lower hand for current user\n   *\n   * @public\n   */\n  lowerHand(): Promise<void>;\n  /**\n   * Stop sharing the screen\n   *\n   * @public\n   */\n  stopScreenShare(): Promise<void>;\n  /**\n   * Remove a participant from the call.\n   *\n   * @param userId - Id of the participant to be removed\n   *\n   * @public\n   */\n  removeParticipant(userId: string): Promise<void>;\n  /**\n   * Create the html view for a stream.\n   *\n   * @remarks\n   * This method is implemented for composite\n   *\n   * @param remoteUserId - Id of the participant to render, leave it undefined to create the local camera view\n   * @param options - Options to control how video streams are rendered {@link @azure/communication-calling#VideoStreamOptions }\n   *\n   * @public\n   */\n  createStreamView(remoteUserId?: string, options?: VideoStreamOptions): Promise<void | CreateVideoStreamViewResult>;\n  /**\n   * Dispose the html view for a stream.\n   *\n   * @remarks\n   * This method is implemented for composite\n   *\n   * @deprecated Use {@link disposeRemoteVideoStreamView}, {@link disposeLocalVideoStreamView} and {@link disposeRemoteVideoStreamView} instead.\n   *\n   * @param remoteUserId - Id of the participant to render, leave it undefined to dispose the local camera view\n   * @param options - Options to control how video streams are rendered {@link @azure/communication-calling#VideoStreamOptions }\n   *\n   * @public\n   */\n  disposeStreamView(remoteUserId?: string, options?: VideoStreamOptions): Promise<void>;\n  /**\n   * Dispose the html view for a screen share stream\n   *\n   * @remarks\n   * this method is implemented for composite\n   *\n   * @param remoteUserId - Id of the participant to dispose the screen share stream view for.\n   *\n   * @public\n   */\n  disposeScreenShareStreamView(remoteUserId: string): Promise<void>;\n  /**\n   * Dispose the html view for a remote video stream\n   *\n   * @param remoteUserId - Id of the participant to dispose\n   *\n   * @public\n   */\n  disposeRemoteVideoStreamView(remoteUserId: string): Promise<void>;\n  /**\n   * Dispose the html view for a local video stream\n   *\n   * @public\n   */\n  disposeLocalVideoStreamView(): Promise<void>;\n  /**\n   * send dtmf tone to another participant in a 1:1 PSTN call\n   *\n   * @public\n   */\n  sendDtmfTone(dtmfTone: DtmfTone): Promise<void>;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Function to Start captions\n   * @param options - options for start captions\n   */\n  startCaptions(options?: StartCaptionsOptions): Promise<void>;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Function to set caption language\n   * @param language - language set for caption\n   */\n  setCaptionLanguage(language: string): Promise<void>;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Function to set spoken language\n   * @param language - spoken language\n   */\n  setSpokenLanguage(language: string): Promise<void>;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Funtion to stop captions\n   */\n  stopCaptions(): Promise<void>;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Start the video background effect.\n   *\n   * @public\n   */\n  startVideoBackgroundEffect(videoBackgroundEffect: VideoBackgroundEffect): Promise<void>;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Stop the video background effect.\n   *\n   * @public\n   */\n  stopVideoBackgroundEffects(): Promise<void>;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Override the background picker images for background replacement effect.\n   *\n   * @param backgroundImages - Array of custom background images.\n   *\n   * @public\n   */\n  updateBackgroundPickerImages(backgroundImages: VideoBackgroundImage[]): void;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Update the selected video background effect.\n   *\n   * @public\n   */\n  updateSelectedVideoBackgroundEffect(selectedVideoBackground: VideoBackgroundEffect): void;\n}\n\n/**\n * Functionality for managing devices within a call.\n *\n * @public\n */\nexport interface CallAdapterDeviceManagement {\n  /**\n   * Ask for permissions of devices.\n   *\n   * @remarks\n   * Browser permission window will pop up if permissions are not granted yet\n   *\n   * @param constrain - Define constraints for accessing local devices {@link @azure/communication-calling#PermissionConstraints }\n   *\n   * @public\n   */\n  askDevicePermission(constrain: PermissionConstraints): Promise<void>;\n  /**\n   * Query for available camera devices.\n   *\n   * @remarks\n   * This method should be called after askDevicePermission()\n   *\n   * @return An array of video device information entities {@link @azure/communication-calling#VideoDeviceInfo }\n   *\n   * @public\n   */\n  queryCameras(): Promise<VideoDeviceInfo[]>;\n  /**\n   * Query for available microphone devices.\n   *\n   * @remarks\n   * This method should be called after askDevicePermission()\n   *\n   * @return An array of audio device information entities {@link @azure/communication-calling#AudioDeviceInfo }\n   *\n   * @public\n   */\n  queryMicrophones(): Promise<AudioDeviceInfo[]>;\n  /**\n   * Query for available microphone devices.\n   *\n   * @remarks\n   * This method should be called after askDevicePermission()\n   *\n   * @return An array of audio device information entities {@link @azure/communication-calling#AudioDeviceInfo }\n   *\n   * @public\n   */\n  querySpeakers(): Promise<AudioDeviceInfo[]>;\n  /**\n   * Set the camera to use in the call.\n   *\n   * @param sourceInfo - Camera device to choose, pick one returned by  {@link CallAdapterDeviceManagement#queryCameras }\n   * @param options - Options to control how the camera stream is rendered {@link @azure/communication-calling#VideoStreamOptions }\n   *\n   * @public\n   */\n  setCamera(sourceInfo: VideoDeviceInfo, options?: VideoStreamOptions): Promise<void>;\n  /**\n   * Set the microphone to use in the call.\n   *\n   * @param sourceInfo - Microphone device to choose, pick one returned by {@link CallAdapterDeviceManagement#queryMicrophones }\n   *\n   * @public\n   */\n  setMicrophone(sourceInfo: AudioDeviceInfo): Promise<void>;\n  /**\n   * Set the speaker to use in the call.\n   *\n   * @param sourceInfo - Speaker device to choose, pick one returned by {@link CallAdapterDeviceManagement#querySpeakers }\n   *\n   * @public\n   */\n  setSpeaker(sourceInfo: AudioDeviceInfo): Promise<void>;\n}\n\n/**\n * Call composite events that can be subscribed to.\n *\n * @public\n */\nexport interface CallAdapterSubscribers {\n  /**\n   * Subscribe function for 'participantsJoined' event.\n   */\n  on(event: 'participantsJoined', listener: ParticipantsJoinedListener): void;\n  /**\n   * Subscribe function for 'participantsLeft' event.\n   */\n  on(event: 'participantsLeft', listener: ParticipantsLeftListener): void;\n  /**\n   * Subscribe function for 'isMutedChanged' event.\n   *\n   * @remarks\n   * The event will be triggered whenever current user or remote user mute state changed\n   *\n   */\n  on(event: 'isMutedChanged', listener: IsMutedChangedListener): void;\n  /**\n   * Subscribe function for 'callIdChanged' event.\n   *\n   * @remarks\n   * The event will be triggered when callId of current user changed.\n   *\n   */\n  on(event: 'callIdChanged', listener: CallIdChangedListener): void;\n  /**\n   * Subscribe function for 'isLocalScreenSharingActiveChanged' event.\n   */\n  on(event: 'isLocalScreenSharingActiveChanged', listener: IsLocalScreenSharingActiveChangedListener): void;\n  /**\n   * Subscribe function for 'displayNameChanged' event.\n   */\n  on(event: 'displayNameChanged', listener: DisplayNameChangedListener): void;\n  /**\n   * Subscribe function for 'isSpeakingChanged' event.\n   */\n  on(event: 'isSpeakingChanged', listener: IsSpeakingChangedListener): void;\n  /**\n   * Subscribe function for 'callEnded' event.\n   */\n  on(event: 'callEnded', listener: CallEndedListener): void;\n  /**\n   * Subscribe function for 'diagnosticChanged' event.\n   *\n   * This event fires whenever there is a change in user facing diagnostics about the ongoing call.\n   */\n  on(event: 'diagnosticChanged', listener: DiagnosticChangedEventListner): void;\n  /**\n   * Subscribe function for 'selectedMicrophoneChanged' event.\n   *\n   * This event fires whenever the user selects a new microphone device.\n   */\n  on(event: 'selectedMicrophoneChanged', listener: PropertyChangedEvent): void;\n  /**\n   * Subscribe function for 'selectedSpeakerChanged' event.\n   *\n   * This event fires whenever the user selects a new speaker device.\n   */\n  on(event: 'selectedSpeakerChanged', listener: PropertyChangedEvent): void;\n  /**\n   * Subscribe function for 'error' event.\n   */\n  on(event: 'error', listener: (e: AdapterError) => void): void;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Subscribe function for 'captionsReceived' event.\n   */\n  on(event: 'captionsReceived', listener: CaptionsReceivedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Subscribe function for 'isCaptionsActiveChanged' event.\n   */\n  on(event: 'isCaptionsActiveChanged', listener: IsCaptionsActiveChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Subscribe function for 'isCaptionLanguageChanged' event.\n   */\n  on(event: 'isCaptionLanguageChanged', listener: IsCaptionLanguageChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Subscribe function for 'isSpokenLanguageChanged' event.\n   */\n  on(event: 'isSpokenLanguageChanged', listener: IsSpokenLanguageChangedListener): void;\n\n  /* @conditional-compile-remove(call-transfer) */\n  /**\n   * Subscribe function for 'transferRequested' event.\n   */\n  on(event: 'transferAccepted', listener: TransferAcceptedListener): void;\n  /* @conditional-compile-remove(capabilities) */\n  /**\n   * Subscribe function for 'capabilitiesChanged' event.\n   */\n  on(event: 'capabilitiesChanged', listener: CapabilitiesChangedListener): void;\n  /* @conditional-compile-remove(rooms) */\n  /**\n   * Subscribe function for 'roleChanged' event.\n   */\n  on(event: 'roleChanged', listener: PropertyChangedEvent): void;\n  /**\n   * Unsubscribe function for 'participantsJoined' event.\n   */\n  off(event: 'participantsJoined', listener: ParticipantsJoinedListener): void;\n  /**\n   * Unsubscribe function for 'participantsLeft' event.\n   */\n  off(event: 'participantsLeft', listener: ParticipantsLeftListener): void;\n  /**\n   * Unsubscribe function for 'isMutedChanged' event.\n   */\n  off(event: 'isMutedChanged', listener: IsMutedChangedListener): void;\n  /**\n   * Unsubscribe function for 'callIdChanged' event.\n   */\n  off(event: 'callIdChanged', listener: CallIdChangedListener): void;\n  /**\n   * Unsubscribe function for 'isLocalScreenSharingActiveChanged' event.\n   */\n  off(event: 'isLocalScreenSharingActiveChanged', listener: IsLocalScreenSharingActiveChangedListener): void;\n  /**\n   * Unsubscribe function for 'displayNameChanged' event.\n   */\n  off(event: 'displayNameChanged', listener: DisplayNameChangedListener): void;\n  /**\n   * Unsubscribe function for 'isSpeakingChanged' event.\n   */\n  off(event: 'isSpeakingChanged', listener: IsSpeakingChangedListener): void;\n  /**\n   * Unsubscribe function for 'callEnded' event.\n   */\n  off(event: 'callEnded', listener: CallEndedListener): void;\n  /**\n   * Unsubscribe function for 'diagnosticChanged' event.\n   */\n  off(event: 'diagnosticChanged', listener: DiagnosticChangedEventListner): void;\n  /**\n   * Unsubscribe function for 'selectedMicrophoneChanged' event.\n   */\n  off(event: 'selectedMicrophoneChanged', listener: PropertyChangedEvent): void;\n  /**\n   * Unsubscribe function for 'selectedSpeakerChanged' event.\n   */\n  off(event: 'selectedSpeakerChanged', listener: PropertyChangedEvent): void;\n  /**\n   * Unsubscribe function for 'error' event.\n   */\n  off(event: 'error', listener: (e: AdapterError) => void): void;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Unsubscribe function for 'captionsReceived' event.\n   */\n  off(event: 'captionsReceived', listener: CaptionsReceivedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Unsubscribe function for 'isCaptionsActiveChanged' event.\n   */\n  off(event: 'isCaptionsActiveChanged', listener: IsCaptionsActiveChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Unsubscribe function for 'isCaptionLanguageChanged' event.\n   */\n  off(event: 'isCaptionLanguageChanged', listener: IsCaptionLanguageChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Unsubscribe function for 'isSpokenLanguageChanged' event.\n   */\n  off(event: 'isSpokenLanguageChanged', listener: IsSpokenLanguageChangedListener): void;\n  /* @conditional-compile-remove(call-transfer) */\n  /**\n   * Unsubscribe function for 'transferRequested' event.\n   */\n  off(event: 'transferAccepted', listener: TransferAcceptedListener): void;\n  /* @conditional-compile-remove(capabilities) */\n  /**\n   * Unsubscribe function for 'capabilitiesChanged' event.\n   */\n  off(event: 'capabilitiesChanged', listener: CapabilitiesChangedListener): void;\n  /* @conditional-compile-remove(rooms) */\n  /**\n   * Unsubscribe function for 'roleChanged' event.\n   */\n  off(event: 'roleChanged', listener: PropertyChangedEvent): void;\n}\n\n// This type remains for non-breaking change reason\n/**\n * Functionality for managing the current call or start a new call\n * @deprecated CallAdapter interface will be flatten, consider using CallAdapter directly\n * @public\n */\nexport interface CallAdapterCallManagement extends CallAdapterCallOperations {\n  /**\n   * Join the call with microphone initially on/off.\n   * @deprecated Use joinCall(options?:JoinCallOptions) instead.\n   * @param microphoneOn - Whether microphone is initially enabled\n   *\n   * @public\n   */\n  joinCall(microphoneOn?: boolean): Call | undefined;\n\n  /**\n   * Join the call with options bag to set microphone/camera initial state when joining call\n   * true = turn on the device when joining call\n   * false = turn off the device when joining call\n   * 'keep'/undefined = retain devices' precall state\n   *\n   * @param options - param to set microphone/camera initially on/off/use precall state.\n   *\n   * @public\n   */\n  joinCall(options?: JoinCallOptions): Call | undefined;\n  /**\n   * Start the call.\n   *\n   * @param participants - An array of participant ids to join\n   *\n   * @public\n   */\n  startCall(participants: string[], options?: StartCallOptions): Call | undefined;\n}\n\n// TODO: Flatten the adapter structure\n/**\n * {@link CallComposite} Adapter interface.\n *\n * @public\n */\nexport interface CommonCallAdapter extends AdapterState<CallAdapterState>, Disposable, CallAdapterCallOperations, CallAdapterDeviceManagement, CallAdapterSubscribers {\n  /**\n   * Join the call with microphone initially on/off.\n   * @deprecated Use joinCall(options?:JoinCallOptions) instead.\n   * @param microphoneOn - Whether microphone is initially enabled\n   *\n   * @public\n   */\n  joinCall(microphoneOn?: boolean): void;\n  /**\n   * Join the call with options bag to set microphone/camera initial state when joining call\n   * true = turn on the device when joining call\n   * false = turn off the device when joining call\n   * 'keep'/undefined = retain devices' precall state\n   *\n   * @param options - param to set microphone/camera initially on/off/use precall state.\n   *\n   * @public\n   */\n  joinCall(options?: JoinCallOptions): void;\n  /**\n   * Start the call.\n   *\n   * @param participants - An array of participant ids to join\n   *\n   * @public\n   */\n  startCall(participants: string[], options?: StartCallOptions): void;\n  /**\n   * Start the call.\n   * @param participants - An array of {@link @azure/communication-common#CommunicationIdentifier} to be called\n   * @public\n   */\n  startCall(participants: StartCallIdentifier[], options?: StartCallOptions): void;\n}\n\n/**\n *  An Adapter interface specific for Azure Communication identity which extends {@link CommonCallAdapter}.\n *\n * @public\n */\nexport interface CallAdapter extends CommonCallAdapter {\n  /**\n   * Join the call with microphone initially on/off.\n   * @deprecated Use joinCall(options?:JoinCallOptions) instead.\n   * @param microphoneOn - Whether microphone is initially enabled\n   *\n   * @public\n   */\n  joinCall(microphoneOn?: boolean): Call | undefined;\n\n  /**\n   * Join the call with options bag to set microphone/camera initial state when joining call\n   * true = turn on the device when joining call\n   * false = turn off the device when joining call\n   * 'keep'/undefined = retain devices' precall state\n   *\n   * @param options - param to set microphone/camera initially on/off/use precall state.\n   *\n   * @public\n   */\n  joinCall(options?: JoinCallOptions): Call | undefined;\n  /**\n   * Start the call.\n   *\n   * @param participants - An array of participant ids to join\n   *\n   * @public\n   */\n  startCall(participants: string[], options?: StartCallOptions): Call | undefined;\n  /**\n   * Start the call.\n   * @param participants - An array of {@link @azure/communication-common#CommunicationIdentifier} to be called\n   * @public\n   */\n  startCall(participants: StartCallIdentifier[], options?: StartCallOptions): Call | undefined;\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallAdapterState, CallCompositePage, END_CALL_PAGES, StartCallIdentifier } from '../adapter/CallAdapter';\nimport { _isInCall, _isPreviewOn, _isInLobbyOrConnecting } from '@internal/calling-component-bindings';\nimport { CallControlOptions } from '../types/CallControlOptions';\nimport { CallState, RemoteParticipantState } from '@internal/calling-stateful-client';\nimport { isPhoneNumberIdentifier } from '@azure/communication-common';\nimport { AdapterStateModifier, CallAdapterLocator } from '../adapter/AzureCommunicationCallAdapter';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffectsDependency } from '@internal/calling-component-bindings';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffect } from '../adapter/CallAdapter';\nimport { VideoDeviceInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoEffectProcessor } from '@azure/communication-calling';\nimport { CompositeLocale } from '../../localization';\nimport { CallCompositeIcons } from '../../common/icons';\nconst ACCESS_DENIED_TEAMS_MEETING_SUB_CODE = 5854;\nconst REMOTE_PSTN_USER_HUNG_UP = 560000;\nconst REMOVED_FROM_CALL_SUB_CODES = [5000, 5300, REMOTE_PSTN_USER_HUNG_UP];\n/* @conditional-compile-remove(calling-sounds) */\nconst CALL_REJECTED_CODE = 603;\n/* @conditional-compile-remove(rooms) */\n/** @private */\nexport const ROOM_NOT_FOUND_SUB_CODE = 5732;\n/* @conditional-compile-remove(rooms) */\n/** @private */\nexport const ROOM_NOT_VALID_SUB_CODE = 5829;\n/* @conditional-compile-remove(rooms) */\n/** @private */\nexport const NOT_INVITED_TO_ROOM_SUB_CODE = 5828;\n/* @conditional-compile-remove(rooms) */\n/** @private */\nexport const INVITE_TO_ROOM_REMOVED_SUB_CODE = 5317;\n/** @private */\nexport const CALL_TIMEOUT_SUB_CODE = 10004;\n/** @private */\nexport const CALL_TIMEOUT_CODE = 487;\n/** @private */\nexport const BOT_TIMEOUT_CODE = 486;\n/** @private */\nexport const BOT_TIMEOUT_SUB_CODE = 10321;\n\n/**\n * @private\n */\nexport const isCameraOn = (state: CallAdapterState): boolean => {\n  if (state.call) {\n    const stream = state.call.localVideoStreams.find(stream => stream.mediaStreamType === 'Video');\n    return !!stream;\n  } else {\n    if (state.devices.selectedCamera) {\n      const previewOn = _isPreviewOn(state.devices);\n      return previewOn;\n    }\n  }\n  return false;\n};\n\n/**\n * Reduce the set of call controls visible on mobile.\n * For example do not show screenshare button.\n *\n * @private\n */\nexport const reduceCallControlsForMobile = (callControlOptions: CallControlOptions | boolean | undefined): CallControlOptions | false => {\n  if (callControlOptions === false) {\n    return false;\n  }\n\n  // Ensure call controls a valid object.\n  const reduceCallControlOptions = callControlOptions === true ? {} : callControlOptions || {};\n\n  // Set to compressed mode when composite is optimized for mobile\n  reduceCallControlOptions.displayType = 'compact';\n\n  // Do not show screen share button when composite is optimized for mobile unless the developer\n  // has explicitly opted in.\n  if (reduceCallControlOptions.screenShareButton !== true) {\n    reduceCallControlOptions.screenShareButton = false;\n  }\n  return reduceCallControlOptions;\n};\nenum CallEndReasons {\n  LEFT_CALL,\n  ACCESS_DENIED,\n  REMOVED_FROM_CALL,\n}\nconst getCallEndReason = (call: CallState): CallEndReasons => {\n  const remoteParticipantsEndedArray = Array.from(Object.values(call.remoteParticipantsEnded));\n  /**\n   * Handle the special case in a PSTN call where removing the last user kicks the caller out of the call.\n   * The code and subcode is the same as when a user is removed from a teams interop call.\n   * Hence, we look at the last remote participant removed to determine if the last participant removed was a phone number.\n   * If yes, the caller was kicked out of the call, but we need to show them that they left the call.\n   * Note: This check will only work for 1:1 PSTN Calls. The subcode is different for 1:N PSTN calls, and we do not need to handle that case.\n   */\n  if (remoteParticipantsEndedArray.length === 1 && isPhoneNumberIdentifier(remoteParticipantsEndedArray[0].identifier) && call.callEndReason?.subCode !== REMOTE_PSTN_USER_HUNG_UP) {\n    return CallEndReasons.LEFT_CALL;\n  }\n  if (call.callEndReason?.subCode && call.callEndReason.subCode === ACCESS_DENIED_TEAMS_MEETING_SUB_CODE) {\n    return CallEndReasons.ACCESS_DENIED;\n  }\n  if (call.callEndReason?.subCode && REMOVED_FROM_CALL_SUB_CODES.includes(call.callEndReason.subCode)) {\n    return CallEndReasons.REMOVED_FROM_CALL;\n  }\n  if (call.callEndReason) {\n    // No error codes match, assume the user simply left the call regularly\n    return CallEndReasons.LEFT_CALL;\n  }\n  throw new Error('No matching call end reason');\n};\n\n/**\n * Helper function for determine strings and icons for end call page\n * @private\n */\nexport const getEndedCallPageProps = (locale: CompositeLocale, endedCall?: CallState): {\n  title: string;\n  moreDetails?: string;\n  disableStartCallButton: boolean;\n  iconName: keyof CallCompositeIcons;\n} => {\n  let title = locale.strings.call.leftCallTitle;\n  let moreDetails = locale.strings.call.leftCallMoreDetails;\n  let disableStartCallButton = false;\n  let iconName: keyof CallCompositeIcons = 'NoticePageLeftCall';\n  /* @conditional-compile-remove(rooms) */\n  switch (endedCall?.callEndReason?.subCode) {\n    case ROOM_NOT_FOUND_SUB_CODE:\n      if (locale.strings.call.roomNotFoundTitle) {\n        title = locale.strings.call.roomNotFoundTitle;\n        moreDetails = locale.strings.call.roomNotFoundDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageRoomNotFound';\n      }\n      break;\n    case ROOM_NOT_VALID_SUB_CODE:\n      if (locale.strings.call.roomNotValidTitle) {\n        title = locale.strings.call.roomNotValidTitle;\n        moreDetails = locale.strings.call.roomNotValidDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageRoomNotValid';\n      }\n      break;\n    case NOT_INVITED_TO_ROOM_SUB_CODE:\n      if (locale.strings.call.notInvitedToRoomTitle) {\n        title = locale.strings.call.notInvitedToRoomTitle;\n        moreDetails = locale.strings.call.notInvitedToRoomDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageNotInvitedToRoom';\n      }\n      break;\n    case INVITE_TO_ROOM_REMOVED_SUB_CODE:\n      if (locale.strings.call.inviteToRoomRemovedTitle) {\n        title = locale.strings.call.inviteToRoomRemovedTitle;\n        moreDetails = locale.strings.call.inviteToRoomRemovedDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageInviteToRoomRemoved';\n      }\n      break;\n    case CALL_TIMEOUT_SUB_CODE:\n      if (endedCall?.callEndReason?.code === CALL_TIMEOUT_CODE && locale.strings.call.callTimeoutTitle) {\n        title = locale.strings.call.callTimeoutTitle;\n        moreDetails = locale.strings.call.callTimeoutDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageCallTimeout';\n      }\n      break;\n    case BOT_TIMEOUT_SUB_CODE:\n      if (endedCall?.callEndReason?.code === BOT_TIMEOUT_CODE && locale.strings.call.callTimeoutBotTitle) {\n        title = locale.strings.call.callTimeoutBotTitle;\n        moreDetails = locale.strings.call.callTimeoutBotDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageCallTimeout';\n      }\n      break;\n  }\n  /* @conditional-compile-remove(calling-sounds) */\n  switch (endedCall?.callEndReason?.code) {\n    case CALL_REJECTED_CODE:\n      if (locale.strings.call.callRejectedTitle) {\n        title = locale.strings.call.callRejectedTitle;\n        moreDetails = locale.strings.call.callRejectedMoreDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageCallRejected';\n      }\n      break;\n  }\n  return {\n    title,\n    moreDetails,\n    disableStartCallButton,\n    iconName\n  };\n};\n\n/**\n * type definition for conditional-compilation\n */\ntype GetCallCompositePageFunction = ((call: CallState | undefined, previousCall: CallState | undefined) => CallCompositePage) & ((call: CallState | undefined, previousCall: CallState | undefined, /* @conditional-compile-remove(call-transfer) */transferCall?: CallState) => CallCompositePage);\n/**\n * Get the current call composite page based on the current call composite state\n *\n * @param Call - The current call state\n * @param previousCall - The state of the most recent previous call that has ended.\n *\n * @remarks - The previousCall state is needed to determine if the call has ended.\n * When the call ends a new call object is created, and so we must lookback at the\n * previous call state to understand how the call has ended. If there is no previous\n * call we know that this is a fresh call and can display the configuration page.\n *\n * @private\n */\nexport const getCallCompositePage: GetCallCompositePageFunction = (call, previousCall?, transferCall?: CallState, unsupportedBrowserInfo?: {\n  unsupportedBrowserVersionOptedIn?: boolean;\n}): CallCompositePage => {\n  /* @conditional-compile-remove(call-transfer) */\n  if (transferCall !== undefined) {\n    return 'transferring';\n  }\n  if (call) {\n    // Must check for ongoing call *before* looking at any previous calls.\n    // If the composite completes one call and joins another, the previous calls\n    // will be populated, but not relevant for determining the page.\n\n    // `_isInLobbyOrConnecting` needs to be checked first because `_isInCall` also returns true when call is in lobby.\n    if (_isInLobbyOrConnecting(call?.state)) {\n      return 'lobby';\n      // `LocalHold` needs to be checked before `isInCall` since it is also a state that's considered in call.\n    } else if (call?.state === 'LocalHold') {\n      return 'call';\n    } else if (call?.state === 'Disconnecting') {\n      return 'leaving';\n    } else if (_isInCall(call?.state)) {\n      return 'call';\n    } else {\n      // When the call object has been constructed after clicking , but before 'connecting' has been\n      // set on the call object, we continue to show the configuration screen.\n      // The call object does not correctly reflect local device state until `call.state` moves to `connecting`.\n      // Moving to the 'lobby' page too soon leads to components that depend on the `call` object to show incorrect\n      // transitional state.\n      return 'configuration';\n    }\n  }\n  if (previousCall) {\n    const reason = getCallEndReason(previousCall);\n    switch (reason) {\n      case CallEndReasons.ACCESS_DENIED:\n        return 'accessDeniedTeamsMeeting';\n      case CallEndReasons.REMOVED_FROM_CALL:\n        return 'removedFromCall';\n      case CallEndReasons.LEFT_CALL:\n        if (previousCall.diagnostics.network.latest.noNetwork) {\n          return 'joinCallFailedDueToNoNetwork';\n        }\n        return 'leftCall';\n    }\n  }\n\n  // No call state - show starting page (configuration)\n  return 'configuration';\n};\n\n/** @private */\nexport const IsCallEndedPage = (page: CallCompositePage): boolean => END_CALL_PAGES.includes(page);\n\n/**\n * Creates a new call control options object and sets the correct values for disabling\n * the buttons provided in the `disabledControls` array.\n * Returns a new object without changing the original object.\n * @param callControlOptions options for the call control component that need to be modified.\n * @param disabledControls An array of controls to disable.\n * @returns a copy of callControlOptions with disabledControls disabled\n * @private\n */\nexport const disableCallControls = (callControlOptions: CallControlOptions | boolean | undefined, disabledControls: (keyof CallControlOptions)[]): CallControlOptions | boolean | undefined => {\n  if (callControlOptions === false) {\n    return false;\n  }\n  // Ensure we clone the prop if it is an object to ensure we do not mutate the original prop.\n  let newOptions: CallControlOptions | boolean | undefined = (callControlOptions instanceof Object ? ({\n    ...callControlOptions\n  } as CallControlOptions) : callControlOptions) ?? ({} as Partial<CallControlOptions>);\n  if (newOptions === true || newOptions === undefined) {\n    newOptions = disabledControls.reduce((acc, key) => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      // @ts-expect-error TODO: fix noImplicitAny error here\n      // Not solveable at this time due to typescript limitations. The typing is too complex for typescript to\n      // understand. Will need to revisit when either typescript or the calling component bindings are updated.\n      acc[key] = {\n        disabled: true\n      };\n      return acc;\n    }, ({} as Partial<CallControlOptions>));\n  } else {\n    disabledControls.forEach(key => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      // @ts-expect-error refer to above comment\n      if (newOptions[key] !== false) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        // @ts-expect-error refer to above comment\n        newOptions[key] = {\n          disabled: true\n        };\n      }\n    });\n  }\n  return newOptions;\n};\n\n/**\n * Check if a disabled object is provided for a button and returns if the button is disabled.\n * A button is only disabled if is explicitly set to disabled.\n *\n * @param option\n * @returns whether a button is disabled\n * @private\n */\nexport const isDisabled = (option: boolean | {\n  disabled: boolean;\n} | undefined): boolean => {\n  if (option === undefined || typeof option === 'boolean') {\n    return false;\n  }\n  return option.disabled;\n};\n/**\n * Check if we are using safari browser\n * @private\n */\nexport const _isSafari = (environmentInfo: undefined): boolean => {\n  return /^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent);\n};\n\n/**\n * @private\n * This is the util function to create a participant modifier for remote participantList\n * It memoize previous original participant items and only update the changed participant\n * It takes in one modifier function to generate one single participant object, it returns undefined if the object keeps unmodified\n */\nexport const createParticipantModifier = (createModifiedParticipant: (id: string, participant: RemoteParticipantState) => RemoteParticipantState | undefined): AdapterStateModifier => {\n  let previousParticipantState: {\n    [keys: string]: RemoteParticipantState;\n  } | undefined = undefined;\n  let modifiedParticipants: {\n    [keys: string]: RemoteParticipantState;\n  } = {};\n  const memoizedParticipants: {\n    [id: string]: {\n      originalRef: RemoteParticipantState;\n      newParticipant: RemoteParticipantState;\n    };\n  } = {};\n  return (state: CallAdapterState) => {\n    // if root state is the same, we don't need to update the participants\n    if (state.call?.remoteParticipants !== previousParticipantState) {\n      modifiedParticipants = {};\n      const originalParticipants = state.call?.remoteParticipants;\n      for (const key in originalParticipants) {\n        const modifiedParticipant = createModifiedParticipant(key, originalParticipants[key]);\n        if (modifiedParticipant === undefined) {\n          modifiedParticipants[key] = originalParticipants[key];\n          continue;\n        }\n        // Generate the new item if original cached item has been changed\n        if (memoizedParticipants[key]?.originalRef !== originalParticipants[key]) {\n          memoizedParticipants[key] = {\n            newParticipant: modifiedParticipant,\n            originalRef: originalParticipants[key]\n          };\n        }\n\n        // the modified participant is always coming from the memoized cache, whether is was refreshed\n        // from the previous closure or not\n        modifiedParticipants[key] = memoizedParticipants[key].newParticipant;\n      }\n      previousParticipantState = state.call?.remoteParticipants;\n    }\n    return {\n      ...state,\n      call: state.call ? {\n        ...state.call,\n        remoteParticipants: modifiedParticipants\n      } : undefined\n    };\n  };\n};\n\n/* @conditional-compile-remove(video-background-effects) */\n/** @private */\nexport const getBackgroundEffectFromSelectedEffect = (selectedEffect: VideoBackgroundEffect | undefined, VideoBackgroundEffectsDependency: VideoBackgroundEffectsDependency): VideoEffectProcessor | undefined => selectedEffect?.effectName === 'blur' ? VideoBackgroundEffectsDependency.createBackgroundBlurEffect() : selectedEffect?.effectName === 'replacement' ? VideoBackgroundEffectsDependency.createBackgroundReplacementEffect({\n  backgroundImageUrl: selectedEffect.backgroundImageUrl\n}) : undefined;\n\n/**\n * @remarks this logic should mimic the onToggleCamera in the common call handlers.\n * @private\n */\nexport const getSelectedCameraFromAdapterState = (state: CallAdapterState): VideoDeviceInfo | undefined => state.devices.selectedCamera || state.devices.cameras[0];\n\n/**\n * Helper to determine if the adapter has a locator or targetCallees\n * @param locatorOrTargetCallees\n * @returns boolean to determine if the adapter has a locator or targetCallees, true is locator, false is targetCallees\n * @private\n */\nexport const getLocatorOrTargetCallees = (locatorOrTargetCallees: CallAdapterLocator | StartCallIdentifier[]): locatorOrTargetCallees is StartCallIdentifier[] => {\n  return !!Array.isArray(locatorOrTargetCallees);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CommonCallingHandlers } from '@internal/calling-component-bindings';\nimport { CommonProperties, toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { ReactElement } from 'react';\nimport memoizeOne from 'memoize-one';\nimport { CommonCallAdapter } from '..';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundBlurEffect, VideoBackgroundReplacementEffect } from '..';\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { isCameraOn } from '../utils';\nimport { DtmfTone } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport type { BackgroundReplacementConfig, BackgroundBlurConfig } from '@azure/communication-calling';\n/**\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/explicit-function-return-type\nexport const useHandlers = <PropsT,>(_component: (props: PropsT) => ReactElement | null): Pick<CommonCallingHandlers, CommonProperties<CommonCallingHandlers, PropsT>> => {\n  const adapter = useAdapter();\n  const compositeHandlers = createCompositeHandlers(adapter);\n  return compositeHandlers;\n};\nconst createCompositeHandlers = memoizeOne((adapter: CommonCallAdapter): CommonCallingHandlers => {\n  return {\n    onCreateLocalStreamView: async options => {\n      return await adapter.createStreamView(undefined, options);\n    },\n    onCreateRemoteStreamView: async (userId, options) => {\n      return await adapter.createStreamView(userId, options);\n    },\n    onHangUp: async (forEveryone?: boolean) => {\n      await adapter.leaveCall(forEveryone);\n    },\n    onSendDtmfTone: async (dtmfTone: DtmfTone) => {\n      await adapter.sendDtmfTone(dtmfTone);\n    },\n    onRemoveParticipant: async (userId: string) => {\n      if (typeof userId === 'string') {\n        await adapter.removeParticipant(userId);\n      } else {}\n    },\n    /* @conditional-compile-remove(raise-hand) */\n    onRaiseHand: async () => {\n      await adapter.raiseHand();\n    },\n    /* @conditional-compile-remove(raise-hand) */\n    onLowerHand: async () => {\n      await adapter.lowerHand();\n    },\n    /* @conditional-compile-remove(raise-hand) */\n    onToggleRaiseHand: async () => {\n      adapter.getState().call?.raiseHand.localParticipantRaisedHand ? await adapter.lowerHand() : await adapter.raiseHand();\n    },\n    onSelectCamera: async (deviceInfo, options) => {\n      await adapter.setCamera(deviceInfo, options);\n    },\n    onSelectMicrophone: async deviceInfo => {\n      await adapter.setMicrophone(deviceInfo);\n    },\n    onSelectSpeaker: async deviceInfo => {\n      await adapter.setSpeaker(deviceInfo);\n    },\n    onStartCall: (participants, options?) => {\n      const rawIds = participants.map(participant => toFlatCommunicationIdentifier(participant));\n      return adapter.startCall(rawIds, options);\n    },\n    onStartScreenShare: async () => {\n      await adapter.startScreenShare();\n    },\n    onStopScreenShare: async () => {\n      await adapter.stopScreenShare();\n    },\n    onToggleCamera: async options => {\n      isCameraOn(adapter.getState()) ? await adapter.stopCamera() : await adapter.startCamera(options);\n    },\n    onToggleMicrophone: async () => {\n      return adapter.getState().call?.isMuted ? await adapter.unmute() : await adapter.mute();\n    },\n    onToggleScreenShare: async () => {\n      return adapter.getState().call?.isScreenSharingOn ? await adapter.stopScreenShare() : await adapter.startScreenShare();\n    },\n    onStartLocalVideo: async () => {\n      if (adapter.getState().call) {\n        return adapter.startCamera();\n      }\n    },\n    onDisposeLocalStreamView: async () => {\n      return adapter.disposeLocalVideoStreamView();\n    },\n    onDisposeRemoteStreamView: async userId => {\n      return adapter.disposeStreamView(userId);\n    },\n    onDisposeRemoteScreenShareStreamView: async userId => {\n      return adapter.disposeScreenShareStreamView(userId);\n    },\n    onDisposeRemoteVideoStreamView: async userId => {\n      return adapter.disposeRemoteVideoStreamView(userId);\n    },\n    /* @conditional-compile-remove(video-background-effects) */\n    onRemoveVideoBackgroundEffects: async () => {\n      return await adapter.stopVideoBackgroundEffects();\n    },\n    /* @conditional-compile-remove(video-background-effects) */\n    onBlurVideoBackground: async (backgroundBlurConfig?: BackgroundBlurConfig) => {\n      const blurConfig: VideoBackgroundBlurEffect = {\n        effectName: 'blur',\n        ...backgroundBlurConfig\n      };\n      return await adapter.startVideoBackgroundEffect(blurConfig);\n    },\n    /* @conditional-compile-remove(video-background-effects) */\n    onReplaceVideoBackground: async (backgroundReplacementConfig: BackgroundReplacementConfig) => {\n      const replacementConfig: VideoBackgroundReplacementEffect = {\n        effectName: 'replacement',\n        ...backgroundReplacementConfig\n      };\n      return await adapter.startVideoBackgroundEffect(replacementConfig);\n    },\n    /* @conditional-compile-remove(close-captions) */\n    onStartCaptions: async options => {\n      await adapter.startCaptions(options);\n    },\n    /* @conditional-compile-remove(close-captions) */\n    onStopCaptions: async () => {\n      await adapter.stopCaptions();\n    },\n    /* @conditional-compile-remove(close-captions) */\n    onSetSpokenLanguage: async language => {\n      await adapter.setSpokenLanguage(language);\n    },\n    /* @conditional-compile-remove(close-captions) */\n    onSetCaptionLanguage: async language => {\n      await adapter.setCaptionLanguage(language);\n    }\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { _CaptionsSettingsModal, _CaptionsSettingsModalStrings, SpokenLanguageStrings, CaptionLanguageStrings } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { useAdaptedSelector } from '../CallComposite/hooks/useAdaptedSelector';\n/* @conditional-compile-remove(close-captions) */\nimport { useHandlers } from '../CallComposite/hooks/useHandlers';\n/* @conditional-compile-remove(close-captions) */\nimport { useLocale } from '../localization';\n/* @conditional-compile-remove(close-captions) */\nimport { _captionSettingsSelector } from '@internal/calling-component-bindings';\n\n/** @private */\nexport const CaptionsSettingsModal = (props: {\n  /* @conditional-compile-remove(close-captions) */showCaptionsSettingsModal: boolean;\n  /* @conditional-compile-remove(close-captions) */\n  onDismissCaptionsSettings: () => void;\n  /* @conditional-compile-remove(close-captions) */\n  changeCaptionLanguage?: boolean;\n}): JSX.Element => {\n  /* @conditional-compile-remove(close-captions) */\n  const CaptionsSettingsModalProps = useAdaptedSelector(_captionSettingsSelector);\n  /* @conditional-compile-remove(close-captions) */\n  const handlers = useHandlers(_CaptionsSettingsModal);\n  /* @conditional-compile-remove(close-captions) */\n  const strings = useLocale().strings.call;\n  /* @conditional-compile-remove(close-captions) */\n  const modalStrings: _CaptionsSettingsModalStrings = {\n    captionsSettingsModalTitle: strings.captionsSettingsModalTitle,\n    captionsSettingsSpokenLanguageDropdownLabel: strings.captionsSettingsSpokenLanguageDropdownLabel,\n    captionsSettingsCaptionLanguageDropdownLabel: strings.captionsSettingsCaptionLanguageDropdownLabel,\n    captionsSettingsSpokenLanguageDropdownInfoText: strings.captionsSettingsSpokenLanguageDropdownInfoText,\n    captionsSettingsCaptionLanguageDropdownInfoText: strings.captionsSettingsCaptionLanguageDropdownInfoText,\n    captionsSettingsConfirmButtonLabel: strings.captionsSettingsConfirmButtonLabel,\n    captionsSettingsCancelButtonLabel: strings.captionsSettingsCancelButtonLabel,\n    captionsSettingsModalAriaLabel: strings.captionsSettingsModalAriaLabel,\n    captionsSettingsCloseModalButtonAriaLabel: strings.captionsSettingsCloseModalButtonAriaLabel\n  };\n  /* @conditional-compile-remove(close-captions) */\n  const spokenLanguageStrings: SpokenLanguageStrings | undefined = strings.spokenLanguageStrings;\n\n  /* @conditional-compile-remove(close-captions) */\n  const captionLanguageStrings: CaptionLanguageStrings | undefined = strings.captionLanguageStrings;\n\n  /* @conditional-compile-remove(close-captions) */\n  return <_CaptionsSettingsModal {...CaptionsSettingsModalProps} {...handlers} strings={modalStrings} spokenLanguageStrings={spokenLanguageStrings} captionLanguageStrings={captionLanguageStrings} showModal={props.showCaptionsSettingsModal} onDismissCaptionsSettings={props.onDismissCaptionsSettings} changeCaptionLanguage={props.changeCaptionLanguage} />;\n  return <></>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, IButtonStyles, IContextualMenuItemStyles, IStyle } from '@fluentui/react';\nimport { DevicesButtonStyles, ParticipantsButtonStyles } from '@internal/react-components';\nconst MINIMUM_TOUCH_TARGET_HEIGHT_REM = 3;\n\n/** @private */\nexport const controlBarContainerStyles: IStyle = {\n  paddingTop: '0.25rem',\n  paddingBottom: '0.25rem',\n  // @TODO: this should be exposed through a custom CallComposite Theme API that extends the fluent theme with semantic values\n  boxShadow: `\n    0px 6.400000095367432px 14.399999618530273px 0px #00000021;\n    0px 1.2000000476837158px 3.5999999046325684px 0px #0000001A;\n  `\n};\n\n/**\n * @private\n */\nexport const groupCallLeaveButtonStyle = {\n  root: {\n    border: '0.125rem',\n    borderRadius: 2,\n    height: '2.1875rem',\n    width: '6.5625rem'\n  },\n  flexContainer: {\n    flexFlow: 'row'\n  }\n};\n\n/**\n * @private\n */\nexport const groupCallLeaveButtonCompressedStyle = {\n  root: {\n    border: '0',\n    borderRadius: '0.5rem'\n  },\n  flexContainer: {\n    flexFlow: 'row'\n  }\n};\n\n/**\n * Styles that can be applied to ensure flyout items have the minimum touch target size.\n *\n * @private\n */\nexport const buttonFlyoutIncreasedSizeStyles: IContextualMenuItemStyles = {\n  root: {\n    height: `${MINIMUM_TOUCH_TARGET_HEIGHT_REM}rem`,\n    lineHeight: `${MINIMUM_TOUCH_TARGET_HEIGHT_REM}rem`,\n    maxHeight: 'unset',\n    overflow: 'hidden'\n  },\n  linkContent: {\n    height: `${MINIMUM_TOUCH_TARGET_HEIGHT_REM}rem`,\n    lineHeight: `${MINIMUM_TOUCH_TARGET_HEIGHT_REM}rem`,\n    maxHeight: 'unset'\n  },\n  icon: {\n    maxHeight: 'unset',\n    textAlign: 'center'\n  },\n  checkmarkIcon: {\n    lineHeight: '2rem'\n  }\n};\n\n/**\n * @private\n */\nexport const participantButtonWithIncreasedTouchTargets: ParticipantsButtonStyles = {\n  menuStyles: {\n    menuItemStyles: buttonFlyoutIncreasedSizeStyles,\n    participantListStyles: {\n      participantItemStyles: {\n        root: {\n          height: `${MINIMUM_TOUCH_TARGET_HEIGHT_REM}rem`\n        },\n        participantSubMenuItemsStyles: buttonFlyoutIncreasedSizeStyles\n      }\n    }\n  }\n};\n\n/**\n * @private\n */\nexport const devicesButtonWithIncreasedTouchTargets: DevicesButtonStyles = {\n  menuStyles: {\n    menuItemStyles: buttonFlyoutIncreasedSizeStyles\n  }\n};\n\n/**\n * @private\n */\nexport const controlButtonBaseStyle: IButtonStyles = {\n  label: {\n    minWidth: '2.25rem'\n  }\n};\n\n/**\n * @private\n */\nexport const concatButtonBaseStyles = (...styles: IButtonStyles[]): IButtonStyles => {\n  let result = controlButtonBaseStyle;\n  styles.forEach(style => {\n    result = concatStyleSets(result, style);\n  });\n  return result;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { ControlBarButton, ControlBarButtonProps } from '@internal/react-components';\nimport { MoreHorizontal20Filled } from '@fluentui/react-icons';\nconst icon = (): JSX.Element => <MoreHorizontal20Filled key={'chatOnIconKey'} primaryFill=\"currentColor\" />;\n\n/**\n * @private\n */\nexport const MoreButton = (props: ControlBarButtonProps): JSX.Element => {\n  return <ControlBarButton {...props} labelKey={'optionsButtonLabelKey'} showLabel={props.showLabel} onRenderOnIcon={icon} onRenderOffIcon={icon} onClick={props.onClick} data-ui-id={props[('data-ui-id' as keyof ControlBarButtonProps)]} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { ControlBarButtonProps } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { useCallback } from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { IContextualMenuItem } from '@fluentui/react';\n/* @conditional-compile-remove(close-captions) */\nimport { _StartCaptionsButton } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { useMemo } from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { useAdaptedSelector } from '../CallComposite/hooks/useAdaptedSelector';\n/* @conditional-compile-remove(close-captions) */\nimport { useHandlers } from '../CallComposite/hooks/useHandlers';\n/* @conditional-compile-remove(close-captions) */\nimport { buttonFlyoutIncreasedSizeStyles } from '../CallComposite/styles/Buttons.styles';\n/* @conditional-compile-remove(close-captions) */\nimport { useLocale } from '../localization';\n/* @conditional-compile-remove(close-captions) */\nimport { MoreButton } from './MoreButton';\n/* @conditional-compile-remove(close-captions) */\nimport { _startCaptionsButtonSelector } from '@internal/calling-component-bindings';\n/* @conditional-compile-remove(close-captions) */\nimport { _preventDismissOnEvent } from '@internal/acs-ui-common';\n\n/** @private */\nexport interface CaptionsBannerMoreButtonProps extends ControlBarButtonProps {\n  onCaptionsSettingsClick?: () => void;\n}\n\n/**\n *\n * @private\n */\nexport const CaptionsBannerMoreButton = (props: CaptionsBannerMoreButtonProps): JSX.Element => {\n  /* @conditional-compile-remove(close-captions) */\n  const localeStrings = useLocale();\n  /* @conditional-compile-remove(close-captions) */\n  const startCaptionsButtonProps = useAdaptedSelector(_startCaptionsButtonSelector);\n  /* @conditional-compile-remove(close-captions) */\n  const startCaptionsButtonHandlers = useHandlers(_StartCaptionsButton);\n  /* @conditional-compile-remove(close-captions) */\n  const moreButtonStrings = useMemo(() => ({\n    label: localeStrings.strings.call.captionsBannerMoreButtonCallingLabel,\n    tooltipOffContent: localeStrings.strings.call.captionsBannerMoreButtonTooltip\n  }), [localeStrings]);\n\n  /* @conditional-compile-remove(close-captions) */\n  const moreButtonContextualMenuItems: IContextualMenuItem[] = [];\n\n  /* @conditional-compile-remove(close-captions) */\n  const startCaptions = useCallback(async () => {\n    await startCaptionsButtonHandlers.onStartCaptions({\n      spokenLanguage: startCaptionsButtonProps.currentSpokenLanguage\n    });\n  }, [startCaptionsButtonHandlers, startCaptionsButtonProps.currentSpokenLanguage]);\n\n  /* @conditional-compile-remove(close-captions) */\n  moreButtonContextualMenuItems.push({\n    key: 'ToggleCaptionsKey',\n    text: startCaptionsButtonProps.checked ? localeStrings.strings.call.startCaptionsButtonTooltipOnContent : localeStrings.strings.call.startCaptionsButtonTooltipOffContent,\n    onClick: () => {\n      startCaptionsButtonProps.checked ? startCaptionsButtonHandlers.onStopCaptions() : startCaptionsButtonProps.currentSpokenLanguage !== '' ? startCaptions() : props.onCaptionsSettingsClick && props.onCaptionsSettingsClick();\n    },\n    iconProps: {\n      iconName: startCaptionsButtonProps.checked ? 'CaptionsOffIcon' : 'CaptionsIcon',\n      styles: {\n        root: {\n          lineHeight: 0\n        }\n      }\n    },\n    itemProps: {\n      styles: buttonFlyoutIncreasedSizeStyles\n    }\n  });\n  /* @conditional-compile-remove(close-captions) */\n  if (props.onCaptionsSettingsClick) {\n    moreButtonContextualMenuItems.push({\n      key: 'openCaptionsSettingsKey',\n      id: 'common-call-composite-captions-settings-button',\n      text: localeStrings.strings.call.captionsSettingsLabel,\n      onClick: props.onCaptionsSettingsClick,\n      iconProps: {\n        iconName: 'CaptionsSettingsIcon',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      itemProps: {\n        styles: buttonFlyoutIncreasedSizeStyles\n      },\n      disabled: !startCaptionsButtonProps.checked\n    });\n  }\n  /* @conditional-compile-remove(close-captions) */\n  return <MoreButton {...props} data-ui-id=\"captions-banner-more-button\" strings={moreButtonStrings} menuIconProps={{\n    hidden: true\n  }} menuProps={{\n    items: moreButtonContextualMenuItems,\n    calloutProps: {\n      preventDismissOnEvent: _preventDismissOnEvent\n    }\n  }} />;\n  return <></>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { useState, useEffect, useCallback } from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { _CaptionsBanner, _CaptionsBannerStrings, CustomAvatarOptions } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { _DrawerMenu, _DrawerMenuItemProps, _DrawerSurface } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { mergeStyles, Stack } from '@fluentui/react';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsSettingsModal } from './CaptionsSettingsModal';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsBannerMoreButton } from './CaptionsBannerMoreButton';\n/* @conditional-compile-remove(close-captions) */\nimport { useAdaptedSelector } from '../CallComposite/hooks/useAdaptedSelector';\n/* @conditional-compile-remove(close-captions) */\nimport { useHandlers } from '../CallComposite/hooks/useHandlers';\n/* @conditional-compile-remove(close-captions) */\nimport { _captionsBannerSelector } from '@internal/calling-component-bindings';\n\n/* @conditional-compile-remove(close-captions) */\nimport { useLocale } from '../localization';\n/* @conditional-compile-remove(close-captions) */\nimport { AvatarPersona, AvatarPersonaDataCallback } from './AvatarPersona';\n\n/* @conditional-compile-remove(close-captions) */\nconst mobileViewBannerWidth = '90%';\n\n/** @private */\nexport const CaptionsBanner = (props: {\n  isMobile: boolean;\n  /* @conditional-compile-remove(close-captions) */\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n}): JSX.Element => {\n  /* @conditional-compile-remove(close-captions) */\n  const captionsBannerProps = useAdaptedSelector(_captionsBannerSelector);\n  /* @conditional-compile-remove(close-captions) */\n  const handlers = useHandlers(_CaptionsBanner);\n  /* @conditional-compile-remove(close-captions) */\n  const [isCaptionsSettingsOpen, setIsCaptionsSettingsOpen] = useState<boolean>(false);\n  /* @conditional-compile-remove(close-captions) */\n  const onClickCaptionsSettings = (): void => {\n    setIsCaptionsSettingsOpen(true);\n  };\n  /* @conditional-compile-remove(close-captions) */\n  const onDismissCaptionsSettings = (): void => {\n    setIsCaptionsSettingsOpen(false);\n  };\n  /* @conditional-compile-remove(close-captions) */\n  const containerClassName = mergeStyles({\n    position: 'relative'\n  });\n  /* @conditional-compile-remove(close-captions) */\n  const floatingChildClassName = mergeStyles({\n    position: 'absolute',\n    right: 0,\n    top: 0\n  });\n\n  /* @conditional-compile-remove(close-captions) */\n  const strings = useLocale().strings.call;\n\n  /* @conditional-compile-remove(close-captions) */\n  const captionsBannerStrings: _CaptionsBannerStrings = {\n    captionsBannerSpinnerText: strings.captionsBannerSpinnerText\n  };\n  /* @conditional-compile-remove(close-captions) */\n  const onRenderAvatar = useCallback((userId?: string, options?: CustomAvatarOptions) => {\n    return <AvatarPersona userId={userId} {...options} dataProvider={props.onFetchAvatarPersonaData} />;\n  }, [props.onFetchAvatarPersonaData]);\n  /* @conditional-compile-remove(close-captions) */\n  const {\n    innerWidth: width\n  } = window;\n  /* @conditional-compile-remove(close-captions) */\n  const [windowWidth, setWindowWidth] = useState(width);\n  /* @conditional-compile-remove(close-captions) */\n  useEffect(() => {\n    function handleResize(): void {\n      setWindowWidth(window.innerWidth);\n    }\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  /* @conditional-compile-remove(close-captions) */\n  const desktopViewBannerWidth = windowWidth > 620 ? '35rem' : '80%';\n  return <>\n      {/* @conditional-compile-remove(close-captions) */isCaptionsSettingsOpen && <CaptionsSettingsModal showCaptionsSettingsModal={isCaptionsSettingsOpen} onDismissCaptionsSettings={onDismissCaptionsSettings} changeCaptionLanguage />}\n      {/* @conditional-compile-remove(close-captions) */<div className={containerClassName}>\n          <Stack horizontalAlign=\"center\">\n            <Stack.Item style={{\n          width: props.isMobile ? mobileViewBannerWidth : desktopViewBannerWidth\n        }}>\n              <_CaptionsBanner {...captionsBannerProps} {...handlers} onRenderAvatar={onRenderAvatar} formFactor={props.isMobile ? 'compact' : 'default'} strings={captionsBannerStrings} />\n            </Stack.Item>\n          </Stack>\n          {!props.isMobile && captionsBannerProps.isCaptionsOn && <div className={floatingChildClassName}>\n              <CaptionsBannerMoreButton onCaptionsSettingsClick={onClickCaptionsSettings} />\n            </div>}\n        </div>}\n    </>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle } from '@fluentui/react';\n\n/** @private */\nexport type ContainerRectProps = {\n  containerHeight?: number;\n  containerWidth?: number;\n};\n\n/** @private */\nexport const containerDivStyles: IStyle = {\n  position: 'relative',\n  width: '100%',\n  height: '100%'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * This minimum width is to make sure the side pane does not overlap with the composite when the screen is narrow.\n *\n * @private\n */\nexport const compositeMinWidthRem = 30;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Common } from '@internal/acs-ui-common';\nimport { CallingHandlers, getCallingSelector, GetCallingSelector } from '@internal/calling-component-bindings';\nimport { useAdaptedSelector } from './useAdaptedSelector';\nimport { useHandlers } from './useHandlers';\ntype Selector = (state: any, props: any) => any;\n\n/**\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/explicit-function-return-type\nexport const usePropsFor = <Component extends (props: any) => JSX.Element,>(component: Component): GetCallingSelector<Component> extends Selector ? ReturnType<GetCallingSelector<Component>> & Common<CallingHandlers, Parameters<Component>[0]> : Record<string, never> => {\n  const selector = getCallingSelector(component);\n  if (!selector) {\n    throw new Error(\"Can't find the selector for component, please check supported component list\");\n  }\n  return {\n    ...useAdaptedSelector((selector as Selector)),\n    ...useHandlers(component)\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CameraButton, ControlBarButtonStyles } from '@internal/react-components';\n/* @conditional-compile-remove(capabilities) */\nimport { _HighContrastAwareIcon } from '@internal/react-components';\nimport React, { useMemo } from 'react';\nimport { CallControlDisplayType } from '../../../common/types/CommonCallControlOptions';\nimport { usePropsFor } from '../../hooks/usePropsFor';\nimport { concatButtonBaseStyles } from '../../styles/Buttons.styles';\n/* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\nimport { useAdapter } from '../../adapter/CallAdapterProvider';\nimport { IButton } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const Camera = (props: {\n  displayType?: CallControlDisplayType;\n  styles?: ControlBarButtonStyles;\n  splitButtonsForDeviceSelection?: boolean;\n  disabled?: boolean;\n  /* @conditional-compile-remove(video-background-effects) */\n  onClickVideoEffects?: (showVideoEffects: boolean) => void;\n  componentRef?: React.RefObject<IButton>;\n  disableTooltip?: boolean;\n}): JSX.Element => {\n  const cameraButtonProps = usePropsFor(CameraButton);\n  const styles = useMemo(() => concatButtonBaseStyles(props.styles ?? {}), [props.styles]);\n  /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\n  const adapter = useAdapter();\n  /* @conditional-compile-remove(rooms) */\n  const isRoomsCall = adapter.getState().isRoomsCall;\n\n  /* @conditional-compile-remove(capabilities) */\n  const turnVideoOnCapability = adapter.getState().call?.capabilitiesFeature?.capabilities.turnVideoOn;\n  return <CameraButton data-ui-id=\"call-composite-camera-button\" {...cameraButtonProps} showLabel={props.displayType !== 'compact'} styles={styles} enableDeviceSelectionMenu={props.splitButtonsForDeviceSelection} disableTooltip={props.disableTooltip} disabled={cameraButtonProps.disabled || props.disabled || ( /* @conditional-compile-remove(rooms) */isRoomsCall && adapter.getState().call?.role === 'Unknown')}\n  /* @conditional-compile-remove(capabilities) */ onRenderOffIcon={turnVideoOnCapability && !turnVideoOnCapability.isPresent ? () => <_HighContrastAwareIcon disabled={true} iconName={'ControlButtonCameraProhibited'} /> : undefined}\n  /* @conditional-compile-remove(video-background-effects) */ onClickVideoEffects={props.onClickVideoEffects} componentRef={props.componentRef} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ControlBarButtonStyles, DevicesButton } from '@internal/react-components';\n/* @conditional-compile-remove(rooms) */\nimport { DevicesButtonStrings } from '@internal/react-components';\nimport React, { useMemo } from 'react';\nimport { usePropsFor } from '../../hooks/usePropsFor';\nimport { concatButtonBaseStyles, devicesButtonWithIncreasedTouchTargets } from '../../styles/Buttons.styles';\n/* @conditional-compile-remove(rooms) */\nimport { CompositeLocale, useLocale } from '../../../localization';\nimport { _HighContrastAwareIcon } from '@internal/react-components';\nimport { CallControlDisplayType } from '../../../common/types/CommonCallControlOptions';\n/* @conditional-compile-remove(rooms) */\nimport { useAdapter } from '../../adapter/CallAdapterProvider';\n/* @conditional-compile-remove(rooms) */\nimport { ParticipantRole } from '@azure/communication-calling';\n\n/** @private */\nexport const Devices = (props: {\n  displayType?: CallControlDisplayType;\n  increaseFlyoutItemSize?: boolean;\n  styles?: ControlBarButtonStyles;\n  disabled?: boolean;\n}): JSX.Element => {\n  const devicesButtonProps = usePropsFor(DevicesButton);\n  /* @conditional-compile-remove(rooms) */\n  const adapter = useAdapter();\n  /* @conditional-compile-remove(rooms) */\n  const role: ParticipantRole = adapter.getState().call?.role ?? 'Unknown';\n  const augmentedDeviceButtonProps = useMemo(() => ({\n    ...devicesButtonProps,\n    /* @conditional-compile-remove(rooms) */\n    microphones: role === 'Consumer' ? [] : devicesButtonProps.microphones,\n    /* @conditional-compile-remove(rooms) */\n    cameras: role === 'Consumer' ? [] : devicesButtonProps.cameras\n  }), [devicesButtonProps, /* @conditional-compile-remove(rooms) */\n  role]);\n  const styles = useMemo(() => concatButtonBaseStyles(props.increaseFlyoutItemSize ? devicesButtonWithIncreasedTouchTargets : {}, props.styles ?? {}), [props.increaseFlyoutItemSize, props.styles]);\n  /* @conditional-compile-remove(rooms) */\n  const locale = useLocale();\n  /* @conditional-compile-remove(rooms) */\n  const onlyManageSpeakers = role === 'Consumer';\n\n  /* @conditional-compile-remove(rooms) */\n  const onRenderDevicesIcon = (): JSX.Element => {\n    return <_HighContrastAwareIcon disabled={props.disabled} iconName=\"OptionsSpeaker\" />;\n  };\n  return <DevicesButton\n  /* By setting `persistMenu?` to true, we prevent options menu from getting hidden every time a participant joins or leaves. */ persistMenu={true} {...augmentedDeviceButtonProps} showLabel={props.displayType !== 'compact'} styles={styles} data-ui-id=\"calling-composite-devices-button\" disabled={props.disabled}\n  /* @conditional-compile-remove(rooms) */ strings={getLabelFromRole((role as ParticipantRole), locale)}\n  /* @conditional-compile-remove(rooms) */ onRenderIcon={onlyManageSpeakers ? onRenderDevicesIcon : undefined} />;\n};\n\n/* @conditional-compile-remove(rooms) */\nconst getLabelFromRole = (role: ParticipantRole, locale: CompositeLocale): Partial<DevicesButtonStrings> | undefined => {\n  if (role === 'Consumer') {\n    return {\n      label: locale.component.strings.microphoneButton.speakerMenuTitle\n    };\n  }\n  return undefined;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets } from '@fluentui/react';\nimport { ControlBarButtonStyles, EndCallButton } from '@internal/react-components';\nimport React, { useMemo } from 'react';\nimport { CallControlDisplayType } from '../../../common/types/CommonCallControlOptions';\nimport { usePropsFor } from '../../hooks/usePropsFor';\nimport { groupCallLeaveButtonCompressedStyle, groupCallLeaveButtonStyle } from '../../styles/Buttons.styles';\n\n/** @private */\nexport const EndCall = (props: {\n  displayType?: CallControlDisplayType;\n  styles?: ControlBarButtonStyles;\n}): JSX.Element => {\n  const compactMode = props.displayType === 'compact';\n  const hangUpButtonProps = usePropsFor(EndCallButton);\n  const styles = useMemo(() => concatStyleSets(compactMode ? groupCallLeaveButtonCompressedStyle : groupCallLeaveButtonStyle, props.styles ?? {}), [compactMode, props.styles]);\n  return <EndCallButton data-ui-id=\"call-composite-hangup-button\" {...hangUpButtonProps} styles={styles} showLabel={!compactMode} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { CallAdapterState } from '../adapter/CallAdapter';\nimport { useSelectorWithAdaptation } from './useAdaptedSelector';\n\n/**\n * @private\n */\nexport const useSelector = <SelectorT extends (state: CallAdapterState, props: any) => any,>(selector: SelectorT, selectorProps?: Parameters<SelectorT>[1]): ReturnType<SelectorT> => {\n  // use selector with no adaptation\n  return useSelectorWithAdaptation(selector, state => state, selectorProps);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallState as SDKCallStatus, DominantSpeakersInfo } from '@azure/communication-calling';\nimport { ParticipantCapabilities } from '@azure/communication-calling';\nimport { VideoDeviceInfo, AudioDeviceInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangeInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport { ParticipantRole } from '@azure/communication-calling';\nimport { CallState, DeviceManagerState, DiagnosticsCallFeatureState, LocalVideoStreamState, RemoteParticipantState } from '@internal/calling-stateful-client';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsInfo } from '@internal/calling-stateful-client';\nimport { CallAdapterState, CallCompositePage } from '../adapter/CallAdapter';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffect } from '../adapter/CallAdapter';\nimport { _isInCall, _isPreviewOn, _dominantSpeakersWithFlatId } from '@internal/calling-component-bindings';\nimport { AdapterErrors } from '../../common/adapters';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHandState } from '@internal/calling-stateful-client';\nimport { CommunicationIdentifier } from '@azure/communication-common';\n\n/**\n * @private\n */\nexport const getDisplayName = (state: CallAdapterState): string | undefined => state.displayName;\n\n/**\n * @private\n */\nexport const getCallId = (state: CallAdapterState): string | undefined => state.call?.id;\n\n/**\n * @private\n */\nexport const getEndedCall = (state: CallAdapterState): CallState | undefined => state.endedCall;\n\n/**\n * @private\n */\nexport const getCallStatus = (state: CallAdapterState): SDKCallStatus => state.call?.state ?? 'None';\n\n/**\n * @private\n */\nexport const getDeviceManager = (state: CallAdapterState): DeviceManagerState => state.devices;\n\n/**\n * @private\n */\nexport const getIsScreenShareOn = (state: CallAdapterState): boolean => state.call?.isScreenSharingOn ?? false;\n\n/* @conditional-compile-remove(raise-hand) */\n/**\n * @private\n */\nexport const getLocalParticipantRaisedHand = (state: CallAdapterState): RaisedHandState | undefined => state.call?.raiseHand.localParticipantRaisedHand;\n\n/**\n * @private\n */\nexport const getCapabilites = (state: CallAdapterState): ParticipantCapabilities | undefined => state.call?.capabilitiesFeature?.capabilities;\n\n/**\n * @private\n */\nexport const getIsPreviewCameraOn = (state: CallAdapterState): boolean => _isPreviewOn(state.devices);\n\n/**\n * @private\n */\nexport const getMicrophones = (state: CallAdapterState): AudioDeviceInfo[] => state.devices.microphones;\n\n/**\n * @private\n */\nexport const getCameras = (state: CallAdapterState): VideoDeviceInfo[] => state.devices.cameras;\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * @private\n */\nexport const getRole = (state: CallAdapterState): ParticipantRole | undefined => state.call?.role;\n\n/**\n * @private\n */\nexport const getPage = (state: CallAdapterState): CallCompositePage => state.page;\n\n/* @conditional-compile-remove(call-transfer) */\n/**\n * @private\n */\nexport const getTransferCall = (state: CallAdapterState): CallState | undefined => state.acceptedTransferCallState;\n\n/**\n * @private\n */\nexport const getLocalMicrophoneEnabled = (state: CallAdapterState): boolean => state.isLocalPreviewMicrophoneEnabled;\n\n/**\n * @private\n */\nexport const getLocalVideoStreams = (state: CallAdapterState): LocalVideoStreamState[] | undefined => state.call?.localVideoStreams;\n\n/**\n * @private\n */\nexport const getIsTranscriptionActive = (state: CallAdapterState): boolean => !!state.call?.transcription.isTranscriptionActive;\n\n/**\n * @private\n */\nexport const getIsRecordingActive = (state: CallAdapterState): boolean => !!state.call?.recording.isRecordingActive;\n\n/**\n * @private\n */\nexport const getUserFacingDiagnostics = (state: CallAdapterState): DiagnosticsCallFeatureState | undefined => state.call?.diagnostics;\n\n/**\n * @private\n */\nexport const getDominantSpeakerInfo = (state: CallAdapterState): undefined | DominantSpeakersInfo => state.call?.dominantSpeakers;\n\n/**\n * @private\n */\nexport const getRemoteParticipants = (state: CallAdapterState): undefined | {\n  [keys: string]: RemoteParticipantState;\n} => state.call?.remoteParticipants;\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * @private\n */\nexport const getSelectedVideoEffect = (state: CallAdapterState): VideoBackgroundEffect | undefined => state.selectedVideoBackgroundEffect;\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getCaptions = (state: CallAdapterState): CaptionsInfo[] | undefined => {\n  return state.call?.captionsFeature.captions;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getCaptionsStatus = (state: CallAdapterState): boolean | undefined => {\n  return state.call?.captionsFeature.isCaptionsFeatureActive;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getCurrentCaptionLanguage = (state: CallAdapterState): string | undefined => {\n  return state.call?.captionsFeature.currentCaptionLanguage;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getCurrentSpokenLanguage = (state: CallAdapterState): string | undefined => {\n  return state.call?.captionsFeature.currentSpokenLanguage;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getSupportedCaptionLanguages = (state: CallAdapterState): string[] | undefined => {\n  return state.call?.captionsFeature.supportedCaptionLanguages;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/** @private */\nexport const getSupportedSpokenLanguages = (state: CallAdapterState): string[] | undefined => {\n  return state.call?.captionsFeature.supportedSpokenLanguages;\n};\n\n/* @conditional-compile-remove(close-captions) */\n/**\n * @private\n */\nexport const getIsTeamsCall = (state: CallAdapterState): boolean => state.isTeamsCall;\n\n/**\n * @private\n */\nexport const getLatestErrors = (state: CallAdapterState): AdapterErrors => state.latestErrors;\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * @private\n */\nexport const getLatestCapabilitiesChangedInfo = (state: CallAdapterState): CapabilitiesChangeInfo | undefined => {\n  return state.call?.capabilitiesFeature?.latestCapabilitiesChangeInfo;\n};\n\n/**\n * @private\n */\nexport const getTargetCallees = (state: CallAdapterState): CommunicationIdentifier[] | undefined => state.targetCallees;\n\n/**\n * @private\n */\nexport const getStartTime = (state: CallAdapterState): Date | undefined => state.call?.startTime;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _isInLobbyOrConnecting } from '@internal/calling-component-bindings';\nimport { ControlBarButtonStyles, MicrophoneButton } from '@internal/react-components';\n/* @conditional-compile-remove(capabilities) */\nimport { _HighContrastAwareIcon } from '@internal/react-components';\nimport React, { useMemo } from 'react';\nimport { CallControlDisplayType } from '../../../common/types/CommonCallControlOptions';\nimport { usePropsFor } from '../../hooks/usePropsFor';\nimport { useSelector } from '../../hooks/useSelector';\nimport { getCallStatus, getLocalMicrophoneEnabled } from '../../selectors/baseSelectors';\nimport { concatButtonBaseStyles } from '../../styles/Buttons.styles';\n/* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\nimport { useAdapter } from '../../adapter/CallAdapterProvider';\n\n/**\n * @private\n */\nexport const Microphone = (props: {\n  displayType?: CallControlDisplayType;\n  styles?: ControlBarButtonStyles;\n  splitButtonsForDeviceSelection?: boolean;\n  disabled?: boolean;\n  disableTooltip?: boolean;\n}): JSX.Element => {\n  const microphoneButtonProps = usePropsFor(MicrophoneButton);\n  const callStatus = useSelector(getCallStatus);\n  const isLocalMicrophoneEnabled = useSelector(getLocalMicrophoneEnabled);\n  /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(capabilities) */\n  const adapter = useAdapter();\n  /* @conditional-compile-remove(rooms) */\n  const isRoomsCall = adapter.getState().isRoomsCall;\n\n  /* @conditional-compile-remove(capabilities) */\n  const unmuteMicCapability = adapter.getState().call?.capabilitiesFeature?.capabilities.unmuteMic;\n\n  /**\n   * When call is in connecting state, microphone button should be disabled.\n   * This is due to to headless limitation where a call can not be muted/unmuted in lobby.\n   */\n  if (callStatus === 'Connecting') {\n    // Lobby page should show the microphone status that was set on the local preview/configuration\n    // page until the user successfully joins the call.\n    microphoneButtonProps.checked = isLocalMicrophoneEnabled;\n  }\n  const styles = useMemo(() => concatButtonBaseStyles(props.styles ?? {}), [props.styles]);\n  // tab focus on MicrophoneButton on page load\n  return <MicrophoneButton data-ui-id=\"call-composite-microphone-button\" {...microphoneButtonProps} showLabel={props.displayType !== 'compact'} disableTooltip={props.disableTooltip} styles={styles} enableDeviceSelectionMenu={props.splitButtonsForDeviceSelection} disabled={microphoneButtonProps.disabled || props.disabled || ( /* @conditional-compile-remove(rooms) */isRoomsCall && adapter.getState().call?.role === 'Unknown')}\n  /* @conditional-compile-remove(capabilities) */ onRenderOffIcon={unmuteMicCapability && !unmuteMicCapability.isPresent ? () => <_HighContrastAwareIcon disabled={true} iconName={'ControlButtonMicProhibited'} /> : undefined} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ControlBarButtonStyles, ParticipantMenuItemsCallback, ParticipantsButton } from '@internal/react-components';\nimport React, { useMemo } from 'react';\nimport { CallControlDisplayType } from '../../../common/types/CommonCallControlOptions';\nimport { usePropsFor } from '../../hooks/usePropsFor';\nimport { concatButtonBaseStyles, participantButtonWithIncreasedTouchTargets } from '../../styles/Buttons.styles';\n\n/** @private */\nexport const Participants = (props: {\n  // The value of `CallControlOptions.participantsButton`.\n  option?: boolean | {\n    disabled: boolean;\n  };\n  callInvitationURL?: string;\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  displayType?: CallControlDisplayType;\n  increaseFlyoutItemSize?: boolean;\n  styles?: ControlBarButtonStyles;\n  isMobile?: boolean;\n  disabled?: boolean;\n}): JSX.Element => {\n  const participantsButtonProps = usePropsFor(ParticipantsButton);\n  const participantsButtonStyles = useMemo(() => concatButtonBaseStyles(props.increaseFlyoutItemSize ? participantButtonWithIncreasedTouchTargets : {}, props.styles ?? {}), [props.increaseFlyoutItemSize, props.styles]);\n  return <ParticipantsButton data-ui-id=\"call-composite-participants-button\" {...participantsButtonProps} showLabel={props.displayType !== 'compact'} callInvitationURL={props.callInvitationURL} onFetchParticipantMenuItems={props.onFetchParticipantMenuItems} disabled={isDisabled(props.option) || props.disabled} styles={participantsButtonStyles} showParticipantOverflowTooltip={!props.isMobile} />;\n};\nconst isDisabled = (option?: boolean | {\n  disabled: boolean;\n}): boolean => {\n  if (option === undefined || option === true || option === false) {\n    return false;\n  }\n  return option.disabled;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ControlBarButtonStyles, ScreenShareButton } from '@internal/react-components';\nimport React, { useMemo } from 'react';\nimport { CallControlDisplayType } from '../../../common/types/CommonCallControlOptions';\nimport { usePropsFor } from '../../hooks/usePropsFor';\nimport { concatButtonBaseStyles } from '../../styles/Buttons.styles';\n/* @conditional-compile-remove(rooms) */\nimport { useAdapter } from '../../adapter/CallAdapterProvider';\n\n/** @private */\nexport const ScreenShare = (props: {\n  // The value of `CallControlOptions.screenShareButton`.\n  option?: boolean | {\n    disabled: boolean;\n  };\n  displayType?: CallControlDisplayType;\n  styles?: ControlBarButtonStyles;\n  disabled?: boolean;\n}): JSX.Element => {\n  const screenShareButtonProps = usePropsFor(ScreenShareButton);\n  const styles = useMemo(() => concatButtonBaseStyles(props.styles ?? {}), [props.styles]);\n  /* @conditional-compile-remove(rooms) */\n  const adapter = useAdapter();\n  /* @conditional-compile-remove(rooms) */\n  const isRoomsCall = adapter.getState().isRoomsCall;\n  const screenShareButtonDisabled = (): boolean => {\n    /* @conditional-compile-remove(capabilities) */ /* @conditional-compile-remove(PSTN-calls) */\n    return screenShareButtonProps?.disabled ?? isDisabled(props.option);\n    return isDisabled(props.option);\n  };\n  return <ScreenShareButton data-ui-id=\"call-composite-screenshare-button\" {...screenShareButtonProps} showLabel={props.displayType !== 'compact'} disabled={screenShareButtonDisabled() || props.disabled || ( /* @conditional-compile-remove(rooms) */isRoomsCall && adapter.getState().call?.role === 'Unknown')} styles={styles} />;\n};\nconst isDisabled = (option?: boolean | {\n  disabled: boolean;\n}): boolean => {\n  if (option === undefined || option === true || option === false) {\n    return false;\n  }\n  return option.disabled;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle } from '@fluentui/react';\n\n/** @private */\nexport const controlBarContainerStyles: IStyle = {\n  paddingTop: '0.25rem',\n  paddingBottom: '0.25rem'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackItemStyles, IStackStyles, IStyle, mergeStyles } from '@fluentui/react';\nimport { controlBarContainerStyles } from './CallControls.styles';\nconst VIDEO_GALLERY_Z_INDEX = 1;\n// The control bar must be in a higher z-band than the video gallery so the drop shadow appears on top of the video gallery\n/** @private */\nexport const CONTROL_BAR_Z_INDEX = VIDEO_GALLERY_Z_INDEX + 1;\n// The notification container should be in the highest z-band to ensure it shows on top of all other content.\nconst NOTIFICATION_CONTAINER_Z_INDEX = Math.max(CONTROL_BAR_Z_INDEX, VIDEO_GALLERY_Z_INDEX) + 1;\n\n/** @private */\nexport const DRAWER_Z_INDEX = NOTIFICATION_CONTAINER_Z_INDEX + 1;\n\n/**\n * @private\n */\nexport const callControlsContainerStyles = mergeStyles(controlBarContainerStyles, {\n  zIndex: CONTROL_BAR_Z_INDEX\n});\nconst containerStyle: IStyle = {\n  width: '100%',\n  position: 'relative',\n  minHeight: '13rem' // linked to minimum space allocated to media gallery\n};\n\n/**\n * @private\n */\nexport const containerStyleDesktop = mergeStyles({\n  ...containerStyle,\n  minWidth: '30rem'\n});\n\n/**\n * @private\n */\nexport const containerStyleMobile = mergeStyles({\n  ...containerStyle,\n  minWidth: '17.5rem'\n});\n\n/**\n * @private\n */\nexport const galleryParentContainerStyles = (backgroundColor: string): IStackStyles => ({\n  root: {\n    zIndex: VIDEO_GALLERY_Z_INDEX,\n    width: '100%',\n    background: backgroundColor\n  }\n});\n\n/**\n * @private\n */\nexport const mediaGalleryContainerStyles: IStackItemStyles = {\n  root: {\n    height: '100%'\n  }\n};\n\n/**\n * @private\n */\nexport const notificationsContainerStyles: IStackStyles = {\n  root: {\n    width: '100%',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    padding: '1rem',\n    zIndex: NOTIFICATION_CONTAINER_Z_INDEX,\n    pointerEvents: 'none' // to allow the operation of controls underneath the notification container\n  }\n};\n\n/**\n * @private\n */\nexport const bannerNotificationStyles: IStackStyles = {\n  root: {\n    zIndex: NOTIFICATION_CONTAINER_Z_INDEX,\n    pointerEvents: 'auto' // to allow the dismissal or error and warning bars in the notification container\n  }\n};\n\n/**\n * @private\n */\nexport const callArrangementContainerStyles = (verticalControlBar?: boolean): IStackStyles => {\n  return {\n    root: {\n      width: '100%',\n      height: '100%',\n      flexDirection: verticalControlBar ? 'unset' : 'column-reverse' // to allow first initial keyboard focus on ControlBar\n    }\n  };\n};\n\n/**\n * @private\n */\nexport const verticalControlBarStyles: IStackItemStyles = {\n  root: {\n    margin: 'auto'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ControlBarButtonStyles, RaiseHandButton, RaiseHandButtonProps } from '@internal/react-components';\n/* @conditional-compile-remove(raise-hand) */\nimport React, { useMemo } from 'react';\n/* @conditional-compile-remove(raise-hand) */\nimport { CallControlDisplayType } from '../../../common/types/CommonCallControlOptions';\n/* @conditional-compile-remove(raise-hand) */\nimport { usePropsFor } from '../../hooks/usePropsFor';\n/* @conditional-compile-remove(raise-hand) */\nimport { concatButtonBaseStyles } from '../../styles/Buttons.styles';\n/* @conditional-compile-remove(raise-hand) */\nimport { useSelector } from '../../hooks/useSelector';\n/* @conditional-compile-remove(raise-hand) */\nimport { getCallStatus } from '../../selectors/baseSelectors';\n/* @conditional-compile-remove(raise-hand) */\nimport { _isInLobbyOrConnecting } from '@internal/calling-component-bindings';\n\n/* @conditional-compile-remove(raise-hand) */\n/** @private */\nexport const RaiseHand = (props: {\n  // The value of `CallControlOptions.raiseHandButton`.\n  option?: boolean | {\n    disabled: boolean;\n  };\n  displayType?: CallControlDisplayType;\n  styles?: ControlBarButtonStyles;\n  disabled?: boolean;\n}): JSX.Element => {\n  const raiseHandButtonProps = (usePropsFor(RaiseHandButton) as RaiseHandButtonProps);\n  const callStatus = useSelector(getCallStatus);\n  const styles = useMemo(() => concatButtonBaseStyles(props.styles ?? {}), [props.styles]);\n  let raiseHandButtonDisabled = isDisabled(props.option);\n  if (_isInLobbyOrConnecting(callStatus)) {\n    raiseHandButtonDisabled = true;\n  }\n  return <RaiseHandButton data-ui-id=\"call-composite-raisehand-button\" {...raiseHandButtonProps} showLabel={props.displayType !== 'compact'} disabled={raiseHandButtonDisabled || props.disabled} styles={styles} />;\n};\n\n/* @conditional-compile-remove(raise-hand) */\nconst isDisabled = (option?: boolean | {\n  disabled: boolean;\n}): boolean => {\n  if (option === undefined || option === true || option === false) {\n    return false;\n  }\n  return option.disabled;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n// eslint-disable-next-line no-restricted-imports\nimport { Icon, IContextualMenuItem, mergeStyleSets } from '@fluentui/react';\nimport { ControlBarButton, ControlBarButtonProps, _DrawerMenuItemProps } from '@internal/react-components';\nimport React from 'react';\nimport { CallControlDisplayType } from '../types/CommonCallControlOptions';\nimport { CommonCallControlOptions } from '../types/CommonCallControlOptions';\n\n/**\n * Max number of Custom Buttons in primary and secondary ControlBar\n * Does not include existing buttons in the controlBar.\n *\n * @private\n */\nexport const CUSTOM_BUTTON_OPTIONS = {\n  MAX_PRIMARY_DESKTOP_CUSTOM_BUTTONS: 3,\n  MAX_PRIMARY_MOBILE_CUSTOM_BUTTONS: 1,\n  MAX_SECONDARY_DESKTOP_CUSTOM_BUTTONS: 2\n};\n\n/**\n * Custom Buttons array as ControlBarButtons.\n * Return type for {@link generateCustomCallControlBarButton}\n *\n * @public\n */\nexport type CustomButtons = { [key in CustomCallControlButtonPlacement]: typeof ControlBarButton[] | undefined };\n\n/**\n * Arguments for {@link CustomCallControlButtonCallback}.\n *\n * @public\n */\nexport interface CustomCallControlButtonCallbackArgs {\n  /**\n   * Buttons should reduce the size to fit a smaller viewport when `displayType` is `'compact'`.\n   *\n   * @defaultValue `'default'`\n   */\n  displayType?: CallControlDisplayType;\n}\n\n/**\n * Response from {@link CustomCallControlButtonCallback}.\n * Includes the base props necessary to render a {@link ControlBarButton} or {@link DrawerMenuItem}.\n *\n * @public\n */\nexport interface CustomCallControlButtonProps {\n  /**\n   * Where to place the custom button relative to other buttons.\n   */\n  placement: CustomCallControlButtonPlacement;\n  /**\n   * Icon to render. Icon is a non-default icon name that needs to be registered as a\n   * custom icon using registerIcons through fluentui. Examples include icons from the fluentui library\n   */\n  iconName?: string;\n  /**\n   * Calback for when button is clicked\n   */\n  onItemClick?: () => void;\n  /**\n   * Whether the buttons is disabled\n   *\n   * @defaultValue true\n   */\n  disabled?: boolean;\n  /**\n   * Whether the label is displayed or not.\n   * If no value is set, showLabel will follow composite rules\n   */\n  showLabel?: boolean;\n  /**\n   * A unique id set for the standard HTML id attibute\n   */\n  id?: string;\n  /**\n   * Optional strings to override in component\n   */\n  strings?: CustomCallControlButtonStrings;\n}\n\n/**\n * Strings for CustomCallControlButtons\n *\n * @public\n */\nexport interface CustomCallControlButtonStrings {\n  /**\n   * Optional label for the button\n   */\n  label?: string;\n  /**\n   * Text that is shown in Tooltip content\n   */\n  tooltipContent?: string;\n  /**\n   * The aria label of the button for the benefit of screen readers.\n   */\n  ariaLabel?: string;\n  /**\n   * Detailed description of the button for the benefit of screen readers.\n   */\n  ariaDescription?: string;\n}\n\n/**\n * onRenderButton is a custom prop that can be passed to override the default rendering of the button\n * This is useful for custom buttons that need to render more than just an icon and label and is used\n * for CallWithChat button notification badge.\n *\n * @private\n */\nexport type _InternalCustomButtonType = (props: ControlBarButtonProps) => JSX.Element;\n\n/** @private */\nexport const generateCustomCallControlBarButton = (onFetchCustomButtonProps?: CustomCallControlButtonCallback[], displayType?: CallControlDisplayType): CustomButtons => {\n  const allButtonProps = onFetchCustomButtonProps?.map(callback => callback({\n    displayType\n  }));\n  return {\n    primary: generateCustomControlBarButtons('primary', allButtonProps),\n    secondary: generateCustomControlBarButtons('secondary', allButtonProps),\n    overflow: generateCustomControlBarButtons('overflow', allButtonProps)\n  };\n};\n\n/** @private */\nconst generateCustomControlBarButtons = (placement: CustomCallControlButtonPlacement, customButtons?: CustomCallControlButtonProps[]): typeof ControlBarButton[] => customButtons ? customButtons.filter(buttonProps => buttonProps.placement === placement).map((buttonProps, i) => internalProps => {\n  // onRenderButton is a custom prop that can be passed to override the default rendering of the button\n  // This is useful for custom buttons that need to render more than just an icon and label and is used\n  // for CallWithChat button notification badge. However, onRenderButton is not a public prop and is\n  // not documented in the API. This is a temporary solution and will need to be revisited.\n  if ('onRenderButton' in buttonProps) {\n    return (buttonProps['onRenderButton'] as _InternalCustomButtonType)(internalProps);\n  }\n  return <ControlBarButton ariaDescription={buttonProps.strings?.ariaDescription ?? internalProps.ariaDescription} ariaLabel={buttonProps.strings?.ariaLabel ?? buttonProps.strings?.tooltipContent ?? internalProps.ariaLabel} disabled={buttonProps.disabled ?? internalProps.disabled} id={buttonProps.id ?? internalProps.id} key={`${buttonProps.placement}_${i}`} onClick={buttonProps.onItemClick ?? internalProps.onClick} onRenderIcon={() => <Icon iconName={buttonProps.iconName ?? internalProps.iconProps?.iconName ?? 'DefaultCustomButton'} />} showLabel={buttonProps.showLabel ?? internalProps.showLabel} styles={mergeStyleSets(internalProps.styles)} strings={buttonProps.strings} />;\n}) : [];\n\n/** @private */\nconst generateCustomDrawerButtons = (placement: CustomCallControlButtonPlacement, customButtons?: CustomCallControlButtonProps[]): _DrawerMenuItemProps[] => customButtons ? customButtons.filter(buttonProps => buttonProps.placement === placement).map((buttonProps, i): _DrawerMenuItemProps => ({\n  ...buttonProps,\n  disabled: buttonProps.disabled,\n  iconProps: {\n    iconName: buttonProps.iconName ?? 'DefaultCustomButton',\n    styles: {\n      root: {\n        lineHeight: 0\n      }\n    }\n  },\n  id: buttonProps.id,\n  itemKey: `${buttonProps.placement}_${i}`,\n  onItemClick: buttonProps.onItemClick,\n  text: buttonProps.strings?.label\n})) : [];\n\n/** @private */\nexport type CustomDrawerButtons = { [key in CustomCallControlButtonPlacement]: _DrawerMenuItemProps[] };\n\n/** @private */\nexport const generateCustomCallDrawerButtons = (onFetchCustomButtonProps?: CustomCallControlButtonCallback[], displayType?: CallControlDisplayType): CustomDrawerButtons => {\n  const customButtons = onFetchCustomButtonProps?.map(callback => callback({\n    displayType\n  }));\n  return {\n    primary: generateCustomDrawerButtons('primary', customButtons),\n    secondary: generateCustomDrawerButtons('secondary', customButtons),\n    overflow: generateCustomDrawerButtons('overflow', customButtons)\n  };\n};\n\n/** @private */\nexport type CustomDesktopOverflowButtons = { [key in CustomCallControlButtonPlacement]: IContextualMenuItem[] };\n\n/** @private */\nexport const generateCustomCallDesktopOverflowButtons = (onFetchCustomButtonProps?: CustomCallControlButtonCallback[], displayType?: CallControlDisplayType): CustomDesktopOverflowButtons => {\n  const customButtons = onFetchCustomButtonProps?.map(callback => callback({\n    displayType\n  }));\n  return {\n    primary: generateCustomDrawerButtons('primary', customButtons).map(drawerMenuItemToContextualMenuItem),\n    secondary: generateCustomDrawerButtons('secondary', customButtons).map(drawerMenuItemToContextualMenuItem),\n    overflow: generateCustomDrawerButtons('overflow', customButtons).map(drawerMenuItemToContextualMenuItem)\n  };\n};\n\n/** @private */\nexport const drawerMenuItemToContextualMenuItem = (item: _DrawerMenuItemProps): IContextualMenuItem => ({\n  ...item,\n  key: item.itemKey,\n  onClick: item.onItemClick ? ev => {\n    item.onItemClick?.(ev);\n  } : undefined,\n  subMenuProps: item.subMenuProps ? {\n    items: item.subMenuProps.map(drawerMenuItemToContextualMenuItem)\n  } : undefined\n});\n\n/**\n * A callback that returns the props to render a custom {@link ControlBarButton} and {@link DrawerMenuItem}.\n *\n * The response indicates where the custom button should be placed.\n *\n * Performance tip: This callback is only called when either the callback or its arguments change.\n * @public\n */\nexport type CustomCallControlButtonCallback = (args: CustomCallControlButtonCallbackArgs) => CustomCallControlButtonProps;\n\n/**\n * Placement for a custom button injected in the {@link CommonCallControlBar}.\n *\n * 'primary': Place the button(s) on the right end of the center control bar but before the EndCallButton (left end in rtl mode).\n * 'overflow': Place the buttons(s) on the end of the overflow Menu.\n * 'secondary': Place the button(s) on the left end of the side control bar (right in rtl mode).\n *\n * Multiple buttons assigned the same placement are appended in order.\n * E.g., if two buttons are placed in 'secondary', they'll both appear on the left end (right end in rtl mode)\n * in the order provided.\n *\n * Only 'primary' placement works when legacy call control is enabled in call composite\n *\n * @public\n */\nexport type CustomCallControlButtonPlacement = 'primary' | 'overflow' | 'secondary';\n\n/** @private */\nexport const onFetchCustomButtonPropsTrampoline = (options?: CommonCallControlOptions): CustomCallControlButtonCallback[] | undefined => {\n  let response: CustomCallControlButtonCallback[] | undefined = undefined;\n  response = options?.onFetchCustomButtonProps;\n  return response;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { memoizeFunction, Stack, useTheme } from '@fluentui/react';\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */\nimport { IContextualMenuItem } from '@fluentui/react';\nimport { _isInLobbyOrConnecting } from '@internal/calling-component-bindings';\nimport { ControlBar, DevicesButton, ParticipantMenuItemsCallback } from '@internal/react-components';\nimport React, { useMemo } from 'react';\nimport { CallControlOptions } from '../types/CallControlOptions';\nimport { Camera } from './buttons/Camera';\nimport { Devices } from './buttons/Devices';\nimport { EndCall } from './buttons/EndCall';\nimport { Microphone } from './buttons/Microphone';\nimport { Participants } from './buttons/Participants';\nimport { ScreenShare } from './buttons/ScreenShare';\nimport { ContainerRectProps } from '../../common/ContainerRectProps';\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */\nimport { useLocale } from '../../localization';\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */\nimport { MoreButton } from '../../common/MoreButton';\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(raise-hand) */\nimport { usePropsFor } from '../hooks/usePropsFor';\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */\nimport { buttonFlyoutIncreasedSizeStyles } from '../styles/Buttons.styles';\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(rooms) */\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { isDisabled } from '../utils';\nimport { callControlsContainerStyles } from '../styles/CallPage.styles';\nimport { CommonCallAdapter } from '../adapter';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaiseHand } from './buttons/RaiseHand';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaiseHandButton, RaiseHandButtonProps } from '@internal/react-components';\nimport { _generateDefaultDeviceMenuProps } from '@internal/react-components';\nimport { CUSTOM_BUTTON_OPTIONS, generateCustomCallControlBarButton, generateCustomCallDesktopOverflowButtons, onFetchCustomButtonPropsTrampoline } from '../../common/ControlBar/CustomButton';\n/**\n * @private\n */\nexport type CallControlsProps = {\n  onPeopleButtonClicked?: () => void;\n  callInvitationURL?: string;\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  options?: boolean | CallControlOptions;\n  /**\n   * Option to increase the height of the button flyout menu items from 36px to 48px.\n   * Recommended for mobile devices.\n   */\n  increaseFlyoutItemSize?: boolean;\n  isMobile?: boolean;\n  displayVertical?: boolean;\n};\n\n// Enforce a background color on control bar to ensure it matches the composite background color.\nconst controlBarStyles = memoizeFunction((background: string) => ({\n  root: {\n    background: background\n  }\n}));\nconst inferCallControlOptions = (mobileView: boolean, callControlOptions?: boolean | CallControlOptions): CallControlOptions => {\n  if (callControlOptions === false) {\n    return {};\n  }\n  const options = callControlOptions === true || callControlOptions === undefined ? {} : callControlOptions;\n  if (mobileView) {\n    // Set options to always not show screen share button for mobile\n    options.screenShareButton = false;\n  }\n  return options;\n};\n\n/**\n * @private\n */\nexport const CallControls = (props: CallControlsProps & ContainerRectProps): JSX.Element => {\n  const options: CallControlOptions = useMemo(() => inferCallControlOptions(!!props.isMobile, props.options), [props.isMobile, props.options]);\n\n  /* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(rooms) */\n  const adapter = useAdapter();\n\n  /* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */\n  const localeStrings = useLocale();\n  /* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */\n  const moreButtonStrings = useMemo(() => ({\n    label: localeStrings.strings.call.moreButtonCallingLabel,\n    tooltipOffContent: localeStrings.strings.callWithChat.moreDrawerButtonTooltip\n  }), [localeStrings]);\n  /* @conditional-compile-remove(raise-hand) */\n  const raiseHandButtonProps = (usePropsFor(RaiseHandButton) as RaiseHandButtonProps);\n  const devicesButtonProps = usePropsFor(DevicesButton);\n  let numberOfButtons = 0;\n  const screenShareButtonIsEnabled = isEnabled(options?.screenShareButton);\n  if (screenShareButtonIsEnabled) {\n    numberOfButtons++;\n  }\n  const microphoneButtonIsEnabled = isEnabled(options?.microphoneButton);\n  if (microphoneButtonIsEnabled) {\n    numberOfButtons++;\n  }\n  const cameraButtonIsEnabled = isEnabled(options?.cameraButton);\n  if (cameraButtonIsEnabled) {\n    numberOfButtons++;\n  }\n  if (isEnabled(options?.endCallButton)) {\n    numberOfButtons++;\n  }\n  const showParticipantsButtonInControlBar = isEnabled(options?.participantsButton);\n  if (showParticipantsButtonInControlBar) {\n    numberOfButtons++;\n  }\n  const moreButtonContextualMenuItems = (): IContextualMenuItem[] => {\n    const items: IContextualMenuItem[] = [];\n    if (props.isMobile && props.onPeopleButtonClicked && isEnabled(options?.participantsButton)) {\n      items.push({\n        key: 'peopleButtonKey',\n        text: localeStrings.component.strings.participantsButton.label,\n        onClick: () => {\n          if (props.onPeopleButtonClicked) {\n            props.onPeopleButtonClicked();\n          }\n        },\n        iconProps: {\n          iconName: 'ControlButtonParticipantsContextualMenuItem',\n          styles: {\n            root: {\n              lineHeight: 0\n            }\n          }\n        },\n        itemProps: {\n          styles: buttonFlyoutIncreasedSizeStyles\n        },\n        disabled: isDisabled(options?.participantsButton),\n        ['data-ui-id']: 'call-composite-more-menu-people-button'\n      });\n    }\n    return items;\n  };\n  const customDrawerButtons = useMemo(() => generateCustomCallDesktopOverflowButtons(onFetchCustomButtonPropsTrampoline(typeof options === 'object' ? options : undefined), typeof options === 'object' ? options.displayType : undefined), [options]);\n  const moreButtonMenuItems = moreButtonContextualMenuItems();\n  let showMoreButton = isEnabled(options?.moreButton) && moreButtonMenuItems.length > 0;\n  if (showMoreButton) {\n    numberOfButtons++;\n  }\n  const customButtons = useMemo(() => generateCustomCallControlBarButton(onFetchCustomButtonPropsTrampoline(options), options?.displayType), [options]);\n  numberOfButtons += React.Children.count(customButtons['primary']) + React.Children.count(customButtons['secondary']);\n  let showDevicesButtonInControlBar = isEnabled(options?.devicesButton);\n  if (showDevicesButtonInControlBar && (props.isMobile ? numberOfButtons < 5 : true)) {\n    numberOfButtons++;\n  } else {\n    showDevicesButtonInControlBar = false;\n    showMoreButton = isEnabled(options?.moreButton);\n  }\n  /* @conditional-compile-remove(raise-hand) */\n  const raiseHandButtonIsEnabled = isEnabled(options?.raiseHandButton);\n  /* @conditional-compile-remove(raise-hand) */\n  let showRaiseHandButtonInControlBar = raiseHandButtonIsEnabled;\n  /* @conditional-compile-remove(rooms) */\n  const role = adapter.getState().call?.role;\n  /* @conditional-compile-remove(rooms) */\n  const hideRaiseHandButtonInRoomsCall = adapter.getState().isRoomsCall && role && ['Consumer', 'Unknown'].includes(role);\n  /* @conditional-compile-remove(raise-hand) */\n  if (showRaiseHandButtonInControlBar && (props.isMobile ? numberOfButtons < 5 : true)) {\n    numberOfButtons++;\n  } else {\n    // If more button is not present but enabled then replace previous button (devices button) with more button\n    if (!showMoreButton && isEnabled(options?.moreButton)) {\n      showMoreButton = true;\n      showDevicesButtonInControlBar = false;\n    }\n    showRaiseHandButtonInControlBar = false;\n  }\n  if (!showDevicesButtonInControlBar) {\n    const devicesButtonMenu = _generateDefaultDeviceMenuProps(devicesButtonProps, localeStrings.component.strings.devicesButton);\n    moreButtonMenuItems.push({\n      key: 'devicesButtonKey',\n      text: localeStrings.component.strings.devicesButton.label,\n      iconProps: {\n        iconName: 'ControlButtonOptions',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      subMenuProps: devicesButtonMenu,\n      ['data-ui-id']: 'call-composite-more-menu-devices-button'\n    });\n  }\n\n  /* @conditional-compile-remove(raise-hand) */\n  if (!showRaiseHandButtonInControlBar && /* @conditional-compile-remove(rooms) */!hideRaiseHandButtonInRoomsCall) {\n    moreButtonMenuItems.push({\n      key: 'raiseHandButtonKey',\n      text: raiseHandButtonProps.checked ? localeStrings.component.strings.raiseHandButton.onLabel : localeStrings.component.strings.raiseHandButton.offLabel,\n      onClick: () => {\n        if (raiseHandButtonProps.onToggleRaiseHand) {\n          raiseHandButtonProps.onToggleRaiseHand();\n        }\n      },\n      iconProps: {\n        iconName: 'RaiseHandContextualMenuItem',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      itemProps: {\n        styles: buttonFlyoutIncreasedSizeStyles\n      },\n      disabled: isDisabled(options?.raiseHandButton),\n      ['data-ui-id']: 'call-composite-more-menu-raise-hand-button'\n    });\n  }\n\n  // Custom Buttons in More Button Menu should always be the last items pushed into the moreButtonMenuItems array\n  if (customDrawerButtons['primary']) {\n    customDrawerButtons['primary'].slice(props.isMobile ? CUSTOM_BUTTON_OPTIONS.MAX_PRIMARY_MOBILE_CUSTOM_BUTTONS : CUSTOM_BUTTON_OPTIONS.MAX_PRIMARY_DESKTOP_CUSTOM_BUTTONS).forEach(element => {\n      moreButtonMenuItems.push({\n        itemProps: {\n          styles: buttonFlyoutIncreasedSizeStyles\n        },\n        ...element\n      });\n    });\n  }\n  if (customDrawerButtons['secondary']) {\n    customDrawerButtons['secondary'].forEach(element => {\n      moreButtonMenuItems.push({\n        itemProps: {\n          styles: buttonFlyoutIncreasedSizeStyles\n        },\n        ...element\n      });\n    });\n  }\n  if (customDrawerButtons['overflow']) {\n    customDrawerButtons['overflow'].forEach(element => {\n      moreButtonMenuItems.push({\n        itemProps: {\n          styles: buttonFlyoutIncreasedSizeStyles\n        },\n        ...element\n      });\n    });\n  }\n  const theme = useTheme();\n\n  // when props.options is false then we want to hide the whole control bar.\n  if (props.options === false) {\n    return <></>;\n  }\n  return <Stack horizontalAlign=\"center\" className={callControlsContainerStyles}>\n      <Stack.Item>\n        {/*\n            Note: We use the layout=\"horizontal\" instead of dockedBottom because of how we position the\n            control bar. The control bar exists in a Stack below the MediaGallery. The MediaGallery is\n            set to grow and fill the remaining space not taken up by the ControlBar. If we were to use\n            dockedBottom it has position absolute and would therefore float on top of the media gallery,\n            occluding some of its content.\n         */}\n        <ControlBar layout={props.displayVertical ? 'vertical' : 'horizontal'} styles={controlBarStyles(theme.semanticColors.bodyBackground)}>\n          {microphoneButtonIsEnabled && <Microphone displayType={options?.displayType} disabled={isDisabled(options?.microphoneButton)} />}\n          {cameraButtonIsEnabled && <Camera displayType={options?.displayType} disabled={isDisabled(options?.cameraButton)} />}\n          {}\n          {/* @conditional-compile-remove(raise-hand) */showRaiseHandButtonInControlBar && /* @conditional-compile-remove(rooms) */!hideRaiseHandButtonInRoomsCall && <RaiseHand displayType={options?.displayType} />}\n          {screenShareButtonIsEnabled && <ScreenShare option={options?.screenShareButton} displayType={options?.displayType} disabled={isDisabled(options?.screenShareButton)} />}\n          {showParticipantsButtonInControlBar && <Participants option={options?.participantsButton} callInvitationURL={props.callInvitationURL} onFetchParticipantMenuItems={props.onFetchParticipantMenuItems} displayType={options?.displayType} increaseFlyoutItemSize={props.increaseFlyoutItemSize} isMobile={props.isMobile} disabled={isDisabled(options?.participantsButton)} />}\n          {showDevicesButtonInControlBar && <Devices displayType={options?.displayType} increaseFlyoutItemSize={props.increaseFlyoutItemSize} disabled={isDisabled(options?.devicesButton)} />}\n          {customButtons['primary']?.slice(0, props.isMobile ? CUSTOM_BUTTON_OPTIONS.MAX_PRIMARY_MOBILE_CUSTOM_BUTTONS : CUSTOM_BUTTON_OPTIONS.MAX_PRIMARY_DESKTOP_CUSTOM_BUTTONS).map((CustomButton, i) => {\n          return <CustomButton key={`primary-custom-button-${i}`}\n          // styles={commonButtonStyles}\n          showLabel={options?.displayType !== 'compact'} disableTooltip={props.isMobile} />;\n        })}\n          {/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */\n        showMoreButton && <MoreButton disableTooltip={props.isMobile} data-ui-id=\"common-call-composite-more-button\" strings={moreButtonStrings} menuIconProps={{\n          hidden: true\n        }} menuProps={{\n          items: moreButtonMenuItems\n        }} showLabel={options?.displayType !== 'compact'} />}\n          {isEnabled(options?.endCallButton) && <EndCall displayType={options?.displayType} />}\n        </ControlBar>\n      </Stack.Item>\n    </Stack>;\n};\nconst isEnabled = (option: unknown): boolean => option !== false;\n\n/** @private */\nexport const isRoomsCallTrampoline = (adapter: CommonCallAdapter): boolean => {\n  /* @conditional-compile-remove(rooms) */\n  return adapter.getState().isRoomsCall;\n  return false;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useMemo } from 'react';\nimport { ControlBarButton, ControlBarButtonProps, ControlBarButtonStyles, useTheme } from '@internal/react-components';\nimport { concatStyleSets } from '@fluentui/react';\nimport { CallCompositeIcon } from '../icons';\nconst icon = (): JSX.Element => <CallCompositeIcon iconName={'ControlBarPeopleButton'} />;\n\n/**\n * @private\n */\nexport const PeopleButton = (props: ControlBarButtonProps): JSX.Element => {\n  const {\n    strings,\n    onRenderOnIcon,\n    onRenderOffIcon,\n    onClick\n  } = props;\n  const theme = useTheme();\n  const styles: ControlBarButtonStyles = useMemo(() => concatStyleSets({\n    rootChecked: {\n      background: theme.palette.neutralLight\n    }\n  }, props.styles ?? {}), [props.styles, theme.palette.neutralLight]);\n  return <ControlBarButton {...props} strings={strings} labelKey={'peopleButtonLabelKey'} onRenderOnIcon={onRenderOnIcon ?? icon} onRenderOffIcon={onRenderOffIcon ?? icon} onClick={onClick} styles={styles} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { useLocale } from '../../localization/LocalizationProvider';\nimport { CallWithChatCompositeStrings } from '../Strings';\n\n/**\n * The hook to bypass limitation of conditional build for CallWithChatComposite\n * Remove this and use useLocale() instead when merge CallWithChatComposite from beta\n *\n * @private\n */\nexport const useCallWithChatCompositeStrings = (): CallWithChatCompositeStrings => {\n  const locale = useLocale();\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return ((locale.strings as any).callWithChat as CallWithChatCompositeStrings);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport * as reselect from 'reselect';\nimport { getLocalVideoStreams, getRemoteParticipants } from './baseSelectors';\n\n/**\n * @private\n */\nexport const mediaGallerySelector = reselect.createSelector([getLocalVideoStreams], localVideoStreams => {\n  return {\n    isVideoStreamOn: !!localVideoStreams?.find(stream => stream.mediaStreamType === 'Video')?.view?.target\n  };\n});\n\n/**\n * Custom selector for this hook to retrieve all the participants that are currently\n * connected to the call.\n */\nexport const getRemoteParticipantsConnectedSelector = reselect.createSelector([getRemoteParticipants], remoteParticipants => {\n  const participants = Object.values(remoteParticipants ?? {});\n  return participants.filter(p => p.state === 'Connected');\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { toFlatCommunicationIdentifier, _formatString } from '@internal/acs-ui-common';\nimport { RemoteParticipantState } from '@internal/calling-stateful-client';\nimport { useMemo, useRef, useState } from 'react';\nimport { useLocale } from '../../localization';\nimport { useSelector } from '../hooks/useSelector';\nimport { getRemoteParticipantsConnectedSelector } from '../selectors/mediaGallerySelector';\nimport { CommunicationIdentifier, isMicrosoftTeamsAppIdentifier, isPhoneNumberIdentifier } from '@azure/communication-common';\ntype ParticipantChangedAnnouncmentStrings = {\n  participantJoinedNoticeString: string;\n  twoParticipantJoinedNoticeString: string;\n  threeParticipantJoinedNoticeString: string;\n  participantLeftNoticeString: string;\n  twoParticipantLeftNoticeString: string;\n  threeParticipantLeftNoticeString: string;\n  unnamedParticipantString: string;\n  manyParticipantsJoined: string;\n  manyParticipantsLeft: string;\n  manyUnnamedParticipantsJoined: string;\n  manyUnnamedParticipantsLeft: string;\n};\n\n/**\n * sets the announcement string whenever a Participant comes or goes from a call to be\n * used by the system narrator.\n *\n * @returns string to be used by the narrator and Announcer component\n *\n * @internal\n */\nexport const useParticipantChangedAnnouncement = (): string => {\n  const locale = useLocale().strings.call;\n  const strings = useMemo(() => {\n    return {\n      participantJoinedNoticeString: locale.participantJoinedNoticeString,\n      twoParticipantJoinedNoticeString: locale.twoParticipantJoinedNoticeString,\n      threeParticipantJoinedNoticeString: locale.threeParticipantJoinedNoticeString,\n      participantLeftNoticeString: locale.participantLeftNoticeString,\n      twoParticipantLeftNoticeString: locale.twoParticipantLeftNoticeString,\n      threeParticipantLeftNoticeString: locale.threeParticipantLeftNoticeString,\n      unnamedParticipantString: locale.unnamedParticipantString,\n      manyParticipantsJoined: locale.manyParticipantsJoined,\n      manyParticipantsLeft: locale.manyParticipantsLeft,\n      manyUnnamedParticipantsJoined: locale.manyUnnamedParticipantsJoined,\n      manyUnnamedParticipantsLeft: locale.manyUnnamedParticipantsLeft\n    };\n  }, [locale]);\n  const [announcerString, setAnnouncerString] = useState<string>('');\n  const currentParticipants = useSelector(getRemoteParticipantsConnectedSelector);\n  /**\n   * We want to use a useRef here since we want to not fire this hook based on the previous participants\n   * this allows this value to be used in the hook without being in the dependency array.\n   *\n   * Note: By definition if this hook is used in another component it is not pure anymore.\n   */\n  const previousParticipants = useRef<RemoteParticipantState[]>(currentParticipants);\n  const resetAnnoucement = (string: string): void => {\n    setAnnouncerString(string);\n  };\n  useMemo(() => {\n    const currentIds = currentParticipants.map(p => toFlatCommunicationIdentifier(p.identifier));\n    const previousIds = previousParticipants.current.map(p => toFlatCommunicationIdentifier(p.identifier));\n    const whoJoined = currentParticipants.filter(p => !previousIds.includes(toFlatCommunicationIdentifier(p.identifier)));\n    const whoLeft = previousParticipants.current.filter(p => !currentIds.includes(toFlatCommunicationIdentifier(p.identifier)));\n    if (whoJoined.length > 0) {\n      resetAnnoucement(createAnnouncementString('joined', whoJoined, strings));\n    }\n    if (whoLeft.length > 0) {\n      resetAnnoucement(createAnnouncementString('left', whoLeft, strings));\n    }\n    // Update cached value at the end.\n    previousParticipants.current = currentParticipants;\n  }, [currentParticipants, strings]);\n  return announcerString;\n};\n\n/**\n * Generates the announcement string for when a participant joins or leaves a call.\n */\nexport const createAnnouncementString = (direction: 'joined' | 'left', participants: RemoteParticipantState[], strings: ParticipantChangedAnnouncmentStrings): string => {\n  /**\n   * If there are no participants return empty string.\n   */\n  if (participants.length === 0) {\n    return '';\n  }\n  /**\n   * Filter participants into two arrays to put all the unnamed participants at the back of the\n   * names being announced.\n   */\n  const unnamedParticipants = participants.filter(p => !p.displayName);\n  const namedParicipants = participants.filter(p => p.displayName);\n  const sortedParticipants = namedParicipants.concat(unnamedParticipants);\n\n  /**\n   * if there are only unnamed participants present in the array announce a special unnamed participants\n   * only string.\n   */\n  if (sortedParticipants.filter(p => p.displayName).length === 0 && sortedParticipants.length > 1) {\n    return _formatString(direction === 'joined' ? strings.manyUnnamedParticipantsJoined : strings.manyUnnamedParticipantsLeft, {\n      numOfParticipants: (sortedParticipants.length - 1).toString()\n    });\n  }\n  const participantNames = sortedParticipants.map(p => p.displayName ?? strings.unnamedParticipantString);\n  switch (sortedParticipants.length) {\n    case 1:\n      return _formatString(direction === 'joined' ? strings.participantJoinedNoticeString : strings.participantLeftNoticeString, {\n        displayName: participantNames[0]\n      });\n    case 2:\n      return _formatString(direction === 'joined' ? strings.twoParticipantJoinedNoticeString : strings.twoParticipantLeftNoticeString, {\n        displayName1: participantNames[0],\n        displayName2: participantNames[1]\n      });\n    case 3:\n      return _formatString(direction === 'joined' ? strings.threeParticipantJoinedNoticeString : strings.threeParticipantLeftNoticeString, {\n        displayName1: participantNames[0],\n        displayName2: participantNames[1],\n        displayName3: participantNames[2]\n      });\n  }\n\n  /**\n   * If we have more than 3 participants joining we need to do something more to announce them\n   * appropriately.\n   *\n   * We don't want to announce every name when more than 3 participants join at once so\n   * we parse out the first 3 names we have and announce those with the number of others.\n   */\n\n  const numberOfExtraParticipants = sortedParticipants.length - 3;\n  return _formatString(direction === 'joined' ? strings.manyParticipantsJoined : strings.manyParticipantsLeft, {\n    displayName1: sortedParticipants[0].displayName ?? strings.unnamedParticipantString,\n    displayName2: sortedParticipants[1].displayName ?? strings.unnamedParticipantString,\n    displayName3: sortedParticipants[2].displayName ?? strings.unnamedParticipantString,\n    numOfParticipants: numberOfExtraParticipants.toString()\n  });\n};\n\n/**\n * determines if the media gallery should be replaced by the dtmf dialer\n * @param callees Target callees to determine if the dtmf dialer should be shown\n * @param remoteParticipants Remote participants to determine if the dtmf dialer should be shown if there are participants in the call\n * when joining\n * @returns whether the dialer should be the gallery content or not\n */\nexport const showDtmfDialer = (callees?: CommunicationIdentifier[], remoteParticipants?: RemoteParticipantState[]): boolean => {\n  let showDtmfDialer = false;\n  callees?.forEach(callee => {\n    if (isMicrosoftTeamsAppIdentifier(callee) || isPhoneNumberIdentifier(callee)) {\n      showDtmfDialer = true;\n    }\n  });\n  if (remoteParticipants) {\n    remoteParticipants.forEach(participant => {\n      if (!('phoneNumber' in participant.identifier || 'teamsAppId' in participant.identifier)) {\n        showDtmfDialer = false;\n      }\n    });\n  }\n  return showDtmfDialer;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IContextualMenuItem } from '@fluentui/react';\nimport { ControlBarButtonProps } from '@internal/react-components';\nimport { VideoGalleryLayout } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { _StartCaptionsButton } from '@internal/react-components';\nimport React from 'react';\nimport { useState } from 'react';\n/*@conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */\nimport { useMemo, useCallback } from 'react';\n/*@conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */\nimport { buttonFlyoutIncreasedSizeStyles } from '../../CallComposite/styles/Buttons.styles';\nimport { MoreButton } from '../MoreButton';\n/*@conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */\nimport { useLocale } from '../../localization';\n/* @conditional-compile-remove(control-bar-button-injection) */\nimport { CommonCallControlOptions } from '../types/CommonCallControlOptions';\n/* @conditional-compile-remove(control-bar-button-injection) */\nimport { CUSTOM_BUTTON_OPTIONS, generateCustomCallDesktopOverflowButtons, onFetchCustomButtonPropsTrampoline } from './CustomButton';\n/* @conditional-compile-remove(close-captions) */\nimport { useHandlers } from '../../CallComposite/hooks/useHandlers';\n/* @conditional-compile-remove(close-captions) */\nimport { _startCaptionsButtonSelector } from '@internal/calling-component-bindings';\n/* @conditional-compile-remove(close-captions) */\nimport { useAdaptedSelector } from '../../CallComposite/hooks/useAdaptedSelector';\nimport { _preventDismissOnEvent } from '@internal/acs-ui-common';\nimport { showDtmfDialer } from '../../CallComposite/utils/MediaGalleryUtils';\nimport { useSelector } from '../../CallComposite/hooks/useSelector';\nimport { getTargetCallees } from '../../CallComposite/selectors/baseSelectors';\n\n/** @private */\nexport interface DesktopMoreButtonProps extends ControlBarButtonProps {\n  disableButtonsForHoldScreen?: boolean;\n  onClickShowDialpad?: () => void;\n  /* @conditional-compile-remove(close-captions) */\n  isCaptionsSupported?: boolean;\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  callControls?: boolean | CommonCallControlOptions;\n  onCaptionsSettingsClick?: () => void;\n  onUserSetOverflowGalleryPositionChange?: (position: 'Responsive' | 'horizontalTop') => void;\n  onUserSetGalleryLayout?: (layout: VideoGalleryLayout) => void;\n  userSetGalleryLayout?: VideoGalleryLayout;\n  onSetDialpadPage?: () => void;\n  dtmfDialerPresent?: boolean;\n}\n\n/**\n *\n * @private\n */\nexport const DesktopMoreButton = (props: DesktopMoreButtonProps): JSX.Element => {\n  /*@conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */\n  const localeStrings = useLocale();\n  /* @conditional-compile-remove(close-captions) */\n  const startCaptionsButtonProps = useAdaptedSelector(_startCaptionsButtonSelector);\n  /* @conditional-compile-remove(close-captions) */\n  const startCaptionsButtonHandlers = useHandlers(_StartCaptionsButton);\n  /* @conditional-compile-remove(close-captions) */\n  const startCaptions = useCallback(async () => {\n    await startCaptionsButtonHandlers.onStartCaptions({\n      spokenLanguage: startCaptionsButtonProps.currentSpokenLanguage\n    });\n  }, [startCaptionsButtonHandlers, startCaptionsButtonProps.currentSpokenLanguage]);\n  const [focusedContentOn, setFocusedContentOn] = useState<boolean>(false);\n  const [previousLayout, setPreviousLayout] = useState<VideoGalleryLayout>(props.userSetGalleryLayout ?? 'floatingLocalVideo');\n  const callees = useSelector(getTargetCallees);\n  const allowDtmfDialer = showDtmfDialer(callees);\n  const [dtmfDialerChecked, setDtmfDialerChecked] = useState<boolean>(props.dtmfDialerPresent ?? false);\n\n  /* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */\n  const moreButtonStrings = useMemo(() => ({\n    label: localeStrings.strings.call.moreButtonCallingLabel,\n    tooltipOffContent: localeStrings.strings.callWithChat.moreDrawerButtonTooltip\n  }), [localeStrings]);\n  const moreButtonContextualMenuItems: IContextualMenuItem[] = [];\n\n  /* @conditional-compile-remove(close-captions) */\n  const menuSubIconStyleSet = {\n    root: {\n      height: 'unset',\n      lineHeight: '100%',\n      width: '1.25rem'\n    }\n  };\n  // is captions feature is active\n  /* @conditional-compile-remove(close-captions) */\n  if (props.isCaptionsSupported) {\n    const captionsContextualMenuItems: IContextualMenuItem[] = [];\n    moreButtonContextualMenuItems.push({\n      key: 'liveCaptionsKey',\n      id: 'common-call-composite-captions-button',\n      text: localeStrings.strings.call.liveCaptionsLabel,\n      iconProps: {\n        iconName: 'CaptionsIcon',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      itemProps: {\n        styles: buttonFlyoutIncreasedSizeStyles\n      },\n      disabled: props.disableButtonsForHoldScreen,\n      subMenuProps: {\n        id: 'captions-contextual-menu',\n        items: captionsContextualMenuItems,\n        calloutProps: {\n          preventDismissOnEvent: _preventDismissOnEvent\n        }\n      },\n      submenuIconProps: {\n        iconName: 'HorizontalGalleryRightButton',\n        styles: menuSubIconStyleSet\n      }\n    });\n    captionsContextualMenuItems.push({\n      key: 'ToggleCaptionsKey',\n      id: 'common-call-composite-captions-toggle-button',\n      text: startCaptionsButtonProps.checked ? localeStrings.strings.call.startCaptionsButtonTooltipOnContent : localeStrings.strings.call.startCaptionsButtonTooltipOffContent,\n      onClick: () => {\n        startCaptionsButtonProps.checked ? startCaptionsButtonHandlers.onStopCaptions() : startCaptionsButtonProps.currentSpokenLanguage !== '' ? startCaptions() : props.onCaptionsSettingsClick && props.onCaptionsSettingsClick();\n      },\n      iconProps: {\n        iconName: startCaptionsButtonProps.checked ? 'CaptionsOffIcon' : 'CaptionsIcon',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      itemProps: {\n        styles: buttonFlyoutIncreasedSizeStyles\n      },\n      disabled: props.disableButtonsForHoldScreen\n    });\n    if (props.onCaptionsSettingsClick) {\n      captionsContextualMenuItems.push({\n        key: 'openCaptionsSettingsKey',\n        id: 'common-call-composite-captions-settings-button',\n        text: localeStrings.strings.call.captionsSettingsLabel,\n        onClick: props.onCaptionsSettingsClick,\n        iconProps: {\n          iconName: 'CaptionsSettingsIcon',\n          styles: {\n            root: {\n              lineHeight: 0\n            }\n          }\n        },\n        itemProps: {\n          styles: buttonFlyoutIncreasedSizeStyles\n        },\n        disabled: props.disableButtonsForHoldScreen || !startCaptionsButtonProps.checked\n      });\n    }\n  }\n  const dtmfDialerScreenOption = {\n    key: 'dtmfDialerScreenKey',\n    itemProps: {\n      styles: buttonFlyoutIncreasedSizeStyles\n    },\n    text: !dtmfDialerChecked ? localeStrings.strings.call.dtmfDialerMoreButtonLabelOn : localeStrings.strings.call.dtmfDialerMoreButtonLabelOff,\n    onClick: () => {\n      props.onSetDialpadPage && props.onSetDialpadPage();\n      setDtmfDialerChecked(!dtmfDialerChecked);\n    },\n    iconProps: {\n      iconName: 'DtmfDialpadButton',\n      styles: {\n        root: {\n          lineHeight: 0\n        }\n      }\n    }\n  };\n  /**\n   * Only render the dtmf dialer if the dialpad for PSTN calls is not present\n   */\n  if (props.onSetDialpadPage && allowDtmfDialer) {\n    moreButtonContextualMenuItems.push(dtmfDialerScreenOption);\n  }\n  if (props.onUserSetOverflowGalleryPositionChange) {\n    const galleryOptions = {\n      key: 'overflowGalleryPositionKey',\n      iconProps: {\n        iconName: 'GalleryOptions',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      itemProps: {\n        styles: buttonFlyoutIncreasedSizeStyles\n      },\n      submenuIconProps: {\n        styles: menuSubIconStyleSet\n      },\n      text: localeStrings.strings.call.moreButtonGalleryControlLabel,\n      disabled: props.disableButtonsForHoldScreen,\n      subMenuProps: {\n        items: [{\n          key: 'dynamicSelectionKey',\n          text: localeStrings.strings.call.moreButtonGalleryFloatingLocalLayoutLabel,\n          canCheck: true,\n          itemProps: {\n            styles: buttonFlyoutIncreasedSizeStyles\n          },\n          isChecked: props.userSetGalleryLayout === 'floatingLocalVideo',\n          onClick: () => {\n            props.onUserSetGalleryLayout && props.onUserSetGalleryLayout('floatingLocalVideo');\n            setFocusedContentOn(false);\n          },\n          iconProps: {\n            iconName: 'FloatingLocalVideoGalleryLayout',\n            styles: {\n              root: {\n                lineHeight: 0\n              }\n            }\n          }\n        }, {\n          key: 'speakerSelectionKey',\n          text: localeStrings.strings.call.moreButtonGallerySpeakerLayoutLabel,\n          canCheck: true,\n          itemProps: {\n            styles: buttonFlyoutIncreasedSizeStyles\n          },\n          isChecked: props.userSetGalleryLayout === 'speaker',\n          onClick: () => {\n            props.onUserSetGalleryLayout && props.onUserSetGalleryLayout('speaker');\n            setFocusedContentOn(false);\n          },\n          iconProps: {\n            iconName: 'SpeakerGalleryLayout',\n            styles: {\n              root: {\n                lineHeight: 0\n              }\n            }\n          }\n        }, {\n          key: 'focusedContentSelectionKey',\n          text: localeStrings.strings.call.moreButtonGalleryFocusedContentLayoutLabel,\n          canCheck: true,\n          itemProps: {\n            styles: buttonFlyoutIncreasedSizeStyles\n          },\n          isChecked: focusedContentOn,\n          onClick: () => {\n            if (focusedContentOn === false) {\n              setPreviousLayout(props.userSetGalleryLayout ?? 'floatingLocalVideo');\n              props.onUserSetGalleryLayout && props.onUserSetGalleryLayout('focusedContent');\n              setFocusedContentOn(true);\n            } else {\n              props.onUserSetGalleryLayout && props.onUserSetGalleryLayout(previousLayout);\n              setFocusedContentOn(false);\n            }\n          },\n          iconProps: {\n            iconName: 'FocusedContentGalleryLayout',\n            styles: {\n              root: {\n                lineHeight: 0\n              }\n            }\n          }\n        }],\n        calloutProps: {\n          preventDismissOnEvent: _preventDismissOnEvent\n        }\n      }\n    };\n    moreButtonContextualMenuItems.push(galleryOptions);\n  }\n\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  const customDrawerButtons = useMemo(() => generateCustomCallDesktopOverflowButtons(onFetchCustomButtonPropsTrampoline(typeof props.callControls === 'object' ? props.callControls : undefined), typeof props.callControls === 'object' ? props.callControls.displayType : undefined), [props.callControls]);\n\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  customDrawerButtons['primary'].slice(CUSTOM_BUTTON_OPTIONS.MAX_PRIMARY_DESKTOP_CUSTOM_BUTTONS).forEach(element => {\n    moreButtonContextualMenuItems.push({\n      itemProps: {\n        styles: buttonFlyoutIncreasedSizeStyles\n      },\n      ...element\n    });\n  });\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  customDrawerButtons['secondary'].slice(CUSTOM_BUTTON_OPTIONS.MAX_SECONDARY_DESKTOP_CUSTOM_BUTTONS).forEach(element => {\n    moreButtonContextualMenuItems.push({\n      itemProps: {\n        styles: buttonFlyoutIncreasedSizeStyles\n      },\n      ...element\n    });\n  });\n\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  customDrawerButtons['overflow'].forEach(element => {\n    moreButtonContextualMenuItems.push({\n      itemProps: {\n        styles: buttonFlyoutIncreasedSizeStyles\n      },\n      ...element\n    });\n  });\n  return <MoreButton {...props} data-ui-id=\"common-call-composite-more-button\"\n  /*@conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ strings={moreButtonStrings} menuIconProps={{\n    hidden: true\n  }} menuProps={{\n    items: moreButtonContextualMenuItems,\n    calloutProps: {\n      preventDismissOnEvent: _preventDismissOnEvent\n    }\n  }} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { DefaultButton, IStackStyles } from '@fluentui/react';\nimport React from 'react';\nimport { useEffect, useState } from 'react';\n\n/**\n * @private\n *  hidden button to set first tab keypress focus on a specific grouping.\n *  On mount, button is autofocused then immediately hidden\n */\nexport const HiddenFocusStartPoint = (): JSX.Element => {\n  const [isMounted, setIsMounted] = useState(false);\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n  return <DefaultButton autoFocus ariaHidden={true} styles={isMounted ? invisibleHiddenFocusStartPoint : hiddenFocusStartPointStyles} tabIndex={-1} />;\n};\n\n/** @private */\nconst hiddenFocusStartPointStyles: IStackStyles = {\n  root: {\n    width: '0',\n    height: '0',\n    margin: '0',\n    minHeight: '0',\n    minWidth: '0',\n    maxHeight: '0',\n    maxWidth: '0',\n    opacity: '0',\n    outline: 'none',\n    padding: '0',\n    position: 'absolute'\n  }\n};\n\n/** @private */\nconst invisibleHiddenFocusStartPoint: IStackStyles = {\n  root: {\n    display: 'none'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport React, { useMemo } from 'react';\nimport { CallCompositeIcon } from '../icons';\nimport { ControlBarButton, ControlBarButtonStrings } from '@internal/react-components';\nimport { ControlBarButtonProps, ControlBarButtonStyles } from '@internal/react-components';\nimport { concatStyleSets, useTheme } from '@fluentui/react';\nimport { CallControlDisplayType } from '../types/CommonCallControlOptions';\nimport { useLocale } from '../../localization';\nconst icon = (): JSX.Element => <CallCompositeIcon iconName={'DtmfDialpadButton'} />;\n\n/**\n * @private\n */\nexport interface DtmfDialerButtonProps extends ControlBarButtonProps {\n  displayType?: CallControlDisplayType;\n  styles?: ControlBarButtonStyles;\n}\n/**\n * Button for showing and hiding the dtmf dialer in the Call composite.\n * To be used only if the more button control is disabled. This button will replace\n * it in the control bar unless it is also disabled.\n * @private\n */\nexport const DtmfDialpadButton = (props: DtmfDialerButtonProps): JSX.Element => {\n  const {\n    strings,\n    onRenderOnIcon,\n    onRenderOffIcon,\n    onClick,\n    displayType\n  } = props;\n  const theme = useTheme();\n  const locale = useLocale();\n  const dialpadButtonStrings: ControlBarButtonStrings = {\n    label: locale.strings.call.dtmfDialerButtonLabel,\n    tooltipOnContent: locale.strings.call.dtmfDialerButtonTooltipOn,\n    tooltipOffContent: locale.strings.call.dtmfDialerButtonTooltipOff\n  };\n  const styles: ControlBarButtonStyles = useMemo(() => concatStyleSets({\n    rootChecked: {\n      background: theme.palette.neutralLight\n    }\n  }, props.styles ?? {}), [props.styles, theme.palette.neutralLight]);\n  return <ControlBarButton {...props} strings={strings ? strings : dialpadButtonStrings} showLabel={displayType !== 'compact'} labelKey={'dtmfDialpadButtonLabelKey'} onRenderOnIcon={onRenderOnIcon ?? icon} onRenderOffIcon={onRenderOffIcon ?? icon} onClick={onClick} styles={styles} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useMemo, useRef, useEffect, useState, useCallback } from 'react';\nimport { CallAdapterProvider } from '../../CallComposite/adapter/CallAdapterProvider';\nimport { CallAdapter } from '../../CallComposite';\nimport { PeopleButton } from './PeopleButton';\nimport { concatStyleSets, IButton, IStyle, ITheme, mergeStyles, mergeStyleSets, Stack, useTheme } from '@fluentui/react';\nimport { controlBarContainerStyles } from '../../CallComposite/styles/CallControls.styles';\nimport { callControlsContainerStyles } from '../../CallComposite/styles/CallPage.styles';\nimport { useCallWithChatCompositeStrings } from '../../CallWithChatComposite/hooks/useCallWithChatCompositeStrings';\nimport { BaseCustomStyles, ControlBarButtonStyles } from '@internal/react-components';\nimport { VideoGalleryLayout } from '@internal/react-components';\nimport { ControlBar } from '@internal/react-components';\nimport { Microphone } from '../../CallComposite/components/buttons/Microphone';\nimport { Camera } from '../../CallComposite/components/buttons/Camera';\nimport { ScreenShare } from '../../CallComposite/components/buttons/ScreenShare';\nimport { EndCall } from '../../CallComposite/components/buttons/EndCall';\nimport { MoreButton } from '../MoreButton';\nimport { ContainerRectProps } from '../ContainerRectProps';\nimport { CUSTOM_BUTTON_OPTIONS, generateCustomCallControlBarButton, onFetchCustomButtonPropsTrampoline } from './CustomButton';\n/*@conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */\nimport { DesktopMoreButton } from './DesktopMoreButton';\nimport { isDisabled } from '../../CallComposite/utils';\nimport { HiddenFocusStartPoint } from '../HiddenFocusStartPoint';\nimport { CallWithChatControlOptions } from '../../CallWithChatComposite';\nimport { CommonCallControlOptions } from '../types/CommonCallControlOptions';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsSettingsModal } from '../CaptionsSettingsModal';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaiseHand } from '../../CallComposite/components/buttons/RaiseHand';\nimport { DtmfDialpadButton } from './DtmfDialerButton';\n/**\n * @private\n */\nexport interface CommonCallControlBarProps {\n  callAdapter: CallAdapter;\n  peopleButtonChecked: boolean;\n  onPeopleButtonClicked: () => void;\n  onMoreButtonClicked?: () => void;\n  mobileView: boolean;\n  disableButtonsForLobbyPage: boolean;\n  callControls?: boolean | CommonCallControlOptions | CallWithChatControlOptions;\n  disableButtonsForHoldScreen?: boolean;\n  /* @conditional-compile-remove(video-background-effects) */\n  onClickVideoEffects?: (showVideoEffects: boolean) => void;\n  /* @conditional-compile-remove(close-captions) */\n  isCaptionsSupported?: boolean;\n  /* @conditional-compile-remove(close-captions) */\n  isCaptionsOn?: boolean;\n  displayVertical?: boolean;\n  onUserSetOverflowGalleryPositionChange?: (position: 'Responsive' | 'horizontalTop') => void;\n  onUserSetGalleryLayout?: (layout: VideoGalleryLayout) => void;\n  userSetGalleryLayout?: VideoGalleryLayout;\n  peopleButtonRef?: React.RefObject<IButton>;\n  cameraButtonRef?: React.RefObject<IButton>;\n  /* @conditional-compile-remove(video-background-effects) */\n  videoBackgroundPickerRef?: React.RefObject<IButton>;\n  onSetDialpadPage?: () => void;\n  dtmfDialerPresent?: boolean;\n}\nconst inferCommonCallControlOptions = (mobileView: boolean, commonCallControlOptions?: boolean | CallWithChatControlOptions): CallWithChatControlOptions | false => {\n  if (commonCallControlOptions === false) {\n    return false;\n  }\n  const options = commonCallControlOptions === true || commonCallControlOptions === undefined ? {} : commonCallControlOptions;\n  if (mobileView) {\n    // Set to compressed mode when composite is optimized for mobile\n    options.displayType = 'compact';\n    // Set options to always not show screen share button for mobile\n    options.screenShareButton = false;\n  }\n  return options;\n};\n\n/**\n * @private\n */\nexport const CommonCallControlBar = (props: CommonCallControlBarProps & ContainerRectProps): JSX.Element => {\n  const theme = useTheme();\n  const rtl = theme.rtl;\n  const controlBarContainerRef = useRef<HTMLHeadingElement>(null);\n  const sidepaneControlsRef = useRef<HTMLHeadingElement>(null);\n  const controlBarSizeRef = useRef<HTMLHeadingElement>(null);\n  const [controlBarButtonsWidth, setControlBarButtonsWidth] = useState(0);\n  const [panelsButtonsWidth, setPanelsButtonsWidth] = useState(0);\n  const [controlBarContainerWidth, setControlBarContainerWidth] = useState(0);\n  const [totalButtonsWidth, setTotalButtonsWidth] = useState(0);\n  const [isOutOfSpace, setIsOutOfSpace] = useState(false);\n  const callWithChatStrings = useCallWithChatCompositeStrings();\n  const options = inferCommonCallControlOptions(props.mobileView, props.callControls);\n\n  /* @conditional-compile-remove(close-captions) */\n  const [showCaptionsSettingsModal, setShowCaptionsSettingsModal] = useState(false);\n  const handleResize = useCallback((): void => {\n    setControlBarButtonsWidth(controlBarContainerRef.current ? controlBarContainerRef.current.offsetWidth : 0);\n    setPanelsButtonsWidth(sidepaneControlsRef.current ? sidepaneControlsRef.current.offsetWidth : 0);\n    setControlBarContainerWidth(controlBarSizeRef.current ? controlBarSizeRef.current.offsetWidth : 0);\n  }, []);\n\n  // on load set inital width\n  useEffect(() => {\n    setControlBarButtonsWidth(controlBarContainerRef.current ? controlBarContainerRef.current.offsetWidth : 0);\n    setPanelsButtonsWidth(sidepaneControlsRef.current ? sidepaneControlsRef.current.offsetWidth : 0);\n    setControlBarContainerWidth(controlBarSizeRef.current ? controlBarSizeRef.current.offsetWidth : 0);\n  }, []);\n\n  // get the current width of control bar buttons and panel control buttons when browser size change\n  useEffect(() => {\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [handleResize]);\n\n  /* when size change, reset total buttons width and compare with the control bar container width\n  if the total width of those buttons exceed container width, do not center the control bar buttons based on parent container width\n  Instead let them take up the remaining white space on the left */\n  useEffect(() => {\n    // white space on the left when control bar buttons are centered based on container width + control bar buttons width + panel control buttons width\n    setTotalButtonsWidth((controlBarContainerWidth - controlBarButtonsWidth) / 2 + controlBarButtonsWidth + panelsButtonsWidth);\n  }, [controlBarButtonsWidth, panelsButtonsWidth, controlBarContainerWidth]);\n  useEffect(() => {\n    setIsOutOfSpace(totalButtonsWidth > controlBarContainerWidth);\n  }, [totalButtonsWidth, controlBarContainerWidth]);\n\n  /* @conditional-compile-remove(close-captions) */\n  const openCaptionsSettingsModal = useCallback((): void => {\n    setShowCaptionsSettingsModal(true);\n  }, []);\n  /* @conditional-compile-remove(close-captions) */\n  const onDismissCaptionsSettings = useCallback((): void => {\n    setShowCaptionsSettingsModal(false);\n  }, []);\n  const peopleButtonStrings = useMemo(() => ({\n    label: callWithChatStrings.peopleButtonLabel,\n    selectedLabel: callWithChatStrings.selectedPeopleButtonLabel,\n    tooltipOffContent: callWithChatStrings.peopleButtonTooltipOpen,\n    tooltipOnContent: callWithChatStrings.peopleButtonTooltipClose\n  }), [callWithChatStrings]);\n  const moreButtonStrings = useMemo(() => ({\n    label: callWithChatStrings.moreDrawerButtonLabel,\n    tooltipContent: callWithChatStrings.moreDrawerButtonTooltip\n  }), [callWithChatStrings]);\n  const centerContainerStyles = useMemo(() => {\n    const styles: BaseCustomStyles = !props.mobileView ? desktopControlBarStyles : {};\n    return mergeStyleSets(styles, {\n      root: {\n        // Enforce a background color on control bar to ensure it matches the composite background color.\n        background: theme.semanticColors.bodyBackground\n      }\n    });\n  }, [props.mobileView, theme.semanticColors.bodyBackground]);\n  const screenShareButtonStyles = useMemo(() => !props.mobileView ? getDesktopScreenShareButtonStyles(theme) : undefined, [props.mobileView, theme]);\n  const commonButtonStyles = useMemo(() => !props.mobileView ? getDesktopCommonButtonStyles(theme) : undefined, [props.mobileView, theme]);\n  const endCallButtonStyles = useMemo(() => !props.mobileView ? getDesktopEndCallButtonStyles(theme) : undefined, [props.mobileView, theme]);\n  const controlBarWrapperDesktopStyles: IStyle = useMemo(\n  // only center control bar buttons based on parent container if there are enough space on the screen and not mobile\n  () => !props.mobileView && !isOutOfSpace ? rtl ? wrapperDesktopRtlStyles : wrapperDesktopStyles : {}, [props.mobileView, rtl, isOutOfSpace]);\n\n  // only center control bar buttons based on parent container if there are enough space on the screen and not mobile\n  const controlBarDesktopContainerStyles: IStyle = useMemo(() => !props.mobileView && !isOutOfSpace ? {\n    position: 'relative',\n    minHeight: '4.5rem',\n    width: '100%'\n  } : {}, [props.mobileView, isOutOfSpace]);\n  const customButtons = useMemo(() => generateCustomCallControlBarButton(onFetchCustomButtonPropsTrampoline(options !== false ? options : undefined), options !== false ? options?.displayType : undefined), [options]);\n  // when options is false then we want to hide the whole control bar.\n  if (options === false) {\n    return <></>;\n  }\n  const sideButtonsPresent = isEnabled(options.peopleButton) || isEnabled(options.chatButton) || customButtons['secondary'] !== undefined;\n  const screenShareButtonIsEnabled = isEnabled(options?.screenShareButton);\n  const microphoneButtonIsEnabled = isEnabled(options?.microphoneButton);\n  const cameraButtonIsEnabled = isEnabled(options?.cameraButton);\n  const showDesktopMoreButton = /*@conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */isEnabled(options?.moreButton) && (false || /* @conditional-compile-remove(close-captions) */props.isCaptionsSupported || props.onUserSetGalleryLayout);\n\n  /*@conditional-compile-remove(rooms) */\n  const role = props.callAdapter.getState().call?.role;\n  /*@conditional-compile-remove(rooms) */\n  const hideRaiseHandButtonInRoomsCall = props.callAdapter.getState().isRoomsCall && role && ['Consumer', 'Unknown'].includes(role);\n  return <div ref={controlBarSizeRef}>\n      <CallAdapterProvider adapter={props.callAdapter}>\n        {/* @conditional-compile-remove(close-captions) */showCaptionsSettingsModal && <CaptionsSettingsModal showCaptionsSettingsModal={showCaptionsSettingsModal} onDismissCaptionsSettings={onDismissCaptionsSettings} changeCaptionLanguage={props.isCaptionsOn} />}\n      </CallAdapterProvider>\n      <Stack horizontal reversed={!props.mobileView && !isOutOfSpace} horizontalAlign=\"space-between\" className={mergeStyles(callControlsContainerStyles, controlBarContainerStyles, controlBarDesktopContainerStyles)}>\n        <Stack.Item grow className={mergeStyles(controlBarWrapperDesktopStyles)}>\n          <CallAdapterProvider adapter={props.callAdapter}>\n            <Stack horizontalAlign=\"center\">\n              {/*\n               HiddenFocusStartPoint is a util component used when we can't ensure the initial element for first\n               tab focus is at the top of dom tree. It moves the first-tab focus to the next interact-able element\n               immediately after it in the dom tree.\n               */}\n              <HiddenFocusStartPoint />\n              <Stack.Item>\n                {/*\n                  Note: We use the layout=\"horizontal\" instead of dockedBottom because of how we position the\n                  control bar. The control bar exists in a Stack below the MediaGallery. The MediaGallery is\n                  set to grow and fill the remaining space not taken up by the ControlBar. If we were to use\n                  dockedBottom it has position absolute and would therefore float on top of the media gallery,\n                  occluding some of its content.\n                 */}\n                <div ref={controlBarContainerRef}>\n                  <ControlBar layout={props.displayVertical ? 'vertical' : 'horizontal'} styles={centerContainerStyles}>\n                    {microphoneButtonIsEnabled && <Microphone displayType={options.displayType} styles={commonButtonStyles} splitButtonsForDeviceSelection={!props.mobileView} disableTooltip={props.mobileView} />}\n                    {cameraButtonIsEnabled && <Camera displayType={options.displayType} styles={commonButtonStyles} splitButtonsForDeviceSelection={!props.mobileView} /* @conditional-compile-remove(video-background-effects) */\n                  onClickVideoEffects={props.onClickVideoEffects} componentRef={props.cameraButtonRef} disableTooltip={props.mobileView} />}\n                    {}\n                    {/* @conditional-compile-remove(raise-hand) */!props.mobileView && isEnabled(options.raiseHandButton) && /* @conditional-compile-remove(rooms) */!hideRaiseHandButtonInRoomsCall && <RaiseHand displayType={options.displayType} styles={commonButtonStyles} />}\n                    {showDtmfDialerButton(options) && props.onSetDialpadPage !== undefined && <DtmfDialpadButton styles={commonButtonStyles} displayType={options.displayType} onClick={() => {\n                    if (props.onSetDialpadPage !== undefined) {\n                      props.onSetDialpadPage();\n                    }\n                  }} />}\n                    {}\n                    {screenShareButtonIsEnabled && <ScreenShare option={options.screenShareButton} displayType={options.displayType} styles={screenShareButtonStyles} />}\n                    {customButtons['primary']?.slice(0, props.mobileView ? CUSTOM_BUTTON_OPTIONS.MAX_PRIMARY_MOBILE_CUSTOM_BUTTONS : CUSTOM_BUTTON_OPTIONS.MAX_PRIMARY_DESKTOP_CUSTOM_BUTTONS).map((CustomButton, i) => {\n                    return <CustomButton key={`primary-custom-button-${i}`} styles={commonButtonStyles} showLabel={options.displayType !== 'compact'} disableTooltip={props.mobileView} />;\n                  })}\n                    {props.mobileView && <MoreButton data-ui-id=\"common-call-composite-more-button\" strings={moreButtonStrings} onClick={props.onMoreButtonClicked} disabled={props.disableButtonsForLobbyPage} disableTooltip={props.mobileView} />}\n                    {!props.mobileView && showDesktopMoreButton && <DesktopMoreButton disableButtonsForHoldScreen={props.disableButtonsForHoldScreen} styles={commonButtonStyles} /* @conditional-compile-remove(control-bar-button-injection) */\n                  callControls={props.callControls}\n                  /* @conditional-compile-remove(close-captions) */ isCaptionsSupported={props.isCaptionsSupported}\n                  /* @conditional-compile-remove(close-captions) */ onCaptionsSettingsClick={openCaptionsSettingsModal} onUserSetOverflowGalleryPositionChange={props.onUserSetOverflowGalleryPositionChange} onUserSetGalleryLayout={props.onUserSetGalleryLayout} userSetGalleryLayout={props.userSetGalleryLayout} dtmfDialerPresent={props.dtmfDialerPresent} onSetDialpadPage={props.onSetDialpadPage} />}\n                    <EndCall displayType=\"compact\" styles={endCallButtonStyles} />\n                  </ControlBar>\n                </div>\n              </Stack.Item>\n            </Stack>\n          </CallAdapterProvider>\n        </Stack.Item>\n        {!props.mobileView && sideButtonsPresent && <Stack.Item>\n            <div ref={sidepaneControlsRef}>\n              <Stack horizontal className={!props.mobileView ? mergeStyles(desktopButtonContainerStyle) : undefined}>\n                {isEnabled(options?.peopleButton) && <PeopleButton checked={props.peopleButtonChecked} ariaLabel={props.peopleButtonChecked ? peopleButtonStrings?.selectedLabel : peopleButtonStrings?.label} showLabel={options.displayType !== 'compact'} onClick={props.onPeopleButtonClicked} data-ui-id=\"common-call-composite-people-button\" disabled={props.disableButtonsForLobbyPage || props.disableButtonsForHoldScreen || isDisabled(options.peopleButton)} strings={peopleButtonStrings} styles={commonButtonStyles} componentRef={props.peopleButtonRef} />}\n                {customButtons['secondary']?.slice(0, CUSTOM_BUTTON_OPTIONS.MAX_SECONDARY_DESKTOP_CUSTOM_BUTTONS).map((CustomButton, i) => {\n              return <CustomButton key={`secondary-custom-button-${i}`} styles={commonButtonStyles} showLabel={options.displayType !== 'compact'} />;\n            })}\n              </Stack>\n            </div>\n          </Stack.Item>}\n      </Stack>\n    </div>;\n};\nconst desktopButtonContainerStyle: IStyle = {\n  padding: '0.75rem',\n  columnGap: '0.5rem'\n};\nconst desktopControlBarStyles: BaseCustomStyles = {\n  root: desktopButtonContainerStyle\n};\n{\n  /*\n    Styling here to ensure the control bar buttons stay in the center of the parent component (control Container) regardless of its siblings\n    Need to add 'reversed' to parent container because the styling here reverse the position of the two stack items \n  */\n}\nconst wrapperDesktopStyles: IStyle = {\n  position: 'absolute',\n  left: '50%',\n  transform: 'translate(-50%, 0)'\n};\nconst wrapperDesktopRtlStyles: IStyle = {\n  position: 'absolute',\n  right: '50%',\n  transform: 'translate(-50%, 0)'\n};\n\n/** @private */\nexport const getDesktopCommonButtonStyles = (theme: ITheme): ControlBarButtonStyles => ({\n  root: {\n    border: `solid 1px ${theme.palette.neutralQuaternaryAlt}`,\n    borderRadius: theme.effects.roundedCorner4,\n    minHeight: '2.5rem',\n    maxWidth: '12rem' // allot extra space than the regular ControlBarButton. This is to give extra room to have the icon beside the text.\n  },\n  flexContainer: {\n    display: 'flex',\n    flexFlow: 'row nowrap'\n  },\n  textContainer: {\n    // Override the default so that label doesn't introduce a new block.\n    display: 'inline',\n    // Ensure width is set to permit child to show ellipsis when there is a label that is too long\n    maxWidth: '100%'\n  },\n  label: {\n    fontSize: theme.fonts.medium.fontSize,\n    // Ensure there is enough space between the icon and text to allow for the unread messages badge in the chat button\n    marginLeft: '0.625rem',\n    // Ensure letters that go above and below the standard text line like 'g', 'y', 'j' are not clipped\n    lineHeight: '1.5rem',\n    // Do not allow very long button texts to ruin the control bar experience, instead ensure long text is truncated and shows ellipsis\n    display: 'block',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden'\n  },\n  splitButtonMenuButton: {\n    border: `solid 1px ${theme.palette.neutralQuaternaryAlt}`,\n    borderTopRightRadius: theme.effects.roundedCorner4,\n    borderBottomRightRadius: theme.effects.roundedCorner4,\n    borderTopLeftRadius: '0',\n    borderBottomLeftRadius: '0'\n  },\n  splitButtonMenuButtonChecked: {\n    // Default colors the menu half similarly for :hover and when button is checked.\n    // To align with how the left-half is styled, override the checked style.\n    background: 'none'\n  }\n});\nconst getDesktopScreenShareButtonStyles = (theme: ITheme): ControlBarButtonStyles => {\n  const overrideStyles = {\n    border: 'none',\n    background: theme.palette.themePrimary,\n    color: theme.palette.white,\n    '* > svg': {\n      fill: theme.palette.white\n    },\n    '@media (forced-colors: active)': {\n      border: '1px solid',\n      borderColor: theme.palette.black\n    }\n  };\n  const overrides: ControlBarButtonStyles = {\n    rootChecked: overrideStyles,\n    rootCheckedHovered: overrideStyles\n  };\n  return concatStyleSets(getDesktopCommonButtonStyles(theme), overrides);\n};\nconst getDesktopEndCallButtonStyles = (theme: ITheme): ControlBarButtonStyles => {\n  const overrides: ControlBarButtonStyles = {\n    root: {\n      // Suppress border around the dark-red button.\n      border: 'none'\n    },\n    rootFocused: {\n      '@media (forced-colors: active)': {\n        background: 'highlight',\n        color: 'highlightText',\n        borderColor: theme.palette.black,\n        borderRadius: 'unset',\n        outline: `3px solid ${theme.palette.black}`\n      }\n    },\n    icon: {\n      '@media (forced-colors: active)': {\n        ':focused': {\n          color: theme.palette.white\n        }\n      }\n    }\n  };\n  return concatStyleSets(getDesktopCommonButtonStyles(theme), overrides);\n};\nconst isEnabled = (option: unknown): boolean => option !== false;\nconst showDtmfDialerButton = (options: CommonCallControlOptions | CallWithChatControlOptions): boolean => {\n  if (options.moreButton === false && options.dtmfDialerButton !== false) {\n    return true;\n  } else {\n    return false;\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { AnimationStyles, IStyle, ITheme, mergeStyles, Stack, Text, useTheme } from '@fluentui/react';\nimport React from 'react';\nimport { CallCompositeIcon } from '../../common/icons';\nimport { useLocale } from '../../localization';\n\n/**\n * @private\n */\nexport interface MutedNotificationProps {\n  speakingWhileMuted: boolean;\n}\n\n/**\n * Notify the user that they're muted.\n */\nexport function MutedNotification(props: MutedNotificationProps): JSX.Element {\n  const locale = useLocale();\n  const theme = useTheme();\n  return <Stack horizontal horizontalAlign=\"center\" className={mergeStyles(props.speakingWhileMuted === true ? isSpeakingAndMutedAnimationStyles : isNotSpeakingAndMutedAnimationStyles)}>\n      <Stack horizontal className={mergeStyles(stackStyle(theme))}>\n        <CallCompositeIcon iconName=\"Muted\" className={mergeStyles(iconStyle(theme))} />\n        <Text className={mergeStyles(textStyle(theme))} aria-live={'polite'}>\n          {locale.strings.call.mutedMessage}\n        </Text>\n      </Stack>\n    </Stack>;\n}\nconst stackStyle = (theme: ITheme): IStyle => {\n  return {\n    background: theme.palette.black,\n    gap: `1rem`,\n    padding: `1rem`,\n    borderRadius: theme.effects.roundedCorner4,\n    width: 'fit-content',\n    opacity: 0.8\n  };\n};\nconst iconStyle = (theme: ITheme): IStyle => {\n  return {\n    color: theme.palette.white,\n    maxHeight: '1.25rem'\n  };\n};\nconst textStyle = (theme: ITheme): IStyle => {\n  return {\n    color: theme.palette.white,\n    fontSize: `1rem`\n  };\n};\nconst isSpeakingAndMutedAnimationStyles: IStyle = {\n  ...AnimationStyles.fadeIn100\n};\nconst isNotSpeakingAndMutedAnimationStyles: IStyle = {\n  ...AnimationStyles.fadeOut200,\n  display: 'none'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { getCallStatus, getIsScreenShareOn } from './baseSelectors';\nimport { createSelector } from 'reselect';\nimport { CallState as SDKCallStatus } from '@azure/communication-calling';\n\n/**\n * @private\n */\nexport const callStatusSelector = createSelector([getCallStatus, getIsScreenShareOn], (callStatus: SDKCallStatus, isScreenShareOn) => {\n  return {\n    callStatus,\n    isScreenShareOn\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Theme } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\nimport { _DrawerMenuStyles } from '@internal/react-components';\n\n/**\n * @private\n */\nexport const captionSettingsDrawerStyles = (theme: Theme): _DrawerMenuStyles => ({\n  root: {\n    overflow: 'auto'\n  },\n  drawerSurfaceStyles: {\n    drawerContentContainer: {\n      root: {\n        span: {\n          fontWeight: 400,\n          fontSize: _pxToRem(14),\n          lineHeight: _pxToRem(22),\n          color: theme.palette.neutralDark\n        }\n      }\n    }\n  }\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { useMemo, useCallback } from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { _CaptionsSettingsModal, CaptionLanguageStrings, useTheme } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { _DrawerMenu as DrawerMenu, _DrawerMenuItemProps as DrawerMenuItemProps, _DrawerMenuStyles } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { captionSettingsDrawerStyles } from './captionSettingsDrawer.styles';\nimport { _getKeys } from '@internal/acs-ui-common';\n\n/** @private */\nexport interface CaptionSettingsDrawerStrings {\n  /**\n   * Label for spoken language/caption language drawerMenuItem\n   *\n   * @remarks Only displayed when in Teams call, disabled until captions is on\n   */\n  menuTitle: string;\n}\n\n/** @private */\nexport const CaptionLanguageSettingsDrawer = (props: {\n  /* @conditional-compile-remove(close-captions) */selectLanguage: (language: keyof CaptionLanguageStrings) => void;\n  /* @conditional-compile-remove(close-captions) */\n  setCurrentLanguage: (language: keyof CaptionLanguageStrings) => void;\n  /* @conditional-compile-remove(close-captions) */\n  currentLanguage: keyof CaptionLanguageStrings;\n  /* @conditional-compile-remove(close-captions) */\n  onLightDismiss: () => void;\n  /* @conditional-compile-remove(close-captions) */\n  strings?: CaptionSettingsDrawerStrings;\n  /* @conditional-compile-remove(close-captions) */\n  supportedLanguageStrings?: CaptionLanguageStrings;\n}): JSX.Element => {\n  /* @conditional-compile-remove(close-captions) */\n  const theme = useTheme();\n\n  /* @conditional-compile-remove(close-captions) */\n  const onDrawerItemClick = useCallback((languageCode: keyof CaptionLanguageStrings) => {\n    props.selectLanguage(languageCode);\n  }, [props]);\n\n  /* @conditional-compile-remove(close-captions) */\n  const drawerItems: DrawerMenuItemProps[] = useMemo(() => {\n    return _getKeys(props.supportedLanguageStrings ?? []).map(languageCode => ({\n      itemKey: languageCode,\n      text: props.supportedLanguageStrings ? props.supportedLanguageStrings[languageCode] : languageCode,\n      onItemClick: () => onDrawerItemClick(languageCode),\n      secondaryIconProps: props.currentLanguage === languageCode ? {\n        iconName: 'Accept'\n      } : undefined\n    }));\n  }, [props.currentLanguage, props.supportedLanguageStrings, onDrawerItemClick]);\n  const sortedDrawerItems: DrawerMenuItemProps[] = useMemo(() => {\n    const copy = [...drawerItems];\n    return copy.sort((a, b) => a.text && b.text && a.text > b.text ? 1 : -1);\n  }, [drawerItems]);\n\n  /* @conditional-compile-remove(close-captions) */\n  return <DrawerMenu heading={props.strings?.menuTitle} items={sortedDrawerItems ?? []} onLightDismiss={() => {\n    props.setCurrentLanguage(props.currentLanguage);\n    props.onLightDismiss();\n  }} styles={captionSettingsDrawerStyles(theme)} />;\n  return <></>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Theme, IToggleStyles } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\n\n/**\n * @private\n */\nexport const themedToggleButtonStyle = (theme: Theme, checked: boolean): Partial<IToggleStyles> => {\n  if (checked) {\n    return {\n      root: {\n        margin: 0\n      },\n      pill: {\n        backgroundColor: `${theme.palette.themePrimary} !important`\n      },\n      thumb: {\n        backgroundColor: `${theme.palette.white} !important`\n      }\n    };\n  }\n  return {\n    root: {\n      margin: 0\n    }\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { useMemo, useCallback } from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { _CaptionsSettingsModal, SpokenLanguageStrings, useTheme } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { _DrawerMenu as DrawerMenu, _DrawerMenuItemProps as DrawerMenuItemProps, _DrawerMenuStyles } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { captionSettingsDrawerStyles } from './captionSettingsDrawer.styles';\nimport { _getKeys } from '@internal/acs-ui-common';\n\n/** @private */\nexport interface CaptionSettingsDrawerStrings {\n  /**\n   * Label for spoken language/caption language drawerMenuItem\n   *\n   * @remarks Only displayed when in Teams call, disabled until captions is on\n   */\n  menuTitle: string;\n}\n\n/** @private */\nexport const SpokenLanguageSettingsDrawer = (props: {\n  /* @conditional-compile-remove(close-captions) */selectLanguage: (language: keyof SpokenLanguageStrings) => void;\n  /* @conditional-compile-remove(close-captions) */\n  setCurrentLanguage: (language: keyof SpokenLanguageStrings) => void;\n  /* @conditional-compile-remove(close-captions) */\n  currentLanguage: keyof SpokenLanguageStrings;\n  /* @conditional-compile-remove(close-captions) */\n  onLightDismiss: () => void;\n  /* @conditional-compile-remove(close-captions) */\n  strings?: CaptionSettingsDrawerStrings;\n  /* @conditional-compile-remove(close-captions) */\n  supportedLanguageStrings?: SpokenLanguageStrings;\n}): JSX.Element => {\n  /* @conditional-compile-remove(close-captions) */\n  const theme = useTheme();\n\n  /* @conditional-compile-remove(close-captions) */\n  const onDrawerItemClick = useCallback((languageCode: keyof SpokenLanguageStrings) => {\n    props.selectLanguage(languageCode);\n  }, [props]);\n\n  /* @conditional-compile-remove(close-captions) */\n  const drawerItems: DrawerMenuItemProps[] = useMemo(() => {\n    return _getKeys(props.supportedLanguageStrings ?? []).map(languageCode => ({\n      itemKey: languageCode,\n      text: props.supportedLanguageStrings ? props.supportedLanguageStrings[languageCode] : languageCode,\n      onItemClick: () => onDrawerItemClick(languageCode),\n      secondaryIconProps: props.currentLanguage === languageCode ? {\n        iconName: 'Accept'\n      } : undefined\n    }));\n  }, [props.currentLanguage, props.supportedLanguageStrings, onDrawerItemClick]);\n  const sortedDrawerItems: DrawerMenuItemProps[] = useMemo(() => {\n    const copy = [...drawerItems];\n    return copy.sort((a, b) => a.text && b.text && a.text > b.text ? 1 : -1);\n  }, [drawerItems]);\n\n  /* @conditional-compile-remove(close-captions) */\n  return <DrawerMenu heading={props.strings?.menuTitle} items={sortedDrawerItems ?? []} onLightDismiss={() => {\n    props.setCurrentLanguage(props.currentLanguage);\n    props.onLightDismiss();\n  }} styles={captionSettingsDrawerStyles(theme)} />;\n  return <></>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useCallback } from 'react';\n/* @conditional-compile-remove(close-captions) */\nimport { useState } from 'react';\n/* @conditional-compile-remove(control-bar-button-injection) */\nimport { useMemo } from 'react';\nimport { OptionsDevice, _DrawerMenu as DrawerMenu, _DrawerMenuItemProps as DrawerMenuItemProps, _DrawerMenuStyles, SpokenLanguageStrings, CaptionLanguageStrings } from '@internal/react-components';\nimport { VideoGalleryLayout } from '@internal/react-components';\n/* @conditional-compile-remove(close-captions) */\nimport { _StartCaptionsButton, _CaptionsSettingsModal } from '@internal/react-components';\n/* @conditional-compile-remove(raise-hand) */\nimport { RaiseHandButton, RaiseHandButtonProps } from '@internal/react-components';\nimport { AudioDeviceInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(control-bar-button-injection) */\nimport { CUSTOM_BUTTON_OPTIONS, generateCustomCallDrawerButtons, onFetchCustomButtonPropsTrampoline } from '../ControlBar/CustomButton';\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(raise-hand) */\nimport { usePropsFor } from '../../CallComposite/hooks/usePropsFor';\n/* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */\nimport { useLocale } from '../../localization';\nimport { isDisabled } from '../../CallComposite/utils';\nimport { CommonCallControlOptions } from '../types/CommonCallControlOptions';\n/* @conditional-compile-remove(close-captions) */\nimport { Stack, Toggle, useTheme } from '@fluentui/react';\n/* @conditional-compile-remove(close-captions) */\nimport { _pxToRem } from '@internal/acs-ui-common';\n/* @conditional-compile-remove(close-captions) */\nimport { useAdaptedSelector } from '../../CallComposite/hooks/useAdaptedSelector';\n/* @conditional-compile-remove(close-captions) */\nimport { _captionSettingsSelector, _startCaptionsButtonSelector } from '@internal/calling-component-bindings';\n/* @conditional-compile-remove(close-captions) */\nimport { useHandlers } from '../../CallComposite/hooks/useHandlers';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionLanguageSettingsDrawer } from './CaptionLanguageSettingsDrawer';\n/* @conditional-compile-remove(close-captions) */\nimport { themedToggleButtonStyle } from './MoreDrawer.styles';\n/* @conditional-compile-remove(close-captions) */\nimport { _spokenLanguageToCaptionLanguage } from '@internal/react-components';\n/* @conditional-compile-remove(rooms) */\nimport { useAdapter } from '../../CallComposite/adapter/CallAdapterProvider';\nimport { useSelector } from '../../CallComposite/hooks/useSelector';\nimport { getTargetCallees } from '../../CallComposite/selectors/baseSelectors';\nimport { showDtmfDialer } from '../../CallComposite/utils/MediaGalleryUtils';\nimport { SpokenLanguageSettingsDrawer } from './SpokenLanguageSettingsDrawer';\n\n/** @private */\nexport interface MoreDrawerStrings {\n  /**\n   * Label for people drawerMenuItem.\n   */\n  peopleButtonLabel: string;\n  /**\n   * Label for audio device drawerMenuItem.\n   *\n   * @remarks This replaces the microphoneMenuTitle speakers can not be enumerated\n   *\n   */\n  audioDeviceMenuTitle?: string;\n  /**\n   * Label for microphone drawerMenuItem.\n   *\n   * @remarks Only displayed when speakers can be enumerated otherwise audioDeviceMenuTitle is used\n   *\n   */\n  microphoneMenuTitle: string;\n  /**\n   * Label for speaker drawerMenuItem.\n   *\n   * @remarks Only displayed when speakers can be enumerated\n   *\n   */\n  speakerMenuTitle: string;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Label for captions drawerMenuItem\n   *\n   * @remarks Only displayed when in Teams call\n   */\n  captionsMenuTitle: string;\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Label for spokenLanguage drawerMenuItem\n   *\n   * @remarks Only displayed when in Teams call, disabled until captions is on\n   */\n  spokenLanguageMenuTitle: string;\n\n  /* @conditional-compile-remove(close-captions) */\n  /**\n   * Label for captionLanguage drawerMenuItem\n   *\n   * @remarks Only displayed when in Teams call, disabled until captions is on\n   */\n  captionLanguageMenuTitle: string;\n\n  /**\n   * Label for gallery options drawerMenuItem\n   */\n  galleryOptionsMenuTitle: string;\n}\n\n/** @private */\nexport interface MoreDrawerDevicesMenuProps {\n  /**\n   * Available microphones for selection\n   */\n  microphones?: OptionsDevice[];\n  /**\n   * Available speakers for selection\n   */\n  speakers?: OptionsDevice[];\n  /**\n   * Microphone that is shown as currently selected\n   */\n  selectedMicrophone?: OptionsDevice;\n  /**\n   * Speaker that is shown as currently selected\n   */\n  selectedSpeaker?: OptionsDevice;\n  /**\n   * Speaker when a speaker is selected\n   */\n  onSelectSpeaker: (device: AudioDeviceInfo) => Promise<void>;\n  /**\n   * Callback when a microphone is selected\n   */\n  onSelectMicrophone: (device: AudioDeviceInfo) => Promise<void>;\n  userSetGalleryLayout?: VideoGalleryLayout;\n  /**\n   * Callback for when the gallery layout is changed\n   */\n  onUserSetGalleryLayout?: (layout: VideoGalleryLayout) => void;\n  /**\n   * Callback to hide and show the dialpad in the more drawer\n   */\n  onSetDialpadPage?: () => void;\n  /**\n   * Whether the dialpad is present in the call\n   */\n  dtmfDialerPresent?: boolean;\n}\n\n/** @private */\nexport interface MoreDrawerProps extends MoreDrawerDevicesMenuProps {\n  onLightDismiss: () => void;\n  onPeopleButtonClicked: () => void;\n  callControls?: boolean | CommonCallControlOptions;\n  onClickShowDialpad?: () => void;\n  /* @conditional-compile-remove(close-captions) */\n  isCaptionsSupported?: boolean;\n  strings: MoreDrawerStrings;\n  disableButtonsForHoldScreen?: boolean;\n}\nconst inferCallWithChatControlOptions = (callWithChatControls?: boolean | CommonCallControlOptions): CommonCallControlOptions | false => {\n  if (callWithChatControls === false) {\n    return false;\n  }\n  const options = callWithChatControls === true || callWithChatControls === undefined ? {} : callWithChatControls;\n  return options;\n};\n\n/** @private */\nexport const MoreDrawer = (props: MoreDrawerProps): JSX.Element => {\n  /* @conditional-compile-remove(close-captions) */\n  const theme = useTheme();\n  /* @conditional-compile-remove(rooms) */\n  const callAdapter = useAdapter();\n  const drawerMenuItems: DrawerMenuItemProps[] = [];\n  const {\n    speakers,\n    onSelectSpeaker,\n    onLightDismiss\n  } = props;\n\n  /* @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(raise-hand) */\n  const localeStrings = useLocale();\n  const callees = useSelector(getTargetCallees);\n  const allowDtmfDialer = showDtmfDialer(callees);\n  const [dtmfDialerChecked, setDtmfDialerChecked] = useState<boolean>(props.dtmfDialerPresent ?? false);\n\n  /* @conditional-compile-remove(raise-hand) */\n  const raiseHandButtonProps = (usePropsFor(RaiseHandButton) as RaiseHandButtonProps);\n  const onSpeakerItemClick = useCallback((_ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement> | undefined, itemKey: string | undefined) => {\n    const selected = speakers?.find(speaker => speaker.id === itemKey);\n    if (selected) {\n      // This is unsafe - we're only passing in part of the argument to the handler.\n      // But this is a known issue in our state.\n      onSelectSpeaker((selected as AudioDeviceInfo));\n    }\n    onLightDismiss();\n  }, [speakers, onSelectSpeaker, onLightDismiss]);\n  const drawerSelectionOptions = inferCallWithChatControlOptions(props.callControls);\n  if (props.speakers && props.speakers.length > 0) {\n    drawerMenuItems.push({\n      itemKey: 'speakers',\n      disabled: props.disableButtonsForHoldScreen,\n      text: props.strings.speakerMenuTitle,\n      iconProps: {\n        iconName: 'MoreDrawerSpeakers'\n      },\n      subMenuProps: props.speakers.map(speaker => ({\n        itemKey: speaker.id,\n        iconProps: {\n          iconName: isDeviceSelected(speaker, props.selectedSpeaker) ? 'MoreDrawerSelectedSpeaker' : 'MoreDrawerSpeakers'\n        },\n        text: speaker.name,\n        onItemClick: onSpeakerItemClick,\n        secondaryIconProps: isDeviceSelected(speaker, props.selectedSpeaker) ? {\n          iconName: 'Accept'\n        } : undefined\n      })),\n      secondaryText: props.selectedSpeaker?.name\n    });\n  }\n  const {\n    microphones,\n    onSelectMicrophone\n  } = props;\n  const onMicrophoneItemClick = useCallback((_ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement> | undefined, itemKey: string | undefined) => {\n    const selected = microphones?.find(mic => mic.id === itemKey);\n    if (selected) {\n      // This is unsafe - we're only passing in part of the argument to the handler.\n      // But this is a known issue in our state.\n      onSelectMicrophone((selected as AudioDeviceInfo));\n    }\n    onLightDismiss();\n  }, [microphones, onSelectMicrophone, onLightDismiss]);\n  if (props.microphones && props.microphones.length > 0) {\n    // Set props as Microphone if speakers can be enumerated else set as Audio Device\n    const speakersAvailable = props.speakers && props.speakers.length > 0;\n    const itemKey = speakersAvailable ? 'microphones' : 'audioDevices';\n    const text = speakersAvailable ? props.strings.microphoneMenuTitle : props.strings.audioDeviceMenuTitle;\n    const iconName = speakersAvailable ? 'MoreDrawerMicrophones' : 'MoreDrawerSpeakers';\n    const selectedIconName = speakersAvailable ? 'MoreDrawerSelectedMicrophone' : 'MoreDrawerSelectedSpeaker';\n    drawerMenuItems.push({\n      itemKey: itemKey,\n      disabled: props.disableButtonsForHoldScreen,\n      text: text,\n      iconProps: {\n        iconName: iconName\n      },\n      subMenuProps: props.microphones.map(mic => ({\n        itemKey: mic.id,\n        iconProps: {\n          iconName: isDeviceSelected(mic, props.selectedMicrophone) ? selectedIconName : iconName\n        },\n        text: mic.name,\n        onItemClick: onMicrophoneItemClick,\n        secondaryIconProps: isDeviceSelected(mic, props.selectedMicrophone) ? {\n          iconName: 'Accept'\n        } : undefined,\n        disabled: drawerSelectionOptions !== false ? isDisabled(drawerSelectionOptions.microphoneButton) : undefined\n      })),\n      secondaryText: props.selectedMicrophone?.name\n    });\n  }\n  const dtmfDialerScreenOption = {\n    itemKey: 'dtmfDialerScreenKey',\n    text: !dtmfDialerChecked ? localeStrings.strings.call.dtmfDialerMoreButtonLabelOn : localeStrings.strings.call.dtmfDialerMoreButtonLabelOff,\n    onItemClick: () => {\n      if (props.onSetDialpadPage) {\n        props.onSetDialpadPage();\n      }\n      setDtmfDialerChecked(!dtmfDialerChecked);\n      onLightDismiss();\n    },\n    iconProps: {\n      iconName: 'DtmfDialpadButton',\n      styles: {\n        root: {\n          lineHeight: 0\n        }\n      }\n    }\n  };\n  /**\n   * Only render the dtmf dialer if the dialpad for PSTN calls is not present\n   */\n  if (props.onSetDialpadPage && allowDtmfDialer) {\n    drawerMenuItems.push(dtmfDialerScreenOption);\n  }\n  const galleryLayoutOptions = {\n    itemKey: 'galleryPositionKey',\n    iconProps: {\n      iconName: 'GalleryOptions',\n      styles: {\n        root: {\n          lineHeight: 0\n        }\n      }\n    },\n    disabled: props.disableButtonsForHoldScreen,\n    text: localeStrings.strings.call.moreButtonGalleryControlLabel,\n    subMenuProps: [{\n      itemKey: 'dynamicSelectionKey',\n      text: localeStrings.strings.call.moreButtonGalleryFloatingLocalLayoutLabel,\n      onItemClick: () => {\n        props.onUserSetGalleryLayout && props.onUserSetGalleryLayout('floatingLocalVideo');\n        onLightDismiss();\n      },\n      iconProps: {\n        iconName: 'FloatingLocalVideoGalleryLayout',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      secondaryIconProps: props.userSetGalleryLayout === 'floatingLocalVideo' ? {\n        iconName: 'Accept'\n      } : undefined\n    }, {\n      itemKey: 'focusedContentSelectionKey',\n      text: localeStrings.strings.call.moreButtonGalleryFocusedContentLayoutLabel,\n      onItemClick: () => {\n        props.onUserSetGalleryLayout && props.onUserSetGalleryLayout('focusedContent');\n        onLightDismiss();\n      },\n      iconProps: {\n        iconName: 'FocusedContentGalleryLayout',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      secondaryIconProps: props.userSetGalleryLayout === 'focusedContent' ? {\n        iconName: 'Accept'\n      } : undefined\n    }]\n  };\n  drawerMenuItems.push(galleryLayoutOptions);\n  if (drawerSelectionOptions !== false && isEnabled(drawerSelectionOptions?.peopleButton)) {\n    drawerMenuItems.push({\n      itemKey: 'people',\n      id: 'call-composite-drawer-people-button',\n      text: props.strings.peopleButtonLabel,\n      iconProps: {\n        iconName: 'MoreDrawerPeople'\n      },\n      onItemClick: props.onPeopleButtonClicked,\n      disabled: isDisabled(drawerSelectionOptions.peopleButton) || props.disableButtonsForHoldScreen\n    });\n  }\n  /*@conditional-compile-remove(rooms) */\n  const role = callAdapter.getState().call?.role;\n  /*@conditional-compile-remove(rooms) */\n  const hideRaiseHandButtonInRoomsCall = callAdapter.getState().isRoomsCall && role && ['Consumer', 'Unknown'].includes(role);\n\n  /* @conditional-compile-remove(raise-hand) */\n  if (drawerSelectionOptions !== false && isEnabled(drawerSelectionOptions?.raiseHandButton) && /*@conditional-compile-remove(rooms) */!hideRaiseHandButtonInRoomsCall) {\n    const raiseHandIcon = raiseHandButtonProps.checked ? 'LowerHandContextualMenuItem' : 'RaiseHandContextualMenuItem';\n    drawerMenuItems.push({\n      itemKey: 'raiseHandButtonKey',\n      disabled: props.disableButtonsForHoldScreen || isDisabled(drawerSelectionOptions.raiseHandButton),\n      text: raiseHandButtonProps.checked ? localeStrings.component.strings.raiseHandButton.onLabel : localeStrings.component.strings.raiseHandButton.offLabel,\n      onItemClick: () => {\n        if (raiseHandButtonProps.onToggleRaiseHand) {\n          raiseHandButtonProps.onToggleRaiseHand();\n        }\n        onLightDismiss();\n      },\n      iconProps: {\n        iconName: raiseHandIcon,\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  //Captions drawer menu\n  const supportedSpokenLanguageStrings = useLocale().strings.call.spokenLanguageStrings;\n\n  /* @conditional-compile-remove(close-captions) */\n  //Captions drawer menu\n  const supportedCaptionLanguageStrings = useLocale().strings.call.captionLanguageStrings;\n  /* @conditional-compile-remove(close-captions) */\n  const captionSettingsProp = useAdaptedSelector(_captionSettingsSelector);\n  /* @conditional-compile-remove(close-captions) */\n  const startCaptionsButtonHandlers = useHandlers(_StartCaptionsButton);\n  /* @conditional-compile-remove(close-captions) */\n  const captionSettingsHandlers = useHandlers(_CaptionsSettingsModal);\n\n  /* @conditional-compile-remove(close-captions) */\n  const [isSpokenLanguageDrawerOpen, setIsSpokenLanguageDrawerOpen] = useState<boolean>(false);\n\n  /* @conditional-compile-remove(close-captions) */\n  const [isCaptionLanguageDrawerOpen, setIsCaptionLanguageDrawerOpen] = useState<boolean>(false);\n\n  /* @conditional-compile-remove(close-captions) */\n  const [currentSpokenLanguage, setCurrentSpokenLanguage] = useState<keyof SpokenLanguageStrings>(captionSettingsProp.currentSpokenLanguage ?? 'en-us');\n\n  /* @conditional-compile-remove(close-captions) */\n  const [currentCaptionLanguage, setCurrentCaptionLanguage] = useState<keyof CaptionLanguageStrings>(captionSettingsProp.currentCaptionLanguage ?? _spokenLanguageToCaptionLanguage[currentSpokenLanguage]);\n\n  /* @conditional-compile-remove(close-captions) */\n  const onToggleChange = useCallback(async () => {\n    if (!captionSettingsProp.isCaptionsFeatureActive) {\n      await startCaptionsButtonHandlers.onStartCaptions({\n        spokenLanguage: currentSpokenLanguage\n      });\n    } else {\n      startCaptionsButtonHandlers.onStopCaptions();\n    }\n  }, [captionSettingsProp.isCaptionsFeatureActive, startCaptionsButtonHandlers, currentSpokenLanguage]);\n\n  /* @conditional-compile-remove(close-captions) */\n  if (props.isCaptionsSupported) {\n    const captionsDrawerItems: DrawerMenuItemProps[] = [];\n    const spokenLanguageString = supportedSpokenLanguageStrings ? supportedSpokenLanguageStrings[currentSpokenLanguage] : currentSpokenLanguage;\n    const captionLanguageString = supportedCaptionLanguageStrings ? supportedCaptionLanguageStrings[currentCaptionLanguage] : currentCaptionLanguage;\n    drawerMenuItems.push({\n      itemKey: 'captions',\n      id: 'common-call-composite-captions-button',\n      disabled: props.disableButtonsForHoldScreen,\n      text: props.strings.captionsMenuTitle,\n      iconProps: {\n        iconName: 'CaptionsIcon'\n      },\n      subMenuProps: captionsDrawerItems\n    });\n    captionsDrawerItems.push({\n      itemKey: 'ToggleCaptionsKey',\n      text: captionSettingsProp.isCaptionsFeatureActive ? localeStrings.strings.call.startCaptionsButtonTooltipOnContent : localeStrings.strings.call.startCaptionsButtonTooltipOffContent,\n      iconProps: {\n        iconName: captionSettingsProp.isCaptionsFeatureActive ? 'CaptionsOffIcon' : 'CaptionsIcon',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      onItemClick: onToggleChange,\n      disabled: props.disableButtonsForHoldScreen,\n      secondaryComponent: <Stack verticalFill verticalAlign=\"center\">\n          <Toggle id=\"common-call-composite-captions-toggle-button\" checked={captionSettingsProp.isCaptionsFeatureActive} styles={themedToggleButtonStyle(theme, captionSettingsProp.isCaptionsFeatureActive)} onChange={onToggleChange} />\n        </Stack>\n    });\n    captionsDrawerItems.push({\n      itemKey: 'ChangeSpokenLanguage',\n      text: props.strings.spokenLanguageMenuTitle,\n      id: 'common-call-composite-captions-spoken-settings-button',\n      secondaryText: spokenLanguageString,\n      iconProps: {\n        iconName: 'ChangeSpokenLanguageIcon',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      disabled: props.disableButtonsForHoldScreen || !captionSettingsProp.isCaptionsFeatureActive,\n      onItemClick: () => {\n        setIsSpokenLanguageDrawerOpen(true);\n      },\n      secondaryIconProps: {\n        iconName: 'ChevronRight',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      }\n    });\n    captionsDrawerItems.push({\n      itemKey: 'ChangeCaptionLanguage',\n      text: props.strings.captionLanguageMenuTitle,\n      id: 'common-call-composite-captions-subtitle-settings-button',\n      secondaryText: captionLanguageString,\n      iconProps: {\n        iconName: 'ChangeCaptionLanguageIcon',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      },\n      disabled: props.disableButtonsForHoldScreen || !captionSettingsProp.isCaptionsFeatureActive,\n      onItemClick: () => {\n        setIsCaptionLanguageDrawerOpen(true);\n      },\n      secondaryIconProps: {\n        iconName: 'ChevronRight',\n        styles: {\n          root: {\n            lineHeight: 0\n          }\n        }\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  const customDrawerButtons = useMemo(() => generateCustomCallDrawerButtons(onFetchCustomButtonPropsTrampoline(drawerSelectionOptions !== false ? drawerSelectionOptions : undefined), drawerSelectionOptions !== false ? drawerSelectionOptions?.displayType : undefined), [drawerSelectionOptions]);\n\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  customDrawerButtons['primary'].slice(CUSTOM_BUTTON_OPTIONS.MAX_PRIMARY_MOBILE_CUSTOM_BUTTONS).forEach(element => {\n    drawerMenuItems.push(element);\n  });\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  customDrawerButtons['secondary'].forEach(element => {\n    drawerMenuItems.push(element);\n  });\n  /* @conditional-compile-remove(control-bar-button-injection) */\n  customDrawerButtons['overflow'].forEach(element => {\n    drawerMenuItems.push(element);\n  });\n  /* @conditional-compile-remove(close-captions) */\n  return <>\n      {isSpokenLanguageDrawerOpen && props.isCaptionsSupported && <SpokenLanguageSettingsDrawer onLightDismiss={props.onLightDismiss} selectLanguage={setCurrentSpokenLanguage} setCurrentLanguage={captionSettingsHandlers.onSetSpokenLanguage} currentLanguage={currentSpokenLanguage} strings={{\n      menuTitle: props.strings.spokenLanguageMenuTitle\n    }} supportedLanguageStrings={supportedSpokenLanguageStrings} />}\n      {isCaptionLanguageDrawerOpen && props.isCaptionsSupported && <CaptionLanguageSettingsDrawer onLightDismiss={props.onLightDismiss} selectLanguage={setCurrentCaptionLanguage} setCurrentLanguage={captionSettingsHandlers.onSetCaptionLanguage} currentLanguage={currentCaptionLanguage} strings={{\n      menuTitle: props.strings.captionLanguageMenuTitle\n    }} supportedLanguageStrings={supportedCaptionLanguageStrings} />}\n      {!isSpokenLanguageDrawerOpen && !isCaptionLanguageDrawerOpen && <DrawerMenu items={drawerMenuItems} onLightDismiss={props.onLightDismiss} />}\n    </>;\n  return <DrawerMenu items={drawerMenuItems} onLightDismiss={props.onLightDismiss} />;\n};\nconst isDeviceSelected = (speaker: OptionsDevice, selectedSpeaker?: OptionsDevice): boolean => !!selectedSpeaker && speaker.id === selectedSpeaker.id;\nconst isEnabled = (option: unknown): boolean => option !== false;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallingBaseSelectorProps } from '@internal/calling-component-bindings';\nimport { OptionsDevice } from '@internal/react-components';\nimport * as reselect from 'reselect';\nimport { CallAdapterState } from '../../CallComposite/adapter/CallAdapter';\nimport { getDeviceManager } from '../../CallComposite/selectors/baseSelectors';\n\n/** @private */\nexport type MoreDrawerSelector = (state: CallAdapterState, props: CallingBaseSelectorProps) => {\n  microphones?: OptionsDevice[];\n  speakers?: OptionsDevice[];\n  selectedMicrophone?: OptionsDevice;\n  selectedSpeaker?: OptionsDevice;\n};\n\n/**\n * @private\n */\nexport const moreDrawerSelector: MoreDrawerSelector = reselect.createSelector([getDeviceManager], deviceManager => {\n  return {\n    microphones: deviceManager.microphones,\n    speakers: deviceManager.speakers,\n    selectedMicrophone: deviceManager.selectedMicrophone,\n    selectedSpeaker: deviceManager.selectedSpeaker\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useMemo } from 'react';\nimport { useCallWithChatCompositeStrings } from '../../CallWithChatComposite/hooks/useCallWithChatCompositeStrings';\nimport { MoreDrawer, MoreDrawerStrings } from './MoreDrawer';\nimport { moreDrawerSelector } from '../../CallWithChatComposite/selectors/moreDrawerSelector';\nimport { useSelector } from '../../CallComposite/hooks/useSelector';\nimport { useHandlers } from '../../CallComposite/hooks/useHandlers';\nimport { CommonCallControlOptions } from '../types/CommonCallControlOptions';\n/* @condtional-compile-remove(gallery-options) */\nimport { VideoGalleryLayout } from '@internal/react-components';\n\n/** @private */\nexport interface PreparedMoreDrawerProps {\n  onLightDismiss: () => void;\n  onPeopleButtonClicked: () => void;\n  callControls?: boolean | CommonCallControlOptions;\n  /* @conditional-compile-remove(close-captions) */\n  isCaptionsSupported?: boolean;\n  disableButtonsForHoldScreen?: boolean;\n  onUserSetGalleryLayout?: (layout: VideoGalleryLayout) => void;\n  userSetGalleryLayout?: VideoGalleryLayout;\n  onSetDialpadPage?: () => void;\n  dtmfDialerPresent?: boolean;\n}\n\n/** @private */\nexport const PreparedMoreDrawer = (props: PreparedMoreDrawerProps): JSX.Element => {\n  const strings = useCallWithChatCompositeStrings();\n  const moreDrawerStrings: MoreDrawerStrings = useMemo(() => ({\n    peopleButtonLabel: strings.peopleButtonLabel,\n    audioDeviceMenuTitle: strings.moreDrawerAudioDeviceMenuTitle,\n    microphoneMenuTitle: strings.moreDrawerMicrophoneMenuTitle,\n    speakerMenuTitle: strings.moreDrawerSpeakerMenuTitle,\n    /* @conditional-compile-remove(close-captions) */\n    captionsMenuTitle: strings.moreDrawerCaptionsMenuTitle,\n    /* @conditional-compile-remove(close-captions) */\n    spokenLanguageMenuTitle: strings.moreDrawerSpokenLanguageMenuTitle,\n    /* @conditional-compile-remove(close-captions) */\n    captionLanguageMenuTitle: strings.moreDrawerCaptionLanguageMenuTitle,\n    galleryOptionsMenuTitle: strings.moreDrawerGalleryOptionsMenuTitle\n  }), [strings]);\n  const deviceProps = useSelector(moreDrawerSelector);\n  const callHandlers = useHandlers(MoreDrawer);\n  return <MoreDrawer {...props} {...deviceProps} {...callHandlers} strings={moreDrawerStrings} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IPalette, IStackStyles, IStyle, mergeStyles } from '@fluentui/react';\nconst DEFAULT_Z_INDEX = 1;\nconst mainScreenContainerStyle: IStyle = {\n  height: '100%',\n  width: '100%'\n};\n\n/**\n * @private\n */\nexport const mainScreenContainerStyleDesktop = mergeStyles({\n  ...mainScreenContainerStyle,\n  minWidth: '30rem',\n  // max of min-width of composite pages (Call page)\n  minHeight: '22rem' // max height of min-height of composite pages (Configuration page)\n});\n\n/**\n * @private\n */\nexport const mainScreenContainerStyleMobile = mergeStyles({\n  ...mainScreenContainerStyle,\n  minWidth: '17.5rem',\n  // max of min-width of composite pages (Call page)\n  minHeight: '13rem' // max height of min-height of composite pages (Configuration page & Call page)\n});\n\n/**\n * @private\n * Drawer styles to be used to house the _DrawerComponent on top of other content on the screen.\n * @param zIndex: this defaults to DEFAULT_Z_INDEX if unset\n */\nexport const drawerContainerStyles = (zIndex: number = DEFAULT_Z_INDEX): IStackStyles => ({\n  root: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    // Any zIndex > 0 will work because this is the only absolutely\n    // positioned element in the container.\n    zIndex: zIndex\n  }\n});\n\n/**\n * @private\n * Page container style for leaving page\n */\nexport const leavingPageStyle = (palette: IPalette): IStyle => ({\n  background: palette.neutralLighterAlt\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, IButtonStyles, IStackStyles, IStackTokens } from '@fluentui/react';\nimport { CHAT_CONTAINER_MIN_WIDTH_REM } from '../constants';\nconst SIDE_PANE_PADDING_LR_REM = 0.25;\n\n/**\n * @private\n */\nexport const mobilePaneStyle = {\n  root: {\n    width: '100%',\n    height: '100%'\n  }\n};\n\n/**\n * @private\n */\nexport const hiddenMobilePaneStyle: IStackStyles = concatStyleSets(mobilePaneStyle, {\n  root: {\n    display: 'none'\n  }\n});\n\n/**\n * @private\n */\nexport const mobilePaneControlBarStyle: IStackStyles = {\n  root: {\n    height: '3rem'\n  }\n};\n\n/**\n * @private\n */\nexport const mobilePaneBackButtonStyles: IButtonStyles = {\n  root: {\n    border: 'none',\n    minWidth: '2.5rem',\n    maxWidth: '2.875rem',\n    height: '100%',\n    background: 'none',\n    padding: '0 1rem'\n  },\n  rootChecked: {\n    background: 'none'\n  },\n  rootCheckedHovered: {\n    background: 'none'\n  }\n};\n\n/**\n * @private\n */\nexport const mobilePaneHiddenIconStyles: IButtonStyles = concatStyleSets(mobilePaneBackButtonStyles, {\n  root: {\n    visibility: 'hidden'\n  }\n});\n\n/**\n * @private\n */\nexport const mobilePaneButtonStyles: IButtonStyles = {\n  root: {\n    border: 'none',\n    borderBottom: '0.125rem solid transparent',\n    width: '8rem',\n    height: '100%',\n    background: 'none',\n    padding: '0'\n  },\n  rootChecked: {\n    background: 'none'\n  },\n  rootCheckedHovered: {\n    background: 'none'\n  },\n  flexContainer: {\n    flexFlow: 'column',\n    display: 'contents'\n  },\n  label: {\n    fontSize: '1rem',\n    fontWeight: 100,\n    lineHeight: '2rem',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  },\n  labelChecked: {\n    fontWeight: 600\n  }\n};\n\n/**\n * @private\n */\nexport const hiddenStyles: IStackStyles = {\n  root: {\n    display: 'none'\n  }\n};\n\n/**\n * @private\n */\nexport const sidePaneStyles = (maxWidth?: string, minWidth?: string): IStackStyles => ({\n  root: {\n    height: 'auto',\n    width: '100%',\n    padding: `0.5rem ${SIDE_PANE_PADDING_LR_REM}rem`,\n    maxWidth: maxWidth ?? '21.5rem',\n    minWidth: minWidth ?? `${CHAT_CONTAINER_MIN_WIDTH_REM + SIDE_PANE_PADDING_LR_REM * 2}rem`\n  }\n});\n\n/**\n * @private\n */\nexport const availableSpaceStyles: IStackStyles = {\n  root: {\n    width: '100%',\n    height: '100%'\n  }\n};\n\n/**\n * @private\n */\nexport const sidePaneTokens: IStackTokens = {\n  childrenGap: '0.5rem'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { createContext, useContext } from 'react';\n\n/** @private */\nexport interface SidePaneRenderer {\n  /** Side pane header content to render */\n  headerRenderer?: () => JSX.Element;\n  /** Side pane body content to render */\n  contentRenderer?: () => JSX.Element;\n  /** An id for identifying the side pane in events like `onSidePaneIdChanged` */\n  id: string;\n}\n\n/** @private */\nexport type InjectedSidePaneProps = {\n  renderer: SidePaneRenderer;\n  /**\n   * Whether the side pane showing the override content is displayed\n   */\n  isActive: boolean;\n  /**\n   * Useful to ensure the side pane renders the content of the override even if the side pane is closed.\n   * This avoids remounting the content when the side pane is opened again.\n   * This typically improves performance of opening the side pane, but may impact the overall performance of the app.\n   *\n   * @default false\n   */\n  persistRenderingWhenClosed?: boolean;\n};\ninterface SidePaneContextProps {\n  sidePaneRenderer?: SidePaneRenderer;\n  overrideSidePane?: InjectedSidePaneProps;\n}\n\n/**\n * Context for side pane interaction\n *\n * @private\n */\nexport const SidePaneContext = createContext<SidePaneContextProps>({});\n\n/**\n * Props to LocalizationProvider\n *\n * @private\n */\nexport type SidePaneProviderProps = SidePaneContextProps & {\n  children: React.ReactNode;\n};\n\n/**\n * Provider to provide localized strings for this library's composites.\n *\n * @private\n */\nexport const SidePaneProvider = (props: SidePaneProviderProps): JSX.Element => {\n  return <SidePaneContext.Provider value={props}>{props.children}</SidePaneContext.Provider>;\n};\n\n/** @private */\nexport const useSidePaneContext = (): SidePaneContextProps => useContext(SidePaneContext);\n\n/** @private */\nexport const useIsSidePaneOpen = (): boolean => {\n  const {\n    sidePaneRenderer,\n    overrideSidePane\n  } = useSidePaneContext();\n  return !!(sidePaneRenderer || overrideSidePane?.isActive);\n};\n\n/** @private */\nexport const useIsParticularSidePaneOpen = (sidePaneId: string): boolean => {\n  const isSidePaneOpen = useIsSidePaneOpen();\n  const {\n    sidePaneRenderer\n  } = useSidePaneContext();\n  return isSidePaneOpen && sidePaneRenderer?.id === sidePaneId;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, DefaultButton, FocusZone, FocusZoneDirection, mergeStyles, Stack } from '@fluentui/react';\nimport { useTheme } from '@internal/react-components';\nimport React, { useMemo } from 'react';\nimport { CallWithChatCompositeIcon } from '../common/icons';\nimport { availableSpaceStyles, mobilePaneBackButtonStyles, mobilePaneButtonStyles, mobilePaneControlBarStyle, mobilePaneHiddenIconStyles } from './styles/Pane.styles';\nimport { useLocale } from '../localization';\n\n/** @private */\nexport interface MobileChatSidePaneTabHeaderProps {\n  onClick: () => void;\n  disabled: boolean;\n}\n\n/**\n * Props for {@link TabHeader} component\n */\ntype PeopleAndChatHeaderProps = {\n  onClose: () => void;\n  // If set, show a button to open chat tab.\n  onChatButtonClicked?: () => void;\n  // If set, show a button to open people tab.\n  onPeopleButtonClicked?: () => void;\n  activeTab: TabHeaderTab;\n  disableChatButton?: boolean;\n  disablePeopleButton?: boolean;\n  onHeaderMenuClick?: () => void;\n};\n\n/**\n * Legacy header to be removed when we make a breaking change.\n * @private\n */\nexport const PeopleAndChatHeader = (props: PeopleAndChatHeaderProps): JSX.Element => {\n  const {\n    onClose,\n    onChatButtonClicked,\n    onPeopleButtonClicked,\n    activeTab\n  } = props;\n  const theme = useTheme();\n  const strings = useLocale().strings.call;\n  const haveMultipleTabs = onChatButtonClicked && onPeopleButtonClicked;\n  const mobilePaneButtonStylesThemed = useMemo(() => {\n    return concatStyleSets(mobilePaneButtonStyles, {\n      root: {\n        width: '100%'\n      },\n      label: {\n        fontSize: theme.fonts.medium.fontSize,\n        fontWeight: theme.fonts.medium.fontWeight\n      }\n    }, haveMultipleTabs ? {\n      rootChecked: {\n        borderBottom: `0.125rem solid ${theme.palette.themePrimary}`\n      }\n    } : {});\n  }, [theme, haveMultipleTabs]);\n  return <Stack horizontal grow styles={mobilePaneControlBarStyle}>\n      <DefaultButton ariaLabel={strings.returnToCallButtonAriaLabel} ariaDescription={strings.returnToCallButtonAriaDescription} onClick={onClose} styles={mobilePaneBackButtonStyles} onRenderIcon={() => <CallWithChatCompositeIcon iconName=\"ChevronLeft\" />} autoFocus></DefaultButton>\n      <Stack.Item grow role=\"tablist\">\n        <FocusZone direction={FocusZoneDirection.horizontal} className={mergeStyles(availableSpaceStyles.root)}>\n          <Stack horizontal styles={availableSpaceStyles}>\n            <Stack.Item grow>\n              {onChatButtonClicked && <DefaultButton onClick={onChatButtonClicked} styles={mobilePaneButtonStylesThemed} checked={activeTab === 'chat'} aria-selected={activeTab === 'chat'} role={'tab'} disabled={props.disableChatButton}>\n                  {strings.chatButtonLabel}\n                </DefaultButton>}\n            </Stack.Item>\n            <Stack.Item grow>\n              {onPeopleButtonClicked && <DefaultButton onClick={onPeopleButtonClicked} styles={mobilePaneButtonStylesThemed} checked={activeTab === 'people'} aria-selected={activeTab === 'people'} role={'tab'} disabled={props.disablePeopleButton}>\n                  {strings.peopleButtonLabel}\n                </DefaultButton>}\n            </Stack.Item>\n          </Stack>\n        </FocusZone>\n      </Stack.Item>\n      {props.onHeaderMenuClick ? <DefaultButton ariaLabel={strings.peoplePaneMoreButtonAriaLabel} styles={concatStyleSets(mobilePaneBackButtonStyles, {\n      icon: {\n        display: 'flex',\n        alignItems: 'center'\n      }\n    })} iconProps={{\n      iconName: 'PeoplePaneMoreButton'\n    }} onClick={props.onHeaderMenuClick} /> : ( /* Hidden icon to take the same space as the actual back button on the left. */\n    <DefaultButton styles={mobilePaneHiddenIconStyles} onRenderIcon={() => <CallWithChatCompositeIcon iconName=\"ChevronLeft\" />}></DefaultButton>)}\n    </Stack>;\n};\n\n/**\n * Type used to define which tab is active in {@link TabHeader}\n */\nexport type TabHeaderTab = 'chat' | 'people';","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useCallback, useMemo } from 'react';\nimport { Stack } from '@fluentui/react';\nimport { containerContextStyles, paneBodyContainer, scrollableContainer, scrollableContainerContents } from '../../../common/styles/ParticipantContainer.styles';\nimport { availableSpaceStyles, sidePaneStyles, sidePaneTokens } from '../../../common/styles/Pane.styles';\nimport { SidePaneRenderer, useSidePaneContext } from './SidePaneProvider';\nimport { PeopleAndChatHeader } from '../../../common/TabHeader';\nimport { hiddenStyles } from '../../../common/styles/Pane.styles';\n\n/** @private */\nexport interface SidePaneProps {\n  updateSidePaneRenderer: (renderer: SidePaneRenderer | undefined) => void;\n  mobileView?: boolean;\n  maxWidth?: string;\n  minWidth?: string;\n\n  // legacy arguments to be removed in breaking change\n  disablePeopleButton?: boolean;\n  disableChatButton?: boolean;\n  onChatButtonClicked?: () => void;\n  onPeopleButtonClicked?: () => void;\n  onHeaderMenuClick?: () => void;\n}\n\n/** @private */\nexport const SidePane = (props: SidePaneProps): JSX.Element => {\n  const {\n    sidePaneRenderer,\n    overrideSidePane\n  } = useSidePaneContext();\n  const renderingHiddenOverrideContent = overrideSidePane?.renderer.contentRenderer && overrideSidePane.persistRenderingWhenClosed && !overrideSidePane.isActive;\n  const renderingOnlyHiddenContent = renderingHiddenOverrideContent && !sidePaneRenderer;\n  const widthConstrainedStyles = useMemo(() => sidePaneStyles(props.maxWidth, props.minWidth), [props.maxWidth, props.minWidth]);\n  const paneStyles = renderingOnlyHiddenContent ? hiddenStyles : props.mobileView ? availableSpaceStyles : widthConstrainedStyles;\n  const Header = (overrideSidePane?.isActive ? overrideSidePane.renderer.headerRenderer : sidePaneRenderer?.headerRenderer) ?? EmptyElement;\n\n  /**\n   * Legacy code to support old behavior of showing chat and people tab headers on mobile side pane.\n   * To be removed in breaking change.\n   */\n  const overrideSidePaneId = overrideSidePane?.isActive ? overrideSidePane.renderer.id : undefined;\n  const {\n    updateSidePaneRenderer\n  } = props;\n  const closePane = useCallback(() => {\n    updateSidePaneRenderer(undefined);\n  }, [updateSidePaneRenderer]);\n  const LegacyHeader = useMemo((): JSX.Element => {\n    return <PeopleAndChatHeader onClose={overrideSidePaneId === 'chat' ? props.onChatButtonClicked ?? noop : closePane} activeTab={sidePaneRenderer?.id === 'people' ? 'people' : 'chat'}\n    // legacy arguments to be removed in breaking change:\n    disablePeopleButton={props.disablePeopleButton} disableChatButton={props.disableChatButton} onPeopleButtonClicked={sidePaneRenderer?.id === 'people' ? noop : props.onPeopleButtonClicked} onChatButtonClicked={overrideSidePaneId === 'chat' ? noop : props.onChatButtonClicked} onHeaderMenuClick={props.onHeaderMenuClick} />;\n  }, [overrideSidePaneId, props.onChatButtonClicked, props.onPeopleButtonClicked, props.disablePeopleButton, props.disableChatButton, props.onHeaderMenuClick, sidePaneRenderer?.id, closePane]);\n  const HeaderToRender = props.mobileView && (overrideSidePaneId === 'chat' || sidePaneRenderer?.id === 'people') ? LegacyHeader : Header();\n  const ContentRender = overrideSidePane?.isActive ? undefined : sidePaneRenderer?.contentRenderer;\n  const OverrideContentRender = overrideSidePane?.isActive || overrideSidePane?.persistRenderingWhenClosed ? overrideSidePane.renderer.contentRenderer : undefined;\n  if (!ContentRender && !OverrideContentRender) {\n    return <EmptyElement />;\n  }\n  return <Stack verticalFill grow styles={paneStyles} data-ui-id=\"SidePane\" tokens={props.mobileView ? {} : sidePaneTokens}>\n      {HeaderToRender}\n      <Stack.Item verticalFill grow styles={paneBodyContainer}>\n        <Stack verticalFill styles={scrollableContainer}>\n          {ContentRender && <Stack.Item verticalFill styles={scrollableContainerContents}>\n              <Stack styles={containerContextStyles}>\n                <ContentRender />\n              </Stack>\n            </Stack.Item>}\n          {OverrideContentRender && <Stack.Item verticalFill styles={!overrideSidePane?.isActive && overrideSidePane?.persistRenderingWhenClosed ? hiddenStyles : scrollableContainerContents}>\n              <Stack styles={containerContextStyles}>\n                <OverrideContentRender />\n              </Stack>\n            </Stack.Item>}\n        </Stack>\n      </Stack.Item>\n    </Stack>;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = (): void => {};\nconst EmptyElement = (): JSX.Element => <></>;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CommandBarButton, DefaultButton, Stack, concatStyleSets } from '@fluentui/react';\nimport { useTheme } from '@internal/react-components';\nimport React, { useMemo } from 'react';\nimport { sidePaneHeaderContainerStyles, sidePaneHeaderStyles } from '../common/styles/ParticipantContainer.styles';\nimport { mobilePaneBackButtonStyles, mobilePaneButtonStyles, mobilePaneControlBarStyle, mobilePaneHiddenIconStyles } from './styles/Pane.styles';\nimport { CallWithChatCompositeIcon } from './icons';\n\n/**\n * @private\n */\nexport const SidePaneHeader = (props: {\n  headingText?: string;\n  dismissSidePaneButtonAriaLabel?: string;\n  dismissSidePaneButtonAriaDescription?: string;\n  onClose: () => void;\n  mobileView: boolean;\n}): JSX.Element => {\n  const theme = useTheme();\n  const sidePaneCloseButtonStyles = useMemo(() => ({\n    root: {\n      minWidth: '1.5rem',\n      padding: '0.5rem 0.25rem',\n      marginRight: '0.25rem',\n      backgroundColor: theme.semanticColors.bodyBackground\n    },\n    icon: {\n      color: theme.palette.neutralSecondary\n    },\n    iconHovered: {\n      color: theme.palette.neutralSecondary\n    },\n    iconPressed: {\n      color: theme.palette.neutralSecondary\n    }\n  }), [theme.palette.neutralSecondary, theme.semanticColors.bodyBackground]);\n  if (props.mobileView) {\n    return <SidePaneMobileHeader {...props} />;\n  }\n  return <Stack horizontal horizontalAlign=\"space-between\" styles={sidePaneHeaderContainerStyles} verticalAlign=\"center\">\n      <Stack.Item role=\"heading\" styles={sidePaneHeaderStyles}>\n        {props.headingText}\n      </Stack.Item>\n      {}\n      <Stack.Item>\n        <CommandBarButton ariaLabel={props.dismissSidePaneButtonAriaLabel} styles={sidePaneCloseButtonStyles} iconProps={{\n        iconName: 'cancel'\n      }} onClick={props.onClose} />\n      </Stack.Item>\n    </Stack>;\n};\nconst SidePaneMobileHeader = (props: {\n  headingText?: string;\n  dismissSidePaneButtonAriaLabel?: string;\n  dismissSidePaneButtonAriaDescription?: string;\n  onClose: () => void;\n}): JSX.Element => {\n  const {\n    headingText,\n    dismissSidePaneButtonAriaLabel,\n    dismissSidePaneButtonAriaDescription,\n    onClose\n  } = props;\n  const theme = useTheme();\n  const mobilePaneButtonStylesThemed = useMemo(() => {\n    return concatStyleSets(mobilePaneButtonStyles, {\n      root: {\n        width: '100%'\n      },\n      label: {\n        fontSize: theme.fonts.medium.fontSize,\n        fontWeight: theme.fonts.medium.fontWeight\n      }\n    });\n  }, [theme]);\n  return <Stack horizontal grow styles={mobilePaneControlBarStyle}>\n      <DefaultButton ariaLabel={dismissSidePaneButtonAriaLabel} ariaDescription={dismissSidePaneButtonAriaDescription} onClick={onClose} styles={mobilePaneBackButtonStyles} onRenderIcon={() => <CallWithChatCompositeIcon iconName=\"ChevronLeft\" />} autoFocus></DefaultButton>\n      <Stack.Item grow>\n        <DefaultButton checked={true} styles={mobilePaneButtonStylesThemed}>\n          {headingText}\n        </DefaultButton>\n      </Stack.Item>\n      {/* Hidden icon to take the same space as the actual back button on the left. */}\n      <DefaultButton styles={mobilePaneHiddenIconStyles} ariaHidden={true} onRenderIcon={() => <CallWithChatCompositeIcon iconName=\"ChevronLeft\" />}></DefaultButton>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useMemo } from 'react';\nimport { participantListContainerStyle, participantListMobileStyle, participantListStack, participantListStyle, participantListWrapper, displayNameStyles } from './styles/ParticipantContainer.styles';\nimport { ParticipantList, ParticipantListProps, ParticipantMenuItemsCallback } from '@internal/react-components';\nimport { FocusZone, Stack, Text, useTheme } from '@fluentui/react';\nimport { AvatarPersona, AvatarPersonaDataCallback } from './AvatarPersona';\nimport { useId } from '@fluentui/react-hooks';\nimport { _formatString } from '@internal/acs-ui-common';\ntype ParticipantContainerProps = {\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  participantListProps: ParticipantListProps;\n  title?: string;\n  isMobile?: boolean;\n};\n\n/**\n * @private\n */\nexport const ParticipantContainer = (props: ParticipantContainerProps): JSX.Element => {\n  const theme = useTheme();\n  const participantListWrapperClassName = useMemo(() => participantListWrapper(theme), [theme]);\n  return <Stack className={participantListWrapperClassName}>\n      <ParticipantListWithHeading {...props} />\n    </Stack>;\n};\n\n/**\n * @private\n */\nexport const ParticipantListWithHeading = (props: {\n  participantListProps: ParticipantListProps;\n  title?: string;\n  isMobile?: boolean;\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n}): JSX.Element => {\n  const {\n    onFetchAvatarPersonaData,\n    onFetchParticipantMenuItems,\n    title,\n    participantListProps\n  } = props;\n  const subheadingUniqueId = useId();\n  const theme = useTheme();\n  const subheadingStyleThemed = useMemo(() => ({\n    root: {\n      color: theme.palette.neutralSecondary,\n      margin: props.isMobile ? '0.5rem 1rem' : '0.5rem',\n      fontSize: theme.fonts.smallPlus.fontSize\n    }\n  }), [theme.palette.neutralSecondary, theme.fonts.smallPlus.fontSize, props.isMobile]);\n  return <Stack className={participantListStack}>\n      <Stack.Item styles={subheadingStyleThemed} aria-label={title} id={subheadingUniqueId}>\n        {paneTitleTrampoline(title ?? '')}\n      </Stack.Item>\n      <FocusZone className={participantListContainerStyle} shouldFocusOnMount={true}>\n        <ParticipantList {...participantListProps} styles={props.isMobile ? participantListMobileStyle : participantListStyle} onRenderAvatar={(userId, options) => <>\n              <AvatarPersona data-ui-id=\"chat-composite-participant-custom-avatar\" userId={userId} {...options} {...{\n          hidePersonaDetails: !!options?.text\n        }} dataProvider={onFetchAvatarPersonaData}\n        /* @conditional-compile-remove(raise-hand) */ allowActiveBorder={true} />\n              {options?.text && <Text nowrap={true} styles={displayNameStyles}>\n                  {options?.text}\n                </Text>}\n            </>} onFetchParticipantMenuItems={onFetchParticipantMenuItems} showParticipantOverflowTooltip={!props.isMobile} participantAriaLabelledBy={subheadingUniqueId} />\n      </FocusZone>\n    </Stack>;\n};\nconst paneTitleTrampoline = (paneTitle: string, totalParticipantCount?: number): string => {\n  const participantCountString = totalParticipantCount ? {\n    numberOfPeople: `(${totalParticipantCount})`\n  } : {\n    numberOfPeople: ' '\n  };\n  return _formatString(paneTitle, participantCountString);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IButtonStyles, IStackItemStyles, IStackStyles, IStackTokens, Theme } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const peoplePaneContainerTokens: IStackTokens = {\n  childrenGap: '0.5rem'\n};\n\n/**\n * @private\n */\nexport const peoplePaneContainerStyle: IStackItemStyles = {\n  root: {\n    position: 'relative',\n    maxHeight: '100%',\n    overflow: 'hidden'\n  }\n};\n\n/**\n * @private\n */\nexport const participantListContainerStyles: IStackItemStyles = {\n  root: {\n    overflowY: 'scroll'\n  }\n};\n\n/**\n * @private\n */\nexport const copyLinkButtonContainerStyles: IStackStyles = {\n  root: {\n    width: '100%',\n    padding: '0.5rem 1rem'\n  }\n};\n\n/**\n * @private\n */\nexport const copyLinkButtonStackStyles: IStackStyles = {\n  root: {\n    marginLeft: '0.5rem',\n    marginRight: '0.5rem'\n  }\n};\n\n/**\n * @private\n */\nexport const copyLinkButtonStyles: IButtonStyles = {\n  root: {\n    height: '2.5rem',\n    width: '100%'\n  },\n  textContainer: {\n    display: 'contents'\n  }\n};\n\n/**\n * @private\n */\nexport const linkIconStyles = {\n  marginRight: '0.5rem'\n};\n\n/**\n * @private\n */\nexport const localAndRemotePIPStyles: IStackStyles = {\n  root: {\n    marginRight: '1rem'\n  }\n};\n\n/**\n * @private\n */\nexport const themedCopyLinkButtonStyles = (mobileView: boolean | undefined, theme: Theme): Partial<IButtonStyles> => ({\n  root: {\n    minHeight: mobileView ? '3rem' : '2.5rem',\n    borderRadius: mobileView ? theme.effects.roundedCorner6 : theme.effects.roundedCorner4\n  }\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IContextualMenuItem } from '@fluentui/react';\nimport { _DrawerMenuItemProps } from '@internal/react-components';\n\n/**\n * Convert IContextualMenuItem to _DrawerMenuItemProps\n * @param contextualMenu - IContextualMenuItem to convert\n * @param onDrawerMenuItemClick - callback to call when converted DrawerMenuItem is clicked\n * @returns DrawerMenuItem\n * @private\n */\nexport const convertContextualMenuItemToDrawerMenuItem = (contextualMenu: IContextualMenuItem, onDrawerMenuItemClick: () => void): _DrawerMenuItemProps => {\n  return {\n    itemKey: contextualMenu.key,\n    onItemClick: () => {\n      contextualMenu.onClick?.();\n      onDrawerMenuItemClick();\n    },\n    iconProps: contextualMenu.iconProps,\n    text: contextualMenu.text,\n    disabled: contextualMenu.disabled\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, DefaultButton, IButtonStyles, PrimaryButton, Stack, useTheme } from '@fluentui/react';\nimport copy from 'copy-to-clipboard';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { CallWithChatCompositeStrings } from '../../index-public';\nimport { CallWithChatCompositeIcon } from './icons';\nimport { peoplePaneContainerTokens } from './styles/ParticipantContainer.styles';\nimport { copyLinkButtonContainerStyles, copyLinkButtonStackStyles, copyLinkButtonStyles, linkIconStyles, themedCopyLinkButtonStyles } from './styles/PeoplePaneContent.styles';\nimport { Announcer } from '@internal/react-components';\n\n/** @private */\nexport interface AddPeopleButtonProps {\n  inviteLink?: string;\n  mobileView?: boolean;\n  participantList?: JSX.Element;\n  strings: CallWithChatCompositeStrings;\n  alternateCallerId?: string;\n}\n\n/** @private */\nexport const AddPeopleButton = (props: AddPeopleButtonProps): JSX.Element => {\n  const {\n    inviteLink,\n    mobileView,\n    strings,\n    participantList\n  } = props;\n  const theme = useTheme();\n  const [copyInviteLinkAnnouncerStrings, setCopyInviteLinkAnnouncerStrings] = useState<string>('');\n  const copyLinkButtonStylesThemed = useMemo((): IButtonStyles => concatStyleSets(copyLinkButtonStyles, themedCopyLinkButtonStyles(mobileView, theme)), [mobileView, theme]);\n  /**\n   * sets the announcement string for when the link is copied.\n   */\n  const toggleAnnouncerString = useCallback(() => {\n    setCopyInviteLinkAnnouncerStrings(strings.copyInviteLinkActionedAriaLabel);\n    /**\n     * Clears the announcer string after the user clicks the\n     * copyInviteLink button allowing it to be re-announced.\n     */\n    setTimeout(() => {\n      setCopyInviteLinkAnnouncerStrings('');\n    }, 3000);\n  }, [strings.copyInviteLinkActionedAriaLabel]);\n  if (mobileView) {\n    return <Stack>\n        {inviteLink && <Stack.Item styles={copyLinkButtonContainerStyles}>\n            <Announcer announcementString={copyInviteLinkAnnouncerStrings} ariaLive={'polite'} />\n            <PrimaryButton onClick={() => {\n          copy(inviteLink ?? '');\n          toggleAnnouncerString();\n        }} styles={copyLinkButtonStylesThemed} onRenderIcon={() => <CallWithChatCompositeIcon iconName=\"Link\" style={linkIconStyles} />} text={strings.copyInviteLinkButtonLabel} />\n          </Stack.Item>}\n      </Stack>;\n  } else {\n    return <Stack tokens={peoplePaneContainerTokens} data-ui-id=\"people-pane-content\" verticalFill>\n        {inviteLink && <Stack styles={copyLinkButtonStackStyles}>\n            <Announcer announcementString={copyInviteLinkAnnouncerStrings} ariaLive={'polite'} />\n            <DefaultButton text={strings.copyInviteLinkButtonLabel} onRenderIcon={() => <CallWithChatCompositeIcon iconName=\"Link\" style={linkIconStyles} />} onClick={() => {\n          copy(inviteLink ?? '');\n          toggleAnnouncerString();\n        }} styles={copyLinkButtonStylesThemed} />\n          </Stack>}\n        <Stack.Item grow styles={{\n        root: {\n          overflowY: 'hidden'\n        }\n      }}>\n          {participantList}\n        </Stack.Item>\n      </Stack>;\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IContextualMenuItem, Stack } from '@fluentui/react';\nimport { ParticipantList, ParticipantListParticipant, ParticipantListProps, ParticipantMenuItemsCallback, _DrawerMenuItemProps } from '@internal/react-components';\nimport React, { useCallback, useMemo } from 'react';\nimport { CallWithChatCompositeStrings } from '../CallWithChatComposite';\nimport { usePropsFor } from '../CallComposite/hooks/usePropsFor';\nimport { AvatarPersonaDataCallback } from '../common/AvatarPersona';\nimport { ParticipantListWithHeading } from '../common/ParticipantContainer';\nimport { peoplePaneContainerTokens } from '../common/styles/ParticipantContainer.styles';\nimport { participantListContainerStyles, peoplePaneContainerStyle } from './styles/PeoplePaneContent.styles';\nimport { convertContextualMenuItemToDrawerMenuItem } from './ConvertContextualMenuItemToDrawerMenuItem';\nimport { CommonCallAdapter } from '../CallComposite';\nimport { AddPeopleButton } from './AddPeopleButton';\nimport { useAdapter } from '../CallComposite/adapter/CallAdapterProvider';\nimport { useLocale } from '../localization';\n\n/**\n * @private\n */\nexport const PeoplePaneContent = (props: {\n  inviteLink?: string;\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  setDrawerMenuItems: (drawerMenuItems: _DrawerMenuItemProps[]) => void;\n  mobileView?: boolean;\n}): JSX.Element => {\n  const {\n    inviteLink,\n    onFetchParticipantMenuItems,\n    setDrawerMenuItems\n  } = props;\n  const adapter = useAdapter();\n  const localeStrings = useLocale();\n\n  // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n  const getStrings = () => {\n    return localeStrings.strings.callWithChat;\n  };\n  const strings = getStrings();\n  const removeParticipantFromCall = useCallback(async (participantId: string): Promise<void> => {\n    await adapter.removeParticipant(participantId);\n  }, [adapter]);\n  const participantListDefaultProps = usePropsFor(ParticipantList);\n  const removeButtonAllowed = hasRemoveParticipantsPermissionTrampoline(adapter);\n  const setDrawerMenuItemsForParticipant: (participant?: ParticipantListParticipant) => void = useMemo(() => {\n    return (participant?: ParticipantListParticipant) => {\n      if (participant) {\n        let contextualMenuItems: IContextualMenuItem[] = createDefaultContextualMenuItems(participant, strings, removeButtonAllowed && participant.isRemovable ? participantListDefaultProps.onRemoveParticipant : undefined, participantListDefaultProps.myUserId);\n        if (onFetchParticipantMenuItems) {\n          contextualMenuItems = onFetchParticipantMenuItems(participant.userId, participantListDefaultProps.myUserId, contextualMenuItems);\n        }\n        const drawerMenuItems = contextualMenuItems.map((contextualMenu: IContextualMenuItem) => convertContextualMenuItemToDrawerMenuItem(contextualMenu, () => setDrawerMenuItems([])));\n        setDrawerMenuItems(drawerMenuItems);\n      }\n    };\n  }, [strings, participantListDefaultProps.onRemoveParticipant, participantListDefaultProps.myUserId, removeButtonAllowed, onFetchParticipantMenuItems, setDrawerMenuItems]);\n  const participantListProps: ParticipantListProps = useMemo(() => {\n    const onRemoveAParticipant = async (participantId: string): Promise<void> => removeParticipantFromCall(participantId);\n    return {\n      ...participantListDefaultProps,\n      // Passing undefined callback for mobile to avoid context menus for participants in ParticipantList are clicked\n      onRemoveParticipant: props.mobileView ? undefined : onRemoveAParticipant,\n      // We want the drawer menu items to appear when participants in ParticipantList are clicked\n      onParticipantClick: props.mobileView ? setDrawerMenuItemsForParticipant : undefined\n    };\n  }, [participantListDefaultProps, props.mobileView, setDrawerMenuItemsForParticipant, removeParticipantFromCall]);\n  const participantList = <ParticipantListWithHeading isMobile={props.mobileView} participantListProps={participantListProps} onFetchAvatarPersonaData={props.onFetchAvatarPersonaData} onFetchParticipantMenuItems={props.mobileView ? undefined : onFetchParticipantMenuItems} title={strings.peoplePaneSubTitle} />;\n  if (props.mobileView) {\n    return <Stack verticalFill styles={peoplePaneContainerStyle} tokens={peoplePaneContainerTokens} data-ui-id=\"people-pane-content\">\n        <Stack.Item grow styles={participantListContainerStyles}>\n          {participantList}\n        </Stack.Item>\n\n        <AddPeopleButton inviteLink={inviteLink} mobileView={props.mobileView} participantList={participantList} strings={strings} />\n      </Stack>;\n  }\n  return <AddPeopleButton inviteLink={inviteLink} mobileView={props.mobileView} participantList={participantList} strings={strings} />;\n};\n\n/**\n * Create default contextual menu items for particant\n * @param participant - participant to create contextual menu items for\n * @param strings - localized strings for menu item text\n * @param onRemoveParticipant - callback to remove participant\n * @param localParticipantUserId - Local participant user id\n * @returns - IContextualMenuItem[]\n */\nconst createDefaultContextualMenuItems = (participant: ParticipantListParticipant, strings: CallWithChatCompositeStrings, onRemoveParticipant?: (userId: string) => Promise<void>, localParticipantUserId?: string): IContextualMenuItem[] => {\n  const menuItems: IContextualMenuItem[] = [];\n  if (onRemoveParticipant && participant?.userId !== localParticipantUserId) {\n    menuItems.push({\n      key: 'remove',\n      text: strings.removeMenuLabel,\n      onClick: () => {\n        if (participant?.userId) {\n          onRemoveParticipant?.(participant?.userId);\n        }\n      },\n      iconProps: {\n        iconName: 'UserRemove'\n      },\n      'data-ui-id': 'participant-list-remove-participant-button'\n    });\n  }\n  return menuItems;\n};\n\n/**\n * @private\n */\nconst hasRemoveParticipantsPermissionTrampoline = (adapter: CommonCallAdapter): boolean => {\n  /* @conditional-compile-remove(rooms) */\n  const role = adapter.getState().call?.role;\n  /* @conditional-compile-remove(rooms) */\n  const canRemove = role === 'Presenter' || role === 'Unknown' || role === undefined;\n  /* @conditional-compile-remove(rooms) */\n  return canRemove;\n  // Return true if stable.\n  return true;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { RefObject, useCallback, useEffect, useMemo } from 'react';\nimport { SidePaneRenderer, useIsParticularSidePaneOpen } from './SidePaneProvider';\nimport { SidePaneHeader } from '../../../common/SidePaneHeader';\nimport { PeoplePaneContent } from '../../../common/PeoplePaneContent';\nimport { useLocale } from '../../../localization';\nimport { ParticipantMenuItemsCallback, _DrawerMenuItemProps } from '@internal/react-components';\nimport { AvatarPersonaDataCallback } from '../../../common/AvatarPersona';\nimport { IButton } from '@fluentui/react';\nconst PEOPLE_SIDE_PANE_ID = 'people';\n\n/** @private */\nexport const usePeoplePane = (props: {\n  updateSidePaneRenderer: (renderer: SidePaneRenderer | undefined) => void;\n  setDrawerMenuItems: (items: _DrawerMenuItemProps[]) => void;\n  inviteLink?: string;\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  mobileView?: boolean;\n  peopleButtonRef?: RefObject<IButton>;\n}): {\n  openPeoplePane: () => void;\n  closePeoplePane: () => void;\n  isPeoplePaneOpen: boolean;\n} => {\n  const {\n    updateSidePaneRenderer,\n    inviteLink,\n    onFetchAvatarPersonaData,\n    onFetchParticipantMenuItems,\n    setDrawerMenuItems,\n    mobileView,\n    peopleButtonRef\n  } = props;\n  const closePane = useCallback(() => {\n    updateSidePaneRenderer(undefined);\n    peopleButtonRef?.current?.focus();\n  }, [peopleButtonRef, updateSidePaneRenderer]);\n  const localeStrings = useLocale().strings.call;\n  const onRenderHeader = useCallback(() => <SidePaneHeader onClose={closePane} headingText={localeStrings.peoplePaneTitle} dismissSidePaneButtonAriaLabel={localeStrings.dismissSidePaneButtonLabel} mobileView={mobileView ?? false} />, [mobileView, closePane, localeStrings]);\n  let _onFetchParticipantMenuItems = onFetchParticipantMenuItems;\n  const onRenderContent = useCallback((): JSX.Element => {\n    return <PeoplePaneContent inviteLink={inviteLink} onFetchAvatarPersonaData={onFetchAvatarPersonaData} onFetchParticipantMenuItems={_onFetchParticipantMenuItems} setDrawerMenuItems={setDrawerMenuItems} mobileView={mobileView} />;\n  }, [inviteLink, mobileView, onFetchAvatarPersonaData, _onFetchParticipantMenuItems, setDrawerMenuItems]);\n  const sidePaneRenderer: SidePaneRenderer = useMemo(() => ({\n    headerRenderer: onRenderHeader,\n    contentRenderer: onRenderContent,\n    id: PEOPLE_SIDE_PANE_ID\n  }), [onRenderContent, onRenderHeader]);\n  const openPane = useCallback(() => {\n    updateSidePaneRenderer(sidePaneRenderer);\n  }, [sidePaneRenderer, updateSidePaneRenderer]);\n  const isOpen = useIsParticularSidePaneOpen(PEOPLE_SIDE_PANE_ID);\n\n  // Update pane renderer if it is open and the openPane dep changes\n  useEffect(() => {\n    if (isOpen) {\n      openPane();\n    }\n  }, [isOpen, openPane]);\n  return {\n    openPeoplePane: openPane,\n    closePeoplePane: closePane,\n    isPeoplePaneOpen: isOpen\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(video-background-effects) */\nimport * as reselect from 'reselect';\n/* @conditional-compile-remove(video-background-effects) */\nimport { getSelectedVideoEffect } from './baseSelectors';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffect } from '../adapter/CallAdapter';\n\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * @private\n */\nexport const activeVideoBackgroundEffectSelector = reselect.createSelector([getSelectedVideoEffect], (selectedVideoBackgroundEffect?: VideoBackgroundEffect) => {\n  if (selectedVideoBackgroundEffect && (selectedVideoBackgroundEffect.effectName === 'blur' || selectedVideoBackgroundEffect.effectName === 'none')) {\n    return selectedVideoBackgroundEffect.effectName;\n  } else if (selectedVideoBackgroundEffect && selectedVideoBackgroundEffect.effectName === 'replacement') {\n    return selectedVideoBackgroundEffect?.key;\n  }\n  return 'none';\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _isInCall, _isPreviewOn } from '@internal/calling-component-bindings';\nimport { LocalVideoStreamState } from '@internal/calling-stateful-client';\nimport * as reselect from 'reselect';\nimport { getDeviceManager, getLocalVideoStreams } from './baseSelectors';\nimport { callStatusSelector } from './callStatusSelector';\n\n/**\n * @private\n */\nexport const localVideoSelector = reselect.createSelector([callStatusSelector, getDeviceManager, getLocalVideoStreams], (callStatus, deviceManager, localVideoStreams) => {\n  let localVideoStream: LocalVideoStreamState | undefined;\n  if (_isInCall(callStatus.callStatus)) {\n    localVideoStream = localVideoStreams?.find(i => i.mediaStreamType === 'Video');\n  } else if (_isPreviewOn(deviceManager)) {\n    // TODO: we should take in a LocalVideoStream that developer wants to use as their 'Preview' view. We should also\n    // handle cases where 'Preview' view is in progress and not necessary completed.\n    localVideoStream = deviceManager.unparentedViews[0];\n  }\n  return {\n    isAvailable: !!localVideoStream,\n    isMirrored: localVideoStream?.view?.isMirrored,\n    renderElement: localVideoStream?.view?.target,\n    /* @conditional-compile-remove(video-background-effects) */\n    activeVideoEffects: localVideoStream?.videoEffects\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\n/* @conditional-compile-remove(video-background-effects) */\nimport { useCallback, useMemo } from 'react';\n/* @conditional-compile-remove(video-background-effects) */\nimport { MessageBar, MessageBarType, Stack, mergeStyles } from '@fluentui/react';\n/* @conditional-compile-remove(video-background-effects) */\nimport { useLocale } from '../localization';\nimport { ActiveErrorMessage, _VideoEffectsItemProps } from '@internal/react-components';\n/* @conditional-compile-remove(video-background-effects) */\nimport { _VideoBackgroundEffectsPicker } from '@internal/react-components';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundImage, VideoBackgroundBlurEffect, VideoBackgroundNoEffect, VideoBackgroundReplacementEffect } from '../CallComposite';\n/* @conditional-compile-remove(video-background-effects) */\nimport { activeVideoBackgroundEffectSelector } from '../CallComposite/selectors/activeVideoBackgroundEffectSelector';\n/* @conditional-compile-remove(video-background-effects) */\nimport { useSelector } from '../CallComposite/hooks/useSelector';\n/* @conditional-compile-remove(video-background-effects) */\nimport { useAdapter } from '../CallComposite/adapter/CallAdapterProvider';\n/* @conditional-compile-remove(video-background-effects) */\nimport { localVideoSelector } from '../CallComposite/selectors/localVideoStreamSelector';\nimport { ActiveVideoEffect } from '../CallComposite/components/SidePane/useVideoEffectsPane';\n\n/**\n * Pane that is used to show video effects button\n * @private\n */\n/** @beta */\nexport const VideoEffectsPaneContent = (props: {\n  activeVideoEffectError?: ActiveErrorMessage;\n  onDismissError: (error: ActiveErrorMessage) => void;\n  activeVideoEffectChange: (effect: ActiveVideoEffect) => void;\n}): JSX.Element => {\n  const {\n    onDismissError,\n    activeVideoEffectError,\n    /* @conditional-compile-remove(video-background-effects) */\n    activeVideoEffectChange\n  } = props;\n  /* @conditional-compile-remove(video-background-effects) */\n  const locale = useLocale();\n  /* @conditional-compile-remove(video-background-effects) */\n  const adapter = useAdapter();\n  /* @conditional-compile-remove(video-background-effects) */\n  const strings = locale.strings.call;\n  /* @conditional-compile-remove(video-background-effects) */\n  const activeVideoEffects = useSelector(localVideoSelector).activeVideoEffects?.activeEffects;\n  /* @conditional-compile-remove(video-background-effects) */\n  const selectableVideoEffects: _VideoEffectsItemProps[] = useMemo(() => {\n    const videoEffects: _VideoEffectsItemProps[] = [{\n      itemKey: 'none',\n      iconProps: {\n        iconName: 'RemoveVideoBackgroundEffect'\n      },\n      title: strings.removeBackgroundEffectButtonLabel,\n      tooltipProps: {\n        content: strings.removeBackgroundTooltip\n      }\n    }, {\n      itemKey: 'blur',\n      iconProps: {\n        iconName: 'BlurVideoBackground'\n      },\n      title: strings.blurBackgroundEffectButtonLabel,\n      tooltipProps: {\n        content: strings.blurBackgroundTooltip\n      }\n    }];\n    const videoEffectImages = adapter.getState().videoBackgroundImages;\n    if (videoEffectImages) {\n      videoEffectImages.forEach((img: VideoBackgroundImage) => {\n        videoEffects.push({\n          itemKey: img.key,\n          backgroundProps: {\n            url: img.url\n          },\n          tooltipProps: {\n            content: img.tooltipText ?? ''\n          }\n        });\n      });\n    }\n    return videoEffects;\n  }, [strings, adapter]);\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const onEffectChange = useCallback(async (effectKey: string) => {\n    if (effectKey === 'blur') {\n      const blurEffect: VideoBackgroundBlurEffect = {\n        effectName: effectKey\n      };\n      activeVideoEffectChange({\n        type: 'blur',\n        timestamp: new Date(Date.now())\n      });\n      await adapter.startVideoBackgroundEffect(blurEffect);\n      adapter.updateSelectedVideoBackgroundEffect(blurEffect);\n    } else if (effectKey === 'none') {\n      const noneEffect: VideoBackgroundNoEffect = {\n        effectName: effectKey\n      };\n      await adapter.stopVideoBackgroundEffects();\n      adapter.updateSelectedVideoBackgroundEffect(noneEffect);\n    } else {\n      const backgroundImg = selectableVideoEffects.find(effect => {\n        return effect.itemKey === effectKey;\n      });\n      if (backgroundImg && backgroundImg.backgroundProps) {\n        const replaceEffect: VideoBackgroundReplacementEffect = {\n          effectName: 'replacement',\n          key: effectKey,\n          backgroundImageUrl: backgroundImg.backgroundProps.url\n        };\n        activeVideoEffectChange({\n          type: 'replacement',\n          timestamp: new Date(Date.now())\n        });\n        await adapter.startVideoBackgroundEffect(replaceEffect);\n        adapter.updateSelectedVideoBackgroundEffect(replaceEffect);\n      }\n    }\n  }, [adapter, activeVideoEffectChange, selectableVideoEffects]);\n\n  /* @conditional-compile-remove(video-background-effects) */\n  if (activeVideoEffectError && activeVideoEffects && activeVideoEffects.length === 0) {\n    const noneEffect: VideoBackgroundNoEffect = {\n      effectName: 'none'\n    };\n    adapter.updateSelectedVideoBackgroundEffect(noneEffect);\n  }\n  return VideoEffectsPaneTrampoline(onDismissError, activeVideoEffectError, /* @conditional-compile-remove(video-background-effects) */\n  selectableVideoEffects, /* @conditional-compile-remove(video-background-effects) */\n  onEffectChange);\n};\nconst VideoEffectsPaneTrampoline = (onDismissError: (error: ActiveErrorMessage) => void, activeVideoEffectError?: ActiveErrorMessage, selectableVideoEffects?: _VideoEffectsItemProps[], onEffectChange?: (effectKey: string) => Promise<void>): JSX.Element => {\n  /* @conditional-compile-remove(video-background-effects) */\n  const selectedEffect = useSelector(activeVideoBackgroundEffectSelector);\n  /* @conditional-compile-remove(video-background-effects) */\n  const isCameraOn = useSelector(localVideoSelector).isAvailable;\n  /* @conditional-compile-remove(video-background-effects) */\n  const showWarning = !isCameraOn && selectedEffect !== 'none';\n  /* @conditional-compile-remove(video-background-effects) */\n  const locale = useLocale();\n\n  /* @conditional-compile-remove(video-background-effects) */\n  return <Stack tokens={{\n    childrenGap: '0.75rem'\n  }} className={mergeStyles({\n    paddingLeft: '0.5rem'\n  })}>\n      {activeVideoEffectError && isCameraOn && <MessageBar messageBarType={MessageBarType.error} onDismiss={() => onDismissError(activeVideoEffectError)}>\n          {locale.strings.call.unableToStartVideoEffect}\n        </MessageBar>}\n      {showWarning && <MessageBar messageBarType={MessageBarType.warning}>\n          {locale.strings.call.cameraOffBackgroundEffectWarningText}\n        </MessageBar>}\n      <_VideoBackgroundEffectsPicker label={locale.strings.call.videoEffectsPaneBackgroundSelectionTitle} styles={backgroundPickerStyles} options={selectableVideoEffects ?? []} onChange={onEffectChange} selectedEffectKey={selectedEffect} />\n    </Stack>;\n  return <></>;\n};\n\n/* @conditional-compile-remove(video-background-effects) */\nconst backgroundPickerStyles = {\n  label: {\n    fontSize: '0.75rem',\n    lineHeight: '0.5rem',\n    fontWeight: '400'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { SidePaneRenderer, useIsParticularSidePaneOpen } from './SidePaneProvider';\nimport { SidePaneHeader } from '../../../common/SidePaneHeader';\n/* @conditional-compile-remove(video-background-effects) */\nimport { useLocale } from '../../../localization';\nimport { VideoEffectsPaneContent } from '../../../common/VideoEffectsPane';\nimport { ActiveErrorMessage } from '@internal/react-components';\nimport { IButton } from '@fluentui/react';\n\n/** @private */\nexport const VIDEO_EFFECTS_SIDE_PANE_ID = 'videoeffects';\n\n/** @private */\nexport const VIDEO_EFFECTS_SIDE_PANE_WIDTH_REM = 17.5;\n\n/** @private */\nexport const useVideoEffectsPane = (updateSidePaneRenderer: (renderer: SidePaneRenderer | undefined) => void, mobileView: boolean, latestErrors: ActiveErrorMessage[], onDismissError: (error: ActiveErrorMessage) => void, cameraButtonRef?: React.RefObject<IButton>): {\n  openVideoEffectsPane: () => void;\n  closeVideoEffectsPane: () => void;\n  toggleVideoEffectsPane: () => void;\n  isVideoEffectsPaneOpen: boolean;\n} => {\n  const closePane = useCallback(() => {\n    updateSidePaneRenderer(undefined);\n    cameraButtonRef?.current?.focus();\n  }, [cameraButtonRef, updateSidePaneRenderer]);\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const locale = useLocale();\n  const onRenderHeader = useCallback(() => {\n    return <SidePaneHeader onClose={closePane}\n    /* @conditional-compile-remove(video-background-effects) */ headingText={locale.strings.call.videoEffectsPaneTitle}\n    /* @conditional-compile-remove(video-background-effects) */ dismissSidePaneButtonAriaLabel={locale.strings.call.dismissSidePaneButtonLabel ?? locale.strings.callWithChat.dismissSidePaneButtonLabel ?? 'Close'} mobileView={mobileView} />;\n  }, [closePane, /* @conditional-compile-remove(video-background-effects) */locale.strings, mobileView]);\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const latestVideoEffectError = latestErrors.find(error => error.type === 'unableToStartVideoEffect');\n  const onRenderContent = useCallback((): JSX.Element => {\n    return <VideoEffectsPaneContent onDismissError={onDismissError}\n    /* @conditional-compile-remove(video-background-effects) */ activeVideoEffectError={latestVideoEffectError} activeVideoEffectChange={() => {\n      // Clear any existing video effects error when the user clicks on a new video effect\n      /* @conditional-compile-remove(video-background-effects) */\n      latestVideoEffectError && onDismissError?.(latestVideoEffectError);\n    }} />;\n  }, [/* @conditional-compile-remove(video-background-effects) */\n  latestVideoEffectError, onDismissError]);\n  const sidePaneRenderer: SidePaneRenderer = useMemo(() => ({\n    headerRenderer: onRenderHeader,\n    contentRenderer: onRenderContent,\n    id: VIDEO_EFFECTS_SIDE_PANE_ID\n  }), [onRenderContent, onRenderHeader]);\n  const openPane = useCallback(() => {\n    updateSidePaneRenderer(sidePaneRenderer);\n  }, [sidePaneRenderer, updateSidePaneRenderer]);\n  const isOpen = useIsParticularSidePaneOpen(VIDEO_EFFECTS_SIDE_PANE_ID);\n\n  // Update pane renderer if it is open and the openPane dep changes\n  useEffect(() => {\n    if (isOpen) {\n      openPane();\n    }\n  }, [isOpen, openPane]);\n  const togglePane = useCallback(() => {\n    if (isOpen) {\n      closePane();\n    } else {\n      openPane();\n    }\n  }, [closePane, isOpen, openPane]);\n  return {\n    openVideoEffectsPane: openPane,\n    closeVideoEffectsPane: closePane,\n    toggleVideoEffectsPane: togglePane,\n    isVideoEffectsPaneOpen: isOpen\n  };\n};\n\n/**\n * Active video effect with timestamp.\n *\n * @private\n */\nexport interface ActiveVideoEffect {\n  /**\n   * Type of video effect that is active.\n   */\n  type: 'blur' | 'replacement';\n  /**\n   * The latest timestamp when this effect was activated.\n   *\n   */\n  timestamp: Date;\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useMemo } from 'react';\nimport { CreateVideoStreamViewResult, VideoGalleryStream, VideoStreamOptions, _LocalVideoTile, _RemoteVideoTile, _PictureInPictureInPicture, _PictureInPictureInPictureTileProps } from '@internal/react-components';\nimport { useLocale } from '../../localization';\n\n/* @conditional-compile-remove(raise-hand) */\nimport { RaisedHand } from '@internal/react-components';\n\n/**\n * @private\n */\nexport interface LocalAndRemotePIPProps {\n  localParticipant: {\n    displayName?: string;\n    videoStream?: VideoGalleryStream;\n    /* @conditional-compile-remove(raise-hand) */\n    raisedHand?: RaisedHand;\n  };\n  dominantRemoteParticipant?: {\n    userId: string;\n    displayName?: string;\n    videoStream?: VideoGalleryStream;\n  };\n\n  /** Callback to create the local video stream view */\n  onCreateLocalStreamView?: (options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  /** Callback to dispose of the local video stream view */\n  onDisposeLocalStreamView?: () => void;\n  /** Callback to create a remote video stream view */\n  onCreateRemoteStreamView?: (userId: string, options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  /** Callback to dispose a remote video stream view */\n  onDisposeRemoteStreamView?: (userId: string) => Promise<void>;\n  onClick?: () => void;\n}\n\n/**\n * @private\n */\nexport const LocalAndRemotePIP = (props: LocalAndRemotePIPProps): JSX.Element => {\n  const {\n    localParticipant,\n    dominantRemoteParticipant,\n    onCreateLocalStreamView,\n    onDisposeLocalStreamView,\n    onCreateRemoteStreamView,\n    onDisposeRemoteStreamView\n  } = props;\n  const localVideoTileProps = useMemo(() => ({\n    onCreateLocalStreamView,\n    onDisposeLocalStreamView,\n    localVideoViewOptions,\n    displayName: localParticipant.displayName,\n    showLabel: false,\n    showMuteIndicator: false,\n    showCameraSwitcherInLocalPreview: false,\n    isAvailable: localParticipant.videoStream?.isAvailable,\n    renderElement: localParticipant.videoStream?.renderElement,\n    /* @conditional-compile-remove(raise-hand) */\n    raisedHand: localParticipant.raisedHand\n  }), [localParticipant.displayName, localParticipant.videoStream?.isAvailable, localParticipant.videoStream?.renderElement, onCreateLocalStreamView, onDisposeLocalStreamView, /* @conditional-compile-remove(raise-hand) */\n  localParticipant.raisedHand]);\n  const remoteVideoTileProps = useMemo(() => !dominantRemoteParticipant ? undefined : {\n    remoteParticipant: dominantRemoteParticipant,\n    onCreateRemoteStreamView,\n    onDisposeRemoteStreamView,\n    remoteVideoViewOptions,\n    displayName: dominantRemoteParticipant?.displayName,\n    showLabel: false,\n    showMuteIndicator: false,\n    isAvailable: dominantRemoteParticipant.videoStream?.isAvailable,\n    isReceiving: dominantRemoteParticipant.videoStream?.isReceiving,\n    renderElement: dominantRemoteParticipant.videoStream?.renderElement,\n    userId: dominantRemoteParticipant.userId,\n    key: dominantRemoteParticipant.userId\n  }, [dominantRemoteParticipant, onCreateRemoteStreamView, onDisposeRemoteStreamView]);\n  const locale = useLocale();\n  const ariaLabel = locale.strings.callWithChat.pictureInPictureTileAriaLabel;\n  const strings = useMemo(() => ({\n    rootAriaLabel: ariaLabel\n  }), [ariaLabel]);\n\n  // If there are no remote participants, show the local participant as the primary tile\n  const primaryTileProps: _PictureInPictureInPictureTileProps = useMemo(() => ({\n    children: remoteVideoTileProps ? <_RemoteVideoTile {...remoteVideoTileProps} strings={locale.component.strings.videoGallery} /> : <_LocalVideoTile {...localVideoTileProps} />,\n    // TODO: when the calling SDK provides height/width stream information - update this to reflect the stream orientation.\n    orientation: 'portrait'\n  }), [localVideoTileProps, remoteVideoTileProps, locale.component.strings.videoGallery]);\n\n  // If we are showing the local participant as the primary tile, show nothing for the secondary tile\n  const secondaryTileProps: _PictureInPictureInPictureTileProps | undefined = useMemo(() => remoteVideoTileProps ? {\n    children: <_LocalVideoTile {...localVideoTileProps} personaMinSize={20} />,\n    // TODO: when the calling SDK provides height/width stream information - update this to reflect the stream orientation.\n    orientation: 'portrait'\n  } : undefined, [localVideoTileProps, remoteVideoTileProps]);\n  return <_PictureInPictureInPicture onClick={props.onClick} strings={strings} primaryTile={primaryTileProps} secondaryTile={secondaryTileProps} />;\n};\nconst localVideoViewOptions: VideoStreamOptions = {\n  scalingMode: 'Crop',\n  isMirrored: true\n};\nconst remoteVideoViewOptions: VideoStreamOptions = {\n  scalingMode: 'Crop',\n  isMirrored: false\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _dominantSpeakersWithFlatId, _isInCall, _isPreviewOn, _videoGalleryRemoteParticipantsMemo } from '@internal/calling-component-bindings';\nimport { RemoteParticipantState } from '@internal/calling-stateful-client';\nimport * as reselect from 'reselect';\nimport { getDominantSpeakerInfo, getRemoteParticipants } from './baseSelectors';\n\n/**\n * Get the most dominant remote participant, if no dominant speaker IDs exist, this uses\n * one of the remote participants with no bias towards which one.\n *\n * @private\n */\nexport const dominantRemoteParticipantSelector = reselect.createSelector([getRemoteParticipants, getDominantSpeakerInfo], (remoteParticipants, dominantSpeakerInfo) => {\n  const dominantSpeakers = _dominantSpeakersWithFlatId(dominantSpeakerInfo);\n  const dominantRemoteParticipant = remoteParticipants && Object.keys(remoteParticipants).length > 0 ? findDominantRemoteParticipant(remoteParticipants, dominantSpeakers ?? []) : undefined;\n  return dominantRemoteParticipant ? _videoGalleryRemoteParticipantsMemo(updateUserDisplayNamesTrampoline(Object.values(dominantRemoteParticipant)))[0] : undefined;\n});\nconst findDominantRemoteParticipant = (remoteParticipants: {\n  [keys: string]: RemoteParticipantState;\n}, dominantSpeakerIds: string[]): {\n  dominantRemoteParticipantId: RemoteParticipantState;\n} => {\n  let dominantRemoteParticipantId = dominantSpeakerIds[0];\n\n  // Fallback to using the first remote participant if there are no dominant speaker IDs\n  // or if the dominant speaker is no longer available in the list of remoteParticipantIds\n  const remoteParticipantIds = Object.keys(remoteParticipants);\n  if (!dominantRemoteParticipantId || !remoteParticipantIds.includes(dominantRemoteParticipantId)) {\n    dominantRemoteParticipantId = remoteParticipantIds[0];\n  }\n  return {\n    dominantRemoteParticipantId: remoteParticipants[dominantRemoteParticipantId]\n  };\n};\nconst updateUserDisplayNamesTrampoline = (remoteParticipants: RemoteParticipantState[]): RemoteParticipantState[] => {\n  return remoteParticipants;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _isInCall, _isPreviewOn, _videoGalleryRemoteParticipantsMemo } from '@internal/calling-component-bindings';\nimport * as reselect from 'reselect';\nimport { localVideoSelector } from './localVideoStreamSelector';\nimport { dominantRemoteParticipantSelector } from './dominantRemoteParticipantSelector';\nimport { getDisplayName } from './baseSelectors';\n/* @conditional-compile-remove(raise-hand) */\nimport { getLocalParticipantRaisedHand } from './baseSelectors';\n\n/**\n * Picture in picture in picture needs to display the most-dominant remote speaker, as well as the local participant video.\n * @private\n */\nexport const localAndRemotePIPSelector = reselect.createSelector([getDisplayName, dominantRemoteParticipantSelector, localVideoSelector, /* @conditional-compile-remove(raise-hand) */getLocalParticipantRaisedHand], (displayName, dominantRemoteParticipant, localVideoStreamInfo, /* @conditional-compile-remove(raise-hand) */raisedHand) => {\n  return {\n    localParticipant: {\n      displayName,\n      videoStream: localVideoStreamInfo,\n      /* @conditional-compile-remove(raise-hand) */\n      raisedHand: raisedHand\n    },\n    dominantRemoteParticipant\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, IModalStyleProps, IModalStyles, IStackStyles, IStyle, IStyleFunctionOrObject, ITheme } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\n\n/**\n * Styles for {@link ModalLocalAndRemotePIP} component\n */\nexport type ModalLocalAndRemotePIPStyles = {\n  modal?: Partial<IModalStyles>;\n};\n\n/**\n * Default Modal PIP related pixel measurements used for ModalLocalAndremotePIP and common/utils.\n *\n * @private\n */\nexport const MODAL_PIP_DEFAULT_PX = {\n  rightPositionPx: 16,\n  topPositionPx: 52,\n  widthPx: 88,\n  heightPx: 128\n};\n\n/**\n * @private\n */\nexport const getPipStyles = (theme: ITheme): ModalLocalAndRemotePIPStyles => ({\n  modal: {\n    main: {\n      borderRadius: theme.effects.roundedCorner4,\n      boxShadow: theme.effects.elevation8,\n      // Above the message thread / people pane.\n      zIndex: 2,\n      ...(theme.rtl ? {\n        left: _pxToRem(MODAL_PIP_DEFAULT_PX.rightPositionPx)\n      } : {\n        right: _pxToRem(MODAL_PIP_DEFAULT_PX.rightPositionPx)\n      }),\n      top: _pxToRem(MODAL_PIP_DEFAULT_PX.topPositionPx)\n    }\n  }\n});\n\n/**\n * @private\n */\nexport const PIPContainerStyle: IStackStyles = {\n  root: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    pointerEvents: 'none',\n    ':focus-within': {\n      outline: '1px solid #00000000'\n    }\n  }\n};\n\n/**\n * @private\n */\nexport const hiddenStyle: IStackStyles = concatStyleSets(PIPContainerStyle, {\n  root: {\n    display: 'none'\n  }\n});\n\n/**\n * @private\n */\nexport const modalStyle: IStyleFunctionOrObject<IModalStyleProps, IModalStyles> = {\n  main: {\n    minWidth: 'min-content',\n    minHeight: 'min-content',\n    position: 'absolute',\n    overflow: 'hidden',\n    // pointer events for root Modal div set to auto to make LocalAndRemotePIP interactive\n    pointerEvents: 'auto',\n    touchAction: 'none'\n  },\n  root: {\n    width: '100%',\n    height: '100%',\n    // pointer events for root Modal div set to none to make descendants interactive\n    pointerEvents: 'none',\n    ':focus-within': {\n      outline: '3px solid #00000000',\n      outlineOffset: '-3px'\n    }\n  }\n};\n\n/**\n * Styles for layer host to bound the modal wrapping PiPiP in the mobile pane.\n * @private\n */\nexport const modalLayerHostStyle: IStyle = {\n  display: 'flex',\n  position: 'absolute',\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden',\n  zIndex: '100000',\n  // pointer events for layerHost set to none to make descendants interactive\n  pointerEvents: 'none'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { concatStyleSets, ContextualMenu, IDragOptions, Stack } from '@fluentui/react';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { LocalAndRemotePIP } from '../CallComposite/components/LocalAndRemotePIP';\nimport { useHandlers } from '../CallComposite/hooks/useHandlers';\nimport { useSelector } from '../CallComposite/hooks/useSelector';\nimport { localAndRemotePIPSelector } from '../CallComposite/selectors/localAndRemotePIPSelector';\nimport { _ModalClone, _ICoordinates } from '@internal/react-components';\n/* @conditional-compile-remove(rooms) */\nimport { _RemoteVideoTile } from '@internal/react-components';\nimport { hiddenStyle, ModalLocalAndRemotePIPStyles, modalStyle, PIPContainerStyle } from './styles/ModalLocalAndRemotePIP.styles';\n/* @conditional-compile-remove(rooms) */\nimport { useAdapter } from '../CallComposite/adapter/CallAdapterProvider';\nimport { useLocale } from '../localization';\n\n/**\n * Drag options for Modal in {@link ModalLocalAndRemotePIP} component\n */\nconst DRAG_OPTIONS: IDragOptions = {\n  moveMenuItemText: 'Move',\n  closeMenuItemText: 'Close',\n  menu: ContextualMenu,\n  keepInBounds: true\n};\n\n/**\n * @private\n */\nexport interface ModalLocalAndRemotePIPStrings {\n  /**\n   * Aria label for dismiss control when using keyboard\n   */\n  dismissModalAriaLabel?: string;\n}\n\n/**\n * A wrapping component with a draggable {@link LocalAndRemotePIP} component that is bound to a LayerHost component with id\n * specified by `modalLayerHostId` prop\n * @private\n */\nexport const ModalLocalAndRemotePIP = (props: {\n  hidden: boolean;\n  modalLayerHostId: string;\n  styles?: ModalLocalAndRemotePIPStyles;\n  minDragPosition?: _ICoordinates;\n  maxDragPosition?: _ICoordinates;\n  onDismissSidePane?: () => void;\n  strings?: ModalLocalAndRemotePIPStrings;\n}): JSX.Element | null => {\n  const rootStyles = props.hidden ? hiddenStyle : PIPContainerStyle;\n\n  /* @conditional-compile-remove(rooms) */\n  const adapter = useAdapter();\n  /* @conditional-compile-remove(rooms) */\n  const role = adapter.getState().call?.role;\n  const locale = useLocale();\n  const pictureInPictureProps = useSelector(localAndRemotePIPSelector);\n  const [touchStartTouches, setTouchStartTouches] = useState<React.TouchList | null>(null);\n  const onTouchEnd = useCallback((event: React.TouchEvent) => {\n    if (touchStartTouches && touchStartTouches.length === 1 && event.changedTouches.length === 1) {\n      const touchStartTouch = touchStartTouches[0];\n      const touchEndTouch = event.changedTouches[0];\n      if (Math.abs(touchStartTouch.clientX - touchEndTouch.clientX) < 10 && Math.abs(touchStartTouch.clientY - touchEndTouch.clientY) < 10) {\n        props.onDismissSidePane?.();\n      }\n    }\n  }, [props, touchStartTouches]);\n  const onTouchStart = useCallback((event: React.TouchEvent) => {\n    setTouchStartTouches(event.touches);\n  }, []);\n  const onKeyDown = useCallback((event: React.KeyboardEvent) => {\n    if (event.key === 'Enter' || event.key === ' ') {\n      props.onDismissSidePane?.();\n    }\n  }, [props]);\n  const pictureInPictureHandlers = useHandlers(LocalAndRemotePIP);\n  const localAndRemotePIP = useMemo(() => {\n    /* @conditional-compile-remove(rooms) */\n    if (role === 'Consumer' && pictureInPictureProps.dominantRemoteParticipant?.userId) {\n      return <Stack tabIndex={0} aria-label={props.strings?.dismissModalAriaLabel ?? ''} onKeyDown={onKeyDown}>\n          <_RemoteVideoTile strings={locale.component.strings.videoGallery} {...pictureInPictureProps.dominantRemoteParticipant} remoteParticipant={pictureInPictureProps.dominantRemoteParticipant} />\n        </Stack>;\n    }\n    return <Stack tabIndex={0} aria-label={props.strings?.dismissModalAriaLabel ?? ''} onKeyDown={onKeyDown}>\n        <LocalAndRemotePIP {...pictureInPictureProps} {...pictureInPictureHandlers} />\n      </Stack>;\n  }, [/* @conditional-compile-remove(rooms) */role, onKeyDown, pictureInPictureProps, props, pictureInPictureHandlers, locale.component.strings.videoGallery]);\n\n  /* @conditional-compile-remove(rooms) */\n  if (role === 'Consumer' && !pictureInPictureProps.dominantRemoteParticipant) {\n    return null;\n  }\n  const modalStylesThemed = concatStyleSets(modalStyle, props.styles?.modal);\n  return <Stack styles={rootStyles}>\n      <Stack onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>\n        <_ModalClone isOpen={true} isModeless={true} dragOptions={DRAG_OPTIONS} styles={modalStylesThemed} layerProps={{\n        hostId: props.modalLayerHostId\n      }} minDragPosition={props.minDragPosition} maxDragPosition={props.maxDragPosition}>\n          {\n        // Only render LocalAndRemotePIP when this component is NOT hidden because VideoGallery needs to have\n        // possession of the dominant remote participant video stream\n        !props.hidden && localAndRemotePIP}\n        </_ModalClone>\n      </Stack>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _ICoordinates, _useContainerHeight, _useContainerWidth } from '@internal/react-components';\nimport { useMemo, useRef } from 'react';\nimport { MODAL_PIP_DEFAULT_PX } from './styles/ModalLocalAndRemotePIP.styles';\n\n/**\n * Interface for ModalLocalAndRemotePIP drag positions\n */\ninterface MinMaxDragPosition {\n  minDragPosition: _ICoordinates | undefined;\n  maxDragPosition: _ICoordinates | undefined;\n}\n\n/**\n * @private\n */\n// Use document.getElementById until Fluent's Stack supports componentRef property: https://github.com/microsoft/fluentui/issues/20410\nexport const useMinMaxDragPosition = (modalLayerHostId: string, rtl?: boolean): MinMaxDragPosition => {\n  const modalHostRef = useRef<HTMLElement>(document.getElementById(modalLayerHostId));\n  const modalHostWidth = _useContainerWidth(modalHostRef);\n  const modalHostHeight = _useContainerHeight(modalHostRef);\n  const minDragPosition: _ICoordinates | undefined = useMemo(() => modalHostWidth === undefined ? undefined : {\n    x: rtl ? -1 * MODAL_PIP_DEFAULT_PX.rightPositionPx : MODAL_PIP_DEFAULT_PX.rightPositionPx - modalHostWidth + MODAL_PIP_DEFAULT_PX.widthPx,\n    y: -1 * MODAL_PIP_DEFAULT_PX.topPositionPx\n  }, [modalHostWidth, rtl]);\n  const maxDragPosition: _ICoordinates | undefined = useMemo(() => modalHostWidth === undefined || modalHostHeight === undefined ? undefined : {\n    x: rtl ? modalHostWidth - MODAL_PIP_DEFAULT_PX.rightPositionPx - MODAL_PIP_DEFAULT_PX.widthPx : MODAL_PIP_DEFAULT_PX.rightPositionPx,\n    y: modalHostHeight - MODAL_PIP_DEFAULT_PX.topPositionPx - MODAL_PIP_DEFAULT_PX.heightPx\n  }, [modalHostHeight, modalHostWidth, rtl]);\n  return {\n    minDragPosition: minDragPosition,\n    maxDragPosition: maxDragPosition\n  };\n};\n\n/**\n * @private\n */\nexport const defaultSpokenLanguage = 'en-us';","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(capabilities) */\nimport React from 'react';\n/* @conditional-compile-remove(capabilities) */\nimport { IIconProps, IMessageBarProps, MessageBar, MessageBarType, Stack } from '@fluentui/react';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangedReason, ParticipantCapabilityName, ParticipantRole } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport { useLocale } from '../../localization';\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * @private\n */\nexport interface CapabilitiesChangeNotificationBarProps extends IMessageBarProps {\n  capabilitiesChangedNotifications: CapabalityChangedNotification[];\n  onDismissNotification: (notification: CapabalityChangedNotification) => void;\n}\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * @private\n */\nexport interface CapabalityChangedNotification {\n  /**\n   * Name of capability\n   */\n  capabilityName: ParticipantCapabilityName;\n  /**\n   * Is capability now available\n   */\n  isPresent: boolean;\n  /* @conditional-compile-remove(capabilities) */\n  /**\n   * Reason capability was changed\n   */\n  changedReason?: CapabilitiesChangedReason;\n  /* @conditional-compile-remove(capabilities) */\n  /**\n   * Role of participant when capability changed\n   */\n  role?: ParticipantRole;\n  /**\n   * The latest timestamp when this notification was observed.\n   *\n   * When available, this is used to track notifications that have already been seen and dismissed\n   * by the user.\n   */\n  timestamp?: Date;\n}\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * Notification bar for capabilities changed\n * @private\n */\nexport const CapabilitiesChangedNotificationBar = (props: CapabilitiesChangeNotificationBarProps): JSX.Element => {\n  const locale = useLocale();\n  return <Stack data-ui-id=\"capabilities-changed-notification-bar-stack\">\n      {props.capabilitiesChangedNotifications.map(notification => {\n      const message = getCapabilityChangedNotificationString(notification, locale.strings.call.capabilityChangedNotification);\n      if (!message) {\n        return null;\n      }\n      const iconProps = getCustomMessageBarIconProps(notification);\n      return <MessageBar key={notification.capabilityName} styles={messageBarStyles} messageBarType={MessageBarType.warning} dismissIconProps={{\n        iconName: 'ErrorBarClear'\n      }} onDismiss={() => props.onDismissNotification(notification)} messageBarIconProps={iconProps}>\n            {message}\n          </MessageBar>;\n    })}\n    </Stack>;\n};\n\n/* @conditional-compile-remove(capabilities) */\nconst getCapabilityChangedNotificationString = (notification: CapabalityChangedNotification, strings?: CapabilityChangedNotificationStrings): string | undefined => {\n  switch (notification.capabilityName) {\n    case 'turnVideoOn':\n      if (notification.changedReason === 'MeetingOptionOrOrganizerPolicyChanged') {\n        return notification.isPresent ? strings?.turnVideoOn?.grantedDueToMeetingOption : strings?.turnVideoOn?.lostDueToMeetingOption;\n      }\n      break;\n    case 'unmuteMic':\n      if (notification.changedReason === 'MeetingOptionOrOrganizerPolicyChanged') {\n        return notification.isPresent ? strings?.unmuteMic?.grantedDueToMeetingOption : strings?.unmuteMic?.lostDueToMeetingOption;\n      }\n      break;\n    case 'shareScreen':\n      if (notification.isPresent && notification.changedReason === 'RoleChanged' && notification.role === 'Presenter') {\n        return strings?.shareScreen?.grantedDueToRoleChangeToPresenter;\n      }\n      if (!notification.isPresent && notification.changedReason === 'RoleChanged' && notification.role === 'Attendee') {\n        return strings?.shareScreen?.lostDueToRoleChangeToAttendee;\n      }\n      break;\n  }\n  return undefined;\n};\n\n/* @conditional-compile-remove(capabilities) */\nconst getCustomMessageBarIconProps = (notification: CapabalityChangedNotification): IIconProps | undefined => {\n  let iconName: string | undefined = undefined;\n  switch (notification.capabilityName) {\n    case 'turnVideoOn':\n      if (notification.isPresent) {\n        iconName = 'ControlButtonCameraOn';\n      } else {\n        iconName = 'ControlButtonCameraProhibited';\n      }\n      break;\n    case 'unmuteMic':\n      if (notification.isPresent) {\n        iconName = 'ControlButtonMicOn';\n      } else {\n        iconName = 'ControlButtonMicProhibited';\n      }\n      break;\n    default:\n      return undefined;\n  }\n  return {\n    iconName,\n    styles: {\n      root: {\n        '> *': {\n          height: '1rem',\n          width: '1rem'\n        }\n      }\n    }\n  };\n};\n\n/* @conditional-compile-remove(capabilities) */\nconst messageBarStyles = {\n  innerText: {\n    alignSelf: 'center'\n  },\n  icon: {\n    height: 0\n  },\n  content: {\n    lineHeight: 'inherit'\n  },\n  dismissal: {\n    height: 0,\n    paddingTop: '0.8rem'\n  }\n};\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * Strings for capability changed notification\n * @public\n */\nexport interface CapabilityChangedNotificationStrings {\n  /**\n   * Strings for 'turnVideoOn' capability\n   */\n  turnVideoOn?: {\n    /**\n     * Notification message shown to the user when capability to turn video on is lost due to a meeting option change\n     */\n    lostDueToMeetingOption?: string;\n    /**\n     * Notification message shown to the user when capability to turn video on is granted due to a meeting option change\n     */\n    grantedDueToMeetingOption?: string;\n  };\n  /**\n   * Strings for 'unmuteMic' capability\n   */\n  unmuteMic?: {\n    /**\n     * Notification message shown to the user when capability to unmute mic is lost due to a meeting option change\n     */\n    lostDueToMeetingOption?: string;\n    /**\n     * Notification message shown to the user when capability to unmute mic is granted due to a meeting option change\n     */\n    grantedDueToMeetingOption?: string;\n  };\n  /**\n   * Strings for 'shareScreen' capability\n   */\n  shareScreen?: {\n    /**\n     * Notification message shown to the user when capability to share screen is lost due to a role change to Attendeee\n     */\n    lostDueToRoleChangeToAttendee?: string;\n    /**\n     * Notification message shown to the user when capability to share screen is granted due to a role change to Presenter\n     */\n    grantedDueToRoleChangeToPresenter?: string;\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IButton, mergeStyles, Stack } from '@fluentui/react';\nimport { _isInCall, _isInLobbyOrConnecting } from '@internal/calling-component-bindings';\nimport { _ComplianceBanner, _ComplianceBannerProps, _DrawerMenu, _DrawerMenuItemProps, _useContainerHeight, _useContainerWidth, ActiveErrorMessage, ErrorBar, ErrorBarProps, useTheme } from '@internal/react-components';\nimport { VideoGalleryLayout } from '@internal/react-components';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { useEffect } from 'react';\nimport { useCallback } from 'react';\n/* @conditional-compile-remove(one-to-n-calling) @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(close-captions) */\nimport { AvatarPersonaDataCallback } from '../../common/AvatarPersona';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsBanner } from '../../common/CaptionsBanner';\nimport { containerDivStyles } from '../../common/ContainerRectProps';\nimport { compositeMinWidthRem } from '../../common/styles/Composite.styles';\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { CallControls, CallControlsProps } from '../components/CallControls';\nimport { CommonCallControlBar } from '../../common/ControlBar/CommonCallControlBar';\nimport { callArrangementContainerStyles, notificationsContainerStyles, containerStyleDesktop, containerStyleMobile, mediaGalleryContainerStyles, galleryParentContainerStyles, bannerNotificationStyles, CONTROL_BAR_Z_INDEX, DRAWER_Z_INDEX } from '../styles/CallPage.styles';\nimport { MutedNotification, MutedNotificationProps } from './MutedNotification';\nimport { CallAdapter } from '../adapter';\nimport { useSelector } from '../hooks/useSelector';\nimport { callStatusSelector } from '../selectors/callStatusSelector';\nimport { CallControlOptions } from '../types/CallControlOptions';\nimport { PreparedMoreDrawer } from '../../common/Drawer/PreparedMoreDrawer';\n/* @conditional-compile-remove(close-captions) */\nimport { getCallStatus, getIsTeamsCall, getCaptionsStatus } from '../selectors/baseSelectors';\nimport { drawerContainerStyles } from '../styles/CallComposite.styles';\nimport { SidePane } from './SidePane/SidePane';\nimport { usePeoplePane } from './SidePane/usePeoplePane';\n/* @conditional-compile-remove(video-background-effects) */\nimport { useVideoEffectsPane, VIDEO_EFFECTS_SIDE_PANE_ID, VIDEO_EFFECTS_SIDE_PANE_WIDTH_REM } from './SidePane/useVideoEffectsPane';\nimport { isDisabled } from '../utils';\nimport { SidePaneRenderer, useIsSidePaneOpen } from './SidePane/SidePaneProvider';\n/* @conditional-compile-remove(video-background-effects) */\nimport { useIsParticularSidePaneOpen } from './SidePane/SidePaneProvider';\nimport { ModalLocalAndRemotePIP } from '../../common/ModalLocalAndRemotePIP';\nimport { getPipStyles } from '../../common/styles/ModalLocalAndRemotePIP.styles';\nimport { useMinMaxDragPosition } from '../../common/utils';\nimport { MobileChatSidePaneTabHeaderProps } from '../../common/TabHeader';\nimport { CommonCallControlOptions } from '../../common/types/CommonCallControlOptions';\n/* @conditional-compile-remove(video-background-effects) */\nimport { localVideoSelector } from '../../CallComposite/selectors/localVideoStreamSelector';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangedNotificationBar, CapabilitiesChangeNotificationBarProps } from './CapabilitiesChangedNotificationBar';\nimport { useLocale } from '../../localization';\n/**\n * @private\n */\nexport interface CallArrangementProps {\n  id?: string;\n  complianceBannerProps: _ComplianceBannerProps;\n  errorBarProps: ErrorBarProps | false;\n  mutedNotificationProps?: MutedNotificationProps;\n  callControlProps: CallControlsProps;\n  onRenderGalleryContent: () => JSX.Element;\n  dataUiId: string;\n  mobileView: boolean;\n  modalLayerHostId: string;\n  /* @conditional-compile-remove(one-to-n-calling) @conditional-compile-remove(PSTN-calls) */ /* @conditional-compile-remove(close-captions) */\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  updateSidePaneRenderer: (renderer: SidePaneRenderer | undefined) => void;\n  mobileChatTabHeader?: MobileChatSidePaneTabHeaderProps;\n  latestErrors: ActiveErrorMessage[];\n  onDismissError: (error: ActiveErrorMessage) => void;\n  onUserSetOverflowGalleryPositionChange?: (position: 'Responsive' | 'horizontalTop') => void;\n  onUserSetGalleryLayoutChange?: (layout: VideoGalleryLayout) => void;\n  userSetGalleryLayout?: VideoGalleryLayout;\n  /* @conditional-compile-remove(capabilities) */\n  capabilitiesChangedNotificationBarProps?: CapabilitiesChangeNotificationBarProps;\n  onCloseChatPane?: () => void;\n  onSetDialpadPage?: () => void;\n  dtmfDialerPresent?: boolean;\n}\n\n/**\n * @private\n */\nexport const CallArrangement = (props: CallArrangementProps): JSX.Element => {\n  const containerClassName = useMemo(() => {\n    return props.mobileView ? containerStyleMobile : containerStyleDesktop;\n  }, [props.mobileView]);\n  const theme = useTheme();\n  const callGalleryStyles = useMemo(() => galleryParentContainerStyles(theme.palette.neutralLighterAlt), [theme.palette.neutralLighterAlt]);\n  const peopleButtonRef = useRef<IButton>(null);\n  const cameraButtonRef = useRef<IButton>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const containerWidth = _useContainerWidth(containerRef);\n  const containerHeight = _useContainerHeight(containerRef);\n  const isInLobby = _isInLobbyOrConnecting(useSelector(callStatusSelector).callStatus);\n  const {\n    updateSidePaneRenderer\n  } = props;\n  const adapter = useAdapter();\n  const [drawerMenuItems, setDrawerMenuItems] = useState<_DrawerMenuItemProps[]>([]);\n  const peoplePaneProps = useMemo(() => ({\n    updateSidePaneRenderer,\n    setDrawerMenuItems,\n    inviteLink: props.callControlProps.callInvitationURL,\n    onFetchParticipantMenuItems: props.callControlProps?.onFetchParticipantMenuItems,\n    mobileView: props.mobileView,\n    peopleButtonRef\n  }), [updateSidePaneRenderer, props.callControlProps.callInvitationURL, props.callControlProps?.onFetchParticipantMenuItems, props.mobileView, peopleButtonRef]);\n  const locale = useLocale();\n  const spotlightPeoplePaneProps = useMemo(() => {\n    return {};\n  }, []);\n  const {\n    isPeoplePaneOpen,\n    openPeoplePane,\n    closePeoplePane\n  } = usePeoplePane({\n    ...peoplePaneProps,\n    ...spotlightPeoplePaneProps\n  });\n  const togglePeoplePane = useCallback(() => {\n    if (isPeoplePaneOpen) {\n      closePeoplePane();\n    } else {\n      openPeoplePane();\n    }\n  }, [closePeoplePane, isPeoplePaneOpen, openPeoplePane]);\n  const isSidePaneOpen = useIsSidePaneOpen();\n  const [renderGallery, setRenderGallery] = useState<boolean>(!isSidePaneOpen && props.mobileView);\n  useEffect(() => {\n    if (isSidePaneOpen && props.mobileView) {\n      setRenderGallery(false);\n    } else {\n      setRenderGallery(true);\n    }\n  }, [props.mobileView, isSidePaneOpen]);\n  const modalStrings = {\n    dismissModalAriaLabel: locale.strings.call.dismissModalAriaLabel\n  };\n  const isMobileWithActivePane = props.mobileView && isSidePaneOpen;\n  const callCompositeContainerCSS = useMemo((): React.CSSProperties => {\n    return {\n      display: isMobileWithActivePane ? 'none' : 'flex',\n      minWidth: props.mobileView ? 'unset' : `${compositeMinWidthRem}rem`,\n      width: '100%',\n      height: '100%',\n      position: 'relative'\n    };\n  }, [isMobileWithActivePane, props.mobileView]);\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const onResolveVideoEffectDependency = adapter.getState().onResolveVideoEffectDependency;\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const {\n    openVideoEffectsPane\n  } = useVideoEffectsPane(props.updateSidePaneRenderer, props.mobileView, props.latestErrors, props.onDismissError, cameraButtonRef);\n  const [showDrawer, setShowDrawer] = useState(false);\n  const onMoreButtonClicked = useCallback(() => {\n    setShowDrawer(true);\n  }, []);\n  const closeDrawer = useCallback(() => {\n    setShowDrawer(false);\n  }, []);\n  const onMoreDrawerPeopleClicked = useCallback(() => {\n    setShowDrawer(false);\n    togglePeoplePane();\n  }, [togglePeoplePane]);\n  const drawerContainerStylesValue = useMemo(() => drawerContainerStyles(DRAWER_Z_INDEX), []);\n\n  /* @conditional-compile-remove(rooms) */\n  const role = adapter.getState().call?.role;\n  let canUnmute = true;\n  /* @conditional-compile-remove(rooms) */\n  canUnmute = role !== 'Consumer' ? true : false;\n  let filteredLatestErrors: ActiveErrorMessage[] = props.errorBarProps !== false ? props.latestErrors : [];\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const isCameraOn = useSelector(localVideoSelector).isAvailable;\n\n  /* @conditional-compile-remove(rooms) */\n  // TODO: move this logic to the error bar selector once role is plumbed from the headless SDK\n  if (role === 'Consumer' && props.errorBarProps) {\n    filteredLatestErrors = filteredLatestErrors.filter(e => e.type !== 'callCameraAccessDenied' && e.type !== 'callCameraAccessDeniedSafari');\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const isVideoPaneOpen = useIsParticularSidePaneOpen(VIDEO_EFFECTS_SIDE_PANE_ID);\n  /* @conditional-compile-remove(video-background-effects) */\n  if ((isVideoPaneOpen || !isCameraOn) && props.errorBarProps) {\n    filteredLatestErrors = filteredLatestErrors.filter(e => e.type !== 'unableToStartVideoEffect');\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  const isTeamsCall = useSelector(getIsTeamsCall);\n  /* @conditional-compile-remove(close-captions) */\n  const hasJoinedCall = useSelector(getCallStatus) === 'Connected';\n  /* @conditional-compile-remove(close-captions) */\n  const isCaptionsOn = useSelector(getCaptionsStatus);\n  const minMaxDragPosition = useMinMaxDragPosition(props.modalLayerHostId);\n  const pipStyles = useMemo(() => getPipStyles(theme), [theme]);\n  const verticalControlBar = props.mobileView && containerWidth && containerHeight && containerWidth / containerHeight > 1 ? true : false;\n\n  /* @conditional-compile-remove(capabilities) */\n  // Filter out shareScreen capability notifications if on mobile\n  const filteredCapabilitesChangedNotifications = props.mobileView ? props.capabilitiesChangedNotificationBarProps?.capabilitiesChangedNotifications.filter(notification => notification.capabilityName !== 'shareScreen') : props.capabilitiesChangedNotificationBarProps?.capabilitiesChangedNotifications;\n  return <div ref={containerRef} className={mergeStyles(containerDivStyles)} id={props.id}>\n      <Stack verticalFill horizontalAlign=\"stretch\" className={containerClassName} data-ui-id={props.dataUiId}>\n        <Stack reversed horizontal={verticalControlBar} grow styles={callArrangementContainerStyles(verticalControlBar)}>\n          {props.callControlProps?.options !== false && !isMobileWithActivePane && <Stack verticalAlign={'center'} className={mergeStyles({\n          zIndex: CONTROL_BAR_Z_INDEX,\n          padding: verticalControlBar ? '0.25rem' : 'unset'\n        })}>\n              {isLegacyCallControlEnabled(props.callControlProps?.options) ? <CallControls {...props.callControlProps} containerWidth={containerWidth} containerHeight={containerHeight} isMobile={props.mobileView} displayVertical={verticalControlBar} /> : <CommonCallControlBar {...props.callControlProps} callControls={props.callControlProps.options} callAdapter={(adapter as CallAdapter)} mobileView={props.mobileView} disableButtonsForLobbyPage={isInLobby} peopleButtonChecked={isPeoplePaneOpen} onPeopleButtonClicked={togglePeoplePane} onMoreButtonClicked={onMoreButtonClicked}\n          /* @conditional-compile-remove(close-captions) */ isCaptionsSupported={isTeamsCall && hasJoinedCall}\n          /* @conditional-compile-remove(close-captions) */ isCaptionsOn={isCaptionsOn}\n          /* @conditional-compile-remove(video-background-effects) */ onClickVideoEffects={onResolveVideoEffectDependency ? openVideoEffectsPane : undefined} displayVertical={verticalControlBar} onUserSetOverflowGalleryPositionChange={props.onUserSetOverflowGalleryPositionChange} onUserSetGalleryLayout={props.onUserSetGalleryLayoutChange} userSetGalleryLayout={props.userSetGalleryLayout} onSetDialpadPage={props.onSetDialpadPage} dtmfDialerPresent={props.dtmfDialerPresent} peopleButtonRef={peopleButtonRef} cameraButtonRef={cameraButtonRef} />}\n            </Stack>}\n          {props.callControlProps?.options !== false && showDrawer && <Stack styles={drawerContainerStylesValue}>\n              <PreparedMoreDrawer callControls={props.callControlProps.options} onLightDismiss={closeDrawer} onPeopleButtonClicked={onMoreDrawerPeopleClicked} /* @conditional-compile-remove(close-captions) */\n          isCaptionsSupported={isTeamsCall && hasJoinedCall} onUserSetGalleryLayout={props.onUserSetGalleryLayoutChange} userSetGalleryLayout={props.userSetGalleryLayout} onSetDialpadPage={props.onSetDialpadPage} dtmfDialerPresent={props.dtmfDialerPresent} />\n            </Stack>}\n          <Stack horizontal grow>\n            <Stack.Item style={callCompositeContainerCSS}>\n              <Stack.Item styles={callGalleryStyles} grow>\n                <Stack verticalFill styles={mediaGalleryContainerStyles}>\n                  <Stack.Item styles={notificationsContainerStyles}>\n                    <Stack styles={bannerNotificationStyles}>\n                      <_ComplianceBanner {...props.complianceBannerProps} />\n                    </Stack>\n                    {props.errorBarProps !== false && <Stack styles={bannerNotificationStyles}>\n                        <ErrorBar {...props.errorBarProps} onDismissError={props.onDismissError} activeErrorMessages={filteredLatestErrors} />\n                      </Stack>}\n                    {/* @conditional-compile-remove(capabilities) */\n                  props.capabilitiesChangedNotificationBarProps && props.capabilitiesChangedNotificationBarProps.capabilitiesChangedNotifications.length > 0 && <Stack styles={bannerNotificationStyles}>\n                            <CapabilitiesChangedNotificationBar {...props.capabilitiesChangedNotificationBarProps} capabilitiesChangedNotifications={filteredCapabilitesChangedNotifications ?? []} />\n                          </Stack>}\n                    {canUnmute && !!props.mutedNotificationProps && <MutedNotification {...props.mutedNotificationProps} />}\n                  </Stack.Item>\n                  {renderGallery && props.onRenderGalleryContent && props.onRenderGalleryContent()}\n                  {/* @conditional-compile-remove(close-captions) */\n                true && <CaptionsBanner isMobile={props.mobileView} onFetchAvatarPersonaData={props.onFetchAvatarPersonaData} />}\n                </Stack>\n              </Stack.Item>\n            </Stack.Item>\n            <SidePane mobileView={props.mobileView}\n          /* @conditional-compile-remove(video-background-effects) */ maxWidth={isVideoPaneOpen ? `${VIDEO_EFFECTS_SIDE_PANE_WIDTH_REM}rem` : undefined} minWidth={isVideoPaneOpen ? `${VIDEO_EFFECTS_SIDE_PANE_WIDTH_REM}rem` : undefined} updateSidePaneRenderer={props.updateSidePaneRenderer} onPeopleButtonClicked={props.mobileView && !shouldShowPeopleTabHeaderButton(props.callControlProps.options) ? undefined : togglePeoplePane} disablePeopleButton={typeof props.callControlProps.options !== 'boolean' && isDisabled(props.callControlProps.options?.participantsButton)} onChatButtonClicked={props.mobileChatTabHeader?.onClick} disableChatButton={props.mobileChatTabHeader?.disabled} />\n            {props.mobileView && <ModalLocalAndRemotePIP modalLayerHostId={props.modalLayerHostId} hidden={!isSidePaneOpen} styles={pipStyles} strings={modalStrings} minDragPosition={minMaxDragPosition.minDragPosition} maxDragPosition={minMaxDragPosition.maxDragPosition} onDismissSidePane={() => {\n            closePeoplePane();\n            if (props.onCloseChatPane) {\n              props.onCloseChatPane();\n            }\n          }} />}\n            {drawerMenuItems.length > 0 && <Stack styles={drawerContainerStyles()}>\n                <_DrawerMenu onLightDismiss={() => setDrawerMenuItems([])} items={drawerMenuItems} />\n              </Stack>}\n          </Stack>\n        </Stack>\n      </Stack>\n    </div>;\n};\nconst isLegacyCallControlEnabled = (options?: boolean | CallControlOptions): boolean => {\n  return !!options && options !== true && options?.legacyControlBarExperience === true;\n};\nconst shouldShowPeopleTabHeaderButton = (callControls?: boolean | CommonCallControlOptions): boolean => {\n  if (callControls === undefined || callControls === true) {\n    return true;\n  }\n  if (callControls === false) {\n    return false;\n  }\n  return callControls.participantsButton !== false && callControls.peopleButton !== false;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { createSelector } from 'reselect';\nimport { getDeviceManager } from './baseSelectors';\n\n/**\n * Provides data attributes to {@link LocalVideoCameraCycleButton} component.\n * @public\n */\nexport const localVideoCameraCycleButtonSelector = createSelector([getDeviceManager], deviceManager => {\n  return {\n    cameras: deviceManager.cameras,\n    selectedCamera: deviceManager.selectedCamera\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { CSSProperties, useCallback, useMemo } from 'react';\n/* @conditional-compile-remove(vertical-gallery) */ /* @conditional-compile-remove(rooms) */\nimport { useRef } from 'react';\nimport { VideoGallery, VideoStreamOptions, CustomAvatarOptions, Announcer, VideoTileContextualMenuProps, VideoTileDrawerMenuProps } from '@internal/react-components';\nimport { VideoGalleryLayout } from '@internal/react-components';\n/* @conditional-compile-remove(vertical-gallery) */ /* @conditional-compile-remove(rooms) */\nimport { _useContainerWidth, _useContainerHeight } from '@internal/react-components';\nimport { usePropsFor } from '../hooks/usePropsFor';\nimport { AvatarPersona, AvatarPersonaDataCallback } from '../../common/AvatarPersona';\nimport { mergeStyles, Stack } from '@fluentui/react';\nimport { useHandlers } from '../hooks/useHandlers';\nimport { useSelector } from '../hooks/useSelector';\nimport { localVideoCameraCycleButtonSelector } from '../selectors/LocalVideoTileSelector';\nimport { LocalVideoCameraCycleButton } from '@internal/react-components';\nimport { _formatString } from '@internal/acs-ui-common';\nimport { useParticipantChangedAnnouncement } from '../utils/MediaGalleryUtils';\nimport { RemoteVideoTileMenuOptions } from '../CallComposite';\n/* @conditional-compile-remove(click-to-call) */ /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(vertical-gallery) */\nimport { LocalVideoTileOptions } from '../CallComposite';\n/* @conditional-compile-remove(rooms) */\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nconst VideoGalleryStyles = {\n  root: {\n    height: '100%',\n    minHeight: '10rem',\n    // space affordance to ensure media gallery is never collapsed\n    minWidth: '6rem'\n  }\n};\nconst localVideoViewOptions = ({\n  scalingMode: 'Crop',\n  isMirrored: true\n} as VideoStreamOptions);\nconst remoteVideoViewOptions = ({\n  scalingMode: 'Crop'\n} as VideoStreamOptions);\n\n/**\n * @private\n */\nexport interface MediaGalleryProps {\n  isVideoStreamOn?: boolean;\n  isMicrophoneChecked?: boolean;\n  onStartLocalVideo: () => Promise<void>;\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  isMobile?: boolean;\n  drawerMenuHostId?: string;\n  remoteVideoTileMenuOptions?: RemoteVideoTileMenuOptions;\n  /* @conditional-compile-remove(click-to-call) */ /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(vertical-gallery) */\n  localVideoTileOptions?: boolean | LocalVideoTileOptions;\n  userSetOverflowGalleryPosition?: 'Responsive' | 'horizontalTop';\n  userSetGalleryLayout: VideoGalleryLayout;\n}\n\n/**\n * @private\n */\nexport const MediaGallery = (props: MediaGalleryProps): JSX.Element => {\n  const videoGalleryProps = usePropsFor(VideoGallery);\n  const cameraSwitcherCameras = useSelector(localVideoCameraCycleButtonSelector);\n  const cameraSwitcherCallback = useHandlers(LocalVideoCameraCycleButton);\n  const announcerString = useParticipantChangedAnnouncement();\n\n  /* @conditional-compile-remove(rooms) */\n  const adapter = useAdapter();\n  /* @conditional-compile-remove(rooms) */\n  const userRole = adapter.getState().call?.role;\n  /* @conditional-compile-remove(rooms) */\n  const isRoomsCall = adapter.getState().isRoomsCall;\n\n  /* @conditional-compile-remove(vertical-gallery) */ /* @conditional-compile-remove(rooms) */\n  const containerRef = useRef<HTMLDivElement>(null);\n  /* @conditional-compile-remove(vertical-gallery) */ /* @conditional-compile-remove(rooms) */\n  const containerWidth = _useContainerWidth(containerRef);\n  /* @conditional-compile-remove(vertical-gallery) */ /* @conditional-compile-remove(rooms) */\n  const containerHeight = _useContainerHeight(containerRef);\n  /* @conditional-compile-remove(click-to-call) */ /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(vertical-gallery) */\n  const containerAspectRatio = containerWidth && containerHeight ? containerWidth / containerHeight : 0;\n  const layoutBasedOnTilePosition: VideoGalleryLayout = localVideoTileLayoutTrampoline( /* @conditional-compile-remove(click-to-call) */(props.localVideoTileOptions as LocalVideoTileOptions)?.position);\n  const cameraSwitcherProps = useMemo(() => {\n    return {\n      ...cameraSwitcherCallback,\n      ...cameraSwitcherCameras\n    };\n  }, [cameraSwitcherCallback, cameraSwitcherCameras]);\n  const onRenderAvatar = useCallback((userId?: string, options?: CustomAvatarOptions) => {\n    return <Stack className={mergeStyles({\n      position: 'absolute',\n      height: '100%',\n      width: '100%'\n    })}>\n          <Stack styles={{\n        root: {\n          margin: 'auto',\n          maxHeight: '100%'\n        }\n      }}>\n            {options?.coinSize && <AvatarPersona userId={userId} {...options} dataProvider={props.onFetchAvatarPersonaData} />}\n          </Stack>\n        </Stack>;\n  }, [props.onFetchAvatarPersonaData]);\n  const remoteVideoTileMenuOptions: false | VideoTileContextualMenuProps | VideoTileDrawerMenuProps = useMemo(() => {\n    return props.remoteVideoTileMenuOptions?.isHidden ? false : props.isMobile ? {\n      kind: 'drawer',\n      hostId: props.drawerMenuHostId\n    } : {\n      kind: 'contextual'\n    };\n  }, [props.remoteVideoTileMenuOptions?.isHidden, props.isMobile, props.drawerMenuHostId]);\n\n  /* @conditional-compile-remove(vertical-gallery) */\n  const overflowGalleryPosition = useMemo(() => {\n    return containerWidth && containerHeight && containerWidth / containerHeight >= 16 / 9 ? 'verticalRight' : 'horizontalBottom';\n  }, [containerWidth, containerHeight]);\n  const VideoGalleryMemoized = useMemo(() => {\n    const layoutBasedOnUserSelection = (): VideoGalleryLayout => {\n      return props.localVideoTileOptions ? layoutBasedOnTilePosition : props.userSetGalleryLayout;\n      return layoutBasedOnTilePosition;\n    };\n    return <VideoGallery {...videoGalleryProps} localVideoViewOptions={localVideoViewOptions} remoteVideoViewOptions={remoteVideoViewOptions} styles={VideoGalleryStyles} layout={layoutBasedOnUserSelection()} showCameraSwitcherInLocalPreview={props.isMobile} localVideoCameraCycleButtonProps={cameraSwitcherProps} onRenderAvatar={onRenderAvatar} remoteVideoTileMenu={remoteVideoTileMenuOptions}\n    /* @conditional-compile-remove(vertical-gallery) */ overflowGalleryPosition={overflowGalleryPosition}\n    /* @conditional-compile-remove(rooms) */ localVideoTileSize={props.localVideoTileOptions === false || userRole === 'Consumer' || isRoomsCall && userRole === 'Unknown' ? 'hidden' : props.isMobile && containerAspectRatio < 1 ? '9:16' : '16:9'} />;\n  }, [videoGalleryProps, props.isMobile, /* @conditional-compile-remove(rooms) */\n  props.localVideoTileOptions, cameraSwitcherProps, onRenderAvatar, remoteVideoTileMenuOptions, /* @conditional-compile-remove(vertical-gallery) */\n  overflowGalleryPosition, /* @conditional-compile-remove(rooms) */\n  userRole, /* @conditional-compile-remove(rooms) */\n  isRoomsCall, /* @conditional-compile-remove(vertical-gallery) */\n  containerAspectRatio, props.userSetGalleryLayout, layoutBasedOnTilePosition]);\n  return <div /* @conditional-compile-remove(vertical-gallery) */ ref={containerRef} style={mediaGalleryContainerStyles}>\n      <Announcer announcementString={announcerString} ariaLive={'polite'} />\n      {VideoGalleryMemoized}\n    </div>;\n};\nconst mediaGalleryContainerStyles: CSSProperties = {\n  width: '100%',\n  height: '100%'\n};\nconst localVideoTileLayoutTrampoline = (localTileOptions?: string): VideoGalleryLayout => {\n  /* @conditional-compile-remove(click-to-call) */\n  return localTileOptions === 'grid' ? 'default' : 'floatingLocalVideo';\n  return 'floatingLocalVideo';\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles } from '@fluentui/react';\nimport { IPalette, IStyle } from '@fluentui/react';\n\n// By default, absolute positioned elements are overlayed over static ones.\n// So we need to explicitly layer the background and contents.\nconst OVERLAY_BACKGROUND_ZINDEX = 0;\nconst OVERLAY_CONTENT_ZINDEX = OVERLAY_BACKGROUND_ZINDEX + 1;\n\n/**\n * @private\n */\nexport const containerStyles: IStackStyles = {\n  root: {\n    height: '100%',\n    width: '100%',\n    position: 'relative'\n  }\n};\n\n/**\n * @private\n */\nexport const overlayBackgroundStyles: (palette: IPalette, isVideoReady: boolean) => IStyle = (palette, isVideoReady) => {\n  return {\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    background: isVideoReady ? 'black' : palette.neutralLighterAlt,\n    opacity: isVideoReady ? 0.6 : 1,\n    zIndex: OVERLAY_BACKGROUND_ZINDEX\n  };\n};\n\n/**\n * @private\n */\nexport const overlayContentStyles: IStyle = {\n  height: '100%',\n  width: '100%',\n  zIndex: OVERLAY_CONTENT_ZINDEX\n};\n\n/**\n * @private\n */\nexport const videoTileStyles = {\n  root: {\n    height: '100%',\n    width: '100%'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useEffect } from 'react';\nimport { mergeStyles, Stack } from '@fluentui/react';\nimport { StreamMedia, VideoGalleryStream, VideoTile, useTheme, VideoStreamOptions, CreateVideoStreamViewResult } from '@internal/react-components';\nimport { containerStyles, overlayBackgroundStyles, overlayContentStyles, videoTileStyles } from '../styles/ExpandedLocalVideoTile.styles';\nconst onRenderEmptyPlaceholder = (): JSX.Element => <></>;\nconst localVideoViewOptions = ({\n  scalingMode: 'Crop',\n  isMirrored: true\n} as VideoStreamOptions);\n\n/**\n * @private\n */\nexport interface ExpandedLocalVideoTileProps {\n  localParticipantVideoStream: VideoGalleryStream;\n  onCreateLocalStreamView?: (options?: VideoStreamOptions) => Promise<void | CreateVideoStreamViewResult>;\n  overlayContent?: JSX.Element;\n}\n\n/**\n * @private\n */\nexport const ExpandedLocalVideoTile = (props: ExpandedLocalVideoTileProps): JSX.Element => {\n  const videoStream = props.localParticipantVideoStream;\n  const isVideoReady = videoStream?.isAvailable ?? false;\n  const renderElement = videoStream?.renderElement;\n  const palette = useTheme().palette;\n  useEffect(() => {\n    if (videoStream && isVideoReady) {\n      props.onCreateLocalStreamView && props.onCreateLocalStreamView(localVideoViewOptions).catch(err => console.log('Can not render video', err));\n    }\n  }, [isVideoReady, videoStream, props, renderElement]);\n  return <Stack horizontalAlign=\"center\" verticalAlign=\"center\" styles={containerStyles} grow>\n      <VideoTile styles={videoTileStyles} renderElement={renderElement ? <StreamMedia videoStreamElement={renderElement} /> : undefined} onRenderPlaceholder={onRenderEmptyPlaceholder}>\n        {props.overlayContent && <>\n            <Stack className={mergeStyles(overlayBackgroundStyles(palette, isVideoReady))} />\n            <Stack horizontalAlign=\"center\" verticalAlign=\"center\" className={mergeStyles(overlayContentStyles)}>\n              {props.overlayContent}\n            </Stack>\n          </>}\n      </VideoTile>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { FontWeights, IPalette, IStyle } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const containerStyle: IStyle = {\n  // Ensure some space around the text on a narrow viewport.\n  margin: '1rem',\n  gap: `1.5rem`\n};\n\n/**\n * @private\n */\nexport const titleContainerStyle: IStyle = {\n  gap: `1rem`\n};\n\n/**\n * @private\n */\nexport const titleStyle = (palette: IPalette, isVideoReady: boolean): IStyle => ({\n  fontSize: '1.25rem',\n  fontWeight: FontWeights.semibold,\n  color: isVideoReady ? 'white' : palette.neutralPrimary,\n  textAlign: 'center'\n});\n\n/**\n * @private\n */\nexport const moreDetailsStyle = (palette: IPalette, isVideoReady: boolean): IStyle => ({\n  fontSize: '1rem',\n  color: isVideoReady ? 'white' : palette.neutralPrimary,\n  textAlign: 'center'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { VideoGalleryStream, useTheme } from '@internal/react-components';\nimport { ExpandedLocalVideoTile } from './ExpandedLocalVideoTile';\nimport { mergeStyles, Stack, Text } from '@fluentui/react';\nimport { useLocale } from '../../localization';\nimport { containerStyle, moreDetailsStyle, titleContainerStyle, titleStyle } from '../styles/NetworkReconnectTile.styles';\nimport { useHandlers } from '../hooks/useHandlers';\nimport { CallCompositeIcon } from '../../common/icons';\n\n/**\n * @private\n */\nexport interface NetworkReconnectTileProps {\n  localParticipantVideoStream: VideoGalleryStream;\n}\n\n/**\n * @private\n */\nexport const NetworkReconnectTile = (props: NetworkReconnectTileProps): JSX.Element => {\n  const videoStream = props.localParticipantVideoStream;\n  const isVideoReady = videoStream?.isAvailable ?? false;\n  const palette = useTheme().palette;\n  const strings = useLocale().strings.call;\n  const handlers = useHandlers(ExpandedLocalVideoTile);\n  return <ExpandedLocalVideoTile localParticipantVideoStream={props.localParticipantVideoStream} overlayContent={<Stack verticalFill horizontalAlign=\"center\" verticalAlign=\"center\" className={mergeStyles(containerStyle)} aria-atomic>\n          <Stack horizontal className={mergeStyles(titleContainerStyle)}>\n            <CallCompositeIcon iconName=\"NetworkReconnectIcon\" className={mergeStyles(titleStyle(palette, isVideoReady))} />\n            <Text className={mergeStyles(titleStyle(palette, isVideoReady))} aria-live={'assertive'}>\n              {strings.networkReconnectTitle}\n            </Text>\n          </Stack>\n          <Text className={mergeStyles(moreDetailsStyle(palette, isVideoReady))} aria-live={'assertive'}>\n            {strings.networkReconnectMoreDetails}\n          </Text>\n        </Stack>} {...handlers} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport * as reselect from 'reselect';\nimport { getIsRecordingActive, getIsTranscriptionActive } from './baseSelectors';\n\n/**\n * @private\n */\nexport const complianceBannerSelector = reselect.createSelector([getIsTranscriptionActive, getIsRecordingActive], (isTranscriptionActive, isRecordingActive) => {\n  return {\n    callTranscribeState: isTranscriptionActive,\n    callRecordState: isRecordingActive\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport * as reselect from 'reselect';\nimport { getUserFacingDiagnostics } from './baseSelectors';\n\n/**\n * @private\n */\nexport const mutedNotificationSelector = reselect.createSelector([getUserFacingDiagnostics], diagnostics => {\n  return {\n    speakingWhileMuted: !!diagnostics?.media.latest.speakingWhileMicrophoneIsMuted?.value\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _isInCall, _isPreviewOn } from '@internal/calling-component-bindings';\nimport * as reselect from 'reselect';\nimport { localVideoSelector } from './localVideoStreamSelector';\n\n/**\n * @private\n */\nexport const lobbySelector = reselect.createSelector([localVideoSelector], localVideoStreamInfo => {\n  return {\n    localParticipantVideoStream: localVideoStreamInfo\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport * as reselect from 'reselect';\nimport { getUserFacingDiagnostics } from './baseSelectors';\nimport { lobbySelector } from './lobbySelector';\n\n/**\n * @private\n */\nexport const networkReconnectTileSelector = reselect.createSelector([getUserFacingDiagnostics, lobbySelector], (diagnostics, lobbyProps) => {\n  return {\n    networkReconnectValue: diagnostics?.network.latest.networkReconnect?.value,\n    localParticipantVideoStream: lobbyProps.localParticipantVideoStream\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/**\n * @internal\n */\nexport const getMinutes = (time: number): number => {\n  return Math.floor(getSeconds(time) / 60);\n};\n\n/**\n * @internal\n */\nexport const getSeconds = (time: number): number => {\n  return Math.floor(time / 1000);\n};\n\n/**\n * @internal\n */\nexport const getHours = (time: number): number => {\n  return Math.floor(getMinutes(time) / 60);\n};\n\n/**\n * @internal\n */\nexport const getReadableTime = (time: number): string => {\n  const hours = getHours(time);\n  const readableMinutes = ('0' + getMinutes(time) % 60).slice(-2);\n  const readableSeconds = ('0' + getSeconds(time) % 60).slice(-2);\n  return `${hours > 0 ? hours + ':' : ''}${readableMinutes}:${readableSeconds}`;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ITextStyles } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\n\n/**\n * styles for hold pane timer\n *\n * @private\n */\nexport const DtmfDialpadContentTimerStyles: ITextStyles = {\n  root: {\n    color: 'inherit',\n    fontWeight: 600,\n    fontSize: _pxToRem(20),\n    lineHeight: _pxToRem(28),\n    margin: 'auto'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { ActiveErrorMessage, Dialpad, DtmfTone } from '@internal/react-components';\nimport { MobileChatSidePaneTabHeaderProps } from '../../common/TabHeader';\nimport { CallCompositeOptions } from '../CallComposite';\nimport { SidePaneRenderer } from '../components/SidePane/SidePaneProvider';\nimport { CapabilitiesChangeNotificationBarProps } from '../components/CapabilitiesChangedNotificationBar';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { CommonCallAdapter } from '../adapter';\nimport { Stack, Text, useTheme } from '@fluentui/react';\nimport { getReadableTime } from '../utils/timerUtils';\nimport { DtmfDialpadContentTimerStyles } from '../styles/DtmfDialpadPage.styles';\nimport { RemoteParticipantState } from '@internal/calling-stateful-client';\nimport { isPhoneNumberIdentifier } from '@azure/communication-common';\nimport { useSelector } from '../hooks/useSelector';\nimport { getStartTime } from '../selectors/baseSelectors';\n\n/**\n * @internal\n */\nexport interface DialpadPageProps {\n  mobileView: boolean;\n  options?: CallCompositeOptions;\n  modalLayerHostId: string;\n  updateSidePaneRenderer: (renderer: SidePaneRenderer | undefined) => void;\n  mobileChatTabHeader?: MobileChatSidePaneTabHeaderProps;\n  latestErrors: ActiveErrorMessage[];\n  onDismissError: (error: ActiveErrorMessage) => void;\n  /* @conditional-compile-remove(capabilities) */\n  capabilitiesChangedNotificationBarProps?: CapabilitiesChangeNotificationBarProps;\n  onSetDialpadPage: () => void;\n  dtmfDialerPresent: boolean;\n}\ninterface DialpadPageContentProps {\n  mobileView: boolean;\n  adapter: CommonCallAdapter;\n}\nconst DtmfDialpadPageContent = (props: DialpadPageContentProps): JSX.Element => {\n  const {\n    adapter\n  } = props;\n  const adapterState = adapter.getState();\n  const theme = useTheme();\n  const calleeId = adapterState.targetCallees?.[0];\n  const remoteParticipants = adapterState.call?.remoteParticipants;\n  let calleeName;\n  if (remoteParticipants) {\n    const remoteParticipantValues: RemoteParticipantState[] = Object.values(remoteParticipants);\n    if (calleeId && isPhoneNumberIdentifier(calleeId)) {\n      calleeName = calleeId.phoneNumber;\n    } else {\n      calleeName = remoteParticipantValues.find(p => p.identifier === calleeId);\n    }\n  }\n  return <Stack style={{\n    height: '100%',\n    width: '100%',\n    background: theme.palette.white\n  }}>\n      <Stack verticalAlign={'center'} style={{\n      margin: 'auto'\n    }}>\n        <DtmfDialerContentTimer />\n        <Text style={{\n        margin: 'auto'\n      }}>\n          {calleeName && calleeName !== 'Unnamed participant' ? calleeName?.toString() : ''}\n        </Text>\n        <Dialpad onSendDtmfTone={async (tone: DtmfTone) => {\n        await adapter.sendDtmfTone(tone);\n      }} longPressTrigger={props.mobileView ? 'touch' : 'mouseAndTouch'} dialpadMode={'dtmf'}></Dialpad>\n      </Stack>\n    </Stack>;\n};\nconst DtmfDialerContentTimer = (): JSX.Element => {\n  const [time, setTime] = useState<number>(0);\n  const elapsedTime = getReadableTime(time);\n  const statefulStartTime = useSelector(getStartTime);\n  const startTime = useMemo(() => {\n    return statefulStartTime ?? new Date(Date.now());\n  }, [statefulStartTime]);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setTime(new Date(Date.now()).getTime() - startTime?.getTime() ?? 0);\n    }, 10);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [startTime]);\n  return <Text styles={DtmfDialpadContentTimerStyles}>{elapsedTime}</Text>;\n};\n\n/**\n * @internal\n */\nexport const DtmfDialpadPage = (props: DialpadPageProps): JSX.Element => {\n  const adapter = useAdapter();\n  return <DtmfDialpadPageContent adapter={adapter} mobileView={props.mobileView} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { DiagnosticQuality } from '@azure/communication-calling';\nimport { useId } from '@fluentui/react-hooks';\nimport { _isInCall } from '@internal/calling-component-bindings';\nimport { ActiveErrorMessage, ErrorBar, ParticipantMenuItemsCallback } from '@internal/react-components';\nimport { VideoGalleryLayout } from '@internal/react-components';\nimport React from 'react';\nimport { useState } from 'react';\nimport { AvatarPersonaDataCallback } from '../../common/AvatarPersona';\nimport { useLocale } from '../../localization';\nimport { CallCompositeOptions } from '../CallComposite';\nimport { CallArrangement } from '../components/CallArrangement';\nimport { MediaGallery } from '../components/MediaGallery';\nimport { NetworkReconnectTile } from '../components/NetworkReconnectTile';\nimport { useHandlers } from '../hooks/useHandlers';\nimport { usePropsFor } from '../hooks/usePropsFor';\nimport { useSelector } from '../hooks/useSelector';\nimport { callStatusSelector } from '../selectors/callStatusSelector';\nimport { complianceBannerSelector } from '../selectors/complianceBannerSelector';\nimport { mediaGallerySelector } from '../selectors/mediaGallerySelector';\nimport { getRemoteParticipantsConnectedSelector } from '../selectors/mediaGallerySelector';\nimport { mutedNotificationSelector } from '../selectors/mutedNotificationSelector';\nimport { networkReconnectTileSelector } from '../selectors/networkReconnectTileSelector';\nimport { reduceCallControlsForMobile } from '../utils';\nimport { MobileChatSidePaneTabHeaderProps } from '../../common/TabHeader';\nimport { SidePaneRenderer } from '../components/SidePane/SidePaneProvider';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangeNotificationBarProps } from '../components/CapabilitiesChangedNotificationBar';\nimport { DtmfDialpadPage } from './DtmfDialpadPage';\nimport { showDtmfDialer } from '../utils/MediaGalleryUtils';\nimport { getTargetCallees } from '../selectors/baseSelectors';\n/**\n * @private\n */\nexport interface CallPageProps {\n  mobileView: boolean;\n  modalLayerHostId: string;\n  callInvitationURL?: string;\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  updateSidePaneRenderer: (renderer: SidePaneRenderer | undefined) => void;\n  mobileChatTabHeader?: MobileChatSidePaneTabHeaderProps;\n  options?: CallCompositeOptions;\n  latestErrors: ActiveErrorMessage[];\n  onDismissError: (error: ActiveErrorMessage) => void;\n  galleryLayout: VideoGalleryLayout;\n  /* @conditional-compile-remove(capabilities) */\n  capabilitiesChangedNotificationBarProps?: CapabilitiesChangeNotificationBarProps;\n  onUserSetGalleryLayoutChange?: (layout: VideoGalleryLayout) => void;\n  userSetOverflowGalleryPosition?: 'Responsive' | 'horizontalTop';\n  onSetUserSetOverflowGalleryPosition?: (position: 'Responsive' | 'horizontalTop') => void;\n  onCloseChatPane?: () => void;\n}\n\n/**\n * @private\n */\nexport const CallPage = (props: CallPageProps): JSX.Element => {\n  const {\n    callInvitationURL,\n    onFetchAvatarPersonaData,\n    onFetchParticipantMenuItems,\n    options,\n    mobileView,\n    galleryLayout = 'floatingLocalVideo',\n    onUserSetGalleryLayoutChange,\n    userSetOverflowGalleryPosition = 'Responsive',\n    onSetUserSetOverflowGalleryPosition,\n    onCloseChatPane\n  } = props;\n\n  // To use useProps to get these states, we need to create another file wrapping Call,\n  // It seems unnecessary in this case, so we get the updated states using this approach.\n  const {\n    callStatus\n  } = useSelector(callStatusSelector);\n  const mediaGalleryProps = useSelector(mediaGallerySelector);\n  const mediaGalleryHandlers = useHandlers(MediaGallery);\n  const complianceBannerProps = useSelector(complianceBannerSelector);\n  const errorBarProps = usePropsFor(ErrorBar);\n  const mutedNotificationProps = useSelector(mutedNotificationSelector);\n  const networkReconnectTileProps = useSelector(networkReconnectTileSelector);\n  const remoteParticipantsConnected = useSelector(getRemoteParticipantsConnectedSelector);\n  const callees = useSelector(getTargetCallees);\n  const renderDtmfDialerFromStart = showDtmfDialer(callees, remoteParticipantsConnected);\n  const [dtmfDialerPresent, setDtmfDialerPresent] = useState<boolean>(renderDtmfDialerFromStart);\n  const strings = useLocale().strings.call;\n\n  // Reduce the controls shown when mobile view is enabled.\n  const callControlOptions = mobileView ? reduceCallControlsForMobile(options?.callControls) : options?.callControls;\n  const drawerMenuHostId = useId('drawerMenuHost');\n  const onRenderGalleryContentTrampoline = (): JSX.Element => {\n    if (dtmfDialerPresent) {\n      return <DtmfDialpadPage mobileView={props.mobileView} modalLayerHostId={props.modalLayerHostId} options={props.options} updateSidePaneRenderer={props.updateSidePaneRenderer} mobileChatTabHeader={props.mobileChatTabHeader} latestErrors={props.latestErrors} onDismissError={props.onDismissError}\n      /* @conditional-compile-remove(capabilities) */ capabilitiesChangedNotificationBarProps={props.capabilitiesChangedNotificationBarProps} onSetDialpadPage={() => setDtmfDialerPresent(!dtmfDialerPresent)} dtmfDialerPresent={dtmfDialerPresent} />;\n    } else {\n      return <MediaGallery isMobile={mobileView} {...mediaGalleryProps} {...mediaGalleryHandlers} onFetchAvatarPersonaData={onFetchAvatarPersonaData} remoteVideoTileMenuOptions={options?.remoteVideoTileMenuOptions} drawerMenuHostId={drawerMenuHostId}\n      /* @conditional-compile-remove(click-to-call) */ localVideoTileOptions={options?.localVideoTile} userSetOverflowGalleryPosition={userSetOverflowGalleryPosition} userSetGalleryLayout={galleryLayout} />;\n    }\n  };\n  return <>\n      <CallArrangement id={drawerMenuHostId} complianceBannerProps={{\n      ...complianceBannerProps,\n      strings\n    }} errorBarProps={options?.errorBar !== false && errorBarProps} mutedNotificationProps={mutedNotificationProps} callControlProps={{\n      callInvitationURL: callInvitationURL,\n      onFetchParticipantMenuItems: onFetchParticipantMenuItems,\n      options: callControlOptions,\n      increaseFlyoutItemSize: mobileView\n    }}\n    /* @conditional-compile-remove(one-to-n-calling) */ /* @conditional-compile-remove(close-captions) */ onFetchAvatarPersonaData={onFetchAvatarPersonaData} mobileView={mobileView} modalLayerHostId={props.modalLayerHostId} onRenderGalleryContent={() => _isInCall(callStatus) ? isNetworkHealthy(networkReconnectTileProps.networkReconnectValue) ? onRenderGalleryContentTrampoline() : <NetworkReconnectTile {...networkReconnectTileProps} /> : <></>} updateSidePaneRenderer={props.updateSidePaneRenderer} mobileChatTabHeader={props.mobileChatTabHeader} onCloseChatPane={onCloseChatPane} dataUiId={'call-page'} latestErrors={props.latestErrors} onDismissError={props.onDismissError} onUserSetOverflowGalleryPositionChange={onSetUserSetOverflowGalleryPosition} onUserSetGalleryLayoutChange={onUserSetGalleryLayoutChange} userSetGalleryLayout={galleryLayout}\n    /* @conditional-compile-remove(capabilities) */ capabilitiesChangedNotificationBarProps={props.capabilitiesChangedNotificationBarProps} onSetDialpadPage={() => setDtmfDialerPresent(!dtmfDialerPresent)} dtmfDialerPresent={dtmfDialerPresent} />\n      {}\n    </>;\n};\n\n/**\n * @private\n */\nexport const isNetworkHealthy = (value: DiagnosticQuality | boolean | undefined): boolean => {\n  // We know that the value is actually of type DiagnosticQuality for this diagnostic.\n  // We ignore any boolen values, considering the network to still be healthy.\n  // Thus, only DiagnosticQuality.Poor or .Bad indicate network problems.\n  return value === true || value === false || value === undefined || value === DiagnosticQuality.Good;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IDropdownStyles, IStackTokens, Theme, mergeStyles } from '@fluentui/react';\nconst DROPDOWN_HEIGHT_REM = 2.25;\n\n/**\n * @private\n */\nexport const mainStackTokens: IStackTokens = {\n  childrenGap: '0.5rem'\n};\n\n/**\n * @private\n */\nexport const soundStackTokens: IStackTokens = {\n  childrenGap: '0.5rem'\n};\n\n/**\n * @private\n */\nexport const dropDownStyles = (theme: Theme): Partial<IDropdownStyles> => ({\n  caretDownWrapper: {\n    height: `${DROPDOWN_HEIGHT_REM}rem`,\n    lineHeight: `${DROPDOWN_HEIGHT_REM}rem`\n  },\n  dropdownItem: {\n    fontSize: '0.875rem',\n    height: `${DROPDOWN_HEIGHT_REM}rem`,\n    background: theme.palette.white\n  },\n  dropdown: {\n    height: `${DROPDOWN_HEIGHT_REM}rem`,\n    width: '100%',\n    svg: {\n      verticalAlign: 'top'\n    }\n  },\n  title: {\n    fontSize: '0.875rem',\n    height: `${DROPDOWN_HEIGHT_REM}rem`,\n    lineHeight: '2rem',\n    borderRadius: '0.25rem',\n    border: `1px solid ${theme.palette.neutralQuaternaryAlt}`\n  },\n  label: {\n    fontWeight: 600,\n    fontSize: '0.875rem',\n    // Add z-index to ensure labels are rendered above the configuration section background\n    zIndex: 1\n  },\n  errorMessage: {\n    fontSize: '0.875rem'\n  }\n});\n\n/**\n * @private\n */\nexport const dropDownTitleIconStyles = mergeStyles({\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n  minWidth: '0',\n  maxWidth: '100%',\n  overflowWrap: 'break-word',\n  margin: '.063rem'\n});\n\n/**\n * @private\n */\nexport const optionIconStyles = mergeStyles({\n  marginRight: '8px',\n  verticalAlign: 'text-top'\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n/**\n * @private\n */\nexport interface ConfigurationPageCameraDropdownProps {\n  cameraGrantedDropdown: JSX.Element;\n  cameraPermissionGranted: boolean;\n  onClickEnableDevicePermission?: () => void;\n}\n\n/**\n * @private\n */\nexport const ConfigurationPageCameraDropdown = (props: ConfigurationPageCameraDropdownProps): JSX.Element => {\n  return props.cameraGrantedDropdown;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n/**\n * @private\n */\nexport interface ConfigurationPageMicDropdownProps {\n  micGrantedDropdown: JSX.Element;\n  micPermissionGranted: boolean;\n  onClickEnableDevicePermission?: () => void;\n}\n\n/**\n * @private\n */\nexport const ConfigurationPageMicDropdown = (props: ConfigurationPageMicDropdownProps): JSX.Element => {\n  return props.micGrantedDropdown;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackItemStyles, IStackStyles, IStackTokens, IStyle, mergeStyles, IButtonStyles, Theme, IPanelStyles, IFocusTrapZoneProps, IImageStyles, AnimationStyles, ITheme } from '@fluentui/react';\nimport { _pxToRem } from '@internal/acs-ui-common';\n\n/** @private */\nexport const CONFIGURATION_PAGE_SECTION_MIN_WIDTH_REM = 11;\n/** @private */\nexport const CONFIGURATION_PAGE_SECTION_MAX_WIDTH_REM = 20.625;\n/** @private */\nexport const CONFIGURATION_PAGE_SECTION_HEIGHT_REM = 13.625;\nconst LOGO_HEIGHT_REM = 3;\n\n/**\n * @private\n */\nexport const configurationStackTokensDesktop: IStackTokens = {\n  childrenGap: '1.5rem'\n};\n\n/**\n * @private\n */\nexport const configurationStackTokensMobile: IStackTokens = {\n  childrenGap: '0.5rem'\n};\n\n/**\n * @private\n */\nexport const deviceConfigurationStackTokens: IStackTokens = {\n  childrenGap: '1.5rem'\n};\n\n/** @private */\nexport const configurationContainerStyle = (desktop: boolean, backgroundImageUrl?: string): IStackStyles => ({\n  root: {\n    height: '100%',\n    width: '100%',\n    padding: desktop ? '2rem 1rem 2rem 1rem' : '1rem 1rem 2rem 1rem',\n    minWidth: desktop ? '25rem' // sum of min-width from children + ChildrenGap * (nb of children - 1) + padding * 2 = (11 + 11) + (2 * 1) + 0.5 * 2\n    : '16rem',\n    // from LocalPreview: ControlBar width + 0.5 * 2 for spacing + padding * 2 = 14 + 0.5 * 2 + 0.5 * 2\n    minHeight: desktop ? '22rem' // max height of SelectionContainer + padding * 2 = 21 + 0.5 * 2\n    : '13rem',\n    '::before': !backgroundImageUrl ? undefined : {\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 0,\n      width: '100%',\n      height: '100%',\n      backgroundImage: `url(${backgroundImageUrl})`,\n      backgroundSize: 'cover',\n      backgroundPosition: 'center',\n      ...AnimationStyles.fadeIn500\n    }\n  }\n});\n\n/**\n * @private\n */\nexport const configurationSectionStyle: IStackStyles = {\n  root: {\n    width: '100%',\n    minWidth: `${CONFIGURATION_PAGE_SECTION_MIN_WIDTH_REM}rem`,\n    maxWidth: `${CONFIGURATION_PAGE_SECTION_MAX_WIDTH_REM}rem`\n  }\n};\n\n/**\n * @private\n */\nexport const selectionContainerStyle = (theme: ITheme, noSpeakerDropdownShown?: boolean): string => mergeStyles({\n  width: '100%',\n  height: noSpeakerDropdownShown ? 'auto' : `${CONFIGURATION_PAGE_SECTION_HEIGHT_REM}rem`,\n  padding: '1rem',\n  borderRadius: theme.effects.roundedCorner6,\n  border: `0.0625rem solid ${theme.palette.neutralLight}`,\n  overflow: 'hidden',\n  // do not let child background overflow the curved corners\n  boxShadow: theme.effects.elevation4,\n  // Style the background of the container to have partial transparency.\n  // Using `before:` pseudo-element to avoid having to wrap the content in an extra div.\n  // Ideally rgba would be used but we cannot garauntee the format of theme.palette.white\n  // to parse it correctly.\n  position: 'relative',\n  ':before': {\n    content: '\"\"',\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    zIndex: 0,\n    background: theme.palette.white,\n    opacity: 0.9\n  }\n});\n\n/**\n * @private\n */\nexport const titleContainerStyleDesktop = (theme: ITheme): string => mergeStyles({\n  fontSize: '1.2rem',\n  lineHeight: '1rem',\n  fontWeight: 600\n}, configurationPageTextDecoration(theme));\n\n/**\n * @private\n */\nexport const titleContainerStyleMobile = (theme: ITheme): string => mergeStyles({\n  fontSize: '1.0625rem',\n  lineHeight: '1.375rem',\n  fontWeight: 600,\n  textAlign: 'center'\n}, configurationPageTextDecoration(theme));\n\n/**\n * Ensure configuration page text is legible on top of a background image.\n * @private\n */\nconst configurationPageTextDecoration = (theme: ITheme): IStyle => {\n  return {\n    textShadow: `0px 0px 8px ${theme.palette.whiteTranslucent40}`,\n    fill: theme.semanticColors.bodyText,\n    stroke: theme.palette.whiteTranslucent40,\n    paintOrder: 'stroke fill',\n    strokeWidth: _pxToRem(1.5),\n    text: {\n      letterSpacing: '-0.02rem' // cope with extra width due to stroke width\n    },\n    '@media (forced-colors: active)': {\n      forcedColorAdjust: 'auto',\n      fill: theme.palette.neutralQuaternaryAlt,\n      textShadow: 'none',\n      stroke: 'none'\n    }\n  };\n};\n\n/**\n * @private\n */\nexport const callDetailsContainerStyles: IStackStyles = {\n  root: {\n    textAlign: 'center',\n    maxWidth: _pxToRem(700),\n    alignSelf: 'center'\n  }\n};\nconst callDetailsStyle = (theme: ITheme): IStyle => ({\n  fontSize: '0.9375',\n  lineHeight: '1.25rem',\n  textShadow: `0px 0px 8px ${theme.palette.whiteTranslucent40}`,\n  marginTop: '-0.33rem' // compensate for extra padding around the CallTitle that avoids the SVG shadowing being cut off\n});\n\n/**\n * @private\n */\nexport const callDetailsStyleDesktop = (theme: ITheme): string => mergeStyles(callDetailsStyle(theme));\n\n/**\n * @private\n */\nexport const callDetailsStyleMobile = (theme: ITheme): string => mergeStyles(callDetailsStyle(theme), {\n  marginBottom: '0.5rem',\n  textAlign: 'center'\n});\n\n/**\n * @private\n */\nexport const startCallButtonContainerStyleDesktop: IStackStyles = {\n  root: {\n    paddingTop: '1.125rem'\n  }\n};\n\n/**\n * @private\n */\nexport const startCallButtonContainerStyleMobile: IStackStyles = {\n  root: {\n    textAlign: 'center'\n  }\n};\n\n/**\n * @private\n */\nexport const startCallButtonStyleMobile = mergeStyles({\n  width: '100%',\n  maxWidth: 'unset',\n  borderRadius: '0.25rem'\n});\n\n/**\n * @private\n */\nexport const startCallButtonStyleDesktop = mergeStyles({\n  borderRadius: '0.25rem',\n  width: 'auto',\n  height: '2.25rem'\n});\n\n/** @private */\nexport const cameraAndVideoEffectsContainerStyleDesktop: IStackItemStyles = {\n  root: {\n    alignItems: 'center'\n  }\n};\n\n/**\n * @private\n */\nexport const effectsButtonStyles = (theme: Theme): IButtonStyles => {\n  return {\n    root: {\n      background: 'transparent',\n      border: 'none',\n      color: theme.palette.themePrimary,\n      // Top and bottom padding needs to be 5px to match the label padding\n      padding: '5px 0.25rem',\n      ':hover, :focus': {\n        color: theme.palette.themePrimary\n      },\n      svg: {\n        height: '1rem',\n        width: '1rem'\n      }\n    },\n    rootChecked: {\n      color: theme.palette.themePrimary\n    },\n    rootHovered: {\n      color: theme.palette.themePrimary\n    },\n    rootPressed: {\n      color: theme.palette.themePrimary\n    },\n    rootFocused: {\n      color: theme.palette.themePrimary\n    }\n  };\n};\n\n/** @private */\nexport const fillWidth = mergeStyles({\n  width: '100%',\n  position: 'relative'\n});\n\n/** @private */\nexport const configurationCenteredContent = (fillsHeight: boolean, hasLogo?: boolean): string => mergeStyles({\n  width: '100%',\n  position: 'relative',\n  // If the content does not fill the height, center it vertically.\n  // We do not include the logo in the centering per design. This allows it to fade\n  // in and not shift the content. To exclude the logo, we subtract the logo height\n  // and margin from the actual height. This allows the flex box's natural centering\n  // to appropriately center the content.\n  height: `calc(100% - ${!fillsHeight && hasLogo ? `${LOGO_HEIGHT_REM}rem` : '0rem'})`\n});\n\n/** @private */\nexport const panelStyles: Partial<IPanelStyles> = {\n  content: {\n    display: 'flex',\n    flexBasis: '100%',\n    paddingLeft: '0rem',\n    // remove default padding\n    paddingRight: '0rem' // remove default padding\n  },\n  commands: {\n    paddingTop: '0rem' // remove default padding\n  },\n  scrollableContent: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%'\n  }\n};\n\n/** @private */\nexport const panelFocusProps: IFocusTrapZoneProps = {\n  forceFocusInsideTrap: false\n};\n\n/**\n * @private\n */\nexport const logoStyles = (shape: undefined | 'unset' | 'circle'): IImageStyles => ({\n  root: {\n    overflow: 'initial',\n    // prevent the image being clipped\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  image: {\n    height: `${LOGO_HEIGHT_REM}rem`,\n    borderRadius: shape === 'circle' ? '100%' : undefined,\n    aspectRatio: shape === 'circle' ? '1 / 1' : undefined,\n    objectFit: shape === 'circle' ? 'cover' : undefined\n  }\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { AudioDeviceInfo, VideoDeviceInfo } from '@azure/communication-calling';\nimport { Dropdown, IDropdownOption, Label, mergeStyles, Stack } from '@fluentui/react';\n/* @conditional-compile-remove(video-background-effects) */\nimport { DefaultButton } from '@fluentui/react';\nimport { useTheme, VideoStreamOptions, _DevicePermissionDropdown } from '@internal/react-components';\nimport React from 'react';\nimport { CallCompositeIcon } from '../../common/icons';\nimport { useLocale } from '../../localization';\nimport { dropDownStyles, dropDownTitleIconStyles, mainStackTokens, optionIconStyles, soundStackTokens } from '../styles/LocalDeviceSettings.styles';\n/* @conditional-compile-remove(call-readiness) */ /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(video-background-effects) */\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { ConfigurationPageCameraDropdown } from './ConfigurationPageCameraDropdown';\nimport { ConfigurationPageMicDropdown } from './ConfigurationPageMicDropdown';\nimport { cameraAndVideoEffectsContainerStyleDesktop } from '../styles/CallConfiguration.styles';\n/* @conditional-compile-remove(video-background-effects) */\nimport { effectsButtonStyles } from '../styles/CallConfiguration.styles';\ntype iconType = 'Camera' | 'Microphone' | 'Speaker';\nconst getDropDownList = (list: Array<VideoDeviceInfo | AudioDeviceInfo>): IDropdownOption[] => {\n  // Remove duplicates\n  const noDuplicates = new Map<string, VideoDeviceInfo | AudioDeviceInfo>();\n  for (const item of list) {\n    noDuplicates.set(item.id, item);\n  }\n  const dropdownList: IDropdownOption[] = [];\n  for (const item of noDuplicates.values()) {\n    dropdownList.push({\n      key: item.id,\n      text: item.name === '' ? item.deviceType : item.name\n    });\n  }\n  return dropdownList;\n};\nconst getOptionIcon = (type: iconType): JSX.Element | undefined => {\n  if (type === 'Camera') {\n    return <CallCompositeIcon iconName=\"LocalDeviceSettingsCamera\" className={optionIconStyles} />;\n  } else if (type === 'Microphone') {\n    return <CallCompositeIcon iconName=\"LocalDeviceSettingsMic\" className={optionIconStyles} />;\n  } else if (type === 'Speaker') {\n    return <CallCompositeIcon iconName=\"LocalDeviceSettingsSpeaker\" className={optionIconStyles} />;\n  } else {\n    return undefined;\n  }\n};\nconst onRenderTitle = (iconType: iconType, props?: IDropdownOption[]): JSX.Element => {\n  const icon = props && getOptionIcon(iconType);\n  return props ? <div className={dropDownTitleIconStyles}>\n      {icon}\n      <span>{props[0].text}</span>\n    </div> : <></>;\n};\nconst localVideoViewOptions = ({\n  scalingMode: 'Crop',\n  isMirrored: true\n} as VideoStreamOptions);\n\n/**\n * @private\n */\nexport interface LocalDeviceSettingsType {\n  cameras: VideoDeviceInfo[];\n  microphones: AudioDeviceInfo[];\n  speakers: AudioDeviceInfo[];\n  selectedCamera?: VideoDeviceInfo;\n  selectedMicrophone?: AudioDeviceInfo;\n  selectedSpeaker?: AudioDeviceInfo;\n  microphonePermissionGranted: boolean | undefined;\n  cameraPermissionGranted: boolean | undefined;\n  onSelectCamera: (device: VideoDeviceInfo, options?: VideoStreamOptions) => Promise<void>;\n  onSelectMicrophone: (device: AudioDeviceInfo) => Promise<void>;\n  onSelectSpeaker: (device: AudioDeviceInfo) => Promise<void>;\n  /* @conditional-compile-remove(video-background-effects) */\n  onClickVideoEffects?: () => void;\n}\n\n/**\n * @private\n */\nexport const LocalDeviceSettings = (props: LocalDeviceSettingsType): JSX.Element => {\n  const theme = useTheme();\n  const locale = useLocale();\n  /* @conditional-compile-remove(call-readiness) */ /* @conditional-compile-remove(video-background-effects) */ /* @conditional-compile-remove(rooms) */\n  const adapter = useAdapter();\n  /* @conditional-compile-remove(video-background-effects) */\n  const onResolveVideoEffectDependency = adapter.getState().onResolveVideoEffectDependency;\n  const defaultPlaceHolder = locale.strings.call.defaultPlaceHolder;\n  const cameraLabel = locale.strings.call.cameraLabel;\n  const soundLabel = locale.strings.call.soundLabel;\n  const noSpeakersLabel = locale.strings.call.noSpeakersLabel;\n  const noCameraLabel = locale.strings.call.noCamerasLabel;\n  const noMicLabel = locale.strings.call.noMicrophonesLabel;\n  /* @conditional-compile-remove(rooms) */\n  const role = adapter.getState().call?.role;\n  const cameraPermissionGranted = props.cameraPermissionGranted;\n  const micPermissionGranted = props.microphonePermissionGranted;\n  let roleCanUseCamera = true;\n  let roleCanUseMic = true;\n\n  /* @conditional-compile-remove(rooms) */\n  roleCanUseCamera = role === 'Consumer' ? false : true;\n  /* @conditional-compile-remove(rooms) */\n  roleCanUseMic = role === 'Consumer' ? false : true;\n\n  // TODO: speaker permission is tied to microphone permission (when you request 'audio' permission using the SDK) its\n  // actually granting access to query both microphone and speaker. However the browser popup asks you explicity for\n  // 'microphone'. This needs investigation on how we want to handle this and maybe needs follow up with SDK team.\n  const hasCameras = props.cameras.length > 0;\n  const hasMicrophones = props.microphones.length > 0;\n  const hasSpeakers = props.speakers.length > 0;\n  const cameraGrantedDropdown = <Dropdown data-ui-id=\"call-composite-local-camera-settings\" aria-labelledby={'call-composite-local-camera-settings-label'} placeholder={hasCameras ? defaultPlaceHolder : noCameraLabel} options={cameraPermissionGranted ? getDropDownList(props.cameras) : [{\n    key: 'deniedOrUnknown',\n    text: ''\n  }]} styles={dropDownStyles(theme)} disabled={!cameraPermissionGranted || !hasCameras} errorMessage={props.cameraPermissionGranted === undefined || props.cameraPermissionGranted ? undefined : locale.strings.call.cameraPermissionDenied} defaultSelectedKey={micPermissionGranted ? props.selectedCamera ? props.selectedCamera.id : props.cameras ? props.cameras[0]?.id : '' : 'deniedOrUnknown'} onChange={(event, option, index) => {\n    props.onSelectCamera(props.cameras[index ?? 0], localVideoViewOptions);\n  }} onRenderTitle={(props?: IDropdownOption[]) => onRenderTitle('Camera', props)} />;\n  const micGrantedDropdown = <>\n      {roleCanUseMic && <Dropdown aria-labelledby={'call-composite-local-sound-settings-label'} placeholder={hasMicrophones ? defaultPlaceHolder : noMicLabel} styles={dropDownStyles(theme)} disabled={!micPermissionGranted || !hasMicrophones} errorMessage={props.microphonePermissionGranted === undefined || props.microphonePermissionGranted ? undefined : locale.strings.call.microphonePermissionDenied} options={micPermissionGranted ? getDropDownList(props.microphones) : [{\n      key: 'deniedOrUnknown',\n      text: ''\n    }]} defaultSelectedKey={micPermissionGranted ? props.selectedMicrophone ? props.selectedMicrophone.id : defaultDeviceId(props.microphones) : 'deniedOrUnknown'} onChange={(event: React.FormEvent<HTMLDivElement>, option?: IDropdownOption | undefined, index?: number | undefined) => {\n      props.onSelectMicrophone(props.microphones[index ?? 0]);\n    }} onRenderTitle={(props?: IDropdownOption[]) => onRenderTitle('Microphone', props)} />}\n    </>;\n  const speakerDropdown = <Dropdown aria-labelledby={'call-composite-local-sound-settings-label'} placeholder={hasSpeakers ? defaultPlaceHolder : noSpeakersLabel} styles={dropDownStyles(theme)} disabled={props.speakers.length === 0} options={getDropDownList(props.speakers)} defaultSelectedKey={props.selectedSpeaker ? props.selectedSpeaker.id : defaultDeviceId(props.speakers)} onChange={(event: React.FormEvent<HTMLDivElement>, option?: IDropdownOption | undefined, index?: number | undefined) => {\n    props.onSelectSpeaker(props.speakers[index ?? 0]);\n  }} onRenderTitle={(props?: IDropdownOption[]) => onRenderTitle('Speaker', props)} />;\n  const SafariBrowserSpeakerDropdownTrampoline = (): JSX.Element => {\n    return speakerDropdown;\n  };\n  return <Stack data-ui-id=\"call-composite-device-settings\" tokens={mainStackTokens}>\n      {roleCanUseCamera && <Stack>\n          <Stack horizontal horizontalAlign=\"space-between\" styles={cameraAndVideoEffectsContainerStyleDesktop}>\n            <Label id={'call-composite-local-camera-settings-label'} className={mergeStyles(dropDownStyles(theme).label)} disabled={!cameraPermissionGranted} // follows dropdown disabled state\n        >\n              {cameraLabel}\n            </Label>\n            {/* @conditional-compile-remove(video-background-effects) */\n        onResolveVideoEffectDependency && <DefaultButton iconProps={{\n          iconName: 'ConfigurationScreenVideoEffectsButton'\n        }} styles={effectsButtonStyles(theme)} onClick={props.onClickVideoEffects} data-ui-id={'call-config-video-effects-button'}>\n                  {locale.strings.call.configurationPageVideoEffectsButtonLabel}\n                </DefaultButton>}\n          </Stack>\n          <ConfigurationPageCameraDropdown cameraGrantedDropdown={cameraGrantedDropdown} cameraPermissionGranted={cameraPermissionGranted ?? false} />\n        </Stack>}\n      <Stack>\n        <Label id={'call-composite-local-sound-settings-label'} className={mergeStyles(dropDownStyles(theme).label)} disabled={!micPermissionGranted} // follows Start button disabled state in ConfigurationPage\n      >\n          {soundLabel}\n        </Label>\n        <Stack data-ui-id=\"call-composite-sound-settings\" tokens={soundStackTokens}>\n          <ConfigurationPageMicDropdown micGrantedDropdown={micGrantedDropdown} micPermissionGranted={micPermissionGranted ?? false} />\n          <SafariBrowserSpeakerDropdownTrampoline />\n        </Stack>\n      </Stack>\n    </Stack>;\n};\nconst defaultDeviceId = (devices: AudioDeviceInfo[]): string => {\n  if (devices.length === 0) {\n    return '';\n  }\n  const defaultDevice = devices.find(device => device.isSystemDefault);\n  if (defaultDevice) {\n    return defaultDevice.id;\n  }\n  return devices[0].id;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IButtonStyles, mergeStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const videoCameraIconStyle = mergeStyles({\n  marginRight: '0.375rem',\n  fontSize: '1.375rem'\n});\n\n/**\n * @private\n */\nexport const buttonStyle = mergeStyles({\n  fontWeight: 600,\n  fontSize: '0.875rem',\n  // 14px\n  height: '2.75rem',\n  width: '100%'\n});\n\n/**\n * @private\n */\nexport const buttonWithIconStyles: IButtonStyles = {\n  textContainer: {\n    display: 'contents'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { PrimaryButton, mergeStyles, IButtonProps } from '@fluentui/react';\nimport React from 'react';\nimport { buttonStyle, buttonWithIconStyles, videoCameraIconStyle } from '../styles/StartCallButton.styles';\nimport { Video20Filled } from '@fluentui/react-icons';\nimport { useLocale } from '../../localization';\n\n/**\n * @private\n */\nexport interface StartCallButtonProps extends IButtonProps {\n  className?: string;\n  /** If set, the button is intended to rejoin an existing call. */\n  rejoinCall?: boolean;\n  hideIcon?: boolean;\n}\n\n/**\n * @private\n */\nexport const StartCallButton = (props: StartCallButtonProps): JSX.Element => {\n  const {\n    rejoinCall\n  } = props;\n  const locale = useLocale();\n  return <PrimaryButton {...props} data-ui-id=\"call-composite-start-call-button\" className={mergeStyles(buttonStyle, props.className)} styles={buttonWithIconStyles} text={rejoinCall ? locale.strings.call.rejoinCallButtonLabel : locale.strings.call.startCallButtonLabel} onRenderIcon={props.hideIcon ? undefined : () => <Video20Filled className={videoCameraIconStyle} />} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport * as reselect from 'reselect';\nimport { getDeviceManager } from './baseSelectors';\n\n/**\n * @private\n */\nexport const devicePermissionSelector = reselect.createSelector([getDeviceManager], deviceManager => {\n  return {\n    video: deviceManager.deviceAccess ? deviceManager.deviceAccess.video : undefined,\n    audio: deviceManager.deviceAccess ? deviceManager.deviceAccess.audio : undefined\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport * as reselect from 'reselect';\nimport { getDeviceManager } from './baseSelectors';\n\n/**\r\n * @private\r\n */\nexport const localPreviewSelector = reselect.createSelector([getDeviceManager], deviceManager => {\n  // TODO: we should take in a LocalVideoStream that developer wants to use as their 'Preview' view. We should also\n  // handle cases where 'Preview' view is in progress and not necessary completed.\n  const view = deviceManager.cameras.length > 0 &&\n  // This ensures that the video stream is reset if camera devices are removed.\n  deviceManager.unparentedViews.length > 0 && deviceManager.unparentedViews[0].view;\n  return {\n    videoStreamElement: view ? view.target : null\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, ITheme, mergeStyles } from '@fluentui/react';\nimport { CONFIGURATION_PAGE_SECTION_HEIGHT_REM, CONFIGURATION_PAGE_SECTION_MAX_WIDTH_REM, CONFIGURATION_PAGE_SECTION_MIN_WIDTH_REM } from './CallConfiguration.styles';\nconst localPreviewContainerStyle = (theme: ITheme): IStyle => ({\n  borderRadius: theme.effects.roundedCorner6,\n  overflow: 'hidden' // do not let child background overflow the curved corners\n});\n\n/**\n * @private\n */\nexport const localPreviewContainerStyleDesktop = (theme: ITheme): string => mergeStyles(localPreviewContainerStyle(theme), {\n  width: '100%',\n  height: `${CONFIGURATION_PAGE_SECTION_HEIGHT_REM}rem`,\n  minWidth: `${CONFIGURATION_PAGE_SECTION_MIN_WIDTH_REM}rem`,\n  maxWidth: `${CONFIGURATION_PAGE_SECTION_MAX_WIDTH_REM}rem`,\n  border: `0.0625rem solid ${theme.palette.neutralLight}`,\n  borderRadius: theme.effects.roundedCorner6,\n  boxShadow: theme.effects.elevation4\n});\n\n/**\n * @private\n */\nexport const localPreviewContainerStyleMobile = (theme: ITheme): string => mergeStyles(localPreviewContainerStyle(theme), {\n  width: '100%',\n  height: '100%',\n  minHeight: `${CONFIGURATION_PAGE_SECTION_HEIGHT_REM}rem`\n});\n\n/**\n * @private\n */\nexport const cameraOffLabelStyle = mergeStyles({\n  fontSize: '0.75rem' // 12px\n});\n\n/**\n * @private\n */\nexport const localPreviewTileStyle = {\n  root: {\n    '@media (forced-colors: active)': {\n      borderColor: '#FFFFFF',\n      border: '1px solid'\n    }\n  }\n};\n\n/**\n * @private\n */\nexport const localPreviewButtonStyle = {\n  root: {\n    '@media (forced-colors: active)': {\n      ':focus': {\n        border: '1px solid !important' // we need bang important to override fluents colours\n      },\n      ':focus::after': {\n        border: 'unset !important',\n        // we need bang important to override fluents colours\n        outline: 'unset !important'\n      }\n    }\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { mergeStyles, Stack, Text } from '@fluentui/react';\nimport { CameraButton, ControlBar, MicrophoneButton, DevicesButton, StreamMedia, useTheme, VideoTile } from '@internal/react-components';\nimport React, { useCallback } from 'react';\nimport { CallCompositeIcon } from '../../common/icons';\nimport { useLocale } from '../../localization';\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { usePropsFor } from '../hooks/usePropsFor';\nimport { useSelector } from '../hooks/useSelector';\nimport { getLocalMicrophoneEnabled } from '../selectors/baseSelectors';\nimport { devicePermissionSelector } from '../selectors/devicePermissionSelector';\nimport { localPreviewSelector } from '../selectors/localPreviewSelector';\nimport { buttonFlyoutIncreasedSizeStyles } from '../styles/Buttons.styles';\nimport { cameraOffLabelStyle, localPreviewButtonStyle, localPreviewContainerStyleDesktop, localPreviewContainerStyleMobile, localPreviewTileStyle } from '../styles/LocalPreview.styles';\n\n/**\n * @private\n */\nexport interface LocalPreviewProps {\n  mobileView: boolean;\n  showDevicesButton: boolean;\n}\n\n/**\n * @private\n */\nexport const LocalPreview = (props: LocalPreviewProps): JSX.Element => {\n  const locale = useLocale();\n  const cameraButtonProps = usePropsFor(CameraButton);\n  const localPreviewProps = useSelector(localPreviewSelector);\n  const devicesButtonProps = usePropsFor(DevicesButton);\n  const {\n    audio: microphonePermissionGranted,\n    video: cameraPermissionGranted\n  } = useSelector(devicePermissionSelector);\n  const isLocalMicrophoneEnabled = useSelector(getLocalMicrophoneEnabled);\n  const adapter = useAdapter();\n  const onToggleMic = useCallback(async () => {\n    isLocalMicrophoneEnabled ? adapter.mute() : adapter.unmute();\n  }, [adapter, isLocalMicrophoneEnabled]);\n  const hasNoSpeakers = !devicesButtonProps.speakers.length;\n  const hasNoDevices = devicesButtonProps.cameras.length === 0 && devicesButtonProps.microphones.length === 0 && devicesButtonProps.speakers.length === 0;\n  const hasCameras = devicesButtonProps.cameras.length > 0;\n  const hasMicrophones = devicesButtonProps.microphones.length > 0;\n  const theme = useTheme();\n  const onRenderPlaceholder = useCallback((): JSX.Element => {\n    return <Stack className={mergeStyles({\n      width: '100%',\n      height: '100%',\n      // The text should be centered in the local preview with the camera icon\n      // appearing above the text. To compensate for the camera icon's height,\n      // we add a negative margin to the top of the container.\n      marginTop: '-0.8rem'\n    })} verticalAlign=\"center\">\n        <Stack.Item align=\"center\">\n          <CallCompositeIcon iconName=\"LocalPreviewPlaceholder\" className={mergeStyles(cameraOffLabelStyle, {\n          color: theme.palette.neutralTertiary\n        })} />\n        </Stack.Item>\n        <Stack.Item align=\"center\">\n          <Text className={mergeStyles(cameraOffLabelStyle, {\n          color: theme.palette.neutralSecondary\n        })}>\n            {locale.strings.call.cameraTurnedOff}\n          </Text>\n        </Stack.Item>\n      </Stack>;\n  }, [theme, locale.strings.call.cameraTurnedOff]);\n  const devicesButtonStyles = props.mobileView ? {\n    menuStyles: {\n      menuItemStyles: buttonFlyoutIncreasedSizeStyles\n    }\n  } : undefined;\n  return <Stack data-ui-id=\"call-composite-local-preview\" className={props.mobileView ? localPreviewContainerStyleMobile(theme) : localPreviewContainerStyleDesktop(theme)}>\n      <VideoTile styles={localPreviewTileStyle} renderElement={localPreviewProps?.videoStreamElement ? <StreamMedia videoStreamElement={localPreviewProps.videoStreamElement} /> : undefined} onRenderPlaceholder={onRenderPlaceholder}>\n        <ControlBar layout=\"floatingBottom\">\n          <MicrophoneButton data-ui-id=\"call-composite-local-device-settings-microphone-button\" checked={isLocalMicrophoneEnabled} onToggleMicrophone={onToggleMic} disabled={!microphonePermissionGranted || !hasMicrophones} showLabel={true}\n        // disable tooltip as it obscures list of devices on mobile\n        strings={props.mobileView ? {\n          tooltipOnContent: '',\n          tooltipOffContent: '',\n          tooltipDisabledContent: ''\n        } : {}} styles={localPreviewButtonStyle} />\n          <CameraButton data-ui-id=\"call-composite-local-device-settings-camera-button\" {...cameraButtonProps} showLabel={true} disabled={!cameraPermissionGranted || !hasCameras}\n        // disable tooltip as it obscures list of devices on mobile\n        strings={props.mobileView ? {\n          tooltipOnContent: '',\n          tooltipOffContent: '',\n          tooltipDisabledContent: '',\n          tooltipVideoLoadingContent: ''\n        } : {}} styles={localPreviewButtonStyle} />\n          {props.showDevicesButton && <DevicesButton data-ui-id=\"call-composite-local-device-settings-options-button\" {...devicesButtonProps}\n        // disable button whilst all other buttons are disabled\n        disabled={!microphonePermissionGranted && !cameraPermissionGranted && hasNoSpeakers || hasNoDevices} showLabel={true}\n        // disable tooltip as it obscures list of devices on mobile\n        strings={props.mobileView ? {\n          tooltipContent: ''\n        } : {}} styles={devicesButtonStyles} />}\n        </ControlBar>\n      </VideoTile>\n    </Stack>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { _DevicePermissionDropdownStrings, _DevicePermissionDropdown, _DevicePermissionDropdownProps, ActiveErrorMessage, ErrorBarProps, _TroubleshootingGuideErrorBarStrings, _TroubleshootingGuideErrorBar, ErrorBar } from '@internal/react-components';\nimport { CallingHandlers } from '@internal/calling-component-bindings';\nimport { Common } from '@internal/acs-ui-common';\n\n/**\n * @private\n */\nexport interface ConfigurationPageErrorBarProps {\n  errorBarProps: {\n    activeErrorMessages: ActiveErrorMessage[];\n  } & Common<CallingHandlers, ErrorBarProps>;\n  showTroubleShootingErrorBar?: boolean;\n  onPermissionsTroubleshootingClick?: (permissionsState: {\n    camera: PermissionState;\n    microphone: PermissionState;\n  }) => void;\n  onNetworkingTroubleShootingClick?: () => void;\n  permissionsState?: {\n    camera: PermissionState;\n    microphone: PermissionState;\n  };\n  onDismissError: (error: ActiveErrorMessage) => void;\n}\n\n/**\n * @private\n */\nexport const ConfigurationPageErrorBar = (props: ConfigurationPageErrorBarProps): JSX.Element => {\n  const {\n    errorBarProps\n  } = props;\n  return <ErrorBar {...errorBarProps} onDismissError={props.onDismissError} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _pxToRem } from '@internal/acs-ui-common';\nimport React, { useLayoutEffect, useRef, useState } from 'react';\n\n/**\n * An SVG element component that wraps inner text to fit the width of the SVG.\n * @private\n */\nexport const SvgWithWordWrapping = (props: {\n  width: number;\n  text: string;\n  lineHeightPx: number;\n  bufferHeightPx: number;\n}): JSX.Element => {\n  const {\n    width,\n    text,\n    lineHeightPx,\n    bufferHeightPx\n  } = props;\n  const svgRef = useRef<SVGSVGElement>(null);\n  const calculationTextElement = useRef<SVGTextElement>(null);\n  const visibleTextElement = useRef<SVGTextElement>(null);\n  const [height, setHeight] = useState<number>(0);\n\n  // useLayoutEffect ensures that the calculationTextElement is rendered before being used for calculations.\n  // Using useLayoutEffect over useEffect ensures we do not get a layout shift when the visibleTextElement is rendered\n  // and the height is updated. This is because useLayoutEffect runs synchronously after DOM mutations but\n  // before the browser has a chance to paint. See https://reactjs.org/docs/hooks-reference.html#uselayouteffect\n  // for more details.\n  useLayoutEffect(() => {\n    if (text && calculationTextElement.current && visibleTextElement.current) {\n      const numLines = convertTextToWrappedText(calculationTextElement.current, visibleTextElement.current, width, lineHeightPx);\n      setHeight(numLines * lineHeightPx);\n    }\n  }, [width, lineHeightPx, text]);\n  return <svg width={width} height={height + bufferHeightPx} ref={svgRef} xmlns=\"http://www.w3.org/2000/svg\">\n      <text height={0} ref={calculationTextElement} style={{\n      visibility: 'hidden'\n    }}>\n        {text}\n      </text>\n      <text ref={visibleTextElement} x=\"0\" y={bufferHeightPx / 4} role=\"heading\" aria-level={1} />\n    </svg>;\n};\n\n/**\n * Wrap text in tspan elements to fit the width of the SVG\n * @param baseTextElement The text element to create the wrapped text from.\n * @param outputTextElement The text element to insert the wrapped text into.\n * @param maxWidth The maximum width of the text element.\n * @param lineHeightPx The height of each line in pixels.\n * @returns The number of lines of text.\n */\nconst convertTextToWrappedText = (inputTextElement: SVGTextElement, outputTextElement: SVGTextElement, maxWidth: number, lineHeightPx: number): number => {\n  const words = inputTextElement.textContent?.split(' ') ?? [];\n  if (words.length === 0 || words[0] === '') {\n    throw new Error('Text element must contain text');\n  }\n\n  // The current line being built.\n  let line = '';\n\n  // Running total of the number of lines.\n  let numLines = 0;\n\n  // First, clear the output text element.\n  outputTextElement.textContent = '';\n\n  // Iterate through each word and create a tspan element for each line.\n  for (let i = 0; i < words.length; i++) {\n    const testLine = line + words[i] + ' ';\n    const testWidth = inputTextElement.getSubStringLength(0, testLine.length);\n    if (testWidth > maxWidth && i > 0) {\n      const newLine = constructTSpanLine(line, lineHeightPx);\n      outputTextElement.appendChild(newLine);\n      line = words[i] + ' ';\n      numLines++;\n    } else {\n      line = testLine;\n    }\n  }\n\n  // Add the last line.\n  const newLine = constructTSpanLine(line, lineHeightPx);\n  outputTextElement.appendChild(newLine);\n  numLines++;\n\n  // Return the number of lines to calculate the height of the SVG.\n  return numLines;\n};\n\n/**\n * Create a tspan element for a line of text, with text set to be centered.\n * @param line The line of text.\n * @param lineHeightPx The height of each line in pixels.\n * @returns The tspan element.\n */\nconst constructTSpanLine = (line: string, lineHeightPx: number): SVGTSpanElement => {\n  const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n  tspan.textContent = line;\n  tspan.setAttribute('x', '50%');\n  tspan.setAttribute('dy', `${lineHeightPx}px`);\n  tspan.setAttribute('text-anchor', 'middle');\n  return tspan;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useCallback, useMemo } from 'react';\nimport { useAdaptedSelector } from '../hooks/useAdaptedSelector';\nimport { useHandlers } from '../hooks/useHandlers';\nimport { LocalDeviceSettings } from '../components/LocalDeviceSettings';\nimport { StartCallButton } from '../components/StartCallButton';\nimport { devicePermissionSelector } from '../selectors/devicePermissionSelector';\nimport { useSelector } from '../hooks/useSelector';\nimport { ActiveErrorMessage, DevicesButton, ErrorBar, useTheme } from '@internal/react-components';\nimport { getCallingSelector } from '@internal/calling-component-bindings';\nimport { Image, Panel, PanelType, Stack } from '@fluentui/react';\nimport { callDetailsContainerStyles, configurationCenteredContent, configurationSectionStyle, deviceConfigurationStackTokens, fillWidth, logoStyles, panelFocusProps, panelStyles, startCallButtonStyleDesktop } from '../styles/CallConfiguration.styles';\nimport { LocalPreview } from '../components/LocalPreview';\nimport { callDetailsStyleDesktop, callDetailsStyleMobile, configurationStackTokensDesktop, configurationStackTokensMobile, configurationContainerStyle, selectionContainerStyle, startCallButtonContainerStyleDesktop, startCallButtonContainerStyleMobile, startCallButtonStyleMobile, titleContainerStyleDesktop, titleContainerStyleMobile } from '../styles/CallConfiguration.styles';\nimport { useLocale } from '../../localization';\nimport { bannerNotificationStyles } from '../styles/CallPage.styles';\nimport { usePropsFor } from '../hooks/usePropsFor';\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { ConfigurationPageErrorBar } from '../components/ConfigurationPageErrorBar';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VIDEO_EFFECTS_SIDE_PANE_WIDTH_REM, useVideoEffectsPane } from '../components/SidePane/useVideoEffectsPane';\nimport { SidePane } from '../components/SidePane/SidePane';\nimport { SidePaneRenderer } from '../components/SidePane/SidePaneProvider';\n/* @conditional-compile-remove(video-background-effects) */\nimport { useIsParticularSidePaneOpen } from '../components/SidePane/SidePaneProvider';\n/* @conditional-compile-remove(video-background-effects) */\nimport { localVideoSelector } from '../../CallComposite/selectors/localVideoStreamSelector';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangeNotificationBarProps } from '../components/CapabilitiesChangedNotificationBar';\nimport { SvgWithWordWrapping } from '../components/SvgWithWordWrapping';\nimport { EnvironmentInfo } from '@azure/communication-calling';\n\n/**\n * @private\n */\nexport interface ConfigurationPageProps {\n  mobileView: boolean;\n  startCallHandler(): void;\n  updateSidePaneRenderer: (renderer: SidePaneRenderer | undefined) => void;\n  latestErrors: ActiveErrorMessage[];\n  onDismissError: (error: ActiveErrorMessage) => void;\n  modalLayerHostId: string;\n  /* @conditional-compile-remove(capabilities) */\n  capabilitiesChangedNotificationBarProps?: CapabilitiesChangeNotificationBarProps;\n  /* @conditional-compile-remove(custom-branding) */\n  logo?: {\n    url: string;\n    alt?: string;\n    shape?: 'unset' | 'circle';\n  };\n  /* @conditional-compile-remove(custom-branding) */\n  backgroundImage?: {\n    url: string;\n  };\n}\n\n/**\n * @private\n */\nexport const ConfigurationPage = (props: ConfigurationPageProps): JSX.Element => {\n  const {\n    startCallHandler,\n    mobileView,\n    modalLayerHostId\n  } = props;\n  const theme = useTheme();\n  const options = useAdaptedSelector(getCallingSelector(DevicesButton));\n  const localDeviceSettingsHandlers = useHandlers(LocalDeviceSettings);\n  const {\n    video: cameraPermissionGranted,\n    audio: microphonePermissionGranted\n  } = useSelector(devicePermissionSelector);\n  const errorBarProps = usePropsFor(ErrorBar);\n  const adapter = useAdapter();\n  const deviceState = adapter.getState().devices;\n  let disableStartCallButton = !microphonePermissionGranted || deviceState.microphones?.length === 0;\n  /* @conditional-compile-remove(rooms) */\n  const role = adapter.getState().call?.role;\n\n  /* @conditional-compile-remove(video-background-effects) */\n  const isCameraOn = useSelector(localVideoSelector).isAvailable;\n  let filteredLatestErrors: ActiveErrorMessage[] = props.latestErrors;\n\n  /* @conditional-compile-remove(rooms) */\n  // TODO: move this logic to the error bar selector once role is plumbed from the headless SDK\n  if (role !== 'Consumer') {\n    filteredLatestErrors = filteredLatestErrors.filter(e => e.type !== 'callCameraAccessDenied' && e.type !== 'callCameraAccessDeniedSafari');\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  if ((useIsParticularSidePaneOpen('videoeffects') || !isCameraOn) && errorBarProps) {\n    filteredLatestErrors = filteredLatestErrors.filter(e => e.type !== 'unableToStartVideoEffect');\n  }\n\n  /* @conditional-compile-remove(rooms) */\n  if (role === 'Consumer') {\n    // If user's role permissions do not allow access to the microphone button then DO NOT disable the start call button\n    // because microphone device permission is not needed for the user's role\n    disableStartCallButton = false;\n  }\n  const locale = useLocale();\n  const title = locale.strings.call.configurationPageTitle.length > 0 ? <Stack.Item className={mobileView ? titleContainerStyleMobile(theme) : titleContainerStyleDesktop(theme)}>\n        <SvgWithWordWrapping width={mobileView ? 325 : 445} lineHeightPx={16 * 1.5} bufferHeightPx={16} text={locale.strings.call.configurationPageTitle} />\n      </Stack.Item> : <></>;\n  const callDescription = locale.strings.call.configurationPageCallDetails && <Stack.Item className={mobileView ? callDetailsStyleMobile(theme) : callDetailsStyleDesktop(theme)}>\n      {locale.strings.call.configurationPageCallDetails}\n    </Stack.Item>;\n  let mobileWithPreview = mobileView;\n  /* @conditional-compile-remove(rooms) */\n  mobileWithPreview = mobileWithPreview && role !== 'Consumer'; // When permission API is not available, we want to show screen saying checking for access (disappears on its own)\n  // then based on permission setting, we show permission denied or nothing\n  /* @conditional-compile-remove(video-background-effects) */\n  const {\n    toggleVideoEffectsPane,\n    closeVideoEffectsPane,\n    isVideoEffectsPaneOpen\n  } = useVideoEffectsPane(props.updateSidePaneRenderer, mobileView, props.latestErrors, props.onDismissError);\n  const startCall = useCallback(async () => {\n    /* @conditional-compile-remove(video-background-effects) */\n    closeVideoEffectsPane();\n    startCallHandler();\n  }, [startCallHandler, /* @conditional-compile-remove(video-background-effects) */closeVideoEffectsPane]);\n  const panelLayerProps = useMemo(() => ({\n    hostId: modalLayerHostId\n  }), [modalLayerHostId]);\n  const filteredErrorBarProps = useMemo(() => ({\n    ...errorBarProps,\n    activeErrorMessages: filteredLatestErrors\n  }), [errorBarProps, filteredLatestErrors]);\n  const containerStyles = useMemo(() => configurationContainerStyle(!mobileView, /* @conditional-compile-remove(custom-branding) */\n  props.backgroundImage?.url), [mobileView, /* @conditional-compile-remove(custom-branding) */props.backgroundImage?.url]);\n  return <Stack styles={containerStyles}>\n      <Stack styles={bannerNotificationStyles}>\n        <ConfigurationPageErrorBar errorBarProps={filteredErrorBarProps} onDismissError={props.onDismissError} />\n      </Stack>\n      {}\n\n      {}\n\n      <Stack verticalFill grow horizontal className={fillWidth}>\n        <Stack className={configurationCenteredContent(mobileWithPreview, /* @conditional-compile-remove(custom-branding) */\n      !!props.logo)} verticalAlign=\"center\" verticalFill={mobileWithPreview} tokens={mobileWithPreview ? configurationStackTokensMobile : configurationStackTokensDesktop}>\n          <Stack.Item styles={callDetailsContainerStyles}>\n            <Logo\n          /* @conditional-compile-remove(custom-branding) */ logo={props.logo} />\n            {title}\n            {callDescription}\n          </Stack.Item>\n          <Stack horizontal={!mobileWithPreview} horizontalAlign={mobileWithPreview ? 'stretch' : 'center'} verticalFill={mobileWithPreview} tokens={deviceConfigurationStackTokens}>\n            {localPreviewTrampoline(mobileWithPreview, /* @conditional-compile-remove(rooms) */!!(role === 'Consumer'))}\n            <Stack styles={mobileView ? undefined : configurationSectionStyle}>\n              {!mobileWithPreview && <Stack className={mobileView ? undefined : selectionContainerStyle(theme, isSafariBrowserEnvironmentTrampoline())}>\n                  <LocalDeviceSettings {...options} {...localDeviceSettingsHandlers} cameraPermissionGranted={cameraPermissionGrantedTrampoline(cameraPermissionGranted)} microphonePermissionGranted={micPermissionGrantedTrampoline(microphonePermissionGranted)} /* @conditional-compile-remove(video-background-effects) */\n              onClickVideoEffects={toggleVideoEffectsPane} />\n                </Stack>}\n              <Stack styles={mobileWithPreview ? startCallButtonContainerStyleMobile : startCallButtonContainerStyleDesktop} horizontalAlign={mobileWithPreview ? 'stretch' : 'end'}>\n                <StartCallButton className={mobileWithPreview ? startCallButtonStyleMobile : startCallButtonStyleDesktop} onClick={startCall} disabled={disableStartCallButton} hideIcon={true} />\n              </Stack>\n            </Stack>\n          </Stack>\n        </Stack>\n        <Panel\n      /* @conditional-compile-remove(video-background-effects) */ isOpen={isVideoEffectsPaneOpen} hasCloseButton={false} isBlocking={false} isHiddenOnDismiss={false} styles={panelStyles} focusTrapZoneProps={panelFocusProps} layerProps={panelLayerProps} type={PanelType.custom}\n      /* @conditional-compile-remove(video-background-effects) */ customWidth={`${VIDEO_EFFECTS_SIDE_PANE_WIDTH_REM}rem`}>\n          <SidePane mobileView={props.mobileView} updateSidePaneRenderer={props.updateSidePaneRenderer} maxWidth={`${VIDEO_EFFECTS_SIDE_PANE_WIDTH_REM}rem`} minWidth={`${VIDEO_EFFECTS_SIDE_PANE_WIDTH_REM}rem`} />\n        </Panel>\n      </Stack>\n    </Stack>;\n};\nconst localPreviewTrampoline = (mobileView: boolean, doNotShow?: boolean): JSX.Element | undefined => {\n  /* @conditional-compile-remove(rooms) */\n  if (doNotShow) {\n    return undefined;\n  }\n  return <LocalPreview mobileView={mobileView} showDevicesButton={mobileView} />;\n};\nconst cameraPermissionGrantedTrampoline = (cameraPermissionGranted: boolean | undefined, videoState?: PermissionState | 'unsupported' | undefined): boolean | undefined => {\n  return cameraPermissionGranted;\n};\nconst micPermissionGrantedTrampoline = (microphonePermissionGranted: boolean | undefined, audioState?: PermissionState | 'unsupported' | undefined): boolean | undefined => {\n  return microphonePermissionGranted;\n};\nconst Logo = (props: {\n  logo?: {\n    url: string;\n    alt?: string;\n    shape?: 'unset' | 'circle';\n  };\n}): JSX.Element => {\n  if (!props.logo) {\n    return <></>;\n  }\n  return <Image styles={logoStyles(props.logo.shape)} src={props.logo.url} alt={props.logo.alt} />;\n};\nconst isSafariBrowserEnvironmentTrampoline = (environmentInfo?: EnvironmentInfo): boolean | undefined => {\n  return false;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStyle, IStackTokens, IStackStyles } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const containerStyle: IStyle = {\n  maxWidth: '22.5rem',\n  // Ensure some space around the text on a narrow viewport.\n  margin: '1rem'\n};\n\n/**\n * @private\n */\nexport const containerItemGap: IStackTokens = {\n  childrenGap: '0.5rem'\n};\n\n/**\n * @private\n */\nexport const rejoinCallButtonContainerStyles: IStackStyles = {\n  root: {\n    paddingTop: '1.125rem',\n    borderRadius: '0.25rem'\n  }\n};\n\n/**\n * @private\n */\nexport const titleStyles: IStyle = {\n  fontSize: '1.25rem',\n  fontWeight: 600\n};\n\n/**\n * @private\n */\nexport const moreDetailsStyles: IStyle = {\n  fontSize: '1rem'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { IStyle, mergeStyles, Stack, Text } from '@fluentui/react';\nimport { containerStyle, moreDetailsStyles, containerItemGap, titleStyles, rejoinCallButtonContainerStyles } from '../styles/NoticePage.styles';\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { StartCallButton } from '../components/StartCallButton';\nimport { CallCompositeIcon, CallCompositeIcons } from '../../common/icons';\nimport { useSelector } from '../hooks/useSelector';\nimport { getTargetCallees } from '../selectors/baseSelectors';\nimport { StartCallIdentifier } from '../adapter';\n/**\n * @private\n */\nexport interface NoticePageProps {\n  iconName?: keyof CallCompositeIcons;\n  title: string;\n  moreDetails?: string;\n  dataUiId: string;\n  disableStartCallButton?: boolean;\n  pageStyle?: IStyle;\n}\n\n/**\n * Generic page with a title and more details text for serving up a notice to the user.\n *\n * @private\n */\nexport function NoticePage(props: NoticePageProps): JSX.Element {\n  const adapter = useAdapter();\n  const callees = (useSelector(getTargetCallees) as StartCallIdentifier[] | undefined);\n  return <Stack className={mergeStyles(props.pageStyle)} verticalFill verticalAlign=\"center\" horizontalAlign=\"center\" data-ui-id={props.dataUiId} aria-atomic>\n      <Stack className={mergeStyles(containerStyle)} tokens={containerItemGap}>\n        {props.iconName && <CallCompositeIcon iconName={props.iconName} />}\n        <Text className={mergeStyles(titleStyles)} aria-live=\"assertive\">\n          {props.title}\n        </Text>\n        <Text className={mergeStyles(moreDetailsStyles)} aria-live=\"assertive\">\n          {props.moreDetails}\n        </Text>\n        {!props.disableStartCallButton && <Stack styles={rejoinCallButtonContainerStyles}>\n            <StartCallButton onClick={() => {\n          if (callees && callees.length > 0) {\n            adapter.startCall(callees);\n          } else {\n            adapter.joinCall();\n          }\n        }} disabled={false} rejoinCall={true} autoFocus />\n          </Stack>}\n      </Stack>\n    </Stack>;\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IPalette, IStackItemStyles, IStyle } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const overlayContainerStyle: IStyle = {\n  // Ensure some space around the text on a narrow viewport.\n  margin: '1rem'\n};\n\n/**\n * @private\n */\nexport const titleStyle: (palette: IPalette, isVideoReady: boolean) => IStyle = (palette, isVideoReady) => {\n  return {\n    fontSize: '1rem',\n    color: isVideoReady ? 'white' : palette.themePrimary,\n    textAlign: 'center'\n  };\n};\n\n/**\n * @private\n */\nexport const videoTileStyles = {\n  root: {\n    height: '100%',\n    width: '100%'\n  }\n};\n\n/**\n * @private\n */\nexport const moreDetailsStyle = (palette: IPalette, isVideoReady: boolean): IStyle => ({\n  fontSize: '0.75rem',\n  color: isVideoReady ? 'white' : palette.themePrimary,\n  textAlign: 'center'\n});\n\n/**\n * @private\n */\nexport const localCameraSwitcherContainerStyles: IStackItemStyles = {\n  root: {\n    position: 'absolute',\n    top: '0rem',\n    right: '0rem'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { mergeStyles, Stack, Text } from '@fluentui/react';\nimport { LocalVideoCameraCycleButton, VideoGalleryStream, useTheme } from '@internal/react-components';\nimport { localCameraSwitcherContainerStyles, moreDetailsStyle, overlayContainerStyle, titleStyle } from '../styles/LobbyTile.styles';\nimport { ExpandedLocalVideoTile } from './ExpandedLocalVideoTile';\nimport { useHandlers } from '../hooks/useHandlers';\nimport { localVideoCameraCycleButtonSelector } from '../selectors/LocalVideoTileSelector';\nimport { useSelector } from '../hooks/useSelector';\n\n/**\n * @private\n */\nexport interface LobbyOverlayProps {\n  overlayIcon?: JSX.Element;\n  title: string;\n  moreDetails?: string;\n}\n\n/**\n * @private\n */\nexport interface LobbyTileProps {\n  localParticipantVideoStream: VideoGalleryStream;\n  overlayProps: LobbyOverlayProps;\n  showLocalVideoCameraCycleButton?: boolean;\n}\n\n/**\n * @private\n */\nexport const LobbyTile = (props: LobbyTileProps): JSX.Element => {\n  const videoStream = props.localParticipantVideoStream;\n  const isVideoReady = videoStream?.isAvailable ?? false;\n  const cameraSwitcherCameras = useSelector(localVideoCameraCycleButtonSelector);\n  const cameraSwitcherCallback = useHandlers(LocalVideoCameraCycleButton);\n  const palette = useTheme().palette;\n  const handlers = useHandlers(ExpandedLocalVideoTile);\n  return <ExpandedLocalVideoTile localParticipantVideoStream={props.localParticipantVideoStream} overlayContent={props.overlayProps ? <Stack verticalFill horizontalAlign=\"center\" verticalAlign=\"center\" className={mergeStyles(overlayContainerStyle)} aria-atomic>\n            {props.showLocalVideoCameraCycleButton && isVideoReady && <Stack.Item styles={localCameraSwitcherContainerStyles}>\n                <LocalVideoCameraCycleButton {...cameraSwitcherCallback} {...cameraSwitcherCameras} size={'large'} />\n              </Stack.Item>}\n            <Stack.Item className={mergeStyles(titleStyle(palette, isVideoReady))}>\n              {props.overlayProps.overlayIcon}\n            </Stack.Item>\n            <Text className={mergeStyles(titleStyle(palette, isVideoReady))} aria-live=\"assertive\" data-ui-id=\"lobbyScreenTitle\">\n              {props.overlayProps.title}\n            </Text>\n            {props.overlayProps.moreDetails && <Text className={mergeStyles(moreDetailsStyle(palette, isVideoReady))} aria-live=\"assertive\">\n                {props.overlayProps.moreDetails}\n              </Text>}\n          </Stack> : undefined} {...handlers} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { ActiveErrorMessage, ErrorBar } from '@internal/react-components';\nimport { useSelector } from '../hooks/useSelector';\nimport { lobbySelector } from '../selectors/lobbySelector';\nimport { CallCompositeOptions } from '../CallComposite';\nimport { CallArrangement } from '../components/CallArrangement';\nimport { usePropsFor } from '../hooks/usePropsFor';\nimport { LobbyOverlayProps, LobbyTile } from '../components/LobbyTile';\nimport { getCallStatus, getRemoteParticipants } from '../selectors/baseSelectors';\nimport { disableCallControls, reduceCallControlsForMobile } from '../utils';\nimport { CallCompositeStrings } from '../Strings';\nimport { useLocale } from '../../localization';\nimport { CallCompositeIcon } from '../../common/icons';\nimport { isPhoneNumberIdentifier, PhoneNumberIdentifier } from '@azure/communication-common';\nimport { RemoteParticipantState } from '@internal/calling-stateful-client';\nimport { MobileChatSidePaneTabHeaderProps } from '../../common/TabHeader';\nimport { SidePaneRenderer } from '../components/SidePane/SidePaneProvider';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangeNotificationBarProps } from '../components/CapabilitiesChangedNotificationBar';\n\n/**\n * @private\n */\nexport interface LobbyPageProps {\n  mobileView: boolean;\n  modalLayerHostId: string;\n  options?: CallCompositeOptions;\n  mobileChatTabHeader: MobileChatSidePaneTabHeaderProps | undefined;\n  updateSidePaneRenderer: (renderer: SidePaneRenderer | undefined) => void;\n  latestErrors: ActiveErrorMessage[];\n  onDismissError: (error: ActiveErrorMessage) => void;\n  /* @conditional-compile-remove(capabilities) */\n  capabilitiesChangedNotificationBarProps?: CapabilitiesChangeNotificationBarProps;\n}\n\n/**\n * @private\n */\nexport const LobbyPage = (props: LobbyPageProps): JSX.Element => {\n  const errorBarProps = usePropsFor(ErrorBar);\n  const lobbyProps = useSelector(lobbySelector);\n  const strings = useLocale().strings.call;\n  const callState = useSelector(getCallStatus);\n  const inLobby = callState === 'InLobby';\n  const participants = useSelector(getRemoteParticipants) ?? {};\n\n  // Reduce the controls shown when mobile view is enabled.\n  let callControlOptions = props.mobileView ? reduceCallControlsForMobile(props.options?.callControls) : props.options?.callControls;\n  callControlOptions = disableCallControls(callControlOptions, ['screenShareButton', 'participantsButton']);\n  return <CallArrangement complianceBannerProps={{\n    strings\n  }} errorBarProps={props.options?.errorBar !== false && errorBarProps} callControlProps={{\n    options: callControlOptions,\n    increaseFlyoutItemSize: props.mobileView\n  }} mobileView={props.mobileView} modalLayerHostId={props.modalLayerHostId} onRenderGalleryContent={() => <LobbyTile {...lobbyProps} showLocalVideoCameraCycleButton={props.mobileView} overlayProps={overlayProps(strings, inLobby, Object.values(participants))} />} dataUiId={'lobby-page'} updateSidePaneRenderer={props.updateSidePaneRenderer} mobileChatTabHeader={props.mobileChatTabHeader} latestErrors={props.latestErrors} onDismissError={props.onDismissError} />;\n};\nconst overlayProps = (strings: CallCompositeStrings, inLobby: boolean, remoteParticipants: RemoteParticipantState[]): LobbyOverlayProps => {\n  /**\n   * Only grab the first participant because there will only be one in this situation.\n   * when starting a call with multiple people the call goes to the connected state and composite goes directly to\n   * videoGallery.\n   *\n   * We also need to check the participant state since in a group call the remote participants array will populate just before\n   * the user joins. In this situation we also check the participant states. in a groupCall the state of the participants\n   * will be 'Idle'.\n   */\n  const outboundCallParticipant: RemoteParticipantState | undefined = remoteParticipants[0] && ['Ringing', 'Connecting'].includes(remoteParticipants[0].state) && remoteParticipants.length === 1 ? remoteParticipants[0] : undefined;\n  return inLobby ? overlayPropsWaitingToBeAdmitted(strings) : outboundCallParticipant ? overlayPropsOutboundCall(strings, outboundCallParticipant) : overlayPropsConnectingToCall(strings);\n};\nconst overlayPropsConnectingToCall = (strings: CallCompositeStrings): LobbyOverlayProps => ({\n  title: strings.lobbyScreenConnectingToCallTitle,\n  moreDetails: strings.lobbyScreenConnectingToCallMoreDetails,\n  overlayIcon: <CallCompositeIcon iconName=\"LobbyScreenConnectingToCall\" />\n});\nconst overlayPropsWaitingToBeAdmitted = (strings: CallCompositeStrings): LobbyOverlayProps => ({\n  title: strings.lobbyScreenWaitingToBeAdmittedTitle,\n  moreDetails: strings.lobbyScreenWaitingToBeAdmittedMoreDetails,\n  overlayIcon: <CallCompositeIcon iconName=\"LobbyScreenWaitingToBeAdmitted\" />\n});\nconst overlayPropsOutboundCall = (strings: CallCompositeStrings, participant: RemoteParticipantState): LobbyOverlayProps => {\n  if (isPhoneNumberIdentifier(participant.identifier)) {\n    return {\n      title: (participant.identifier as PhoneNumberIdentifier).phoneNumber,\n      moreDetails: strings.outboundCallingNoticeString\n    };\n  } else {\n    return {\n      title: strings.outboundCallingNoticeString ?? ''\n    };\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IPersonaStyleProps, IPersonaStyles, IStyle, IStyleFunctionOrObject } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const pageContainer = {\n  width: '100%',\n  height: '100%'\n};\n\n/**\n * @private\n */\nexport const avatarStyles: IStyle = {\n  opacity: 0.4\n};\n\n/**\n * @private\n */\nexport const tileContainerStyles: IStyle = {\n  position: 'absolute',\n  top: '0',\n  left: '0',\n  width: '100%',\n  height: '100%',\n  minWidth: '100%',\n  minHeight: '100%',\n  objectPosition: 'center',\n  objectFit: 'cover',\n  zIndex: 0\n};\n\n/**\n * @private\n */\nexport const tileContentStyles: IStyle = {\n  width: '100%',\n  position: 'absolute',\n  top: '50%',\n  transform: 'translate(0, -50%)',\n  display: 'flex',\n  justifyContent: 'center'\n};\n\n/**\n * @private\n */\nexport const defaultPersonaStyles: IStyleFunctionOrObject<IPersonaStyleProps, IPersonaStyles> = {\n  root: {\n    margin: 'auto'\n  }\n};\n\n/**\n * @private\n */\nexport const displayNameStyles: IStyle = {\n  textAlign: 'center',\n  fontSize: '1.5rem',\n  fontWeight: 400\n};\n\n/**\n * @private\n */\nexport const spinnerStyles: IStyle = {\n  circle: {\n    borderWidth: '0.125rem'\n  }\n};\n\n/**\n * @private\n */\nexport const statusTextStyles: IStyle = {\n  textAlign: 'center',\n  fontSize: '1rem'\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { Spinner, SpinnerSize, Stack, Text, mergeStyles } from '@fluentui/react';\nimport { toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { ErrorBar } from '@internal/react-components';\n/* @conditional-compile-remove(call-transfer) */\nimport { Announcer } from '@internal/react-components';\nimport React, { useCallback, useLayoutEffect, useMemo, useRef, useState } from 'react';\n/* @conditional-compile-remove(call-transfer) */\nimport { useEffect } from 'react';\nimport { AvatarPersona, AvatarPersonaDataCallback } from '../../common/AvatarPersona';\nimport { useLocale } from '../../localization';\nimport { CallArrangement } from '../components/CallArrangement';\nimport { usePropsFor } from '../hooks/usePropsFor';\nimport { useSelector } from '../hooks/useSelector';\nimport { getRemoteParticipants } from '../selectors/baseSelectors';\n/* @conditional-compile-remove(call-transfer) */\nimport { getTransferCall } from '../selectors/baseSelectors';\nimport { avatarStyles, defaultPersonaStyles, displayNameStyles, pageContainer, spinnerStyles, statusTextStyles, tileContainerStyles, tileContentStyles } from '../styles/TransferPage.styles';\nimport { reduceCallControlsForMobile } from '../utils';\nimport { LobbyPageProps } from './LobbyPage';\n\n/* @conditional-compile-remove(call-transfer) */\n// Which should be participant shown in the transfer page\ntype TransferPageSubject = 'transferor' | 'transferTarget';\n\n/**\n * @private\n */\nexport const TransferPage = (props: LobbyPageProps & {\n  /** Callback function that can be used to provide custom data to Persona Icon rendered */\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n}): JSX.Element => {\n  const errorBarProps = usePropsFor(ErrorBar);\n  const strings = useLocale().strings.call;\n  const remoteParticipants = useSelector(getRemoteParticipants);\n  /* @conditional-compile-remove(call-transfer) */\n  const transferCall = useSelector(getTransferCall);\n\n  /* @conditional-compile-remove(call-transfer) */\n  const [announcerString, setAnnouncerString] = useState<string | undefined>(undefined);\n\n  // Reduce the controls shown when mobile view is enabled.\n  const callControlOptions = props.mobileView ? reduceCallControlsForMobile(props.options?.callControls) : props.options?.callControls;\n  const transferor = useMemo(() => remoteParticipants ? Object.values(remoteParticipants)?.[0] : undefined, [remoteParticipants]);\n  /* @conditional-compile-remove(call-transfer) */\n  const transferTarget = useMemo(() => transferCall?.remoteParticipants ? Object.values(transferCall.remoteParticipants)?.[0] : undefined, [transferCall]);\n\n  /* @conditional-compile-remove(call-transfer) */\n  const pageSubject: TransferPageSubject = useMemo(() => {\n    if (transferCall && transferTarget?.displayName) {\n      return 'transferTarget';\n    }\n    return 'transferor';\n  }, [transferCall, transferTarget?.displayName]);\n\n  /* @conditional-compile-remove(call-transfer) */\n  useEffect(() => {\n    setAnnouncerString(strings.transferPageNoticeString);\n  }, [strings.transferPageNoticeString]);\n  let transferTileParticipant = transferor;\n  /* @conditional-compile-remove(call-transfer) */\n  if (pageSubject === 'transferTarget') {\n    transferTileParticipant = transferTarget;\n  }\n  let transferParticipantDisplayName = transferor?.displayName ?? /* @conditional-compile-remove(call-transfer) */strings.transferPageUnknownTransferorDisplayName;\n  /* @conditional-compile-remove(call-transfer) */\n  if (pageSubject === 'transferTarget') {\n    transferParticipantDisplayName = transferTarget?.displayName ?? strings.transferPageUnknownTransferTargetDisplayName;\n  }\n  return <Stack className={mergeStyles(pageContainer)}>\n      {/* @conditional-compile-remove(call-transfer) */\n    <Announcer announcementString={announcerString} ariaLive=\"polite\" />}\n      <CallArrangement complianceBannerProps={{\n      strings\n    }}\n    // Ignore errors from before current call. This avoids old errors from showing up when a user re-joins a call.\n    errorBarProps={props.options?.errorBar !== false && errorBarProps} callControlProps={{\n      options: callControlOptions,\n      increaseFlyoutItemSize: props.mobileView\n    }} mobileView={props.mobileView} modalLayerHostId={props.modalLayerHostId} onRenderGalleryContent={() => <TransferTile userId={transferTileParticipant ? toFlatCommunicationIdentifier(transferTileParticipant?.identifier) : undefined} displayName={transferParticipantDisplayName} initialsName={transferParticipantDisplayName}\n    /* @conditional-compile-remove(call-transfer) */ statusText={pageSubject === 'transferTarget' ? strings.transferPageTransferTargetText : strings.transferPageTransferorText} onFetchAvatarPersonaData={props.onFetchAvatarPersonaData} />} dataUiId={'transfer-page'} updateSidePaneRenderer={props.updateSidePaneRenderer} mobileChatTabHeader={props.mobileChatTabHeader} latestErrors={props.latestErrors} onDismissError={props.onDismissError} />\n    </Stack>;\n};\ninterface TransferTileProps {\n  /** React Child components. Child Components will show as overlay component in the VideoTile. */\n  children?: React.ReactNode;\n  /** User id for `onFetchAvatarPersonaData` callback to provide custom data to avatars rendered */\n  userId?: string;\n  /** Callback function that can be used to provide custom data to Persona Icon rendered */\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  /**\n   * Display name of the transferor or transfer target to be shown in the label.\n   * @remarks `displayName` is used to generate avatar initials if `initialsName` is not provided.\n   */\n  displayName?: string;\n  /**\n   * Name of the transferor or transfer target used to generate initials for the avatar. For example, a name\n   * `John Doe` will display `JD` as initials.\n   * @remarks `displayName` is used if this property is not specified.\n   */\n  initialsName?: string;\n  /** Optional property to set the status of the transfer process */\n  statusText?: string;\n}\nconst TransferTile = (props: TransferTileProps): JSX.Element => {\n  const {\n    displayName,\n    initialsName,\n    userId,\n    onFetchAvatarPersonaData,\n    statusText\n  } = props;\n  const [personaSize, setPersonaSize] = useState<number>();\n  const tileRef = useRef<HTMLDivElement>(null);\n  const observer = useRef(new ResizeObserver((entries): void => {\n    const {\n      width,\n      height\n    } = entries[0].contentRect;\n    const personaSize = Math.min(width, height) / 2;\n    setPersonaSize(Math.max(Math.min(personaSize, 150), 32));\n  }));\n  useLayoutEffect(() => {\n    if (tileRef.current) {\n      observer.current.observe(tileRef.current);\n    }\n    const currentObserver = observer.current;\n    return () => currentObserver.disconnect();\n  }, [observer, tileRef]);\n  const placeholderOptions = useMemo(() => ({\n    userId,\n    text: initialsName ?? displayName,\n    coinSize: personaSize,\n    styles: defaultPersonaStyles,\n    hidePersonaDetails: true\n  }), [userId, initialsName, displayName, personaSize]);\n  const defaultOnRenderAvatar = useCallback(() => {\n    return personaSize ? <AvatarPersona {...placeholderOptions} dataProvider={onFetchAvatarPersonaData} className={mergeStyles(avatarStyles)} /> : <></>;\n  }, [placeholderOptions, onFetchAvatarPersonaData, personaSize]);\n  const defaultAvatar = useMemo(() => defaultOnRenderAvatar(), [defaultOnRenderAvatar]);\n  return <div ref={tileRef} className={mergeStyles(tileContainerStyles)} data-is-focusable={true}>\n      <Stack className={mergeStyles(tileContentStyles)} tokens={{\n      childrenGap: '1rem'\n    }}>\n        <Stack horizontalAlign=\"center\" tokens={{\n        childrenGap: '0.5rem'\n      }}>\n          {defaultAvatar}\n          <Text className={mergeStyles(displayNameStyles)}>{displayName}</Text>\n        </Stack>\n        <Stack horizontal horizontalAlign=\"center\" verticalAlign=\"center\" tokens={{\n        childrenGap: '0.5rem'\n      }}>\n          <Spinner size={SpinnerSize.large} className={mergeStyles(spinnerStyles)} />\n          <Text className={mergeStyles(statusTextStyles)}>{statusText}</Text>\n        </Stack>\n      </Stack>\n    </div>;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { getCameras, getMicrophones } from './baseSelectors';\nimport { createSelector } from 'reselect';\n/**\n * @private\n */\nexport const deviceCountSelector = createSelector([getCameras, getMicrophones], (cameras, microphones) => {\n  return {\n    camerasCount: cameras.length,\n    microphonesCount: microphones.length\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(capabilities) */\nimport * as reselect from 'reselect';\n/* @conditional-compile-remove(capabilities) */\nimport { getLatestCapabilitiesChangedInfo, getRole } from './baseSelectors';\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * @private\n */\nexport const capabilitiesChangedInfoAndRoleSelector = reselect.createSelector([getLatestCapabilitiesChangedInfo, getRole], (capabilitiesChangeInfo, participantRole) => {\n  return {\n    capabilitiesChangeInfo,\n    participantRole\n  };\n});","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(capabilities) */\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangeInfo, ParticipantCapabilityName, ParticipantRole } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabalityChangedNotification, CapabilitiesChangeNotificationBarProps } from '../components/CapabilitiesChangedNotificationBar';\n/* @conditional-compile-remove(capabilities) */\nimport { TrackedCapabilityChangedNotifications } from '../types/CapabilityChangedNotificationTracking';\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * Create a record for when the notification was most recently dismissed for tracking dismissed notifications.\n *\n * @private\n */\nexport const useTrackedCapabilityChangedNotifications = (capabilitiesChangedAndRoleInfo: CapabilitiesChangedInfoAndRole): CapabilitiesChangeNotificationBarProps => {\n  const [trackedCapabilityChangedNotifications, setTrackedCapabilityChangedNotifications] = useState<TrackedCapabilityChangedNotifications>({});\n\n  // Initialize a share screen capability changed notification with 'RoleChanged' reason so that the initial\n  // share screen capability changed info from the Calling SDK when joining Teams interop will be ignored because\n  // being able to share screen is assumed by default. This is inline with what Teams is doing.\n  const activeNotifications = useRef<LatestCapabilityChangedNotificationRecord>({\n    shareScreen: {\n      capabilityName: 'shareScreen',\n      isPresent: true,\n      changedReason: 'RoleChanged'\n    }\n  });\n  useEffect(() => {\n    activeNotifications.current = updateLatestCapabilityChangedNotificationMap(capabilitiesChangedAndRoleInfo, activeNotifications.current);\n    setTrackedCapabilityChangedNotifications(prev => updateTrackedCapabilityChangedNotificationsWithActiveNotifications(prev, Object.values(activeNotifications.current)));\n  }, [capabilitiesChangedAndRoleInfo]);\n  const onDismissCapabilityChangedNotification = useCallback((notification: CapabalityChangedNotification) => {\n    setTrackedCapabilityChangedNotifications(prev => trackCapabilityChangedNotificationAsDismissed(notification.capabilityName, prev));\n  }, []);\n  const latestCapabilityChangedNotifications = useMemo(() => filterLatestCapabilityChangedNotifications(Object.values(activeNotifications.current), trackedCapabilityChangedNotifications), [trackedCapabilityChangedNotifications]);\n  return {\n    capabilitiesChangedNotifications: latestCapabilityChangedNotifications,\n    onDismissNotification: onDismissCapabilityChangedNotification\n  };\n};\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * Take the set of active notifications, and filter to only those that are newer than previously dismissed notifications or have never been dismissed.\n *\n * @private\n */\nexport const filterLatestCapabilityChangedNotifications = (activeNotifications: CapabalityChangedNotification[], trackedNotifications: TrackedCapabilityChangedNotifications): CapabalityChangedNotification[] => {\n  const filteredNotifications = activeNotifications.filter(activeNotification => {\n    const trackedNotification = trackedNotifications[activeNotification.capabilityName];\n    return !trackedNotification || !trackedNotification.lastDismissedAt || trackedNotification.lastDismissedAt < trackedNotification.mostRecentlyActive;\n  });\n  return filteredNotifications;\n};\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * Maintain a record of the most recently active notification for each capability name.\n *\n * @private\n */\nexport const updateTrackedCapabilityChangedNotificationsWithActiveNotifications = (existingTrackedNotifications: TrackedCapabilityChangedNotifications, activeNotifications: CapabalityChangedNotification[]): TrackedCapabilityChangedNotifications => {\n  const trackedNotifications: TrackedCapabilityChangedNotifications = {};\n\n  // Only care about active notifications. If notifications are no longer active we do not track that they have been previously dismissed.\n  for (const activeNotification of activeNotifications) {\n    const existingTrackedNotification = existingTrackedNotifications[activeNotification.capabilityName];\n    trackedNotifications[activeNotification.capabilityName] = {\n      mostRecentlyActive: activeNotification.timestamp ?? existingTrackedNotification?.mostRecentlyActive ?? new Date(Date.now()),\n      lastDismissedAt: existingTrackedNotification?.lastDismissedAt\n    };\n  }\n  return trackedNotifications;\n};\n\n/* @conditional-compile-remove(capabilities) */\n/**\n * Create a record for when the notification was most recently dismissed for tracking dismissed notifications.\n *\n * @private\n */\nexport const trackCapabilityChangedNotificationAsDismissed = (capabilityName: ParticipantCapabilityName, trackedNotifications: TrackedCapabilityChangedNotifications): TrackedCapabilityChangedNotifications => {\n  const now = new Date(Date.now());\n  const existingNotification = trackedNotifications[capabilityName];\n  return {\n    ...trackedNotifications,\n    [capabilityName]: {\n      ...(existingNotification || {}),\n      lastDismissedAt: now\n    }\n  };\n};\n\n/* @conditional-compile-remove(capabilities) */\ninterface CapabilitiesChangedInfoAndRole {\n  capabilitiesChangeInfo?: CapabilitiesChangeInfo;\n  participantRole?: ParticipantRole;\n}\n\n/* @conditional-compile-remove(capabilities) */\ntype LatestCapabilityChangedNotificationRecord = Partial<Record<ParticipantCapabilityName, CapabalityChangedNotification>>;\n\n/* @conditional-compile-remove(capabilities) */\nconst updateLatestCapabilityChangedNotificationMap = (capabilitiesChangedInfoAndRole: CapabilitiesChangedInfoAndRole, activeNotifications: LatestCapabilityChangedNotificationRecord): LatestCapabilityChangedNotificationRecord => {\n  if (!capabilitiesChangedInfoAndRole.capabilitiesChangeInfo) {\n    return activeNotifications;\n  }\n  for (const [capabilityKey, newCapabilityValue] of Object.entries(capabilitiesChangedInfoAndRole.capabilitiesChangeInfo.newValue)) {\n    // Cast is safe because we are iterating over the enum keys on the object.entries where\n    // newCapabilityValue typing is correctly returned. Object.entries limitations\n    // always returns string for the key\n    const capabilityName = (capabilityKey as ParticipantCapabilityName);\n    // If the active notification for a capability has the same `isPresent` value and the same reason as the new\n    // capability value from the SDK then we will not create a new notification to avoid redundancy\n    if (activeNotifications[capabilityName] && newCapabilityValue.isPresent === activeNotifications[capabilityName]?.isPresent && capabilitiesChangedInfoAndRole.capabilitiesChangeInfo.reason === activeNotifications[capabilityName]?.changedReason) {\n      continue;\n    }\n    const newCapabilityChangeNotification: CapabalityChangedNotification = {\n      capabilityName: capabilityName,\n      isPresent: newCapabilityValue.isPresent,\n      changedReason: capabilitiesChangedInfoAndRole.capabilitiesChangeInfo.reason,\n      role: capabilitiesChangedInfoAndRole.participantRole,\n      timestamp: new Date(Date.now())\n    };\n    activeNotifications[capabilityName] = newCapabilityChangeNotification;\n  }\n  return activeNotifications;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallState } from '@internal/calling-stateful-client';\n/* @conditional-compile-remove(rooms) */\nimport { useEffect } from 'react';\n/* @conditional-compile-remove(rooms) */\nimport { ROOM_NOT_FOUND_SUB_CODE, ROOM_NOT_VALID_SUB_CODE, NOT_INVITED_TO_ROOM_SUB_CODE, INVITE_TO_ROOM_REMOVED_SUB_CODE } from './Utils';\n\n/**\n * @private\n */\nexport const useEndedCallConsoleErrors = (endedCall?: CallState): void => {\n  /* @conditional-compile-remove(rooms) */\n  useEffect(() => {\n    switch (endedCall?.callEndReason?.subCode) {\n      case ROOM_NOT_FOUND_SUB_CODE:\n        console.error('Call ended because the room id provided through the adapter locator could not be found');\n        break;\n      case ROOM_NOT_VALID_SUB_CODE:\n        console.error('Call ended because this room is currently not valid.');\n        break;\n      case NOT_INVITED_TO_ROOM_SUB_CODE:\n        console.error('Call ended because you are not invited to this room.');\n        break;\n      case INVITE_TO_ROOM_REMOVED_SUB_CODE:\n        console.error('Call ended because your invite to this room has been removed.');\n        break;\n    }\n  }, [endedCall?.callEndReason?.subCode]);\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { _isInCall } from '@internal/calling-component-bindings';\nimport { ActiveErrorMessage, ErrorBar, ParticipantMenuItemsCallback, useTheme } from '@internal/react-components';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { AvatarPersonaDataCallback } from '../common/AvatarPersona';\nimport { BaseProvider, BaseCompositeProps } from '../common/BaseComposite';\nimport { CallCompositeIcons } from '../common/icons';\nimport { useLocale } from '../localization';\nimport { CommonCallAdapter, StartCallIdentifier } from './adapter/CallAdapter';\nimport { CallAdapterProvider, useAdapter } from './adapter/CallAdapterProvider';\nimport { CallPage } from './pages/CallPage';\nimport { ConfigurationPage } from './pages/ConfigurationPage';\nimport { NoticePage } from './pages/NoticePage';\nimport { useSelector } from './hooks/useSelector';\nimport { getEndedCall, getPage, getTargetCallees } from './selectors/baseSelectors';\nimport { LobbyPage } from './pages/LobbyPage';\n/* @conditional-compile-remove(call-transfer) */\nimport { TransferPage } from './pages/TransferPage';\nimport { leavingPageStyle, mainScreenContainerStyleDesktop, mainScreenContainerStyleMobile } from './styles/CallComposite.styles';\nimport { CallControlOptions } from './types/CallControlOptions';\nimport { LayerHost, mergeStyles } from '@fluentui/react';\nimport { modalLayerHostStyle } from '../common/styles/ModalLocalAndRemotePIP.styles';\nimport { useId } from '@fluentui/react-hooks';\nimport { PermissionConstraints } from '@azure/communication-calling';\n/* @conditional-compile-remove(rooms) */\nimport { ParticipantRole } from '@azure/communication-calling';\nimport { MobileChatSidePaneTabHeaderProps } from '../common/TabHeader';\nimport { InjectedSidePaneProps, SidePaneProvider, SidePaneRenderer } from './components/SidePane/SidePaneProvider';\nimport { filterLatestErrors, getEndedCallPageProps, trackErrorAsDismissed, updateTrackedErrorsWithActiveErrors } from './utils';\nimport { TrackedErrors } from './types/ErrorTracking';\nimport { usePropsFor } from './hooks/usePropsFor';\nimport { deviceCountSelector } from './selectors/deviceCountSelector';\nimport { VideoGalleryLayout } from '@internal/react-components';\n/* @conditional-compile-remove(capabilities) */\nimport { capabilitiesChangedInfoAndRoleSelector } from './selectors/capabilitiesChangedInfoAndRoleSelector';\n/* @conditional-compile-remove(capabilities) */\nimport { useTrackedCapabilityChangedNotifications } from './utils/TrackCapabilityChangedNotifications';\nimport { useEndedCallConsoleErrors } from './utils/useConsoleErrors';\n/**\n * Props for {@link CallComposite}.\n *\n * @public\n */\nexport interface CallCompositeProps extends BaseCompositeProps<CallCompositeIcons> {\n  /**\n   * An adapter provides logic and data to the composite.\n   * Composite can also be controlled using the adapter.\n   */\n  adapter: CommonCallAdapter;\n  /**\n   * Optimizes the composite form factor for either desktop or mobile.\n   * @remarks `mobile` is currently only optimized for Portrait mode on mobile devices and does not support landscape.\n   * @defaultValue 'desktop'\n   */\n  formFactor?: 'desktop' | 'mobile';\n  /**\n   * URL to invite new participants to the current call. If this is supplied, a button appears in the Participants\n   * Button flyout menu.\n   */\n  callInvitationUrl?: string;\n  /**\n   * Flags to enable/disable or customize UI elements of the {@link CallComposite}.\n   */\n  options?: CallCompositeOptions;\n}\n/**\n * Menu options for remote video tiles in {@link VideoGallery}.\n *\n * @public\n */\nexport interface RemoteVideoTileMenuOptions {\n  /**\n   * If set to true, remote video tiles in the VideoGallery will not have menu options\n   *\n   * @defaultValue false\n   */\n  isHidden?: boolean;\n}\n\n/* @conditional-compile-remove(click-to-call) */ /* @conditional-compile-remove(rooms) */ /* @conditional-compile-remove(vertical-gallery) */\n/**\n * Options for the local video tile in the Call composite.\n *\n * @public\n */\nexport interface LocalVideoTileOptions {\n  /**\n   * Position of the local video tile. If unset will render the local tile in the floating local position.\n   *\n   * @defaultValue 'floating'\n   * @remarks 'grid' - local video tile will be rendered in the grid view of the videoGallery.\n   * 'floating' - local video tile will be rendered in the floating position and will observe overflow gallery\n   * local video tile rules and be docked in the bottom corner.\n   * This does not affect the Configuration screen or the side pane Picture in Picture in Picture view.\n   */\n  position?: 'grid' | 'floating';\n}\n/**\n * Optional features of the {@link CallComposite}.\n *\n * @public\n */\nexport type CallCompositeOptions = {\n  /**\n   * Surface Azure Communication Services backend errors in the UI with {@link @azure/communication-react#ErrorBar}.\n   * Hide or show the error bar.\n   * @defaultValue true\n   */\n  errorBar?: boolean;\n  /**\n   * Hide or Customize the control bar element.\n   * Can be customized by providing an object of type {@link @azure/communication-react#CallControlOptions}.\n   * @defaultValue true\n   */\n  callControls?: boolean | CallControlOptions;\n  /**\n   * Remote participant video tile menu options\n   */\n  remoteVideoTileMenuOptions?: RemoteVideoTileMenuOptions;\n  /* @conditional-compile-remove(click-to-call) */\n  /**\n   * Options for controlling the local video tile.\n   *\n   * @remarks if 'false' the local video tile will not be rendered.\n   */\n  localVideoTile?: boolean | LocalVideoTileOptions;\n  /**\n   * Options for controlling the starting layout of the composite's video gallery\n   */\n  galleryOptions?: {\n    /**\n     * Layout for the gallery when the call starts\n     */\n    layout?: VideoGalleryLayout;\n  };\n  /* @conditional-compile-remove(custom-branding) */\n  /**\n   * Options for setting additional customizations related to personalized branding.\n   */\n  branding?: {\n    /**\n     * Logo displayed on the configuration page.\n     */\n    logo?: {\n      /**\n       * URL for the logo image.\n       *\n       * @remarks\n       * Recommended size is 80x80 pixels.\n       */\n      url: string;\n      /**\n       * Alt text for the logo image.\n       */\n      alt?: string;\n      /**\n       * The logo can be displayed as a circle.\n       *\n       * @defaultValue 'unset'\n       */\n      shape?: 'unset' | 'circle';\n    };\n    /* @conditional-compile-remove(custom-branding) */\n    /**\n     * Background image displayed on the configuration page.\n     */\n    backgroundImage?: {\n      /**\n       * URL for the background image.\n       *\n       * @remarks\n       * Background image should be larger than 576x567 pixels and smaller than 2048x2048 pixels pixels.\n       */\n      url: string;\n    };\n  };\n};\ntype MainScreenProps = {\n  mobileView: boolean;\n  modalLayerHostId: string;\n  callInvitationUrl?: string;\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  options?: CallCompositeOptions;\n  overrideSidePane?: InjectedSidePaneProps;\n  onSidePaneIdChange?: (sidePaneId: string | undefined) => void;\n  mobileChatTabHeader?: MobileChatSidePaneTabHeaderProps;\n  onCloseChatPane?: () => void;\n};\nconst isShowing = (overrideSidePane?: InjectedSidePaneProps): boolean => {\n  return !!overrideSidePane?.isActive;\n};\nconst MainScreen = (props: MainScreenProps): JSX.Element => {\n  const adapter = useAdapter();\n  const {\n    camerasCount,\n    microphonesCount\n  } = useSelector(deviceCountSelector);\n  const hasCameras = camerasCount > 0;\n  const hasMicrophones = microphonesCount > 0;\n  useEffect(() => {\n    (async () => {\n      const constrain = getQueryOptions({\n        /* @conditional-compile-remove(rooms) */role: adapter.getState().call?.role\n      });\n      await adapter.askDevicePermission(constrain);\n      adapter.queryCameras();\n      adapter.queryMicrophones();\n      adapter.querySpeakers();\n    })();\n  }, [adapter,\n  // Ensure we re-ask for permissions if the number of devices goes from 0 -> n during a call\n  // as we cannot request permissions when there are no devices.\n  hasCameras, hasMicrophones]);\n  const {\n    callInvitationUrl,\n    onFetchAvatarPersonaData,\n    onFetchParticipantMenuItems\n  } = props;\n  const page = useSelector(getPage);\n  const endedCall = useSelector(getEndedCall);\n  const [sidePaneRenderer, setSidePaneRenderer] = React.useState<SidePaneRenderer | undefined>();\n  const [injectedSidePaneProps, setInjectedSidePaneProps] = React.useState<InjectedSidePaneProps>();\n  const [userSetGalleryLayout, setUserSetGalleryLayout] = useState<VideoGalleryLayout>(props.options?.galleryOptions?.layout ?? 'floatingLocalVideo');\n  const [userSetOverflowGalleryPosition, setUserSetOverflowGalleryPosition] = useState<'Responsive' | 'horizontalTop'>('Responsive');\n  const overridePropsRef = useRef<InjectedSidePaneProps | undefined>(props.overrideSidePane);\n  useEffect(() => {\n    setInjectedSidePaneProps(props.overrideSidePane);\n    // When the injected side pane is opened, clear the previous side pane active state.\n    // this ensures when the injected side pane is \"closed\", the previous side pane is not \"re-opened\".\n    if (!isShowing(overridePropsRef.current) && isShowing(props.overrideSidePane)) {\n      setSidePaneRenderer(undefined);\n    }\n    overridePropsRef.current = props.overrideSidePane;\n  }, [props.overrideSidePane]);\n  const onSidePaneIdChange = props.onSidePaneIdChange;\n  useEffect(() => {\n    onSidePaneIdChange?.(sidePaneRenderer?.id);\n  }, [sidePaneRenderer?.id, onSidePaneIdChange]);\n\n  // When the call ends ensure the side pane is set to closed to prevent the side pane being open if the call is re-joined.\n  useEffect(() => {\n    const closeSidePane = (): void => {\n      setSidePaneRenderer(undefined);\n    };\n    adapter.on('callEnded', closeSidePane);\n    return () => {\n      adapter.off('callEnded', closeSidePane);\n    };\n  }, [adapter]);\n\n  /* @conditional-compile-remove(capabilities) */\n  const capabilitiesChangedInfoAndRole = useSelector(capabilitiesChangedInfoAndRoleSelector);\n\n  /* @conditional-compile-remove(capabilities) */\n  const capabilitiesChangedNotificationBarProps = useTrackedCapabilityChangedNotifications(capabilitiesChangedInfoAndRole);\n\n  // Track the last dismissed errors of any error kind to prevent errors from re-appearing on subsequent page navigation\n  // This works by tracking the most recent timestamp of any active error type.\n  // And then tracking when that error type was last dismissed.\n  const activeErrors = usePropsFor(ErrorBar).activeErrorMessages;\n  const [trackedErrors, setTrackedErrors] = useState<TrackedErrors>(({} as TrackedErrors));\n  useEffect(() => {\n    setTrackedErrors(prev => updateTrackedErrorsWithActiveErrors(prev, activeErrors));\n  }, [activeErrors]);\n  const onDismissError = useCallback((error: ActiveErrorMessage) => {\n    setTrackedErrors(prev => trackErrorAsDismissed(error.type, prev));\n  }, []);\n  const latestErrors = useMemo(() => filterLatestErrors(activeErrors, trackedErrors), [activeErrors, trackedErrors]);\n  const callees = (useSelector(getTargetCallees) as StartCallIdentifier[]);\n  const locale = useLocale();\n  const palette = useTheme().palette;\n  const leavePageStyle = useMemo(() => leavingPageStyle(palette), [palette]);\n  let pageElement: JSX.Element | undefined;\n  switch (page) {\n    case 'configuration':\n      pageElement = <ConfigurationPage mobileView={props.mobileView} startCallHandler={(): void => {\n        if (callees) {\n          adapter.startCall(callees);\n        } else {\n          adapter.joinCall({\n            microphoneOn: 'keep',\n            cameraOn: 'keep'\n          });\n        }\n      }} updateSidePaneRenderer={setSidePaneRenderer} latestErrors={latestErrors} onDismissError={onDismissError} modalLayerHostId={props.modalLayerHostId} /* @conditional-compile-remove(capabilities) */\n      capabilitiesChangedNotificationBarProps={capabilitiesChangedNotificationBarProps}\n      /* @conditional-compile-remove(custom-branding) */ logo={props.options?.branding?.logo}\n      /* @conditional-compile-remove(custom-branding) */ backgroundImage={props.options?.branding?.backgroundImage} />;\n      break;\n    case 'accessDeniedTeamsMeeting':\n      pageElement = <NoticePage iconName=\"NoticePageAccessDeniedTeamsMeeting\" title={locale.strings.call.failedToJoinTeamsMeetingReasonAccessDeniedTitle} moreDetails={locale.strings.call.failedToJoinTeamsMeetingReasonAccessDeniedMoreDetails} dataUiId={'access-denied-teams-meeting-page'} />;\n      break;\n    case 'removedFromCall':\n      pageElement = <NoticePage iconName=\"NoticePageRemovedFromCall\" title={locale.strings.call.removedFromCallTitle} moreDetails={locale.strings.call.removedFromCallMoreDetails} dataUiId={'removed-from-call-page'} />;\n      break;\n    case 'joinCallFailedDueToNoNetwork':\n      pageElement = <NoticePage iconName=\"NoticePageJoinCallFailedDueToNoNetwork\" title={locale.strings.call.failedToJoinCallDueToNoNetworkTitle} moreDetails={locale.strings.call.failedToJoinCallDueToNoNetworkMoreDetails} dataUiId={'join-call-failed-due-to-no-network-page'} />;\n      break;\n    case 'leaving':\n      pageElement = <NoticePage title={locale.strings.call.leavingCallTitle ?? 'Leaving...'} dataUiId={'leaving-page'} pageStyle={leavePageStyle} disableStartCallButton={true} />;\n      break;\n    case 'leftCall':\n      {\n        const {\n          title,\n          moreDetails,\n          disableStartCallButton,\n          iconName\n        } = getEndedCallPageProps(locale, endedCall);\n        pageElement = <NoticePage iconName={iconName} title={title} moreDetails={callees ? '' : moreDetails} dataUiId={'left-call-page'} disableStartCallButton={disableStartCallButton} />;\n        break;\n      }\n    case 'lobby':\n      pageElement = <LobbyPage mobileView={props.mobileView} modalLayerHostId={props.modalLayerHostId} options={props.options} updateSidePaneRenderer={setSidePaneRenderer} mobileChatTabHeader={props.mobileChatTabHeader} latestErrors={latestErrors} onDismissError={onDismissError}\n      /* @conditional-compile-remove(capabilities) */ capabilitiesChangedNotificationBarProps={capabilitiesChangedNotificationBarProps} />;\n      break;\n    /* @conditional-compile-remove(call-transfer) */\n    case 'transferring':\n      pageElement = <TransferPage mobileView={props.mobileView} modalLayerHostId={props.modalLayerHostId} options={props.options} updateSidePaneRenderer={setSidePaneRenderer} mobileChatTabHeader={props.mobileChatTabHeader} onFetchAvatarPersonaData={onFetchAvatarPersonaData} latestErrors={latestErrors} onDismissError={onDismissError}\n      /* @conditional-compile-remove(capabilities) */ capabilitiesChangedNotificationBarProps={capabilitiesChangedNotificationBarProps} />;\n      break;\n    case 'call':\n      pageElement = <CallPage callInvitationURL={callInvitationUrl} onFetchAvatarPersonaData={onFetchAvatarPersonaData} onFetchParticipantMenuItems={onFetchParticipantMenuItems} mobileView={props.mobileView} modalLayerHostId={props.modalLayerHostId} options={props.options} updateSidePaneRenderer={setSidePaneRenderer} mobileChatTabHeader={props.mobileChatTabHeader} onCloseChatPane={props.onCloseChatPane} latestErrors={latestErrors} onDismissError={onDismissError} galleryLayout={userSetGalleryLayout} onUserSetGalleryLayoutChange={setUserSetGalleryLayout} onSetUserSetOverflowGalleryPosition={setUserSetOverflowGalleryPosition} userSetOverflowGalleryPosition={userSetOverflowGalleryPosition}\n      /* @conditional-compile-remove(capabilities) */ capabilitiesChangedNotificationBarProps={capabilitiesChangedNotificationBarProps} />;\n      break;\n  }\n  useEndedCallConsoleErrors(endedCall);\n  if (!pageElement) {\n    throw new Error('Invalid call composite page');\n  }\n  return <SidePaneProvider sidePaneRenderer={sidePaneRenderer} overrideSidePane={injectedSidePaneProps}>\n      {pageElement}\n    </SidePaneProvider>;\n};\n\n/**\n * A customizable UI composite for calling experience.\n *\n * @remarks Call composite min width/height are as follow:\n * - mobile: 17.5rem x 21rem (280px x 336px, with default rem at 16px)\n * - desktop: 30rem x 22rem (480px x 352px, with default rem at 16px)\n *\n * @public\n */\nexport const CallComposite = (props: CallCompositeProps): JSX.Element => <CallCompositeInner {...props} />;\n\n/**\n * @private\n */\nexport interface InternalCallCompositeProps {\n  overrideSidePane?: InjectedSidePaneProps;\n  onSidePaneIdChange?: (sidePaneId: string | undefined) => void;\n  onCloseChatPane?: () => void;\n  // legacy property to avoid breaking change\n  mobileChatTabHeader?: MobileChatSidePaneTabHeaderProps;\n}\n\n/** @private */\nexport const CallCompositeInner = (props: CallCompositeProps & InternalCallCompositeProps): JSX.Element => {\n  const {\n    adapter,\n    callInvitationUrl,\n    onFetchAvatarPersonaData,\n    onFetchParticipantMenuItems,\n    options,\n    formFactor = 'desktop'\n  } = props;\n  const mobileView = formFactor === 'mobile';\n  const modalLayerHostId = useId('modalLayerhost');\n  const mainScreenContainerClassName = useMemo(() => {\n    return mobileView ? mainScreenContainerStyleMobile : mainScreenContainerStyleDesktop;\n  }, [mobileView]);\n  return <div className={mainScreenContainerClassName}>\n      <BaseProvider {...props}>\n        <CallAdapterProvider adapter={adapter}>\n          <MainScreen callInvitationUrl={callInvitationUrl} onFetchAvatarPersonaData={onFetchAvatarPersonaData} onFetchParticipantMenuItems={onFetchParticipantMenuItems} mobileView={mobileView} modalLayerHostId={modalLayerHostId} options={options} onSidePaneIdChange={props.onSidePaneIdChange} overrideSidePane={props.overrideSidePane} mobileChatTabHeader={props.mobileChatTabHeader} onCloseChatPane={props.onCloseChatPane} />\n          {\n        // This layer host is for ModalLocalAndRemotePIP in SidePane. This LayerHost cannot be inside the SidePane\n        // because when the SidePane is hidden, ie. style property display is 'none', it takes up no space. This causes problems when dragging\n        // the Modal because the draggable bounds thinks it has no space and will always return to its initial position after dragging.\n        // Additionally, this layer host cannot be in the Call Arrangement as it needs to be rendered before useMinMaxDragPosition() in\n        // common/utils useRef is called.\n        // Warning: this is fragile and works because the call arrangement page is only rendered after the call has connected and thus this\n        // LayerHost will be guaranteed to have rendered (and subsequently mounted in the DOM). This ensures the DOM element will be available\n        // before the call to `document.getElementById(modalLayerHostId)` is made.\n        <LayerHost id={modalLayerHostId} className={mergeStyles(modalLayerHostStyle)} />}\n        </CallAdapterProvider>\n      </BaseProvider>\n    </div>;\n};\nconst getQueryOptions = (options: {\n  /* @conditional-compile-remove(rooms) */role?: ParticipantRole;\n}): PermissionConstraints => {\n  /* @conditional-compile-remove(rooms) */\n  if (options.role === 'Consumer') {\n    return {\n      video: false,\n      audio: true\n    };\n  }\n  return {\n    video: true,\n    audio: true\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { createClientLogger } from '@azure/logger';\n\n/**\n * @private\n */\nexport const compositeLogger = createClientLogger('communication-react:composite');","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { RemoteParticipant, RemoteVideoStream } from '@azure/communication-calling';\nimport EventEmitter from 'events';\n\n/**\n * @private\n */\nexport class ParticipantSubscriber {\n  private participant: RemoteParticipant;\n  private emitter: EventEmitter;\n  constructor(participant: RemoteParticipant, emitter: EventEmitter) {\n    this.participant = participant;\n    this.emitter = emitter;\n    this.subscribeParticipantEvents();\n  }\n  private isMutedChangedHandler = (): void => {\n    this.emitter.emit('isMutedChanged', {\n      participantId: this.participant.identifier,\n      isMuted: this.participant.isMuted\n    });\n  };\n  private displayNameChangedHandler = (): void => {\n    this.emitter.emit('displayNameChanged', {\n      participantId: this.participant.identifier,\n      displayName: this.participant.displayName\n    });\n  };\n  private isSpeakingChangedHandler = (): void => {\n    this.emitter.emit('isSpeakingChanged', {\n      participantId: this.participant.identifier,\n      isSpeaking: this.participant.isSpeaking\n    });\n  };\n  private videoStreamsUpdatedHandler = (event: {\n    added: RemoteVideoStream[];\n    removed: RemoteVideoStream[];\n  }): void => {\n    this.emitter.emit('videoStreamsUpdated', event);\n  };\n  private subscribeParticipantEvents(): void {\n    this.participant.on('isMutedChanged', this.isMutedChangedHandler);\n    this.participant.on('displayNameChanged', this.displayNameChangedHandler);\n    this.participant.on('isSpeakingChanged', this.isSpeakingChangedHandler);\n    this.participant.on('videoStreamsUpdated', this.videoStreamsUpdatedHandler);\n  }\n  public unsubscribeAll(): void {\n    this.participant.off('isMutedChanged', this.isMutedChangedHandler);\n    this.participant.off('displayNameChanged', this.displayNameChangedHandler);\n    this.participant.off('isSpeakingChanged', this.isSpeakingChangedHandler);\n    this.participant.off('videoStreamsUpdated', this.videoStreamsUpdatedHandler);\n  }\n}\n\n/**\n * @private\n */\nexport type ParticipantEvent = 'isMutedChanged' | 'displayNameChanged' | 'isSpeakingChanged' | 'videoStreamsUpdated';","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { UserFacingDiagnosticsFeature, Features, MediaDiagnosticChangedEventArgs, NetworkDiagnosticChangedEventArgs } from '@azure/communication-calling';\nimport { CallCommon } from '@internal/calling-stateful-client';\nimport { EventEmitter } from 'events';\nimport { MediaDiagnosticChangedEvent, NetworkDiagnosticChangedEvent } from './CallAdapter';\n\n/**\n * @private\n */\nexport class DiagnosticsForwarder {\n  private _diagnostics: UserFacingDiagnosticsFeature;\n  private _emitter: EventEmitter;\n  constructor(emitter: EventEmitter, call: CallCommon) {\n    this._diagnostics = call.feature(Features.UserFacingDiagnostics);\n    this._emitter = emitter;\n    this.subscribe();\n  }\n  public unsubscribe = (): void => {\n    this._diagnostics.network.off('diagnosticChanged', this.networkDiagnosticsChanged.bind(this));\n    this._diagnostics.media.off('diagnosticChanged', this.mediaDiagnosticsChanged.bind(this));\n  };\n  private subscribe(): void {\n    this._diagnostics.network.on('diagnosticChanged', this.networkDiagnosticsChanged.bind(this));\n    this._diagnostics.media.on('diagnosticChanged', this.mediaDiagnosticsChanged.bind(this));\n  }\n  private networkDiagnosticsChanged(args: NetworkDiagnosticChangedEventArgs): void {\n    const event: NetworkDiagnosticChangedEvent = {\n      type: 'network',\n      ...args\n    };\n    this._emitter.emit('diagnosticChanged', event);\n  }\n  private mediaDiagnosticsChanged(args: MediaDiagnosticChangedEventArgs): void {\n    const event: MediaDiagnosticChangedEvent = {\n      type: 'media',\n      ...args\n    };\n    this._emitter.emit('diagnosticChanged', event);\n  }\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallAgent } from '@azure/communication-calling';\nimport { CallingHandlers, createDefaultCallingHandlers } from '@internal/calling-component-bindings';\nimport { CallCommon, StatefulCallClient, StatefulDeviceManager, TeamsCallAgent, _isACSCall, _isACSCallAgent, _isTeamsCall, _isTeamsCallAgent } from '@internal/calling-stateful-client';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffectsDependency } from '@internal/calling-component-bindings';\n\n/**\n * @private\n */\nexport type CallHandlersOf<AgentType extends CallAgent | TeamsCallAgent> = AgentType extends CallAgent ? CallingHandlers : never;\n\n/**\n * @private\n *\n * This is used to create correct handler for generic agent type\n */\nexport function createHandlers<AgentType extends CallAgent | TeamsCallAgent>(callClient: StatefulCallClient, callAgent: AgentType, deviceManager: StatefulDeviceManager | undefined, call: CallCommon | undefined, /* @conditional-compile-remove(video-background-effects) */\noptions?: {\n  onResolveVideoBackgroundEffectsDependency?: () => Promise<VideoBackgroundEffectsDependency>;\n}): CallHandlersOf<AgentType> {\n  // Call can be either undefined or ACS Call\n  if (_isACSCallAgent(callAgent) && (!call || call && _isACSCall(call))) {\n    return (createDefaultCallingHandlers(callClient, callAgent, deviceManager, call, /* @conditional-compile-remove(video-background-effects) */\n    options) as CallHandlersOf<AgentType>);\n  }\n  throw new Error('Unhandled agent type');\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallAdapterState } from './CallAdapter';\nimport { RemoteParticipantState } from '@internal/calling-stateful-client';\nimport { AdapterStateModifier } from './AzureCommunicationCallAdapter';\nimport { createParticipantModifier } from '../utils';\n\n/**\n * Callback function used to provide custom data to build profile for a user.\n *\n * @beta\n */\nexport type OnFetchProfileCallback = (userId: string, defaultProfile?: Profile) => Promise<Profile | undefined>;\n\n/**\n * The profile of a user.\n *\n * @beta\n */\nexport type Profile = {\n  /**\n   * Primary text to display, usually the name of the person.\n   */\n  displayName?: string;\n};\n\n/**\n * @private\n */\nexport const createProfileStateModifier = (onFetchProfile: OnFetchProfileCallback, notifyUpdate: () => void): AdapterStateModifier => {\n  const cachedDisplayName: {\n    [id: string]: string;\n  } = {};\n  return (state: CallAdapterState) => {\n    const originalParticipants = state.call?.remoteParticipants;\n    (async () => {\n      let shouldNotifyUpdates = false;\n      for (const key in originalParticipants) {\n        if (cachedDisplayName[key]) {\n          continue;\n        }\n        const profile = await onFetchProfile(key, {\n          displayName: originalParticipants[key].displayName\n        });\n        if (profile?.displayName && originalParticipants[key].displayName !== profile?.displayName) {\n          cachedDisplayName[key] = profile?.displayName;\n          shouldNotifyUpdates = true;\n        }\n      }\n      // notify update only when there is a change, which most likely will trigger modifier and setState again\n      shouldNotifyUpdates && notifyUpdate();\n    })();\n    const participantsModifier = createParticipantModifier((id: string, participant: RemoteParticipantState): RemoteParticipantState | undefined => {\n      if (cachedDisplayName[id]) {\n        return {\n          ...participant,\n          displayName: cachedDisplayName[id]\n        };\n      }\n      return undefined;\n    });\n    return participantsModifier(state);\n  };\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallCommon } from '@azure/communication-calling';\nimport { CallingSounds } from './CallAdapter';\n/* @conditional-compile-remove(calling-sounds) */\nimport { isPhoneNumberIdentifier } from '@azure/communication-common';\nimport { CommunicationIdentifier } from '@azure/communication-common';\ntype CallingSoundsLoaded = {\n  callEndedSound?: HTMLAudioElement;\n  callRingingSound?: HTMLAudioElement;\n  callBusySound?: HTMLAudioElement;\n};\nconst CALL_REJECTED_CODE = 603;\nconst CALL_ENDED_CODE = 0;\nconst CALL_TRANSFER_SUBCODE = 7015;\n\n/**\n * @private\n */\nexport class CallingSoundSubscriber {\n  private call: CallCommon;\n  private soundsLoaded?: CallingSoundsLoaded;\n  private callee: CommunicationIdentifier[] | undefined;\n  constructor(call: CallCommon, callee?: CommunicationIdentifier[], sounds?: CallingSounds) {\n    this.call = call;\n    this.callee = callee;\n    if (sounds) {\n      this.soundsLoaded = this.loadSounds(sounds);\n      this.subscribeCallSoundEvents();\n    }\n  }\n  private onCallStateChanged = (): void => {\n    this.call.on('stateChanged', () => {\n      if (shouldPlayRinging(this.call, this.callee) && this.soundsLoaded?.callRingingSound) {\n        this.soundsLoaded.callRingingSound.loop = true;\n        this.playSound(this.soundsLoaded.callRingingSound);\n      }\n      if (!shouldPlayRinging(this.call, this.callee) && this.soundsLoaded?.callRingingSound) {\n        this.soundsLoaded.callRingingSound.loop = false;\n        this.soundsLoaded.callRingingSound.pause();\n      }\n      if (this.call.state === 'Disconnected') {\n        if (this.soundsLoaded?.callBusySound && this.call.callEndReason?.code === CALL_REJECTED_CODE) {\n          this.playSound(this.soundsLoaded.callBusySound);\n        } else if (this.soundsLoaded?.callEndedSound && this.call.callEndReason?.code === CALL_ENDED_CODE && this.call.callEndReason?.subCode !== CALL_TRANSFER_SUBCODE) {\n          this.playSound(this.soundsLoaded.callEndedSound);\n        }\n      }\n    });\n  };\n  private subscribeCallSoundEvents(): void {\n    this.onCallStateChanged();\n  }\n  public unsubscribeAll(): void {\n    this.call?.off('stateChanged', this.onCallStateChanged);\n    if (this.soundsLoaded?.callRingingSound) {\n      this.soundsLoaded.callRingingSound.pause();\n    }\n  }\n  private loadSounds(sounds?: CallingSounds): CallingSoundsLoaded | undefined {\n    let callEndedSound;\n    if (sounds?.callEnded) {\n      callEndedSound = new Audio(sounds?.callEnded?.url);\n      callEndedSound.preload = 'auto';\n    }\n    let callRingingSound;\n    if (sounds?.callRinging) {\n      callRingingSound = new Audio(sounds?.callRinging?.url);\n      callRingingSound.preload = 'auto';\n    }\n    let callBusySound;\n    if (sounds?.callBusy) {\n      callBusySound = new Audio(sounds?.callBusy?.url);\n      callBusySound.preload = 'auto';\n    }\n    return {\n      callEndedSound,\n      callRingingSound,\n      callBusySound\n    };\n  }\n  private playSound(sound: HTMLAudioElement): void {\n    sound.play().catch(e => {\n      console.error(e, 'Failed to play sound, check loader config to make sure it is correct');\n    });\n  }\n}\n\n/**\n * Helper function to allow the calling sound subscriber to determine when to play the ringing\n * sound when making an outbound call.\n */\nconst shouldPlayRinging = (call: CallCommon, callee?: CommunicationIdentifier[]): boolean => {\n  /* @conditional-compile-remove(calling-sounds) */\n  if (callee && callee.length >= 1 && !isPhoneNumberIdentifier(callee[0]) && (call.state === 'Ringing' || call.state === 'Connecting')) {\n    return true;\n  } else {\n    return false;\n  }\n  return false;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { compositeLogger } from '../../../Logger';\nimport { _isInCall, _isInLobbyOrConnecting } from '@internal/calling-component-bindings';\nimport { CallClientState, CallError, CallState, _createStatefulCallClientInner, StatefulCallClient, StatefulDeviceManager, TeamsCall, TeamsCallAgent as BetaTeamsCallAgent, _isACSCall, _isTeamsCall } from '@internal/calling-stateful-client';\n/* @conditional-compile-remove(call-transfer) */\nimport { AcceptedTransfer } from '@internal/calling-stateful-client';\nimport { CallCommon } from '@internal/calling-stateful-client';\nimport { _TelemetryImplementationHint } from '@internal/acs-ui-common';\nimport { AudioOptions, CallAgent, GroupCallLocator, TeamsMeetingLinkLocator, LocalVideoStream as SDKLocalVideoStream, AudioDeviceInfo, VideoDeviceInfo, RemoteParticipant, PermissionConstraints, PropertyChangedEvent, StartCallOptions, VideoOptions, Call } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { TeamsCaptions } from '@azure/communication-calling';\n/* @conditional-compile-remove(call-transfer) */\nimport { TransferEventArgs } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { StartCaptionsOptions, TeamsCaptionsInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport type { BackgroundBlurConfig, BackgroundReplacementConfig } from '@azure/communication-calling';\n/* @conditional-compile-remove(capabilities) */\nimport type { CapabilitiesChangeInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(rooms) */\nimport { RoomCallLocator } from '@azure/communication-calling';\n/* @conditional-compile-remove(unsupported-browser) */ /* @conditional-compile-remove(video-background-effects) */ /* @conditional-compile-remove(close-captions) */ /* @conditional-compile-remove(capabilities) */\nimport { Features } from '@azure/communication-calling';\nimport { DtmfTone } from '@azure/communication-calling';\nimport { EventEmitter } from 'events';\nimport { CommonCallAdapter, CallEndedListener, CallIdChangedListener, CallAdapterState, DisplayNameChangedListener, IsMutedChangedListener, IsLocalScreenSharingActiveChangedListener, IsSpeakingChangedListener, ParticipantsJoinedListener, ParticipantsLeftListener, DiagnosticChangedEventListner, CallAdapterCallEndedEvent, CallAdapter, JoinCallOptions, StartCallIdentifier } from './CallAdapter';\n/* @conditional-compile-remove(call-transfer) */\nimport { TransferAcceptedListener } from './CallAdapter';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangedListener } from './CallAdapter';\n/* @conditional-compile-remove(close-captions) */\nimport { CaptionsReceivedListener, IsCaptionsActiveChangedListener, IsCaptionLanguageChangedListener, IsSpokenLanguageChangedListener } from './CallAdapter';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundImage, VideoBackgroundEffect, VideoBackgroundBlurEffect, VideoBackgroundReplacementEffect } from './CallAdapter';\nimport { getCallCompositePage, getLocatorOrTargetCallees, IsCallEndedPage, isCameraOn } from '../utils';\nimport { CreateVideoStreamViewResult, VideoStreamOptions } from '@internal/react-components';\nimport { toFlatCommunicationIdentifier, _toCommunicationIdentifier, _isValidIdentifier } from '@internal/acs-ui-common';\nimport { CommunicationTokenCredential, CommunicationUserIdentifier, CommunicationIdentifier, MicrosoftTeamsUserIdentifier, isMicrosoftTeamsUserIdentifier, MicrosoftTeamsAppIdentifier, UnknownIdentifier } from '@azure/communication-common';\nimport { ParticipantSubscriber } from './ParticipantSubcriber';\nimport { AdapterError } from '../../common/adapters';\nimport { DiagnosticsForwarder } from './DiagnosticsForwarder';\nimport { useEffect, useRef, useState } from 'react';\nimport { CallHandlersOf, createHandlers } from './createHandlers';\nimport { createProfileStateModifier, OnFetchProfileCallback } from './OnFetchProfileCallback';\n/* @conditional-compile-remove(video-background-effects) */\nimport { getBackgroundEffectFromSelectedEffect } from '../utils';\nimport { getSelectedCameraFromAdapterState } from '../utils';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffectsDependency } from '@internal/calling-component-bindings';\n/* @conditional-compile-remove(calling-sounds) */\nimport { CallingSoundSubscriber } from './CallingSoundSubscriber';\n/* @conditional-compile-remove(calling-sounds) */\nimport { CallingSounds } from './CallAdapter';\ntype CallTypeOf<AgentType extends CallAgent | BetaTeamsCallAgent> = AgentType extends CallAgent ? Call : TeamsCall;\n\n/** Context of call, which is a centralized context for all state updates */\nclass CallContext {\n  private emitter: EventEmitter = new EventEmitter();\n  private state: CallAdapterState;\n  private callId: string | undefined;\n  private displayNameModifier: AdapterStateModifier | undefined;\n  constructor(clientState: CallClientState, isTeamsCall: boolean, /* @conditional-compile-remove(rooms) */\n  isRoomsCall: boolean, options?: {\n    maxListeners?: number;\n    onFetchProfile?: OnFetchProfileCallback;\n    /* @conditional-compile-remove(video-background-effects) */\n    videoBackgroundOptions?: {\n      videoBackgroundImages?: VideoBackgroundImage[];\n      onResolveDependency?: () => Promise<VideoBackgroundEffectsDependency>;\n    };\n    /* @conditional-compile-remove(calling-sounds) */\n    callingSounds?: CallingSounds;\n  }, targetCallees?: StartCallIdentifier[]) {\n    this.state = {\n      isLocalPreviewMicrophoneEnabled: false,\n      userId: clientState.userId,\n      displayName: clientState.callAgent?.displayName,\n      devices: clientState.deviceManager,\n      call: undefined,\n      /* @conditional-compile-remove(calling-sounds) */targetCallees: (targetCallees as CommunicationIdentifier[]),\n      page: 'configuration',\n      latestErrors: clientState.latestErrors,\n      isTeamsCall,\n      /* @conditional-compile-remove(rooms) */isRoomsCall,\n      /* @conditional-compile-remove(video-background-effects) */videoBackgroundImages: options?.videoBackgroundOptions?.videoBackgroundImages,\n      /* @conditional-compile-remove(video-background-effects) */\n      onResolveVideoEffectDependency: options?.videoBackgroundOptions?.onResolveDependency,\n      /* @conditional-compile-remove(video-background-effects) */selectedVideoBackgroundEffect: undefined,\n      cameraStatus: undefined,\n      /* @conditional-compile-remove(calling-sounds) */sounds: options?.callingSounds\n    };\n    this.emitter.setMaxListeners(options?.maxListeners ?? 50);\n    this.bindPublicMethods();\n    this.displayNameModifier = options?.onFetchProfile ? createProfileStateModifier(options.onFetchProfile, () => {\n      this.setState(this.getState());\n    }) : undefined;\n  }\n  private bindPublicMethods(): void {}\n  public onStateChange(handler: (_uiState: CallAdapterState) => void): void {\n    this.emitter.on('stateChanged', handler);\n  }\n  public offStateChange(handler: (_uiState: CallAdapterState) => void): void {\n    this.emitter.off('stateChanged', handler);\n  }\n  public setState(state: CallAdapterState): void {\n    this.state = this.displayNameModifier ? this.displayNameModifier(state) : state;\n    this.emitter.emit('stateChanged', this.state);\n  }\n  public getState(): CallAdapterState {\n    return this.state;\n  }\n  public setIsLocalMicrophoneEnabled(isLocalPreviewMicrophoneEnabled: boolean): void {\n    this.setState({\n      ...this.state,\n      isLocalPreviewMicrophoneEnabled\n    });\n  }\n\n  // This is the key to find current call object in client state\n  public setCurrentCallId(callId: string | undefined): void {\n    this.callId = callId;\n  }\n\n  /* @conditional-compile-remove(calling-sounds) */\n  public setTargetCallee(targetCallees: StartCallIdentifier[]): void {\n    this.setState({\n      ...this.state,\n      targetCallees\n    });\n  }\n  public onCallEnded(handler: (callEndedData: CallAdapterCallEndedEvent) => void): void {\n    this.emitter.on('callEnded', handler);\n  }\n  public offCallEnded(handler: (callEndedData: CallAdapterCallEndedEvent) => void): void {\n    this.emitter.off('callEnded', handler);\n  }\n  public updateClientState(clientState: CallClientState): void {\n    let call = this.callId ? clientState.calls[this.callId] : undefined;\n    const latestEndedCall = clientState.callsEnded ? findLatestEndedCall(clientState.callsEnded) : undefined;\n    // As the state is transitioning to a new state, trigger appropriate callback events.\n    const oldPage = this.state.page;\n    /* @conditional-compile-remove(call-transfer) */\n    const latestAcceptedTransfer = call?.transfer.acceptedTransfers ? findLatestAcceptedTransfer(call.transfer.acceptedTransfers) : undefined;\n    /* @conditional-compile-remove(call-transfer) */\n    const transferCall = latestAcceptedTransfer ? clientState.calls[latestAcceptedTransfer.callId] : undefined;\n    const newPage = getCallCompositePage(call, latestEndedCall, /* @conditional-compile-remove(call-transfer) */transferCall);\n    if (!IsCallEndedPage(oldPage) && IsCallEndedPage(newPage)) {\n      this.emitter.emit('callEnded', {\n        callId: this.callId\n      });\n      // Reset the callId to undefined as the call has ended.\n      this.setCurrentCallId(undefined);\n      // Make sure that the call is set to undefined in the state.\n      call = undefined;\n    }\n    if (this.state.page) {\n      this.setState({\n        ...this.state,\n        userId: clientState.userId,\n        displayName: clientState.callAgent?.displayName,\n        call,\n        page: newPage,\n        endedCall: latestEndedCall,\n        devices: clientState.deviceManager,\n        latestErrors: clientState.latestErrors,\n        cameraStatus: call?.localVideoStreams.find(s => s.mediaStreamType === 'Video') || clientState.deviceManager.unparentedViews.find(s => s.mediaStreamType === 'Video') ? 'On' : 'Off',\n        /* @conditional-compile-remove(call-transfer) */acceptedTransferCallState: transferCall\n      });\n    }\n  }\n  /* @conditional-compile-remove(video-background-effects) */\n  public setBackroundPickerImages(videoBackgroundImages: VideoBackgroundImage[]): void {\n    this.setState({\n      ...this.state,\n      videoBackgroundImages\n    });\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  public setSelectedVideoBackgroundEffect(selectedVideoBackgroundEffect?: VideoBackgroundEffect): void {\n    this.setState({\n      ...this.state,\n      selectedVideoBackgroundEffect\n    });\n  }\n\n  /* @conditional-compile-remove(call-transfer) */\n  public setAcceptedTransferCall(call?: CallState): void {\n    this.setState({\n      ...this.state,\n      acceptedTransferCallState: call\n    });\n  }\n}\nconst findLatestEndedCall = (calls: {\n  [key: string]: CallState;\n}): CallState | undefined => {\n  const callStates = Object.values(calls);\n  if (callStates.length === 0) {\n    return undefined;\n  }\n  let latestCall = callStates[0];\n  for (const call of callStates.slice(1)) {\n    if ((call.endTime?.getTime() ?? 0) > (latestCall.endTime?.getTime() ?? 0)) {\n      latestCall = call;\n    }\n  }\n  return latestCall;\n};\n\n/* @conditional-compile-remove(call-transfer) */\nconst findLatestAcceptedTransfer = (acceptedTransfers: {\n  [key: string]: AcceptedTransfer;\n}): AcceptedTransfer | undefined => {\n  const acceptedTransferValues = Object.values(acceptedTransfers);\n  if (acceptedTransferValues.length === 0) {\n    return undefined;\n  }\n  let latestAcceptedTransfer = acceptedTransferValues[0];\n  for (const acceptedTransfer of acceptedTransferValues.slice(1)) {\n    if ((acceptedTransfer.timestamp?.getTime() ?? 0) > (latestAcceptedTransfer.timestamp?.getTime() ?? 0)) {\n      latestAcceptedTransfer = acceptedTransfer;\n    }\n  }\n  return latestAcceptedTransfer;\n};\n\n/**\n * @private\n */\nexport type AdapterStateModifier = (state: CallAdapterState) => CallAdapterState;\n\n/**\n * @private\n */\nexport class AzureCommunicationCallAdapter<AgentType extends CallAgent | BetaTeamsCallAgent = CallAgent> implements CommonCallAdapter {\n  private callClient: StatefulCallClient;\n  private callAgent: AgentType;\n  private deviceManager: StatefulDeviceManager;\n  private locator?: CallAdapterLocator;\n  targetCallees?: StartCallIdentifier[];\n  // Never use directly, even internally. Use `call` property instead.\n  private _call?: CallCommon;\n  private context: CallContext;\n  private diagnosticsForwarder?: DiagnosticsForwarder;\n  private handlers: CallHandlersOf<AgentType>;\n  private participantSubscribers = new Map<string, ParticipantSubscriber>();\n  private emitter: EventEmitter = new EventEmitter();\n  /* @conditional-compile-remove(calling-sounds) */\n  private callingSoundSubscriber: CallingSoundSubscriber | undefined;\n  private onClientStateChange: (clientState: CallClientState) => void;\n  /* @conditional-compile-remove(video-background-effects) */\n  private onResolveVideoBackgroundEffectsDependency?: () => Promise<VideoBackgroundEffectsDependency>;\n  private get call(): CallCommon | undefined {\n    return this._call;\n  }\n  private set call(newCall: CallCommon | undefined) {\n    this.resetDiagnosticsForwarder(newCall);\n    this._call = newCall;\n  }\n  constructor(callClient: StatefulCallClient, locator: CallAdapterLocator, callAgent: AgentType, deviceManager: StatefulDeviceManager, options?: AzureCommunicationCallAdapterOptions | TeamsAdapterOptions);\n  constructor(callClient: StatefulCallClient, targetCallees: StartCallIdentifier[], callAgent: AgentType, deviceManager: StatefulDeviceManager, options?: AzureCommunicationCallAdapterOptions | TeamsAdapterOptions);\n  constructor(callClient: StatefulCallClient, locatorOrTargetCalless: CallAdapterLocator | StartCallIdentifier[], callAgent: AgentType, deviceManager: StatefulDeviceManager, options?: AzureCommunicationCallAdapterOptions | TeamsAdapterOptions) {\n    this.bindPublicMethods();\n    this.callClient = callClient;\n    this.callAgent = callAgent;\n    this.targetCallees = getLocatorOrTargetCallees(locatorOrTargetCalless) === true ? (locatorOrTargetCalless as StartCallIdentifier[]) : undefined;\n    this.locator = getLocatorOrTargetCallees(locatorOrTargetCalless) === false ? (locatorOrTargetCalless as CallAdapterLocator) : undefined;\n    this.deviceManager = deviceManager;\n    const isTeamsMeeting = this.locator ? 'meetingLink' in this.locator : false;\n\n    /* @conditional-compile-remove(rooms) */\n    const isRoomsCall = this.locator ? 'roomId' in this.locator : false;\n\n    /* @conditional-compile-remove(video-background-effects) */\n    this.onResolveVideoBackgroundEffectsDependency = options?.videoBackgroundOptions?.onResolveDependency;\n    this.context = new CallContext(callClient.getState(), isTeamsMeeting, /* @conditional-compile-remove(rooms) */isRoomsCall, /* @conditional-compile-remove(video-background-effects) */options, this.targetCallees);\n    this.context.onCallEnded(endCallData => this.emitter.emit('callEnded', endCallData));\n    const onStateChange = (clientState: CallClientState): void => {\n      // unsubscribe when the instance gets disposed\n      if (!this) {\n        callClient.offStateChange(onStateChange);\n        return;\n      }\n\n      // `updateClientState` searches for the current call from all the calls in the state using a cached `call.id`\n      // from the call object. `call.id` can change during a call. We must update the cached `call.id` before\n      // calling `updateClientState` so that we find the correct state object for the call even when `call.id`\n      // has changed.\n      // https://github.com/Azure/communication-ui-library/pull/1820\n      if (this.call?.id) {\n        this.context.setCurrentCallId(this.call.id);\n      }\n\n      // If the call connects we need to clean up any previous unparentedViews\n      if ((this.call?.state === 'InLobby' || this.call?.state === 'Connected') && this.callClient.getState().deviceManager.unparentedViews.length > 0) {\n        this.callClient.getState().deviceManager.unparentedViews.forEach(view => {\n          this.callClient.disposeView(undefined, undefined, view);\n        });\n      }\n      this.context.updateClientState(clientState);\n    };\n    this.handlers = createHandlers(callClient, callAgent, deviceManager, undefined, /* @conditional-compile-remove(video-background-effects) */{\n      onResolveVideoBackgroundEffectsDependency: this.onResolveVideoBackgroundEffectsDependency\n    });\n    this.onClientStateChange = onStateChange;\n    this.subscribeDeviceManagerEvents();\n    this.callClient.onStateChange(onStateChange);\n    /* @conditional-compile-remove(call-transfer) */\n    if (this.callAgent.kind === 'CallAgent') {\n      const onCallsUpdated = (args: {\n        added: Call[];\n        removed: Call[];\n      }): void => {\n        if (this.call?.id) {\n          const removedCall = args.removed.find(call => call.id === this.call?.id);\n          if (removedCall) {\n            const removedCallState = this.callClient.getState().callsEnded[removedCall.id];\n            const latestAcceptedTransfer = findLatestAcceptedTransfer(removedCallState.transfer.acceptedTransfers);\n            const _callAgent = (callAgent as CallAgent);\n            const transferCall = _callAgent.calls.find((call: Call) => call.id === latestAcceptedTransfer?.callId);\n            if (transferCall) {\n              this.processNewCall(transferCall);\n            }\n          }\n        }\n      };\n      (this.callAgent as CallAgent).on('callsUpdated', onCallsUpdated);\n    }\n  }\n\n  // TODO: update this to include the 'selectedCameraChanged' when calling adds it to the device manager\n  private subscribeDeviceManagerEvents(): void {\n    this.deviceManager.on('selectedMicrophoneChanged', () => {\n      this.emitter.emit('selectedMicrophoneChanged');\n    });\n    this.deviceManager.on('selectedSpeakerChanged', () => {\n      this.emitter.emit('selectedSpeakerChanged');\n    });\n  }\n  private bindPublicMethods(): void {\n    this.onStateChange.bind(this);\n    this.offStateChange.bind(this);\n    this.getState.bind(this);\n    this.dispose.bind(this);\n    this.joinCall.bind(this);\n    this.leaveCall.bind(this);\n    this.setCamera.bind(this);\n    this.setMicrophone.bind(this);\n    this.setSpeaker.bind(this);\n    this.askDevicePermission.bind(this);\n    this.queryCameras.bind(this);\n    this.queryMicrophones.bind(this);\n    this.querySpeakers.bind(this);\n    this.startCamera.bind(this);\n    this.stopCamera.bind(this);\n    this.mute.bind(this);\n    this.unmute.bind(this);\n    this.startCall.bind(this);\n    this.startScreenShare.bind(this);\n    this.stopScreenShare.bind(this);\n    /* @conditional-compile-remove(raise-hand) */\n    this.raiseHand.bind(this);\n    this.lowerHand.bind(this);\n    this.removeParticipant.bind(this);\n    this.createStreamView.bind(this);\n    this.disposeStreamView.bind(this);\n    this.disposeScreenShareStreamView.bind(this);\n    this.disposeRemoteVideoStreamView.bind(this);\n    this.disposeLocalVideoStreamView.bind(this);\n    this.on.bind(this);\n    this.off.bind(this);\n    this.processNewCall.bind(this);\n    this.sendDtmfTone.bind(this);\n    /* @conditional-compile-remove(close-captions) */\n    {\n      this.startCaptions.bind(this);\n      this.stopCaptions.bind(this);\n      this.setSpokenLanguage.bind(this);\n      this.setCaptionLanguage.bind(this);\n    }\n    /* @conditional-compile-remove(video-background-effects) */\n    this.startVideoBackgroundEffect.bind(this);\n    /* @conditional-compile-remove(video-background-effects) */\n    this.stopVideoBackgroundEffects.bind(this);\n    /* @conditional-compile-remove(video-background-effects) */\n    this.updateBackgroundPickerImages.bind(this);\n  }\n  public dispose(): void {\n    this.resetDiagnosticsForwarder();\n    this.callClient.offStateChange(this.onClientStateChange);\n    this.callAgent.dispose();\n  }\n  public async queryCameras(): Promise<VideoDeviceInfo[]> {\n    const startTime = new Date().getTime();\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      const cameras = await this.deviceManager.getCameras();\n      const endTime = new Date().getTime();\n      compositeLogger.info('time to query cameras', endTime - startTime, 'ms');\n      return cameras;\n    });\n  }\n  public async queryMicrophones(): Promise<AudioDeviceInfo[]> {\n    const startTime = new Date().getTime();\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      const microphones = await this.deviceManager.getMicrophones();\n      const endTime = new Date().getTime();\n      compositeLogger.info('time to query microphones', endTime - startTime, 'ms');\n      return microphones;\n    });\n  }\n  public async querySpeakers(): Promise<AudioDeviceInfo[]> {\n    const startTime = new Date().getTime();\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      const speakers = (await this.deviceManager.isSpeakerSelectionAvailable) ? this.deviceManager.getSpeakers() : [];\n      const endTime = new Date().getTime();\n      compositeLogger.info('time to query speakers', endTime - startTime, 'ms');\n      return speakers;\n    });\n  }\n  public async askDevicePermission(constrain: PermissionConstraints): Promise<void> {\n    const startTime = new Date().getTime();\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.deviceManager.askDevicePermission(constrain);\n      const endTime = new Date().getTime();\n      compositeLogger.info('time to query askDevicePermissions', endTime - startTime, 'ms');\n    });\n  }\n  public joinCall(options?: boolean | JoinCallOptions): CallTypeOf<AgentType> | undefined {\n    if (_isInCall(this.getState().call?.state ?? 'None')) {\n      throw new Error('You are already in the call!');\n    } else if (this.locator === undefined) {\n      throw new Error('Locator is not defined!');\n    }\n    return this.teeErrorToEventEmitter(() => {\n      // Default to keeping camera/mic on if no override argument specified\n      let shouldCameraBeOnInCall = this.getState().cameraStatus === 'On';\n      let shouldMicrophoneBeOnInCall = this.getState().isLocalPreviewMicrophoneEnabled;\n\n      // Apply override arguments\n      if (typeof options === 'boolean') {\n        // Deprecated joinCall API (boolen)\n        shouldMicrophoneBeOnInCall = options;\n      } else if (typeof options === 'object') {\n        // Options bag API\n        if (options.microphoneOn && options.microphoneOn !== 'keep') {\n          shouldMicrophoneBeOnInCall = options.microphoneOn;\n        }\n        if (options.cameraOn && options.cameraOn !== 'keep') {\n          shouldCameraBeOnInCall = options.cameraOn;\n        }\n      }\n      const audioOptions: AudioOptions = {\n        muted: !shouldMicrophoneBeOnInCall\n      };\n      const selectedCamera = getSelectedCameraFromAdapterState(this.getState());\n      const videoOptions: VideoOptions = selectedCamera && shouldCameraBeOnInCall ? {\n        localVideoStreams: [new SDKLocalVideoStream(selectedCamera)]\n      } : {};\n      const call = this._joinCall(audioOptions, videoOptions);\n      this.processNewCall(call);\n      return call;\n    });\n  }\n  private _joinCall(audioOptions: AudioOptions, videoOptions: VideoOptions): CallTypeOf<AgentType> {\n    const isTeamsMeeting = this.locator ? 'meetingLink' in this.locator : false;\n    /* @conditional-compile-remove(rooms) */\n    const isRoomsCall = this.locator ? 'roomId' in this.locator : false;\n    if (isTeamsMeeting) {\n      return (this.callAgent.join((this.locator as TeamsMeetingLinkLocator), {\n        audioOptions,\n        videoOptions\n      }) as CallTypeOf<AgentType>);\n    }\n    /* @conditional-compile-remove(rooms) */\n    if (isRoomsCall) {\n      return (this.callAgent.join((this.locator as RoomCallLocator), {\n        audioOptions,\n        videoOptions\n      }) as CallTypeOf<AgentType>);\n    }\n    return (this.callAgent.join((this.locator as GroupCallLocator), {\n      audioOptions,\n      videoOptions\n    }) as CallTypeOf<AgentType>);\n  }\n  public async createStreamView(remoteUserId?: string, options?: VideoStreamOptions): Promise<void | CreateVideoStreamViewResult> {\n    if (remoteUserId === undefined) {\n      return await this.handlers.onCreateLocalStreamView(options);\n    } else {\n      return await this.handlers.onCreateRemoteStreamView(remoteUserId, options);\n    }\n  }\n  public async disposeStreamView(remoteUserId?: string): Promise<void> {\n    if (remoteUserId === undefined) {\n      await this.handlers.onDisposeLocalStreamView();\n    } else {\n      await this.handlers.onDisposeRemoteStreamView(remoteUserId);\n    }\n  }\n  public async disposeScreenShareStreamView(remoteUserId: string): Promise<void> {\n    await this.handlers.onDisposeRemoteScreenShareStreamView(remoteUserId);\n  }\n  public async disposeRemoteVideoStreamView(remoteUserId: string): Promise<void> {\n    await this.handlers.onDisposeRemoteVideoStreamView(remoteUserId);\n  }\n  public async disposeLocalVideoStreamView(): Promise<void> {\n    await this.handlers.onDisposeLocalStreamView();\n  }\n  public async leaveCall(forEveryone?: boolean): Promise<void> {\n    if (this.getState().page === 'transferring') {\n      const transferCall = this.callAgent.calls.filter(call => call.id === this.getState().acceptedTransferCallState?.id)[0];\n      transferCall?.hangUp();\n    }\n    await this.handlers.onHangUp(forEveryone);\n    this.unsubscribeCallEvents();\n    this.handlers = createHandlers(this.callClient, this.callAgent, this.deviceManager, this.call, /* @conditional-compile-remove(video-background-effects) */{\n      onResolveVideoBackgroundEffectsDependency: this.onResolveVideoBackgroundEffectsDependency\n    });\n    // We set the adapter.call object to undefined immediately when a call is ended.\n    // We do not set the context.callId to undefined because it is a part of the immutable data flow loop.\n    this.call = undefined;\n    this.stopCamera();\n    this.mute();\n  }\n  public async setCamera(device: VideoDeviceInfo, options?: VideoStreamOptions): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.onSelectCamera(device, options);\n    });\n  }\n  public async setMicrophone(device: AudioDeviceInfo): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.onSelectMicrophone(device);\n    });\n  }\n  public async setSpeaker(device: AudioDeviceInfo): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.onSelectSpeaker(device);\n    });\n  }\n  public async startCamera(options?: VideoStreamOptions): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      if (!isCameraOn(this.getState())) {\n        // First kick off the effect on the local device before starting the camera in the call.\n        // This prevents the effect not being applied for a brief moment when the camera is started.\n        /* @conditional-compile-remove(video-background-effects) */\n        {\n          const selectedEffect = this.getState().selectedVideoBackgroundEffect;\n          const selectedCamera = getSelectedCameraFromAdapterState(this.getState());\n          if (selectedEffect && selectedCamera && this.onResolveVideoBackgroundEffectsDependency) {\n            const stream = new SDKLocalVideoStream(selectedCamera);\n            const effect = getBackgroundEffectFromSelectedEffect(selectedEffect, await this.onResolveVideoBackgroundEffectsDependency());\n            if (effect) {\n              await stream.feature(Features.VideoEffects).startEffects(effect);\n            } else {\n              await stream.feature(Features.VideoEffects).stopEffects();\n            }\n          }\n        }\n        await this.handlers.onToggleCamera(options);\n      }\n    });\n  }\n  public async stopCamera(): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      if (isCameraOn(this.getState())) {\n        await this.handlers.onToggleCamera();\n      }\n    });\n  }\n  public async mute(): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      this.context.setIsLocalMicrophoneEnabled(false);\n      if (_isInCall(this.call?.state) && !this.call?.isMuted) {\n        await this.handlers.onToggleMicrophone();\n      }\n    });\n  }\n  public async unmute(): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      this.context.setIsLocalMicrophoneEnabled(true);\n      if ((_isInCall(this.call?.state) || _isInLobbyOrConnecting(this.call?.state)) && this.call?.isMuted) {\n        await this.handlers.onToggleMicrophone();\n      }\n    });\n  }\n  public async startScreenShare(): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      if (!this.call?.isScreenSharingOn) {\n        await this.handlers.onToggleScreenShare();\n      }\n    });\n  }\n  public async stopScreenShare(): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      if (this.call?.isScreenSharingOn) {\n        await this.handlers.onToggleScreenShare();\n      }\n    });\n  }\n\n  /* @conditional-compile-remove(raise-hand) */\n  public async raiseHand(): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.onToggleRaiseHand();\n    });\n  }\n\n  /* @conditional-compile-remove(raise-hand) */\n  public async lowerHand(): Promise<void> {\n    return await this.asyncTeeErrorToEventEmitter(async () => {\n      await this.handlers.onToggleRaiseHand();\n    });\n  }\n  /* @conditional-compile-remove(video-background-effects) */\n  public async startVideoBackgroundEffect(videoBackgroundEffect: VideoBackgroundEffect): Promise<void> {\n    if (this.isBlurEffect(videoBackgroundEffect)) {\n      const blurConfig = (videoBackgroundEffect as BackgroundBlurConfig);\n      await this.handlers.onBlurVideoBackground(blurConfig);\n    } else if (this.isReplacementEffect(videoBackgroundEffect)) {\n      const replaceConfig = (videoBackgroundEffect as BackgroundReplacementConfig);\n      await this.handlers.onReplaceVideoBackground(replaceConfig);\n    }\n  }\n  /* @conditional-compile-remove(video-background-effects) */\n  public async stopVideoBackgroundEffects(): Promise<void> {\n    await this.handlers.onRemoveVideoBackgroundEffects();\n  }\n  /* @conditional-compile-remove(video-background-effects) */\n  public updateBackgroundPickerImages(backgroundImages: VideoBackgroundImage[]): void {\n    this.context.setBackroundPickerImages(backgroundImages);\n  }\n  /* @conditional-compile-remove(video-background-effects) */\n  public updateSelectedVideoBackgroundEffect(selectedVideoBackground: VideoBackgroundEffect): void {\n    this.context.setSelectedVideoBackgroundEffect(selectedVideoBackground);\n  }\n  public startCall(participants: string[] | (MicrosoftTeamsAppIdentifier | UnknownIdentifier)[], options?: StartCallOptions): CallTypeOf<AgentType> | undefined {\n    if (_isInCall(this.getState().call?.state ?? 'None')) {\n      throw new Error('You are already in the call.');\n    }\n    const isCameraOn = this.getState().cameraStatus === 'On';\n    const selectedCamera = getSelectedCameraFromAdapterState(this.getState());\n    /* we only configure the video options here since the Calling SDK always unmutes the participant when starting a call */\n    const startCallVideoOptions: StartCallOptions = selectedCamera ? {\n      videoOptions: isCameraOn ? {\n        localVideoStreams: [new SDKLocalVideoStream(selectedCamera)]\n      } : undefined\n    } : {};\n    const combinedCallOptions = {\n      ...startCallVideoOptions,\n      ...options\n    };\n    const idsToAdd = participants.map(participant => {\n      const backendId: CommunicationIdentifier = _toCommunicationIdentifier(participant);\n      if ('phoneNumber' in backendId) {\n        if (options?.alternateCallerId === undefined) {\n          throw new Error('Unable to start call, PSTN user present with no alternateCallerId.');\n        }\n      }\n      return backendId;\n    });\n\n    /* @conditional-compile-remove(calling-sounds) */\n    this.context.setTargetCallee((idsToAdd as (MicrosoftTeamsAppIdentifier | UnknownIdentifier)[]));\n    const call = (this.handlers.onStartCall(idsToAdd, combinedCallOptions) as CallTypeOf<AgentType>);\n    if (!call) {\n      throw new Error('Unable to start call.');\n    }\n    this.processNewCall(call);\n    return call;\n  }\n  private processNewCall(call: CallCommon): void {\n    this.call = call;\n    this.context.setCurrentCallId(call.id);\n\n    // Resync state after callId is set\n    this.context.updateClientState(this.callClient.getState());\n    this.handlers = createHandlers(this.callClient, this.callAgent, this.deviceManager, this.call, /* @conditional-compile-remove(video-background-effects) */{\n      onResolveVideoBackgroundEffectsDependency: this.onResolveVideoBackgroundEffectsDependency\n    });\n    this.subscribeCallEvents();\n  }\n  /* @conditional-compile-remove(video-background-effects) */\n  private isBlurEffect(effect: VideoBackgroundEffect): effect is VideoBackgroundBlurEffect {\n    return effect.effectName === 'blur';\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  private isReplacementEffect(effect: VideoBackgroundEffect): effect is VideoBackgroundReplacementEffect {\n    return effect.effectName === 'replacement';\n  }\n  public async removeParticipant(userId: string): Promise<void> {\n    let participant = userId;\n    this.handlers.onRemoveParticipant(participant);\n  }\n  public async sendDtmfTone(dtmfTone: DtmfTone): Promise<void> {\n    this.handlers.onSendDtmfTone(dtmfTone);\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async startCaptions(options?: StartCaptionsOptions): Promise<void> {\n    this.handlers.onStartCaptions(options);\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async stopCaptions(): Promise<void> {\n    this.handlers.onStopCaptions();\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async setCaptionLanguage(language: string): Promise<void> {\n    this.handlers.onSetCaptionLanguage(language);\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async setSpokenLanguage(language: string): Promise<void> {\n    this.handlers.onSetSpokenLanguage(language);\n  }\n  public getState(): CallAdapterState {\n    return this.context.getState();\n  }\n  public onStateChange(handler: (state: CallAdapterState) => void): void {\n    this.context.onStateChange(handler);\n  }\n  public offStateChange(handler: (state: CallAdapterState) => void): void {\n    this.context.offStateChange(handler);\n  }\n  on(event: 'participantsJoined', listener: ParticipantsJoinedListener): void;\n  on(event: 'participantsLeft', listener: ParticipantsLeftListener): void;\n  on(event: 'isMutedChanged', listener: IsMutedChangedListener): void;\n  on(event: 'callIdChanged', listener: CallIdChangedListener): void;\n  on(event: 'isLocalScreenSharingActiveChanged', listener: IsLocalScreenSharingActiveChangedListener): void;\n  on(event: 'displayNameChanged', listener: DisplayNameChangedListener): void;\n  on(event: 'isSpeakingChanged', listener: IsSpeakingChangedListener): void;\n  on(event: 'callEnded', listener: CallEndedListener): void;\n  on(event: 'diagnosticChanged', listener: DiagnosticChangedEventListner): void;\n  on(event: 'selectedMicrophoneChanged', listener: PropertyChangedEvent): void;\n  on(event: 'selectedSpeakerChanged', listener: PropertyChangedEvent): void;\n  on(event: 'error', errorHandler: (e: AdapterError) => void): void;\n  /* @conditional-compile-remove(close-captions) */\n  on(event: 'captionsReceived', listener: CaptionsReceivedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  on(event: 'isCaptionsActiveChanged', listener: IsCaptionsActiveChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  on(event: 'isCaptionLanguageChanged', listener: IsCaptionLanguageChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  on(event: 'isSpokenLanguageChanged', listener: IsSpokenLanguageChangedListener): void;\n  /* @conditional-compile-remove(call-transfer) */\n  on(event: 'transferAccepted', listener: TransferAcceptedListener): void;\n  /* @conditional-compile-remove(capabilities) */\n  on(event: 'capabilitiesChanged', listener: CapabilitiesChangedListener): void;\n  /* @conditional-compile-remove(capabilities) */\n  on(event: 'roleChanged', listener: PropertyChangedEvent): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public on(event: string, listener: (e: any) => void): void {\n    this.emitter.on(event, listener);\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  private subscribeToCaptionEvents(): void {\n    if (this.call && this.call.state === 'Connected' && this.context.getState().isTeamsCall) {\n      const captionsFeature = (this.call?.feature(Features.Captions).captions as TeamsCaptions);\n      captionsFeature.on('CaptionsReceived', this.captionsReceived.bind(this));\n      captionsFeature.on('CaptionsActiveChanged', this.isCaptionsActiveChanged.bind(this));\n      captionsFeature.on('CaptionLanguageChanged', this.isCaptionLanguageChanged.bind(this));\n      captionsFeature.on('SpokenLanguageChanged', this.isSpokenLanguageChanged.bind(this));\n    }\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  private unsubscribeFromCaptionEvents(): void {\n    if (this.call && this.call.state === 'Connected' && this.context.getState().isTeamsCall) {\n      const captionsFeature = (this.call?.feature(Features.Captions).captions as TeamsCaptions);\n      captionsFeature.off('CaptionsReceived', this.captionsReceived.bind(this));\n      captionsFeature.off('CaptionsActiveChanged', this.isCaptionsActiveChanged.bind(this));\n      captionsFeature.off('CaptionLanguageChanged', this.isCaptionLanguageChanged.bind(this));\n      captionsFeature.off('SpokenLanguageChanged', this.isSpokenLanguageChanged.bind(this));\n      this.call?.off('stateChanged', this.subscribeToCaptionEvents.bind(this));\n    }\n  }\n  private subscribeCallEvents(): void {\n    /* @conditional-compile-remove(calling-sounds) */\n    if (this.call) {\n      this.callingSoundSubscriber = new CallingSoundSubscriber(this.call, this.getState().targetCallees, this.getState().sounds);\n    }\n    this.call?.on('remoteParticipantsUpdated', this.onRemoteParticipantsUpdated.bind(this));\n    this.call?.on('isMutedChanged', this.isMyMutedChanged.bind(this));\n    this.call?.on('isScreenSharingOnChanged', this.isScreenSharingOnChanged.bind(this));\n    this.call?.on('idChanged', this.callIdChanged.bind(this));\n    /* @conditional-compile-remove(close-captions) */\n    this.call?.on('stateChanged', this.subscribeToCaptionEvents.bind(this));\n    /* @conditional-compile-remove(rooms) */\n    this.call?.on('roleChanged', this.roleChanged.bind(this));\n    /* @conditional-compile-remove(call-transfer) */\n    this.call?.feature(Features.Transfer).on('transferAccepted', this.transferAccepted.bind(this));\n    /* @conditional-compile-remove(capabilities) */\n    this.call?.feature(Features.Capabilities).on('capabilitiesChanged', this.capabilitiesChanged.bind(this));\n  }\n  private unsubscribeCallEvents(): void {\n    for (const subscriber of this.participantSubscribers.values()) {\n      subscriber.unsubscribeAll();\n    }\n    this.participantSubscribers.clear();\n    this.call?.off('remoteParticipantsUpdated', this.onRemoteParticipantsUpdated.bind(this));\n    this.call?.off('isMutedChanged', this.isMyMutedChanged.bind(this));\n    this.call?.off('isScreenSharingOnChanged', this.isScreenSharingOnChanged.bind(this));\n    this.call?.off('idChanged', this.callIdChanged.bind(this));\n    /* @conditional-compile-remove(rooms) */\n    this.call?.off('roleChanged', this.roleChanged.bind(this));\n\n    /* @conditional-compile-remove(close-captions) */\n    this.unsubscribeFromCaptionEvents();\n    /* @conditional-compile-remove(calling-sounds) */\n    if (this.callingSoundSubscriber) {\n      this.callingSoundSubscriber.unsubscribeAll();\n    }\n  }\n  private isMyMutedChanged = (): void => {\n    this.emitter.emit('isMutedChanged', {\n      participantId: this.getState().userId,\n      isMuted: this.call?.isMuted\n    });\n  };\n  private onRemoteParticipantsUpdated({\n    added,\n    removed\n  }: {\n    added: RemoteParticipant[];\n    removed: RemoteParticipant[];\n  }): void {\n    if (added && added.length > 0) {\n      this.emitter.emit('participantsJoined', {\n        joined: added\n      });\n    }\n    if (removed && removed.length > 0) {\n      this.emitter.emit('participantsLeft', {\n        removed: removed\n      });\n    }\n    added.forEach(participant => {\n      this.participantSubscribers.set(toFlatCommunicationIdentifier(participant.identifier), new ParticipantSubscriber(participant, this.emitter));\n    });\n    removed.forEach(participant => {\n      const subscriber = this.participantSubscribers.get(toFlatCommunicationIdentifier(participant.identifier));\n      subscriber && subscriber.unsubscribeAll();\n      this.participantSubscribers.delete(toFlatCommunicationIdentifier(participant.identifier));\n    });\n  }\n  private isScreenSharingOnChanged(): void {\n    this.emitter.emit('isLocalScreenSharingActiveChanged', {\n      isScreenSharingOn: this.call?.isScreenSharingOn\n    });\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  private captionsReceived(captionsInfo: TeamsCaptionsInfo): void {\n    this.emitter.emit('captionsReceived', {\n      captionsInfo\n    });\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  private isCaptionsActiveChanged(): void {\n    const captionsFeature = (this.call?.feature(Features.Captions).captions as TeamsCaptions);\n    this.emitter.emit('isCaptionsActiveChanged', {\n      isActive: captionsFeature.isCaptionsFeatureActive\n    });\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  private isSpokenLanguageChanged(): void {\n    const captionsFeature = (this.call?.feature(Features.Captions).captions as TeamsCaptions);\n    this.emitter.emit('isSpokenLanguageChanged', {\n      activeSpokenLanguage: captionsFeature.activeSpokenLanguage\n    });\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  private isCaptionLanguageChanged(): void {\n    const captionsFeature = (this.call?.feature(Features.Captions).captions as TeamsCaptions);\n    this.emitter.emit('isCaptionLanguageChanged', {\n      activeCaptionLanguage: captionsFeature.activeCaptionLanguage\n    });\n  }\n\n  /* @conditional-compile-remove(call-transfer) */\n  private transferAccepted(args: TransferEventArgs): void {\n    this.emitter.emit('transferAccepted', args);\n  }\n\n  /* @conditional-compile-remove(capabilities) */\n  private capabilitiesChanged(data: CapabilitiesChangeInfo): void {\n    if (data.newValue.turnVideoOn?.isPresent === false) {\n      // Only stop camera when the call state is not on hold. The Calling SDK does not allow us to stop camera when\n      // the call state is on hold.\n      if (this.call?.state !== 'LocalHold' && this.call?.state !== 'RemoteHold') {\n        this.stopCamera();\n      }\n      this.disposeLocalVideoStreamView();\n    }\n    if (data.newValue.unmuteMic?.isPresent === false) {\n      this.mute();\n    }\n    if (data.newValue.shareScreen?.isPresent === false) {\n      this.stopScreenShare();\n    }\n    this.emitter.emit('capabilitiesChanged', data);\n  }\n\n  /* @conditional-compile-remove(rooms) */\n  private roleChanged(): void {\n    if (this.call?.role === 'Consumer') {\n      this.call?.feature(Features.RaiseHand).lowerHand();\n    }\n    this.emitter.emit('roleChanged');\n  }\n  private callIdChanged(): void {\n    this.call?.id && this.emitter.emit('callIdChanged', {\n      callId: this.call.id\n    });\n  }\n  private resetDiagnosticsForwarder(newCall?: CallCommon): void {\n    if (this.diagnosticsForwarder) {\n      this.diagnosticsForwarder.unsubscribe();\n    }\n    if (newCall) {\n      this.diagnosticsForwarder = new DiagnosticsForwarder(this.emitter, newCall);\n    }\n  }\n  off(event: 'participantsJoined', listener: ParticipantsJoinedListener): void;\n  off(event: 'participantsLeft', listener: ParticipantsLeftListener): void;\n  off(event: 'isMutedChanged', listener: IsMutedChangedListener): void;\n  off(event: 'callIdChanged', listener: CallIdChangedListener): void;\n  off(event: 'isLocalScreenSharingActiveChanged', listener: IsLocalScreenSharingActiveChangedListener): void;\n  off(event: 'displayNameChanged', listener: DisplayNameChangedListener): void;\n  off(event: 'isSpeakingChanged', listener: IsSpeakingChangedListener): void;\n  off(event: 'callEnded', listener: CallEndedListener): void;\n  off(event: 'diagnosticChanged', listener: DiagnosticChangedEventListner): void;\n  off(event: 'selectedMicrophoneChanged', listener: PropertyChangedEvent): void;\n  off(event: 'selectedSpeakerChanged', listener: PropertyChangedEvent): void;\n  off(event: 'error', errorHandler: (e: AdapterError) => void): void;\n  /* @conditional-compile-remove(close-captions) */\n  off(event: 'captionsReceived', listener: CaptionsReceivedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  off(event: 'isCaptionsActiveChanged', listener: IsCaptionsActiveChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  off(event: 'isCaptionLanguageChanged', listener: IsCaptionLanguageChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  off(event: 'isSpokenLanguageChanged', listener: IsSpokenLanguageChangedListener): void;\n  /* @conditional-compile-remove(call-transfer) */\n  off(event: 'transferAccepted', listener: TransferAcceptedListener): void;\n  /* @conditional-compile-remove(capabilities) */\n  off(event: 'capabilitiesChanged', listener: CapabilitiesChangedListener): void;\n  /* @conditional-compile-remove(rooms) */\n  off(event: 'roleChanged', listener: PropertyChangedEvent): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public off(event: string, listener: (e: any) => void): void {\n    this.emitter.off(event, listener);\n  }\n  private async asyncTeeErrorToEventEmitter<T>(f: () => Promise<T>): Promise<T> {\n    try {\n      return await f();\n    } catch (error) {\n      if (isCallError((error as Error))) {\n        this.emitter.emit('error', (error as AdapterError));\n      }\n      throw error;\n    }\n  }\n  private teeErrorToEventEmitter<T>(f: () => T): T {\n    try {\n      return f();\n    } catch (error) {\n      if (isCallError((error as Error))) {\n        this.emitter.emit('error', (error as AdapterError));\n      }\n      throw error;\n    }\n  }\n}\n/**\n * Locator used by {@link createAzureCommunicationCallAdapter} to locate the call to join\n *\n * @public\n */\nexport type CallAdapterLocator = TeamsMeetingLinkLocator | GroupCallLocator | /* @conditional-compile-remove(rooms) */RoomCallLocator;\n\n/**\n * Common optional parameters to create {@link AzureCommunicationCallAdapter} or {@link TeamsCallAdapter}\n *\n * @public\n */\nexport type CommonCallAdapterOptions = {\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Default set of background images for background image picker.\n   */\n  videoBackgroundOptions?: {\n    videoBackgroundImages?: VideoBackgroundImage[];\n    onResolveDependency?: () => Promise<VideoBackgroundEffectsDependency>;\n  };\n  /* @conditional-compile-remove(calling-sounds) */\n  /**\n   * Sounds to use for calling events\n   */\n  callingSounds?: CallingSounds;\n};\n\n/**\n * Optional parameters to create {@link AzureCommunicationCallAdapter}\n *\n * @public\n */\nexport type AzureCommunicationCallAdapterOptions = CommonCallAdapterOptions;\n\n/**\n * Arguments for creating the Azure Communication Services implementation of {@link CallAdapter}.\n *\n * Note: `displayName` can be a maximum of 256 characters.\n *\n * @public\n */\nexport type AzureCommunicationCallAdapterArgs = {\n  userId: CommunicationUserIdentifier;\n  displayName: string;\n  credential: CommunicationTokenCredential;\n  locator: CallAdapterLocator;\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Optional parameters for the {@link AzureCommunicationCallAdapter} created\n   */\n  options?: AzureCommunicationCallAdapterOptions;\n};\n\n/**\n * Arguments for creating the Azure Communication Services implementation of {@link CallAdapter}.\n *\n * These arguments are used to create an outbound call scenarios.\n *\n * Note: `displayName` can be a maximum of 256 characters.\n *\n * @public\n */\nexport type AzureCommunicationOutboundCallAdapterArgs = {\n  userId: CommunicationUserIdentifier;\n  displayName: string;\n  credential: CommunicationTokenCredential;\n  targetCallees: StartCallIdentifier[];\n  /* @conditional-compile-remove(video-background-effects) */\n  /**\n   * Optional parameters for the {@link AzureCommunicationCallAdapter} created\n   */\n  options?: AzureCommunicationCallAdapterOptions;\n};\n\n/**\n * Optional parameters to create {@link TeamsCallAdapter}\n *\n * @public\n */\nexport type TeamsAdapterOptions = CommonCallAdapterOptions;\n\n/**\n * Arguments for creating the Azure Communication Services implementation of {@link TeamsCallAdapter}.\n *\n * @beta\n */\nexport type TeamsCallAdapterArgs = {\n  userId: MicrosoftTeamsUserIdentifier;\n  credential: CommunicationTokenCredential;\n  locator: TeamsMeetingLinkLocator;\n  /**\n   * Optional parameters for the {@link TeamsCallAdapter} created\n   */\n  options?: TeamsAdapterOptions;\n};\n\n/**\n * Create a {@link CallAdapter} backed by Azure Communication Services.\n *\n * This is the default implementation of {@link CallAdapter} provided by this library.\n *\n * Note: `displayName` can be a maximum of 256 characters.\n *\n * @public\n */\nexport async function createAzureCommunicationCallAdapter(args: AzureCommunicationCallAdapterArgs): Promise<CallAdapter>;\n/**\n * Create a {@link CallAdapter} backed by Azure Communication Services.\n *\n * This is the default implementation of {@link CallAdapter} provided by this library.\n *\n * Note: `displayName` can be a maximum of 256 characters.\n *\n * @public\n */\nexport async function createAzureCommunicationCallAdapter(args: AzureCommunicationOutboundCallAdapterArgs): Promise<CallAdapter>;\n/**\n * @public\n */\n/**\n * Create a {@link CallAdapter} backed by Azure Communication Services.\n *\n * This is the default implementation of {@link CallAdapter} provided by this library.\n *\n * Note: `displayName` can be a maximum of 256 characters.\n *\n * @public\n */\nexport async function createAzureCommunicationCallAdapter(args: AzureCommunicationCallAdapterArgs | AzureCommunicationOutboundCallAdapterArgs): Promise<CallAdapter> {\n  if (isMicrosoftTeamsUserIdentifier(args.userId)) {\n    throw new Error('Microsoft Teams user identifier is not supported by AzureCommunicationCallAdapter. Instead use TeamsCallAdapter.');\n  }\n  return _createAzureCommunicationCallAdapterInner({\n    userId: args.userId,\n    displayName: args.displayName,\n    credential: args.credential,\n    locator: (args as AzureCommunicationCallAdapterArgs).locator,\n    targetCallees: (args as AzureCommunicationOutboundCallAdapterArgs).targetCallees,\n    /* @conditional-compile-remove(video-background-effects) */\n    options: args.options\n  });\n}\n\n/**\n * This inner function is used to allow injection of TelemetryImplementationHint without changing the public API.\n *\n * @internal\n */\nexport const _createAzureCommunicationCallAdapterInner = async ({\n  userId,\n  displayName,\n  credential,\n  locator,\n  targetCallees,\n  /* @conditional-compile-remove(video-background-effects) */options,\n  telemetryImplementationHint = 'Call'\n}: {\n  userId: CommunicationUserIdentifier;\n  displayName: string;\n  credential: CommunicationTokenCredential;\n  locator: CallAdapterLocator;\n  targetCallees?: StartCallIdentifier[];\n  /* @conditional-compile-remove(video-background-effects) */options?: AzureCommunicationCallAdapterOptions;\n  telemetryImplementationHint?: _TelemetryImplementationHint;\n}): Promise<CallAdapter> => {\n  if (!_isValidIdentifier(userId)) {\n    throw new Error('Invalid identifier. Please provide valid identifier object.');\n  }\n  const callClient = _createStatefulCallClientInner({\n    userId\n  }, undefined, telemetryImplementationHint);\n  const callAgent = await callClient.createCallAgent(credential, {\n    displayName\n  });\n  let adapter;\n  if (locator) {\n    adapter = createAzureCommunicationCallAdapterFromClient(callClient, callAgent, locator, /* @conditional-compile-remove(video-background-effects) */options);\n  } else {\n    adapter = createAzureCommunicationCallAdapterFromClient(callClient, callAgent, (targetCallees as StartCallIdentifier[]), /* @conditional-compile-remove(video-background-effects) */options);\n  }\n  return adapter;\n};\ntype PartialArgsType<Adapter> = Adapter extends CallAdapter ? Partial<AzureCommunicationCallAdapterArgs> : Partial<TeamsCallAdapterArgs>;\ntype PartialArgsOutboundType<Adapter> = Adapter extends CallAdapter ? Partial<AzureCommunicationOutboundCallAdapterArgs> : Partial<TeamsCallAdapterArgs>;\ntype AdapterOf<AdapterKind extends 'AzureCommunication' | 'Teams'> = AdapterKind extends 'AzureCommunication' ? CallAdapter : never;\n\n/**\n * @private\n */\nfunction useAzureCommunicationCallAdapterGeneric<AdapterKind extends 'AzureCommunication' | 'Teams', Adapter extends AdapterOf<AdapterKind>>(args: PartialArgsType<Adapter>, adapterKind: AdapterKind, afterCreate?: (adapter: Adapter) => Promise<Adapter>, beforeDispose?: (adapter: Adapter) => Promise<void>): Adapter | undefined;\n/**\n * @private\n */\nfunction useAzureCommunicationCallAdapterGeneric<AdapterKind extends 'AzureCommunication' | 'Teams', Adapter extends AdapterOf<AdapterKind>>(args: PartialArgsOutboundType<Adapter>, adapterKind: AdapterKind, afterCreate?: (adapter: Adapter) => Promise<Adapter>, beforeDispose?: (adapter: Adapter) => Promise<void>): Adapter | undefined;\n/**\n * @private\n */\nfunction useAzureCommunicationCallAdapterGeneric<AdapterKind extends 'AzureCommunication' | 'Teams', Adapter extends AdapterOf<AdapterKind>>(args: PartialArgsType<Adapter> | PartialArgsOutboundType<Adapter>, adapterKind: AdapterKind = ('AzureCommunication' as AdapterKind), afterCreate?: (adapter: Adapter) => Promise<Adapter>, beforeDispose?: (adapter: Adapter) => Promise<void>): Adapter | undefined {\n  const {\n    credential,\n    userId\n  } = args;\n  const locator = 'locator' in args ? args.locator : undefined;\n  const targetCallees = 'targetCallees' in args ? args.targetCallees : undefined;\n  const displayName = 'displayName' in args ? args.displayName : undefined;\n  /* @conditional-compile-remove(video-background-effects) */\n  const options = 'options' in args ? args.options : undefined;\n\n  // State update needed to rerender the parent component when a new adapter is created.\n  const [adapter, setAdapter] = useState<Adapter | undefined>(undefined);\n  // Ref needed for cleanup to access the old adapter created asynchronously.\n  const adapterRef = useRef<Adapter | undefined>(undefined);\n  const creatingAdapterRef = useRef<boolean>(false);\n  const afterCreateRef = useRef<((adapter: Adapter) => Promise<Adapter>) | undefined>(undefined);\n  const beforeDisposeRef = useRef<((adapter: Adapter) => Promise<void>) | undefined>(undefined);\n  // These refs are updated on *each* render, so that the latest values\n  // are used in the `useEffect` closures below.\n  // Using a Ref ensures that new values for the callbacks do not trigger the\n  // useEffect blocks, and a new adapter creation / distruction is not triggered.\n  afterCreateRef.current = afterCreate;\n  beforeDisposeRef.current = beforeDispose;\n  useEffect(() => {\n    if (!credential || !locator && !targetCallees || !userId) {\n      return;\n    }\n    if (adapterKind === 'AzureCommunication' && !displayName) {\n      return;\n    }\n    (async () => {\n      if (adapterRef.current) {\n        // Dispose the old adapter when a new one is created.\n        //\n        // This clean up function uses `adapterRef` because `adapter` can not be added to the dependency array of\n        // this `useEffect` -- we do not want to trigger a new adapter creation because of the first adapter\n        // creation.\n        if (beforeDisposeRef.current) {\n          await beforeDisposeRef.current(adapterRef.current);\n        }\n        adapterRef.current.dispose();\n        adapterRef.current = undefined;\n      }\n      let newAdapter: Adapter | undefined = undefined;\n      if (adapterKind === 'AzureCommunication') {\n        // This is just the type check to ensure that displayName is defined.\n        if (!displayName) {\n          throw new Error('Unreachable code, displayName already checked above.');\n        }\n        if (creatingAdapterRef.current) {\n          console.warn('Adapter is already being created, please see storybook for more information: https://azure.github.io/communication-ui-library/?path=/story/troubleshooting--page');\n          return;\n        }\n        creatingAdapterRef.current = true;\n        if (locator) {\n          newAdapter = (await createAzureCommunicationCallAdapter({\n            credential,\n            displayName: displayName,\n            locator,\n            userId: (userId as CommunicationUserIdentifier),\n            /* @conditional-compile-remove(video-background-effects) */options\n          }) as Adapter);\n        } else if (targetCallees) {\n          newAdapter = (await createAzureCommunicationCallAdapter({\n            credential,\n            displayName: displayName,\n            targetCallees,\n            userId: (userId as CommunicationUserIdentifier),\n            /* @conditional-compile-remove(video-background-effects) */options\n          }) as Adapter);\n        }\n      } else if (adapterKind === 'Teams') {\n        if (creatingAdapterRef.current) {\n          console.warn('Adapter is already being created, skipping creation.');\n          return;\n        }\n        creatingAdapterRef.current = true;\n      } else {\n        throw new Error('Unreachable code, unknown adapterKind');\n      }\n      if (!newAdapter) {\n        throw Error('Unreachable code! Get undefined adapter');\n      }\n      if (afterCreateRef.current) {\n        newAdapter = await afterCreateRef.current(newAdapter);\n      }\n      adapterRef.current = newAdapter;\n      creatingAdapterRef.current = false;\n      setAdapter(newAdapter);\n    })();\n  },\n  // Explicitly list all arguments so that caller doesn't have to memoize the `args` object.\n  [adapterRef, afterCreateRef, beforeDisposeRef, adapterKind, credential, locator, userId, displayName, options, targetCallees]);\n\n  // Dispose any existing adapter when the component unmounts.\n  useEffect(() => {\n    return () => {\n      (async () => {\n        if (adapterRef.current) {\n          if (beforeDisposeRef.current) {\n            await beforeDisposeRef.current(adapterRef.current);\n          }\n          adapterRef.current.dispose();\n          adapterRef.current = undefined;\n        }\n      })();\n    };\n  }, []);\n  return adapter;\n}\n\n/**\n * A custom React hook to simplify the creation of {@link CallAdapter}.\n *\n * Similar to {@link createAzureCommunicationCallAdapter}, but takes care of asynchronous\n * creation of the adapter internally.\n *\n * Allows arguments to be undefined so that you can respect the rule-of-hooks and pass in arguments\n * as they are created. The adapter is only created when all arguments are defined.\n *\n * Note that you must memoize the arguments to avoid recreating adapter on each render.\n * See storybook for typical usage examples.\n *\n * @public\n */\nexport const useAzureCommunicationCallAdapter = (args: Partial<AzureCommunicationCallAdapterArgs | AzureCommunicationOutboundCallAdapterArgs>, afterCreate?: (adapter: CallAdapter) => Promise<CallAdapter>, beforeDispose?: (adapter: CallAdapter) => Promise<void>): CallAdapter | undefined => {\n  return useAzureCommunicationCallAdapterGeneric(args, 'AzureCommunication', afterCreate, beforeDispose);\n};\n/**\n * Create a {@link CallAdapter} using the provided {@link StatefulCallClient}.\n *\n * Useful if you want to keep a reference to {@link StatefulCallClient}.\n * Consider using {@link createAzureCommunicationCallAdapter} for a simpler API.\n *\n * @public\n */\nexport async function createAzureCommunicationCallAdapterFromClient(callClient: StatefulCallClient, callAgent: CallAgent, targetCallees: StartCallIdentifier[], /* @conditional-compile-remove(video-background-effects) */options?: AzureCommunicationCallAdapterOptions): Promise<CallAdapter>;\n/**\n * Create a {@link CallAdapter} using the provided {@link StatefulCallClient}.\n *\n * Useful if you want to keep a reference to {@link StatefulCallClient}.\n * Consider using {@link createAzureCommunicationCallAdapter} for a simpler API.\n *\n * @public\n */\nexport async function createAzureCommunicationCallAdapterFromClient(callClient: StatefulCallClient, callAgent: CallAgent, locator: CallAdapterLocator, /* @conditional-compile-remove(video-background-effects) */options?: AzureCommunicationCallAdapterOptions): Promise<CallAdapter>;\n/**\n * Create a {@link CallAdapter} using the provided {@link StatefulCallClient}.\n *\n * Useful if you want to keep a reference to {@link StatefulCallClient}.\n * Consider using {@link createAzureCommunicationCallAdapter} for a simpler API.\n *\n * @public\n */\nexport async function createAzureCommunicationCallAdapterFromClient(callClient: StatefulCallClient, callAgent: CallAgent, locatorOrtargetCallees: CallAdapterLocator | StartCallIdentifier[], /* @conditional-compile-remove(video-background-effects) */options?: AzureCommunicationCallAdapterOptions): Promise<CallAdapter> {\n  const deviceManager = (await callClient.getDeviceManager() as StatefulDeviceManager);\n  await Promise.all([deviceManager.getCameras(), deviceManager.getMicrophones()]);\n  if (deviceManager.isSpeakerSelectionAvailable) {\n    await deviceManager.getSpeakers();\n  }\n  if (getLocatorOrTargetCallees(locatorOrtargetCallees)) {\n    return new AzureCommunicationCallAdapter(callClient, (locatorOrtargetCallees as StartCallIdentifier[]), callAgent, deviceManager, /* @conditional-compile-remove(video-background-effects) */options);\n  } else {\n    return new AzureCommunicationCallAdapter(callClient, (locatorOrtargetCallees as CallAdapterLocator), callAgent, deviceManager, /* @conditional-compile-remove(video-background-effects) */options);\n  }\n}\nconst isCallError = (e: Error): e is CallError => {\n  return 'target' in e && 'innerError' in e;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles } from '@fluentui/react';\nimport { compositeMinWidthRem } from '../../common/styles/Composite.styles';\n\n/**\n * @private\n */\nexport const compositeOuterContainerStyles: IStackStyles = {\n  root: {\n    width: '100%',\n    // Create a new stacking context so that DrawerMenu can be positioned absolutely.\n    position: 'relative'\n  }\n};\n\n/** @private */\nexport const callCompositeContainerStyles = (isMobile: boolean): IStackStyles => ({\n  root: {\n    // Start a new stacking context so that any `position:absolute` elements\n    // inside the call composite do not compete with its siblings.\n    position: 'relative',\n    width: '100%',\n    minWidth: isMobile ? 'unset' : `${compositeMinWidthRem}rem`\n  }\n});\n\n/** @private */\nexport const controlBarContainerStyles: IStackStyles = {\n  root: {\n    // Start a new stacking context so that any `position:absolute` elements\n    // inside the control bar do not compete with its siblings.\n    position: 'relative'\n  }\n};\n\n/**\n * Chat button might have a optional notification icon attached that must be positioned absolute inside the chat button.\n * this requires the parent to have `position relative`\n * @private\n */\nexport const ChatButtonContainerStyles: IStackStyles = {\n  root: {\n    position: 'relative'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallWithChatAdapter } from './CallWithChatAdapter';\nimport { CallAdapter, CallAdapterState } from '../../CallComposite';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundImage, VideoBackgroundEffect } from '../../CallComposite';\nimport { CreateVideoStreamViewResult, VideoStreamOptions } from '@internal/react-components';\nimport { AudioDeviceInfo, VideoDeviceInfo, Call, PermissionConstraints, StartCallOptions } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { StartCaptionsOptions } from '@azure/communication-calling';\nimport { DtmfTone } from '@azure/communication-calling';\nimport { CallWithChatAdapterState } from '../state/CallWithChatAdapterState';\nimport { _toCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { JoinCallOptions, StartCallIdentifier } from '../../CallComposite/adapter/CallAdapter';\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\n/**\n * Facade around the CallWithChatAdapter to satisfy the call adapter interface.\n *\n * @private\n */\nexport class CallWithChatBackedCallAdapter implements CallAdapter {\n  private callWithChatAdapter: CallWithChatAdapter;\n\n  // For onStateChange we must convert CallWithChat state to chat state. This involves creating a new handler to be passed into the onStateChange.\n  // In order to unsubscribe the handler when offStateChange is called we must have a mapping of the original handler to the newly created handler.\n  private eventStore: Map<(state: CallAdapterState) => void, (state: CallWithChatAdapterState) => void> = new Map();\n  constructor(callWithChatAdapter: CallWithChatAdapter) {\n    this.callWithChatAdapter = callWithChatAdapter;\n  }\n  public on = (event: any, listener: any): void => {\n    switch (event) {\n      case 'error':\n        return this.callWithChatAdapter.on('callError', listener);\n      case 'participantsJoined':\n        return this.callWithChatAdapter.on('callParticipantsJoined', listener);\n      case 'participantsLeft':\n        return this.callWithChatAdapter.on('callParticipantsLeft', listener);\n      default:\n        return this.callWithChatAdapter.on(event, listener);\n    }\n  };\n  public off = (event: any, listener: any): void => {\n    switch (event) {\n      case 'error':\n        return this.callWithChatAdapter.off('callError', listener);\n      case 'participantsJoined':\n        return this.callWithChatAdapter.off('callParticipantsJoined', listener);\n      case 'participantsLeft':\n        return this.callWithChatAdapter.off('callParticipantsLeft', listener);\n      default:\n        return this.callWithChatAdapter.off(event, listener);\n    }\n  };\n  public onStateChange = (handler: (state: CallAdapterState) => void): void => {\n    const convertedHandler = (state: CallWithChatAdapterState): void => {\n      handler(callAdapterStateFromCallWithChatAdapterState(state));\n    };\n    this.callWithChatAdapter.onStateChange(convertedHandler);\n    this.eventStore.set(handler, convertedHandler);\n  };\n  public offStateChange = (handler: (state: CallAdapterState) => void): void => {\n    const convertedHandler = this.eventStore.get(handler);\n    convertedHandler && this.callWithChatAdapter.offStateChange(convertedHandler);\n  };\n  public getState = (): CallAdapterState => callAdapterStateFromCallWithChatAdapterState(this.callWithChatAdapter.getState());\n  public dispose = (): void => this.callWithChatAdapter.dispose();\n  public joinCall = (options?: boolean | JoinCallOptions): Call | undefined => {\n    if (typeof options === 'boolean') {\n      return this.callWithChatAdapter.joinCall(options);\n    } else {\n      return this.callWithChatAdapter.joinCall(options);\n    }\n  };\n  public leaveCall = async (forEveryone?: boolean): Promise<void> => await this.callWithChatAdapter.leaveCall(forEveryone);\n  public startCall = (participants: (string | StartCallIdentifier)[], options: StartCallOptions): Call | undefined => {\n    if (participants.every((participant: string | StartCallIdentifier) => typeof participant === 'string')) {\n      return this.callWithChatAdapter.startCall((participants as string[]), options);\n    } else {\n      return this.callWithChatAdapter.startCall((participants as StartCallIdentifier[]), options);\n    }\n  };\n  public setCamera = async (sourceId: VideoDeviceInfo, options?: VideoStreamOptions): Promise<void> => await this.callWithChatAdapter.setCamera(sourceId, options);\n  public setMicrophone = async (sourceId: AudioDeviceInfo): Promise<void> => await this.callWithChatAdapter.setMicrophone(sourceId);\n  public setSpeaker = async (sourceId: AudioDeviceInfo): Promise<void> => await this.callWithChatAdapter.setSpeaker(sourceId);\n  public askDevicePermission = async (constraints: PermissionConstraints): Promise<void> => await this.callWithChatAdapter.askDevicePermission(constraints);\n  public queryCameras = async (): Promise<VideoDeviceInfo[]> => await this.callWithChatAdapter.queryCameras();\n  public queryMicrophones = async (): Promise<AudioDeviceInfo[]> => await this.callWithChatAdapter.queryMicrophones();\n  public querySpeakers = async (): Promise<AudioDeviceInfo[]> => await this.callWithChatAdapter.querySpeakers();\n  public startCamera = async (options?: VideoStreamOptions): Promise<void> => await this.callWithChatAdapter.startCamera(options);\n  public stopCamera = async (): Promise<void> => await this.callWithChatAdapter.stopCamera();\n  public mute = async (): Promise<void> => await this.callWithChatAdapter.mute();\n  public unmute = async (): Promise<void> => await this.callWithChatAdapter.unmute();\n  public startScreenShare = async (): Promise<void> => await this.callWithChatAdapter.startScreenShare();\n  public stopScreenShare = async (): Promise<void> => await this.callWithChatAdapter.stopScreenShare();\n  /* @conditional-compile-remove(raise-hand) */\n  public raiseHand = async (): Promise<void> => await this.callWithChatAdapter.raiseHand();\n  /* @conditional-compile-remove(raise-hand) */\n  public lowerHand = async (): Promise<void> => await this.callWithChatAdapter.lowerHand();\n  public removeParticipant = async (userId: string): Promise<void> => {\n    let participant = userId;\n    await this.callWithChatAdapter.removeParticipant(participant);\n  };\n  public createStreamView = async (remoteUserId?: string, options?: VideoStreamOptions): Promise<void | CreateVideoStreamViewResult> => await this.callWithChatAdapter.createStreamView(remoteUserId, options);\n  public disposeStreamView = async (remoteUserId?: string, options?: VideoStreamOptions): Promise<void> => await this.callWithChatAdapter.disposeStreamView(remoteUserId, options);\n  public disposeScreenShareStreamView(remoteUserId: string): Promise<void> {\n    return this.callWithChatAdapter.disposeScreenShareStreamView(remoteUserId);\n  }\n  public disposeRemoteVideoStreamView(remoteUserId: string): Promise<void> {\n    return this.callWithChatAdapter.disposeRemoteVideoStreamView(remoteUserId);\n  }\n  public disposeLocalVideoStreamView(): Promise<void> {\n    return this.callWithChatAdapter.disposeLocalVideoStreamView();\n  }\n  public sendDtmfTone = async (dtmfTone: DtmfTone): Promise<void> => {\n    await this.callWithChatAdapter.sendDtmfTone(dtmfTone);\n  };\n\n  /* @conditional-compile-remove(close-captions) */\n  public async startCaptions(options?: StartCaptionsOptions): Promise<void> {\n    this.callWithChatAdapter.startCaptions(options);\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async stopCaptions(): Promise<void> {\n    this.callWithChatAdapter.stopCaptions();\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async setCaptionLanguage(language: string): Promise<void> {\n    this.callWithChatAdapter.setCaptionLanguage(language);\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async setSpokenLanguage(language: string): Promise<void> {\n    this.callWithChatAdapter.setSpokenLanguage(language);\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  public async startVideoBackgroundEffect(videoBackgroundEffect: VideoBackgroundEffect): Promise<void> {\n    await this.callWithChatAdapter.startVideoBackgroundEffect(videoBackgroundEffect);\n  }\n  /* @conditional-compile-remove(video-background-effects) */\n  public async stopVideoBackgroundEffects(): Promise<void> {\n    await this.callWithChatAdapter.stopVideoBackgroundEffects();\n  }\n  /* @conditional-compile-remove(video-background-effects) */\n  public updateBackgroundPickerImages(backgroundImages: VideoBackgroundImage[]): void {\n    return this.callWithChatAdapter.updateBackgroundPickerImages(backgroundImages);\n  }\n  /* @conditional-compile-remove(video-background-effects) */\n  public updateSelectedVideoBackgroundEffect(selectedVideoBackground: VideoBackgroundEffect): void {\n    return this.callWithChatAdapter.updateSelectedVideoBackgroundEffect(selectedVideoBackground);\n  }\n}\nfunction callAdapterStateFromCallWithChatAdapterState(callWithChatAdapterState: CallWithChatAdapterState): CallAdapterState {\n  return {\n    isLocalPreviewMicrophoneEnabled: callWithChatAdapterState.isLocalPreviewMicrophoneEnabled,\n    page: callWithChatAdapterState.page,\n    userId: callWithChatAdapterState.userId,\n    displayName: callWithChatAdapterState.displayName,\n    call: callWithChatAdapterState.call,\n    devices: callWithChatAdapterState.devices,\n    isTeamsCall: callWithChatAdapterState.isTeamsCall,\n    /* @conditional-compile-remove(rooms) */\n    isRoomsCall: false,\n    latestErrors: callWithChatAdapterState.latestCallErrors,\n    /* @conditional-compile-remove(video-background-effects) */\n    videoBackgroundImages: callWithChatAdapterState.videoBackgroundImages,\n    /* @conditional-compile-remove(video-background-effects) */\n    onResolveVideoEffectDependency: callWithChatAdapterState.onResolveVideoEffectDependency,\n    /* @conditional-compile-remove(video-background-effects) */\n    selectedVideoBackgroundEffect: callWithChatAdapterState.selectedVideoBackgroundEffect\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallWithChatAdapter } from './CallWithChatAdapter';\nimport { ChatAdapter, ChatAdapterState } from '../../ChatComposite';\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nimport { ResourceDetails } from '../../ChatComposite';\nimport { ErrorBarStrings } from '@internal/react-components';\nimport { CallWithChatAdapterState } from '../state/CallWithChatAdapterState';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\n/**\n * Facade around the CallWithChatAdapter to satisfy the chat adapter interface.\n *\n * @private\n */\nexport class CallWithChatBackedChatAdapter implements ChatAdapter {\n  private callWithChatAdapter: CallWithChatAdapter;\n\n  // For onStateChange we must convert CallWithChat state to chat state. This involves creating a new handler to be passed into the onStateChange.\n  // In order to unsubscribe the handler when offStateChange is called we must have a mapping of the original handler to the newly created handler.\n  private eventStore: Map<(state: ChatAdapterState) => void, (state: CallWithChatAdapterState) => void> = new Map();\n  constructor(callWithChatAdapter: CallWithChatAdapter) {\n    this.callWithChatAdapter = callWithChatAdapter;\n  }\n  public fetchInitialData = async (): Promise<void> => await this.callWithChatAdapter.fetchInitialData();\n  public sendMessage = async (content: string): Promise<void> => await this.callWithChatAdapter.sendMessage(content);\n  public sendReadReceipt = async (chatMessageId: string): Promise<void> => await this.callWithChatAdapter.sendReadReceipt(chatMessageId);\n  public sendTypingIndicator = async (): Promise<void> => await this.callWithChatAdapter.sendTypingIndicator();\n  public removeParticipant = async (userId: string): Promise<void> => await this.callWithChatAdapter.removeParticipant(userId);\n  public loadPreviousChatMessages = async (messagesToLoad: number): Promise<boolean> => await this.callWithChatAdapter.loadPreviousChatMessages(messagesToLoad);\n  public dispose = (): void => this.callWithChatAdapter.dispose();\n  public onStateChange = (handler: (state: ChatAdapterState) => void): void => {\n    const convertedHandler = (state: CallWithChatAdapterState): void => {\n      handler(chatAdapterStateFromCallWithChatAdapterState(state));\n    };\n    this.callWithChatAdapter.onStateChange(convertedHandler);\n    this.eventStore.set(handler, convertedHandler);\n  };\n  public offStateChange = (handler: (state: ChatAdapterState) => void): void => {\n    const convertedHandler = this.eventStore.get(handler);\n    convertedHandler && this.callWithChatAdapter.offStateChange(convertedHandler);\n  };\n  public getState = (): ChatAdapterState => chatAdapterStateFromCallWithChatAdapterState(this.callWithChatAdapter.getState());\n\n  /* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n  public on = (event: any, listener: any): void => {\n    switch (event) {\n      case 'error':\n        return this.callWithChatAdapter.on('chatError', listener);\n      case 'participantsAdded':\n        return this.callWithChatAdapter.on('chatParticipantsAdded', listener);\n      case 'participantsRemoved':\n        return this.callWithChatAdapter.on('chatParticipantsRemoved', listener);\n      default:\n        return this.callWithChatAdapter.on(event, listener);\n    }\n  };\n  public off = (event: any, listener: any): void => {\n    switch (event) {\n      case 'error':\n        return this.callWithChatAdapter.off('chatError', listener);\n      case 'participantsAdded':\n        return this.callWithChatAdapter.off('chatParticipantsAdded', listener);\n      case 'participantsRemoved':\n        return this.callWithChatAdapter.off('chatParticipantsRemoved', listener);\n      default:\n        return this.callWithChatAdapter.off(event, listener);\n    }\n  };\n  public updateMessage = async (messageId: string, content: string, metadata?: Record<string, string>): Promise<void> => await this.callWithChatAdapter.updateMessage(messageId, content, metadata);\n  public deleteMessage = async (messageId: string): Promise<void> => await this.callWithChatAdapter.deleteMessage(messageId);\n  public clearErrors = (errorTypes: (keyof ErrorBarStrings)[]): void => {\n    throw new Error(`Method not supported in CallWithChatComposite.`);\n  };\n  public setTopic = async (topicName: string): Promise<void> => {\n    throw new Error(`Chat Topics are not supported in CallWithChatComposite.`);\n  };\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  public async downloadResourceToCache(resourceDetails: ResourceDetails): Promise<void> {\n    this.callWithChatAdapter.downloadResourceToCache(resourceDetails);\n  }\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  public removeResourceFromCache(resourceDetails: ResourceDetails): void {\n    this.callWithChatAdapter.removeResourceFromCache(resourceDetails);\n  }\n}\nfunction chatAdapterStateFromCallWithChatAdapterState(callWithChatAdapterState: CallWithChatAdapterState): ChatAdapterState {\n  if (!callWithChatAdapterState.chat) {\n    throw new Error('Chat thread state id undefined.');\n  }\n  return {\n    userId: callWithChatAdapterState.userId,\n    displayName: callWithChatAdapterState.displayName || '',\n    thread: callWithChatAdapterState.chat,\n    latestErrors: callWithChatAdapterState.latestChatErrors\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useMemo } from 'react';\nimport { ControlBarButton, ControlBarButtonProps, ControlBarButtonStyles, useTheme } from '@internal/react-components';\nimport { concatStyleSets } from '@fluentui/react';\n\n/**\n * @private\n */\nexport const ChatButton = (props: ControlBarButtonProps): JSX.Element => {\n  const strings = {\n    label: props.label,\n    ...props.strings\n  };\n  const theme = useTheme();\n  const styles: ControlBarButtonStyles = useMemo(() => concatStyleSets({\n    rootChecked: {\n      background: theme.palette.neutralLight\n    }\n  }, props.styles ?? {}), [props.styles, theme.palette.neutralLight]);\n  return <ControlBarButton {...props} labelKey={'chatButtonLabelKey'} strings={strings} onClick={props.onClick} styles={styles} />;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React from 'react';\nimport { IIconStyles, IStackStyles, ITheme, memoizeFunction, Stack, useTheme, Text } from '@fluentui/react';\n\n/**\n * @private\n */\nexport type NotificationIconProps = {\n  chatMessagesCount: number;\n  label?: string;\n};\n/**\n * @private\n */\nexport const NotificationIcon = (props: NotificationIconProps): JSX.Element => {\n  const {\n    chatMessagesCount,\n    label\n  } = props;\n  const theme = useTheme();\n  const renderNumber = (numberOfMessages: number): JSX.Element => {\n    if (numberOfMessages < 1) {\n      return <></>;\n    } else {\n      const textNumberOfMessages = numberOfMessages < 9 ? numberOfMessages : '9+';\n      return <Text role={'status'} aria-label={textNumberOfMessages + (label ?? '')} styles={notificationTextStyles(theme)}>\n          {textNumberOfMessages}\n        </Text>;\n    }\n  };\n  return <Stack data-ui-id=\"call-with-chat-composite-chat-button-unread-icon\" horizontalAlign=\"center\" verticalAlign=\"center\" styles={notificationIconContainerStyles(theme)}>\n      <Stack>{renderNumber(chatMessagesCount)}</Stack>\n    </Stack>;\n};\nconst notificationIconPaddingREM = 0.225;\nconst notificationSizeREM = 1;\nconst notificationIconContainerStyles = memoizeFunction((theme: ITheme): IIconStyles => ({\n  root: {\n    borderRadius: `${notificationSizeREM}rem`,\n    // Create a css circle. This should match the height.\n    height: `${notificationSizeREM}rem`,\n    minWidth: `${notificationSizeREM}rem`,\n    // use min-width over width as we want to extend the width of the notification icon when contents is more than one character (e.g. 9+)\n    background: theme.palette.themePrimary,\n    border: `0.0625rem solid white`,\n    // border should always be white\n    padding: `${notificationIconPaddingREM}rem`,\n    // positioning to place the badge within the button appropriately.\n    position: 'absolute',\n    top: `-${0.5 - notificationIconPaddingREM / 2}rem`,\n    left: `${0.5 + notificationIconPaddingREM / 2}rem`\n  }\n}));\nconst notificationTextStyles = memoizeFunction((theme: ITheme): IStackStyles => ({\n  root: {\n    color: 'white',\n    fontSize: theme.fonts.xSmall.fontSize\n  }\n}));","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { IStackStyles, Stack } from '@fluentui/react';\nimport { _formatString } from '@internal/acs-ui-common';\nimport { ControlBarButtonProps } from '@internal/react-components';\nimport React, { useCallback, useMemo } from 'react';\nimport { CallWithChatCompositeIcon } from '../../common/icons';\nimport { ChatButton } from './ChatButton';\nimport { useCallWithChatCompositeStrings } from '../hooks/useCallWithChatCompositeStrings';\nimport { NotificationIcon } from './NotificationIcon';\n\n/**\n * @private\n */\nexport interface ChatButtonWithUnreadMessagesBadgeProps extends ControlBarButtonProps {\n  unreadChatMessagesCount: number;\n  hideUnreadChatMessagesBadge?: boolean;\n  newMessageLabel: string;\n}\nconst filledIcon = <CallWithChatCompositeIcon iconName={'ControlBarChatButtonActive'} />;\nconst regularIcon = <CallWithChatCompositeIcon iconName={'ControlBarChatButtonInactive'} />;\n\n/**\n * @private\n */\nexport const ChatButtonWithUnreadMessagesBadge = (props: ChatButtonWithUnreadMessagesBadgeProps): JSX.Element => {\n  const {\n    newMessageLabel,\n    unreadChatMessagesCount,\n    hideUnreadChatMessagesBadge\n  } = props;\n  const baseIcon = props.showLabel ? regularIcon : filledIcon;\n  const callWithChatStrings = useCallWithChatCompositeStrings();\n  const numberOfMsgToolTip = props.strings?.tooltipOffContent && unreadChatMessagesCount > 0 ? _formatString(callWithChatStrings.chatButtonTooltipClosedWithMessageCount, {\n    unreadMessagesCount: `${unreadChatMessagesCount}`\n  }) : undefined;\n  const chatStrings = useMemo(() => ({\n    label: props.strings?.label,\n    tooltipOffContent: numberOfMsgToolTip ? numberOfMsgToolTip : props.strings?.tooltipOffContent,\n    tooltipOnContent: props.strings?.tooltipOnContent\n  }), [numberOfMsgToolTip, props.strings?.label, props.strings?.tooltipOffContent, props.strings?.tooltipOnContent]);\n  const onRenderOnIcon = useCallback(() => baseIcon, [baseIcon]);\n  const notificationOnIcon = useCallback((): JSX.Element => {\n    return <Stack styles={chatNotificationContainerStyles}>\n        {unreadChatMessagesCount > 0 && !hideUnreadChatMessagesBadge && <NotificationIcon chatMessagesCount={unreadChatMessagesCount} label={newMessageLabel} />}\n        {baseIcon}\n      </Stack>;\n  }, [unreadChatMessagesCount, newMessageLabel, baseIcon, hideUnreadChatMessagesBadge]);\n  return <ChatButton {...props} data-ui-id=\"call-with-chat-composite-chat-button\" onRenderOffIcon={notificationOnIcon} onRenderOnIcon={onRenderOnIcon} strings={chatStrings} />;\n};\nconst chatNotificationContainerStyles: IStackStyles = {\n  root: {\n    display: 'inline',\n    position: 'relative'\n  }\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { useEffect, useState } from 'react';\nimport { ChatAdapter } from '../../ChatComposite/adapter/ChatAdapter';\nimport { ChatMessage } from '@azure/communication-chat';\n\n/**\n * Used by the CallWithChatComposite to track unread messages for showing as a badge on the Chat Button.\n * @private\n */\nexport const useUnreadMessagesTracker = (chatAdapter: ChatAdapter, isChatPaneVisible: boolean): number => {\n  // Store messageIds of unread messages\n  const [unreadChatMessages, setUnreadChatMessages] = useState<Set<string>>(new Set());\n  useEffect(() => {\n    // Clear unread messages when chat pane is opened\n    if (isChatPaneVisible) {\n      setUnreadChatMessages(new Set());\n      return;\n    }\n\n    // Increment unread messages when a new message is received and the chat pane is closed\n    const incrementUnreadChatMessagesCount = (event: {\n      message: ChatMessage;\n    }): void => {\n      if (!isChatPaneVisible && validNewChatMessage(event.message)) {\n        setUnreadChatMessages(prevUnreadChatMessages => {\n          const newUnreadChatMessages = new Set(prevUnreadChatMessages);\n          newUnreadChatMessages.add(event.message.id);\n          return newUnreadChatMessages;\n        });\n      }\n    };\n\n    // Decrement unread messages when a message is deleted and the chat pane is closed\n    const decrementUnreadChatMessagesCount = (event: {\n      message: ChatMessage;\n    }): void => {\n      if (!isChatPaneVisible) {\n        setUnreadChatMessages(prevUnreadChatMessages => {\n          const newUnreadChatMessages = new Set(prevUnreadChatMessages);\n          newUnreadChatMessages.delete(event.message.id);\n          return newUnreadChatMessages;\n        });\n      }\n    };\n    chatAdapter.on('messageReceived', incrementUnreadChatMessagesCount);\n    chatAdapter.on('messageDeleted', decrementUnreadChatMessagesCount);\n    return () => {\n      chatAdapter.off('messageReceived', incrementUnreadChatMessagesCount);\n      chatAdapter.off('messageDeleted', decrementUnreadChatMessagesCount);\n    };\n  }, [chatAdapter, setUnreadChatMessages, isChatPaneVisible]);\n  return unreadChatMessages.size;\n};\n\n/**\n * Helper function to determine if the message in the event is a valid one from a user.\n * Display name is used since system messages will not have one.\n */\nconst validNewChatMessage = (message: ChatMessage): boolean => !!message.senderDisplayName && (message.type === 'text' || message.type === 'html');","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport React, { useCallback, useState, useMemo, useEffect, useRef } from 'react';\nimport { mergeStyles, PartialTheme, Stack, Theme } from '@fluentui/react';\nimport { CallCompositePage } from '../CallComposite';\nimport { CallState } from '@azure/communication-calling';\nimport { callCompositeContainerStyles, compositeOuterContainerStyles } from './styles/CallWithChatCompositeStyles';\nimport { CallWithChatAdapter } from './adapter/CallWithChatAdapter';\nimport { CallWithChatBackedCallAdapter } from './adapter/CallWithChatBackedCallAdapter';\nimport { CallWithChatBackedChatAdapter } from './adapter/CallWithChatBackedChatAdapter';\nimport { CallAdapter } from '../CallComposite';\nimport { ChatComposite, ChatAdapter } from '../ChatComposite';\nimport { BaseProvider, BaseCompositeProps } from '../common/BaseComposite';\nimport { CallWithChatCompositeIcons } from '../common/icons';\nimport { AvatarPersonaDataCallback } from '../common/AvatarPersona';\nimport { CallWithChatAdapterState } from './state/CallWithChatAdapterState';\nimport { ParticipantMenuItemsCallback, _useContainerHeight, _useContainerWidth, useTheme } from '@internal/react-components';\nimport { useId } from '@fluentui/react-hooks';\nimport { containerDivStyles } from '../common/ContainerRectProps';\nimport { useCallWithChatCompositeStrings } from './hooks/useCallWithChatCompositeStrings';\nimport { CallCompositeInner, CallCompositeOptions } from '../CallComposite/CallComposite';\nimport { RemoteVideoTileMenuOptions } from '../CallComposite/CallComposite';\n/* @conditional-compile-remove(click-to-call) */\nimport { LocalVideoTileOptions } from '../CallComposite/CallComposite';\nimport { CommonCallControlOptions } from '../common/types/CommonCallControlOptions';\nimport { ChatButtonWithUnreadMessagesBadge } from './ChatButton/ChatButtonWithUnreadMessagesBadge';\nimport { getDesktopCommonButtonStyles } from '../common/ControlBar/CommonCallControlBar';\nimport { InjectedSidePaneProps } from '../CallComposite/components/SidePane/SidePaneProvider';\nimport { isDisabled } from '../CallComposite/utils';\nimport { CustomCallControlButtonCallback, CustomCallControlButtonCallbackArgs } from '../common/ControlBar/CustomButton';\nimport { SidePaneHeader } from '../common/SidePaneHeader';\nimport { CallControlOptions } from '../CallComposite/types/CallControlOptions';\nimport { useUnreadMessagesTracker } from './ChatButton/useUnreadMessagesTracker';\nimport { VideoGalleryLayout } from '@internal/react-components';\n\n/**\n * Props required for the {@link CallWithChatComposite}\n *\n * @public\n */\nexport interface CallWithChatCompositeProps extends BaseCompositeProps<CallWithChatCompositeIcons> {\n  adapter: CallWithChatAdapter;\n  /**\n   * Fluent theme for the composite.\n   *\n   * Defaults to a light theme if undefined.\n   */\n  fluentTheme?: PartialTheme | Theme;\n  /**\n   * Optimizes the composite form factor for either desktop or mobile.\n   * @remarks `mobile` is currently only optimized for Portrait mode on mobile devices and does not support landscape.\n   * @defaultValue 'desktop'\n   */\n  formFactor?: 'desktop' | 'mobile';\n  /**\n   * URL that can be used to copy a call-with-chat invite to the Users clipboard.\n   */\n  joinInvitationURL?: string;\n  /**\n   * Flags to enable/disable or customize UI elements of the {@link CallWithChatComposite}\n   */\n  options?: CallWithChatCompositeOptions;\n}\n\n/**\n * Customization options for the control bar in calling with chat experience.\n *\n * @public\n */\nexport interface CallWithChatControlOptions extends CommonCallControlOptions {\n  /**\n   * Show or hide the chat button in the call-with-chat composite control bar.\n   * @defaultValue true\n   */\n  chatButton?: boolean;\n}\n\n/**\n * Optional features of the {@link CallWithChatComposite}.\n *\n * @public\n */\nexport type CallWithChatCompositeOptions = {\n  /**\n   * Call control options to change what buttons show on the call-with-chat composite control bar.\n   * If using the boolean values, true will cause default behavior across the whole control bar. False hides the whole control bar.\n   */\n  callControls?: boolean | CallWithChatControlOptions;\n  /**\n   * Remote participant video tile menu options\n   */\n  remoteVideoTileMenuOptions?: RemoteVideoTileMenuOptions;\n  /* @conditional-compile-remove(click-to-call) */\n  /**\n   * Options for controlling the local video tile.\n   *\n   * @remarks if 'false' the local video tile will not be rendered.\n   */\n  localVideoTile?: boolean | LocalVideoTileOptions;\n  /**\n   * Options for controlling the starting layout of the composite's video gallery\n   */\n  galleryOptions?: {\n    /**\n     * Layout for the gallery when the call starts\n     */\n    layout?: VideoGalleryLayout;\n  };\n  /* @conditional-compile-remove(custom-branding) */\n  /**\n   * Options for setting additional customizations related to personalized branding.\n   */\n  branding?: {\n    /**\n     * Logo displayed on the configuration page.\n     */\n    logo?: {\n      /**\n       * URL for the logo image.\n       *\n       * @remarks\n       * Recommended size is 80x80 pixels.\n       */\n      url: string;\n      /**\n       * Alt text for the logo image.\n       */\n      alt?: string;\n      /**\n       * The logo can be displayed as a circle.\n       *\n       * @defaultValue 'unset'\n       */\n      shape?: 'unset' | 'circle';\n    };\n    /* @conditional-compile-remove(custom-branding) */\n    /**\n     * Background image displayed on the configuration page.\n     */\n    backgroundImage?: {\n      /**\n       * URL for the background image.\n       *\n       * @remarks\n       * Background image should be larger than 576x567 pixels and smaller than 2048x2048 pixels pixels.\n       */\n      url: string;\n    };\n  };\n};\ntype CallWithChatScreenProps = {\n  callWithChatAdapter: CallWithChatAdapter;\n  fluentTheme?: PartialTheme | Theme;\n  formFactor?: 'desktop' | 'mobile';\n  joinInvitationURL?: string;\n  callControls?: boolean | CallWithChatControlOptions;\n  onFetchAvatarPersonaData?: AvatarPersonaDataCallback;\n  onFetchParticipantMenuItems?: ParticipantMenuItemsCallback;\n  rtl?: boolean;\n  remoteVideoTileMenuOptions?: RemoteVideoTileMenuOptions;\n  /* @conditional-compile-remove(click-to-call) */\n  localVideoTile?: boolean | LocalVideoTileOptions;\n  galleryOptions?: {\n    layout?: VideoGalleryLayout;\n  };\n  /* @conditional-compile-remove(custom-branding) */\n  logo?: {\n    url: string;\n    alt?: string;\n    shape?: 'unset' | 'circle';\n  };\n  /* @conditional-compile-remove(custom-branding) */\n  backgroundImage?: {\n    url: string;\n  };\n};\nconst CallWithChatScreen = (props: CallWithChatScreenProps): JSX.Element => {\n  const {\n    callWithChatAdapter,\n    fluentTheme,\n    formFactor = 'desktop'\n  } = props;\n  const mobileView = formFactor === 'mobile';\n  if (!callWithChatAdapter) {\n    throw new Error('CallWithChatAdapter is undefined');\n  }\n  const callAdapter: CallAdapter = useMemo(() => new CallWithChatBackedCallAdapter(callWithChatAdapter), [callWithChatAdapter]);\n  const [currentCallState, setCurrentCallState] = useState<CallState>();\n  const [currentPage, setCurrentPage] = useState<CallCompositePage>();\n  const [isChatOpen, setIsChatOpen] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const updateCallWithChatPage = (newState: CallWithChatAdapterState): void => {\n      setCurrentPage(newState.page);\n      setCurrentCallState(newState.call?.state);\n    };\n    updateCallWithChatPage(callWithChatAdapter.getState());\n    callWithChatAdapter.onStateChange(updateCallWithChatPage);\n    return () => {\n      callWithChatAdapter.offStateChange(updateCallWithChatPage);\n    };\n  }, [callWithChatAdapter]);\n  const chatAdapter: ChatAdapter = useMemo(() => {\n    return new CallWithChatBackedChatAdapter(callWithChatAdapter);\n  }, [callWithChatAdapter]);\n\n  /** Constant setting of id for the parent stack of the composite */\n  const compositeParentDivId = useId('callWithChatCompositeParentDiv-internal');\n  const closeChat = useCallback(() => {\n    setIsChatOpen(false);\n  }, []);\n  const openChat = useCallback(() => {\n    setIsChatOpen(true);\n    // timeout is required to give the window time to render the sendbox so we have something to send focus to.\n    // TODO: Selecting elements in the DOM via attributes is not stable. We should expose an API from ChatComposite to be able to focus on the sendbox.\n    const chatFocusTimeout = setInterval(() => {\n      const callWithChatCompositeRootDiv = document.querySelector(`[id=\"${compositeParentDivId}\"]`);\n      const sendbox = (callWithChatCompositeRootDiv?.querySelector(`[id=\"sendbox\"]`) as HTMLTextAreaElement);\n      if (sendbox !== null) {\n        sendbox.focus();\n        clearInterval(chatFocusTimeout);\n      }\n    }, 3);\n    setTimeout(() => {\n      clearInterval(chatFocusTimeout);\n    }, 300);\n  }, [compositeParentDivId]);\n  const isOnHold = isOnHoldTrampoline(currentPage);\n  useEffect(() => {\n    if (isOnHold) {\n      closeChat();\n    }\n  }, [closeChat, isOnHold]);\n  const hasJoinedCall = !!(currentPage && hasJoinedCallFn(currentPage, currentCallState ?? 'None'));\n  const toggleChat = useCallback(() => {\n    isChatOpen || !hasJoinedCall ? closeChat() : openChat();\n  }, [closeChat, hasJoinedCall, isChatOpen, openChat]);\n  const callWithChatStrings = useCallWithChatCompositeStrings();\n  const chatButtonStrings = useMemo(() => ({\n    label: callWithChatStrings.chatButtonLabel,\n    tooltipOffContent: callWithChatStrings.chatButtonTooltipOpen,\n    tooltipOnContent: callWithChatStrings.chatButtonTooltipClose\n  }), [callWithChatStrings]);\n  const theme = useTheme();\n  const commonButtonStyles = useMemo(() => !mobileView ? getDesktopCommonButtonStyles(theme) : undefined, [mobileView, theme]);\n  const showChatButton = checkShowChatButton(props.callControls);\n  const chatButtonDisabled = showChatButton && (checkChatButtonIsDisabled(props.callControls) || !hasJoinedCall || isOnHold);\n  const chatTabHeaderProps = useMemo(() => mobileView && showChatButton ? {\n    onClick: toggleChat,\n    disabled: chatButtonDisabled\n  } : undefined, [chatButtonDisabled, mobileView, toggleChat, showChatButton]);\n  const unreadChatMessagesCount = useUnreadMessagesTracker(chatAdapter, isChatOpen);\n  const customChatButton: CustomCallControlButtonCallback = useCallback((args: CustomCallControlButtonCallbackArgs) => ({\n    placement: mobileView ? 'primary' : 'secondary',\n    onRenderButton: () => <ChatButtonWithUnreadMessagesBadge checked={isChatOpen} showLabel={args.displayType !== 'compact'} onClick={toggleChat} disabled={chatButtonDisabled} strings={chatButtonStrings} styles={commonButtonStyles} newMessageLabel={callWithChatStrings.chatButtonNewMessageNotificationLabel} unreadChatMessagesCount={unreadChatMessagesCount}\n    // As chat is disabled when on hold, we don't want to show the unread badge when on hold\n    hideUnreadChatMessagesBadge={isOnHold} disableTooltip={mobileView} />\n  }), [callWithChatStrings.chatButtonNewMessageNotificationLabel, chatButtonStrings, commonButtonStyles, isChatOpen, chatButtonDisabled, mobileView, toggleChat, unreadChatMessagesCount, isOnHold]);\n  const callControlOptionsFromProps = useMemo(() => ({\n    ...(typeof props.callControls === 'object' ? props.callControls : {})\n  }), [props.callControls]);\n  const injectedCustomButtonsFromProps = useMemo(() => {\n    /* @conditional-compile-remove(control-bar-button-injection) */\n    return [...(callControlOptionsFromProps.onFetchCustomButtonProps ?? [])];\n    return [];\n  }, [callControlOptionsFromProps]);\n  const callCompositeOptions: CallCompositeOptions = useMemo(() => ({\n    callControls: props.callControls === false ? false : ({\n      ...callControlOptionsFromProps,\n      onFetchCustomButtonProps: [...(showChatButton ? [customChatButton] : []), /* @conditional-compile-remove(control-bar-button-injection) */\n      ...injectedCustomButtonsFromProps],\n      legacyControlBarExperience: false\n    } as CallControlOptions),\n    remoteVideoTileMenuOptions: props.remoteVideoTileMenuOptions,\n    galleryOptions: props.galleryOptions,\n    /* @conditional-compile-remove(click-to-call) */\n    localVideoTile: props.localVideoTile,\n    /* @conditional-compile-remove(custom-branding) */\n    branding: {\n      logo: props.logo,\n      backgroundImage: props.backgroundImage\n    }\n  }), [props.callControls, callControlOptionsFromProps, showChatButton, customChatButton, injectedCustomButtonsFromProps, props.galleryOptions, /* @conditional-compile-remove(click-to-call) */\n  props.localVideoTile, props.remoteVideoTileMenuOptions, /* @conditional-compile-remove(custom-branding) */\n  props.logo, /* @conditional-compile-remove(custom-branding) */\n  props.backgroundImage]);\n  const onRenderChatContent = useCallback((): JSX.Element => <ChatComposite adapter={chatAdapter} fluentTheme={theme} options={{\n    topic: false\n  }} onFetchAvatarPersonaData={props.onFetchAvatarPersonaData} />, [chatAdapter, props.onFetchAvatarPersonaData, theme]);\n  const sidePaneHeaderRenderer = useCallback(() => <SidePaneHeader headingText={callWithChatStrings.chatPaneTitle} onClose={closeChat} dismissSidePaneButtonAriaLabel={callWithChatStrings.dismissSidePaneButtonLabel ?? ''} mobileView={mobileView} />, [callWithChatStrings.chatPaneTitle, callWithChatStrings.dismissSidePaneButtonLabel, closeChat, mobileView]);\n  const sidePaneContentRenderer = useMemo(() => hasJoinedCall ? onRenderChatContent : undefined, [hasJoinedCall, onRenderChatContent]);\n  const sidePaneRenderer = useMemo(() => ({\n    contentRenderer: sidePaneContentRenderer,\n    headerRenderer: sidePaneHeaderRenderer,\n    id: 'chat'\n  }), [sidePaneContentRenderer, sidePaneHeaderRenderer]);\n  const overrideSidePaneProps: InjectedSidePaneProps = useMemo(() => ({\n    renderer: sidePaneRenderer,\n    isActive: isChatOpen,\n    persistRenderingWhenClosed: true\n  }), [isChatOpen, sidePaneRenderer]);\n  const onSidePaneIdChange = useCallback((sidePaneId: string | undefined) => {\n    // If the pane is switched to something other than chat, removing rendering chat.\n    if (sidePaneId && sidePaneId !== 'chat') {\n      closeChat();\n    }\n  }, [closeChat]);\n\n  // When the call ends ensure the side pane is set to closed to prevent the side pane being open if the call is re-joined.\n  useEffect(() => {\n    callAdapter.on('callEnded', closeChat);\n    return () => {\n      callAdapter.off('callEnded', closeChat);\n    };\n  }, [callAdapter, closeChat]);\n  return <div ref={containerRef} className={mergeStyles(containerDivStyles)}>\n      <Stack verticalFill grow styles={compositeOuterContainerStyles} id={compositeParentDivId}>\n        <Stack horizontal grow>\n          <Stack.Item grow styles={callCompositeContainerStyles(mobileView)}>\n            <CallCompositeInner {...props} formFactor={formFactor} options={callCompositeOptions} adapter={callAdapter} fluentTheme={fluentTheme} callInvitationUrl={props.joinInvitationURL} overrideSidePane={overrideSidePaneProps} onSidePaneIdChange={onSidePaneIdChange} mobileChatTabHeader={chatTabHeaderProps} onCloseChatPane={closeChat} />\n          </Stack.Item>\n        </Stack>\n      </Stack>\n    </div>;\n};\n\n/**\n * CallWithChatComposite brings together key components to provide a full call with chat experience out of the box.\n *\n * @public\n */\nexport const CallWithChatComposite = (props: CallWithChatCompositeProps): JSX.Element => {\n  const {\n    adapter,\n    fluentTheme,\n    rtl,\n    formFactor,\n    joinInvitationURL,\n    options\n  } = props;\n  return <BaseProvider fluentTheme={fluentTheme} rtl={rtl} locale={props.locale} icons={props.icons}>\n      <CallWithChatScreen {...props} callWithChatAdapter={adapter} formFactor={formFactor} callControls={options?.callControls} joinInvitationURL={joinInvitationURL} fluentTheme={fluentTheme} remoteVideoTileMenuOptions={options?.remoteVideoTileMenuOptions} /* @conditional-compile-remove(click-to-call) */\n    localVideoTile={options?.localVideoTile} galleryOptions={options?.galleryOptions}\n    /* @conditional-compile-remove(custom-branding) */ logo={options?.branding?.logo}\n    /* @conditional-compile-remove(custom-branding) */ backgroundImage={options?.branding?.backgroundImage} />\n    </BaseProvider>;\n};\nconst hasJoinedCallFn = (page: CallCompositePage, callStatus: CallState): boolean => {\n  return page === 'call' && (callStatus === 'Connected' || callStatus === 'Disconnecting');\n};\nconst checkShowChatButton = (callControls?: boolean | CallWithChatControlOptions): boolean => {\n  if (callControls === undefined || callControls === true) {\n    return true;\n  }\n  if (callControls === false) {\n    return false;\n  }\n  return callControls.chatButton !== false;\n};\nconst checkChatButtonIsDisabled = (callControls?: boolean | CallWithChatControlOptions): boolean => {\n  return typeof callControls === 'object' && isDisabled(callControls?.chatButton);\n};\nconst isOnHoldTrampoline = (page: CallCompositePage | undefined): boolean => {\n  return false;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CommunicationIdentifierKind } from '@azure/communication-common';\nimport { CallState, DeviceManagerState } from '@internal/calling-stateful-client';\nimport { ChatThreadClientState } from '@internal/chat-stateful-client';\nimport { CallAdapter, CallAdapterState, CallCompositePage } from '../../CallComposite';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundImage, VideoBackgroundEffect } from '../../CallComposite';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffectsDependency } from '@internal/calling-component-bindings';\nimport { ChatAdapter, ChatAdapterState } from '../../ChatComposite';\nimport { AdapterErrors } from '../../common/adapters';\n/**\n * UI state pertaining to the {@link CallWithChatComposite}.\n *\n * @public\n */\nexport interface CallWithChatAdapterUiState {\n  /**\n   * Microphone state before a call has joined.\n   *\n   * @public\n   */\n  isLocalPreviewMicrophoneEnabled: boolean;\n  /**\n   * Current page of the Composite.\n   *\n   * @public\n   */\n  page: CallCompositePage;\n}\n\n/**\n * State from the backend services that drives {@link CallWithChatComposite}.\n *\n * @public\n */\nexport interface CallWithChatClientState {\n  /** ID of the call participant using this CallWithChatAdapter. */\n  userId: CommunicationIdentifierKind;\n  /** Display name of the participant using this CallWithChatAdapter. */\n  displayName: string | undefined;\n  /** State of the current call. */\n  call?: CallState;\n  /** State of the current chat. */\n  chat?: ChatThreadClientState;\n  /** Latest call error encountered for each operation performed via the adapter. */\n  latestCallErrors: AdapterErrors;\n  /** Latest chat error encountered for each operation performed via the adapter. */\n  latestChatErrors: AdapterErrors;\n  /** State of available and currently selected devices */\n  devices: DeviceManagerState;\n  /** State of whether the active call is a Teams interop call */\n  isTeamsCall: boolean;\n  /* @conditional-compile-remove(video-background-effects) */\n  /** Default set of background images for background replacement effect */\n  videoBackgroundImages?: VideoBackgroundImage[];\n  /* @conditional-compile-remove(video-background-effects) */\n  /** Dependency to be injected for video background effects */\n  onResolveVideoEffectDependency?: () => Promise<VideoBackgroundEffectsDependency>;\n  /* @conditional-compile-remove(video-background-effects) */\n  /** State to track the selected video background effect */\n  selectedVideoBackgroundEffect?: VideoBackgroundEffect;\n}\n\n/**\n * CallWithChat State is a combination of Stateful Chat and Stateful Calling clients with some\n * state specific to the CallWithChat Composite only.\n *\n * @public\n */\nexport interface CallWithChatAdapterState extends CallWithChatAdapterUiState, CallWithChatClientState {}\n\n/**\n * @private\n */\nexport function callWithChatAdapterStateFromBackingStates(callAdapter: CallAdapter, chatAdapter: ChatAdapter): CallWithChatAdapterState {\n  const callAdapterState = callAdapter.getState();\n  const chatAdapterState = chatAdapter.getState();\n  return {\n    call: callAdapterState.call,\n    chat: chatAdapterState.thread,\n    userId: callAdapterState.userId,\n    page: callAdapterState.page,\n    displayName: callAdapterState.displayName,\n    devices: callAdapterState.devices,\n    isLocalPreviewMicrophoneEnabled: callAdapterState.isLocalPreviewMicrophoneEnabled,\n    isTeamsCall: callAdapterState.isTeamsCall,\n    latestCallErrors: callAdapterState.latestErrors,\n    latestChatErrors: chatAdapterState.latestErrors,\n    /* @conditional-compile-remove(video-background-effects) */\n    videoBackgroundImages: callAdapterState.videoBackgroundImages,\n    /* @conditional-compile-remove(video-background-effects) */\n    onResolveVideoEffectDependency: callAdapterState.onResolveVideoEffectDependency,\n    /* @conditional-compile-remove(video-background-effects) */\n    selectedVideoBackgroundEffect: callAdapterState.selectedVideoBackgroundEffect\n  };\n}\n\n/**\n * @private\n */\nexport function mergeChatAdapterStateIntoCallWithChatAdapterState(existingCallWithChatAdapterState: CallWithChatAdapterState, chatAdapterState: ChatAdapterState): CallWithChatAdapterState {\n  return {\n    ...existingCallWithChatAdapterState,\n    chat: chatAdapterState.thread,\n    latestChatErrors: chatAdapterState.latestErrors\n  };\n}\n\n/**\n * @private\n */\nexport function mergeCallAdapterStateIntoCallWithChatAdapterState(existingCallWithChatAdapterState: CallWithChatAdapterState, callAdapterState: CallAdapterState): CallWithChatAdapterState {\n  return {\n    ...existingCallWithChatAdapterState,\n    userId: callAdapterState.userId,\n    page: callAdapterState.page,\n    displayName: callAdapterState.displayName,\n    devices: callAdapterState.devices,\n    call: callAdapterState.call,\n    isLocalPreviewMicrophoneEnabled: callAdapterState.isLocalPreviewMicrophoneEnabled,\n    isTeamsCall: callAdapterState.isTeamsCall,\n    latestCallErrors: callAdapterState.latestErrors,\n    /* @conditional-compile-remove(video-background-effects) */\n    videoBackgroundImages: callAdapterState.videoBackgroundImages,\n    /* @conditional-compile-remove(video-background-effects) */\n    onResolveVideoEffectDependency: callAdapterState.onResolveVideoEffectDependency,\n    /* @conditional-compile-remove(video-background-effects) */\n    selectedVideoBackgroundEffect: callAdapterState.selectedVideoBackgroundEffect\n  };\n}","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { UNSUPPORTED_CHAT_THREAD_TYPE, TEAMS_LIMITATION_LEARN_MORE } from '../../common/constants';\n/**\n * Get chat thread from a teams url.\n * As per documented on the Chat SDK: https://docs.microsoft.com/en-us/azure/communication-services/quickstarts/chat/meeting-interop?pivots=platform-web#get-a-teams-meeting-chat-thread-for-a-communication-services-user\n *\n * @private\n */\nexport const getChatThreadFromTeamsLink = (teamsMeetingLink: string): string => {\n  // Get the threadId from the url - this also contains the call locator ID that will be removed in the threadId.split\n  let threadId = teamsMeetingLink.replace('https://teams.microsoft.com/l/meetup-join/', '');\n  // Unescape characters that applications like Outlook encode when creating joinable links\n  threadId = decodeURIComponent(threadId);\n  // Extract just the chat guid from the link, stripping away the call locator ID\n  threadId = threadId.split(/^(.*?@thread\\.v2)/gm)[1];\n  if (!threadId || threadId.length === 0) {\n    if (UNSUPPORTED_CHAT_THREAD_TYPE.some(t => teamsMeetingLink.includes(t))) {\n      throw new Error(`Teams Channel Meetings are not currently supported, read more ${TEAMS_LIMITATION_LEARN_MORE}`);\n    }\n    throw new Error('Could not get chat thread from teams link');\n  }\n  return threadId;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* eslint-disable @typescript-eslint/no-unused-vars */ // REMOVE ONCE THIS FILE IS IMPLEMENTED\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */ // REMOVE ONCE THIS FILE IS IMPLEMENTED\n\nimport { AudioDeviceInfo, Call, CallAgent, GroupCallLocator, PermissionConstraints, PropertyChangedEvent, TeamsMeetingLinkLocator, StartCallOptions, VideoDeviceInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(close-captions) */\nimport { StartCaptionsOptions } from '@azure/communication-calling';\nimport { DtmfTone } from '@azure/communication-calling';\nimport { CreateVideoStreamViewResult, VideoStreamOptions } from '@internal/react-components';\nimport { ParticipantsJoinedListener, ParticipantsLeftListener, IsMutedChangedListener, CallIdChangedListener, IsLocalScreenSharingActiveChangedListener, DisplayNameChangedListener, IsSpeakingChangedListener, CallAdapter, CallAdapterState, CallEndedListener } from '../../CallComposite';\nimport { MessageReceivedListener, MessageReadListener, ChatAdapter, ChatAdapterState, ParticipantsRemovedListener, ParticipantsAddedListener, MessageEditedListener, MessageDeletedListener } from '../../ChatComposite';\n/* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\nimport { ResourceDetails } from '../../ChatComposite';\nimport { CallWithChatAdapter, CallWithChatEvent } from './CallWithChatAdapter';\nimport { callWithChatAdapterStateFromBackingStates, CallWithChatAdapterState, mergeCallAdapterStateIntoCallWithChatAdapterState, mergeChatAdapterStateIntoCallWithChatAdapterState } from '../state/CallWithChatAdapterState';\nimport { _createAzureCommunicationChatAdapterInner, createAzureCommunicationChatAdapterFromClient } from '../../ChatComposite/adapter/AzureCommunicationChatAdapter';\nimport { EventEmitter } from 'events';\nimport { CommunicationTokenCredential, CommunicationUserIdentifier } from '@azure/communication-common';\nimport { getChatThreadFromTeamsLink } from './parseTeamsUrl';\nimport { AdapterError } from '../../common/adapters';\nimport { _createAzureCommunicationCallAdapterInner } from '../../CallComposite/adapter/AzureCommunicationCallAdapter';\nimport { CallAdapterLocator, createAzureCommunicationCallAdapterFromClient } from '../../CallComposite/adapter/AzureCommunicationCallAdapter';\nimport { StatefulCallClient } from '@internal/calling-stateful-client';\nimport { StatefulChatClient } from '@internal/chat-stateful-client';\nimport { ChatThreadClient } from '@azure/communication-chat';\nimport { useEffect, useRef, useState } from 'react';\nimport { _toCommunicationIdentifier, _TelemetryImplementationHint } from '@internal/acs-ui-common';\nimport { JoinCallOptions, StartCallIdentifier } from '../../CallComposite/adapter/CallAdapter';\n/* @conditional-compile-remove(video-background-effects) */\nimport { AzureCommunicationCallAdapterOptions } from '../../CallComposite/adapter/AzureCommunicationCallAdapter';\n/* @conditional-compile-remove(close-captions) */\nimport { IsCaptionsActiveChangedListener, CaptionsReceivedListener, IsCaptionLanguageChangedListener, IsSpokenLanguageChangedListener } from '../../CallComposite/adapter/CallAdapter';\n/* @conditional-compile-remove(capabilities) */\nimport { CapabilitiesChangedListener } from '../../CallComposite/adapter/CallAdapter';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundImage, VideoBackgroundEffect } from '../../CallComposite';\ntype CallWithChatAdapterStateChangedHandler = (newState: CallWithChatAdapterState) => void;\n\n/** Context of Call with Chat, which is a centralized context for all state updates */\nclass CallWithChatContext {\n  private emitter = new EventEmitter();\n  private state: CallWithChatAdapterState;\n  constructor(clientState: CallWithChatAdapterState, maxListeners = 50) {\n    this.state = clientState;\n    this.emitter.setMaxListeners(maxListeners);\n  }\n  public onStateChange(handler: CallWithChatAdapterStateChangedHandler): void {\n    this.emitter.on('stateChanged', handler);\n  }\n  public offStateChange(handler: CallWithChatAdapterStateChangedHandler): void {\n    this.emitter.off('stateChanged', handler);\n  }\n  public setState(state: CallWithChatAdapterState): void {\n    this.state = state;\n    this.emitter.emit('stateChanged', this.state);\n  }\n  public getState(): CallWithChatAdapterState {\n    return this.state;\n  }\n  public updateClientState(clientState: CallWithChatAdapterState): void {\n    this.setState(clientState);\n  }\n  public updateClientStateWithChatState(chatAdapterState: ChatAdapterState): void {\n    this.updateClientState(mergeChatAdapterStateIntoCallWithChatAdapterState(this.state, chatAdapterState));\n  }\n  public updateClientStateWithCallState(callAdapterState: CallAdapterState): void {\n    this.updateClientState(mergeCallAdapterStateIntoCallWithChatAdapterState(this.state, callAdapterState));\n  }\n}\n\n/**\n * CallWithChat adapter backed by Azure Communication Services.\n * Created for easy use with the {@link CallWithChatComposite}.\n */\nexport class AzureCommunicationCallWithChatAdapter implements CallWithChatAdapter {\n  private callAdapter: CallAdapter;\n  private chatAdapter: ChatAdapter;\n  private context: CallWithChatContext;\n  private onChatStateChange: (newChatAdapterState: ChatAdapterState) => void;\n  private onCallStateChange: (newChatAdapterState: CallAdapterState) => void;\n  constructor(callAdapter: CallAdapter, chatAdapter: ChatAdapter) {\n    this.bindPublicMethods();\n    this.callAdapter = callAdapter;\n    this.chatAdapter = chatAdapter;\n    this.context = new CallWithChatContext(callWithChatAdapterStateFromBackingStates(callAdapter, chatAdapter));\n    const onChatStateChange = (newChatAdapterState: ChatAdapterState): void => {\n      this.context.updateClientStateWithChatState(newChatAdapterState);\n    };\n    this.chatAdapter.onStateChange(onChatStateChange);\n    this.onChatStateChange = onChatStateChange;\n    const onCallStateChange = (newCallAdapterState: CallAdapterState): void => {\n      this.context.updateClientStateWithCallState(newCallAdapterState);\n    };\n    this.callAdapter.onStateChange(onCallStateChange);\n    this.onCallStateChange = onCallStateChange;\n  }\n  private bindPublicMethods(): void {\n    this.joinCall.bind(this);\n    this.leaveCall.bind(this);\n    this.startCall.bind(this);\n    this.onStateChange.bind(this);\n    this.offStateChange.bind(this);\n    this.getState.bind(this);\n    this.dispose.bind(this);\n    this.setCamera.bind(this);\n    this.setMicrophone.bind(this);\n    this.setSpeaker.bind(this);\n    this.askDevicePermission.bind(this);\n    this.queryCameras.bind(this);\n    this.queryMicrophones.bind(this);\n    this.querySpeakers.bind(this);\n    this.startCamera.bind(this);\n    this.stopCamera.bind(this);\n    this.mute.bind(this);\n    this.unmute.bind(this);\n    this.startScreenShare.bind(this);\n    this.stopScreenShare.bind(this);\n    /* @conditional-compile-remove(raise-hand) */\n    this.raiseHand.bind(this);\n    /* @conditional-compile-remove(raise-hand) */\n    this.lowerHand.bind(this);\n    this.removeParticipant.bind(this);\n    this.createStreamView.bind(this);\n    this.disposeStreamView.bind(this);\n    this.disposeScreenShareStreamView.bind(this);\n    this.fetchInitialData.bind(this);\n    this.sendMessage.bind(this);\n    this.sendReadReceipt.bind(this);\n    this.sendTypingIndicator.bind(this);\n    this.loadPreviousChatMessages.bind(this);\n    this.updateMessage.bind(this);\n    this.deleteMessage.bind(this);\n    this.on.bind(this);\n    this.off.bind(this);\n    /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n    this.downloadResourceToCache = this.downloadResourceToCache.bind(this);\n    /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n    this.removeResourceFromCache = this.removeResourceFromCache.bind(this);\n    this.sendDtmfTone.bind(this);\n    /* @conditional-compile-remove(close-captions) */{\n      this.startCaptions.bind(this);\n      this.stopCaptions.bind(this);\n      this.setSpokenLanguage.bind(this);\n      this.setCaptionLanguage.bind(this);\n    }\n    /* @conditional-compile-remove(video-background-effects) */\n    this.startVideoBackgroundEffect.bind(this);\n    /* @conditional-compile-remove(video-background-effects) */\n    this.stopVideoBackgroundEffects.bind(this);\n    /* @conditional-compile-remove(video-background-effects) */\n    this.updateBackgroundPickerImages.bind(this);\n  }\n\n  /** Join existing Call. */\n  public joinCall(options?: boolean | JoinCallOptions): Call | undefined {\n    if (typeof options === 'boolean') {\n      return this.callAdapter.joinCall(options);\n    } else {\n      return this.callAdapter.joinCall(options);\n    }\n  }\n  /** Leave current Call. */\n  public async leaveCall(forEveryone?: boolean): Promise<void> {\n    // Only remove self from the GroupCall. Contoso must manage access to Chat.\n    await this.callAdapter.leaveCall(forEveryone);\n  }\n\n  /** Start a new Call. */\n  public startCall(participants: string[], options?: StartCallOptions): Call | undefined;\n  /** Start a new Call. */\n  public startCall(participants: StartCallIdentifier[], options?: StartCallOptions): Call | undefined;\n  /** Start a new Call. */\n  public startCall(participants: string[] | StartCallIdentifier[], options?: StartCallOptions): Call | undefined {\n    if (participants.length === 0) {\n      throw new Error('At least one participant is required to start a call');\n    }\n    if (typeof participants[0] === 'string') {\n      return this.callAdapter.startCall((participants as string[]), options);\n    } else {\n      return this.callAdapter.startCall((participants as StartCallIdentifier[]), options);\n    }\n  }\n  /**\n   * Subscribe to state change events.\n   * @param handler - handler to be called when the state changes. This is passed the new state.\n   */\n  public onStateChange(handler: (state: CallWithChatAdapterState) => void): void {\n    this.context.onStateChange(handler);\n  }\n  /**\n   * Unsubscribe to state change events.\n   * @param handler - handler to be no longer called when state changes.\n   */\n  public offStateChange(handler: (state: CallWithChatAdapterState) => void): void {\n    this.context.offStateChange(handler);\n  }\n  /** Get current Call and Chat state. */\n  public getState(): CallWithChatAdapterState {\n    return this.context.getState();\n  }\n  /** Dispose of the current CallWithChatAdapter. */\n  public dispose(): void {\n    this.chatAdapter.offStateChange(this.onChatStateChange);\n    this.callAdapter.offStateChange(this.onCallStateChange);\n    this.chatAdapter.dispose();\n    this.callAdapter.dispose();\n  }\n  /** Remove a participant from the Call only. */\n  public async removeParticipant(userId: string): Promise<void> {\n    let participant = userId;\n    await this.callAdapter.removeParticipant(participant);\n  }\n  public async setCamera(device: VideoDeviceInfo, options?: VideoStreamOptions): Promise<void> {\n    await this.callAdapter.setCamera(device, options);\n  }\n  /** Set the microphone to be used in the Call. */\n  public async setMicrophone(device: AudioDeviceInfo): Promise<void> {\n    await this.callAdapter.setMicrophone(device);\n  }\n  /** Set the speaker to be used in the Call. */\n  public async setSpeaker(device: AudioDeviceInfo): Promise<void> {\n    await this.callAdapter.setSpeaker(device);\n  }\n  public async askDevicePermission(constraints: PermissionConstraints): Promise<void> {\n    await this.callAdapter.askDevicePermission(constraints);\n  }\n  /** Query for available cameras. */\n  public async queryCameras(): Promise<VideoDeviceInfo[]> {\n    return await this.callAdapter.queryCameras();\n  }\n  /** Query for available microphones. */\n  public async queryMicrophones(): Promise<AudioDeviceInfo[]> {\n    return await this.callAdapter.queryMicrophones();\n  }\n  /** Query for available speakers. */\n  public async querySpeakers(): Promise<AudioDeviceInfo[]> {\n    return await this.callAdapter.querySpeakers();\n  }\n  /** Start the camera for the user in the Call. */\n  public async startCamera(options?: VideoStreamOptions): Promise<void> {\n    await this.callAdapter.startCamera(options);\n  }\n  /** Stop the camera for the user in the Call. */\n  public async stopCamera(): Promise<void> {\n    await this.callAdapter.stopCamera();\n  }\n  /** Mute the user in the Call. */\n  public async mute(): Promise<void> {\n    await this.callAdapter.mute();\n  }\n  /** Unmute the user in the Call. */\n  public async unmute(): Promise<void> {\n    await this.callAdapter.unmute();\n  }\n  /** Trigger the user to start screen share. */\n  public async startScreenShare(): Promise<void> {\n    await this.callAdapter.startScreenShare();\n  }\n  /** Stop the current active screen share. */\n  public async stopScreenShare(): Promise<void> {\n    await this.callAdapter.stopScreenShare();\n  }\n  /* @conditional-compile-remove(raise-hand) */\n  /** Raise hand for local user. */\n  public async raiseHand(): Promise<void> {\n    await this.callAdapter.raiseHand();\n  }\n  /* @conditional-compile-remove(raise-hand) */\n  /** Lower hand for local user. */\n  public async lowerHand(): Promise<void> {\n    await this.callAdapter.lowerHand();\n  }\n  /** Create a stream view for a remote participants video feed. */\n  public async createStreamView(remoteUserId?: string, options?: VideoStreamOptions): Promise<void | CreateVideoStreamViewResult> {\n    return await this.callAdapter.createStreamView(remoteUserId, options);\n  }\n  /** Dispose of a created stream view of a remote participants video feed. */\n  public async disposeStreamView(remoteUserId?: string, options?: VideoStreamOptions): Promise<void> {\n    await this.callAdapter.disposeStreamView(remoteUserId, options);\n  }\n  /** Dispose of a remote screen share */\n  public async disposeScreenShareStreamView(remoteUserId: string): Promise<void> {\n    await this.callAdapter.disposeScreenShareStreamView(remoteUserId);\n  }\n  /** Dispose of a remote video stream */\n  public async disposeRemoteVideoStreamView(remoteUserId: string): Promise<void> {\n    await this.callAdapter.disposeRemoteVideoStreamView(remoteUserId);\n  }\n  /** Dispose of the local video stream */\n  public async disposeLocalVideoStreamView(): Promise<void> {\n    await this.callAdapter.disposeLocalVideoStreamView();\n  }\n  /** Fetch initial Call and Chat data such as chat messages. */\n  public async fetchInitialData(): Promise<void> {\n    await this.chatAdapter.fetchInitialData();\n  }\n  /** Send a chat message. */\n  public async sendMessage(content: string): Promise<void> {\n    await this.chatAdapter.sendMessage(content);\n  }\n  /** Send a chat read receipt. */\n  public async sendReadReceipt(chatMessageId: string): Promise<void> {\n    await this.chatAdapter.sendReadReceipt(chatMessageId);\n  }\n  /** Send an isTyping indicator. */\n  public async sendTypingIndicator(): Promise<void> {\n    await this.chatAdapter.sendTypingIndicator();\n  }\n  /** Load previous Chat messages. */\n  public async loadPreviousChatMessages(messagesToLoad: number): Promise<boolean> {\n    return await this.chatAdapter.loadPreviousChatMessages(messagesToLoad);\n  }\n  /** Update an existing message. */\n  public async updateMessage(messageId: string, content: string, metadata?: Record<string, string>, options?: {}): Promise<void> {\n    return await this.chatAdapter.updateMessage(messageId, content, metadata);\n  }\n  /** Delete an existing message. */\n  public async deleteMessage(messageId: string): Promise<void> {\n    return await this.chatAdapter.deleteMessage(messageId);\n  }\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  public async downloadResourceToCache(resourceDetails: ResourceDetails): Promise<void> {\n    this.chatAdapter.downloadResourceToCache(resourceDetails);\n  }\n  /* @conditional-compile-remove(teams-inline-images-and-file-sharing) */\n  public removeResourceFromCache(resourceDetails: ResourceDetails): void {\n    this.chatAdapter.removeResourceFromCache(resourceDetails);\n  }\n  public async sendDtmfTone(dtmfTone: DtmfTone): Promise<void> {\n    return await this.callAdapter.sendDtmfTone(dtmfTone);\n  }\n  /* @conditional-compile-remove(close-captions) */\n  public async startCaptions(options?: StartCaptionsOptions): Promise<void> {\n    await this.callAdapter.startCaptions(options);\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async stopCaptions(): Promise<void> {\n    await this.callAdapter.stopCaptions();\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async setCaptionLanguage(language: string): Promise<void> {\n    await this.callAdapter.setCaptionLanguage(language);\n  }\n\n  /* @conditional-compile-remove(close-captions) */\n  public async setSpokenLanguage(language: string): Promise<void> {\n    await this.callAdapter.setSpokenLanguage(language);\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  public async startVideoBackgroundEffect(videoBackgroundEffect: VideoBackgroundEffect): Promise<void> {\n    await this.callAdapter.startVideoBackgroundEffect(videoBackgroundEffect);\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  public async stopVideoBackgroundEffects(): Promise<void> {\n    return await this.callAdapter.stopVideoBackgroundEffects();\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  public updateBackgroundPickerImages(backgroundImages: VideoBackgroundImage[]): void {\n    return this.callAdapter.updateBackgroundPickerImages(backgroundImages);\n  }\n\n  /* @conditional-compile-remove(video-background-effects) */\n  public updateSelectedVideoBackgroundEffect(selectedVideoBackground: VideoBackgroundEffect): void {\n    return this.callAdapter.updateSelectedVideoBackgroundEffect(selectedVideoBackground);\n  }\n  on(event: 'callParticipantsJoined', listener: ParticipantsJoinedListener): void;\n  on(event: 'callParticipantsLeft', listener: ParticipantsLeftListener): void;\n  on(event: 'callEnded', listener: CallEndedListener): void;\n  on(event: 'callError', listener: (e: AdapterError) => void): void;\n  on(event: 'isMutedChanged', listener: IsMutedChangedListener): void;\n  on(event: 'callIdChanged', listener: CallIdChangedListener): void;\n  on(event: 'isLocalScreenSharingActiveChanged', listener: IsLocalScreenSharingActiveChangedListener): void;\n  on(event: 'displayNameChanged', listener: DisplayNameChangedListener): void;\n  on(event: 'isSpeakingChanged', listener: IsSpeakingChangedListener): void;\n  on(event: 'messageReceived', listener: MessageReceivedListener): void;\n  on(event: 'messageEdited', listener: MessageEditedListener): void;\n  on(event: 'messageDeleted', listener: MessageDeletedListener): void;\n  on(event: 'messageSent', listener: MessageReceivedListener): void;\n  on(event: 'messageRead', listener: MessageReadListener): void;\n  on(event: 'chatParticipantsAdded', listener: ParticipantsAddedListener): void;\n  on(event: 'chatParticipantsRemoved', listener: ParticipantsRemovedListener): void;\n  on(event: 'selectedMicrophoneChanged', listener: PropertyChangedEvent): void;\n  on(event: 'selectedSpeakerChanged', listener: PropertyChangedEvent): void;\n  on(event: 'chatError', listener: (e: AdapterError) => void): void;\n  /* @conditional-compile-remove(close-captions) */\n  on(event: 'captionsReceived', listener: CaptionsReceivedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  on(event: 'isCaptionsActiveChanged', listener: IsCaptionsActiveChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  on(event: 'isCaptionLanguageChanged', listener: IsCaptionLanguageChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  on(event: 'isSpokenLanguageChanged', listener: IsSpokenLanguageChangedListener): void;\n  /* @conditional-compile-remove(capabilities) */\n  on(event: 'capabilitiesChanged', listener: CapabilitiesChangedListener): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  on(event: CallWithChatEvent, listener: any): void {\n    switch (event) {\n      case 'callParticipantsJoined':\n        this.callAdapter.on('participantsJoined', listener);\n        break;\n      case 'callParticipantsLeft':\n        this.callAdapter.on('participantsLeft', listener);\n        break;\n      case 'callEnded':\n        this.callAdapter.on('callEnded', listener);\n        break;\n      case 'isMutedChanged':\n        this.callAdapter.on('isMutedChanged', listener);\n        break;\n      case 'callIdChanged':\n        this.callAdapter.on('callIdChanged', listener);\n        break;\n      case 'isLocalScreenSharingActiveChanged':\n        this.callAdapter.on('isLocalScreenSharingActiveChanged', listener);\n        break;\n      case 'displayNameChanged':\n        this.callAdapter.on('displayNameChanged', listener);\n        break;\n      case 'isSpeakingChanged':\n        this.callAdapter.on('isSpeakingChanged', listener);\n        break;\n      case 'selectedMicrophoneChanged':\n        this.callAdapter.on('selectedMicrophoneChanged', listener);\n        break;\n      case 'selectedSpeakerChanged':\n        this.callAdapter.on('selectedSpeakerChanged', listener);\n        break;\n      /* @conditional-compile-remove(close-captions) */\n      case 'captionsReceived':\n        this.callAdapter.on('captionsReceived', listener);\n        break;\n      /* @conditional-compile-remove(close-captions) */\n      case 'isCaptionsActiveChanged':\n        this.callAdapter.on('isCaptionsActiveChanged', listener);\n        break;\n      /* @conditional-compile-remove(close-captions) */\n      case 'isCaptionLanguageChanged':\n        this.callAdapter.on('isCaptionLanguageChanged', listener);\n        break;\n      /* @conditional-compile-remove(close-captions) */\n      case 'isSpokenLanguageChanged':\n        this.callAdapter.on('isSpokenLanguageChanged', listener);\n        break;\n      case 'messageReceived':\n        this.chatAdapter.on('messageReceived', listener);\n        break;\n      case 'messageEdited':\n        this.chatAdapter.on('messageEdited', listener);\n        break;\n      case 'messageDeleted':\n        this.chatAdapter.on('messageDeleted', listener);\n        break;\n      case 'messageSent':\n        this.chatAdapter.on('messageSent', listener);\n        break;\n      case 'messageRead':\n        this.chatAdapter.on('messageRead', listener);\n        break;\n      case 'chatParticipantsAdded':\n        this.chatAdapter.on('participantsAdded', listener);\n        break;\n      case 'chatParticipantsRemoved':\n        this.chatAdapter.on('participantsRemoved', listener);\n        break;\n      case 'callError':\n        this.callAdapter.on('error', listener);\n        break;\n      case 'chatError':\n        this.chatAdapter.on('error', listener);\n        break;\n      default:\n        throw `Unknown AzureCommunicationCallWithChatAdapter Event: ${event}`;\n    }\n  }\n  off(event: 'callParticipantsJoined', listener: ParticipantsJoinedListener): void;\n  off(event: 'callParticipantsLeft', listener: ParticipantsLeftListener): void;\n  off(event: 'callEnded', listener: CallEndedListener): void;\n  off(event: 'callError', listener: (e: AdapterError) => void): void;\n  off(event: 'isMutedChanged', listener: IsMutedChangedListener): void;\n  off(event: 'callIdChanged', listener: CallIdChangedListener): void;\n  off(event: 'isLocalScreenSharingActiveChanged', listener: IsLocalScreenSharingActiveChangedListener): void;\n  off(event: 'displayNameChanged', listener: DisplayNameChangedListener): void;\n  off(event: 'isSpeakingChanged', listener: IsSpeakingChangedListener): void;\n  off(event: 'selectedMicrophoneChanged', listener: PropertyChangedEvent): void;\n  off(event: 'selectedSpeakerChanged', listener: PropertyChangedEvent): void;\n  off(event: 'messageReceived', listener: MessageReceivedListener): void;\n  off(event: 'messageEdited', listener: MessageEditedListener): void;\n  off(event: 'messageDeleted', listener: MessageDeletedListener): void;\n  off(event: 'messageSent', listener: MessageReceivedListener): void;\n  off(event: 'messageRead', listener: MessageReadListener): void;\n  off(event: 'chatParticipantsAdded', listener: ParticipantsAddedListener): void;\n  off(event: 'chatParticipantsRemoved', listener: ParticipantsRemovedListener): void;\n  off(event: 'chatError', listener: (e: AdapterError) => void): void;\n  /* @conditional-compile-remove(close-captions) */\n  off(event: 'captionsReceived', listener: CaptionsReceivedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  off(event: 'isCaptionsActiveChanged', listener: IsCaptionsActiveChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  off(event: 'isCaptionLanguageChanged', listener: IsCaptionLanguageChangedListener): void;\n  /* @conditional-compile-remove(close-captions) */\n  off(event: 'isSpokenLanguageChanged', listener: IsSpokenLanguageChangedListener): void;\n  /* @conditional-compile-remove(capabilities) */\n  off(event: 'capabilitiesChanged', listener: CapabilitiesChangedListener): void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  off(event: CallWithChatEvent, listener: any): void {\n    switch ((event as unknown)) {\n      case 'callParticipantsJoined':\n        this.callAdapter.off('participantsJoined', listener);\n        break;\n      case 'callParticipantsLeft':\n        this.callAdapter.off('participantsLeft', listener);\n        break;\n      case 'callEnded':\n        this.callAdapter.off('callEnded', listener);\n        break;\n      case 'isMutedChanged':\n        this.callAdapter.off('isMutedChanged', listener);\n        break;\n      case 'callIdChanged':\n        this.callAdapter.off('callIdChanged', listener);\n        break;\n      case 'isLocalScreenSharingActiveChanged':\n        this.callAdapter.off('isLocalScreenSharingActiveChanged', listener);\n        break;\n      case 'displayNameChanged':\n        this.callAdapter.off('displayNameChanged', listener);\n        break;\n      case 'isSpeakingChanged':\n        this.callAdapter.off('isSpeakingChanged', listener);\n        break;\n      case 'selectedMicrophoneChanged':\n        this.callAdapter.off('selectedMicrophoneChanged', listener);\n        break;\n      case 'selectedSpeakerChanged':\n        this.callAdapter.off('selectedSpeakerChanged', listener);\n        break;\n      /* @conditional-compile-remove(close-captions) */\n      case 'captionsReceived':\n        this.callAdapter.off('captionsReceived', listener);\n        break;\n      /* @conditional-compile-remove(close-captions) */\n      case 'isCaptionsActiveChanged':\n        this.callAdapter.off('isCaptionsActiveChanged', listener);\n        break;\n      /* @conditional-compile-remove(close-captions) */\n      case 'isCaptionLanguageChanged':\n        this.callAdapter.off('isCaptionLanguageChanged', listener);\n        break;\n      /* @conditional-compile-remove(close-captions) */\n      case 'isSpokenLanguageChanged':\n        this.callAdapter.off('isSpokenLanguageChanged', listener);\n        break;\n      case 'messageReceived':\n        this.chatAdapter.off('messageReceived', listener);\n        break;\n      case 'messageEdited':\n        this.chatAdapter.off('messageEdited', listener);\n        break;\n      case 'messageDeleted':\n        this.chatAdapter.off('messageDeleted', listener);\n        break;\n      case 'messageSent':\n        this.chatAdapter.off('messageSent', listener);\n        break;\n      case 'messageRead':\n        this.chatAdapter.off('messageRead', listener);\n        break;\n      case 'chatParticipantsAdded':\n        this.chatAdapter.off('participantsAdded', listener);\n        break;\n      case 'chatParticipantsRemoved':\n        this.chatAdapter.off('participantsRemoved', listener);\n        break;\n      case 'callError':\n        this.callAdapter.off('error', listener);\n        break;\n      case 'chatError':\n        this.chatAdapter.off('error', listener);\n        break;\n      default:\n        throw `Unknown AzureCommunicationCallWithChatAdapter Event: ${event}`;\n    }\n  }\n}\n\n/**\n * Arguments for use in {@link createAzureCommunicationCallWithChatAdapter} to join a Call with an associated Chat thread.\n *\n * @public\n */\nexport interface CallAndChatLocator {\n  /** Locator used by {@link createAzureCommunicationCallWithChatAdapter} to locate the call to join */\n  callLocator: GroupCallLocator;\n  /** Chat thread ID used by {@link createAzureCommunicationCallWithChatAdapter} to locate the chat thread to join */\n  chatThreadId: string;\n}\n\n/**\n * Arguments for {@link createAzureCommunicationCallWithChatAdapter}\n *\n * @public\n */\nexport type AzureCommunicationCallWithChatAdapterArgs = {\n  endpoint: string;\n  userId: CommunicationUserIdentifier;\n  displayName: string;\n  credential: CommunicationTokenCredential;\n  locator: CallAndChatLocator | TeamsMeetingLinkLocator;\n  /* @conditional-compile-remove(video-background-effects) */\n  callAdapterOptions?: AzureCommunicationCallAdapterOptions;\n};\n\n/**\n * Create a CallWithChatAdapter backed by Azure Communication services\n * to plug into the {@link CallWithChatComposite}.\n *\n * @public\n */\nexport const createAzureCommunicationCallWithChatAdapter = async ({\n  userId,\n  displayName,\n  credential,\n  endpoint,\n  locator,\n  /* @conditional-compile-remove(video-background-effects) */callAdapterOptions\n}: AzureCommunicationCallWithChatAdapterArgs): Promise<CallWithChatAdapter> => {\n  const callAdapterLocator = isTeamsMeetingLinkLocator(locator) ? locator : locator.callLocator;\n  const createCallAdapterPromise = _createAzureCommunicationCallAdapterInner({\n    userId,\n    displayName,\n    credential,\n    locator: callAdapterLocator,\n    /* @conditional-compile-remove(video-background-effects) */options: callAdapterOptions,\n    telemetryImplementationHint: ('CallWithChat' as _TelemetryImplementationHint)\n  });\n  const threadId = isTeamsMeetingLinkLocator(locator) ? getChatThreadFromTeamsLink(locator.meetingLink) : locator.chatThreadId;\n  const createChatAdapterPromise = _createAzureCommunicationChatAdapterInner(endpoint, userId, displayName, credential, threadId, ('CallWithChat' as _TelemetryImplementationHint));\n  const [callAdapter, chatAdapter] = await Promise.all([createCallAdapterPromise, createChatAdapterPromise]);\n  return new AzureCommunicationCallWithChatAdapter(callAdapter, chatAdapter);\n};\n\n/**\n * A custom React hook to simplify the creation of {@link CallWithChatAdapter}.\n *\n * Similar to {@link createAzureCommunicationCallWithChatAdapter}, but takes care of asynchronous\n * creation of the adapter internally.\n *\n * Allows arguments to be undefined so that you can respect the rule-of-hooks and pass in arguments\n * as they are created. The adapter is only created when all arguments are defined.\n *\n * Note that you must memoize the arguments to avoid recreating adapter on each render.\n * See storybook for typical usage examples.\n *\n * @public\n */\nexport const useAzureCommunicationCallWithChatAdapter = (args: Partial<AzureCommunicationCallWithChatAdapterArgs>, afterCreate?: (adapter: CallWithChatAdapter) => Promise<CallWithChatAdapter>, beforeDispose?: (adapter: CallWithChatAdapter) => Promise<void>): CallWithChatAdapter | undefined => {\n  const {\n    credential,\n    displayName,\n    endpoint,\n    locator,\n    userId,\n    /* @conditional-compile-remove(video-background-effects) */callAdapterOptions\n  } = args;\n\n  // State update needed to rerender the parent component when a new adapter is created.\n  const [adapter, setAdapter] = useState<CallWithChatAdapter | undefined>(undefined);\n  // Ref needed for cleanup to access the old adapter created asynchronously.\n  const adapterRef = useRef<CallWithChatAdapter | undefined>(undefined);\n  const creatingAdapterRef = useRef<boolean>(false);\n  const afterCreateRef = useRef<((adapter: CallWithChatAdapter) => Promise<CallWithChatAdapter>) | undefined>(undefined);\n  const beforeDisposeRef = useRef<((adapter: CallWithChatAdapter) => Promise<void>) | undefined>(undefined);\n  // These refs are updated on *each* render, so that the latest values\n  // are used in the `useEffect` closures below.\n  // Using a Ref ensures that new values for the callbacks do not trigger the\n  // useEffect blocks, and a new adapter creation / distruction is not triggered.\n  afterCreateRef.current = afterCreate;\n  beforeDisposeRef.current = beforeDispose;\n  useEffect(() => {\n    if (!credential || !displayName || !endpoint || !locator || !userId) {\n      return;\n    }\n    (async () => {\n      if (adapterRef.current) {\n        // Dispose the old adapter when a new one is created.\n        //\n        // This clean up function uses `adapterRef` because `adapter` can not be added to the dependency array of\n        // this `useEffect` -- we do not want to trigger a new adapter creation because of the first adapter\n        // creation.\n        if (beforeDisposeRef.current) {\n          await beforeDisposeRef.current(adapterRef.current);\n        }\n        adapterRef.current.dispose();\n        adapterRef.current = undefined;\n      }\n      if (creatingAdapterRef.current) {\n        console.warn('Adapter is already being created, please see storybook for more information: https://azure.github.io/communication-ui-library/?path=/story/troubleshooting--page');\n        return;\n      }\n      creatingAdapterRef.current = true;\n      let newAdapter = await createAzureCommunicationCallWithChatAdapter({\n        credential,\n        displayName,\n        endpoint,\n        locator,\n        userId,\n        /* @conditional-compile-remove(video-background-effects) */callAdapterOptions\n      });\n      if (afterCreateRef.current) {\n        newAdapter = await afterCreateRef.current(newAdapter);\n      }\n      adapterRef.current = newAdapter;\n      setAdapter(newAdapter);\n    })();\n  },\n  // Explicitly list all arguments so that caller doesn't have to memoize the `args` object.\n  [adapterRef, afterCreateRef, beforeDisposeRef, credential, displayName, endpoint, locator, userId, /* @conditional-compile-remove(video-background-effects) */callAdapterOptions]);\n\n  // Dispose any existing adapter when the component unmounts.\n  useEffect(() => {\n    return () => {\n      (async () => {\n        if (adapterRef.current) {\n          if (beforeDisposeRef.current) {\n            await beforeDisposeRef.current(adapterRef.current);\n          }\n          adapterRef.current.dispose();\n          adapterRef.current = undefined;\n        }\n      })();\n    };\n  }, []);\n  return adapter;\n};\n\n/**\n * Arguments for {@link createAzureCommunicationCallWithChatAdapterFromClient}\n *\n * @public\n */\nexport type AzureCommunicationCallWithChatAdapterFromClientArgs = {\n  callLocator: CallAdapterLocator | TeamsMeetingLinkLocator;\n  callAgent: CallAgent;\n  callClient: StatefulCallClient;\n  chatClient: StatefulChatClient;\n  chatThreadClient: ChatThreadClient;\n  /* @conditional-compile-remove(video-background-effects) */\n  callAdapterOptions?: AzureCommunicationCallAdapterOptions;\n};\n\n/**\n * Create a {@link CallWithChatAdapter} using the provided {@link StatefulChatClient} and {@link StatefulCallClient}.\n *\n * Useful if you want to keep a reference to {@link StatefulChatClient} and {@link StatefulCallClient}.\n * Please note that chatThreadClient has to be created by StatefulChatClient via chatClient.getChatThreadClient(chatThreadId) API.\n * Consider using {@link createAzureCommunicationCallWithChatAdapter} for a simpler API.\n *\n * @public\n */\nexport const createAzureCommunicationCallWithChatAdapterFromClients = async ({\n  callClient,\n  callAgent,\n  callLocator,\n  chatClient,\n  chatThreadClient,\n  /* @conditional-compile-remove(video-background-effects) */\n  callAdapterOptions\n}: AzureCommunicationCallWithChatAdapterFromClientArgs): Promise<CallWithChatAdapter> => {\n  const createCallAdapterPromise = createAzureCommunicationCallAdapterFromClient(callClient, callAgent, callLocator, /* @conditional-compile-remove(video-background-effects) */\n  callAdapterOptions);\n  const createChatAdapterPromise = createAzureCommunicationChatAdapterFromClient(chatClient, chatThreadClient);\n  const [callAdapter, chatAdapter] = await Promise.all([createCallAdapterPromise, createChatAdapterPromise]);\n  return new AzureCommunicationCallWithChatAdapter(callAdapter, chatAdapter);\n};\n\n/**\n * Create a {@link CallWithChatAdapter} from the underlying adapters.\n *\n * This is an internal factory function used by browser tests to inject fake adapters for call and chat.\n *\n * @internal\n */\nexport const _createAzureCommunicationCallWithChatAdapterFromAdapters = (callAdapter: CallAdapter, chatAdapter: ChatAdapter): CallWithChatAdapter => new AzureCommunicationCallWithChatAdapter(callAdapter, chatAdapter);\nconst isTeamsMeetingLinkLocator = (locator: CallAndChatLocator | TeamsMeetingLinkLocator): locator is TeamsMeetingLinkLocator => {\n  return 'meetingLink' in locator;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { PartialDeep } from 'type-fest';\nimport { CompositeStrings } from '../LocalizationProvider';\nimport en_US from './en-US/strings.json';\nimport { _getKeys } from '@internal/acs-ui-common';\n\n/**\n *\n * @private\n */\nexport const createCompositeStrings = (localizedStrings: PartialDeep<CompositeStrings>): CompositeStrings => {\n  const strings: CompositeStrings = {\n    ...en_US\n  };\n  _getKeys(localizedStrings).forEach(key => {\n    // mark the value as unknown because the type changes based on the key.\n    // this is unsafe at runtime as we could assign the wrong type based on the key here.\n    // but typescript isn't smart enough to know that the key used across each access will result in the same type\n    (strings as Record<keyof CompositeStrings, unknown>)[key] = {\n      ...strings[key],\n      ...localizedStrings[key]\n    };\n  });\n  return strings;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_EN_GB } from '@internal/react-components';\nimport en_GB from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for English (British)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_EN_GB: CompositeLocale = {\n  component: COMPONENT_LOCALE_EN_GB,\n  strings: createCompositeStrings(en_GB)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_AR_SA } from '@internal/react-components';\nimport ar_SA from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Arabic (Saudi Arabia)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_AR_SA: CompositeLocale = {\n  component: COMPONENT_LOCALE_AR_SA,\n  strings: createCompositeStrings(ar_SA)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_CS_CZ } from '@internal/react-components';\nimport cs_CZ from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Czech (Czech Republic)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_CS_CZ: CompositeLocale = {\n  component: COMPONENT_LOCALE_CS_CZ,\n  strings: createCompositeStrings(cs_CZ)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_DE_DE } from '@internal/react-components';\nimport de_DE from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for German (Germany)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_DE_DE: CompositeLocale = {\n  component: COMPONENT_LOCALE_DE_DE,\n  strings: createCompositeStrings(de_DE)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_ES_ES } from '@internal/react-components';\nimport es_ES from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Spanish (Spain)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_ES_ES: CompositeLocale = {\n  component: COMPONENT_LOCALE_ES_ES,\n  strings: createCompositeStrings(es_ES)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_FI_FI } from '@internal/react-components';\nimport fi_FI from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Finnish (Finland)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_FI_FI: CompositeLocale = {\n  component: COMPONENT_LOCALE_FI_FI,\n  strings: createCompositeStrings(fi_FI)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_FR_FR } from '@internal/react-components';\nimport fr_FR from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for French (France)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_FR_FR: CompositeLocale = {\n  component: COMPONENT_LOCALE_FR_FR,\n  strings: createCompositeStrings(fr_FR)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_HE_IL } from '@internal/react-components';\nimport he_IL from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Hebrew (Israel)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_HE_IL: CompositeLocale = {\n  component: COMPONENT_LOCALE_HE_IL,\n  strings: createCompositeStrings(he_IL)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_IT_IT } from '@internal/react-components';\nimport it_IT from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Italian (Italy)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_IT_IT: CompositeLocale = {\n  component: COMPONENT_LOCALE_IT_IT,\n  strings: createCompositeStrings(it_IT)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_JA_JP } from '@internal/react-components';\nimport ja_JP from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Japanese (Japan)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_JA_JP: CompositeLocale = {\n  component: COMPONENT_LOCALE_JA_JP,\n  strings: createCompositeStrings(ja_JP)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_KO_KR } from '@internal/react-components';\nimport ko_KR from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Korean (South Korea)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_KO_KR: CompositeLocale = {\n  component: COMPONENT_LOCALE_KO_KR,\n  strings: createCompositeStrings(ko_KR)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_NB_NO } from '@internal/react-components';\nimport nb_NO from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Norwegian Bokml (Norway)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_NB_NO: CompositeLocale = {\n  component: COMPONENT_LOCALE_NB_NO,\n  strings: createCompositeStrings(nb_NO)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_NL_NL } from '@internal/react-components';\nimport nl_NL from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Dutch (Netherlands)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_NL_NL: CompositeLocale = {\n  component: COMPONENT_LOCALE_NL_NL,\n  strings: createCompositeStrings(nl_NL)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_PL_PL } from '@internal/react-components';\nimport pl_PL from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Polish (Poland)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_PL_PL: CompositeLocale = {\n  component: COMPONENT_LOCALE_PL_PL,\n  strings: createCompositeStrings(pl_PL)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_PT_BR } from '@internal/react-components';\nimport pt_BR from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Portuguese (Brazil)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_PT_BR: CompositeLocale = {\n  component: COMPONENT_LOCALE_PT_BR,\n  strings: createCompositeStrings(pt_BR)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_RU_RU } from '@internal/react-components';\nimport ru_RU from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Russian (Russia)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_RU_RU: CompositeLocale = {\n  component: COMPONENT_LOCALE_RU_RU,\n  strings: createCompositeStrings(ru_RU)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_SV_SE } from '@internal/react-components';\nimport sv_SE from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Swedish (Sweden)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_SV_SE: CompositeLocale = {\n  component: COMPONENT_LOCALE_SV_SE,\n  strings: createCompositeStrings(sv_SE)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_TR_TR } from '@internal/react-components';\nimport tr_TR from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Turkish (Turkey)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_TR_TR: CompositeLocale = {\n  component: COMPONENT_LOCALE_TR_TR,\n  strings: createCompositeStrings(tr_TR)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_ZH_CN } from '@internal/react-components';\nimport zh_CN from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Chinese (Mainland China)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_ZH_CN: CompositeLocale = {\n  component: COMPONENT_LOCALE_ZH_CN,\n  strings: createCompositeStrings(zh_CN)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { COMPONENT_LOCALE_ZH_TW } from '@internal/react-components';\nimport zh_TW from './strings.json';\nimport { createCompositeStrings } from '../utils';\nimport { CompositeLocale } from '../../LocalizationProvider';\n\n/**\n * Locale for Chinese (Taiwan)\n *\n * @public\n */\nexport const COMPOSITE_LOCALE_ZH_TW: CompositeLocale = {\n  component: COMPONENT_LOCALE_ZH_TW,\n  strings: createCompositeStrings(zh_TW)\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\n/* @conditional-compile-remove(video-background-effects) */\nimport type { BackgroundBlurConfig, BackgroundBlurEffect, BackgroundReplacementConfig, BackgroundReplacementEffect } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffectsDependency } from '@internal/calling-component-bindings';\n\n/* @conditional-compile-remove(video-background-effects) */\n/**\n *\n * Dependency resolution for video background effects using lazy loading.\n * @public\n */\nexport const onResolveVideoEffectDependencyLazy = async (): Promise<VideoBackgroundEffectsDependency> => {\n  const module = await import('@azure/communication-calling-effects');\n  const createBackgroundBlurEffect = (config?: BackgroundBlurConfig): BackgroundBlurEffect => {\n    return new module.BackgroundBlurEffect(config);\n  };\n  const createBackgroundReplacementEffect = (config: BackgroundReplacementConfig): BackgroundReplacementEffect => {\n    return new module.BackgroundReplacementEffect(config);\n  };\n  const VideoBackgroundEffectsDependency: VideoBackgroundEffectsDependency = {\n    createBackgroundBlurEffect,\n    createBackgroundReplacementEffect\n  };\n  return VideoBackgroundEffectsDependency;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { BackgroundBlurConfig, BackgroundBlurEffect, BackgroundReplacementConfig, BackgroundReplacementEffect } from '@azure/communication-calling-effects';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffectsDependency } from '@internal/calling-component-bindings';\n\n/* @conditional-compile-remove(video-background-effects) */\n/**\n * Dependency resolution for video background effects.\n *\n * @public\n */\nexport const onResolveVideoEffectDependency = async (): Promise<VideoBackgroundEffectsDependency> => {\n  const createBackgroundBlurEffect = (config?: BackgroundBlurConfig): BackgroundBlurEffect => {\n    return new BackgroundBlurEffect(config);\n  };\n  const createBackgroundReplacementEffect = (config: BackgroundReplacementConfig): BackgroundReplacementEffect => {\n    return new BackgroundReplacementEffect(config);\n  };\n  const VideoBackgroundEffectsDependency: VideoBackgroundEffectsDependency = {\n    createBackgroundBlurEffect,\n    createBackgroundReplacementEffect\n  };\n  return VideoBackgroundEffectsDependency;\n};","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { CallingHandlers, getCallingSelector, GetCallingSelector, useCallingHandlers, useCallingSelector } from '@internal/calling-component-bindings';\nimport { ChatHandlers, getChatSelector, GetChatSelector, useChatHandlers, useChatSelector } from '@internal/chat-component-bindings';\nimport { ChatClientState } from '@internal/chat-stateful-client';\nimport { CallClientState } from '@internal/calling-stateful-client';\nimport { Common } from '@internal/acs-ui-common';\n\n/**\n * Centralized state for {@link @azure/communication-calling#CallClient} or {@link @azure/communication-chat#ChatClient}.\n *\n * See also: {@link CallClientState}, {@link ChatClientState}.\n * @public\n */\nexport type ClientState = CallClientState & ChatClientState;\n\n/**\n * An optimized selector that refines {@link ClientState} updates into props for React Components in this library.\n *\n * @public\n */\nexport type Selector = (state: ClientState, props: any) => any;\n\n/**\n * Hook to obtain a selector for a specified component.\n *\n * Useful when implementing a custom component that utilizes the providers\n * exported from this library.\n *\n * @public\n */\nexport const useSelector = <ParamT extends Selector | undefined,>(selector: ParamT, selectorProps?: ParamT extends Selector ? Parameters<ParamT>[1] : undefined, type?: 'calling' | 'chat'): ParamT extends Selector ? ReturnType<ParamT> : undefined => {\n  // Because of react hooks rules, hooks can't be conditionally called\n  // We call both call and chat hooks and detect current context\n  // Return undefined and skip execution when not in that context\n  const callingMode = !type || type === 'calling';\n  const chatMode = !type || type === 'chat';\n  const callProps = useCallingSelector(callingMode ? (selector as any) : undefined, selectorProps);\n  const chatProps = useChatSelector(chatMode ? (selector as any) : undefined, selectorProps);\n  return callProps ?? chatProps;\n};\n\n/**\n * Helper type for {@link usePropsFor}.\n *\n * @public\n */\nexport type ChatReturnProps<Component extends (props: any) => JSX.Element> = GetChatSelector<Component> extends (state: ChatClientState, props: any) => any ? ReturnType<GetChatSelector<Component>> & Common<ChatHandlers, Parameters<Component>[0]> : never;\n\n/**\n * Helper type for {@link usePropsFor}.\n *\n * @public\n */\nexport type CallingReturnProps<Component extends (props: any) => JSX.Element> = GetCallingSelector<Component> extends (state: CallClientState, props: any) => any ? ReturnType<GetCallingSelector<Component>> & Common<CallingHandlers, Parameters<Component>[0]> : never;\n\n/**\n * Helper type for {@link usePropsFor}.\n *\n * @public\n */\nexport type ComponentProps<Component extends (props: any) => JSX.Element> = ChatReturnProps<Component> extends never ? CallingReturnProps<Component> extends never ? undefined : CallingReturnProps<Component> : ChatReturnProps<Component>;\n\n/**\n * Primary hook to get all hooks necessary for a React Component from this library.\n *\n * To call this hook, the component requires to be wrapped under these providers:\n *\n * 1. For chat components: {@link ChatClientProvider} and {@link ChatThreadClientProvider}.\n *\n * 2. For calling components: {@link CallClientProvider}, {@link CallAgentProvider} and {@link CallAgentProvider}.\n *\n * Most straightforward usage of a components looks like:\n *\n * @example\n * ```\n *     import { ParticipantList, usePropsFor } from '@azure/communication-react';\n *\n *     const App = (): JSX.Element => {\n *         // ... code to setup Providers ...\n *\n *         return <ParticipantList {...usePropsFor(ParticipantList)}/>\n *     }\n * ```\n *\n * @public\n */\nexport const usePropsFor = <Component extends (props: any) => JSX.Element,>(component: Component, type?: 'calling' | 'chat'): ComponentProps<Component> => {\n  const callingSelector = type === 'calling' || !type ? getCallingSelector(component) : undefined;\n  const chatSelector = type === 'chat' || !type ? getChatSelector(component) : undefined;\n  const callProps = useCallingSelector(callingSelector);\n  const chatProps = useChatSelector(chatSelector);\n  const callingHandlers = useCallingHandlers<Parameters<Component>[0]>(component);\n  const chatHandlers = useChatHandlers<Parameters<Component>[0]>(component);\n  if (chatProps) {\n    if (!chatHandlers) {\n      throw 'Please initialize chatClient and chatThreadClient first!';\n    }\n    return ({\n      ...chatProps,\n      ...chatHandlers\n    } as any);\n  }\n  if (callProps) {\n    if (!callingHandlers) {\n      throw 'Please initialize callClient first!';\n    }\n    return ({\n      ...callProps,\n      ...callingHandlers\n    } as any);\n  }\n  if (!chatSelector && !callingSelector) {\n    throw \"Can't find corresponding selector for this component. Please check the supported components from Azure Communication UI Feature Component List.\";\n  } else {\n    throw 'Could not find props for this component, ensure the component is wrapped by appropriate providers.';\n  }\n};"],"names":["getIdentifierRawId","createIdentifierFromRawId","isCommunicationUserIdentifier","isPhoneNumberIdentifier","isMicrosoftTeamsUserIdentifier","isUnknownIdentifier","telemetryVersion","getDeviceManager","getRole","getRemoteParticipants","getLocalParticipantRaisedHand","getLocalVideoStreams","getDisplayName","getLatestErrors","getCaptionsStatus","__awaiter","reselect","LocalVideoStream","Features","createClientLogger","enableMapSet","enablePatches","produce","getLogLevel","VideoStreamRenderer","ParticipantSubscriber","CallClient","CallContext","getIdentifierKind","createContext","useContext","useState","useEffect","mergeStyles","en_US","LocaleContext","LocalizationProvider","useLocale","Text","Stack","MessageBarType","useRef","MessageBar","useMemo","mergeThemes","getTheme","ThemeProvider","WifiWarning20Filled","MoreHorizontal20Regular","ChevronRight20Regular","ChevronLeft20Regular","HandRight20Filled","HandRightOff20Filled","VideoOff20Filled","Video20Filled","CallEnd20Filled","MicOff20Filled","Mic20Filled","Settings20Filled","People20Filled","People20Regular","ShareScreenStart20Filled","ShareScreenStop20Filled","HandRight20Regular","HandRightOff20Regular","Dismiss20Regular","Checkmark20Regular","VideoProhibited16Filled","MicProhibited16Filled","MicOff16Filled","Mic16Filled","SpeakerMute16Filled","Dismiss16Regular","Video16Filled","CheckmarkCircle16Regular","Edit20Regular","ErrorCircle16Regular","Delete20Regular","ArrowClockwise16Regular","Eye16Regular","Circle16Regular","Video20Regular","Mic20Regular","Speaker220Regular","MicOff16Regular","MoreHorizontal20Filled","Send20Regular","Send20Filled","Backspace20Regular","Pin16Filled","ScaleFit20Regular","ScaleFill20Regular","Pin16Regular","PinOff16Regular","VideoBackgroundEffect20Regular","VideoBackgroundEffect20Filled","ClosedCaption20Regular","ClosedCaptionOff20Regular","Settings20Regular","PersonVoice20Regular","Translate20Regular","FontWeights","concatStyleSets","useCallback","TextField","iconWrapperStyle","useTheme","TooltipHost","IconButton","SendBox","Icon","titleStyle","DefaultButton","Modal","createGUID","hostStyles","makeStyles","shorthands","tokens","buttonWithIconStyles","convertRemToPx","webLightTheme","TextDirectionProvider","FluentProvider","Announcer","MINIMUM_TOUCH_TARGET_HEIGHT_REM","ChatMyMessage","mergeClasses","PersonaSize","Persona","ContextualMenu","DirectionalHint","Link","DOMElement","attributesToProps","FluentChatMessage","FluentChatMyMessage","FontIcon","SystemMessageComponent","PrimaryButton","Chat","Spinner","iconContainerStyle","iconStyles","useId","participantStateStringTrampoline","preventDismissOnEvent","participantListStyle","PersonaPresence","ParticipantList","merge","FocusZone","containerStyles","AnimationStyles","mergeStyleSets","FocusTrapZone","palette","defaultPersonaStyles","useLayoutEffect","Layer","SpinnerSize","rootLayoutStyle","leftRightButtonStyles","rootStyle","childrenContainerStyle","useDraggable","overflowGalleryTrampoline","AnimationVariables","classNamesFunction","React","getPropsWithDefaults","useMergedRefs","useResponsiveMode","useWindow","useSetTimeout","useBoolean","useConst","EventGroup","allowOverscrollOnElement","allowScrollOnElement","KeyCodes","elementContains","useUnmount","ResponsiveMode","Popup","Overlay","memoizeFunction","on","getGlobalClassNames","ZIndexes","styled","DRAG_OPTIONS","LayerHost","controlBarStyles","ContextualMenuItemType","DefaultPalette","tileContainerStyles","buttonStyles","useWarnings","Label","Dropdown","en_GB","ar_SA","cs_CZ","de_DE","es_ES","fi_FI","fr_FR","he_IL","it_IT","ja_JP","ko_KR","nb_NO","nl_NL","pl_PL","pt_BR","ru_RU","sv_SE","tr_TR","zh_CN","zh_TW","createSelector","updateUserDisplayNamesTrampoline","isMicrosoftTeamsAppIdentifier","useHandlers","useSelector","errorBarSelector","DiagnosticQuality","maxErrorCount","getSelector","findSelector","__asyncValues","nanoid","ChatClient","ChatContext","ComponentLocalizationProvider","Speaker220Filled","CameraSwitch24Regular","Chat20Filled","Chat20Regular","VideoProhibited20Filled","MicProhibited20Filled","CallMissed20Filled","PersonDelete20Filled","Info20Filled","VideoPerson20Filled","Grid20Regular","WindowHeaderHorizontal20Regular","PersonSquare20Regular","TableSimple20Regular","BoardSplit20Regular","ContentView20Regular","Table20Regular","Circle20Regular","Dialpad20Regular","registerIcons","Customizer","useAdapter","useAdaptedSelector","useSelectorWithAdaptation","adaptCompositeState","memoizeState","createCompositeHandlers","usePropsFor","getChatSelector","displayNameStyles","SimpleSendBox","isIOS","FileUploadButton","CALL_REJECTED_CODE","isDisabled","icon","getCallingSelector","containerStyle","mediaGalleryContainerStyles","isEnabled","_generateDefaultDeviceMenuProps","DrawerMenu","Toggle","FocusZoneDirection","CommandBarButton","localVideoViewOptions","remoteVideoViewOptions","moreDetailsStyle","Panel","PanelType","Image","EventEmitter","SDKLocalVideoStream","BackgroundBlurEffect","BackgroundReplacementEffect","useCallingSelector","useChatSelector","useCallingHandlers","useChatHandlers"],"mappings":"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"}