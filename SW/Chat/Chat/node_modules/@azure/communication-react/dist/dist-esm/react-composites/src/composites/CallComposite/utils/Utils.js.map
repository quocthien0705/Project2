{"version":3,"file":"Utils.js","sourceRoot":"","sources":["../../../../../../../preprocess-dist/react-composites/src/composites/CallComposite/utils/Utils.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CallAdapterState, CallCompositePage, END_CALL_PAGES, StartCallIdentifier } from '../adapter/CallAdapter';\nimport { _isInCall, _isPreviewOn, _isInLobbyOrConnecting } from '@internal/calling-component-bindings';\nimport { CallControlOptions } from '../types/CallControlOptions';\nimport { CallState, RemoteParticipantState } from '@internal/calling-stateful-client';\nimport { isPhoneNumberIdentifier } from '@azure/communication-common';\nimport { AdapterStateModifier, CallAdapterLocator } from '../adapter/AzureCommunicationCallAdapter';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffectsDependency } from '@internal/calling-component-bindings';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundEffect } from '../adapter/CallAdapter';\nimport { VideoDeviceInfo } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoEffectProcessor } from '@azure/communication-calling';\nimport { CompositeLocale } from '../../localization';\nimport { CallCompositeIcons } from '../../common/icons';\nconst ACCESS_DENIED_TEAMS_MEETING_SUB_CODE = 5854;\nconst REMOTE_PSTN_USER_HUNG_UP = 560000;\nconst REMOVED_FROM_CALL_SUB_CODES = [5000, 5300, REMOTE_PSTN_USER_HUNG_UP];\n/* @conditional-compile-remove(calling-sounds) */\nconst CALL_REJECTED_CODE = 603;\n/* @conditional-compile-remove(rooms) */\n/** @private */\nexport const ROOM_NOT_FOUND_SUB_CODE = 5732;\n/* @conditional-compile-remove(rooms) */\n/** @private */\nexport const ROOM_NOT_VALID_SUB_CODE = 5829;\n/* @conditional-compile-remove(rooms) */\n/** @private */\nexport const NOT_INVITED_TO_ROOM_SUB_CODE = 5828;\n/* @conditional-compile-remove(rooms) */\n/** @private */\nexport const INVITE_TO_ROOM_REMOVED_SUB_CODE = 5317;\n/** @private */\nexport const CALL_TIMEOUT_SUB_CODE = 10004;\n/** @private */\nexport const CALL_TIMEOUT_CODE = 487;\n/** @private */\nexport const BOT_TIMEOUT_CODE = 486;\n/** @private */\nexport const BOT_TIMEOUT_SUB_CODE = 10321;\n\n/**\n * @private\n */\nexport const isCameraOn = (state: CallAdapterState): boolean => {\n  if (state.call) {\n    const stream = state.call.localVideoStreams.find(stream => stream.mediaStreamType === 'Video');\n    return !!stream;\n  } else {\n    if (state.devices.selectedCamera) {\n      const previewOn = _isPreviewOn(state.devices);\n      return previewOn;\n    }\n  }\n  return false;\n};\n\n/**\n * Reduce the set of call controls visible on mobile.\n * For example do not show screenshare button.\n *\n * @private\n */\nexport const reduceCallControlsForMobile = (callControlOptions: CallControlOptions | boolean | undefined): CallControlOptions | false => {\n  if (callControlOptions === false) {\n    return false;\n  }\n\n  // Ensure call controls a valid object.\n  const reduceCallControlOptions = callControlOptions === true ? {} : callControlOptions || {};\n\n  // Set to compressed mode when composite is optimized for mobile\n  reduceCallControlOptions.displayType = 'compact';\n\n  // Do not show screen share button when composite is optimized for mobile unless the developer\n  // has explicitly opted in.\n  if (reduceCallControlOptions.screenShareButton !== true) {\n    reduceCallControlOptions.screenShareButton = false;\n  }\n  return reduceCallControlOptions;\n};\nenum CallEndReasons {\n  LEFT_CALL,\n  ACCESS_DENIED,\n  REMOVED_FROM_CALL,\n}\nconst getCallEndReason = (call: CallState): CallEndReasons => {\n  const remoteParticipantsEndedArray = Array.from(Object.values(call.remoteParticipantsEnded));\n  /**\n   * Handle the special case in a PSTN call where removing the last user kicks the caller out of the call.\n   * The code and subcode is the same as when a user is removed from a teams interop call.\n   * Hence, we look at the last remote participant removed to determine if the last participant removed was a phone number.\n   * If yes, the caller was kicked out of the call, but we need to show them that they left the call.\n   * Note: This check will only work for 1:1 PSTN Calls. The subcode is different for 1:N PSTN calls, and we do not need to handle that case.\n   */\n  if (remoteParticipantsEndedArray.length === 1 && isPhoneNumberIdentifier(remoteParticipantsEndedArray[0].identifier) && call.callEndReason?.subCode !== REMOTE_PSTN_USER_HUNG_UP) {\n    return CallEndReasons.LEFT_CALL;\n  }\n  if (call.callEndReason?.subCode && call.callEndReason.subCode === ACCESS_DENIED_TEAMS_MEETING_SUB_CODE) {\n    return CallEndReasons.ACCESS_DENIED;\n  }\n  if (call.callEndReason?.subCode && REMOVED_FROM_CALL_SUB_CODES.includes(call.callEndReason.subCode)) {\n    return CallEndReasons.REMOVED_FROM_CALL;\n  }\n  if (call.callEndReason) {\n    // No error codes match, assume the user simply left the call regularly\n    return CallEndReasons.LEFT_CALL;\n  }\n  throw new Error('No matching call end reason');\n};\n\n/**\n * Helper function for determine strings and icons for end call page\n * @private\n */\nexport const getEndedCallPageProps = (locale: CompositeLocale, endedCall?: CallState): {\n  title: string;\n  moreDetails?: string;\n  disableStartCallButton: boolean;\n  iconName: keyof CallCompositeIcons;\n} => {\n  let title = locale.strings.call.leftCallTitle;\n  let moreDetails = locale.strings.call.leftCallMoreDetails;\n  let disableStartCallButton = false;\n  let iconName: keyof CallCompositeIcons = 'NoticePageLeftCall';\n  /* @conditional-compile-remove(rooms) */\n  switch (endedCall?.callEndReason?.subCode) {\n    case ROOM_NOT_FOUND_SUB_CODE:\n      if (locale.strings.call.roomNotFoundTitle) {\n        title = locale.strings.call.roomNotFoundTitle;\n        moreDetails = locale.strings.call.roomNotFoundDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageRoomNotFound';\n      }\n      break;\n    case ROOM_NOT_VALID_SUB_CODE:\n      if (locale.strings.call.roomNotValidTitle) {\n        title = locale.strings.call.roomNotValidTitle;\n        moreDetails = locale.strings.call.roomNotValidDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageRoomNotValid';\n      }\n      break;\n    case NOT_INVITED_TO_ROOM_SUB_CODE:\n      if (locale.strings.call.notInvitedToRoomTitle) {\n        title = locale.strings.call.notInvitedToRoomTitle;\n        moreDetails = locale.strings.call.notInvitedToRoomDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageNotInvitedToRoom';\n      }\n      break;\n    case INVITE_TO_ROOM_REMOVED_SUB_CODE:\n      if (locale.strings.call.inviteToRoomRemovedTitle) {\n        title = locale.strings.call.inviteToRoomRemovedTitle;\n        moreDetails = locale.strings.call.inviteToRoomRemovedDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageInviteToRoomRemoved';\n      }\n      break;\n    case CALL_TIMEOUT_SUB_CODE:\n      if (endedCall?.callEndReason?.code === CALL_TIMEOUT_CODE && locale.strings.call.callTimeoutTitle) {\n        title = locale.strings.call.callTimeoutTitle;\n        moreDetails = locale.strings.call.callTimeoutDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageCallTimeout';\n      }\n      break;\n    case BOT_TIMEOUT_SUB_CODE:\n      if (endedCall?.callEndReason?.code === BOT_TIMEOUT_CODE && locale.strings.call.callTimeoutBotTitle) {\n        title = locale.strings.call.callTimeoutBotTitle;\n        moreDetails = locale.strings.call.callTimeoutBotDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageCallTimeout';\n      }\n      break;\n  }\n  /* @conditional-compile-remove(calling-sounds) */\n  switch (endedCall?.callEndReason?.code) {\n    case CALL_REJECTED_CODE:\n      if (locale.strings.call.callRejectedTitle) {\n        title = locale.strings.call.callRejectedTitle;\n        moreDetails = locale.strings.call.callRejectedMoreDetails;\n        disableStartCallButton = true;\n        iconName = 'NoticePageCallRejected';\n      }\n      break;\n  }\n  return {\n    title,\n    moreDetails,\n    disableStartCallButton,\n    iconName\n  };\n};\n\n/**\n * type definition for conditional-compilation\n */\ntype GetCallCompositePageFunction = ((call: CallState | undefined, previousCall: CallState | undefined) => CallCompositePage) & ((call: CallState | undefined, previousCall: CallState | undefined, /* @conditional-compile-remove(call-transfer) */transferCall?: CallState) => CallCompositePage);\n/**\n * Get the current call composite page based on the current call composite state\n *\n * @param Call - The current call state\n * @param previousCall - The state of the most recent previous call that has ended.\n *\n * @remarks - The previousCall state is needed to determine if the call has ended.\n * When the call ends a new call object is created, and so we must lookback at the\n * previous call state to understand how the call has ended. If there is no previous\n * call we know that this is a fresh call and can display the configuration page.\n *\n * @private\n */\nexport const getCallCompositePage: GetCallCompositePageFunction = (call, previousCall?, transferCall?: CallState, unsupportedBrowserInfo?: {\n  unsupportedBrowserVersionOptedIn?: boolean;\n}): CallCompositePage => {\n  /* @conditional-compile-remove(call-transfer) */\n  if (transferCall !== undefined) {\n    return 'transferring';\n  }\n  if (call) {\n    // Must check for ongoing call *before* looking at any previous calls.\n    // If the composite completes one call and joins another, the previous calls\n    // will be populated, but not relevant for determining the page.\n\n    // `_isInLobbyOrConnecting` needs to be checked first because `_isInCall` also returns true when call is in lobby.\n    if (_isInLobbyOrConnecting(call?.state)) {\n      return 'lobby';\n      // `LocalHold` needs to be checked before `isInCall` since it is also a state that's considered in call.\n    } else if (call?.state === 'LocalHold') {\n      return 'call';\n    } else if (call?.state === 'Disconnecting') {\n      return 'leaving';\n    } else if (_isInCall(call?.state)) {\n      return 'call';\n    } else {\n      // When the call object has been constructed after clicking , but before 'connecting' has been\n      // set on the call object, we continue to show the configuration screen.\n      // The call object does not correctly reflect local device state until `call.state` moves to `connecting`.\n      // Moving to the 'lobby' page too soon leads to components that depend on the `call` object to show incorrect\n      // transitional state.\n      return 'configuration';\n    }\n  }\n  if (previousCall) {\n    const reason = getCallEndReason(previousCall);\n    switch (reason) {\n      case CallEndReasons.ACCESS_DENIED:\n        return 'accessDeniedTeamsMeeting';\n      case CallEndReasons.REMOVED_FROM_CALL:\n        return 'removedFromCall';\n      case CallEndReasons.LEFT_CALL:\n        if (previousCall.diagnostics.network.latest.noNetwork) {\n          return 'joinCallFailedDueToNoNetwork';\n        }\n        return 'leftCall';\n    }\n  }\n\n  // No call state - show starting page (configuration)\n  return 'configuration';\n};\n\n/** @private */\nexport const IsCallEndedPage = (page: CallCompositePage): boolean => END_CALL_PAGES.includes(page);\n\n/**\n * Creates a new call control options object and sets the correct values for disabling\n * the buttons provided in the `disabledControls` array.\n * Returns a new object without changing the original object.\n * @param callControlOptions options for the call control component that need to be modified.\n * @param disabledControls An array of controls to disable.\n * @returns a copy of callControlOptions with disabledControls disabled\n * @private\n */\nexport const disableCallControls = (callControlOptions: CallControlOptions | boolean | undefined, disabledControls: (keyof CallControlOptions)[]): CallControlOptions | boolean | undefined => {\n  if (callControlOptions === false) {\n    return false;\n  }\n  // Ensure we clone the prop if it is an object to ensure we do not mutate the original prop.\n  let newOptions: CallControlOptions | boolean | undefined = (callControlOptions instanceof Object ? ({\n    ...callControlOptions\n  } as CallControlOptions) : callControlOptions) ?? ({} as Partial<CallControlOptions>);\n  if (newOptions === true || newOptions === undefined) {\n    newOptions = disabledControls.reduce((acc, key) => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      // @ts-expect-error TODO: fix noImplicitAny error here\n      // Not solveable at this time due to typescript limitations. The typing is too complex for typescript to\n      // understand. Will need to revisit when either typescript or the calling component bindings are updated.\n      acc[key] = {\n        disabled: true\n      };\n      return acc;\n    }, ({} as Partial<CallControlOptions>));\n  } else {\n    disabledControls.forEach(key => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      // @ts-expect-error refer to above comment\n      if (newOptions[key] !== false) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        // @ts-expect-error refer to above comment\n        newOptions[key] = {\n          disabled: true\n        };\n      }\n    });\n  }\n  return newOptions;\n};\n\n/**\n * Check if a disabled object is provided for a button and returns if the button is disabled.\n * A button is only disabled if is explicitly set to disabled.\n *\n * @param option\n * @returns whether a button is disabled\n * @private\n */\nexport const isDisabled = (option: boolean | {\n  disabled: boolean;\n} | undefined): boolean => {\n  if (option === undefined || typeof option === 'boolean') {\n    return false;\n  }\n  return option.disabled;\n};\n/**\n * Check if we are using safari browser\n * @private\n */\nexport const _isSafari = (environmentInfo: undefined): boolean => {\n  return /^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent);\n};\n\n/**\n * @private\n * This is the util function to create a participant modifier for remote participantList\n * It memoize previous original participant items and only update the changed participant\n * It takes in one modifier function to generate one single participant object, it returns undefined if the object keeps unmodified\n */\nexport const createParticipantModifier = (createModifiedParticipant: (id: string, participant: RemoteParticipantState) => RemoteParticipantState | undefined): AdapterStateModifier => {\n  let previousParticipantState: {\n    [keys: string]: RemoteParticipantState;\n  } | undefined = undefined;\n  let modifiedParticipants: {\n    [keys: string]: RemoteParticipantState;\n  } = {};\n  const memoizedParticipants: {\n    [id: string]: {\n      originalRef: RemoteParticipantState;\n      newParticipant: RemoteParticipantState;\n    };\n  } = {};\n  return (state: CallAdapterState) => {\n    // if root state is the same, we don't need to update the participants\n    if (state.call?.remoteParticipants !== previousParticipantState) {\n      modifiedParticipants = {};\n      const originalParticipants = state.call?.remoteParticipants;\n      for (const key in originalParticipants) {\n        const modifiedParticipant = createModifiedParticipant(key, originalParticipants[key]);\n        if (modifiedParticipant === undefined) {\n          modifiedParticipants[key] = originalParticipants[key];\n          continue;\n        }\n        // Generate the new item if original cached item has been changed\n        if (memoizedParticipants[key]?.originalRef !== originalParticipants[key]) {\n          memoizedParticipants[key] = {\n            newParticipant: modifiedParticipant,\n            originalRef: originalParticipants[key]\n          };\n        }\n\n        // the modified participant is always coming from the memoized cache, whether is was refreshed\n        // from the previous closure or not\n        modifiedParticipants[key] = memoizedParticipants[key].newParticipant;\n      }\n      previousParticipantState = state.call?.remoteParticipants;\n    }\n    return {\n      ...state,\n      call: state.call ? {\n        ...state.call,\n        remoteParticipants: modifiedParticipants\n      } : undefined\n    };\n  };\n};\n\n/* @conditional-compile-remove(video-background-effects) */\n/** @private */\nexport const getBackgroundEffectFromSelectedEffect = (selectedEffect: VideoBackgroundEffect | undefined, VideoBackgroundEffectsDependency: VideoBackgroundEffectsDependency): VideoEffectProcessor | undefined => selectedEffect?.effectName === 'blur' ? VideoBackgroundEffectsDependency.createBackgroundBlurEffect() : selectedEffect?.effectName === 'replacement' ? VideoBackgroundEffectsDependency.createBackgroundReplacementEffect({\n  backgroundImageUrl: selectedEffect.backgroundImageUrl\n}) : undefined;\n\n/**\n * @remarks this logic should mimic the onToggleCamera in the common call handlers.\n * @private\n */\nexport const getSelectedCameraFromAdapterState = (state: CallAdapterState): VideoDeviceInfo | undefined => state.devices.selectedCamera || state.devices.cameras[0];\n\n/**\n * Helper to determine if the adapter has a locator or targetCallees\n * @param locatorOrTargetCallees\n * @returns boolean to determine if the adapter has a locator or targetCallees, true is locator, false is targetCallees\n * @private\n */\nexport const getLocatorOrTargetCallees = (locatorOrTargetCallees: CallAdapterLocator | StartCallIdentifier[]): locatorOrTargetCallees is StartCallIdentifier[] => {\n  return !!Array.isArray(locatorOrTargetCallees);\n};"]}