{"version":3,"file":"useHandlers.js","sourceRoot":"","sources":["../../../../../../../preprocess-dist/react-composites/src/composites/CallComposite/hooks/useHandlers.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { CommonCallingHandlers } from '@internal/calling-component-bindings';\nimport { CommonProperties, toFlatCommunicationIdentifier } from '@internal/acs-ui-common';\nimport { ReactElement } from 'react';\nimport memoizeOne from 'memoize-one';\nimport { CommonCallAdapter } from '..';\n/* @conditional-compile-remove(video-background-effects) */\nimport { VideoBackgroundBlurEffect, VideoBackgroundReplacementEffect } from '..';\nimport { useAdapter } from '../adapter/CallAdapterProvider';\nimport { isCameraOn } from '../utils';\nimport { DtmfTone } from '@azure/communication-calling';\n/* @conditional-compile-remove(video-background-effects) */\nimport type { BackgroundReplacementConfig, BackgroundBlurConfig } from '@azure/communication-calling';\n/**\n * @private\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/explicit-function-return-type\nexport const useHandlers = <PropsT,>(_component: (props: PropsT) => ReactElement | null): Pick<CommonCallingHandlers, CommonProperties<CommonCallingHandlers, PropsT>> => {\n  const adapter = useAdapter();\n  const compositeHandlers = createCompositeHandlers(adapter);\n  return compositeHandlers;\n};\nconst createCompositeHandlers = memoizeOne((adapter: CommonCallAdapter): CommonCallingHandlers => {\n  return {\n    onCreateLocalStreamView: async options => {\n      return await adapter.createStreamView(undefined, options);\n    },\n    onCreateRemoteStreamView: async (userId, options) => {\n      return await adapter.createStreamView(userId, options);\n    },\n    onHangUp: async (forEveryone?: boolean) => {\n      await adapter.leaveCall(forEveryone);\n    },\n    onSendDtmfTone: async (dtmfTone: DtmfTone) => {\n      await adapter.sendDtmfTone(dtmfTone);\n    },\n    onRemoveParticipant: async (userId: string) => {\n      if (typeof userId === 'string') {\n        await adapter.removeParticipant(userId);\n      } else {}\n    },\n    /* @conditional-compile-remove(raise-hand) */\n    onRaiseHand: async () => {\n      await adapter.raiseHand();\n    },\n    /* @conditional-compile-remove(raise-hand) */\n    onLowerHand: async () => {\n      await adapter.lowerHand();\n    },\n    /* @conditional-compile-remove(raise-hand) */\n    onToggleRaiseHand: async () => {\n      adapter.getState().call?.raiseHand.localParticipantRaisedHand ? await adapter.lowerHand() : await adapter.raiseHand();\n    },\n    onSelectCamera: async (deviceInfo, options) => {\n      await adapter.setCamera(deviceInfo, options);\n    },\n    onSelectMicrophone: async deviceInfo => {\n      await adapter.setMicrophone(deviceInfo);\n    },\n    onSelectSpeaker: async deviceInfo => {\n      await adapter.setSpeaker(deviceInfo);\n    },\n    onStartCall: (participants, options?) => {\n      const rawIds = participants.map(participant => toFlatCommunicationIdentifier(participant));\n      return adapter.startCall(rawIds, options);\n    },\n    onStartScreenShare: async () => {\n      await adapter.startScreenShare();\n    },\n    onStopScreenShare: async () => {\n      await adapter.stopScreenShare();\n    },\n    onToggleCamera: async options => {\n      isCameraOn(adapter.getState()) ? await adapter.stopCamera() : await adapter.startCamera(options);\n    },\n    onToggleMicrophone: async () => {\n      return adapter.getState().call?.isMuted ? await adapter.unmute() : await adapter.mute();\n    },\n    onToggleScreenShare: async () => {\n      return adapter.getState().call?.isScreenSharingOn ? await adapter.stopScreenShare() : await adapter.startScreenShare();\n    },\n    onStartLocalVideo: async () => {\n      if (adapter.getState().call) {\n        return adapter.startCamera();\n      }\n    },\n    onDisposeLocalStreamView: async () => {\n      return adapter.disposeLocalVideoStreamView();\n    },\n    onDisposeRemoteStreamView: async userId => {\n      return adapter.disposeStreamView(userId);\n    },\n    onDisposeRemoteScreenShareStreamView: async userId => {\n      return adapter.disposeScreenShareStreamView(userId);\n    },\n    onDisposeRemoteVideoStreamView: async userId => {\n      return adapter.disposeRemoteVideoStreamView(userId);\n    },\n    /* @conditional-compile-remove(video-background-effects) */\n    onRemoveVideoBackgroundEffects: async () => {\n      return await adapter.stopVideoBackgroundEffects();\n    },\n    /* @conditional-compile-remove(video-background-effects) */\n    onBlurVideoBackground: async (backgroundBlurConfig?: BackgroundBlurConfig) => {\n      const blurConfig: VideoBackgroundBlurEffect = {\n        effectName: 'blur',\n        ...backgroundBlurConfig\n      };\n      return await adapter.startVideoBackgroundEffect(blurConfig);\n    },\n    /* @conditional-compile-remove(video-background-effects) */\n    onReplaceVideoBackground: async (backgroundReplacementConfig: BackgroundReplacementConfig) => {\n      const replacementConfig: VideoBackgroundReplacementEffect = {\n        effectName: 'replacement',\n        ...backgroundReplacementConfig\n      };\n      return await adapter.startVideoBackgroundEffect(replacementConfig);\n    },\n    /* @conditional-compile-remove(close-captions) */\n    onStartCaptions: async options => {\n      await adapter.startCaptions(options);\n    },\n    /* @conditional-compile-remove(close-captions) */\n    onStopCaptions: async () => {\n      await adapter.stopCaptions();\n    },\n    /* @conditional-compile-remove(close-captions) */\n    onSetSpokenLanguage: async language => {\n      await adapter.setSpokenLanguage(language);\n    },\n    /* @conditional-compile-remove(close-captions) */\n    onSetCaptionLanguage: async language => {\n      await adapter.setCaptionLanguage(language);\n    }\n  };\n});"]}