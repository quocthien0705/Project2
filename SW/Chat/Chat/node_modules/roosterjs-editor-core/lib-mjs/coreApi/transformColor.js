/**
 * @internal
 * Edit and transform color of elements between light mode and dark mode
 * @param core The EditorCore object
 * @param rootNode The root HTML elements to transform
 * @param includeSelf True to transform the root node as well, otherwise false
 * @param callback The callback function to invoke before do color transformation
 * @param direction To specify the transform direction, light to dark, or dark to light
 * @param forceTransform By default this function will only work when editor core is in dark mode.
 * Pass true to this value to force do color transformation even editor core is in light mode
 */
export var transformColor = function (core, rootNode, includeSelf, callback, direction, forceTransform, fromDarkMode) {
    if (fromDarkMode === void 0) { fromDarkMode = false; }
    var darkColorHandler = core.darkColorHandler, onExternalContentTransform = core.lifecycle.onExternalContentTransform;
    var toDarkMode = direction == 0 /* LightToDark */;
    if (rootNode && (forceTransform || core.lifecycle.isDarkMode)) {
        var transformer = onExternalContentTransform
            ? function (element) {
                onExternalContentTransform(element, fromDarkMode, toDarkMode, darkColorHandler);
            }
            : function (element) {
                darkColorHandler.transformElementColor(element, fromDarkMode, toDarkMode);
            };
        iterateElements(rootNode, transformer, includeSelf);
    }
    callback === null || callback === void 0 ? void 0 : callback();
};
function iterateElements(root, transformer, includeSelf) {
    if (includeSelf && isHTMLElement(root)) {
        transformer(root);
    }
    for (var child = root.firstChild; child; child = child.nextSibling) {
        if (isHTMLElement(child)) {
            transformer(child);
        }
        iterateElements(child, transformer);
    }
}
// This is not a strict check, we just need to make sure this element has style so that we can set style to it
// We don't use safeInstanceOf() here since this function will be called very frequently when extract html content
// in dark mode, so we need to make sure this check is fast enough
function isHTMLElement(node) {
    var htmlElement = node;
    return node.nodeType == Node.ELEMENT_NODE && !!htmlElement.style;
}
//# sourceMappingURL=transformColor.js.map