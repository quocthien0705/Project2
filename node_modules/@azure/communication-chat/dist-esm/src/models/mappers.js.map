{"version":3,"file":"mappers.js","sourceRoot":"","sources":["../../../src/models/mappers.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport {\n  SerializedCommunicationIdentifier,\n  deserializeCommunicationIdentifier,\n  serializeCommunicationIdentifier,\n} from \"@azure/communication-common\";\nimport * as RestModel from \"../generated/src/models\";\nimport { AddParticipantsRequest, SendMessageRequest } from \"./requests\";\nimport { CreateChatThreadOptions, SendMessageOptions, UpdateMessageOptions } from \"./options\";\nimport {\n  ChatAttachment,\n  ChatMessage,\n  ChatMessageContent,\n  ChatMessageReadReceipt,\n  ChatParticipant,\n  ChatRetentionPolicy,\n  ChatThreadProperties,\n  CreateChatThreadResult,\n} from \"./models\";\n\nexport const mapToCreateChatThreadOptionsRestModel = (\n  options: CreateChatThreadOptions,\n): RestModel.ChatCreateChatThreadOptionalParams => {\n  const { participants, idempotencyToken, ...rest } = options;\n  return {\n    repeatabilityRequestId: idempotencyToken,\n    ...rest,\n  };\n};\n\n/**\n * @internal\n * Mapping chat participant customer model to chat participant REST model\n */\nexport const mapToChatParticipantRestModel = (\n  chatParticipant: ChatParticipant,\n): RestModel.ChatParticipant => {\n  const { id, ...rest } = chatParticipant;\n  return {\n    ...rest,\n    communicationIdentifier: serializeCommunicationIdentifier(id),\n  };\n};\n\n/**\n * @internal\n * Mapping add participants request to add chat participants request REST model\n */\nexport const mapToAddChatParticipantsRequestRestModel = (\n  addParticipantsRequest: AddParticipantsRequest,\n): RestModel.AddChatParticipantsRequest => {\n  return {\n    participants: addParticipantsRequest.participants?.map((participant) =>\n      mapToChatParticipantRestModel(participant),\n    ),\n  };\n};\n\n/**\n * @internal\n * Mapping chat attachment SDK model to chat attachment REST model\n */\nexport const mapToChatAttachmentRestModel = (\n  chatAttachment: ChatAttachment,\n): RestModel.ChatAttachment => {\n  const { attachmentType, ...rest } = chatAttachment;\n  if (attachmentType === \"unknown\") {\n    throw new Error(\"'unknown' attachmentType not supported\");\n  }\n  return {\n    ...rest,\n    attachmentType: attachmentType,\n  };\n};\n\n/**\n * @internal\n * Mapping send message request and options to send chat message request REST model\n */\nexport const mapToSendChatMessageRequestRestModel = (\n  sendMessageRequest: SendMessageRequest,\n  sendMessageOptions: SendMessageOptions,\n): RestModel.SendChatMessageRequest => {\n  const { attachments, ...restOptions } = sendMessageOptions;\n  let request: RestModel.SendChatMessageRequest = { ...sendMessageRequest, ...restOptions };\n  if (attachments) {\n    request = {\n      ...request,\n      attachments: attachments?.map((attachment) => mapToChatAttachmentRestModel(attachment)),\n    };\n  }\n  return request;\n};\n\n/**\n * @internal\n * Mapping update message options to update chat message request REST model\n */\nexport const mapToUpdateChatMessageRequestRestModel = (\n  updateMessageOptions: UpdateMessageOptions,\n): RestModel.UpdateChatMessageRequest => {\n  const { attachments, ...restOptions } = updateMessageOptions;\n  let request: RestModel.UpdateChatMessageRequest = { ...restOptions };\n  if (attachments) {\n    request = {\n      ...request,\n      attachments: attachments?.map((attachment) => mapToChatAttachmentRestModel(attachment)),\n    };\n  }\n  return request;\n};\n\n/**\n * @internal\n * Mapping chat participant REST model to chat participant SDK model\n */\nexport const mapToChatParticipantSdkModel = (\n  chatParticipant: RestModel.ChatParticipant,\n): ChatParticipant => {\n  const { communicationIdentifier, ...rest } = chatParticipant;\n  return {\n    ...rest,\n    id: deserializeCommunicationIdentifier(\n      communicationIdentifier as SerializedCommunicationIdentifier,\n    ),\n  };\n};\n\n/**\n * @internal\n * Mapping chat attachment REST model to chat attachment SDK model\n */\nexport const mapToChatAttachmentSdkModel = (\n  chatAttachment: RestModel.ChatAttachment,\n): ChatAttachment => {\n  const { attachmentType, ...rest } = chatAttachment;\n  return {\n    ...rest,\n    attachmentType: attachmentType,\n  };\n};\n\n/**\n * @internal\n */\nexport const mapToChatContentSdkModel = (\n  content: RestModel.ChatMessageContent,\n): ChatMessageContent => {\n  const { participants, attachments, initiatorCommunicationIdentifier, ...otherChatContents } =\n    content;\n  let result: ChatMessageContent = { ...otherChatContents };\n  if (initiatorCommunicationIdentifier) {\n    const initiator = deserializeCommunicationIdentifier(\n      initiatorCommunicationIdentifier as SerializedCommunicationIdentifier,\n    );\n    result = { ...result, initiator };\n  }\n  if (participants) {\n    result = {\n      ...result,\n      participants: participants?.map((participant) => mapToChatParticipantSdkModel(participant)),\n    };\n  }\n  if (attachments) {\n    result = {\n      ...result,\n      attachments: attachments?.map((attachment) => mapToChatAttachmentSdkModel(attachment)),\n    };\n  }\n  return result;\n};\n\n/**\n * @internal\n * Mapping chat message REST model to chat message SDK model\n */\nexport const mapToChatMessageSdkModel = (chatMessage: RestModel.ChatMessage): ChatMessage => {\n  const { content, senderCommunicationIdentifier, ...otherChatMessage } = chatMessage;\n  let result: ChatMessage = { ...otherChatMessage };\n  if (content) {\n    result = {\n      ...result,\n      content: mapToChatContentSdkModel(content),\n    };\n  }\n  if (senderCommunicationIdentifier) {\n    const sender = deserializeCommunicationIdentifier(\n      senderCommunicationIdentifier as SerializedCommunicationIdentifier,\n    );\n    result = { ...result, sender };\n  }\n  return result;\n};\n\n/**\n * @internal\n * Mapping chat messages collection REST model to chat message SDK model array\n */\nexport const mapToChatMessagesSdkModelArray = (\n  chatMessagesCollection: RestModel.ChatMessagesCollection,\n): ChatMessage[] => {\n  return chatMessagesCollection.value?.map((chatMessage) => mapToChatMessageSdkModel(chatMessage));\n};\n\n/**\n * @internal\n * Mapping chat retention policy REST model to chat retention policy SDK model\n */\nexport const mapToRetentionPolicySdkModel = (\n  retentionPolicy: RestModel.ChatRetentionPolicyUnion,\n): ChatRetentionPolicy => {\n  if (retentionPolicy.kind === \"threadCreationDate\") {\n    return retentionPolicy as RestModel.ThreadCreationDateRetentionPolicy;\n  }\n  if (retentionPolicy.kind === \"none\") {\n    return retentionPolicy as RestModel.NoneRetentionPolicy;\n  } else {\n    throw new Error(`Retention Policy ${retentionPolicy.kind} is not supported`);\n  }\n};\n\n/**\n * @internal\n * Mapping chat thread REST model to chat thread SDK model\n */\nexport const mapToChatThreadPropertiesSdkModel = (\n  chatThread: RestModel.ChatThreadProperties,\n): ChatThreadProperties => {\n  const { createdByCommunicationIdentifier, retentionPolicy, ...rest } = chatThread;\n  let result: ChatThreadProperties = { ...rest };\n  if (createdByCommunicationIdentifier) {\n    result = {\n      ...result,\n      createdBy: deserializeCommunicationIdentifier(\n        createdByCommunicationIdentifier as SerializedCommunicationIdentifier,\n      ),\n    };\n  }\n\n  if (retentionPolicy) {\n    result = {\n      ...result,\n      retentionPolicy: mapToRetentionPolicySdkModel(retentionPolicy),\n    };\n  }\n\n  return result;\n};\n\n/**\n * @internal\n * Mapping chat thread REST model to chat thread SDK model\n */\nexport const mapToCreateChatThreadResultSdkModel = (\n  result: RestModel.CreateChatThreadResult,\n): CreateChatThreadResult => {\n  const { chatThread, ...rest } = result;\n  if (chatThread) {\n    return {\n      ...rest,\n      chatThread: mapToChatThreadPropertiesSdkModel(chatThread),\n    };\n  } else {\n    return { ...rest };\n  }\n};\n\n/**\n * @internal\n * Mapping read receipt REST model to read receipt SDK model\n */\nexport const mapToReadReceiptSdkModel = (\n  readReceipt: RestModel.ChatMessageReadReceipt,\n): ChatMessageReadReceipt => {\n  const { senderCommunicationIdentifier, ...rest } = readReceipt;\n  return {\n    ...rest,\n    sender: deserializeCommunicationIdentifier(\n      senderCommunicationIdentifier as SerializedCommunicationIdentifier,\n    ),\n  };\n};\n"]}